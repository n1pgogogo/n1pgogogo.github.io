function makeMap(n,t){const r=Object.create(null),a=n.split(",");for(let o=0;o<a.length;o++)r[a[o]]=!0;return t?o=>!!r[o.toLowerCase()]:o=>!!r[o]}const EMPTY_OBJ$1={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=n=>onRE.test(n),isModelListener=n=>n.startsWith("onUpdate:"),extend$2=Object.assign,remove$1=(n,t)=>{const r=n.indexOf(t);r>-1&&n.splice(r,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn$1=(n,t)=>hasOwnProperty$1.call(n,t),isArray$3=Array.isArray,isMap=n=>toTypeString(n)==="[object Map]",isSet=n=>toTypeString(n)==="[object Set]",isFunction$1=n=>typeof n=="function",isString$1=n=>typeof n=="string",isSymbol=n=>typeof n=="symbol",isObject$4=n=>n!==null&&typeof n=="object",isPromise=n=>isObject$4(n)&&isFunction$1(n.then)&&isFunction$1(n.catch),objectToString=Object.prototype.toString,toTypeString=n=>objectToString.call(n),toRawType=n=>toTypeString(n).slice(8,-1),isPlainObject=n=>toTypeString(n)==="[object Object]",isIntegerKey=n=>isString$1(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=n=>{const t=Object.create(null);return r=>t[r]||(t[r]=n(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(n=>n.replace(camelizeRE,(t,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(n=>n.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(n=>n.charAt(0).toUpperCase()+n.slice(1)),toHandlerKey=cacheStringFunction(n=>n?`on${capitalize(n)}`:""),hasChanged=(n,t)=>!Object.is(n,t),invokeArrayFns=(n,t)=>{for(let r=0;r<n.length;r++)n[r](t)},def=(n,t,r)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:r})},looseToNumber=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle$1(n){if(isArray$3(n)){const t={};for(let r=0;r<n.length;r++){const a=n[r],o=isString$1(a)?parseStringStyle(a):normalizeStyle$1(a);if(o)for(const s in o)t[s]=o[s]}return t}else{if(isString$1(n))return n;if(isObject$4(n))return n}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(n){const t={};return n.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const a=r.split(propertyDelimiterRE);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function normalizeClass(n){let t="";if(isString$1(n))t=n;else if(isArray$3(n))for(let r=0;r<n.length;r++){const a=normalizeClass(n[r]);a&&(t+=a+" ")}else if(isObject$4(n))for(const r in n)n[r]&&(t+=r+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(n){return!!n||n===""}const toDisplayString=n=>isString$1(n)?n:n==null?"":isArray$3(n)||isObject$4(n)&&(n.toString===objectToString||!isFunction$1(n.toString))?JSON.stringify(n,replacer,2):String(n),replacer=(n,t)=>t&&t.__v_isRef?replacer(n,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[a,o])=>(r[`${a} =>`]=o,r),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject$4(t)&&!isArray$3(t)&&!isPlainObject(t)?String(t):t;let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let r,a;for(r=0,a=this.effects.length;r<a;r++)this.effects[r].stop();for(r=0,a=this.cleanups.length;r<a;r++)this.cleanups[r]();if(this.scopes)for(r=0,a=this.scopes.length;r<a;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(n,t=activeEffectScope){t&&t.active&&t.effects.push(n)}function getCurrentScope(){return activeEffectScope}const createDep=n=>{const t=new Set(n);return t.w=0,t.n=0,t},wasTracked=n=>(n.w&trackOpBit)>0,newTracked=n=>(n.n&trackOpBit)>0,initDepMarkers=({deps:n})=>{if(n.length)for(let t=0;t<n.length;t++)n[t].w|=trackOpBit},finalizeDepMarkers=n=>{const{deps:t}=n;if(t.length){let r=0;for(let a=0;a<t.length;a++){const o=t[a];wasTracked(o)&&!newTracked(o)?o.delete(n):t[r++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}t.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,r=null,a){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,a)}run(){if(!this.active)return this.fn();let t=activeEffect,r=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(n){const{deps:t}=n;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(n);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const n=trackStack.pop();shouldTrack=n===void 0?!0:n}function track(n,t,r){if(shouldTrack&&activeEffect){let a=targetMap.get(n);a||targetMap.set(n,a=new Map);let o=a.get(r);o||a.set(r,o=createDep()),trackEffects(o)}}function trackEffects(n,t){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(n)||(n.n|=trackOpBit,r=!wasTracked(n)):r=!n.has(activeEffect),r&&(n.add(activeEffect),activeEffect.deps.push(n))}function trigger$2(n,t,r,a,o,s){const l=targetMap.get(n);if(!l)return;let u=[];if(t==="clear")u=[...l.values()];else if(r==="length"&&isArray$3(n)){const d=Number(a);l.forEach((v,g)=>{(g==="length"||g>=d)&&u.push(v)})}else switch(r!==void 0&&u.push(l.get(r)),t){case"add":isArray$3(n)?isIntegerKey(r)&&u.push(l.get("length")):(u.push(l.get(ITERATE_KEY)),isMap(n)&&u.push(l.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$3(n)||(u.push(l.get(ITERATE_KEY)),isMap(n)&&u.push(l.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(n)&&u.push(l.get(ITERATE_KEY));break}if(u.length===1)u[0]&&triggerEffects(u[0]);else{const d=[];for(const v of u)v&&d.push(...v);triggerEffects(createDep(d))}}function triggerEffects(n,t){const r=isArray$3(n)?n:[...n];for(const a of r)a.computed&&triggerEffect(a);for(const a of r)a.computed||triggerEffect(a)}function triggerEffect(n,t){(n!==activeEffect||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(isSymbol)),get$1$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...r){const a=toRaw(this);for(let s=0,l=this.length;s<l;s++)track(a,"get",s+"");const o=a[t](...r);return o===-1||o===!1?a[t](...r.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...r){pauseTracking();const a=toRaw(this)[t].apply(this,r);return resetTracking(),a}}),n}function hasOwnProperty(n){const t=toRaw(this);return track(t,"has",n),t.hasOwnProperty(n)}function createGetter(n=!1,t=!1){return function(a,o,s){if(o==="__v_isReactive")return!n;if(o==="__v_isReadonly")return n;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&s===(n?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(a))return a;const l=isArray$3(a);if(!n){if(l&&hasOwn$1(arrayInstrumentations,o))return Reflect.get(arrayInstrumentations,o,s);if(o==="hasOwnProperty")return hasOwnProperty}const u=Reflect.get(a,o,s);return(isSymbol(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(n||track(a,"get",o),t)?u:isRef(u)?l&&isIntegerKey(o)?u:u.value:isObject$4(u)?n?readonly(u):reactive(u):u}}const set$1$1=createSetter(),shallowSet=createSetter(!0);function createSetter(n=!1){return function(r,a,o,s){let l=r[a];if(isReadonly(l)&&isRef(l)&&!isRef(o))return!1;if(!n&&(!isShallow(o)&&!isReadonly(o)&&(l=toRaw(l),o=toRaw(o)),!isArray$3(r)&&isRef(l)&&!isRef(o)))return l.value=o,!0;const u=isArray$3(r)&&isIntegerKey(a)?Number(a)<r.length:hasOwn$1(r,a),d=Reflect.set(r,a,o,s);return r===toRaw(s)&&(u?hasChanged(o,l)&&trigger$2(r,"set",a,o):trigger$2(r,"add",a,o)),d}}function deleteProperty(n,t){const r=hasOwn$1(n,t);n[t];const a=Reflect.deleteProperty(n,t);return a&&r&&trigger$2(n,"delete",t,void 0),a}function has$1$1(n,t){const r=Reflect.has(n,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(n,"has",t),r}function ownKeys(n){return track(n,"iterate",isArray$3(n)?"length":ITERATE_KEY),Reflect.ownKeys(n)}const mutableHandlers={get:get$1$1,set:set$1$1,deleteProperty,has:has$1$1,ownKeys},readonlyHandlers={get:readonlyGet,set(n,t){return!0},deleteProperty(n,t){return!0}},shallowReactiveHandlers=extend$2({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=n=>n,getProto=n=>Reflect.getPrototypeOf(n);function get$3(n,t,r=!1,a=!1){n=n.__v_raw;const o=toRaw(n),s=toRaw(t);r||(t!==s&&track(o,"get",t),track(o,"get",s));const{has:l}=getProto(o),u=a?toShallow:r?toReadonly:toReactive;if(l.call(o,t))return u(n.get(t));if(l.call(o,s))return u(n.get(s));n!==o&&n.get(t)}function has$2(n,t=!1){const r=this.__v_raw,a=toRaw(r),o=toRaw(n);return t||(n!==o&&track(a,"has",n),track(a,"has",o)),n===o?r.has(n):r.has(n)||r.has(o)}function size(n,t=!1){return n=n.__v_raw,!t&&track(toRaw(n),"iterate",ITERATE_KEY),Reflect.get(n,"size",n)}function add$1(n){n=toRaw(n);const t=toRaw(this);return getProto(t).has.call(t,n)||(t.add(n),trigger$2(t,"add",n,n)),this}function set$4(n,t){t=toRaw(t);const r=toRaw(this),{has:a,get:o}=getProto(r);let s=a.call(r,n);s||(n=toRaw(n),s=a.call(r,n));const l=o.call(r,n);return r.set(n,t),s?hasChanged(t,l)&&trigger$2(r,"set",n,t):trigger$2(r,"add",n,t),this}function deleteEntry(n){const t=toRaw(this),{has:r,get:a}=getProto(t);let o=r.call(t,n);o||(n=toRaw(n),o=r.call(t,n)),a&&a.call(t,n);const s=t.delete(n);return o&&trigger$2(t,"delete",n,void 0),s}function clear$2(){const n=toRaw(this),t=n.size!==0,r=n.clear();return t&&trigger$2(n,"clear",void 0,void 0),r}function createForEach(n,t){return function(a,o){const s=this,l=s.__v_raw,u=toRaw(l),d=t?toShallow:n?toReadonly:toReactive;return!n&&track(u,"iterate",ITERATE_KEY),l.forEach((v,g)=>a.call(o,d(v),d(g),s))}}function createIterableMethod(n,t,r){return function(...a){const o=this.__v_raw,s=toRaw(o),l=isMap(s),u=n==="entries"||n===Symbol.iterator&&l,d=n==="keys"&&l,v=o[n](...a),g=r?toShallow:t?toReadonly:toReactive;return!t&&track(s,"iterate",d?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:f,done:c}=v.next();return c?{value:f,done:c}:{value:u?[g(f[0]),g(f[1])]:g(f),done:c}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(n){return function(...t){return n==="delete"?!1:this}}function createInstrumentations(){const n={get(s){return get$3(this,s)},get size(){return size(this)},has:has$2,add:add$1,set:set$4,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!1)},t={get(s){return get$3(this,s,!1,!0)},get size(){return size(this)},has:has$2,add:add$1,set:set$4,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!0)},r={get(s){return get$3(this,s,!0)},get size(){return size(this,!0)},has(s){return has$2.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},a={get(s){return get$3(this,s,!0,!0)},get size(){return size(this,!0)},has(s){return has$2.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=createIterableMethod(s,!1,!1),r[s]=createIterableMethod(s,!0,!1),t[s]=createIterableMethod(s,!1,!0),a[s]=createIterableMethod(s,!0,!0)}),[n,r,t,a]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(n,t){const r=t?n?shallowReadonlyInstrumentations:shallowInstrumentations:n?readonlyInstrumentations:mutableInstrumentations;return(a,o,s)=>o==="__v_isReactive"?!n:o==="__v_isReadonly"?n:o==="__v_raw"?a:Reflect.get(hasOwn$1(r,o)&&o in a?r:a,o,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(n){return n.__v_skip||!Object.isExtensible(n)?0:targetTypeMap(toRawType(n))}function reactive(n){return isReadonly(n)?n:createReactiveObject(n,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(n){return createReactiveObject(n,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(n){return createReactiveObject(n,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(n,t,r,a,o){if(!isObject$4(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const s=o.get(n);if(s)return s;const l=getTargetType(n);if(l===0)return n;const u=new Proxy(n,l===2?a:r);return o.set(n,u),u}function isReactive(n){return isReadonly(n)?isReactive(n.__v_raw):!!(n&&n.__v_isReactive)}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isShallow(n){return!!(n&&n.__v_isShallow)}function isProxy(n){return isReactive(n)||isReadonly(n)}function toRaw(n){const t=n&&n.__v_raw;return t?toRaw(t):n}function markRaw(n){return def(n,"__v_skip",!0),n}const toReactive=n=>isObject$4(n)?reactive(n):n,toReadonly=n=>isObject$4(n)?readonly(n):n;function trackRefValue(n){shouldTrack&&activeEffect&&(n=toRaw(n),trackEffects(n.dep||(n.dep=createDep())))}function triggerRefValue(n,t){n=toRaw(n);const r=n.dep;r&&triggerEffects(r)}function isRef(n){return!!(n&&n.__v_isRef===!0)}function ref(n){return createRef(n,!1)}function shallowRef(n){return createRef(n,!0)}function createRef(n,t){return isRef(n)?n:new RefImpl(n,t)}class RefImpl{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:toRaw(t),this._value=r?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const r=this.__v_isShallow||isShallow(t)||isReadonly(t);t=r?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:toReactive(t),triggerRefValue(this))}}function unref(n){return isRef(n)?n.value:n}const shallowUnwrapHandlers={get:(n,t,r)=>unref(Reflect.get(n,t,r)),set:(n,t,r,a)=>{const o=n[t];return isRef(o)&&!isRef(r)?(o.value=r,!0):Reflect.set(n,t,r,a)}};function proxyRefs(n){return isReactive(n)?n:new Proxy(n,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,r,a,o){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=a}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(n,t,r=!1){let a,o;const s=isFunction$1(n);return s?(a=n,o=NOOP):(a=n.get,o=n.set),new ComputedRefImpl(a,o,s||!o,r)}function warn$1(n,...t){}function callWithErrorHandling(n,t,r,a){let o;try{o=a?n(...a):n()}catch(s){handleError(s,t,r)}return o}function callWithAsyncErrorHandling(n,t,r,a){if(isFunction$1(n)){const s=callWithErrorHandling(n,t,r,a);return s&&isPromise(s)&&s.catch(l=>{handleError(l,t,r)}),s}const o=[];for(let s=0;s<n.length;s++)o.push(callWithAsyncErrorHandling(n[s],t,r,a));return o}function handleError(n,t,r,a=!0){const o=t?t.vnode:null;if(t){let s=t.parent;const l=t.proxy,u=r;for(;s;){const v=s.ec;if(v){for(let g=0;g<v.length;g++)if(v[g](n,l,u)===!1)return}s=s.parent}const d=t.appContext.config.errorHandler;if(d){callWithErrorHandling(d,null,10,[n,l,u]);return}}logError$1(n,r,o,a)}function logError$1(n,t,r,a=!0){console.error(n)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(n){const t=currentFlushPromise||resolvedPromise;return n?t.then(this?n.bind(this):n):t}function findInsertionIndex(n){let t=flushIndex+1,r=queue.length;for(;t<r;){const a=t+r>>>1;getId$1(queue[a])<n?t=a+1:r=a}return t}function queueJob(n){(!queue.length||!queue.includes(n,isFlushing&&n.allowRecurse?flushIndex+1:flushIndex))&&(n.id==null?queue.push(n):queue.splice(findInsertionIndex(n.id),0,n),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(n){const t=queue.indexOf(n);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(n){isArray$3(n)?pendingPostFlushCbs.push(...n):(!activePostFlushCbs||!activePostFlushCbs.includes(n,n.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(n),queueFlush()}function flushPreFlushCbs(n,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const r=queue[t];r&&r.pre&&(queue.splice(t,1),t--,r())}}function flushPostFlushCbs(n){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((r,a)=>getId$1(r)-getId$1(a)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId$1=n=>n.id==null?1/0:n.id,comparator=(n,t)=>{const r=getId$1(n)-getId$1(t);if(r===0){if(n.pre&&!t.pre)return-1;if(t.pre&&!n.pre)return 1}return r};function flushJobs(n){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(n,t,...r){if(n.isUnmounted)return;const a=n.vnode.props||EMPTY_OBJ$1;let o=r;const s=t.startsWith("update:"),l=s&&t.slice(7);if(l&&l in a){const g=`${l==="modelValue"?"model":l}Modifiers`,{number:f,trim:c}=a[g]||EMPTY_OBJ$1;c&&(o=r.map(y=>isString$1(y)?y.trim():y)),f&&(o=r.map(looseToNumber))}let u,d=a[u=toHandlerKey(t)]||a[u=toHandlerKey(camelize(t))];!d&&s&&(d=a[u=toHandlerKey(hyphenate(t))]),d&&callWithAsyncErrorHandling(d,n,6,o);const v=a[u+"Once"];if(v){if(!n.emitted)n.emitted={};else if(n.emitted[u])return;n.emitted[u]=!0,callWithAsyncErrorHandling(v,n,6,o)}}function normalizeEmitsOptions(n,t,r=!1){const a=t.emitsCache,o=a.get(n);if(o!==void 0)return o;const s=n.emits;let l={},u=!1;if(!isFunction$1(n)){const d=v=>{const g=normalizeEmitsOptions(v,t,!0);g&&(u=!0,extend$2(l,g))};!r&&t.mixins.length&&t.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}return!s&&!u?(isObject$4(n)&&a.set(n,null),null):(isArray$3(s)?s.forEach(d=>l[d]=null):extend$2(l,s),isObject$4(n)&&a.set(n,l),l)}function isEmitListener(n,t){return!n||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn$1(n,t[0].toLowerCase()+t.slice(1))||hasOwn$1(n,hyphenate(t))||hasOwn$1(n,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(n){const t=currentRenderingInstance;return currentRenderingInstance=n,currentScopeId=n&&n.type.__scopeId||null,t}function pushScopeId(n){currentScopeId=n}function popScopeId(){currentScopeId=null}function withCtx(n,t=currentRenderingInstance,r){if(!t||n._n)return n;const a=(...o)=>{a._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(t);let l;try{l=n(...o)}finally{setCurrentRenderingInstance(s),a._d&&setBlockTracking(1)}return l};return a._n=!0,a._c=!0,a._d=!0,a}function markAttrsAccessed(){}function renderComponentRoot(n){const{type:t,vnode:r,proxy:a,withProxy:o,props:s,propsOptions:[l],slots:u,attrs:d,emit:v,render:g,renderCache:f,data:c,setupState:y,ctx:_,inheritAttrs:b}=n;let S,x;const w=setCurrentRenderingInstance(n);try{if(r.shapeFlag&4){const A=o||a;S=normalizeVNode(g.call(A,A,f,s,y,c,_)),x=d}else{const A=t;S=normalizeVNode(A.length>1?A(s,{attrs:d,slots:u,emit:v}):A(s,null)),x=t.props?d:getFunctionalFallthrough(d)}}catch(A){blockStack.length=0,handleError(A,n,1),S=createVNode$1(Comment)}let T=S;if(x&&b!==!1){const A=Object.keys(x),{shapeFlag:E}=T;A.length&&E&7&&(l&&A.some(isModelListener)&&(x=filterModelListeners(x,l)),T=cloneVNode(T,x))}return r.dirs&&(T=cloneVNode(T),T.dirs=T.dirs?T.dirs.concat(r.dirs):r.dirs),r.transition&&(T.transition=r.transition),S=T,setCurrentRenderingInstance(w),S}const getFunctionalFallthrough=n=>{let t;for(const r in n)(r==="class"||r==="style"||isOn(r))&&((t||(t={}))[r]=n[r]);return t},filterModelListeners=(n,t)=>{const r={};for(const a in n)(!isModelListener(a)||!(a.slice(9)in t))&&(r[a]=n[a]);return r};function shouldUpdateComponent(n,t,r){const{props:a,children:o,component:s}=n,{props:l,children:u,patchFlag:d}=t,v=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&d>=0){if(d&1024)return!0;if(d&16)return a?hasPropsChanged(a,l,v):!!l;if(d&8){const g=t.dynamicProps;for(let f=0;f<g.length;f++){const c=g[f];if(l[c]!==a[c]&&!isEmitListener(v,c))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:a===l?!1:a?l?hasPropsChanged(a,l,v):!0:!!l;return!1}function hasPropsChanged(n,t,r){const a=Object.keys(t);if(a.length!==Object.keys(n).length)return!0;for(let o=0;o<a.length;o++){const s=a[o];if(t[s]!==n[s]&&!isEmitListener(r,s))return!0}return!1}function updateHOCHostEl({vnode:n,parent:t},r){for(;t&&t.subTree===n;)(n=t.vnode).el=r,t=t.parent}const isSuspense=n=>n.__isSuspense;function queueEffectWithSuspense(n,t){t&&t.pendingBranch?isArray$3(n)?t.effects.push(...n):t.effects.push(n):queuePostFlushCb(n)}const INITIAL_WATCHER_VALUE={};function watch(n,t,r){return doWatch(n,t,r)}function doWatch(n,t,{immediate:r,deep:a,flush:o,onTrack:s,onTrigger:l}=EMPTY_OBJ$1){var u;const d=getCurrentScope()===((u=currentInstance)==null?void 0:u.scope)?currentInstance:null;let v,g=!1,f=!1;if(isRef(n)?(v=()=>n.value,g=isShallow(n)):isReactive(n)?(v=()=>n,a=!0):isArray$3(n)?(f=!0,g=n.some(A=>isReactive(A)||isShallow(A)),v=()=>n.map(A=>{if(isRef(A))return A.value;if(isReactive(A))return traverse(A);if(isFunction$1(A))return callWithErrorHandling(A,d,2)})):isFunction$1(n)?t?v=()=>callWithErrorHandling(n,d,2):v=()=>{if(!(d&&d.isUnmounted))return c&&c(),callWithAsyncErrorHandling(n,d,3,[y])}:v=NOOP,t&&a){const A=v;v=()=>traverse(A())}let c,y=A=>{c=w.onStop=()=>{callWithErrorHandling(A,d,4)}},_;if(isInSSRComponentSetup)if(y=NOOP,t?r&&callWithAsyncErrorHandling(t,d,3,[v(),f?[]:void 0,y]):v(),o==="sync"){const A=useSSRContext();_=A.__watcherHandles||(A.__watcherHandles=[])}else return NOOP;let b=f?new Array(n.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const S=()=>{if(w.active)if(t){const A=w.run();(a||g||(f?A.some((E,$)=>hasChanged(E,b[$])):hasChanged(A,b)))&&(c&&c(),callWithAsyncErrorHandling(t,d,3,[A,b===INITIAL_WATCHER_VALUE?void 0:f&&b[0]===INITIAL_WATCHER_VALUE?[]:b,y]),b=A)}else w.run()};S.allowRecurse=!!t;let x;o==="sync"?x=S:o==="post"?x=()=>queuePostRenderEffect(S,d&&d.suspense):(S.pre=!0,d&&(S.id=d.uid),x=()=>queueJob(S));const w=new ReactiveEffect(v,x);t?r?S():b=w.run():o==="post"?queuePostRenderEffect(w.run.bind(w),d&&d.suspense):w.run();const T=()=>{w.stop(),d&&d.scope&&remove$1(d.scope.effects,w)};return _&&_.push(T),T}function instanceWatch(n,t,r){const a=this.proxy,o=isString$1(n)?n.includes(".")?createPathGetter(a,n):()=>a[n]:n.bind(a,a);let s;isFunction$1(t)?s=t:(s=t.handler,r=t);const l=currentInstance;setCurrentInstance(this);const u=doWatch(o,s.bind(a),r);return l?setCurrentInstance(l):unsetCurrentInstance(),u}function createPathGetter(n,t){const r=t.split(".");return()=>{let a=n;for(let o=0;o<r.length&&a;o++)a=a[r[o]];return a}}function traverse(n,t){if(!isObject$4(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),isRef(n))traverse(n.value,t);else if(isArray$3(n))for(let r=0;r<n.length;r++)traverse(n[r],t);else if(isSet(n)||isMap(n))n.forEach(r=>{traverse(r,t)});else if(isPlainObject(n))for(const r in n)traverse(n[r],t);return n}function withDirectives(n,t){const r=currentRenderingInstance;if(r===null)return n;const a=getExposeProxy(r)||r.proxy,o=n.dirs||(n.dirs=[]);for(let s=0;s<t.length;s++){let[l,u,d,v=EMPTY_OBJ$1]=t[s];l&&(isFunction$1(l)&&(l={mounted:l,updated:l}),l.deep&&traverse(u),o.push({dir:l,instance:a,value:u,oldValue:void 0,arg:d,modifiers:v}))}return n}function invokeDirectiveHook(n,t,r,a){const o=n.dirs,s=t&&t.dirs;for(let l=0;l<o.length;l++){const u=o[l];s&&(u.oldValue=s[l].value);let d=u.dir[a];d&&(pauseTracking(),callWithAsyncErrorHandling(d,r,8,[n.el,u,n,t]),resetTracking())}}function defineComponent(n,t){return isFunction$1(n)?(()=>extend$2({name:n.name},t,{setup:n}))():n}const isAsyncWrapper=n=>!!n.type.__asyncLoader,isKeepAlive=n=>n.type.__isKeepAlive;function onActivated(n,t){registerKeepAliveHook(n,"a",t)}function onDeactivated(n,t){registerKeepAliveHook(n,"da",t)}function registerKeepAliveHook(n,t,r=currentInstance){const a=n.__wdc||(n.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return n()});if(injectHook(t,a,r),r){let o=r.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(a,t,r,o),o=o.parent}}function injectToKeepAliveRoot(n,t,r,a){const o=injectHook(t,n,a,!0);onUnmounted(()=>{remove$1(a[t],o)},r)}function injectHook(n,t,r=currentInstance,a=!1){if(r){const o=r[n]||(r[n]=[]),s=t.__weh||(t.__weh=(...l)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const u=callWithAsyncErrorHandling(t,r,n,l);return unsetCurrentInstance(),resetTracking(),u});return a?o.unshift(s):o.push(s),s}}const createHook=n=>(t,r=currentInstance)=>(!isInSSRComponentSetup||n==="sp")&&injectHook(n,(...a)=>t(...a),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(n,t=currentInstance){injectHook("ec",n,t)}const COMPONENTS="components";function resolveComponent(n,t){return resolveAsset(COMPONENTS,n,!0,t)||n}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(n,t,r=!0,a=!1){const o=currentRenderingInstance||currentInstance;if(o){const s=o.type;if(n===COMPONENTS){const u=getComponentName(s,!1);if(u&&(u===t||u===camelize(t)||u===capitalize(camelize(t))))return s}const l=resolve(o[n]||s[n],t)||resolve(o.appContext[n],t);return!l&&a?s:l}}function resolve(n,t){return n&&(n[t]||n[camelize(t)]||n[capitalize(camelize(t))])}function renderList(n,t,r,a){let o;const s=r&&r[a];if(isArray$3(n)||isString$1(n)){o=new Array(n.length);for(let l=0,u=n.length;l<u;l++)o[l]=t(n[l],l,void 0,s&&s[l])}else if(typeof n=="number"){o=new Array(n);for(let l=0;l<n;l++)o[l]=t(l+1,l,void 0,s&&s[l])}else if(isObject$4(n))if(n[Symbol.iterator])o=Array.from(n,(l,u)=>t(l,u,void 0,s&&s[u]));else{const l=Object.keys(n);o=new Array(l.length);for(let u=0,d=l.length;u<d;u++){const v=l[u];o[u]=t(n[v],v,u,s&&s[u])}}else o=[];return r&&(r[a]=o),o}const getPublicInstance=n=>n?isStatefulComponent(n)?getExposeProxy(n)||n.proxy:getPublicInstance(n.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>getPublicInstance(n.parent),$root:n=>getPublicInstance(n.root),$emit:n=>n.emit,$options:n=>resolveMergedOptions(n),$forceUpdate:n=>n.f||(n.f=()=>queueJob(n.update)),$nextTick:n=>n.n||(n.n=nextTick.bind(n.proxy)),$watch:n=>instanceWatch.bind(n)}),hasSetupBinding=(n,t)=>n!==EMPTY_OBJ$1&&!n.__isScriptSetup&&hasOwn$1(n,t),PublicInstanceProxyHandlers={get({_:n},t){const{ctx:r,setupState:a,data:o,props:s,accessCache:l,type:u,appContext:d}=n;let v;if(t[0]!=="$"){const y=l[t];if(y!==void 0)switch(y){case 1:return a[t];case 2:return o[t];case 4:return r[t];case 3:return s[t]}else{if(hasSetupBinding(a,t))return l[t]=1,a[t];if(o!==EMPTY_OBJ$1&&hasOwn$1(o,t))return l[t]=2,o[t];if((v=n.propsOptions[0])&&hasOwn$1(v,t))return l[t]=3,s[t];if(r!==EMPTY_OBJ$1&&hasOwn$1(r,t))return l[t]=4,r[t];shouldCacheAccess&&(l[t]=0)}}const g=publicPropertiesMap[t];let f,c;if(g)return t==="$attrs"&&track(n,"get",t),g(n);if((f=u.__cssModules)&&(f=f[t]))return f;if(r!==EMPTY_OBJ$1&&hasOwn$1(r,t))return l[t]=4,r[t];if(c=d.config.globalProperties,hasOwn$1(c,t))return c[t]},set({_:n},t,r){const{data:a,setupState:o,ctx:s}=n;return hasSetupBinding(o,t)?(o[t]=r,!0):a!==EMPTY_OBJ$1&&hasOwn$1(a,t)?(a[t]=r,!0):hasOwn$1(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(s[t]=r,!0)},has({_:{data:n,setupState:t,accessCache:r,ctx:a,appContext:o,propsOptions:s}},l){let u;return!!r[l]||n!==EMPTY_OBJ$1&&hasOwn$1(n,l)||hasSetupBinding(t,l)||(u=s[0])&&hasOwn$1(u,l)||hasOwn$1(a,l)||hasOwn$1(publicPropertiesMap,l)||hasOwn$1(o.config.globalProperties,l)},defineProperty(n,t,r){return r.get!=null?n._.accessCache[t]=0:hasOwn$1(r,"value")&&this.set(n,t,r.value,null),Reflect.defineProperty(n,t,r)}};function normalizePropsOrEmits(n){return isArray$3(n)?n.reduce((t,r)=>(t[r]=null,t),{}):n}let shouldCacheAccess=!0;function applyOptions(n){const t=resolveMergedOptions(n),r=n.proxy,a=n.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,n,"bc");const{data:o,computed:s,methods:l,watch:u,provide:d,inject:v,created:g,beforeMount:f,mounted:c,beforeUpdate:y,updated:_,activated:b,deactivated:S,beforeDestroy:x,beforeUnmount:w,destroyed:T,unmounted:A,render:E,renderTracked:$,renderTriggered:P,errorCaptured:I,serverPrefetch:C,expose:M,inheritAttrs:D,components:R,directives:N,filters:O}=t;if(v&&resolveInjections(v,a,null),l)for(const B in l){const V=l[B];isFunction$1(V)&&(a[B]=V.bind(r))}if(o){const B=o.call(r,r);isObject$4(B)&&(n.data=reactive(B))}if(shouldCacheAccess=!0,s)for(const B in s){const V=s[B],H=isFunction$1(V)?V.bind(r,r):isFunction$1(V.get)?V.get.bind(r,r):NOOP,X=!isFunction$1(V)&&isFunction$1(V.set)?V.set.bind(r):NOOP,U=computed({get:H,set:X});Object.defineProperty(a,B,{enumerable:!0,configurable:!0,get:()=>U.value,set:te=>U.value=te})}if(u)for(const B in u)createWatcher(u[B],a,r,B);if(d){const B=isFunction$1(d)?d.call(r):d;Reflect.ownKeys(B).forEach(V=>{provide(V,B[V])})}g&&callHook(g,n,"c");function L(B,V){isArray$3(V)?V.forEach(H=>B(H.bind(r))):V&&B(V.bind(r))}if(L(onBeforeMount,f),L(onMounted,c),L(onBeforeUpdate,y),L(onUpdated,_),L(onActivated,b),L(onDeactivated,S),L(onErrorCaptured,I),L(onRenderTracked,$),L(onRenderTriggered,P),L(onBeforeUnmount,w),L(onUnmounted,A),L(onServerPrefetch,C),isArray$3(M))if(M.length){const B=n.exposed||(n.exposed={});M.forEach(V=>{Object.defineProperty(B,V,{get:()=>r[V],set:H=>r[V]=H})})}else n.exposed||(n.exposed={});E&&n.render===NOOP&&(n.render=E),D!=null&&(n.inheritAttrs=D),R&&(n.components=R),N&&(n.directives=N)}function resolveInjections(n,t,r=NOOP){isArray$3(n)&&(n=normalizeInject(n));for(const a in n){const o=n[a];let s;isObject$4(o)?"default"in o?s=inject(o.from||a,o.default,!0):s=inject(o.from||a):s=inject(o),isRef(s)?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:l=>s.value=l}):t[a]=s}}function callHook(n,t,r){callWithAsyncErrorHandling(isArray$3(n)?n.map(a=>a.bind(t.proxy)):n.bind(t.proxy),t,r)}function createWatcher(n,t,r,a){const o=a.includes(".")?createPathGetter(r,a):()=>r[a];if(isString$1(n)){const s=t[n];isFunction$1(s)&&watch(o,s)}else if(isFunction$1(n))watch(o,n.bind(r));else if(isObject$4(n))if(isArray$3(n))n.forEach(s=>createWatcher(s,t,r,a));else{const s=isFunction$1(n.handler)?n.handler.bind(r):t[n.handler];isFunction$1(s)&&watch(o,s,n)}}function resolveMergedOptions(n){const t=n.type,{mixins:r,extends:a}=t,{mixins:o,optionsCache:s,config:{optionMergeStrategies:l}}=n.appContext,u=s.get(t);let d;return u?d=u:!o.length&&!r&&!a?d=t:(d={},o.length&&o.forEach(v=>mergeOptions$1(d,v,l,!0)),mergeOptions$1(d,t,l)),isObject$4(t)&&s.set(t,d),d}function mergeOptions$1(n,t,r,a=!1){const{mixins:o,extends:s}=t;s&&mergeOptions$1(n,s,r,!0),o&&o.forEach(l=>mergeOptions$1(n,l,r,!0));for(const l in t)if(!(a&&l==="expose")){const u=internalOptionMergeStrats[l]||r&&r[l];n[l]=u?u(n[l],t[l]):t[l]}return n}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(n,t){return t?n?function(){return extend$2(isFunction$1(n)?n.call(this,this):n,isFunction$1(t)?t.call(this,this):t)}:t:n}function mergeInject(n,t){return mergeObjectOptions(normalizeInject(n),normalizeInject(t))}function normalizeInject(n){if(isArray$3(n)){const t={};for(let r=0;r<n.length;r++)t[n[r]]=n[r];return t}return n}function mergeAsArray(n,t){return n?[...new Set([].concat(n,t))]:t}function mergeObjectOptions(n,t){return n?extend$2(Object.create(null),n,t):t}function mergeEmitsOrPropsOptions(n,t){return n?isArray$3(n)&&isArray$3(t)?[...new Set([...n,...t])]:extend$2(Object.create(null),normalizePropsOrEmits(n),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(n,t){if(!n)return t;if(!t)return n;const r=extend$2(Object.create(null),n);for(const a in t)r[a]=mergeAsArray(n[a],t[a]);return r}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(n,t){return function(a,o=null){isFunction$1(a)||(a=extend$2({},a)),o!=null&&!isObject$4(o)&&(o=null);const s=createAppContext(),l=new Set;let u=!1;const d=s.app={_uid:uid$1++,_component:a,_props:o,_container:null,_context:s,_instance:null,version,get config(){return s.config},set config(v){},use(v,...g){return l.has(v)||(v&&isFunction$1(v.install)?(l.add(v),v.install(d,...g)):isFunction$1(v)&&(l.add(v),v(d,...g))),d},mixin(v){return s.mixins.includes(v)||s.mixins.push(v),d},component(v,g){return g?(s.components[v]=g,d):s.components[v]},directive(v,g){return g?(s.directives[v]=g,d):s.directives[v]},mount(v,g,f){if(!u){const c=createVNode$1(a,o);return c.appContext=s,g&&t?t(c,v):n(c,v,f),u=!0,d._container=v,v.__vue_app__=d,getExposeProxy(c.component)||c.component.proxy}},unmount(){u&&(n(null,d._container),delete d._container.__vue_app__)},provide(v,g){return s.provides[v]=g,d},runWithContext(v){currentApp=d;try{return v()}finally{currentApp=null}}};return d}}let currentApp=null;function provide(n,t){if(currentInstance){let r=currentInstance.provides;const a=currentInstance.parent&&currentInstance.parent.provides;a===r&&(r=currentInstance.provides=Object.create(a)),r[n]=t}}function inject(n,t,r=!1){const a=currentInstance||currentRenderingInstance;if(a||currentApp){const o=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:currentApp._context.provides;if(o&&n in o)return o[n];if(arguments.length>1)return r&&isFunction$1(t)?t.call(a&&a.proxy):t}}function initProps$1(n,t,r,a=!1){const o={},s={};def(s,InternalObjectKey,1),n.propsDefaults=Object.create(null),setFullProps(n,t,o,s);for(const l in n.propsOptions[0])l in o||(o[l]=void 0);r?n.props=a?o:shallowReactive(o):n.type.props?n.props=o:n.props=s,n.attrs=s}function updateProps$2(n,t,r,a){const{props:o,attrs:s,vnode:{patchFlag:l}}=n,u=toRaw(o),[d]=n.propsOptions;let v=!1;if((a||l>0)&&!(l&16)){if(l&8){const g=n.vnode.dynamicProps;for(let f=0;f<g.length;f++){let c=g[f];if(isEmitListener(n.emitsOptions,c))continue;const y=t[c];if(d)if(hasOwn$1(s,c))y!==s[c]&&(s[c]=y,v=!0);else{const _=camelize(c);o[_]=resolvePropValue(d,u,_,y,n,!1)}else y!==s[c]&&(s[c]=y,v=!0)}}}else{setFullProps(n,t,o,s)&&(v=!0);let g;for(const f in u)(!t||!hasOwn$1(t,f)&&((g=hyphenate(f))===f||!hasOwn$1(t,g)))&&(d?r&&(r[f]!==void 0||r[g]!==void 0)&&(o[f]=resolvePropValue(d,u,f,void 0,n,!0)):delete o[f]);if(s!==u)for(const f in s)(!t||!hasOwn$1(t,f))&&(delete s[f],v=!0)}v&&trigger$2(n,"set","$attrs")}function setFullProps(n,t,r,a){const[o,s]=n.propsOptions;let l=!1,u;if(t)for(let d in t){if(isReservedProp(d))continue;const v=t[d];let g;o&&hasOwn$1(o,g=camelize(d))?!s||!s.includes(g)?r[g]=v:(u||(u={}))[g]=v:isEmitListener(n.emitsOptions,d)||(!(d in a)||v!==a[d])&&(a[d]=v,l=!0)}if(s){const d=toRaw(r),v=u||EMPTY_OBJ$1;for(let g=0;g<s.length;g++){const f=s[g];r[f]=resolvePropValue(o,d,f,v[f],n,!hasOwn$1(v,f))}}return l}function resolvePropValue(n,t,r,a,o,s){const l=n[r];if(l!=null){const u=hasOwn$1(l,"default");if(u&&a===void 0){const d=l.default;if(l.type!==Function&&!l.skipFactory&&isFunction$1(d)){const{propsDefaults:v}=o;r in v?a=v[r]:(setCurrentInstance(o),a=v[r]=d.call(null,t),unsetCurrentInstance())}else a=d}l[0]&&(s&&!u?a=!1:l[1]&&(a===""||a===hyphenate(r))&&(a=!0))}return a}function normalizePropsOptions(n,t,r=!1){const a=t.propsCache,o=a.get(n);if(o)return o;const s=n.props,l={},u=[];let d=!1;if(!isFunction$1(n)){const g=f=>{d=!0;const[c,y]=normalizePropsOptions(f,t,!0);extend$2(l,c),y&&u.push(...y)};!r&&t.mixins.length&&t.mixins.forEach(g),n.extends&&g(n.extends),n.mixins&&n.mixins.forEach(g)}if(!s&&!d)return isObject$4(n)&&a.set(n,EMPTY_ARR),EMPTY_ARR;if(isArray$3(s))for(let g=0;g<s.length;g++){const f=camelize(s[g]);validatePropName(f)&&(l[f]=EMPTY_OBJ$1)}else if(s)for(const g in s){const f=camelize(g);if(validatePropName(f)){const c=s[g],y=l[f]=isArray$3(c)||isFunction$1(c)?{type:c}:extend$2({},c);if(y){const _=getTypeIndex(Boolean,y.type),b=getTypeIndex(String,y.type);y[0]=_>-1,y[1]=b<0||_<b,(_>-1||hasOwn$1(y,"default"))&&u.push(f)}}}const v=[l,u];return isObject$4(n)&&a.set(n,v),v}function validatePropName(n){return n[0]!=="$"}function getType(n){const t=n&&n.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:n===null?"null":""}function isSameType(n,t){return getType(n)===getType(t)}function getTypeIndex(n,t){return isArray$3(t)?t.findIndex(r=>isSameType(r,n)):isFunction$1(t)&&isSameType(t,n)?0:-1}const isInternalKey=n=>n[0]==="_"||n==="$stable",normalizeSlotValue=n=>isArray$3(n)?n.map(normalizeVNode):[normalizeVNode(n)],normalizeSlot$1=(n,t,r)=>{if(t._n)return t;const a=withCtx((...o)=>normalizeSlotValue(t(...o)),r);return a._c=!1,a},normalizeObjectSlots=(n,t,r)=>{const a=n._ctx;for(const o in n){if(isInternalKey(o))continue;const s=n[o];if(isFunction$1(s))t[o]=normalizeSlot$1(o,s,a);else if(s!=null){const l=normalizeSlotValue(s);t[o]=()=>l}}},normalizeVNodeSlots=(n,t)=>{const r=normalizeSlotValue(t);n.slots.default=()=>r},initSlots=(n,t)=>{if(n.vnode.shapeFlag&32){const r=t._;r?(n.slots=toRaw(t),def(t,"_",r)):normalizeObjectSlots(t,n.slots={})}else n.slots={},t&&normalizeVNodeSlots(n,t);def(n.slots,InternalObjectKey,1)},updateSlots=(n,t,r)=>{const{vnode:a,slots:o}=n;let s=!0,l=EMPTY_OBJ$1;if(a.shapeFlag&32){const u=t._;u?r&&u===1?s=!1:(extend$2(o,t),!r&&u===1&&delete o._):(s=!t.$stable,normalizeObjectSlots(t,o)),l=t}else t&&(normalizeVNodeSlots(n,t),l={default:1});if(s)for(const u in o)!isInternalKey(u)&&!(u in l)&&delete o[u]};function setRef(n,t,r,a,o=!1){if(isArray$3(n)){n.forEach((c,y)=>setRef(c,t&&(isArray$3(t)?t[y]:t),r,a,o));return}if(isAsyncWrapper(a)&&!o)return;const s=a.shapeFlag&4?getExposeProxy(a.component)||a.component.proxy:a.el,l=o?null:s,{i:u,r:d}=n,v=t&&t.r,g=u.refs===EMPTY_OBJ$1?u.refs={}:u.refs,f=u.setupState;if(v!=null&&v!==d&&(isString$1(v)?(g[v]=null,hasOwn$1(f,v)&&(f[v]=null)):isRef(v)&&(v.value=null)),isFunction$1(d))callWithErrorHandling(d,u,12,[l,g]);else{const c=isString$1(d),y=isRef(d);if(c||y){const _=()=>{if(n.f){const b=c?hasOwn$1(f,d)?f[d]:g[d]:d.value;o?isArray$3(b)&&remove$1(b,s):isArray$3(b)?b.includes(s)||b.push(s):c?(g[d]=[s],hasOwn$1(f,d)&&(f[d]=g[d])):(d.value=[s],n.k&&(g[n.k]=d.value))}else c?(g[d]=l,hasOwn$1(f,d)&&(f[d]=l)):y&&(d.value=l,n.k&&(g[n.k]=l))};l?(_.id=-1,queuePostRenderEffect(_,r)):_()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(n){return baseCreateRenderer(n)}function baseCreateRenderer(n,t){const r=getGlobalThis();r.__VUE__=!0;const{insert:a,remove:o,patchProp:s,createElement:l,createText:u,createComment:d,setText:v,setElementText:g,parentNode:f,nextSibling:c,setScopeId:y=NOOP,insertStaticContent:_}=n,b=(z,W,Z,ae=null,se=null,ce=null,_e=!1,ge=null,me=!!W.dynamicChildren)=>{if(z===W)return;z&&!isSameVNodeType(z,W)&&(ae=j(z),te(z,se,ce,!0),z=null),W.patchFlag===-2&&(me=!1,W.dynamicChildren=null);const{type:de,ref:xe,shapeFlag:be}=W;switch(de){case Text:S(z,W,Z,ae);break;case Comment:x(z,W,Z,ae);break;case Static:z==null&&w(W,Z,ae,_e);break;case Fragment:R(z,W,Z,ae,se,ce,_e,ge,me);break;default:be&1?E(z,W,Z,ae,se,ce,_e,ge,me):be&6?N(z,W,Z,ae,se,ce,_e,ge,me):(be&64||be&128)&&de.process(z,W,Z,ae,se,ce,_e,ge,me,J)}xe!=null&&se&&setRef(xe,z&&z.ref,ce,W||z,!W)},S=(z,W,Z,ae)=>{if(z==null)a(W.el=u(W.children),Z,ae);else{const se=W.el=z.el;W.children!==z.children&&v(se,W.children)}},x=(z,W,Z,ae)=>{z==null?a(W.el=d(W.children||""),Z,ae):W.el=z.el},w=(z,W,Z,ae)=>{[z.el,z.anchor]=_(z.children,W,Z,ae,z.el,z.anchor)},T=({el:z,anchor:W},Z,ae)=>{let se;for(;z&&z!==W;)se=c(z),a(z,Z,ae),z=se;a(W,Z,ae)},A=({el:z,anchor:W})=>{let Z;for(;z&&z!==W;)Z=c(z),o(z),z=Z;o(W)},E=(z,W,Z,ae,se,ce,_e,ge,me)=>{_e=_e||W.type==="svg",z==null?$(W,Z,ae,se,ce,_e,ge,me):C(z,W,se,ce,_e,ge,me)},$=(z,W,Z,ae,se,ce,_e,ge)=>{let me,de;const{type:xe,props:be,shapeFlag:Ee,transition:$e,dirs:Ce}=z;if(me=z.el=l(z.type,ce,be&&be.is,be),Ee&8?g(me,z.children):Ee&16&&I(z.children,me,null,ae,se,ce&&xe!=="foreignObject",_e,ge),Ce&&invokeDirectiveHook(z,null,ae,"created"),P(me,z,z.scopeId,_e,ae),be){for(const Oe in be)Oe!=="value"&&!isReservedProp(Oe)&&s(me,Oe,null,be[Oe],ce,z.children,ae,se,pe);"value"in be&&s(me,"value",null,be.value),(de=be.onVnodeBeforeMount)&&invokeVNodeHook(de,ae,z)}Ce&&invokeDirectiveHook(z,null,ae,"beforeMount");const De=(!se||se&&!se.pendingBranch)&&$e&&!$e.persisted;De&&$e.beforeEnter(me),a(me,W,Z),((de=be&&be.onVnodeMounted)||De||Ce)&&queuePostRenderEffect(()=>{de&&invokeVNodeHook(de,ae,z),De&&$e.enter(me),Ce&&invokeDirectiveHook(z,null,ae,"mounted")},se)},P=(z,W,Z,ae,se)=>{if(Z&&y(z,Z),ae)for(let ce=0;ce<ae.length;ce++)y(z,ae[ce]);if(se){let ce=se.subTree;if(W===ce){const _e=se.vnode;P(z,_e,_e.scopeId,_e.slotScopeIds,se.parent)}}},I=(z,W,Z,ae,se,ce,_e,ge,me=0)=>{for(let de=me;de<z.length;de++){const xe=z[de]=ge?cloneIfMounted(z[de]):normalizeVNode(z[de]);b(null,xe,W,Z,ae,se,ce,_e,ge)}},C=(z,W,Z,ae,se,ce,_e)=>{const ge=W.el=z.el;let{patchFlag:me,dynamicChildren:de,dirs:xe}=W;me|=z.patchFlag&16;const be=z.props||EMPTY_OBJ$1,Ee=W.props||EMPTY_OBJ$1;let $e;Z&&toggleRecurse(Z,!1),($e=Ee.onVnodeBeforeUpdate)&&invokeVNodeHook($e,Z,W,z),xe&&invokeDirectiveHook(W,z,Z,"beforeUpdate"),Z&&toggleRecurse(Z,!0);const Ce=se&&W.type!=="foreignObject";if(de?M(z.dynamicChildren,de,ge,Z,ae,Ce,ce):_e||V(z,W,ge,null,Z,ae,Ce,ce,!1),me>0){if(me&16)D(ge,W,be,Ee,Z,ae,se);else if(me&2&&be.class!==Ee.class&&s(ge,"class",null,Ee.class,se),me&4&&s(ge,"style",be.style,Ee.style,se),me&8){const De=W.dynamicProps;for(let Oe=0;Oe<De.length;Oe++){const Ne=De[Oe],Ge=be[Ne],qe=Ee[Ne];(qe!==Ge||Ne==="value")&&s(ge,Ne,Ge,qe,se,z.children,Z,ae,pe)}}me&1&&z.children!==W.children&&g(ge,W.children)}else!_e&&de==null&&D(ge,W,be,Ee,Z,ae,se);(($e=Ee.onVnodeUpdated)||xe)&&queuePostRenderEffect(()=>{$e&&invokeVNodeHook($e,Z,W,z),xe&&invokeDirectiveHook(W,z,Z,"updated")},ae)},M=(z,W,Z,ae,se,ce,_e)=>{for(let ge=0;ge<W.length;ge++){const me=z[ge],de=W[ge],xe=me.el&&(me.type===Fragment||!isSameVNodeType(me,de)||me.shapeFlag&70)?f(me.el):Z;b(me,de,xe,null,ae,se,ce,_e,!0)}},D=(z,W,Z,ae,se,ce,_e)=>{if(Z!==ae){if(Z!==EMPTY_OBJ$1)for(const ge in Z)!isReservedProp(ge)&&!(ge in ae)&&s(z,ge,Z[ge],null,_e,W.children,se,ce,pe);for(const ge in ae){if(isReservedProp(ge))continue;const me=ae[ge],de=Z[ge];me!==de&&ge!=="value"&&s(z,ge,de,me,_e,W.children,se,ce,pe)}"value"in ae&&s(z,"value",Z.value,ae.value)}},R=(z,W,Z,ae,se,ce,_e,ge,me)=>{const de=W.el=z?z.el:u(""),xe=W.anchor=z?z.anchor:u("");let{patchFlag:be,dynamicChildren:Ee,slotScopeIds:$e}=W;$e&&(ge=ge?ge.concat($e):$e),z==null?(a(de,Z,ae),a(xe,Z,ae),I(W.children,Z,xe,se,ce,_e,ge,me)):be>0&&be&64&&Ee&&z.dynamicChildren?(M(z.dynamicChildren,Ee,Z,se,ce,_e,ge),(W.key!=null||se&&W===se.subTree)&&traverseStaticChildren(z,W,!0)):V(z,W,Z,xe,se,ce,_e,ge,me)},N=(z,W,Z,ae,se,ce,_e,ge,me)=>{W.slotScopeIds=ge,z==null?W.shapeFlag&512?se.ctx.activate(W,Z,ae,_e,me):O(W,Z,ae,se,ce,_e,me):F(z,W,me)},O=(z,W,Z,ae,se,ce,_e)=>{const ge=z.component=createComponentInstance(z,ae,se);if(isKeepAlive(z)&&(ge.ctx.renderer=J),setupComponent(ge),ge.asyncDep){if(se&&se.registerDep(ge,L),!z.el){const me=ge.subTree=createVNode$1(Comment);x(null,me,W,Z)}return}L(ge,z,W,Z,se,ce,_e)},F=(z,W,Z)=>{const ae=W.component=z.component;if(shouldUpdateComponent(z,W,Z))if(ae.asyncDep&&!ae.asyncResolved){B(ae,W,Z);return}else ae.next=W,invalidateJob(ae.update),ae.update();else W.el=z.el,ae.vnode=W},L=(z,W,Z,ae,se,ce,_e)=>{const ge=()=>{if(z.isMounted){let{next:xe,bu:be,u:Ee,parent:$e,vnode:Ce}=z,De=xe,Oe;toggleRecurse(z,!1),xe?(xe.el=Ce.el,B(z,xe,_e)):xe=Ce,be&&invokeArrayFns(be),(Oe=xe.props&&xe.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Oe,$e,xe,Ce),toggleRecurse(z,!0);const Ne=renderComponentRoot(z),Ge=z.subTree;z.subTree=Ne,b(Ge,Ne,f(Ge.el),j(Ge),z,se,ce),xe.el=Ne.el,De===null&&updateHOCHostEl(z,Ne.el),Ee&&queuePostRenderEffect(Ee,se),(Oe=xe.props&&xe.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Oe,$e,xe,Ce),se)}else{let xe;const{el:be,props:Ee}=W,{bm:$e,m:Ce,parent:De}=z,Oe=isAsyncWrapper(W);if(toggleRecurse(z,!1),$e&&invokeArrayFns($e),!Oe&&(xe=Ee&&Ee.onVnodeBeforeMount)&&invokeVNodeHook(xe,De,W),toggleRecurse(z,!0),be&&ne){const Ne=()=>{z.subTree=renderComponentRoot(z),ne(be,z.subTree,z,se,null)};Oe?W.type.__asyncLoader().then(()=>!z.isUnmounted&&Ne()):Ne()}else{const Ne=z.subTree=renderComponentRoot(z);b(null,Ne,Z,ae,z,se,ce),W.el=Ne.el}if(Ce&&queuePostRenderEffect(Ce,se),!Oe&&(xe=Ee&&Ee.onVnodeMounted)){const Ne=W;queuePostRenderEffect(()=>invokeVNodeHook(xe,De,Ne),se)}(W.shapeFlag&256||De&&isAsyncWrapper(De.vnode)&&De.vnode.shapeFlag&256)&&z.a&&queuePostRenderEffect(z.a,se),z.isMounted=!0,W=Z=ae=null}},me=z.effect=new ReactiveEffect(ge,()=>queueJob(de),z.scope),de=z.update=()=>me.run();de.id=z.uid,toggleRecurse(z,!0),de()},B=(z,W,Z)=>{W.component=z;const ae=z.vnode.props;z.vnode=W,z.next=null,updateProps$2(z,W.props,ae,Z),updateSlots(z,W.children,Z),pauseTracking(),flushPreFlushCbs(),resetTracking()},V=(z,W,Z,ae,se,ce,_e,ge,me=!1)=>{const de=z&&z.children,xe=z?z.shapeFlag:0,be=W.children,{patchFlag:Ee,shapeFlag:$e}=W;if(Ee>0){if(Ee&128){X(de,be,Z,ae,se,ce,_e,ge,me);return}else if(Ee&256){H(de,be,Z,ae,se,ce,_e,ge,me);return}}$e&8?(xe&16&&pe(de,se,ce),be!==de&&g(Z,be)):xe&16?$e&16?X(de,be,Z,ae,se,ce,_e,ge,me):pe(de,se,ce,!0):(xe&8&&g(Z,""),$e&16&&I(be,Z,ae,se,ce,_e,ge,me))},H=(z,W,Z,ae,se,ce,_e,ge,me)=>{z=z||EMPTY_ARR,W=W||EMPTY_ARR;const de=z.length,xe=W.length,be=Math.min(de,xe);let Ee;for(Ee=0;Ee<be;Ee++){const $e=W[Ee]=me?cloneIfMounted(W[Ee]):normalizeVNode(W[Ee]);b(z[Ee],$e,Z,null,se,ce,_e,ge,me)}de>xe?pe(z,se,ce,!0,!1,be):I(W,Z,ae,se,ce,_e,ge,me,be)},X=(z,W,Z,ae,se,ce,_e,ge,me)=>{let de=0;const xe=W.length;let be=z.length-1,Ee=xe-1;for(;de<=be&&de<=Ee;){const $e=z[de],Ce=W[de]=me?cloneIfMounted(W[de]):normalizeVNode(W[de]);if(isSameVNodeType($e,Ce))b($e,Ce,Z,null,se,ce,_e,ge,me);else break;de++}for(;de<=be&&de<=Ee;){const $e=z[be],Ce=W[Ee]=me?cloneIfMounted(W[Ee]):normalizeVNode(W[Ee]);if(isSameVNodeType($e,Ce))b($e,Ce,Z,null,se,ce,_e,ge,me);else break;be--,Ee--}if(de>be){if(de<=Ee){const $e=Ee+1,Ce=$e<xe?W[$e].el:ae;for(;de<=Ee;)b(null,W[de]=me?cloneIfMounted(W[de]):normalizeVNode(W[de]),Z,Ce,se,ce,_e,ge,me),de++}}else if(de>Ee)for(;de<=be;)te(z[de],se,ce,!0),de++;else{const $e=de,Ce=de,De=new Map;for(de=Ce;de<=Ee;de++){const ve=W[de]=me?cloneIfMounted(W[de]):normalizeVNode(W[de]);ve.key!=null&&De.set(ve.key,de)}let Oe,Ne=0;const Ge=Ee-Ce+1;let qe=!1,Pe=0;const K=new Array(Ge);for(de=0;de<Ge;de++)K[de]=0;for(de=$e;de<=be;de++){const ve=z[de];if(Ne>=Ge){te(ve,se,ce,!0);continue}let ye;if(ve.key!=null)ye=De.get(ve.key);else for(Oe=Ce;Oe<=Ee;Oe++)if(K[Oe-Ce]===0&&isSameVNodeType(ve,W[Oe])){ye=Oe;break}ye===void 0?te(ve,se,ce,!0):(K[ye-Ce]=de+1,ye>=Pe?Pe=ye:qe=!0,b(ve,W[ye],Z,null,se,ce,_e,ge,me),Ne++)}const le=qe?getSequence(K):EMPTY_ARR;for(Oe=le.length-1,de=Ge-1;de>=0;de--){const ve=Ce+de,ye=W[ve],Te=ve+1<xe?W[ve+1].el:ae;K[de]===0?b(null,ye,Z,Te,se,ce,_e,ge,me):qe&&(Oe<0||de!==le[Oe]?U(ye,Z,Te,2):Oe--)}}},U=(z,W,Z,ae,se=null)=>{const{el:ce,type:_e,transition:ge,children:me,shapeFlag:de}=z;if(de&6){U(z.component.subTree,W,Z,ae);return}if(de&128){z.suspense.move(W,Z,ae);return}if(de&64){_e.move(z,W,Z,J);return}if(_e===Fragment){a(ce,W,Z);for(let be=0;be<me.length;be++)U(me[be],W,Z,ae);a(z.anchor,W,Z);return}if(_e===Static){T(z,W,Z);return}if(ae!==2&&de&1&&ge)if(ae===0)ge.beforeEnter(ce),a(ce,W,Z),queuePostRenderEffect(()=>ge.enter(ce),se);else{const{leave:be,delayLeave:Ee,afterLeave:$e}=ge,Ce=()=>a(ce,W,Z),De=()=>{be(ce,()=>{Ce(),$e&&$e()})};Ee?Ee(ce,Ce,De):De()}else a(ce,W,Z)},te=(z,W,Z,ae=!1,se=!1)=>{const{type:ce,props:_e,ref:ge,children:me,dynamicChildren:de,shapeFlag:xe,patchFlag:be,dirs:Ee}=z;if(ge!=null&&setRef(ge,null,Z,z,!0),xe&256){W.ctx.deactivate(z);return}const $e=xe&1&&Ee,Ce=!isAsyncWrapper(z);let De;if(Ce&&(De=_e&&_e.onVnodeBeforeUnmount)&&invokeVNodeHook(De,W,z),xe&6)ie(z.component,Z,ae);else{if(xe&128){z.suspense.unmount(Z,ae);return}$e&&invokeDirectiveHook(z,null,W,"beforeUnmount"),xe&64?z.type.remove(z,W,Z,se,J,ae):de&&(ce!==Fragment||be>0&&be&64)?pe(de,W,Z,!1,!0):(ce===Fragment&&be&384||!se&&xe&16)&&pe(me,W,Z),ae&&ee(z)}(Ce&&(De=_e&&_e.onVnodeUnmounted)||$e)&&queuePostRenderEffect(()=>{De&&invokeVNodeHook(De,W,z),$e&&invokeDirectiveHook(z,null,W,"unmounted")},Z)},ee=z=>{const{type:W,el:Z,anchor:ae,transition:se}=z;if(W===Fragment){q(Z,ae);return}if(W===Static){A(z);return}const ce=()=>{o(Z),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(z.shapeFlag&1&&se&&!se.persisted){const{leave:_e,delayLeave:ge}=se,me=()=>_e(Z,ce);ge?ge(z.el,ce,me):me()}else ce()},q=(z,W)=>{let Z;for(;z!==W;)Z=c(z),o(z),z=Z;o(W)},ie=(z,W,Z)=>{const{bum:ae,scope:se,update:ce,subTree:_e,um:ge}=z;ae&&invokeArrayFns(ae),se.stop(),ce&&(ce.active=!1,te(_e,z,W,Z)),ge&&queuePostRenderEffect(ge,W),queuePostRenderEffect(()=>{z.isUnmounted=!0},W),W&&W.pendingBranch&&!W.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===W.pendingId&&(W.deps--,W.deps===0&&W.resolve())},pe=(z,W,Z,ae=!1,se=!1,ce=0)=>{for(let _e=ce;_e<z.length;_e++)te(z[_e],W,Z,ae,se)},j=z=>z.shapeFlag&6?j(z.component.subTree):z.shapeFlag&128?z.suspense.next():c(z.anchor||z.el),Q=(z,W,Z)=>{z==null?W._vnode&&te(W._vnode,null,null,!0):b(W._vnode||null,z,W,null,null,null,Z),flushPreFlushCbs(),flushPostFlushCbs(),W._vnode=z},J={p:b,um:te,m:U,r:ee,mt:O,mc:I,pc:V,pbc:M,n:j,o:n};let oe,ne;return t&&([oe,ne]=t(J)),{render:Q,hydrate:oe,createApp:createAppAPI(Q,oe)}}function toggleRecurse({effect:n,update:t},r){n.allowRecurse=t.allowRecurse=r}function traverseStaticChildren(n,t,r=!1){const a=n.children,o=t.children;if(isArray$3(a)&&isArray$3(o))for(let s=0;s<a.length;s++){const l=a[s];let u=o[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[s]=cloneIfMounted(o[s]),u.el=l.el),r||traverseStaticChildren(l,u)),u.type===Text&&(u.el=l.el)}}function getSequence(n){const t=n.slice(),r=[0];let a,o,s,l,u;const d=n.length;for(a=0;a<d;a++){const v=n[a];if(v!==0){if(o=r[r.length-1],n[o]<v){t[a]=o,r.push(a);continue}for(s=0,l=r.length-1;s<l;)u=s+l>>1,n[r[u]]<v?s=u+1:l=u;v<n[r[s]]&&(s>0&&(t[a]=r[s-1]),r[s]=a)}}for(s=r.length,l=r[s-1];s-- >0;)r[s]=l,l=t[l];return r}const isTeleport=n=>n.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(n=!1){blockStack.push(currentBlock=n?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(n){isBlockTreeEnabled+=n}function setupBlock(n){return n.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),n}function createElementBlock(n,t,r,a,o,s){return setupBlock(createBaseVNode(n,t,r,a,o,s,!0))}function createBlock(n,t,r,a,o){return setupBlock(createVNode$1(n,t,r,a,o,!0))}function isVNode(n){return n?n.__v_isVNode===!0:!1}function isSameVNodeType(n,t){return n.type===t.type&&n.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:n})=>n??null,normalizeRef=({ref:n,ref_key:t,ref_for:r})=>(typeof n=="number"&&(n=""+n),n!=null?isString$1(n)||isRef(n)||isFunction$1(n)?{i:currentRenderingInstance,r:n,k:t,f:!!r}:n:null);function createBaseVNode(n,t=null,r=null,a=0,o=null,s=n===Fragment?0:1,l=!1,u=!1){const d={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:a,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return u?(normalizeChildren(d,r),s&128&&n.normalize(d)):r&&(d.shapeFlag|=isString$1(r)?8:16),isBlockTreeEnabled>0&&!l&&currentBlock&&(d.patchFlag>0||s&6)&&d.patchFlag!==32&&currentBlock.push(d),d}const createVNode$1=_createVNode;function _createVNode(n,t=null,r=null,a=0,o=null,s=!1){if((!n||n===NULL_DYNAMIC_COMPONENT)&&(n=Comment),isVNode(n)){const u=cloneVNode(n,t,!0);return r&&normalizeChildren(u,r),isBlockTreeEnabled>0&&!s&&currentBlock&&(u.shapeFlag&6?currentBlock[currentBlock.indexOf(n)]=u:currentBlock.push(u)),u.patchFlag|=-2,u}if(isClassComponent(n)&&(n=n.__vccOpts),t){t=guardReactiveProps(t);let{class:u,style:d}=t;u&&!isString$1(u)&&(t.class=normalizeClass(u)),isObject$4(d)&&(isProxy(d)&&!isArray$3(d)&&(d=extend$2({},d)),t.style=normalizeStyle$1(d))}const l=isString$1(n)?1:isSuspense(n)?128:isTeleport(n)?64:isObject$4(n)?4:isFunction$1(n)?2:0;return createBaseVNode(n,t,r,a,o,l,s,!0)}function guardReactiveProps(n){return n?isProxy(n)||InternalObjectKey in n?extend$2({},n):n:null}function cloneVNode(n,t,r=!1){const{props:a,ref:o,patchFlag:s,children:l}=n,u=t?mergeProps(a||{},t):a;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&normalizeKey(u),ref:t&&t.ref?r&&o?isArray$3(o)?o.concat(normalizeRef(t)):[o,normalizeRef(t)]:normalizeRef(t):o,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Fragment?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&cloneVNode(n.ssContent),ssFallback:n.ssFallback&&cloneVNode(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function createTextVNode(n=" ",t=0){return createVNode$1(Text,null,n,t)}function createStaticVNode(n,t){const r=createVNode$1(Static,null,n);return r.staticCount=t,r}function createCommentVNode(n="",t=!1){return t?(openBlock(),createBlock(Comment,null,n)):createVNode$1(Comment,null,n)}function normalizeVNode(n){return n==null||typeof n=="boolean"?createVNode$1(Comment):isArray$3(n)?createVNode$1(Fragment,null,n.slice()):typeof n=="object"?cloneIfMounted(n):createVNode$1(Text,null,String(n))}function cloneIfMounted(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:cloneVNode(n)}function normalizeChildren(n,t){let r=0;const{shapeFlag:a}=n;if(t==null)t=null;else if(isArray$3(t))r=16;else if(typeof t=="object")if(a&65){const o=t.default;o&&(o._c&&(o._d=!1),normalizeChildren(n,o()),o._c&&(o._d=!0));return}else{r=32;const o=t._;!o&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else isFunction$1(t)?(t={default:t,_ctx:currentRenderingInstance},r=32):(t=String(t),a&64?(r=16,t=[createTextVNode(t)]):r=8);n.children=t,n.shapeFlag|=r}function mergeProps(...n){const t={};for(let r=0;r<n.length;r++){const a=n[r];for(const o in a)if(o==="class")t.class!==a.class&&(t.class=normalizeClass([t.class,a.class]));else if(o==="style")t.style=normalizeStyle$1([t.style,a.style]);else if(isOn(o)){const s=t[o],l=a[o];l&&s!==l&&!(isArray$3(s)&&s.includes(l))&&(t[o]=s?[].concat(s,l):l)}else o!==""&&(t[o]=a[o])}return t}function invokeVNodeHook(n,t,r,a=null){callWithAsyncErrorHandling(n,t,7,[r,a])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(n,t,r){const a=n.type,o=(t?t.appContext:n.appContext)||emptyAppContext,s={uid:uid++,vnode:n,type:a,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(a,o),emitsOptions:normalizeEmitsOptions(a,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ$1,inheritAttrs:a.inheritAttrs,ctx:EMPTY_OBJ$1,data:EMPTY_OBJ$1,props:EMPTY_OBJ$1,attrs:EMPTY_OBJ$1,slots:EMPTY_OBJ$1,refs:EMPTY_OBJ$1,setupState:EMPTY_OBJ$1,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=emit.bind(null,s),n.ce&&n.ce(s),s}let currentInstance=null,internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(n=>currentInstance=n),internalSetCurrentInstance=n=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(t=>t(n)):globalCurrentInstanceSetters[0](n)};const setCurrentInstance=n=>{internalSetCurrentInstance(n),n.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(n){return n.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(n,t=!1){isInSSRComponentSetup=t;const{props:r,children:a}=n.vnode,o=isStatefulComponent(n);initProps$1(n,r,o,t),initSlots(n,a);const s=o?setupStatefulComponent(n,t):void 0;return isInSSRComponentSetup=!1,s}function setupStatefulComponent(n,t){const r=n.type;n.accessCache=Object.create(null),n.proxy=markRaw(new Proxy(n.ctx,PublicInstanceProxyHandlers));const{setup:a}=r;if(a){const o=n.setupContext=a.length>1?createSetupContext(n):null;setCurrentInstance(n),pauseTracking();const s=callWithErrorHandling(a,n,0,[n.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(s)){if(s.then(unsetCurrentInstance,unsetCurrentInstance),t)return s.then(l=>{handleSetupResult(n,l,t)}).catch(l=>{handleError(l,n,0)});n.asyncDep=s}else handleSetupResult(n,s,t)}else finishComponentSetup(n,t)}function handleSetupResult(n,t,r){isFunction$1(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:isObject$4(t)&&(n.setupState=proxyRefs(t)),finishComponentSetup(n,r)}let compile;function finishComponentSetup(n,t,r){const a=n.type;if(!n.render){if(!t&&compile&&!a.render){const o=a.template||resolveMergedOptions(n).template;if(o){const{isCustomElement:s,compilerOptions:l}=n.appContext.config,{delimiters:u,compilerOptions:d}=a,v=extend$2(extend$2({isCustomElement:s,delimiters:u},l),d);a.render=compile(o,v)}}n.render=a.render||NOOP}setCurrentInstance(n),pauseTracking(),applyOptions(n),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(t,r){return track(n,"get","$attrs"),t[r]}}))}function createSetupContext(n){const t=r=>{n.exposed=r||{}};return{get attrs(){return getAttrsProxy(n)},slots:n.slots,emit:n.emit,expose:t}}function getExposeProxy(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(proxyRefs(markRaw(n.exposed)),{get(t,r){if(r in t)return t[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](n)},has(t,r){return r in t||r in publicPropertiesMap}}))}function getComponentName(n,t=!0){return isFunction$1(n)?n.displayName||n.name:n.name||t&&n.__name}function isClassComponent(n){return isFunction$1(n)&&"__vccOpts"in n}const computed=(n,t)=>computed$1(n,t,isInSSRComponentSetup);function h(n,t,r){const a=arguments.length;return a===2?isObject$4(t)&&!isArray$3(t)?isVNode(t)?createVNode$1(n,null,[t]):createVNode$1(n,t):createVNode$1(n,null,t):(a>3?r=Array.prototype.slice.call(arguments,2):a===3&&isVNode(r)&&(r=[r]),createVNode$1(n,t,r))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(n,t,r)=>{t.insertBefore(n,r||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,r,a)=>{const o=t?doc.createElementNS(svgNS,n):doc.createElement(n,r?{is:r}:void 0);return n==="select"&&a&&a.multiple!=null&&o.setAttribute("multiple",a.multiple),o},createText:n=>doc.createTextNode(n),createComment:n=>doc.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>doc.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,r,a,o,s){const l=r?r.previousSibling:t.lastChild;if(o&&(o===s||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),r),!(o===s||!(o=o.nextSibling)););else{templateContainer.innerHTML=a?`<svg>${n}</svg>`:n;const u=templateContainer.content;if(a){const d=u.firstChild;for(;d.firstChild;)u.appendChild(d.firstChild);u.removeChild(d)}t.insertBefore(u,r)}return[l?l.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function patchClass(n,t,r){const a=n._vtc;a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?n.removeAttribute("class"):r?n.setAttribute("class",t):n.className=t}function patchStyle(n,t,r){const a=n.style,o=isString$1(r);if(r&&!o){if(t&&!isString$1(t))for(const s in t)r[s]==null&&setStyle(a,s,"");for(const s in r)setStyle(a,s,r[s])}else{const s=a.display;o?t!==r&&(a.cssText=r):t&&n.removeAttribute("style"),"_vod"in n&&(a.display=s)}}const importantRE=/\s*!important$/;function setStyle(n,t,r){if(isArray$3(r))r.forEach(a=>setStyle(n,t,a));else if(r==null&&(r=""),t.startsWith("--"))n.setProperty(t,r);else{const a=autoPrefix(n,t);importantRE.test(r)?n.setProperty(hyphenate(a),r.replace(importantRE,""),"important"):n[a]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(n,t){const r=prefixCache[t];if(r)return r;let a=camelize(t);if(a!=="filter"&&a in n)return prefixCache[t]=a;a=capitalize(a);for(let o=0;o<prefixes.length;o++){const s=prefixes[o]+a;if(s in n)return prefixCache[t]=s}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(n,t,r,a,o){if(a&&t.startsWith("xlink:"))r==null?n.removeAttributeNS(xlinkNS,t.slice(6,t.length)):n.setAttributeNS(xlinkNS,t,r);else{const s=isSpecialBooleanAttr(t);r==null||s&&!includeBooleanAttr(r)?n.removeAttribute(t):n.setAttribute(t,s?"":r)}}function patchDOMProp(n,t,r,a,o,s,l){if(t==="innerHTML"||t==="textContent"){a&&l(a,o,s),n[t]=r??"";return}const u=n.tagName;if(t==="value"&&u!=="PROGRESS"&&!u.includes("-")){n._value=r;const v=u==="OPTION"?n.getAttribute("value"):n.value,g=r??"";v!==g&&(n.value=g),r==null&&n.removeAttribute(t);return}let d=!1;if(r===""||r==null){const v=typeof n[t];v==="boolean"?r=includeBooleanAttr(r):r==null&&v==="string"?(r="",d=!0):v==="number"&&(r=0,d=!0)}try{n[t]=r}catch{}d&&n.removeAttribute(t)}function addEventListener$1(n,t,r,a){n.addEventListener(t,r,a)}function removeEventListener$1(n,t,r,a){n.removeEventListener(t,r,a)}function patchEvent(n,t,r,a,o=null){const s=n._vei||(n._vei={}),l=s[t];if(a&&l)l.value=a;else{const[u,d]=parseName(t);if(a){const v=s[t]=createInvoker(a,o);addEventListener$1(n,u,v,d)}else l&&(removeEventListener$1(n,u,l,d),s[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(n){let t;if(optionsModifierRE.test(n)){t={};let a;for(;a=n.match(optionsModifierRE);)n=n.slice(0,n.length-a[0].length),t[a[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):hyphenate(n.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(n,t){const r=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(a,r.value),t,5,[a])};return r.value=n,r.attached=getNow(),r}function patchStopImmediatePropagation(n,t){if(isArray$3(t)){const r=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{r.call(n),n._stopped=!0},t.map(a=>o=>!o._stopped&&a&&a(o))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(n,t,r,a,o=!1,s,l,u,d)=>{t==="class"?patchClass(n,a,o):t==="style"?patchStyle(n,r,a):isOn(t)?isModelListener(t)||patchEvent(n,t,r,a,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(n,t,a,o))?patchDOMProp(n,t,a,s,l,u,d):(t==="true-value"?n._trueValue=a:t==="false-value"&&(n._falseValue=a),patchAttr(n,t,a,o))};function shouldSetAsProp(n,t,r,a){return a?!!(t==="innerHTML"||t==="textContent"||t in n&&nativeOnRE.test(t)&&isFunction$1(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString$1(r)?!1:t in n}const getModelAssigner=n=>{const t=n.props["onUpdate:modelValue"]||!1;return isArray$3(t)?r=>invokeArrayFns(t,r):t};function onCompositionStart(n){n.target.composing=!0}function onCompositionEnd(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(n,{modifiers:{lazy:t,trim:r,number:a}},o){n._assign=getModelAssigner(o);const s=a||o.props&&o.props.type==="number";addEventListener$1(n,t?"change":"input",l=>{if(l.target.composing)return;let u=n.value;r&&(u=u.trim()),s&&(u=looseToNumber(u)),n._assign(u)}),r&&addEventListener$1(n,"change",()=>{n.value=n.value.trim()}),t||(addEventListener$1(n,"compositionstart",onCompositionStart),addEventListener$1(n,"compositionend",onCompositionEnd),addEventListener$1(n,"change",onCompositionEnd))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,modifiers:{lazy:r,trim:a,number:o}},s){if(n._assign=getModelAssigner(s),n.composing||document.activeElement===n&&n.type!=="range"&&(r||a&&n.value.trim()===t||(o||n.type==="number")&&looseToNumber(n.value)===t))return;const l=t??"";n.value!==l&&(n.value=l)}},rendererOptions=extend$2({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...n)=>{const t=ensureRenderer().createApp(...n),{mount:r}=t;return t.mount=a=>{const o=normalizeContainer(a);if(!o)return;const s=t._component;!isFunction$1(s)&&!s.render&&!s.template&&(s.template=o.innerHTML),o.innerHTML="";const l=r(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function normalizeContainer(n){return isString$1(n)?document.querySelector(n):n}/*!
  * vue-router v4.2.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(n,t){const r={};for(const a in t){const o=t[a];r[a]=isArray$2(o)?o.map(n):n(o)}return r}const noop$3=()=>{},isArray$2=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=n=>n.replace(TRAILING_SLASH_RE,"");function parseURL(n,t,r="/"){let a,o={},s="",l="";const u=t.indexOf("#");let d=t.indexOf("?");return u<d&&u>=0&&(d=-1),d>-1&&(a=t.slice(0,d),s=t.slice(d+1,u>-1?u:t.length),o=n(s)),u>-1&&(a=a||t.slice(0,u),l=t.slice(u,t.length)),a=resolveRelativePath(a??t,r),{fullPath:a+(s&&"?")+s+l,path:a,query:o,hash:l}}function stringifyURL(n,t){const r=t.query?n(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function stripBase(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function isSameRouteLocation(n,t,r){const a=t.matched.length-1,o=r.matched.length-1;return a>-1&&a===o&&isSameRouteRecord(t.matched[a],r.matched[o])&&isSameRouteLocationParams(t.params,r.params)&&n(t.query)===n(r.query)&&t.hash===r.hash}function isSameRouteRecord(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function isSameRouteLocationParams(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const r in n)if(!isSameRouteLocationParamsValue(n[r],t[r]))return!1;return!0}function isSameRouteLocationParamsValue(n,t){return isArray$2(n)?isEquivalentArray(n,t):isArray$2(t)?isEquivalentArray(t,n):n===t}function isEquivalentArray(n,t){return isArray$2(t)?n.length===t.length&&n.every((r,a)=>r===t[a]):n.length===1&&n[0]===t}function resolveRelativePath(n,t){if(n.startsWith("/"))return n;if(!n)return t;const r=t.split("/"),a=n.split("/"),o=a[a.length-1];(o===".."||o===".")&&a.push("");let s=r.length-1,l,u;for(l=0;l<a.length;l++)if(u=a[l],u!==".")if(u==="..")s>1&&s--;else break;return r.slice(0,s).join("/")+"/"+a.slice(l-(l===a.length?1:0)).join("/")}var NavigationType;(function(n){n.pop="pop",n.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(n){n.back="back",n.forward="forward",n.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(n){if(!n)if(isBrowser){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),removeTrailingSlash(n)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(n,t){return n.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(n,t){const r=document.documentElement.getBoundingClientRect(),a=n.getBoundingClientRect();return{behavior:t.behavior,left:a.left-r.left-(t.left||0),top:a.top-r.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(n){let t;if("el"in n){const r=n.el,a=typeof r=="string"&&r.startsWith("#"),o=typeof r=="string"?a?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!o)return;t=getElementPosition(o,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function getScrollKey(n,t){return(history.state?history.state.position-t:-1)+n}const scrollPositions=new Map;function saveScrollPosition(n,t){scrollPositions.set(n,t)}function getSavedScrollPosition(n){const t=scrollPositions.get(n);return scrollPositions.delete(n),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(n,t){const{pathname:r,search:a,hash:o}=t,s=n.indexOf("#");if(s>-1){let u=o.includes(n.slice(s))?n.slice(s).length:1,d=o.slice(u);return d[0]!=="/"&&(d="/"+d),stripBase(d,"")}return stripBase(r,n)+a+o}function useHistoryListeners(n,t,r,a){let o=[],s=[],l=null;const u=({state:c})=>{const y=createCurrentLocation(n,location),_=r.value,b=t.value;let S=0;if(c){if(r.value=y,t.value=c,l&&l===_){l=null;return}S=b?c.position-b.position:0}else a(y);o.forEach(x=>{x(r.value,_,{delta:S,type:NavigationType.pop,direction:S?S>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function d(){l=r.value}function v(c){o.push(c);const y=()=>{const _=o.indexOf(c);_>-1&&o.splice(_,1)};return s.push(y),y}function g(){const{history:c}=window;c.state&&c.replaceState(assign({},c.state,{scroll:computeScrollPosition()}),"")}function f(){for(const c of s)c();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",g,{passive:!0}),{pauseListeners:d,listen:v,destroy:f}}function buildState(n,t,r,a=!1,o=!1){return{back:n,current:t,forward:r,replaced:a,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(n){const{history:t,location:r}=window,a={value:createCurrentLocation(n,r)},o={value:t.state};o.value||s(a.value,{back:null,current:a.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(d,v,g){const f=n.indexOf("#"),c=f>-1?(r.host&&document.querySelector("base")?n:n.slice(f))+d:createBaseLocation()+n+d;try{t[g?"replaceState":"pushState"](v,"",c),o.value=v}catch(y){console.error(y),r[g?"replace":"assign"](c)}}function l(d,v){const g=assign({},t.state,buildState(o.value.back,d,o.value.forward,!0),v,{position:o.value.position});s(d,g,!0),a.value=d}function u(d,v){const g=assign({},o.value,t.state,{forward:d,scroll:computeScrollPosition()});s(g.current,g,!0);const f=assign({},buildState(a.value,d,null),{position:g.position+1},v);s(d,f,!1),a.value=d}return{location:a,state:o,push:u,replace:l}}function createWebHistory(n){n=normalizeBase(n);const t=useHistoryStateNavigation(n),r=useHistoryListeners(n,t.state,t.location,t.replace);function a(s,l=!0){l||r.pauseListeners(),history.go(s)}const o=assign({location:"",base:n,go:a,createHref:createHref.bind(null,n)},t,r);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function createWebHashHistory(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),createWebHistory(n)}function isRouteLocation(n){return typeof n=="string"||n&&typeof n=="object"}function isRouteName(n){return typeof n=="string"||typeof n=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(n,t){return assign(new Error,{type:n,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(n,t){return n instanceof Error&&NavigationFailureSymbol in n&&(t==null||!!(n.type&t))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(n,t){const r=assign({},BASE_PATH_PARSER_OPTIONS,t),a=[];let o=r.start?"^":"";const s=[];for(const v of n){const g=v.length?[]:[90];r.strict&&!v.length&&(o+="/");for(let f=0;f<v.length;f++){const c=v[f];let y=40+(r.sensitive?.25:0);if(c.type===0)f||(o+="/"),o+=c.value.replace(REGEX_CHARS_RE,"\\$&"),y+=40;else if(c.type===1){const{value:_,repeatable:b,optional:S,regexp:x}=c;s.push({name:_,repeatable:b,optional:S});const w=x||BASE_PARAM_PATTERN;if(w!==BASE_PARAM_PATTERN){y+=10;try{new RegExp(`(${w})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${_}" (${w}): `+A.message)}}let T=b?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;f||(T=S&&v.length<2?`(?:/${T})`:"/"+T),S&&(T+="?"),o+=T,y+=20,S&&(y+=-8),b&&(y+=-20),w===".*"&&(y+=-50)}g.push(y)}a.push(g)}if(r.strict&&r.end){const v=a.length-1;a[v][a[v].length-1]+=.7000000000000001}r.strict||(o+="/?"),r.end?o+="$":r.strict&&(o+="(?:/|$)");const l=new RegExp(o,r.sensitive?"":"i");function u(v){const g=v.match(l),f={};if(!g)return null;for(let c=1;c<g.length;c++){const y=g[c]||"",_=s[c-1];f[_.name]=y&&_.repeatable?y.split("/"):y}return f}function d(v){let g="",f=!1;for(const c of n){(!f||!g.endsWith("/"))&&(g+="/"),f=!1;for(const y of c)if(y.type===0)g+=y.value;else if(y.type===1){const{value:_,repeatable:b,optional:S}=y,x=_ in v?v[_]:"";if(isArray$2(x)&&!b)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const w=isArray$2(x)?x.join("/"):x;if(!w)if(S)c.length<2&&(g.endsWith("/")?g=g.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);g+=w}}return g||"/"}return{re:l,score:a,keys:s,parse:u,stringify:d}}function compareScoreArray(n,t){let r=0;for(;r<n.length&&r<t.length;){const a=t[r]-n[r];if(a)return a;r++}return n.length<t.length?n.length===1&&n[0]===40+40?-1:1:n.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(n,t){let r=0;const a=n.score,o=t.score;for(;r<a.length&&r<o.length;){const s=compareScoreArray(a[r],o[r]);if(s)return s;r++}if(Math.abs(o.length-a.length)===1){if(isLastScoreNegative(a))return 1;if(isLastScoreNegative(o))return-1}return o.length-a.length}function isLastScoreNegative(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(n){if(!n)return[[]];if(n==="/")return[[ROOT_TOKEN]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(y){throw new Error(`ERR (${r})/"${v}": ${y}`)}let r=0,a=r;const o=[];let s;function l(){s&&o.push(s),s=[]}let u=0,d,v="",g="";function f(){v&&(r===0?s.push({type:0,value:v}):r===1||r===2||r===3?(s.length>1&&(d==="*"||d==="+")&&t(`A repeatable param (${v}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:v,regexp:g,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):t("Invalid state to consume buffer"),v="")}function c(){v+=d}for(;u<n.length;){if(d=n[u++],d==="\\"&&r!==2){a=r,r=4;continue}switch(r){case 0:d==="/"?(v&&f(),l()):d===":"?(f(),r=1):c();break;case 4:c(),r=a;break;case 1:d==="("?r=2:VALID_PARAM_RE.test(d)?c():(f(),r=0,d!=="*"&&d!=="?"&&d!=="+"&&u--);break;case 2:d===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+d:r=3:g+=d;break;case 3:f(),r=0,d!=="*"&&d!=="?"&&d!=="+"&&u--,g="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${v}"`),f(),l(),o}function createRouteRecordMatcher(n,t,r){const a=tokensToParser(tokenizePath(n.path),r),o=assign(a,{record:n,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function createRouterMatcher(n,t){const r=[],a=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function o(g){return a.get(g)}function s(g,f,c){const y=!c,_=normalizeRouteRecord(g);_.aliasOf=c&&c.record;const b=mergeOptions(t,g),S=[_];if("alias"in g){const T=typeof g.alias=="string"?[g.alias]:g.alias;for(const A of T)S.push(assign({},_,{components:c?c.record.components:_.components,path:A,aliasOf:c?c.record:_}))}let x,w;for(const T of S){const{path:A}=T;if(f&&A[0]!=="/"){const E=f.record.path,$=E[E.length-1]==="/"?"":"/";T.path=f.record.path+(A&&$+A)}if(x=createRouteRecordMatcher(T,f,b),c?c.alias.push(x):(w=w||x,w!==x&&w.alias.push(x),y&&g.name&&!isAliasRecord(x)&&l(g.name)),_.children){const E=_.children;for(let $=0;$<E.length;$++)s(E[$],x,c&&c.children[$])}c=c||x,(x.record.components&&Object.keys(x.record.components).length||x.record.name||x.record.redirect)&&d(x)}return w?()=>{l(w)}:noop$3}function l(g){if(isRouteName(g)){const f=a.get(g);f&&(a.delete(g),r.splice(r.indexOf(f),1),f.children.forEach(l),f.alias.forEach(l))}else{const f=r.indexOf(g);f>-1&&(r.splice(f,1),g.record.name&&a.delete(g.record.name),g.children.forEach(l),g.alias.forEach(l))}}function u(){return r}function d(g){let f=0;for(;f<r.length&&comparePathParserScore(g,r[f])>=0&&(g.record.path!==r[f].record.path||!isRecordChildOf(g,r[f]));)f++;r.splice(f,0,g),g.record.name&&!isAliasRecord(g)&&a.set(g.record.name,g)}function v(g,f){let c,y={},_,b;if("name"in g&&g.name){if(c=a.get(g.name),!c)throw createRouterError(1,{location:g});b=c.record.name,y=assign(paramsFromLocation(f.params,c.keys.filter(w=>!w.optional).map(w=>w.name)),g.params&&paramsFromLocation(g.params,c.keys.map(w=>w.name))),_=c.stringify(y)}else if("path"in g)_=g.path,c=r.find(w=>w.re.test(_)),c&&(y=c.parse(_),b=c.record.name);else{if(c=f.name?a.get(f.name):r.find(w=>w.re.test(f.path)),!c)throw createRouterError(1,{location:g,currentLocation:f});b=c.record.name,y=assign({},f.params,g.params),_=c.stringify(y)}const S=[];let x=c;for(;x;)S.unshift(x.record),x=x.parent;return{name:b,path:_,params:y,matched:S,meta:mergeMetaFields(S)}}return n.forEach(g=>s(g)),{addRoute:s,resolve:v,removeRoute:l,getRoutes:u,getRecordMatcher:o}}function paramsFromLocation(n,t){const r={};for(const a of t)a in n&&(r[a]=n[a]);return r}function normalizeRouteRecord(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:normalizeRecordProps(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function normalizeRecordProps(n){const t={},r=n.props||!1;if("component"in n)t.default=r;else for(const a in n.components)t[a]=typeof r=="boolean"?r:r[a];return t}function isAliasRecord(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function mergeMetaFields(n){return n.reduce((t,r)=>assign(t,r.meta),{})}function mergeOptions(n,t){const r={};for(const a in n)r[a]=a in t?t[a]:n[a];return r}function isRecordChildOf(n,t){return t.children.some(r=>r===n||isRecordChildOf(n,r))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(n){return encodeURI(""+n).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(n){return commonEncode(n).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(n){return commonEncode(n).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(n){return encodeQueryValue(n).replace(EQUAL_RE,"%3D")}function encodePath(n){return commonEncode(n).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(n){return n==null?"":encodePath(n).replace(SLASH_RE,"%2F")}function decode$1(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function parseQuery(n){const t={};if(n===""||n==="?")return t;const a=(n[0]==="?"?n.slice(1):n).split("&");for(let o=0;o<a.length;++o){const s=a[o].replace(PLUS_RE," "),l=s.indexOf("="),u=decode$1(l<0?s:s.slice(0,l)),d=l<0?null:decode$1(s.slice(l+1));if(u in t){let v=t[u];isArray$2(v)||(v=t[u]=[v]),v.push(d)}else t[u]=d}return t}function stringifyQuery(n){let t="";for(let r in n){const a=n[r];if(r=encodeQueryKey(r),a==null){a!==void 0&&(t+=(t.length?"&":"")+r);continue}(isArray$2(a)?a.map(s=>s&&encodeQueryValue(s)):[a&&encodeQueryValue(a)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+r,s!=null&&(t+="="+s))})}return t}function normalizeQuery(n){const t={};for(const r in n){const a=n[r];a!==void 0&&(t[r]=isArray$2(a)?a.map(o=>o==null?null:""+o):a==null?a:""+a)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let n=[];function t(a){return n.push(a),()=>{const o=n.indexOf(a);o>-1&&n.splice(o,1)}}function r(){n=[]}return{add:t,list:()=>n,reset:r}}function guardToPromiseFn(n,t,r,a,o){const s=a&&(a.enterCallbacks[o]=a.enterCallbacks[o]||[]);return()=>new Promise((l,u)=>{const d=f=>{f===!1?u(createRouterError(4,{from:r,to:t})):f instanceof Error?u(f):isRouteLocation(f)?u(createRouterError(2,{from:t,to:f})):(s&&a.enterCallbacks[o]===s&&typeof f=="function"&&s.push(f),l())},v=n.call(a&&a.instances[o],t,r,d);let g=Promise.resolve(v);n.length<3&&(g=g.then(d)),g.catch(f=>u(f))})}function extractComponentsGuards(n,t,r,a){const o=[];for(const s of n)for(const l in s.components){let u=s.components[l];if(!(t!=="beforeRouteEnter"&&!s.instances[l]))if(isRouteComponent(u)){const v=(u.__vccOpts||u)[t];v&&o.push(guardToPromiseFn(v,r,a,s,l))}else{let d=u();o.push(()=>d.then(v=>{if(!v)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${s.path}"`));const g=isESModule(v)?v.default:v;s.components[l]=g;const c=(g.__vccOpts||g)[t];return c&&guardToPromiseFn(c,r,a,s,l)()}))}}return o}function isRouteComponent(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function useLink(n){const t=inject(routerKey),r=inject(routeLocationKey),a=computed(()=>t.resolve(unref(n.to))),o=computed(()=>{const{matched:d}=a.value,{length:v}=d,g=d[v-1],f=r.matched;if(!g||!f.length)return-1;const c=f.findIndex(isSameRouteRecord.bind(null,g));if(c>-1)return c;const y=getOriginalPath(d[v-2]);return v>1&&getOriginalPath(g)===y&&f[f.length-1].path!==y?f.findIndex(isSameRouteRecord.bind(null,d[v-2])):c}),s=computed(()=>o.value>-1&&includesParams(r.params,a.value.params)),l=computed(()=>o.value>-1&&o.value===r.matched.length-1&&isSameRouteLocationParams(r.params,a.value.params));function u(d={}){return guardEvent(d)?t[unref(n.replace)?"replace":"push"](unref(n.to)).catch(noop$3):Promise.resolve()}return{route:a,href:computed(()=>a.value.href),isActive:s,isExactActive:l,navigate:u}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(n,{slots:t}){const r=reactive(useLink(n)),{options:a}=inject(routerKey),o=computed(()=>({[getLinkClass(n.activeClass,a.linkActiveClass,"router-link-active")]:r.isActive,[getLinkClass(n.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=t.default&&t.default(r);return n.custom?s:h("a",{"aria-current":r.isExactActive?n.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:o.value},s)}}}),RouterLink=RouterLinkImpl;function guardEvent(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function includesParams(n,t){for(const r in t){const a=t[r],o=n[r];if(typeof a=="string"){if(a!==o)return!1}else if(!isArray$2(o)||o.length!==a.length||a.some((s,l)=>s!==o[l]))return!1}return!0}function getOriginalPath(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const getLinkClass=(n,t,r)=>n??t??r,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:r}){const a=inject(routerViewLocationKey),o=computed(()=>n.route||a.value),s=inject(viewDepthKey,0),l=computed(()=>{let v=unref(s);const{matched:g}=o.value;let f;for(;(f=g[v])&&!f.components;)v++;return v}),u=computed(()=>o.value.matched[l.value]);provide(viewDepthKey,computed(()=>l.value+1)),provide(matchedRouteKey,u),provide(routerViewLocationKey,o);const d=ref();return watch(()=>[d.value,u.value,n.name],([v,g,f],[c,y,_])=>{g&&(g.instances[f]=v,y&&y!==g&&v&&v===c&&(g.leaveGuards.size||(g.leaveGuards=y.leaveGuards),g.updateGuards.size||(g.updateGuards=y.updateGuards))),v&&g&&(!y||!isSameRouteRecord(g,y)||!c)&&(g.enterCallbacks[f]||[]).forEach(b=>b(v))},{flush:"post"}),()=>{const v=o.value,g=n.name,f=u.value,c=f&&f.components[g];if(!c)return normalizeSlot(r.default,{Component:c,route:v});const y=f.props[g],_=y?y===!0?v.params:typeof y=="function"?y(v):y:null,S=h(c,assign({},_,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(f.instances[g]=null)},ref:d}));return normalizeSlot(r.default,{Component:S,route:v})||S}}});function normalizeSlot(n,t){if(!n)return null;const r=n(t);return r.length===1?r[0]:r}const RouterView=RouterViewImpl;function createRouter(n){const t=createRouterMatcher(n.routes,n),r=n.parseQuery||parseQuery,a=n.stringifyQuery||stringifyQuery,o=n.history,s=useCallbacks(),l=useCallbacks(),u=useCallbacks(),d=shallowRef(START_LOCATION_NORMALIZED);let v=START_LOCATION_NORMALIZED;isBrowser&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=applyToParams.bind(null,j=>""+j),f=applyToParams.bind(null,encodeParam),c=applyToParams.bind(null,decode$1);function y(j,Q){let J,oe;return isRouteName(j)?(J=t.getRecordMatcher(j),oe=Q):oe=j,t.addRoute(oe,J)}function _(j){const Q=t.getRecordMatcher(j);Q&&t.removeRoute(Q)}function b(){return t.getRoutes().map(j=>j.record)}function S(j){return!!t.getRecordMatcher(j)}function x(j,Q){if(Q=assign({},Q||d.value),typeof j=="string"){const Z=parseURL(r,j,Q.path),ae=t.resolve({path:Z.path},Q),se=o.createHref(Z.fullPath);return assign(Z,ae,{params:c(ae.params),hash:decode$1(Z.hash),redirectedFrom:void 0,href:se})}let J;if("path"in j)J=assign({},j,{path:parseURL(r,j.path,Q.path).path});else{const Z=assign({},j.params);for(const ae in Z)Z[ae]==null&&delete Z[ae];J=assign({},j,{params:f(Z)}),Q.params=f(Q.params)}const oe=t.resolve(J,Q),ne=j.hash||"";oe.params=g(c(oe.params));const z=stringifyURL(a,assign({},j,{hash:encodeHash(ne),path:oe.path})),W=o.createHref(z);return assign({fullPath:z,hash:ne,query:a===stringifyQuery?normalizeQuery(j.query):j.query||{}},oe,{redirectedFrom:void 0,href:W})}function w(j){return typeof j=="string"?parseURL(r,j,d.value.path):assign({},j)}function T(j,Q){if(v!==j)return createRouterError(8,{from:Q,to:j})}function A(j){return P(j)}function E(j){return A(assign(w(j),{replace:!0}))}function $(j){const Q=j.matched[j.matched.length-1];if(Q&&Q.redirect){const{redirect:J}=Q;let oe=typeof J=="function"?J(j):J;return typeof oe=="string"&&(oe=oe.includes("?")||oe.includes("#")?oe=w(oe):{path:oe},oe.params={}),assign({query:j.query,hash:j.hash,params:"path"in oe?{}:j.params},oe)}}function P(j,Q){const J=v=x(j),oe=d.value,ne=j.state,z=j.force,W=j.replace===!0,Z=$(J);if(Z)return P(assign(w(Z),{state:typeof Z=="object"?assign({},ne,Z.state):ne,force:z,replace:W}),Q||J);const ae=J;ae.redirectedFrom=Q;let se;return!z&&isSameRouteLocation(a,oe,J)&&(se=createRouterError(16,{to:ae,from:oe}),U(oe,oe,!0,!1)),(se?Promise.resolve(se):M(ae,oe)).catch(ce=>isNavigationFailure(ce)?isNavigationFailure(ce,2)?ce:X(ce):V(ce,ae,oe)).then(ce=>{if(ce){if(isNavigationFailure(ce,2))return P(assign({replace:W},w(ce.to),{state:typeof ce.to=="object"?assign({},ne,ce.to.state):ne,force:z}),Q||ae)}else ce=R(ae,oe,!0,W,ne);return D(ae,oe,ce),ce})}function I(j,Q){const J=T(j,Q);return J?Promise.reject(J):Promise.resolve()}function C(j){const Q=q.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(j):j()}function M(j,Q){let J;const[oe,ne,z]=extractChangingRecords(j,Q);J=extractComponentsGuards(oe.reverse(),"beforeRouteLeave",j,Q);for(const Z of oe)Z.leaveGuards.forEach(ae=>{J.push(guardToPromiseFn(ae,j,Q))});const W=I.bind(null,j,Q);return J.push(W),pe(J).then(()=>{J=[];for(const Z of s.list())J.push(guardToPromiseFn(Z,j,Q));return J.push(W),pe(J)}).then(()=>{J=extractComponentsGuards(ne,"beforeRouteUpdate",j,Q);for(const Z of ne)Z.updateGuards.forEach(ae=>{J.push(guardToPromiseFn(ae,j,Q))});return J.push(W),pe(J)}).then(()=>{J=[];for(const Z of j.matched)if(Z.beforeEnter&&!Q.matched.includes(Z))if(isArray$2(Z.beforeEnter))for(const ae of Z.beforeEnter)J.push(guardToPromiseFn(ae,j,Q));else J.push(guardToPromiseFn(Z.beforeEnter,j,Q));return J.push(W),pe(J)}).then(()=>(j.matched.forEach(Z=>Z.enterCallbacks={}),J=extractComponentsGuards(z,"beforeRouteEnter",j,Q),J.push(W),pe(J))).then(()=>{J=[];for(const Z of l.list())J.push(guardToPromiseFn(Z,j,Q));return J.push(W),pe(J)}).catch(Z=>isNavigationFailure(Z,8)?Z:Promise.reject(Z))}function D(j,Q,J){for(const oe of u.list())C(()=>oe(j,Q,J))}function R(j,Q,J,oe,ne){const z=T(j,Q);if(z)return z;const W=Q===START_LOCATION_NORMALIZED,Z=isBrowser?history.state:{};J&&(oe||W?o.replace(j.fullPath,assign({scroll:W&&Z&&Z.scroll},ne)):o.push(j.fullPath,ne)),d.value=j,U(j,Q,J,W),X()}let N;function O(){N||(N=o.listen((j,Q,J)=>{if(!ie.listening)return;const oe=x(j),ne=$(oe);if(ne){P(assign(ne,{replace:!0}),oe).catch(noop$3);return}v=oe;const z=d.value;isBrowser&&saveScrollPosition(getScrollKey(z.fullPath,J.delta),computeScrollPosition()),M(oe,z).catch(W=>isNavigationFailure(W,12)?W:isNavigationFailure(W,2)?(P(W.to,oe).then(Z=>{isNavigationFailure(Z,20)&&!J.delta&&J.type===NavigationType.pop&&o.go(-1,!1)}).catch(noop$3),Promise.reject()):(J.delta&&o.go(-J.delta,!1),V(W,oe,z))).then(W=>{W=W||R(oe,z,!1),W&&(J.delta&&!isNavigationFailure(W,8)?o.go(-J.delta,!1):J.type===NavigationType.pop&&isNavigationFailure(W,20)&&o.go(-1,!1)),D(oe,z,W)}).catch(noop$3)}))}let F=useCallbacks(),L=useCallbacks(),B;function V(j,Q,J){X(j);const oe=L.list();return oe.length?oe.forEach(ne=>ne(j,Q,J)):console.error(j),Promise.reject(j)}function H(){return B&&d.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((j,Q)=>{F.add([j,Q])})}function X(j){return B||(B=!j,O(),F.list().forEach(([Q,J])=>j?J(j):Q()),F.reset()),j}function U(j,Q,J,oe){const{scrollBehavior:ne}=n;if(!isBrowser||!ne)return Promise.resolve();const z=!J&&getSavedScrollPosition(getScrollKey(j.fullPath,0))||(oe||!J)&&history.state&&history.state.scroll||null;return nextTick().then(()=>ne(j,Q,z)).then(W=>W&&scrollToPosition(W)).catch(W=>V(W,j,Q))}const te=j=>o.go(j);let ee;const q=new Set,ie={currentRoute:d,listening:!0,addRoute:y,removeRoute:_,hasRoute:S,getRoutes:b,resolve:x,options:n,push:A,replace:E,go:te,back:()=>te(-1),forward:()=>te(1),beforeEach:s.add,beforeResolve:l.add,afterEach:u.add,onError:L.add,isReady:H,install(j){const Q=this;j.component("RouterLink",RouterLink),j.component("RouterView",RouterView),j.config.globalProperties.$router=Q,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(d)}),isBrowser&&!ee&&d.value===START_LOCATION_NORMALIZED&&(ee=!0,A(o.location).catch(ne=>{}));const J={};for(const ne in START_LOCATION_NORMALIZED)J[ne]=computed(()=>d.value[ne]);j.provide(routerKey,Q),j.provide(routeLocationKey,reactive(J)),j.provide(routerViewLocationKey,d);const oe=j.unmount;q.add(j),j.unmount=function(){q.delete(j),q.size<1&&(v=START_LOCATION_NORMALIZED,N&&N(),N=null,d.value=START_LOCATION_NORMALIZED,ee=!1,B=!1),oe()}}};function pe(j){return j.reduce((Q,J)=>Q.then(()=>C(J)),Promise.resolve())}return ie}function extractChangingRecords(n,t){const r=[],a=[],o=[],s=Math.max(t.matched.length,n.matched.length);for(let l=0;l<s;l++){const u=t.matched[l];u&&(n.matched.find(v=>isSameRouteRecord(v,u))?a.push(u):r.push(u));const d=n.matched[l];d&&(t.matched.find(v=>isSameRouteRecord(v,d))||o.push(d))}return[r,a,o]}function useRouter(){return inject(routerKey)}function useRoute(){return inject(routeLocationKey)}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let a=0;for(let o=0;o<this._n&&o<32;o++){const s=r[o],l=t+s,u=Math.abs(t)<Math.abs(s)?t-(l-s):s-(l-t);u&&(r[a++]=u),t=l}return r[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let r=this._n,a,o,s,l=0;if(r>0){for(l=t[--r];r>0&&(a=l,o=t[--r],l=a+o,s=o-(l-a),!s););r>0&&(s<0&&t[r-1]<0||s>0&&t[r-1]>0)&&(o=s*2,a=l+o,o==a-l&&(l=a))}return l}}function*flatten(n){for(const t of n)yield*t}function merge$1(n){return Array.from(flatten(n))}var noop$2={value:()=>{}};function dispatch(){for(var n=0,t=arguments.length,r={},a;n<t;++n){if(!(a=arguments[n]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new Dispatch(r)}function Dispatch(n){this._=n}function parseTypenames$1(n,t){return n.trim().split(/^|\s+/).map(function(r){var a="",o=r.indexOf(".");if(o>=0&&(a=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(n,t){var r=this._,a=parseTypenames$1(n+"",r),o,s=-1,l=a.length;if(arguments.length<2){for(;++s<l;)if((o=(n=a[s]).type)&&(o=get$2(r[o],n.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<l;)if(o=(n=a[s]).type)r[o]=set$3(r[o],n.name,t);else if(t==null)for(o in r)r[o]=set$3(r[o],n.name,null);return this},copy:function(){var n={},t=this._;for(var r in t)n[r]=t[r].slice();return new Dispatch(n)},call:function(n,t){if((o=arguments.length-2)>0)for(var r=new Array(o),a=0,o,s;a<o;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],a=0,o=s.length;a<o;++a)s[a].value.apply(t,r)},apply:function(n,t,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var a=this._[n],o=0,s=a.length;o<s;++o)a[o].value.apply(t,r)}};function get$2(n,t){for(var r=0,a=n.length,o;r<a;++r)if((o=n[r]).name===t)return o.value}function set$3(n,t,r){for(var a=0,o=n.length;a<o;++a)if(n[a].name===t){n[a]=noop$2,n=n.slice(0,a).concat(n.slice(a+1));break}return r!=null&&n.push({name:t,value:r}),n}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(n){var t=n+="",r=t.indexOf(":");return r>=0&&(t=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),namespaces.hasOwnProperty(t)?{space:namespaces[t],local:n}:n}function creatorInherit(n){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===xhtml&&t.documentElement.namespaceURI===xhtml?t.createElement(n):t.createElementNS(r,n)}}function creatorFixed(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function creator(n){var t=namespace(n);return(t.local?creatorFixed:creatorInherit)(t)}function none(){}function selector$1(n){return n==null?none:function(){return this.querySelector(n)}}function selection_select(n){typeof n!="function"&&(n=selector$1(n));for(var t=this._groups,r=t.length,a=new Array(r),o=0;o<r;++o)for(var s=t[o],l=s.length,u=a[o]=new Array(l),d,v,g=0;g<l;++g)(d=s[g])&&(v=n.call(d,d.__data__,g,s))&&("__data__"in d&&(v.__data__=d.__data__),u[g]=v);return new Selection$1(a,this._parents)}function array(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function empty(){return[]}function selectorAll(n){return n==null?empty:function(){return this.querySelectorAll(n)}}function arrayAll(n){return function(){return array(n.apply(this,arguments))}}function selection_selectAll(n){typeof n=="function"?n=arrayAll(n):n=selectorAll(n);for(var t=this._groups,r=t.length,a=[],o=[],s=0;s<r;++s)for(var l=t[s],u=l.length,d,v=0;v<u;++v)(d=l[v])&&(a.push(n.call(d,d.__data__,v,l)),o.push(d));return new Selection$1(a,o)}function matcher(n){return function(){return this.matches(n)}}function childMatcher(n){return function(t){return t.matches(n)}}var find$1=Array.prototype.find;function childFind(n){return function(){return find$1.call(this.children,n)}}function childFirst(){return this.firstElementChild}function selection_selectChild(n){return this.select(n==null?childFirst:childFind(typeof n=="function"?n:childMatcher(n)))}var filter$1=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(n){return function(){return filter$1.call(this.children,n)}}function selection_selectChildren(n){return this.selectAll(n==null?children:childrenFilter(typeof n=="function"?n:childMatcher(n)))}function selection_filter(n){typeof n!="function"&&(n=matcher(n));for(var t=this._groups,r=t.length,a=new Array(r),o=0;o<r;++o)for(var s=t[o],l=s.length,u=a[o]=[],d,v=0;v<l;++v)(d=s[v])&&n.call(d,d.__data__,v,s)&&u.push(d);return new Selection$1(a,this._parents)}function sparse(n){return new Array(n.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}EnterNode.prototype={constructor:EnterNode,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function constant$2(n){return function(){return n}}function bindIndex(n,t,r,a,o,s){for(var l=0,u,d=t.length,v=s.length;l<v;++l)(u=t[l])?(u.__data__=s[l],a[l]=u):r[l]=new EnterNode(n,s[l]);for(;l<d;++l)(u=t[l])&&(o[l]=u)}function bindKey(n,t,r,a,o,s,l){var u,d,v=new Map,g=t.length,f=s.length,c=new Array(g),y;for(u=0;u<g;++u)(d=t[u])&&(c[u]=y=l.call(d,d.__data__,u,t)+"",v.has(y)?o[u]=d:v.set(y,d));for(u=0;u<f;++u)y=l.call(n,s[u],u,s)+"",(d=v.get(y))?(a[u]=d,d.__data__=s[u],v.delete(y)):r[u]=new EnterNode(n,s[u]);for(u=0;u<g;++u)(d=t[u])&&v.get(c[u])===d&&(o[u]=d)}function datum(n){return n.__data__}function selection_data(n,t){if(!arguments.length)return Array.from(this,datum);var r=t?bindKey:bindIndex,a=this._parents,o=this._groups;typeof n!="function"&&(n=constant$2(n));for(var s=o.length,l=new Array(s),u=new Array(s),d=new Array(s),v=0;v<s;++v){var g=a[v],f=o[v],c=f.length,y=arraylike(n.call(g,g&&g.__data__,v,a)),_=y.length,b=u[v]=new Array(_),S=l[v]=new Array(_),x=d[v]=new Array(c);r(g,f,b,S,x,y,t);for(var w=0,T=0,A,E;w<_;++w)if(A=b[w]){for(w>=T&&(T=w+1);!(E=S[T])&&++T<_;);A._next=E||null}}return l=new Selection$1(l,a),l._enter=u,l._exit=d,l}function arraylike(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(n,t,r){var a=this.enter(),o=this,s=this.exit();return typeof n=="function"?(a=n(a),a&&(a=a.selection())):a=a.append(n+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?s.remove():r(s),a&&o?a.merge(o).order():o}function selection_merge(n){for(var t=n.selection?n.selection():n,r=this._groups,a=t._groups,o=r.length,s=a.length,l=Math.min(o,s),u=new Array(o),d=0;d<l;++d)for(var v=r[d],g=a[d],f=v.length,c=u[d]=new Array(f),y,_=0;_<f;++_)(y=v[_]||g[_])&&(c[_]=y);for(;d<o;++d)u[d]=r[d];return new Selection$1(u,this._parents)}function selection_order(){for(var n=this._groups,t=-1,r=n.length;++t<r;)for(var a=n[t],o=a.length-1,s=a[o],l;--o>=0;)(l=a[o])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function selection_sort(n){n||(n=ascending);function t(f,c){return f&&c?n(f.__data__,c.__data__):!f-!c}for(var r=this._groups,a=r.length,o=new Array(a),s=0;s<a;++s){for(var l=r[s],u=l.length,d=o[s]=new Array(u),v,g=0;g<u;++g)(v=l[g])&&(d[g]=v);d.sort(t)}return new Selection$1(o,this._parents).order()}function ascending(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function selection_call(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var n=this._groups,t=0,r=n.length;t<r;++t)for(var a=n[t],o=0,s=a.length;o<s;++o){var l=a[o];if(l)return l}return null}function selection_size(){let n=0;for(const t of this)++n;return n}function selection_empty(){return!this.node()}function selection_each(n){for(var t=this._groups,r=0,a=t.length;r<a;++r)for(var o=t[r],s=0,l=o.length,u;s<l;++s)(u=o[s])&&n.call(u,u.__data__,s,o);return this}function attrRemove$1(n){return function(){this.removeAttribute(n)}}function attrRemoveNS$1(n){return function(){this.removeAttributeNS(n.space,n.local)}}function attrConstant$1(n,t){return function(){this.setAttribute(n,t)}}function attrConstantNS$1(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function attrFunction$1(n,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function attrFunctionNS$1(n,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function selection_attr(n,t){var r=namespace(n);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((t==null?r.local?attrRemoveNS$1:attrRemove$1:typeof t=="function"?r.local?attrFunctionNS$1:attrFunction$1:r.local?attrConstantNS$1:attrConstant$1)(r,t))}function defaultView(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function styleRemove$1(n){return function(){this.style.removeProperty(n)}}function styleConstant$1(n,t,r){return function(){this.style.setProperty(n,t,r)}}function styleFunction$1(n,t,r){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(n):this.style.setProperty(n,a,r)}}function selection_style(n,t,r){return arguments.length>1?this.each((t==null?styleRemove$1:typeof t=="function"?styleFunction$1:styleConstant$1)(n,t,r??"")):styleValue(this.node(),n)}function styleValue(n,t){return n.style.getPropertyValue(t)||defaultView(n).getComputedStyle(n,null).getPropertyValue(t)}function propertyRemove(n){return function(){delete this[n]}}function propertyConstant(n,t){return function(){this[n]=t}}function propertyFunction(n,t){return function(){var r=t.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function selection_property(n,t){return arguments.length>1?this.each((t==null?propertyRemove:typeof t=="function"?propertyFunction:propertyConstant)(n,t)):this.node()[n]}function classArray(n){return n.trim().split(/^|\s+/)}function classList(n){return n.classList||new ClassList(n)}function ClassList(n){this._node=n,this._names=classArray(n.getAttribute("class")||"")}ClassList.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function classedAdd(n,t){for(var r=classList(n),a=-1,o=t.length;++a<o;)r.add(t[a])}function classedRemove(n,t){for(var r=classList(n),a=-1,o=t.length;++a<o;)r.remove(t[a])}function classedTrue(n){return function(){classedAdd(this,n)}}function classedFalse(n){return function(){classedRemove(this,n)}}function classedFunction(n,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,n)}}function selection_classed(n,t){var r=classArray(n+"");if(arguments.length<2){for(var a=classList(this.node()),o=-1,s=r.length;++o<s;)if(!a.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?classedFunction:t?classedTrue:classedFalse)(r,t))}function textRemove(){this.textContent=""}function textConstant$1(n){return function(){this.textContent=n}}function textFunction$1(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function selection_text(n){return arguments.length?this.each(n==null?textRemove:(typeof n=="function"?textFunction$1:textConstant$1)(n)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(n){return function(){this.innerHTML=n}}function htmlFunction(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function selection_html(n){return arguments.length?this.each(n==null?htmlRemove:(typeof n=="function"?htmlFunction:htmlConstant)(n)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(n){var t=typeof n=="function"?n:creator(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function constantNull(){return null}function selection_insert(n,t){var r=typeof n=="function"?n:creator(n),a=t==null?constantNull:typeof t=="function"?t:selector$1(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function remove(){var n=this.parentNode;n&&n.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function selection_cloneDeep(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function selection_clone(n){return this.select(n?selection_cloneDeep:selection_cloneShallow)}function selection_datum(n){return arguments.length?this.property("__data__",n):this.node().__data__}function contextListener(n){return function(t){n.call(this,t,this.__data__)}}function parseTypenames(n){return n.trim().split(/^|\s+/).map(function(t){var r="",a=t.indexOf(".");return a>=0&&(r=t.slice(a+1),t=t.slice(0,a)),{type:t,name:r}})}function onRemove(n){return function(){var t=this.__on;if(t){for(var r=0,a=-1,o=t.length,s;r<o;++r)s=t[r],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):t[++a]=s;++a?t.length=a:delete this.__on}}}function onAdd(n,t,r){return function(){var a=this.__on,o,s=contextListener(t);if(a){for(var l=0,u=a.length;l<u;++l)if((o=a[l]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=r),o.value=t;return}}this.addEventListener(n.type,s,r),o={type:n.type,name:n.name,value:t,listener:s,options:r},a?a.push(o):this.__on=[o]}}function selection_on(n,t,r){var a=parseTypenames(n+""),o,s=a.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,v=u.length,g;d<v;++d)for(o=0,g=u[d];o<s;++o)if((l=a[o]).type===g.type&&l.name===g.name)return g.value}return}for(u=t?onAdd:onRemove,o=0;o<s;++o)this.each(u(a[o],t,r));return this}function dispatchEvent(n,t,r){var a=defaultView(n),o=a.CustomEvent;typeof o=="function"?o=new o(t,r):(o=a.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),n.dispatchEvent(o)}function dispatchConstant(n,t){return function(){return dispatchEvent(this,n,t)}}function dispatchFunction(n,t){return function(){return dispatchEvent(this,n,t.apply(this,arguments))}}function selection_dispatch(n,t){return this.each((typeof t=="function"?dispatchFunction:dispatchConstant)(n,t))}function*selection_iterator(){for(var n=this._groups,t=0,r=n.length;t<r;++t)for(var a=n[t],o=0,s=a.length,l;o<s;++o)(l=a[o])&&(yield l)}var root=[null];function Selection$1(n,t){this._groups=n,this._parents=t}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(n){return typeof n=="string"?new Selection$1([[document.querySelector(n)]],[document.documentElement]):new Selection$1([[n]],root)}function sourceEvent(n){let t;for(;t=n.sourceEvent;)n=t;return n}function pointer(n,t){if(n=sourceEvent(n),t===void 0&&(t=n.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();return a.x=n.clientX,a.y=n.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[n.clientX-o.left-t.clientLeft,n.clientY-o.top-t.clientTop]}}return[n.pageX,n.pageY]}const nonpassivecapture={capture:!0,passive:!1};function noevent$1(n){n.preventDefault(),n.stopImmediatePropagation()}function dragDisable(n){var t=n.document.documentElement,r=select(n).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in t?r.on("selectstart.drag",noevent$1,nonpassivecapture):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yesdrag(n,t){var r=n.document.documentElement,a=select(n).on("dragstart.drag",null);t&&(a.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in r?a.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function define(n,t,r){n.prototype=t.prototype=r,r.constructor=n}function extend$1(n,t){var r=Object.create(n.prototype);for(var a in t)r[a]=t[a];return r}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(n){var t,r;return n=(n+"").trim().toLowerCase(),(t=reHex.exec(n))?(r=t[1].length,t=parseInt(t[1],16),r===6?rgbn(t):r===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?rgba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(n))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(n))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(n))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(n))?rgba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(n))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(n))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(n)?rgbn(named[n]):n==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,n&255,1)}function rgba(n,t,r,a){return a<=0&&(n=t=r=NaN),new Rgb(n,t,r,a)}function rgbConvert(n){return n instanceof Color||(n=color(n)),n?(n=n.rgb(),new Rgb(n.r,n.g,n.b,n.opacity)):new Rgb}function rgb(n,t,r,a){return arguments.length===1?rgbConvert(n):new Rgb(n,t,r,a??1)}function Rgb(n,t,r,a){this.r=+n,this.g=+t,this.b=+r,this.opacity=+a}define(Rgb,rgb,extend$1(Color,{brighter(n){return n=n==null?brighter:Math.pow(brighter,n),new Rgb(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?darker:Math.pow(darker,n),new Rgb(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const n=clampa(this.opacity);return`${n===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${n===1?")":`, ${n})`}`}function clampa(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function clampi(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function hex(n){return n=clampi(n),(n<16?"0":"")+n.toString(16)}function hsla(n,t,r,a){return a<=0?n=t=r=NaN:r<=0||r>=1?n=t=NaN:t<=0&&(n=NaN),new Hsl(n,t,r,a)}function hslConvert(n){if(n instanceof Hsl)return new Hsl(n.h,n.s,n.l,n.opacity);if(n instanceof Color||(n=color(n)),!n)return new Hsl;if(n instanceof Hsl)return n;n=n.rgb();var t=n.r/255,r=n.g/255,a=n.b/255,o=Math.min(t,r,a),s=Math.max(t,r,a),l=NaN,u=s-o,d=(s+o)/2;return u?(t===s?l=(r-a)/u+(r<a)*6:r===s?l=(a-t)/u+2:l=(t-r)/u+4,u/=d<.5?s+o:2-s-o,l*=60):u=d>0&&d<1?0:l,new Hsl(l,u,d,n.opacity)}function hsl(n,t,r,a){return arguments.length===1?hslConvert(n):new Hsl(n,t,r,a??1)}function Hsl(n,t,r,a){this.h=+n,this.s=+t,this.l=+r,this.opacity=+a}define(Hsl,hsl,extend$1(Color,{brighter(n){return n=n==null?brighter:Math.pow(brighter,n),new Hsl(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?darker:Math.pow(darker,n),new Hsl(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,o=2*r-a;return new Rgb(hsl2rgb(n>=240?n-240:n+120,o,a),hsl2rgb(n,o,a),hsl2rgb(n<120?n+240:n-120,o,a),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=clampa(this.opacity);return`${n===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${n===1?")":`, ${n})`}`}}));function clamph(n){return n=(n||0)%360,n<0?n+360:n}function clampt(n){return Math.max(0,Math.min(1,n||0))}function hsl2rgb(n,t,r){return(n<60?t+(r-t)*n/60:n<180?r:n<240?t+(r-t)*(240-n)/60:t)*255}const constant$1=n=>()=>n;function linear(n,t){return function(r){return n+r*t}}function exponential(n,t,r){return n=Math.pow(n,r),t=Math.pow(t,r)-n,r=1/r,function(a){return Math.pow(n+a*t,r)}}function gamma(n){return(n=+n)==1?nogamma:function(t,r){return r-t?exponential(t,r,n):constant$1(isNaN(t)?r:t)}}function nogamma(n,t){var r=t-n;return r?linear(n,r):constant$1(isNaN(n)?t:n)}const interpolateRgb=function n(t){var r=gamma(t);function a(o,s){var l=r((o=rgb(o)).r,(s=rgb(s)).r),u=r(o.g,s.g),d=r(o.b,s.b),v=nogamma(o.opacity,s.opacity);return function(g){return o.r=l(g),o.g=u(g),o.b=d(g),o.opacity=v(g),o+""}}return a.gamma=n,a}(1);function interpolateNumber$2(n,t){return n=+n,t=+t,function(r){return n*(1-r)+t*r}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(n){return function(){return n}}function one(n){return function(t){return n(t)+""}}function interpolateString(n,t){var r=reA.lastIndex=reB.lastIndex=0,a,o,s,l=-1,u=[],d=[];for(n=n+"",t=t+"";(a=reA.exec(n))&&(o=reB.exec(t));)(s=o.index)>r&&(s=t.slice(r,s),u[l]?u[l]+=s:u[++l]=s),(a=a[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,d.push({i:l,x:interpolateNumber$2(a,o)})),r=reB.lastIndex;return r<t.length&&(s=t.slice(r),u[l]?u[l]+=s:u[++l]=s),u.length<2?d[0]?one(d[0].x):zero(t):(t=d.length,function(v){for(var g=0,f;g<t;++g)u[(f=d[g]).i]=f.x(v);return u.join("")})}var degrees$1=180/Math.PI,identity$4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(n,t,r,a,o,s){var l,u,d;return(l=Math.sqrt(n*n+t*t))&&(n/=l,t/=l),(d=n*r+t*a)&&(r-=n*d,a-=t*d),(u=Math.sqrt(r*r+a*a))&&(r/=u,a/=u,d/=u),n*a<t*r&&(n=-n,t=-t,d=-d,l=-l),{translateX:o,translateY:s,rotate:Math.atan2(t,n)*degrees$1,skewX:Math.atan(d)*degrees$1,scaleX:l,scaleY:u}}var svgNode;function parseCss(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?identity$4:decompose(t.a,t.b,t.c,t.d,t.e,t.f)}function parseSvg(n){return n==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",n),!(n=svgNode.transform.baseVal.consolidate()))?identity$4:(n=n.matrix,decompose(n.a,n.b,n.c,n.d,n.e,n.f))}function interpolateTransform(n,t,r,a){function o(v){return v.length?v.pop()+" ":""}function s(v,g,f,c,y,_){if(v!==f||g!==c){var b=y.push("translate(",null,t,null,r);_.push({i:b-4,x:interpolateNumber$2(v,f)},{i:b-2,x:interpolateNumber$2(g,c)})}else(f||c)&&y.push("translate("+f+t+c+r)}function l(v,g,f,c){v!==g?(v-g>180?g+=360:g-v>180&&(v+=360),c.push({i:f.push(o(f)+"rotate(",null,a)-2,x:interpolateNumber$2(v,g)})):g&&f.push(o(f)+"rotate("+g+a)}function u(v,g,f,c){v!==g?c.push({i:f.push(o(f)+"skewX(",null,a)-2,x:interpolateNumber$2(v,g)}):g&&f.push(o(f)+"skewX("+g+a)}function d(v,g,f,c,y,_){if(v!==f||g!==c){var b=y.push(o(y)+"scale(",null,",",null,")");_.push({i:b-4,x:interpolateNumber$2(v,f)},{i:b-2,x:interpolateNumber$2(g,c)})}else(f!==1||c!==1)&&y.push(o(y)+"scale("+f+","+c+")")}return function(v,g){var f=[],c=[];return v=n(v),g=n(g),s(v.translateX,v.translateY,g.translateX,g.translateY,f,c),l(v.rotate,g.rotate,f,c),u(v.skewX,g.skewX,f,c),d(v.scaleX,v.scaleY,g.scaleX,g.scaleY,f,c),v=g=null,function(y){for(var _=-1,b=c.length,S;++_<b;)f[(S=c[_]).i]=S.x(y);return f.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2$1=1e-12;function cosh(n){return((n=Math.exp(n))+1/n)/2}function sinh(n){return((n=Math.exp(n))-1/n)/2}function tanh(n){return((n=Math.exp(2*n))-1)/(n+1)}const interpolateZoom=function n(t,r,a){function o(s,l){var u=s[0],d=s[1],v=s[2],g=l[0],f=l[1],c=l[2],y=g-u,_=f-d,b=y*y+_*_,S,x;if(b<epsilon2$1)x=Math.log(c/v)/t,S=function(P){return[u+P*y,d+P*_,v*Math.exp(t*P*x)]};else{var w=Math.sqrt(b),T=(c*c-v*v+a*b)/(2*v*r*w),A=(c*c-v*v-a*b)/(2*c*r*w),E=Math.log(Math.sqrt(T*T+1)-T),$=Math.log(Math.sqrt(A*A+1)-A);x=($-E)/t,S=function(P){var I=P*x,C=cosh(E),M=v/(r*w)*(C*tanh(t*I+E)-sinh(E));return[u+M*y,d+M*_,v*C/cosh(t*I+E)]}}return S.duration=x*1e3*t/Math.SQRT2,S}return o.rho=function(s){var l=Math.max(.001,+s),u=l*l,d=u*u;return n(l,u,d)},o}(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(n,t,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?now():+r)+(t==null?0:+t),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=n,this._time=r,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(n,t,r){var a=new Timer;return a.restart(n,t,r),a}function timerFlush(){now(),++frame;for(var n=taskHead,t;n;)(t=clockNow-n._time)>=0&&n._call.call(void 0,t),n=n._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var n=clock.now(),t=n-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=n)}function nap(){for(var n,t=taskHead,r,a=1/0;t;)t._call?(a>t._time&&(a=t._time),n=t,t=t._next):(r=t._next,t._next=null,t=n?n._next=r:taskHead=r);taskTail=n,sleep(a)}function sleep(n){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var t=n-clockNow;t>24?(n<1/0&&(timeout$1=setTimeout(wake,n-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(n,t,r){var a=new Timer;return t=t==null?0:+t,a.restart(o=>{a.stop(),n(o+t)},t,r),a}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(n,t,r,a,o,s){var l=n.__transition;if(!l)n.__transition={};else if(r in l)return;create$3(n,r,{name:t,index:a,group:o,on:emptyOn,tween:emptyTween,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:CREATED})}function init$3(n,t){var r=get$1(n,t);if(r.state>CREATED)throw new Error("too late; already scheduled");return r}function set$2(n,t){var r=get$1(n,t);if(r.state>STARTED)throw new Error("too late; already running");return r}function get$1(n,t){var r=n.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function create$3(n,t,r){var a=n.__transition,o;a[t]=r,r.timer=timer(s,0,r.time);function s(v){r.state=SCHEDULED,r.timer.restart(l,r.delay,r.time),r.delay<=v&&l(v-r.delay)}function l(v){var g,f,c,y;if(r.state!==SCHEDULED)return d();for(g in a)if(y=a[g],y.name===r.name){if(y.state===STARTED)return timeout(l);y.state===RUNNING?(y.state=ENDED,y.timer.stop(),y.on.call("interrupt",n,n.__data__,y.index,y.group),delete a[g]):+g<t&&(y.state=ENDED,y.timer.stop(),y.on.call("cancel",n,n.__data__,y.index,y.group),delete a[g])}if(timeout(function(){r.state===STARTED&&(r.state=RUNNING,r.timer.restart(u,r.delay,r.time),u(v))}),r.state=STARTING,r.on.call("start",n,n.__data__,r.index,r.group),r.state===STARTING){for(r.state=STARTED,o=new Array(c=r.tween.length),g=0,f=-1;g<c;++g)(y=r.tween[g].value.call(n,n.__data__,r.index,r.group))&&(o[++f]=y);o.length=f+1}}function u(v){for(var g=v<r.duration?r.ease.call(null,v/r.duration):(r.timer.restart(d),r.state=ENDING,1),f=-1,c=o.length;++f<c;)o[f].call(n,g);r.state===ENDING&&(r.on.call("end",n,n.__data__,r.index,r.group),d())}function d(){r.state=ENDED,r.timer.stop(),delete a[t];for(var v in a)return;delete n.__transition}}function interrupt(n,t){var r=n.__transition,a,o,s=!0,l;if(r){t=t==null?null:t+"";for(l in r){if((a=r[l]).name!==t){s=!1;continue}o=a.state>STARTING&&a.state<ENDING,a.state=ENDED,a.timer.stop(),a.on.call(o?"interrupt":"cancel",n,n.__data__,a.index,a.group),delete r[l]}s&&delete n.__transition}}function selection_interrupt(n){return this.each(function(){interrupt(this,n)})}function tweenRemove(n,t){var r,a;return function(){var o=set$2(this,n),s=o.tween;if(s!==r){a=r=s;for(var l=0,u=a.length;l<u;++l)if(a[l].name===t){a=a.slice(),a.splice(l,1);break}}o.tween=a}}function tweenFunction(n,t,r){var a,o;if(typeof r!="function")throw new Error;return function(){var s=set$2(this,n),l=s.tween;if(l!==a){o=(a=l).slice();for(var u={name:t,value:r},d=0,v=o.length;d<v;++d)if(o[d].name===t){o[d]=u;break}d===v&&o.push(u)}s.tween=o}}function transition_tween(n,t){var r=this._id;if(n+="",arguments.length<2){for(var a=get$1(this.node(),r).tween,o=0,s=a.length,l;o<s;++o)if((l=a[o]).name===n)return l.value;return null}return this.each((t==null?tweenRemove:tweenFunction)(r,n,t))}function tweenValue(n,t,r){var a=n._id;return n.each(function(){var o=set$2(this,a);(o.value||(o.value={}))[t]=r.apply(this,arguments)}),function(o){return get$1(o,a).value[t]}}function interpolate(n,t){var r;return(typeof t=="number"?interpolateNumber$2:t instanceof color?interpolateRgb:(r=color(t))?(t=r,interpolateRgb):interpolateString)(n,t)}function attrRemove(n){return function(){this.removeAttribute(n)}}function attrRemoveNS(n){return function(){this.removeAttributeNS(n.space,n.local)}}function attrConstant(n,t,r){var a,o=r+"",s;return function(){var l=this.getAttribute(n);return l===o?null:l===a?s:s=t(a=l,r)}}function attrConstantNS(n,t,r){var a,o=r+"",s;return function(){var l=this.getAttributeNS(n.space,n.local);return l===o?null:l===a?s:s=t(a=l,r)}}function attrFunction(n,t,r){var a,o,s;return function(){var l,u=r(this),d;return u==null?void this.removeAttribute(n):(l=this.getAttribute(n),d=u+"",l===d?null:l===a&&d===o?s:(o=d,s=t(a=l,u)))}}function attrFunctionNS(n,t,r){var a,o,s;return function(){var l,u=r(this),d;return u==null?void this.removeAttributeNS(n.space,n.local):(l=this.getAttributeNS(n.space,n.local),d=u+"",l===d?null:l===a&&d===o?s:(o=d,s=t(a=l,u)))}}function transition_attr(n,t){var r=namespace(n),a=r==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(n,typeof t=="function"?(r.local?attrFunctionNS:attrFunction)(r,a,tweenValue(this,"attr."+n,t)):t==null?(r.local?attrRemoveNS:attrRemove)(r):(r.local?attrConstantNS:attrConstant)(r,a,t))}function attrInterpolate(n,t){return function(r){this.setAttribute(n,t.call(this,r))}}function attrInterpolateNS(n,t){return function(r){this.setAttributeNS(n.space,n.local,t.call(this,r))}}function attrTweenNS(n,t){var r,a;function o(){var s=t.apply(this,arguments);return s!==a&&(r=(a=s)&&attrInterpolateNS(n,s)),r}return o._value=t,o}function attrTween(n,t){var r,a;function o(){var s=t.apply(this,arguments);return s!==a&&(r=(a=s)&&attrInterpolate(n,s)),r}return o._value=t,o}function transition_attrTween(n,t){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var a=namespace(n);return this.tween(r,(a.local?attrTweenNS:attrTween)(a,t))}function delayFunction(n,t){return function(){init$3(this,n).delay=+t.apply(this,arguments)}}function delayConstant(n,t){return t=+t,function(){init$3(this,n).delay=t}}function transition_delay(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?delayFunction:delayConstant)(t,n)):get$1(this.node(),t).delay}function durationFunction(n,t){return function(){set$2(this,n).duration=+t.apply(this,arguments)}}function durationConstant(n,t){return t=+t,function(){set$2(this,n).duration=t}}function transition_duration(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?durationFunction:durationConstant)(t,n)):get$1(this.node(),t).duration}function easeConstant(n,t){if(typeof t!="function")throw new Error;return function(){set$2(this,n).ease=t}}function transition_ease(n){var t=this._id;return arguments.length?this.each(easeConstant(t,n)):get$1(this.node(),t).ease}function easeVarying(n,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;set$2(this,n).ease=r}}function transition_easeVarying(n){if(typeof n!="function")throw new Error;return this.each(easeVarying(this._id,n))}function transition_filter(n){typeof n!="function"&&(n=matcher(n));for(var t=this._groups,r=t.length,a=new Array(r),o=0;o<r;++o)for(var s=t[o],l=s.length,u=a[o]=[],d,v=0;v<l;++v)(d=s[v])&&n.call(d,d.__data__,v,s)&&u.push(d);return new Transition(a,this._parents,this._name,this._id)}function transition_merge(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,r=n._groups,a=t.length,o=r.length,s=Math.min(a,o),l=new Array(a),u=0;u<s;++u)for(var d=t[u],v=r[u],g=d.length,f=l[u]=new Array(g),c,y=0;y<g;++y)(c=d[y]||v[y])&&(f[y]=c);for(;u<a;++u)l[u]=t[u];return new Transition(l,this._parents,this._name,this._id)}function start$1(n){return(n+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function onFunction(n,t,r){var a,o,s=start$1(t)?init$3:set$2;return function(){var l=s(this,n),u=l.on;u!==a&&(o=(a=u).copy()).on(t,r),l.on=o}}function transition_on(n,t){var r=this._id;return arguments.length<2?get$1(this.node(),r).on.on(n):this.each(onFunction(r,n,t))}function removeFunction(n){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==n)return;t&&t.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(n){var t=this._name,r=this._id;typeof n!="function"&&(n=selector$1(n));for(var a=this._groups,o=a.length,s=new Array(o),l=0;l<o;++l)for(var u=a[l],d=u.length,v=s[l]=new Array(d),g,f,c=0;c<d;++c)(g=u[c])&&(f=n.call(g,g.__data__,c,u))&&("__data__"in g&&(f.__data__=g.__data__),v[c]=f,schedule(v[c],t,r,c,v,get$1(g,r)));return new Transition(s,this._parents,t,r)}function transition_selectAll(n){var t=this._name,r=this._id;typeof n!="function"&&(n=selectorAll(n));for(var a=this._groups,o=a.length,s=[],l=[],u=0;u<o;++u)for(var d=a[u],v=d.length,g,f=0;f<v;++f)if(g=d[f]){for(var c=n.call(g,g.__data__,f,d),y,_=get$1(g,r),b=0,S=c.length;b<S;++b)(y=c[b])&&schedule(y,t,r,b,c,_);s.push(c),l.push(g)}return new Transition(s,l,t,r)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(n,t){var r,a,o;return function(){var s=styleValue(this,n),l=(this.style.removeProperty(n),styleValue(this,n));return s===l?null:s===r&&l===a?o:o=t(r=s,a=l)}}function styleRemove(n){return function(){this.style.removeProperty(n)}}function styleConstant(n,t,r){var a,o=r+"",s;return function(){var l=styleValue(this,n);return l===o?null:l===a?s:s=t(a=l,r)}}function styleFunction(n,t,r){var a,o,s;return function(){var l=styleValue(this,n),u=r(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(n),styleValue(this,n))),l===d?null:l===a&&d===o?s:(o=d,s=t(a=l,u))}}function styleMaybeRemove(n,t){var r,a,o,s="style."+t,l="end."+s,u;return function(){var d=set$2(this,n),v=d.on,g=d.value[s]==null?u||(u=styleRemove(t)):void 0;(v!==r||o!==g)&&(a=(r=v).copy()).on(l,o=g),d.on=a}}function transition_style(n,t,r){var a=(n+="")=="transform"?interpolateTransformCss:interpolate;return t==null?this.styleTween(n,styleNull(n,a)).on("end.style."+n,styleRemove(n)):typeof t=="function"?this.styleTween(n,styleFunction(n,a,tweenValue(this,"style."+n,t))).each(styleMaybeRemove(this._id,n)):this.styleTween(n,styleConstant(n,a,t),r).on("end.style."+n,null)}function styleInterpolate(n,t,r){return function(a){this.style.setProperty(n,t.call(this,a),r)}}function styleTween(n,t,r){var a,o;function s(){var l=t.apply(this,arguments);return l!==o&&(a=(o=l)&&styleInterpolate(n,l,r)),a}return s._value=t,s}function transition_styleTween(n,t,r){var a="style."+(n+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,styleTween(n,t,r??""))}function textConstant(n){return function(){this.textContent=n}}function textFunction(n){return function(){var t=n(this);this.textContent=t??""}}function transition_text(n){return this.tween("text",typeof n=="function"?textFunction(tweenValue(this,"text",n)):textConstant(n==null?"":n+""))}function textInterpolate(n){return function(t){this.textContent=n.call(this,t)}}function textTween(n){var t,r;function a(){var o=n.apply(this,arguments);return o!==r&&(t=(r=o)&&textInterpolate(o)),t}return a._value=n,a}function transition_textTween(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,textTween(n))}function transition_transition(){for(var n=this._name,t=this._id,r=newId(),a=this._groups,o=a.length,s=0;s<o;++s)for(var l=a[s],u=l.length,d,v=0;v<u;++v)if(d=l[v]){var g=get$1(d,t);schedule(d,n,r,v,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Transition(a,this._parents,n,r)}function transition_end(){var n,t,r=this,a=r._id,o=r.size();return new Promise(function(s,l){var u={value:l},d={value:function(){--o===0&&s()}};r.each(function(){var v=set$2(this,a),g=v.on;g!==n&&(t=(n=g).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(d)),v.on=t}),o===0&&s()})}var id=0;function Transition(n,t,r,a){this._groups=n,this._parents=t,this._name=r,this._id=a}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(n,t){for(var r;!(r=n.__transition)||!(r=r[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return r}function selection_transition(n){var t,r;n instanceof Transition?(t=n._id,n=n._name):(t=newId(),(r=defaultTiming).time=now(),n=n==null?null:n+"");for(var a=this._groups,o=a.length,s=0;s<o;++s)for(var l=a[s],u=l.length,d,v=0;v<u;++v)(d=l[v])&&schedule(d,n,t,v,l,r||inherit(d,t));return new Transition(a,this._parents,n,t)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;var epsilon=1e-6,epsilon2=1e-12,pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=pi*2,degrees=180/pi,radians=pi/180,abs$1=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos,exp=Math.exp,log=Math.log,sin=Math.sin,sign=Math.sign||function(n){return n>0?1:n<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(n){return n>1?0:n<-1?pi:Math.acos(n)}function asin(n){return n>1?halfPi:n<-1?-halfPi:Math.asin(n)}function noop$1(){}function streamGeometry(n,t){n&&streamGeometryType.hasOwnProperty(n.type)&&streamGeometryType[n.type](n,t)}var streamObjectType={Feature:function(n,t){streamGeometry(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,a=-1,o=r.length;++a<o;)streamGeometry(r[a].geometry,t)}},streamGeometryType={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,a=-1,o=r.length;++a<o;)n=r[a],t.point(n[0],n[1],n[2])},LineString:function(n,t){streamLine(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,a=-1,o=r.length;++a<o;)streamLine(r[a],t,0)},Polygon:function(n,t){streamPolygon(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,a=-1,o=r.length;++a<o;)streamPolygon(r[a],t)},GeometryCollection:function(n,t){for(var r=n.geometries,a=-1,o=r.length;++a<o;)streamGeometry(r[a],t)}};function streamLine(n,t,r){var a=-1,o=n.length-r,s;for(t.lineStart();++a<o;)s=n[a],t.point(s[0],s[1],s[2]);t.lineEnd()}function streamPolygon(n,t){var r=-1,a=n.length;for(t.polygonStart();++r<a;)streamLine(n[r],t,1);t.polygonEnd()}function geoStream(n,t){n&&streamObjectType.hasOwnProperty(n.type)?streamObjectType[n.type](n,t):streamGeometry(n,t)}function spherical(n){return[atan2(n[1],n[0]),asin(n[2])]}function cartesian(n){var t=n[0],r=n[1],a=cos(r);return[a*cos(t),a*sin(t),sin(r)]}function cartesianDot(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function cartesianCross(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function cartesianAddInPlace(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function cartesianScale(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function cartesianNormalizeInPlace(n){var t=sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function compose(n,t){function r(a,o){return a=n(a,o),t(a[0],a[1])}return n.invert&&t.invert&&(r.invert=function(a,o){return a=t.invert(a,o),a&&n.invert(a[0],a[1])}),r}function rotationIdentity(n,t){return abs$1(n)>pi&&(n-=Math.round(n/tau)*tau),[n,t]}rotationIdentity.invert=rotationIdentity;function rotateRadians(n,t,r){return(n%=tau)?t||r?compose(rotationLambda(n),rotationPhiGamma(t,r)):rotationLambda(n):t||r?rotationPhiGamma(t,r):rotationIdentity}function forwardRotationLambda(n){return function(t,r){return t+=n,abs$1(t)>pi&&(t-=Math.round(t/tau)*tau),[t,r]}}function rotationLambda(n){var t=forwardRotationLambda(n);return t.invert=forwardRotationLambda(-n),t}function rotationPhiGamma(n,t){var r=cos(n),a=sin(n),o=cos(t),s=sin(t);function l(u,d){var v=cos(d),g=cos(u)*v,f=sin(u)*v,c=sin(d),y=c*r+g*a;return[atan2(f*o-y*s,g*r-c*a),asin(y*o+f*s)]}return l.invert=function(u,d){var v=cos(d),g=cos(u)*v,f=sin(u)*v,c=sin(d),y=c*o-f*s;return[atan2(f*o+c*s,g*r+y*a),asin(y*r-g*a)]},l}function rotation(n){n=rotateRadians(n[0]*radians,n[1]*radians,n.length>2?n[2]*radians:0);function t(r){return r=n(r[0]*radians,r[1]*radians),r[0]*=degrees,r[1]*=degrees,r}return t.invert=function(r){return r=n.invert(r[0]*radians,r[1]*radians),r[0]*=degrees,r[1]*=degrees,r},t}function circleStream(n,t,r,a,o,s){if(r){var l=cos(t),u=sin(t),d=a*r;o==null?(o=t+a*tau,s=t-d/2):(o=circleRadius(l,o),s=circleRadius(l,s),(a>0?o<s:o>s)&&(o+=a*tau));for(var v,g=o;a>0?g>s:g<s;g-=d)v=spherical([l,-u*cos(g),-u*sin(g)]),n.point(v[0],v[1])}}function circleRadius(n,t){t=cartesian(t),t[0]-=n,cartesianNormalizeInPlace(t);var r=acos(-t[1]);return((-t[2]<0?-r:r)+tau-epsilon)%tau}function clipBuffer(){var n=[],t;return{point:function(r,a,o){t.push([r,a,o])},lineStart:function(){n.push(t=[])},lineEnd:noop$1,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var r=n;return n=[],t=null,r}}}function pointEqual(n,t){return abs$1(n[0]-t[0])<epsilon&&abs$1(n[1]-t[1])<epsilon}function Intersection(n,t,r,a){this.x=n,this.z=t,this.o=r,this.e=a,this.v=!1,this.n=this.p=null}function clipRejoin(n,t,r,a,o){var s=[],l=[],u,d;if(n.forEach(function(_){if(!((b=_.length-1)<=0)){var b,S=_[0],x=_[b],w;if(pointEqual(S,x)){if(!S[2]&&!x[2]){for(o.lineStart(),u=0;u<b;++u)o.point((S=_[u])[0],S[1]);o.lineEnd();return}x[0]+=2*epsilon}s.push(w=new Intersection(S,_,null,!0)),l.push(w.o=new Intersection(S,null,w,!1)),s.push(w=new Intersection(x,_,null,!1)),l.push(w.o=new Intersection(x,null,w,!0))}}),!!s.length){for(l.sort(t),link(s),link(l),u=0,d=l.length;u<d;++u)l[u].e=r=!r;for(var v=s[0],g,f;;){for(var c=v,y=!0;c.v;)if((c=c.n)===v)return;g=c.z,o.lineStart();do{if(c.v=c.o.v=!0,c.e){if(y)for(u=0,d=g.length;u<d;++u)o.point((f=g[u])[0],f[1]);else a(c.x,c.n.x,1,o);c=c.n}else{if(y)for(g=c.p.z,u=g.length-1;u>=0;--u)o.point((f=g[u])[0],f[1]);else a(c.x,c.p.x,-1,o);c=c.p}c=c.o,g=c.z,y=!y}while(!c.v);o.lineEnd()}}}function link(n){if(t=n.length){for(var t,r=0,a=n[0],o;++r<t;)a.n=o=n[r],o.p=a,a=o;a.n=o=n[0],o.p=a}}function longitude(n){return abs$1(n[0])<=pi?n[0]:sign(n[0])*((abs$1(n[0])+pi)%tau-pi)}function polygonContains(n,t){var r=longitude(t),a=t[1],o=sin(a),s=[sin(r),-cos(r),0],l=0,u=0,d=new Adder;o===1?a=halfPi+epsilon:o===-1&&(a=-halfPi-epsilon);for(var v=0,g=n.length;v<g;++v)if(c=(f=n[v]).length)for(var f,c,y=f[c-1],_=longitude(y),b=y[1]/2+quarterPi,S=sin(b),x=cos(b),w=0;w<c;++w,_=A,S=$,x=P,y=T){var T=f[w],A=longitude(T),E=T[1]/2+quarterPi,$=sin(E),P=cos(E),I=A-_,C=I>=0?1:-1,M=C*I,D=M>pi,R=S*$;if(d.add(atan2(R*C*sin(M),x*P+R*cos(M))),l+=D?I+C*tau:I,D^_>=r^A>=r){var N=cartesianCross(cartesian(y),cartesian(T));cartesianNormalizeInPlace(N);var O=cartesianCross(s,N);cartesianNormalizeInPlace(O);var F=(D^I>=0?-1:1)*asin(O[2]);(a>F||a===F&&(N[0]||N[1]))&&(u+=D^I>=0?1:-1)}}return(l<-epsilon||l<epsilon&&d<-epsilon2)^u&1}function clip$1(n,t,r,a){return function(o){var s=t(o),l=clipBuffer(),u=t(l),d=!1,v,g,f,c={point:y,lineStart:b,lineEnd:S,polygonStart:function(){c.point=x,c.lineStart=w,c.lineEnd=T,g=[],v=[]},polygonEnd:function(){c.point=y,c.lineStart=b,c.lineEnd=S,g=merge$1(g);var A=polygonContains(v,a);g.length?(d||(o.polygonStart(),d=!0),clipRejoin(g,compareIntersection,A,r,o)):A&&(d||(o.polygonStart(),d=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),g=v=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(A,E){n(A,E)&&o.point(A,E)}function _(A,E){s.point(A,E)}function b(){c.point=_,s.lineStart()}function S(){c.point=y,s.lineEnd()}function x(A,E){f.push([A,E]),u.point(A,E)}function w(){u.lineStart(),f=[]}function T(){x(f[0][0],f[0][1]),u.lineEnd();var A=u.clean(),E=l.result(),$,P=E.length,I,C,M;if(f.pop(),v.push(f),f=null,!!P){if(A&1){if(C=E[0],(I=C.length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),$=0;$<I;++$)o.point((M=C[$])[0],M[1]);o.lineEnd()}return}P>1&&A&2&&E.push(E.pop().concat(E.shift())),g.push(E.filter(validSegment))}}return c}}function validSegment(n){return n.length>1}function compareIntersection(n,t){return((n=n.x)[0]<0?n[1]-halfPi-epsilon:halfPi-n[1])-((t=t.x)[0]<0?t[1]-halfPi-epsilon:halfPi-t[1])}const clipAntimeridian=clip$1(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi,-halfPi]);function clipAntimeridianLine(n){var t=NaN,r=NaN,a=NaN,o;return{lineStart:function(){n.lineStart(),o=1},point:function(s,l){var u=s>0?pi:-pi,d=abs$1(s-t);abs$1(d-pi)<epsilon?(n.point(t,r=(r+l)/2>0?halfPi:-halfPi),n.point(a,r),n.lineEnd(),n.lineStart(),n.point(u,r),n.point(s,r),o=0):a!==u&&d>=pi&&(abs$1(t-a)<epsilon&&(t-=a*epsilon),abs$1(s-u)<epsilon&&(s-=u*epsilon),r=clipAntimeridianIntersect(t,r,s,l),n.point(a,r),n.lineEnd(),n.lineStart(),n.point(u,r),o=0),n.point(t=s,r=l),a=u},lineEnd:function(){n.lineEnd(),t=r=NaN},clean:function(){return 2-o}}}function clipAntimeridianIntersect(n,t,r,a){var o,s,l=sin(n-r);return abs$1(l)>epsilon?atan((sin(t)*(s=cos(a))*sin(r)-sin(a)*(o=cos(t))*sin(n))/(o*s*l)):(t+a)/2}function clipAntimeridianInterpolate(n,t,r,a){var o;if(n==null)o=r*halfPi,a.point(-pi,o),a.point(0,o),a.point(pi,o),a.point(pi,0),a.point(pi,-o),a.point(0,-o),a.point(-pi,-o),a.point(-pi,0),a.point(-pi,o);else if(abs$1(n[0]-t[0])>epsilon){var s=n[0]<t[0]?pi:-pi;o=r*s/2,a.point(-s,o),a.point(0,o),a.point(s,o)}else a.point(t[0],t[1])}function clipCircle(n){var t=cos(n),r=6*radians,a=t>0,o=abs$1(t)>epsilon;function s(g,f,c,y){circleStream(y,n,r,c,g,f)}function l(g,f){return cos(g)*cos(f)>t}function u(g){var f,c,y,_,b;return{lineStart:function(){_=y=!1,b=1},point:function(S,x){var w=[S,x],T,A=l(S,x),E=a?A?0:v(S,x):A?v(S+(S<0?pi:-pi),x):0;if(!f&&(_=y=A)&&g.lineStart(),A!==y&&(T=d(f,w),(!T||pointEqual(f,T)||pointEqual(w,T))&&(w[2]=1)),A!==y)b=0,A?(g.lineStart(),T=d(w,f),g.point(T[0],T[1])):(T=d(f,w),g.point(T[0],T[1],2),g.lineEnd()),f=T;else if(o&&f&&a^A){var $;!(E&c)&&($=d(w,f,!0))&&(b=0,a?(g.lineStart(),g.point($[0][0],$[0][1]),g.point($[1][0],$[1][1]),g.lineEnd()):(g.point($[1][0],$[1][1]),g.lineEnd(),g.lineStart(),g.point($[0][0],$[0][1],3)))}A&&(!f||!pointEqual(f,w))&&g.point(w[0],w[1]),f=w,y=A,c=E},lineEnd:function(){y&&g.lineEnd(),f=null},clean:function(){return b|(_&&y)<<1}}}function d(g,f,c){var y=cartesian(g),_=cartesian(f),b=[1,0,0],S=cartesianCross(y,_),x=cartesianDot(S,S),w=S[0],T=x-w*w;if(!T)return!c&&g;var A=t*x/T,E=-t*w/T,$=cartesianCross(b,S),P=cartesianScale(b,A),I=cartesianScale(S,E);cartesianAddInPlace(P,I);var C=$,M=cartesianDot(P,C),D=cartesianDot(C,C),R=M*M-D*(cartesianDot(P,P)-1);if(!(R<0)){var N=sqrt(R),O=cartesianScale(C,(-M-N)/D);if(cartesianAddInPlace(O,P),O=spherical(O),!c)return O;var F=g[0],L=f[0],B=g[1],V=f[1],H;L<F&&(H=F,F=L,L=H);var X=L-F,U=abs$1(X-pi)<epsilon,te=U||X<epsilon;if(!U&&V<B&&(H=B,B=V,V=H),te?U?B+V>0^O[1]<(abs$1(O[0]-F)<epsilon?B:V):B<=O[1]&&O[1]<=V:X>pi^(F<=O[0]&&O[0]<=L)){var ee=cartesianScale(C,(-M+N)/D);return cartesianAddInPlace(ee,P),[O,spherical(ee)]}}}function v(g,f){var c=a?n:pi-n,y=0;return g<-c?y|=1:g>c&&(y|=2),f<-c?y|=4:f>c&&(y|=8),y}return clip$1(l,u,s,a?[0,-n]:[-pi,n-pi])}function clipLine(n,t,r,a,o,s){var l=n[0],u=n[1],d=t[0],v=t[1],g=0,f=1,c=d-l,y=v-u,_;if(_=r-l,!(!c&&_>0)){if(_/=c,c<0){if(_<g)return;_<f&&(f=_)}else if(c>0){if(_>f)return;_>g&&(g=_)}if(_=o-l,!(!c&&_<0)){if(_/=c,c<0){if(_>f)return;_>g&&(g=_)}else if(c>0){if(_<g)return;_<f&&(f=_)}if(_=a-u,!(!y&&_>0)){if(_/=y,y<0){if(_<g)return;_<f&&(f=_)}else if(y>0){if(_>f)return;_>g&&(g=_)}if(_=s-u,!(!y&&_<0)){if(_/=y,y<0){if(_>f)return;_>g&&(g=_)}else if(y>0){if(_<g)return;_<f&&(f=_)}return g>0&&(n[0]=l+g*c,n[1]=u+g*y),f<1&&(t[0]=l+f*c,t[1]=u+f*y),!0}}}}}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(n,t,r,a){function o(v,g){return n<=v&&v<=r&&t<=g&&g<=a}function s(v,g,f,c){var y=0,_=0;if(v==null||(y=l(v,f))!==(_=l(g,f))||d(v,g)<0^f>0)do c.point(y===0||y===3?n:r,y>1?a:t);while((y=(y+f+4)%4)!==_);else c.point(g[0],g[1])}function l(v,g){return abs$1(v[0]-n)<epsilon?g>0?0:3:abs$1(v[0]-r)<epsilon?g>0?2:1:abs$1(v[1]-t)<epsilon?g>0?1:0:g>0?3:2}function u(v,g){return d(v.x,g.x)}function d(v,g){var f=l(v,1),c=l(g,1);return f!==c?f-c:f===0?g[1]-v[1]:f===1?v[0]-g[0]:f===2?v[1]-g[1]:g[0]-v[0]}return function(v){var g=v,f=clipBuffer(),c,y,_,b,S,x,w,T,A,E,$,P={point:I,lineStart:R,lineEnd:N,polygonStart:M,polygonEnd:D};function I(F,L){o(F,L)&&g.point(F,L)}function C(){for(var F=0,L=0,B=y.length;L<B;++L)for(var V=y[L],H=1,X=V.length,U=V[0],te,ee,q=U[0],ie=U[1];H<X;++H)te=q,ee=ie,U=V[H],q=U[0],ie=U[1],ee<=a?ie>a&&(q-te)*(a-ee)>(ie-ee)*(n-te)&&++F:ie<=a&&(q-te)*(a-ee)<(ie-ee)*(n-te)&&--F;return F}function M(){g=f,c=[],y=[],$=!0}function D(){var F=C(),L=$&&F,B=(c=merge$1(c)).length;(L||B)&&(v.polygonStart(),L&&(v.lineStart(),s(null,null,1,v),v.lineEnd()),B&&clipRejoin(c,u,F,s,v),v.polygonEnd()),g=v,c=y=_=null}function R(){P.point=O,y&&y.push(_=[]),E=!0,A=!1,w=T=NaN}function N(){c&&(O(b,S),x&&A&&f.rejoin(),c.push(f.result())),P.point=I,A&&g.lineEnd()}function O(F,L){var B=o(F,L);if(y&&_.push([F,L]),E)b=F,S=L,x=B,E=!1,B&&(g.lineStart(),g.point(F,L));else if(B&&A)g.point(F,L);else{var V=[w=Math.max(clipMin,Math.min(clipMax,w)),T=Math.max(clipMin,Math.min(clipMax,T))],H=[F=Math.max(clipMin,Math.min(clipMax,F)),L=Math.max(clipMin,Math.min(clipMax,L))];clipLine(V,H,n,t,r,a)?(A||(g.lineStart(),g.point(V[0],V[1])),g.point(H[0],H[1]),B||g.lineEnd(),$=!1):B&&(g.lineStart(),g.point(F,L),$=!1)}w=F,T=L,A=B}return P}}const identity$3=n=>n;var areaSum=new Adder,areaRingSum=new Adder,x00$2,y00$2,x0$3,y0$3,areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$1,areaSum.add(abs$1(areaRingSum)),areaRingSum=new Adder},result:function(){var n=areaSum/2;return areaSum=new Adder,n}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(n,t){areaStream.point=areaPoint,x00$2=x0$3=n,y00$2=y0$3=t}function areaPoint(n,t){areaRingSum.add(y0$3*n-x0$3*t),x0$3=n,y0$3=t}function areaRingEnd(){areaPoint(x00$2,y00$2)}const pathArea=areaStream;var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var n=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),n}};function boundsPoint(n,t){n<x0$2&&(x0$2=n),n>x1&&(x1=n),t<y0$2&&(y0$2=t),t>y1&&(y1=t)}const boundsStream$1=boundsStream;var X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$1,y0$1,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var n=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,n}};function centroidPoint(n,t){X0+=n,Y0+=t,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(n,t){centroidStream.point=centroidPointLine,centroidPoint(x0$1=n,y0$1=t)}function centroidPointLine(n,t){var r=n-x0$1,a=t-y0$1,o=sqrt(r*r+a*a);X1+=o*(x0$1+n)/2,Y1+=o*(y0$1+t)/2,Z1+=o,centroidPoint(x0$1=n,y0$1=t)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(n,t){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=n,y00$1=y0$1=t)}function centroidPointRing(n,t){var r=n-x0$1,a=t-y0$1,o=sqrt(r*r+a*a);X1+=o*(x0$1+n)/2,Y1+=o*(y0$1+t)/2,Z1+=o,o=y0$1*n-x0$1*t,X2+=o*(x0$1+n),Y2+=o*(y0$1+t),Z2+=o*3,centroidPoint(x0$1=n,y0$1=t)}const pathCentroid=centroidStream;function PathContext(n){this._context=n}PathContext.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,tau);break}}},result:noop$1};var lengthSum=new Adder,lengthRing,x00,y00,x0,y0,lengthStream={point:noop$1,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var n=+lengthSum;return lengthSum=new Adder,n}};function lengthPointFirst(n,t){lengthStream.point=lengthPoint,x00=x0=n,y00=y0=t}function lengthPoint(n,t){x0-=n,y0-=t,lengthSum.add(sqrt(x0*x0+y0*y0)),x0=n,y0=t}const pathMeasure=lengthStream;let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(t){this._append=t==null?append:appendRound(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==cacheRadius||this._append!==cacheAppend){const a=this._radius,o=this._;this._="",this._append`m0,${a}a${a},${a} 0 1,1 0,${-2*a}a${a},${a} 0 1,1 0,${2*a}z`,cacheRadius=a,cacheAppend=this._append,cacheCircle=this._,this._=o}this._+=cacheCircle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function append(n){let t=1;this._+=n[0];for(const r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function appendRound(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return append;if(t!==cacheDigits){const r=10**t;cacheDigits=t,cacheAppend=function(o){let s=1;this._+=o[0];for(const l=o.length;s<l;++s)this._+=Math.round(arguments[s]*r)/r+o[s]}}return cacheAppend}function index$1(n,t){let r=3,a=4.5,o,s;function l(u){return u&&(typeof a=="function"&&s.pointRadius(+a.apply(this,arguments)),geoStream(u,o(s))),s.result()}return l.area=function(u){return geoStream(u,o(pathArea)),pathArea.result()},l.measure=function(u){return geoStream(u,o(pathMeasure)),pathMeasure.result()},l.bounds=function(u){return geoStream(u,o(boundsStream$1)),boundsStream$1.result()},l.centroid=function(u){return geoStream(u,o(pathCentroid)),pathCentroid.result()},l.projection=function(u){return arguments.length?(o=u==null?(n=null,identity$3):(n=u).stream,l):n},l.context=function(u){return arguments.length?(s=u==null?(t=null,new PathString(r)):new PathContext(t=u),typeof a!="function"&&s.pointRadius(a),l):t},l.pointRadius=function(u){return arguments.length?(a=typeof u=="function"?u:(s.pointRadius(+u),+u),l):a},l.digits=function(u){if(!arguments.length)return r;if(u==null)r=null;else{const d=Math.floor(u);if(!(d>=0))throw new RangeError(`invalid digits: ${u}`);r=d}return t===null&&(s=new PathString(r)),l},l.projection(n).digits(r).context(t)}function transformer(n){return function(t){var r=new TransformStream;for(var a in n)r[a]=n[a];return r.stream=t,r}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit(n,t,r){var a=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),a!=null&&n.clipExtent(null),geoStream(r,n.stream(boundsStream$1)),t(boundsStream$1.result()),a!=null&&n.clipExtent(a),n}function fitExtent(n,t,r){return fit(n,function(a){var o=t[1][0]-t[0][0],s=t[1][1]-t[0][1],l=Math.min(o/(a[1][0]-a[0][0]),s/(a[1][1]-a[0][1])),u=+t[0][0]+(o-l*(a[1][0]+a[0][0]))/2,d=+t[0][1]+(s-l*(a[1][1]+a[0][1]))/2;n.scale(150*l).translate([u,d])},r)}function fitSize(n,t,r){return fitExtent(n,[[0,0],t],r)}function fitWidth(n,t,r){return fit(n,function(a){var o=+t,s=o/(a[1][0]-a[0][0]),l=(o-s*(a[1][0]+a[0][0]))/2,u=-s*a[0][1];n.scale(150*s).translate([l,u])},r)}function fitHeight(n,t,r){return fit(n,function(a){var o=+t,s=o/(a[1][1]-a[0][1]),l=-s*a[0][0],u=(o-s*(a[1][1]+a[0][1]))/2;n.scale(150*s).translate([l,u])},r)}var maxDepth=16,cosMinDistance=cos(30*radians);function resample(n,t){return+t?resample$1(n,t):resampleNone(n)}function resampleNone(n){return transformer({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}function resample$1(n,t){function r(a,o,s,l,u,d,v,g,f,c,y,_,b,S){var x=v-a,w=g-o,T=x*x+w*w;if(T>4*t&&b--){var A=l+c,E=u+y,$=d+_,P=sqrt(A*A+E*E+$*$),I=asin($/=P),C=abs$1(abs$1($)-1)<epsilon||abs$1(s-f)<epsilon?(s+f)/2:atan2(E,A),M=n(C,I),D=M[0],R=M[1],N=D-a,O=R-o,F=w*N-x*O;(F*F/T>t||abs$1((x*N+w*O)/T-.5)>.3||l*c+u*y+d*_<cosMinDistance)&&(r(a,o,s,l,u,d,D,R,C,A/=P,E/=P,$,b,S),S.point(D,R),r(D,R,C,A,E,$,v,g,f,c,y,_,b,S))}}return function(a){var o,s,l,u,d,v,g,f,c,y,_,b,S={point:x,lineStart:w,lineEnd:A,polygonStart:function(){a.polygonStart(),S.lineStart=E},polygonEnd:function(){a.polygonEnd(),S.lineStart=w}};function x(I,C){I=n(I,C),a.point(I[0],I[1])}function w(){f=NaN,S.point=T,a.lineStart()}function T(I,C){var M=cartesian([I,C]),D=n(I,C);r(f,c,g,y,_,b,f=D[0],c=D[1],g=I,y=M[0],_=M[1],b=M[2],maxDepth,a),a.point(f,c)}function A(){S.point=x,a.lineEnd()}function E(){w(),S.point=$,S.lineEnd=P}function $(I,C){T(o=I,C),s=f,l=c,u=y,d=_,v=b,S.point=T}function P(){r(f,c,g,y,_,b,s,l,o,u,d,v,maxDepth,a),S.lineEnd=A,A()}return S}}var transformRadians=transformer({point:function(n,t){this.stream.point(n*radians,t*radians)}});function transformRotate(n){return transformer({point:function(t,r){var a=n(t,r);return this.stream.point(a[0],a[1])}})}function scaleTranslate(n,t,r,a,o){function s(l,u){return l*=a,u*=o,[t+n*l,r-n*u]}return s.invert=function(l,u){return[(l-t)/n*a,(r-u)/n*o]},s}function scaleTranslateRotate(n,t,r,a,o,s){if(!s)return scaleTranslate(n,t,r,a,o);var l=cos(s),u=sin(s),d=l*n,v=u*n,g=l/n,f=u/n,c=(u*r-l*t)/n,y=(u*t+l*r)/n;function _(b,S){return b*=a,S*=o,[d*b-v*S+t,r-v*b-d*S]}return _.invert=function(b,S){return[a*(g*b-f*S+c),o*(y-f*b-g*S)]},_}function projection(n){return projectionMutator(function(){return n})()}function projectionMutator(n){var t,r=150,a=480,o=250,s=0,l=0,u=0,d=0,v=0,g,f=0,c=1,y=1,_=null,b=clipAntimeridian,S=null,x,w,T,A=identity$3,E=.5,$,P,I,C,M;function D(F){return I(F[0]*radians,F[1]*radians)}function R(F){return F=I.invert(F[0],F[1]),F&&[F[0]*degrees,F[1]*degrees]}D.stream=function(F){return C&&M===F?C:C=transformRadians(transformRotate(g)(b($(A(M=F)))))},D.preclip=function(F){return arguments.length?(b=F,_=void 0,O()):b},D.postclip=function(F){return arguments.length?(A=F,S=x=w=T=null,O()):A},D.clipAngle=function(F){return arguments.length?(b=+F?clipCircle(_=F*radians):(_=null,clipAntimeridian),O()):_*degrees},D.clipExtent=function(F){return arguments.length?(A=F==null?(S=x=w=T=null,identity$3):clipRectangle(S=+F[0][0],x=+F[0][1],w=+F[1][0],T=+F[1][1]),O()):S==null?null:[[S,x],[w,T]]},D.scale=function(F){return arguments.length?(r=+F,N()):r},D.translate=function(F){return arguments.length?(a=+F[0],o=+F[1],N()):[a,o]},D.center=function(F){return arguments.length?(s=F[0]%360*radians,l=F[1]%360*radians,N()):[s*degrees,l*degrees]},D.rotate=function(F){return arguments.length?(u=F[0]%360*radians,d=F[1]%360*radians,v=F.length>2?F[2]%360*radians:0,N()):[u*degrees,d*degrees,v*degrees]},D.angle=function(F){return arguments.length?(f=F%360*radians,N()):f*degrees},D.reflectX=function(F){return arguments.length?(c=F?-1:1,N()):c<0},D.reflectY=function(F){return arguments.length?(y=F?-1:1,N()):y<0},D.precision=function(F){return arguments.length?($=resample(P,E=F*F),O()):sqrt(E)},D.fitExtent=function(F,L){return fitExtent(D,F,L)},D.fitSize=function(F,L){return fitSize(D,F,L)},D.fitWidth=function(F,L){return fitWidth(D,F,L)},D.fitHeight=function(F,L){return fitHeight(D,F,L)};function N(){var F=scaleTranslateRotate(r,0,0,c,y,f).apply(null,t(s,l)),L=scaleTranslateRotate(r,a-F[0],o-F[1],c,y,f);return g=rotateRadians(u,d,v),P=compose(t,L),I=compose(g,P),$=resample(P,E),O()}function O(){return C=M=null,D}return function(){return t=n.apply(this,arguments),D.invert=t.invert&&R,N()}}function mercatorRaw(n,t){return[n,log(tan((halfPi+t)/2))]}mercatorRaw.invert=function(n,t){return[n,2*atan(exp(t))-halfPi]};function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau)}function mercatorProjection(n){var t=projection(n),r=t.center,a=t.scale,o=t.translate,s=t.clipExtent,l=null,u,d,v;t.scale=function(f){return arguments.length?(a(f),g()):a()},t.translate=function(f){return arguments.length?(o(f),g()):o()},t.center=function(f){return arguments.length?(r(f),g()):r()},t.clipExtent=function(f){return arguments.length?(f==null?l=u=d=v=null:(l=+f[0][0],u=+f[0][1],d=+f[1][0],v=+f[1][1]),g()):l==null?null:[[l,u],[d,v]]};function g(){var f=pi*a(),c=t(rotation(t.rotate()).invert([0,0]));return s(l==null?[[c[0]-f,c[1]-f],[c[0]+f,c[1]+f]]:n===mercatorRaw?[[Math.max(c[0]-f,l),u],[Math.min(c[0]+f,d),v]]:[[l,Math.max(c[1]-f,u)],[d,Math.min(c[1]+f,v)]])}return g()}const constant=n=>()=>n;function ZoomEvent(n,{sourceEvent:t,target:r,transform:a,dispatch:o}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:o}})}function Transform(n,t,r){this.k=n,this.x=t,this.y=r}Transform.prototype={constructor:Transform,scale:function(n){return n===1?this:new Transform(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new Transform(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity$2=new Transform(1,0,0);Transform.prototype;function nopropagation(n){n.stopImmediatePropagation()}function noevent(n){n.preventDefault(),n.stopImmediatePropagation()}function defaultFilter(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function defaultExtent(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function defaultTransform(){return this.__zoom||identity$2}function defaultWheelDelta(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(n,t,r){var a=n.invertX(t[0][0])-r[0][0],o=n.invertX(t[1][0])-r[1][0],s=n.invertY(t[0][1])-r[0][1],l=n.invertY(t[1][1])-r[1][1];return n.translate(o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o),l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l))}function zoom(){var n=defaultFilter,t=defaultExtent,r=defaultConstrain,a=defaultWheelDelta,o=defaultTouchable,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,d=interpolateZoom,v=dispatch("start","zoom","end"),g,f,c,y=500,_=150,b=0,S=10;function x(O){O.property("__zoom",defaultTransform).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",M).filter(o).on("touchstart.zoom",D).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(O,F,L,B){var V=O.selection?O.selection():O;V.property("__zoom",defaultTransform),O!==V?E(O,F,L,B):V.interrupt().each(function(){$(this,arguments).event(B).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},x.scaleBy=function(O,F,L,B){x.scaleTo(O,function(){var V=this.__zoom.k,H=typeof F=="function"?F.apply(this,arguments):F;return V*H},L,B)},x.scaleTo=function(O,F,L,B){x.transform(O,function(){var V=t.apply(this,arguments),H=this.__zoom,X=L==null?A(V):typeof L=="function"?L.apply(this,arguments):L,U=H.invert(X),te=typeof F=="function"?F.apply(this,arguments):F;return r(T(w(H,te),X,U),V,l)},L,B)},x.translateBy=function(O,F,L,B){x.transform(O,function(){return r(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),l)},null,B)},x.translateTo=function(O,F,L,B,V){x.transform(O,function(){var H=t.apply(this,arguments),X=this.__zoom,U=B==null?A(H):typeof B=="function"?B.apply(this,arguments):B;return r(identity$2.translate(U[0],U[1]).scale(X.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof L=="function"?-L.apply(this,arguments):-L),H,l)},B,V)};function w(O,F){return F=Math.max(s[0],Math.min(s[1],F)),F===O.k?O:new Transform(F,O.x,O.y)}function T(O,F,L){var B=F[0]-L[0]*O.k,V=F[1]-L[1]*O.k;return B===O.x&&V===O.y?O:new Transform(O.k,B,V)}function A(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function E(O,F,L,B){O.on("start.zoom",function(){$(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(B).end()}).tween("zoom",function(){var V=this,H=arguments,X=$(V,H).event(B),U=t.apply(V,H),te=L==null?A(U):typeof L=="function"?L.apply(V,H):L,ee=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),q=V.__zoom,ie=typeof F=="function"?F.apply(V,H):F,pe=d(q.invert(te).concat(ee/q.k),ie.invert(te).concat(ee/ie.k));return function(j){if(j===1)j=ie;else{var Q=pe(j),J=ee/Q[2];j=new Transform(J,te[0]-Q[0]*J,te[1]-Q[1]*J)}X.zoom(null,j)}})}function $(O,F,L){return!L&&O.__zooming||new P(O,F)}function P(O,F){this.that=O,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(O,F),this.taps=0}P.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,F){return this.mouse&&O!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var F=select(this.that).datum();v.call(O,this.that,new ZoomEvent(O,{sourceEvent:this.sourceEvent,target:x,type:O,transform:this.that.__zoom,dispatch:v}),F)}};function I(O,...F){if(!n.apply(this,arguments))return;var L=$(this,F).event(O),B=this.__zoom,V=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,a.apply(this,arguments)))),H=pointer(O);if(L.wheel)(L.mouse[0][0]!==H[0]||L.mouse[0][1]!==H[1])&&(L.mouse[1]=B.invert(L.mouse[0]=H)),clearTimeout(L.wheel);else{if(B.k===V)return;L.mouse=[H,B.invert(H)],interrupt(this),L.start()}noevent(O),L.wheel=setTimeout(X,_),L.zoom("mouse",r(T(w(B,V),L.mouse[0],L.mouse[1]),L.extent,l));function X(){L.wheel=null,L.end()}}function C(O,...F){if(c||!n.apply(this,arguments))return;var L=O.currentTarget,B=$(this,F,!0).event(O),V=select(O.view).on("mousemove.zoom",te,!0).on("mouseup.zoom",ee,!0),H=pointer(O,L),X=O.clientX,U=O.clientY;dragDisable(O.view),nopropagation(O),B.mouse=[H,this.__zoom.invert(H)],interrupt(this),B.start();function te(q){if(noevent(q),!B.moved){var ie=q.clientX-X,pe=q.clientY-U;B.moved=ie*ie+pe*pe>b}B.event(q).zoom("mouse",r(T(B.that.__zoom,B.mouse[0]=pointer(q,L),B.mouse[1]),B.extent,l))}function ee(q){V.on("mousemove.zoom mouseup.zoom",null),yesdrag(q.view,B.moved),noevent(q),B.event(q).end()}}function M(O,...F){if(n.apply(this,arguments)){var L=this.__zoom,B=pointer(O.changedTouches?O.changedTouches[0]:O,this),V=L.invert(B),H=L.k*(O.shiftKey?.5:2),X=r(T(w(L,H),B,V),t.apply(this,F),l);noevent(O),u>0?select(this).transition().duration(u).call(E,X,B,O):select(this).call(x.transform,X,B,O)}}function D(O,...F){if(n.apply(this,arguments)){var L=O.touches,B=L.length,V=$(this,F,O.changedTouches.length===B).event(O),H,X,U,te;for(nopropagation(O),X=0;X<B;++X)U=L[X],te=pointer(U,this),te=[te,this.__zoom.invert(te),U.identifier],V.touch0?!V.touch1&&V.touch0[2]!==te[2]&&(V.touch1=te,V.taps=0):(V.touch0=te,H=!0,V.taps=1+!!g);g&&(g=clearTimeout(g)),H&&(V.taps<2&&(f=te[0],g=setTimeout(function(){g=null},y)),interrupt(this),V.start())}}function R(O,...F){if(this.__zooming){var L=$(this,F).event(O),B=O.changedTouches,V=B.length,H,X,U,te;for(noevent(O),H=0;H<V;++H)X=B[H],U=pointer(X,this),L.touch0&&L.touch0[2]===X.identifier?L.touch0[0]=U:L.touch1&&L.touch1[2]===X.identifier&&(L.touch1[0]=U);if(X=L.that.__zoom,L.touch1){var ee=L.touch0[0],q=L.touch0[1],ie=L.touch1[0],pe=L.touch1[1],j=(j=ie[0]-ee[0])*j+(j=ie[1]-ee[1])*j,Q=(Q=pe[0]-q[0])*Q+(Q=pe[1]-q[1])*Q;X=w(X,Math.sqrt(j/Q)),U=[(ee[0]+ie[0])/2,(ee[1]+ie[1])/2],te=[(q[0]+pe[0])/2,(q[1]+pe[1])/2]}else if(L.touch0)U=L.touch0[0],te=L.touch0[1];else return;L.zoom("touch",r(T(X,U,te),L.extent,l))}}function N(O,...F){if(this.__zooming){var L=$(this,F).event(O),B=O.changedTouches,V=B.length,H,X;for(nopropagation(O),c&&clearTimeout(c),c=setTimeout(function(){c=null},y),H=0;H<V;++H)X=B[H],L.touch0&&L.touch0[2]===X.identifier?delete L.touch0:L.touch1&&L.touch1[2]===X.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(X=pointer(X,this),Math.hypot(f[0]-X[0],f[1]-X[1])<S)){var U=select(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return x.wheelDelta=function(O){return arguments.length?(a=typeof O=="function"?O:constant(+O),x):a},x.filter=function(O){return arguments.length?(n=typeof O=="function"?O:constant(!!O),x):n},x.touchable=function(O){return arguments.length?(o=typeof O=="function"?O:constant(!!O),x):o},x.extent=function(O){return arguments.length?(t=typeof O=="function"?O:constant([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),x):t},x.scaleExtent=function(O){return arguments.length?(s[0]=+O[0],s[1]=+O[1],x):[s[0],s[1]]},x.translateExtent=function(O){return arguments.length?(l[0][0]=+O[0][0],l[1][0]=+O[1][0],l[0][1]=+O[0][1],l[1][1]=+O[1][1],x):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},x.constrain=function(O){return arguments.length?(r=O,x):r},x.duration=function(O){return arguments.length?(u=+O,x):u},x.interpolate=function(O){return arguments.length?(d=O,x):d},x.on=function(){var O=v.on.apply(v,arguments);return O===v?x:O},x.clickDistance=function(O){return arguments.length?(b=(O=+O)*O,x):Math.sqrt(b)},x.tapDistance=function(O){return arguments.length?(S=+O,x):S},x}function identity$1(n){return n}function transform(n){if(n==null)return identity$1;var t,r,a=n.scale[0],o=n.scale[1],s=n.translate[0],l=n.translate[1];return function(u,d){d||(t=r=0);var v=2,g=u.length,f=new Array(g);for(f[0]=(t+=u[0])*a+s,f[1]=(r+=u[1])*o+l;v<g;)f[v]=u[v],++v;return f}}function reverse$1(n,t){for(var r,a=n.length,o=a-t;o<--a;)r=n[o],n[o++]=n[a],n[a]=r}function feature(n,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return feature$1(n,r)})}:feature$1(n,t)}function feature$1(n,t){var r=t.id,a=t.bbox,o=t.properties==null?{}:t.properties,s=object(n,t);return r==null&&a==null?{type:"Feature",properties:o,geometry:s}:a==null?{type:"Feature",id:r,properties:o,geometry:s}:{type:"Feature",id:r,bbox:a,properties:o,geometry:s}}function object(n,t){var r=transform(n.transform),a=n.arcs;function o(g,f){f.length&&f.pop();for(var c=a[g<0?~g:g],y=0,_=c.length;y<_;++y)f.push(r(c[y],y));g<0&&reverse$1(f,_)}function s(g){return r(g)}function l(g){for(var f=[],c=0,y=g.length;c<y;++c)o(g[c],f);return f.length<2&&f.push(f[0]),f}function u(g){for(var f=l(g);f.length<4;)f.push(f[0]);return f}function d(g){return g.map(u)}function v(g){var f=g.type,c;switch(f){case"GeometryCollection":return{type:f,geometries:g.geometries.map(v)};case"Point":c=s(g.coordinates);break;case"MultiPoint":c=g.coordinates.map(s);break;case"LineString":c=l(g.arcs);break;case"MultiLineString":c=g.arcs.map(l);break;case"Polygon":c=d(g.arcs);break;case"MultiPolygon":c=g.arcs.map(d);break;default:return null}return{type:f,coordinates:c}}return v(t)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(n,t){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},extendStatics$1(n,t)};function __extends$1(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics$1(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Browser=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),Env=function(){function n(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:typeof navigator>"u"?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(n,t){var r=t.browser,a=n.match(/Firefox\/([\d.]+)/),o=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),s=n.match(/Edge?\/([\d.]+)/),l=/micromessenger/i.test(n);a&&(r.firefox=!0,r.version=a[1]),o&&(r.ie=!0,r.version=o[1]),s&&(r.edge=!0,r.version=s[1],r.newEdge=+s[1].split(".")[0]>18),l&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var u=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in u||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in u)&&!("OTransition"in u),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const env$1=env;var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(n){var t={};if(typeof JSON>"u")return t;for(var r=0;r<n.length;r++){var a=String.fromCharCode(r+32),o=(n.charCodeAt(r)-OFFSET)/SCALE;t[a]=o}return t}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,t;return function(r,a){if(!n){var o=platformApi.createCanvas();n=o&&o.getContext("2d")}if(n)return t!==a&&(t=n.font=a||DEFAULT_FONT),n.measureText(r);r=r||"",a=a||DEFAULT_FONT;var s=/(\d+)px/.exec(a),l=s&&+s[1]||DEFAULT_FONT_SIZE,u=0;if(a.indexOf("mono")>=0)u=l*r.length;else for(var d=0;d<r.length;d++){var v=DEFAULT_TEXT_WIDTH_MAP[r[d]];u+=v==null?l:v*l}return{width:u}}}(),loadImage:function(n,t,r){var a=new Image;return a.onload=t,a.onerror=r,a.src=n,a}},BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,t){return n["[object "+t+"]"]=!0,n},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,t){return n["[object "+t+"Array]"]=!0,n},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=function(){}.constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];typeof console<"u"&&console.error.apply(console,n)}function clone$4(n){if(n==null||typeof n!="object")return n;var t=n,r=objToString.call(n);if(r==="[object Array]"){if(!isPrimitive(n)){t=[];for(var a=0,o=n.length;a<o;a++)t[a]=clone$4(n[a])}}else if(TYPED_ARRAY[r]){if(!isPrimitive(n)){var s=n.constructor;if(s.from)t=s.from(n);else{t=new s(n.length);for(var a=0,o=n.length;a<o;a++)t[a]=n[a]}}}else if(!BUILTIN_OBJECT[r]&&!isPrimitive(n)&&!isDom(n)){t={};for(var l in n)n.hasOwnProperty(l)&&l!==protoKey&&(t[l]=clone$4(n[l]))}return t}function merge(n,t,r){if(!isObject$3(t)||!isObject$3(n))return r?clone$4(t):n;for(var a in t)if(t.hasOwnProperty(a)&&a!==protoKey){var o=n[a],s=t[a];isObject$3(s)&&isObject$3(o)&&!isArray$1(s)&&!isArray$1(o)&&!isDom(s)&&!isDom(o)&&!isBuiltInObject(s)&&!isBuiltInObject(o)&&!isPrimitive(s)&&!isPrimitive(o)?merge(o,s,r):(r||!(a in n))&&(n[a]=clone$4(t[a]))}return n}function mergeAll(n,t){for(var r=n[0],a=1,o=n.length;a<o;a++)r=merge(r,n[a],t);return r}function extend(n,t){if(Object.assign)Object.assign(n,t);else for(var r in t)t.hasOwnProperty(r)&&r!==protoKey&&(n[r]=t[r]);return n}function defaults(n,t,r){for(var a=keys(t),o=0;o<a.length;o++){var s=a[o];(r?t[s]!=null:n[s]==null)&&(n[s]=t[s])}return n}function indexOf(n,t){if(n){if(n.indexOf)return n.indexOf(t);for(var r=0,a=n.length;r<a;r++)if(n[r]===t)return r}return-1}function inherits(n,t){var r=n.prototype;function a(){}a.prototype=t.prototype,n.prototype=new a;for(var o in r)r.hasOwnProperty(o)&&(n.prototype[o]=r[o]);n.prototype.constructor=n,n.superClass=t}function mixin(n,t,r){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var a=Object.getOwnPropertyNames(t),o=0;o<a.length;o++){var s=a[o];s!=="constructor"&&(r?t[s]!=null:n[s]==null)&&(n[s]=t[s])}else defaults(n,t,r)}function isArrayLike(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function each$f(n,t,r){if(n&&t)if(n.forEach&&n.forEach===nativeForEach)n.forEach(t,r);else if(n.length===+n.length)for(var a=0,o=n.length;a<o;a++)t.call(r,n[a],a,n);else for(var s in n)n.hasOwnProperty(s)&&t.call(r,n[s],s,n)}function map$1(n,t,r){if(!n)return[];if(!t)return slice(n);if(n.map&&n.map===nativeMap)return n.map(t,r);for(var a=[],o=0,s=n.length;o<s;o++)a.push(t.call(r,n[o],o,n));return a}function reduce(n,t,r,a){if(n&&t){for(var o=0,s=n.length;o<s;o++)r=t.call(a,r,n[o],o,n);return r}}function filter(n,t,r){if(!n)return[];if(!t)return slice(n);if(n.filter&&n.filter===nativeFilter)return n.filter(t,r);for(var a=[],o=0,s=n.length;o<s;o++)t.call(r,n[o],o,n)&&a.push(n[o]);return a}function find(n,t,r){if(n&&t){for(var a=0,o=n.length;a<o;a++)if(t.call(r,n[a],a,n))return n[a]}}function keys(n){if(!n)return[];if(Object.keys)return Object.keys(n);var t=[];for(var r in n)n.hasOwnProperty(r)&&t.push(r);return t}function bindPolyfill(n,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return function(){return n.apply(t,r.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return n.apply(this,t.concat(nativeSlice.call(arguments)))}}function isArray$1(n){return Array.isArray?Array.isArray(n):objToString.call(n)==="[object Array]"}function isFunction(n){return typeof n=="function"}function isString(n){return typeof n=="string"}function isStringSafe(n){return objToString.call(n)==="[object String]"}function isNumber(n){return typeof n=="number"}function isObject$3(n){var t=typeof n;return t==="function"||!!n&&t==="object"}function isBuiltInObject(n){return!!BUILTIN_OBJECT[objToString.call(n)]}function isTypedArray(n){return!!TYPED_ARRAY[objToString.call(n)]}function isDom(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function isGradientObject(n){return n.colorStops!=null}function isImagePatternObject(n){return n.image!=null}function isRegExp(n){return objToString.call(n)==="[object RegExp]"}function eqNaN(n){return n!==n}function retrieve(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var r=0,a=n.length;r<a;r++)if(n[r]!=null)return n[r]}function retrieve2(n,t){return n??t}function retrieve3(n,t,r){return n??t??r}function slice(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return nativeSlice.apply(n,t)}function normalizeCssArray$1(n){if(typeof n=="number")return[n,n,n,n];var t=n.length;return t===2?[n[0],n[1],n[0],n[1]]:t===3?[n[0],n[1],n[2],n[1]]:n}function assert(n,t){if(!n)throw new Error(t)}function trim$1(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(n){n[primitiveKey]=!0}function isPrimitive(n){return n[primitiveKey]}var MapPolyfill=function(){function n(){this.data={}}return n.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},n.prototype.has=function(t){return this.data.hasOwnProperty(t)},n.prototype.get=function(t){return this.data[t]},n.prototype.set=function(t,r){return this.data[t]=r,this},n.prototype.keys=function(){return keys(this.data)},n.prototype.forEach=function(t){var r=this.data;for(var a in r)r.hasOwnProperty(a)&&t(r[a],a)},n}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function n(t){var r=isArray$1(t);this.data=maybeNativeMap();var a=this;t instanceof n?t.each(o):t&&each$f(t,o);function o(s,l){r?a.set(s,l):a.set(l,s)}}return n.prototype.hasKey=function(t){return this.data.has(t)},n.prototype.get=function(t){return this.data.get(t)},n.prototype.set=function(t,r){return this.data.set(t,r),r},n.prototype.each=function(t,r){this.data.forEach(function(a,o){t.call(r,a,o)})},n.prototype.keys=function(){var t=this.data.keys();return isNativeMapSupported?Array.from(t):t},n.prototype.removeKey=function(t){this.data.delete(t)},n}();function createHashMap(n){return new HashMap(n)}function concatArray(n,t){for(var r=new n.constructor(n.length+t.length),a=0;a<n.length;a++)r[a]=n[a];for(var o=n.length,a=0;a<t.length;a++)r[a+o]=t[a];return r}function createObject(n,t){var r;if(Object.create)r=Object.create(n);else{var a=function(){};a.prototype=n,r=new a}return t&&extend(r,t),r}function disableUserSelect(n){var t=n.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function hasOwn(n,t){return n.hasOwnProperty(t)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(n,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},extendStatics(n,t)};function __extends(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function create$2(n,t){return n==null&&(n=0),t==null&&(t=0),[n,t]}function copy$1(n,t){return n[0]=t[0],n[1]=t[1],n}function clone$3(n){return[n[0],n[1]]}function set$1(n,t,r){return n[0]=t,n[1]=r,n}function add(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n}function scaleAndAdd$1(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n}function sub(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n}function len(n){return Math.sqrt(lenSquare(n))}function lenSquare(n){return n[0]*n[0]+n[1]*n[1]}function scale$2(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n}function normalize$3(n,t){var r=len(t);return r===0?(n[0]=0,n[1]=0):(n[0]=t[0]/r,n[1]=t[1]/r),n}function distance(n,t){return Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1]))}var dist$1=distance;function distanceSquare(n,t){return(n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])}var distSquare=distanceSquare;function lerp$1(n,t,r,a){return n[0]=t[0]+a*(r[0]-t[0]),n[1]=t[1]+a*(r[1]-t[1]),n}function applyTransform$1(n,t,r){var a=t[0],o=t[1];return n[0]=r[0]*a+r[2]*o+r[4],n[1]=r[1]*a+r[3]*o+r[5],n}function min$1(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n}function max$1(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n}var Param=function(){function n(t,r){this.target=t,this.topTarget=r&&r.topTarget}return n}(),Draggable=function(){function n(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Param(r,t),"dragstart",t.event))},n.prototype._drag=function(t){var r=this._draggingTarget;if(r){var a=t.offsetX,o=t.offsetY,s=a-this._x,l=o-this._y;this._x=a,this._y=o,r.drift(s,l,t),this.handler.dispatchToElement(new Param(r,t),"drag",t.event);var u=this.handler.findHover(a,o,r).target,d=this._dropTarget;this._dropTarget=u,r!==u&&(d&&u!==d&&this.handler.dispatchToElement(new Param(d,t),"dragleave",t.event),u&&u!==d&&this.handler.dispatchToElement(new Param(u,t),"dragenter",t.event))}},n.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Param(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},n}();const Draggable$1=Draggable;var Eventful=function(){function n(t){t&&(this._$eventProcessor=t)}return n.prototype.on=function(t,r,a,o){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof r=="function"&&(o=a,a=r,r=null),!a||!t)return this;var l=this._$eventProcessor;r!=null&&l&&l.normalizeQuery&&(r=l.normalizeQuery(r)),s[t]||(s[t]=[]);for(var u=0;u<s[t].length;u++)if(s[t][u].h===a)return this;var d={h:a,query:r,ctx:o||this,callAtLast:a.zrEventfulCallAtLast},v=s[t].length-1,g=s[t][v];return g&&g.callAtLast?s[t].splice(v,0,d):s[t].push(d),this},n.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},n.prototype.off=function(t,r){var a=this._$handlers;if(!a)return this;if(!t)return this._$handlers={},this;if(r){if(a[t]){for(var o=[],s=0,l=a[t].length;s<l;s++)a[t][s].h!==r&&o.push(a[t][s]);a[t]=o}a[t]&&a[t].length===0&&delete a[t]}else delete a[t];return this},n.prototype.trigger=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];if(!this._$handlers)return this;var o=this._$handlers[t],s=this._$eventProcessor;if(o)for(var l=r.length,u=o.length,d=0;d<u;d++){var v=o[d];if(!(s&&s.filter&&v.query!=null&&!s.filter(t,v.query)))switch(l){case 0:v.h.call(v.ctx);break;case 1:v.h.call(v.ctx,r[0]);break;case 2:v.h.call(v.ctx,r[0],r[1]);break;default:v.h.apply(v.ctx,r);break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},n.prototype.triggerWithContext=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];if(!this._$handlers)return this;var o=this._$handlers[t],s=this._$eventProcessor;if(o)for(var l=r.length,u=r[l-1],d=o.length,v=0;v<d;v++){var g=o[v];if(!(s&&s.filter&&g.query!=null&&!s.filter(t,g.query)))switch(l){case 0:g.h.call(u);break;case 1:g.h.call(u,r[0]);break;case 2:g.h.call(u,r[0],r[1]);break;default:g.h.apply(u,r.slice(1,l-1));break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},n}();const Eventful$1=Eventful;var LN2=Math.log(2);function determinant(n,t,r,a,o,s){var l=a+"-"+o,u=n.length;if(s.hasOwnProperty(l))return s[l];if(t===1){var d=Math.round(Math.log((1<<u)-1&~o)/LN2);return n[r][d]}for(var v=a|1<<r,g=r+1;a&1<<g;)g++;for(var f=0,c=0,y=0;c<u;c++){var _=1<<c;_&o||(f+=(y%2?-1:1)*n[r][c]*determinant(n,t-1,g,v,o|_,s),y++)}return s[l]=f,f}function buildTransformer(n,t){var r=[[n[0],n[1],1,0,0,0,-t[0]*n[0],-t[0]*n[1]],[0,0,0,n[0],n[1],1,-t[1]*n[0],-t[1]*n[1]],[n[2],n[3],1,0,0,0,-t[2]*n[2],-t[2]*n[3]],[0,0,0,n[2],n[3],1,-t[3]*n[2],-t[3]*n[3]],[n[4],n[5],1,0,0,0,-t[4]*n[4],-t[4]*n[5]],[0,0,0,n[4],n[5],1,-t[5]*n[4],-t[5]*n[5]],[n[6],n[7],1,0,0,0,-t[6]*n[6],-t[6]*n[7]],[0,0,0,n[6],n[7],1,-t[7]*n[6],-t[7]*n[7]]],a={},o=determinant(r,8,0,0,0,a);if(o!==0){for(var s=[],l=0;l<8;l++)for(var u=0;u<8;u++)s[u]==null&&(s[u]=0),s[u]+=((l+u)%2?-1:1)*determinant(r,7,l===0?1:0,1<<l,1<<u,a)/o*t[l];return function(d,v,g){var f=v*s[6]+g*s[7]+1;d[0]=(v*s[0]+g*s[1]+s[2])/f,d[1]=(v*s[3]+g*s[4]+s[5])/f}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(n,t,r,a,o){return transformCoordWithViewport(_calcOut$1,t,a,o,!0)&&transformCoordWithViewport(n,r,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(n,t,r,a,o){if(t.getBoundingClientRect&&env$1.domSupported&&!isCanvasEl(t)){var s=t[EVENT_SAVED_PROP]||(t[EVENT_SAVED_PROP]={}),l=prepareCoordMarkers(t,s),u=preparePointerTransformer(l,s,o);if(u)return u(n,r,a),!0}return!1}function prepareCoordMarkers(n,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var a=["left","right"],o=["top","bottom"],s=0;s<4;s++){var l=document.createElement("div"),u=l.style,d=s%2,v=(s>>1)%2;u.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",a[d]+":0",o[v]+":0",a[1-d]+":auto",o[1-v]+":auto",""].join("!important;"),n.appendChild(l),r.push(l)}return r}function preparePointerTransformer(n,t,r){for(var a=r?"invTrans":"trans",o=t[a],s=t.srcCoords,l=[],u=[],d=!0,v=0;v<4;v++){var g=n[v].getBoundingClientRect(),f=2*v,c=g.left,y=g.top;l.push(c,y),d=d&&s&&c===s[f]&&y===s[f+1],u.push(n[v].offsetLeft,n[v].offsetTop)}return d&&o?o:(t.srcCoords=l,t[a]=r?buildTransformer(u,l):buildTransformer(l,u))}function isCanvasEl(n){return n.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(n){return n==null?"":(n+"").replace(replaceReg,function(t,r){return replaceMap[r]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env$1.browser.firefox&&+env$1.browser.version.split(".")[0]<39;function clientToLocal(n,t,r,a){return r=r||{},a?calculateZrXY(n,t,r):firefoxNotSupportOffsetXY&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):calculateZrXY(n,t,r),r}function calculateZrXY(n,t,r){if(env$1.domSupported&&n.getBoundingClientRect){var a=t.clientX,o=t.clientY;if(isCanvasEl(n)){var s=n.getBoundingClientRect();r.zrX=a-s.left,r.zrY=o-s.top;return}else if(transformCoordWithViewport(_calcOut,n,a,o)){r.zrX=_calcOut[0],r.zrY=_calcOut[1];return}}r.zrX=r.zrY=0}function getNativeEvent(n){return n||window.event}function normalizeEvent(n,t,r){if(t=getNativeEvent(t),t.zrX!=null)return t;var a=t.type,o=a&&a.indexOf("touch")>=0;if(o){var l=a!=="touchend"?t.targetTouches[0]:t.changedTouches[0];l&&clientToLocal(n,l,t,r)}else{clientToLocal(n,t,t,r);var s=getWheelDeltaMayPolyfill(t);t.zrDelta=s?s/120:-(t.detail||0)/3}var u=t.button;return t.which==null&&u!==void 0&&MOUSE_EVENT_REG.test(t.type)&&(t.which=u&1?1:u&2?3:u&4?2:0),t}function getWheelDeltaMayPolyfill(n){var t=n.wheelDelta;if(t)return t;var r=n.deltaX,a=n.deltaY;if(r==null||a==null)return t;var o=Math.abs(a!==0?a:r),s=a>0?-1:a<0?1:r>0?-1:1;return 3*o*s}function addEventListener(n,t,r,a){n.addEventListener(t,r,a)}function removeEventListener(n,t,r,a){n.removeEventListener(t,r,a)}var stop=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(n){return n.which===2||n.which===3}var GestureMgr=function(){function n(){this._track=[]}return n.prototype.recognize=function(t,r,a){return this._doTrack(t,r,a),this._recognize(t)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(t,r,a){var o=t.touches;if(o){for(var s={points:[],touches:[],target:r,event:t},l=0,u=o.length;l<u;l++){var d=o[l],v=clientToLocal(a,d,{});s.points.push([v.zrX,v.zrY]),s.touches.push(d)}this._track.push(s)}},n.prototype._recognize=function(t){for(var r in recognizers)if(recognizers.hasOwnProperty(r)){var a=recognizers[r](this._track,t);if(a)return a}},n}();function dist(n){var t=n[1][0]-n[0][0],r=n[1][1]-n[0][1];return Math.sqrt(t*t+r*r)}function center$1(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var recognizers={pinch:function(n,t){var r=n.length;if(r){var a=(n[r-1]||{}).points,o=(n[r-2]||{}).points||a;if(o&&o.length>1&&a&&a.length>1){var s=dist(a)/dist(o);!isFinite(s)&&(s=1),t.pinchScale=s;var l=center$1(a);return t.pinchX=l[0],t.pinchY=l[1],{type:"pinch",target:n[0].target,event:t}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function copy(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function mul(n,t,r){var a=t[0]*r[0]+t[2]*r[1],o=t[1]*r[0]+t[3]*r[1],s=t[0]*r[2]+t[2]*r[3],l=t[1]*r[2]+t[3]*r[3],u=t[0]*r[4]+t[2]*r[5]+t[4],d=t[1]*r[4]+t[3]*r[5]+t[5];return n[0]=a,n[1]=o,n[2]=s,n[3]=l,n[4]=u,n[5]=d,n}function translate(n,t,r){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4]+r[0],n[5]=t[5]+r[1],n}function rotate(n,t,r){var a=t[0],o=t[2],s=t[4],l=t[1],u=t[3],d=t[5],v=Math.sin(r),g=Math.cos(r);return n[0]=a*g+l*v,n[1]=-a*v+l*g,n[2]=o*g+u*v,n[3]=-o*v+g*u,n[4]=g*s+v*d,n[5]=g*d-v*s,n}function scale$1(n,t,r){var a=r[0],o=r[1];return n[0]=t[0]*a,n[1]=t[1]*o,n[2]=t[2]*a,n[3]=t[3]*o,n[4]=t[4]*a,n[5]=t[5]*o,n}function invert(n,t){var r=t[0],a=t[2],o=t[4],s=t[1],l=t[3],u=t[5],d=r*l-s*a;return d?(d=1/d,n[0]=l*d,n[1]=-s*d,n[2]=-a*d,n[3]=r*d,n[4]=(a*u-l*o)*d,n[5]=(s*o-r*u)*d,n):null}function clone$2(n){var t=create$1();return copy(t,n),t}var Point=function(){function n(t,r){this.x=t||0,this.y=r||0}return n.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(t,r){return this.x=t,this.y=r,this},n.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.scale=function(t){this.x*=t,this.y*=t},n.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},n.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},n.prototype.distance=function(t){var r=this.x-t.x,a=this.y-t.y;return Math.sqrt(r*r+a*a)},n.prototype.distanceSquare=function(t){var r=this.x-t.x,a=this.y-t.y;return r*r+a*a},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(t){if(t){var r=this.x,a=this.y;return this.x=t[0]*r+t[2]*a+t[4],this.y=t[1]*r+t[3]*a+t[5],this}},n.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},n.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},n.set=function(t,r,a){t.x=r,t.y=a},n.copy=function(t,r){t.x=r.x,t.y=r.y},n.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.lenSquare=function(t){return t.x*t.x+t.y*t.y},n.dot=function(t,r){return t.x*r.x+t.y*r.y},n.add=function(t,r,a){t.x=r.x+a.x,t.y=r.y+a.y},n.sub=function(t,r,a){t.x=r.x-a.x,t.y=r.y-a.y},n.scale=function(t,r,a){t.x=r.x*a,t.y=r.y*a},n.scaleAndAdd=function(t,r,a,o){t.x=r.x+a.x*o,t.y=r.y+a.y*o},n.lerp=function(t,r,a,o){var s=1-o;t.x=s*r.x+o*a.x,t.y=s*r.y+o*a.y},n}();const Point$1=Point;var mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point$1,rb=new Point$1,lb=new Point$1,rt=new Point$1,minTv$1=new Point$1,maxTv$1=new Point$1,BoundingRect=function(){function n(t,r,a,o){a<0&&(t=t+a,a=-a),o<0&&(r=r+o,o=-o),this.x=t,this.y=r,this.width=a,this.height=o}return n.prototype.union=function(t){var r=mathMin$a(t.x,this.x),a=mathMin$a(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(t.y+t.height,this.y+this.height)-a:this.height=t.height,this.x=r,this.y=a},n.prototype.applyTransform=function(t){n.applyTransform(this,this,t)},n.prototype.calculateTransform=function(t){var r=this,a=t.width/r.width,o=t.height/r.height,s=create$1();return translate(s,s,[-r.x,-r.y]),scale$1(s,s,[a,o]),translate(s,s,[t.x,t.y]),s},n.prototype.intersect=function(t,r){if(!t)return!1;t instanceof n||(t=n.create(t));var a=this,o=a.x,s=a.x+a.width,l=a.y,u=a.y+a.height,d=t.x,v=t.x+t.width,g=t.y,f=t.y+t.height,c=!(s<d||v<o||u<g||f<l);if(r){var y=1/0,_=0,b=Math.abs(s-d),S=Math.abs(v-o),x=Math.abs(u-g),w=Math.abs(f-l),T=Math.min(b,S),A=Math.min(x,w);s<d||v<o?T>_&&(_=T,b<S?Point$1.set(maxTv$1,-b,0):Point$1.set(maxTv$1,S,0)):T<y&&(y=T,b<S?Point$1.set(minTv$1,b,0):Point$1.set(minTv$1,-S,0)),u<g||f<l?A>_&&(_=A,x<w?Point$1.set(maxTv$1,0,-x):Point$1.set(maxTv$1,0,w)):T<y&&(y=T,x<w?Point$1.set(minTv$1,0,x):Point$1.set(minTv$1,0,-w))}return r&&Point$1.copy(r,c?minTv$1:maxTv$1),c},n.prototype.contain=function(t,r){var a=this;return t>=a.x&&t<=a.x+a.width&&r>=a.y&&r<=a.y+a.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(t){n.copy(this,t)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(t){return new n(t.x,t.y,t.width,t.height)},n.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},n.applyTransform=function(t,r,a){if(!a){t!==r&&n.copy(t,r);return}if(a[1]<1e-5&&a[1]>-1e-5&&a[2]<1e-5&&a[2]>-1e-5){var o=a[0],s=a[3],l=a[4],u=a[5];t.x=r.x*o+l,t.y=r.y*s+u,t.width=r.width*o,t.height=r.height*s,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}lt.x=lb.x=r.x,lt.y=rt.y=r.y,rb.x=rt.x=r.x+r.width,rb.y=lb.y=r.y+r.height,lt.transform(a),rt.transform(a),rb.transform(a),lb.transform(a),t.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),t.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var d=mathMax$a(lt.x,rb.x,lb.x,rt.x),v=mathMax$a(lt.y,rb.y,lb.y,rt.y);t.width=d-t.x,t.height=v-t.y},n}();const BoundingRect$1=BoundingRect;var SILENT="silent";function makeEventPacket(n,t,r){return{type:n,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(n){__extends(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Eventful$1),HoveredResult=function(){function n(t,r){this.x=t,this.y=r}return n}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect$1(0,0,0,0),Handler=function(n){__extends(t,n);function t(r,a,o,s,l){var u=n.call(this)||this;return u._hovered=new HoveredResult(0,0),u.storage=r,u.painter=a,u.painterRoot=s,u._pointerSize=l,o=o||new EmptyProxy,u.proxy=null,u.setHandlerProxy(o),u._draggingMgr=new Draggable$1(u),u}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(each$f(handlerNames,function(a){r.on&&r.on(a,this[a],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var a=r.zrX,o=r.zrY,s=isOutsideBoundary(this,a,o),l=this._hovered,u=l.target;u&&!u.__zr&&(l=this.findHover(l.x,l.y),u=l.target);var d=this._hovered=s?new HoveredResult(a,o):this.findHover(a,o),v=d.target,g=this.proxy;g.setCursor&&g.setCursor(v?v.cursor:"default"),u&&v!==u&&this.dispatchToElement(l,"mouseout",r),this.dispatchToElement(d,"mousemove",r),v&&v!==u&&this.dispatchToElement(d,"mouseover",r)},t.prototype.mouseout=function(r){var a=r.zrEventControl;a!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),a!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},t.prototype.dispatch=function(r,a){var o=this[r];o&&o.call(this,a)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var a=this.proxy;a.setCursor&&a.setCursor(r)},t.prototype.dispatchToElement=function(r,a,o){r=r||{};var s=r.target;if(!(s&&s.silent)){for(var l="on"+a,u=makeEventPacket(a,r,o);s&&(s[l]&&(u.cancelBubble=!!s[l].call(s,u)),s.trigger(a,u),s=s.__hostTarget?s.__hostTarget:s.parent,!u.cancelBubble););u.cancelBubble||(this.trigger(a,u),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(d){typeof d[l]=="function"&&d[l].call(d,u),d.trigger&&d.trigger(a,u)}))}},t.prototype.findHover=function(r,a,o){var s=this.storage.getDisplayList(),l=new HoveredResult(r,a);if(setHoverTarget(s,l,r,a,o),this._pointerSize&&!l.target){for(var u=[],d=this._pointerSize,v=d/2,g=new BoundingRect$1(r-v,a-v,d,d),f=s.length-1;f>=0;f--){var c=s[f];c!==o&&!c.ignore&&!c.ignoreCoarsePointer&&(!c.parent||!c.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(c.getBoundingRect()),c.transform&&tmpRect$1.applyTransform(c.transform),tmpRect$1.intersect(g)&&u.push(c))}if(u.length)for(var y=4,_=Math.PI/12,b=Math.PI*2,S=0;S<v;S+=y)for(var x=0;x<b;x+=_){var w=r+S*Math.cos(x),T=a+S*Math.sin(x);if(setHoverTarget(u,l,w,T,o),l.target)return l}}return l},t.prototype.processGesture=function(r,a){this._gestureMgr||(this._gestureMgr=new GestureMgr);var o=this._gestureMgr;a==="start"&&o.clear();var s=o.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(a==="end"&&o.clear(),s){var l=s.type;r.gestureEvent=l;var u=new HoveredResult;u.target=s.target,this.dispatchToElement(u,l,s.event)}},t}(Eventful$1);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){Handler.prototype[n]=function(t){var r=t.zrX,a=t.zrY,o=isOutsideBoundary(this,r,a),s,l;if((n!=="mouseup"||!o)&&(s=this.findHover(r,a),l=s.target),n==="mousedown")this._downEl=l,this._downPoint=[t.zrX,t.zrY],this._upEl=l;else if(n==="mouseup")this._upEl=l;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,n,t)}});function isHover(n,t,r){if(n[n.rectHover?"rectContain":"contain"](t,r)){for(var a=n,o=void 0,s=!1;a;){if(a.ignoreClip&&(s=!0),!s){var l=a.getClipPath();if(l&&!l.contain(t,r))return!1;a.silent&&(o=!0)}var u=a.__hostTarget;a=u||a.parent}return o?SILENT:!0}return!1}function setHoverTarget(n,t,r,a,o){for(var s=n.length-1;s>=0;s--){var l=n[s],u=void 0;if(l!==o&&!l.ignore&&(u=isHover(l,r,a))&&(!t.topTarget&&(t.topTarget=l),u!==SILENT)){t.target=l;break}}}function isOutsideBoundary(n,t,r){var a=n.painter;return t<0||t>a.getWidth()||r<0||r>a.getHeight()}const Handler$1=Handler;var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(n){for(var t=0;n>=DEFAULT_MIN_MERGE;)t|=n&1,n>>=1;return n+t}function makeAscendingRun(n,t,r,a){var o=t+1;if(o===r)return 1;if(a(n[o++],n[t])<0){for(;o<r&&a(n[o],n[o-1])<0;)o++;reverseRun(n,t,o)}else for(;o<r&&a(n[o],n[o-1])>=0;)o++;return o-t}function reverseRun(n,t,r){for(r--;t<r;){var a=n[t];n[t++]=n[r],n[r--]=a}}function binaryInsertionSort(n,t,r,a,o){for(a===t&&a++;a<r;a++){for(var s=n[a],l=t,u=a,d;l<u;)d=l+u>>>1,o(s,n[d])<0?u=d:l=d+1;var v=a-l;switch(v){case 3:n[l+3]=n[l+2];case 2:n[l+2]=n[l+1];case 1:n[l+1]=n[l];break;default:for(;v>0;)n[l+v]=n[l+v-1],v--}n[l]=s}}function gallopLeft(n,t,r,a,o,s){var l=0,u=0,d=1;if(s(n,t[r+o])>0){for(u=a-o;d<u&&s(n,t[r+o+d])>0;)l=d,d=(d<<1)+1,d<=0&&(d=u);d>u&&(d=u),l+=o,d+=o}else{for(u=o+1;d<u&&s(n,t[r+o-d])<=0;)l=d,d=(d<<1)+1,d<=0&&(d=u);d>u&&(d=u);var v=l;l=o-d,d=o-v}for(l++;l<d;){var g=l+(d-l>>>1);s(n,t[r+g])>0?l=g+1:d=g}return d}function gallopRight(n,t,r,a,o,s){var l=0,u=0,d=1;if(s(n,t[r+o])<0){for(u=o+1;d<u&&s(n,t[r+o-d])<0;)l=d,d=(d<<1)+1,d<=0&&(d=u);d>u&&(d=u);var v=l;l=o-d,d=o-v}else{for(u=a-o;d<u&&s(n,t[r+o+d])>=0;)l=d,d=(d<<1)+1,d<=0&&(d=u);d>u&&(d=u),l+=o,d+=o}for(l++;l<d;){var g=l+(d-l>>>1);s(n,t[r+g])<0?d=g:l=g+1}return d}function TimSort(n,t){var r=DEFAULT_MIN_GALLOPING,a,o,s=0;n.length;var l=[];a=[],o=[];function u(y,_){a[s]=y,o[s]=_,s+=1}function d(){for(;s>1;){var y=s-2;if(y>=1&&o[y-1]<=o[y]+o[y+1]||y>=2&&o[y-2]<=o[y]+o[y-1])o[y-1]<o[y+1]&&y--;else if(o[y]>o[y+1])break;g(y)}}function v(){for(;s>1;){var y=s-2;y>0&&o[y-1]<o[y+1]&&y--,g(y)}}function g(y){var _=a[y],b=o[y],S=a[y+1],x=o[y+1];o[y]=b+x,y===s-3&&(a[y+1]=a[y+2],o[y+1]=o[y+2]),s--;var w=gallopRight(n[S],n,_,b,0,t);_+=w,b-=w,b!==0&&(x=gallopLeft(n[_+b-1],n,S,x,x-1,t),x!==0&&(b<=x?f(_,b,S,x):c(_,b,S,x)))}function f(y,_,b,S){var x=0;for(x=0;x<_;x++)l[x]=n[y+x];var w=0,T=b,A=y;if(n[A++]=n[T++],--S===0){for(x=0;x<_;x++)n[A+x]=l[w+x];return}if(_===1){for(x=0;x<S;x++)n[A+x]=n[T+x];n[A+S]=l[w];return}for(var E=r,$,P,I;;){$=0,P=0,I=!1;do if(t(n[T],l[w])<0){if(n[A++]=n[T++],P++,$=0,--S===0){I=!0;break}}else if(n[A++]=l[w++],$++,P=0,--_===1){I=!0;break}while(($|P)<E);if(I)break;do{if($=gallopRight(n[T],l,w,_,0,t),$!==0){for(x=0;x<$;x++)n[A+x]=l[w+x];if(A+=$,w+=$,_-=$,_<=1){I=!0;break}}if(n[A++]=n[T++],--S===0){I=!0;break}if(P=gallopLeft(l[w],n,T,S,0,t),P!==0){for(x=0;x<P;x++)n[A+x]=n[T+x];if(A+=P,T+=P,S-=P,S===0){I=!0;break}}if(n[A++]=l[w++],--_===1){I=!0;break}E--}while($>=DEFAULT_MIN_GALLOPING||P>=DEFAULT_MIN_GALLOPING);if(I)break;E<0&&(E=0),E+=2}if(r=E,r<1&&(r=1),_===1){for(x=0;x<S;x++)n[A+x]=n[T+x];n[A+S]=l[w]}else{if(_===0)throw new Error;for(x=0;x<_;x++)n[A+x]=l[w+x]}}function c(y,_,b,S){var x=0;for(x=0;x<S;x++)l[x]=n[b+x];var w=y+_-1,T=S-1,A=b+S-1,E=0,$=0;if(n[A--]=n[w--],--_===0){for(E=A-(S-1),x=0;x<S;x++)n[E+x]=l[x];return}if(S===1){for(A-=_,w-=_,$=A+1,E=w+1,x=_-1;x>=0;x--)n[$+x]=n[E+x];n[A]=l[T];return}for(var P=r;;){var I=0,C=0,M=!1;do if(t(l[T],n[w])<0){if(n[A--]=n[w--],I++,C=0,--_===0){M=!0;break}}else if(n[A--]=l[T--],C++,I=0,--S===1){M=!0;break}while((I|C)<P);if(M)break;do{if(I=_-gallopRight(l[T],n,y,_,_-1,t),I!==0){for(A-=I,w-=I,_-=I,$=A+1,E=w+1,x=I-1;x>=0;x--)n[$+x]=n[E+x];if(_===0){M=!0;break}}if(n[A--]=l[T--],--S===1){M=!0;break}if(C=S-gallopLeft(n[w],l,0,S,S-1,t),C!==0){for(A-=C,T-=C,S-=C,$=A+1,E=T+1,x=0;x<C;x++)n[$+x]=l[E+x];if(S<=1){M=!0;break}}if(n[A--]=n[w--],--_===0){M=!0;break}P--}while(I>=DEFAULT_MIN_GALLOPING||C>=DEFAULT_MIN_GALLOPING);if(M)break;P<0&&(P=0),P+=2}if(r=P,r<1&&(r=1),S===1){for(A-=_,w-=_,$=A+1,E=w+1,x=_-1;x>=0;x--)n[$+x]=n[E+x];n[A]=l[T]}else{if(S===0)throw new Error;for(E=A-(S-1),x=0;x<S;x++)n[E+x]=l[x]}}return{mergeRuns:d,forceMergeRuns:v,pushRun:u}}function sort$2(n,t,r,a){r||(r=0),a||(a=n.length);var o=a-r;if(!(o<2)){var s=0;if(o<DEFAULT_MIN_MERGE){s=makeAscendingRun(n,r,a,t),binaryInsertionSort(n,r,a,r+s,t);return}var l=TimSort(n,t),u=minRunLength(o);do{if(s=makeAscendingRun(n,r,a,t),s<u){var d=o;d>u&&(d=u),binaryInsertionSort(n,r,r+d,r+s,t),s=d}l.pushRun(r,s),l.mergeRuns(),o-=s,r+=s}while(o!==0);l.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(n,t){return n.zlevel===t.zlevel?n.z===t.z?n.z2-t.z2:n.z-t.z:n.zlevel-t.zlevel}var Storage=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return n.prototype.traverse=function(t,r){for(var a=0;a<this._roots.length;a++)this._roots[a].traverse(t,r)},n.prototype.getDisplayList=function(t,r){r=r||!1;var a=this._displayList;return(t||!a.length)&&this.updateDisplayList(r),a},n.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,a=this._displayList,o=0,s=r.length;o<s;o++)this._updateAndAddDisplayable(r[o],null,t);a.length=this._displayListLen,sort$2(a,shapeCompareFunc)},n.prototype._updateAndAddDisplayable=function(t,r,a){if(!(t.ignore&&!a)){t.beforeUpdate(),t.update(),t.afterUpdate();var o=t.getClipPath();if(t.ignoreClip)r=null;else if(o){r?r=r.slice():r=[];for(var s=o,l=t;s;)s.parent=l,s.updateTransform(),r.push(s),l=s,s=s.getClipPath()}if(t.childrenRef){for(var u=t.childrenRef(),d=0;d<u.length;d++){var v=u[d];t.__dirty&&(v.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(v,r,a)}t.__dirty=0}else{var g=t;r&&r.length?g.__clipPaths=r:g.__clipPaths&&g.__clipPaths.length>0&&(g.__clipPaths=[]),isNaN(g.z)&&(logInvalidZError(),g.z=0),isNaN(g.z2)&&(logInvalidZError(),g.z2=0),isNaN(g.zlevel)&&(logInvalidZError(),g.zlevel=0),this._displayList[this._displayListLen++]=g}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,a);var c=t.getTextGuideLine();c&&this._updateAndAddDisplayable(c,r,a);var y=t.getTextContent();y&&this._updateAndAddDisplayable(y,r,a)}},n.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},n.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,a=t.length;r<a;r++)this.delRoot(t[r]);return}var o=indexOf(this._roots,t);o>=0&&this._roots.splice(o,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}();const Storage$1=Storage;var requestAnimationFrame;requestAnimationFrame=env$1.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};const requestAnimationFrame$1=requestAnimationFrame;var easingFuncs={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var t,r=.1,a=.4;return n===0?0:n===1?1:(!r||r<1?(r=1,t=a/4):t=a*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/a)))},elasticOut:function(n){var t,r=.1,a=.4;return n===0?0:n===1?1:(!r||r<1?(r=1,t=a/4):t=a*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*n)*Math.sin((n-t)*(2*Math.PI)/a)+1)},elasticInOut:function(n){var t,r=.1,a=.4;return n===0?0:n===1?1:(!r||r<1?(r=1,t=a/4):t=a*Math.asin(1/r)/(2*Math.PI),(n*=2)<1?-.5*(r*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/a)):r*Math.pow(2,-10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/a)*.5+1)},backIn:function(n){var t=1.70158;return n*n*((t+1)*n-t)},backOut:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},backInOut:function(n){var t=2.5949095;return(n*=2)<1?.5*(n*n*((t+1)*n-t)):.5*((n-=2)*n*((t+1)*n+t)+2)},bounceIn:function(n){return 1-easingFuncs.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?easingFuncs.bounceIn(n*2)*.5:easingFuncs.bounceOut(n*2-1)*.5+.5}};const easingFuncs$1=easingFuncs;var mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(n){return n>-EPSILON$4&&n<EPSILON$4}function isNotAroundZero$1(n){return n>EPSILON$4||n<-EPSILON$4}function cubicAt(n,t,r,a,o){var s=1-o;return s*s*(s*n+3*o*t)+o*o*(o*a+3*s*r)}function cubicDerivativeAt(n,t,r,a,o){var s=1-o;return 3*(((t-n)*s+2*(r-t)*o)*s+(a-r)*o*o)}function cubicRootAt(n,t,r,a,o,s){var l=a+3*(t-r)-n,u=3*(r-t*2+n),d=3*(t-n),v=n-o,g=u*u-3*l*d,f=u*d-9*l*v,c=d*d-3*u*v,y=0;if(isAroundZero$1(g)&&isAroundZero$1(f))if(isAroundZero$1(u))s[0]=0;else{var _=-d/u;_>=0&&_<=1&&(s[y++]=_)}else{var b=f*f-4*g*c;if(isAroundZero$1(b)){var S=f/g,_=-u/l+S,x=-S/2;_>=0&&_<=1&&(s[y++]=_),x>=0&&x<=1&&(s[y++]=x)}else if(b>0){var w=mathSqrt$3(b),T=g*u+1.5*l*(-f+w),A=g*u+1.5*l*(-f-w);T<0?T=-mathPow$2(-T,ONE_THIRD):T=mathPow$2(T,ONE_THIRD),A<0?A=-mathPow$2(-A,ONE_THIRD):A=mathPow$2(A,ONE_THIRD);var _=(-u-(T+A))/(3*l);_>=0&&_<=1&&(s[y++]=_)}else{var E=(2*g*u-3*l*f)/(2*mathSqrt$3(g*g*g)),$=Math.acos(E)/3,P=mathSqrt$3(g),I=Math.cos($),_=(-u-2*P*I)/(3*l),x=(-u+P*(I+THREE_SQRT*Math.sin($)))/(3*l),C=(-u+P*(I-THREE_SQRT*Math.sin($)))/(3*l);_>=0&&_<=1&&(s[y++]=_),x>=0&&x<=1&&(s[y++]=x),C>=0&&C<=1&&(s[y++]=C)}}return y}function cubicExtrema(n,t,r,a,o){var s=6*r-12*t+6*n,l=9*t+3*a-3*n-9*r,u=3*t-3*n,d=0;if(isAroundZero$1(l)){if(isNotAroundZero$1(s)){var v=-u/s;v>=0&&v<=1&&(o[d++]=v)}}else{var g=s*s-4*l*u;if(isAroundZero$1(g))o[0]=-s/(2*l);else if(g>0){var f=mathSqrt$3(g),v=(-s+f)/(2*l),c=(-s-f)/(2*l);v>=0&&v<=1&&(o[d++]=v),c>=0&&c<=1&&(o[d++]=c)}}return d}function cubicSubdivide(n,t,r,a,o,s){var l=(t-n)*o+n,u=(r-t)*o+t,d=(a-r)*o+r,v=(u-l)*o+l,g=(d-u)*o+u,f=(g-v)*o+v;s[0]=n,s[1]=l,s[2]=v,s[3]=f,s[4]=f,s[5]=g,s[6]=d,s[7]=a}function cubicProjectPoint(n,t,r,a,o,s,l,u,d,v,g){var f,c=.005,y=1/0,_,b,S,x;_v0[0]=d,_v0[1]=v;for(var w=0;w<1;w+=.05)_v1[0]=cubicAt(n,r,o,l,w),_v1[1]=cubicAt(t,a,s,u,w),S=distSquare(_v0,_v1),S<y&&(f=w,y=S);y=1/0;for(var T=0;T<32&&!(c<EPSILON_NUMERIC);T++)_=f-c,b=f+c,_v1[0]=cubicAt(n,r,o,l,_),_v1[1]=cubicAt(t,a,s,u,_),S=distSquare(_v1,_v0),_>=0&&S<y?(f=_,y=S):(_v2[0]=cubicAt(n,r,o,l,b),_v2[1]=cubicAt(t,a,s,u,b),x=distSquare(_v2,_v0),b<=1&&x<y?(f=b,y=x):c*=.5);return g&&(g[0]=cubicAt(n,r,o,l,f),g[1]=cubicAt(t,a,s,u,f)),mathSqrt$3(y)}function cubicLength(n,t,r,a,o,s,l,u,d){for(var v=n,g=t,f=0,c=1/d,y=1;y<=d;y++){var _=y*c,b=cubicAt(n,r,o,l,_),S=cubicAt(t,a,s,u,_),x=b-v,w=S-g;f+=Math.sqrt(x*x+w*w),v=b,g=S}return f}function quadraticAt$1(n,t,r,a){var o=1-a;return o*(o*n+2*a*t)+a*a*r}function quadraticDerivativeAt(n,t,r,a){return 2*((1-a)*(t-n)+a*(r-t))}function quadraticRootAt(n,t,r,a,o){var s=n-2*t+r,l=2*(t-n),u=n-a,d=0;if(isAroundZero$1(s)){if(isNotAroundZero$1(l)){var v=-u/l;v>=0&&v<=1&&(o[d++]=v)}}else{var g=l*l-4*s*u;if(isAroundZero$1(g)){var v=-l/(2*s);v>=0&&v<=1&&(o[d++]=v)}else if(g>0){var f=mathSqrt$3(g),v=(-l+f)/(2*s),c=(-l-f)/(2*s);v>=0&&v<=1&&(o[d++]=v),c>=0&&c<=1&&(o[d++]=c)}}return d}function quadraticExtremum(n,t,r){var a=n+r-2*t;return a===0?.5:(n-t)/a}function quadraticSubdivide(n,t,r,a,o){var s=(t-n)*a+n,l=(r-t)*a+t,u=(l-s)*a+s;o[0]=n,o[1]=s,o[2]=u,o[3]=u,o[4]=l,o[5]=r}function quadraticProjectPoint(n,t,r,a,o,s,l,u,d){var v,g=.005,f=1/0;_v0[0]=l,_v0[1]=u;for(var c=0;c<1;c+=.05){_v1[0]=quadraticAt$1(n,r,o,c),_v1[1]=quadraticAt$1(t,a,s,c);var y=distSquare(_v0,_v1);y<f&&(v=c,f=y)}f=1/0;for(var _=0;_<32&&!(g<EPSILON_NUMERIC);_++){var b=v-g,S=v+g;_v1[0]=quadraticAt$1(n,r,o,b),_v1[1]=quadraticAt$1(t,a,s,b);var y=distSquare(_v1,_v0);if(b>=0&&y<f)v=b,f=y;else{_v2[0]=quadraticAt$1(n,r,o,S),_v2[1]=quadraticAt$1(t,a,s,S);var x=distSquare(_v2,_v0);S<=1&&x<f?(v=S,f=x):g*=.5}}return d&&(d[0]=quadraticAt$1(n,r,o,v),d[1]=quadraticAt$1(t,a,s,v)),mathSqrt$3(f)}function quadraticLength(n,t,r,a,o,s,l){for(var u=n,d=t,v=0,g=1/l,f=1;f<=l;f++){var c=f*g,y=quadraticAt$1(n,r,o,c),_=quadraticAt$1(t,a,s,c),b=y-u,S=_-d;v+=Math.sqrt(b*b+S*S),u=y,d=_}return v}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(n){var t=n&&regexp.exec(n);if(t){var r=t[1].split(","),a=+trim$1(r[0]),o=+trim$1(r[1]),s=+trim$1(r[2]),l=+trim$1(r[3]);if(isNaN(a+o+s+l))return;var u=[];return function(d){return d<=0?0:d>=1?1:cubicRootAt(0,a,s,1,d,u)&&cubicAt(0,o,l,1,u[0])}}}var Clip=function(){function n(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||noop,this.ondestroy=t.ondestroy||noop,this.onrestart=t.onrestart||noop,t.easing&&this.setEasing(t.easing)}return n.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var a=this._life,o=t-this._startTime-this._pausedTime,s=o/a;s<0&&(s=0),s=Math.min(s,1);var l=this.easingFunc,u=l?l(s):s;if(this.onframe(u),s===1)if(this.loop){var d=o%a;this._startTime=t-d,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(t){this.easing=t,this.easingFunc=isFunction(t)?t:easingFuncs$1[t]||createCubicEasingFunc(t)},n}();const Clip$1=Clip;var Entry=function(){function n(t){this.value=t}return n}(),LinkedList=function(){function n(){this._len=0}return n.prototype.insert=function(t){var r=new Entry(t);return this.insertEntry(r),r},n.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},n.prototype.remove=function(t){var r=t.prev,a=t.next;r?r.next=a:this.head=a,a?a.prev=r:this.tail=r,t.next=t.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),LRU=function(){function n(t){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=t}return n.prototype.put=function(t,r){var a=this._list,o=this._map,s=null;if(o[t]==null){var l=a.len(),u=this._lastRemovedEntry;if(l>=this._maxSize&&l>0){var d=a.head;a.remove(d),delete o[d.key],s=d.value,this._lastRemovedEntry=d}u?u.value=r:u=new Entry(r),u.key=t,a.insertEntry(u),o[t]=u}return s},n.prototype.get=function(t){var r=this._map[t],a=this._list;if(r!=null)return r!==a.tail&&(a.remove(r),a.insertEntry(r)),r.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}();const LRU$1=LRU;var kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(n){return n=Math.round(n),n<0?0:n>255?255:n}function clampCssAngle(n){return n=Math.round(n),n<0?0:n>360?360:n}function clampCssFloat(n){return n<0?0:n>1?1:n}function parseCssInt(n){var t=n;return t.length&&t.charAt(t.length-1)==="%"?clampCssByte(parseFloat(t)/100*255):clampCssByte(parseInt(t,10))}function parseCssFloat(n){var t=n;return t.length&&t.charAt(t.length-1)==="%"?clampCssFloat(parseFloat(t)/100):clampCssFloat(parseFloat(t))}function cssHueToRgb(n,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?n+(t-n)*r*6:r*2<1?t:r*3<2?n+(t-n)*(2/3-r)*6:n}function lerpNumber(n,t,r){return n+(t-n)*r}function setRgba(n,t,r,a,o){return n[0]=t,n[1]=r,n[2]=a,n[3]=o,n}function copyRgba(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}var colorCache=new LRU$1(20),lastRemovedArr=null;function putToCache(n,t){lastRemovedArr&&copyRgba(lastRemovedArr,t),lastRemovedArr=colorCache.put(n,lastRemovedArr||t.slice())}function parse(n,t){if(n){t=t||[];var r=colorCache.get(n);if(r)return copyRgba(t,r);n=n+"";var a=n.replace(/ /g,"").toLowerCase();if(a in kCSSColorTable)return copyRgba(t,kCSSColorTable[a]),putToCache(n,t),t;var o=a.length;if(a.charAt(0)==="#"){if(o===4||o===5){var s=parseInt(a.slice(1,4),16);if(!(s>=0&&s<=4095)){setRgba(t,0,0,0,1);return}return setRgba(t,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,o===5?parseInt(a.slice(4),16)/15:1),putToCache(n,t),t}else if(o===7||o===9){var s=parseInt(a.slice(1,7),16);if(!(s>=0&&s<=16777215)){setRgba(t,0,0,0,1);return}return setRgba(t,(s&16711680)>>16,(s&65280)>>8,s&255,o===9?parseInt(a.slice(7),16)/255:1),putToCache(n,t),t}return}var l=a.indexOf("("),u=a.indexOf(")");if(l!==-1&&u+1===o){var d=a.substr(0,l),v=a.substr(l+1,u-(l+1)).split(","),g=1;switch(d){case"rgba":if(v.length!==4)return v.length===3?setRgba(t,+v[0],+v[1],+v[2],1):setRgba(t,0,0,0,1);g=parseCssFloat(v.pop());case"rgb":if(v.length>=3)return setRgba(t,parseCssInt(v[0]),parseCssInt(v[1]),parseCssInt(v[2]),v.length===3?g:parseCssFloat(v[3])),putToCache(n,t),t;setRgba(t,0,0,0,1);return;case"hsla":if(v.length!==4){setRgba(t,0,0,0,1);return}return v[3]=parseCssFloat(v[3]),hsla2rgba(v,t),putToCache(n,t),t;case"hsl":if(v.length!==3){setRgba(t,0,0,0,1);return}return hsla2rgba(v,t),putToCache(n,t),t;default:return}}setRgba(t,0,0,0,1)}}function hsla2rgba(n,t){var r=(parseFloat(n[0])%360+360)%360/360,a=parseCssFloat(n[1]),o=parseCssFloat(n[2]),s=o<=.5?o*(a+1):o+a-o*a,l=o*2-s;return t=t||[],setRgba(t,clampCssByte(cssHueToRgb(l,s,r+1/3)*255),clampCssByte(cssHueToRgb(l,s,r)*255),clampCssByte(cssHueToRgb(l,s,r-1/3)*255),1),n.length===4&&(t[3]=n[3]),t}function rgba2hsla(n){if(n){var t=n[0]/255,r=n[1]/255,a=n[2]/255,o=Math.min(t,r,a),s=Math.max(t,r,a),l=s-o,u=(s+o)/2,d,v;if(l===0)d=0,v=0;else{u<.5?v=l/(s+o):v=l/(2-s-o);var g=((s-t)/6+l/2)/l,f=((s-r)/6+l/2)/l,c=((s-a)/6+l/2)/l;t===s?d=c-f:r===s?d=1/3+g-c:a===s&&(d=2/3+f-g),d<0&&(d+=1),d>1&&(d-=1)}var y=[d*360,v,u];return n[3]!=null&&y.push(n[3]),y}}function lift(n,t){var r=parse(n);if(r){for(var a=0;a<3;a++)t<0?r[a]=r[a]*(1-t)|0:r[a]=(255-r[a])*t+r[a]|0,r[a]>255?r[a]=255:r[a]<0&&(r[a]=0);return stringify(r,r.length===4?"rgba":"rgb")}}function fastLerp(n,t,r){if(!(!(t&&t.length)||!(n>=0&&n<=1))){r=r||[];var a=n*(t.length-1),o=Math.floor(a),s=Math.ceil(a),l=t[o],u=t[s],d=a-o;return r[0]=clampCssByte(lerpNumber(l[0],u[0],d)),r[1]=clampCssByte(lerpNumber(l[1],u[1],d)),r[2]=clampCssByte(lerpNumber(l[2],u[2],d)),r[3]=clampCssFloat(lerpNumber(l[3],u[3],d)),r}}function lerp(n,t,r){if(!(!(t&&t.length)||!(n>=0&&n<=1))){var a=n*(t.length-1),o=Math.floor(a),s=Math.ceil(a),l=parse(t[o]),u=parse(t[s]),d=a-o,v=stringify([clampCssByte(lerpNumber(l[0],u[0],d)),clampCssByte(lerpNumber(l[1],u[1],d)),clampCssByte(lerpNumber(l[2],u[2],d)),clampCssFloat(lerpNumber(l[3],u[3],d))],"rgba");return r?{color:v,leftIndex:o,rightIndex:s,value:a}:v}}function modifyHSL(n,t,r,a){var o=parse(n);if(n)return o=rgba2hsla(o),t!=null&&(o[0]=clampCssAngle(t)),r!=null&&(o[1]=parseCssFloat(r)),a!=null&&(o[2]=parseCssFloat(a)),stringify(hsla2rgba(o),"rgba")}function modifyAlpha(n,t){var r=parse(n);if(r&&t!=null)return r[3]=clampCssFloat(t),stringify(r,"rgba")}function stringify(n,t){if(!(!n||!n.length)){var r=n[0]+","+n[1]+","+n[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+n[3]),t+"("+r+")"}}function lum(n,t){var r=parse(n);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var mathRound$1=Math.round;function normalizeColor(n){var t;if(!n||n==="transparent")n="none";else if(typeof n=="string"&&n.indexOf("rgba")>-1){var r=parse(n);r&&(n="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:n,opacity:t??1}}var EPSILON$3=1e-4;function isAroundZero(n){return n<EPSILON$3&&n>-EPSILON$3}function round3(n){return mathRound$1(n*1e3)/1e3}function round4(n){return mathRound$1(n*1e4)/1e4}function getMatrixStr(n){return"matrix("+round3(n[0])+","+round3(n[1])+","+round3(n[2])+","+round3(n[3])+","+round4(n[4])+","+round4(n[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(n,t,r){return r==="top"?n+=t/2:r==="bottom"&&(n-=t/2),n}function hasShadow(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)}function getShadowKey(n){var t=n.style,r=n.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function isImagePattern(n){return n&&!!n.image}function isSVGPattern(n){return n&&!!n.svgElement}function isPattern(n){return isImagePattern(n)||isSVGPattern(n)}function isLinearGradient(n){return n.type==="linear"}function isRadialGradient(n){return n.type==="radial"}function isGradient(n){return n&&(n.type==="linear"||n.type==="radial")}function getIdURL(n){return"url(#"+n+")"}function getPathPrecision(n){var t=n.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function getSRTTransformString(n){var t=n.x||0,r=n.y||0,a=(n.rotation||0)*RADIAN_TO_DEGREE,o=retrieve2(n.scaleX,1),s=retrieve2(n.scaleY,1),l=n.skewX||0,u=n.skewY||0,d=[];return(t||r)&&d.push("translate("+t+"px,"+r+"px)"),a&&d.push("rotate("+a+")"),(o!==1||s!==1)&&d.push("scale("+o+","+s+")"),(l||u)&&d.push("skew("+mathRound$1(l*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(u*RADIAN_TO_DEGREE)+"deg)"),d.join(" ")}var encodeBase64=function(){return env$1.hasGlobalWindow&&isFunction(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(n,t,r){return(t-n)*r+n}function interpolate1DArray(n,t,r,a){for(var o=t.length,s=0;s<o;s++)n[s]=interpolateNumber$1(t[s],r[s],a);return n}function interpolate2DArray(n,t,r,a){for(var o=t.length,s=o&&t[0].length,l=0;l<o;l++){n[l]||(n[l]=[]);for(var u=0;u<s;u++)n[l][u]=interpolateNumber$1(t[l][u],r[l][u],a)}return n}function add1DArray(n,t,r,a){for(var o=t.length,s=0;s<o;s++)n[s]=t[s]+r[s]*a;return n}function add2DArray(n,t,r,a){for(var o=t.length,s=o&&t[0].length,l=0;l<o;l++){n[l]||(n[l]=[]);for(var u=0;u<s;u++)n[l][u]=t[l][u]+r[l][u]*a}return n}function fillColorStops(n,t){for(var r=n.length,a=t.length,o=r>a?t:n,s=Math.min(r,a),l=o[s-1]||{color:[0,0,0,0],offset:0},u=s;u<Math.max(r,a);u++)o.push({offset:l.offset,color:l.color.slice()})}function fillArray(n,t,r){var a=n,o=t;if(!(!a.push||!o.push)){var s=a.length,l=o.length;if(s!==l){var u=s>l;if(u)a.length=l;else for(var d=s;d<l;d++)a.push(r===1?o[d]:arraySlice.call(o[d]))}for(var v=a[0]&&a[0].length,d=0;d<a.length;d++)if(r===1)isNaN(a[d])&&(a[d]=o[d]);else for(var g=0;g<v;g++)isNaN(a[d][g])&&(a[d][g]=o[d][g])}}function cloneValue(n){if(isArrayLike(n)){var t=n.length;if(isArrayLike(n[0])){for(var r=[],a=0;a<t;a++)r.push(arraySlice.call(n[a]));return r}return arraySlice.call(n)}return n}function rgba2String(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function guessArrayDim(n){return isArrayLike(n&&n[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(n){return n===VALUE_TYPE_LINEAR_GRADIENT||n===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(n){return n===VALUE_TYPE_1D_ARRAY||n===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function n(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(t,r,a){this._needsSort=!0;var o=this.keyframes,s=o.length,l=!1,u=VALUE_TYPE_UNKOWN,d=r;if(isArrayLike(r)){var v=guessArrayDim(r);u=v,(v===1&&!isNumber(r[0])||v===2&&!isNumber(r[0][0]))&&(l=!0)}else if(isNumber(r)&&!eqNaN(r))u=VALUE_TYPE_NUMBER;else if(isString(r))if(!isNaN(+r))u=VALUE_TYPE_NUMBER;else{var g=parse(r);g&&(d=g,u=VALUE_TYPE_COLOR)}else if(isGradientObject(r)){var f=extend({},d);f.colorStops=map$1(r.colorStops,function(y){return{offset:y.offset,color:parse(y.color)}}),isLinearGradient(r)?u=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(r)&&(u=VALUE_TYPE_RADIAL_GRADIENT),d=f}s===0?this.valType=u:(u!==this.valType||u===VALUE_TYPE_UNKOWN)&&(l=!0),this.discrete=this.discrete||l;var c={time:t,value:d,rawValue:r,percent:0};return a&&(c.easing=a,c.easingFunc=isFunction(a)?a:easingFuncs$1[a]||createCubicEasingFunc(a)),o.push(c),c},n.prototype.prepare=function(t,r){var a=this.keyframes;this._needsSort&&a.sort(function(b,S){return b.time-S.time});for(var o=this.valType,s=a.length,l=a[s-1],u=this.discrete,d=isArrayValueType(o),v=isGradientValueType(o),g=0;g<s;g++){var f=a[g],c=f.value,y=l.value;f.percent=f.time/t,u||(d&&g!==s-1?fillArray(c,y,o):v&&fillColorStops(c.colorStops,y.colorStops))}if(!u&&o!==VALUE_TYPE_RADIAL_GRADIENT&&r&&this.needsAnimate()&&r.needsAnimate()&&o===r.valType&&!r._finished){this._additiveTrack=r;for(var _=a[0].value,g=0;g<s;g++)o===VALUE_TYPE_NUMBER?a[g].additiveValue=a[g].value-_:o===VALUE_TYPE_COLOR?a[g].additiveValue=add1DArray([],a[g].value,_,-1):isArrayValueType(o)&&(a[g].additiveValue=o===VALUE_TYPE_1D_ARRAY?add1DArray([],a[g].value,_,-1):add2DArray([],a[g].value,_,-1))}},n.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var a=this._additiveTrack!=null,o=a?"additiveValue":"value",s=this.valType,l=this.keyframes,u=l.length,d=this.propName,v=s===VALUE_TYPE_COLOR,g,f=this._lastFr,c=Math.min,y,_;if(u===1)y=_=l[0];else{if(r<0)g=0;else if(r<this._lastFrP){var b=c(f+1,u-1);for(g=b;g>=0&&!(l[g].percent<=r);g--);g=c(g,u-2)}else{for(g=f;g<u&&!(l[g].percent>r);g++);g=c(g-1,u-2)}_=l[g+1],y=l[g]}if(y&&_){this._lastFr=g,this._lastFrP=r;var S=_.percent-y.percent,x=S===0?1:c((r-y.percent)/S,1);_.easingFunc&&(x=_.easingFunc(x));var w=a?this._additiveValue:v?tmpRgba:t[d];if((isArrayValueType(s)||v)&&!w&&(w=this._additiveValue=[]),this.discrete)t[d]=x<1?y.rawValue:_.rawValue;else if(isArrayValueType(s))s===VALUE_TYPE_1D_ARRAY?interpolate1DArray(w,y[o],_[o],x):interpolate2DArray(w,y[o],_[o],x);else if(isGradientValueType(s)){var T=y[o],A=_[o],E=s===VALUE_TYPE_LINEAR_GRADIENT;t[d]={type:E?"linear":"radial",x:interpolateNumber$1(T.x,A.x,x),y:interpolateNumber$1(T.y,A.y,x),colorStops:map$1(T.colorStops,function(P,I){var C=A.colorStops[I];return{offset:interpolateNumber$1(P.offset,C.offset,x),color:rgba2String(interpolate1DArray([],P.color,C.color,x))}}),global:A.global},E?(t[d].x2=interpolateNumber$1(T.x2,A.x2,x),t[d].y2=interpolateNumber$1(T.y2,A.y2,x)):t[d].r=interpolateNumber$1(T.r,A.r,x)}else if(v)interpolate1DArray(w,y[o],_[o],x),a||(t[d]=rgba2String(w));else{var $=interpolateNumber$1(y[o],_[o],x);a?this._additiveValue=$:t[d]=$}a&&this._addToTarget(t)}}},n.prototype._addToTarget=function(t){var r=this.valType,a=this.propName,o=this._additiveValue;r===VALUE_TYPE_NUMBER?t[a]=t[a]+o:r===VALUE_TYPE_COLOR?(parse(t[a],tmpRgba),add1DArray(tmpRgba,tmpRgba,o,1),t[a]=rgba2String(tmpRgba)):r===VALUE_TYPE_1D_ARRAY?add1DArray(t[a],t[a],o,1):r===VALUE_TYPE_2D_ARRAY&&add2DArray(t[a],t[a],o,1)},n}(),Animator=function(){function n(t,r,a,o){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&o){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=o,this._allowDiscrete=a}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(t){this._target=t},n.prototype.when=function(t,r,a){return this.whenWithKeys(t,r,keys(r),a)},n.prototype.whenWithKeys=function(t,r,a,o){for(var s=this._tracks,l=0;l<a.length;l++){var u=a[l],d=s[u];if(!d){d=s[u]=new Track(u);var v=void 0,g=this._getAdditiveTrack(u);if(g){var f=g.keyframes,c=f[f.length-1];v=c&&c.value,g.valType===VALUE_TYPE_COLOR&&v&&(v=rgba2String(v))}else v=this._target[u];if(v==null)continue;t>0&&d.addKeyframe(0,cloneValue(v),o),this._trackKeys.push(u)}d.addKeyframe(t,cloneValue(r[u]),o)}return this._maxTime=Math.max(this._maxTime,t),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,a=0;a<r;a++)t[a].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var a=0;a<r.length;a++)r[a].call(this)},n.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,a=0;a<r.length;a++)t[r[a]].setFinished()},n.prototype._getAdditiveTrack=function(t){var r,a=this._additiveAnimators;if(a)for(var o=0;o<a.length;o++){var s=a[o].getTrack(t);s&&(r=s)}return r},n.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,a=[],o=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var l=this._trackKeys[s],u=this._tracks[l],d=this._getAdditiveTrack(l),v=u.keyframes,g=v.length;if(u.prepare(o,d),u.needsAnimate())if(!this._allowDiscrete&&u.discrete){var f=v[g-1];f&&(r._target[u.propName]=f.rawValue),u.setFinished()}else a.push(u)}if(a.length||this._force){var c=new Clip$1({life:o,loop:this._loop,delay:this._delay||0,onframe:function(y){r._started=2;var _=r._additiveAnimators;if(_){for(var b=!1,S=0;S<_.length;S++)if(_[S]._clip){b=!0;break}b||(r._additiveAnimators=null)}for(var S=0;S<a.length;S++)a[S].step(r._target,y);var x=r._onframeCbs;if(x)for(var S=0;S<x.length;S++)x[S](r._target,y)},ondestroy:function(){r._doneCallback()}});this._clip=c,this.animation&&this.animation.addClip(c),t&&c.setEasing(t)}else this._doneCallback();return this}},n.prototype.stop=function(t){if(this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},n.prototype.delay=function(t){return this._delay=t,this},n.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},n.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},n.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(t){return this._tracks[t]},n.prototype.getTracks=function(){var t=this;return map$1(this._trackKeys,function(r){return t._tracks[r]})},n.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var a=this._tracks,o=this._trackKeys,s=0;s<t.length;s++){var l=a[t[s]];l&&!l.isFinished()&&(r?l.step(this._target,1):this._started===1&&l.step(this._target,0),l.setFinished())}for(var u=!0,s=0;s<o.length;s++)if(!a[o[s]].isFinished()){u=!1;break}return u&&this._abortedCallback(),u},n.prototype.saveTo=function(t,r,a){if(t){r=r||this._trackKeys;for(var o=0;o<r.length;o++){var s=r[o],l=this._tracks[s];if(!(!l||l.isFinished())){var u=l.keyframes,d=u[a?0:u.length-1];d&&(t[s]=cloneValue(d.rawValue))}}}},n.prototype.__changeFinalValue=function(t,r){r=r||keys(t);for(var a=0;a<r.length;a++){var o=r[a],s=this._tracks[o];if(s){var l=s.keyframes;if(l.length>1){var u=l.pop();s.addKeyframe(u.time,t[o]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},n}();function getTime(){return new Date().getTime()}var Animation=function(n){__extends(t,n);function t(r){var a=n.call(this)||this;return a._running=!1,a._time=0,a._pausedTime=0,a._pauseStart=0,a._paused=!1,r=r||{},a.stage=r.stage||{},a}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var a=r.getClip();a&&this.addClip(a)},t.prototype.removeClip=function(r){if(r.animation){var a=r.prev,o=r.next;a?a.next=o:this._head=o,o?o.prev=a:this._tail=a,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var a=r.getClip();a&&this.removeClip(a),r.animation=null},t.prototype.update=function(r){for(var a=getTime()-this._pausedTime,o=a-this._time,s=this._head;s;){var l=s.next,u=s.step(a,o);u&&(s.ondestroy(),this.removeClip(s)),s=l}this._time=a,r||(this.trigger("frame",o),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function a(){r._running&&(requestAnimationFrame$1(a),!r._paused&&r.update())}requestAnimationFrame$1(a)},t.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var a=r.next;r.prev=r.next=r.animation=null,r=a}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,a){a=a||{},this.start();var o=new Animator(r,a.loop);return this.addAnimator(o),o},t}(Eventful$1);const Animation$1=Animation;var TOUCH_CLICK_DELAY=300,globalEventSupported=env$1.domSupported,localNativeListenerNames=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},a=map$1(n,function(o){var s=o.replace("mouse","pointer");return r.hasOwnProperty(s)?s:o});return{mouse:n,touch:t,pointer:a}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(n){var t=n.pointerType;return t==="pen"||t==="touch"}function setTouchTimer(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function markTouch(n){n&&(n.zrByTouch=!0)}function normalizeGlobalEvent(n,t){return normalizeEvent(n.dom,new FakeGlobalEvent(n,t),!0)}function isLocalEl(n,t){for(var r=t,a=!1;r&&r.nodeType!==9&&!(a=r.domBelongToZr||r!==t&&r===n.painterRoot);)r=r.parentNode;return a}var FakeGlobalEvent=function(){function n(t,r){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return n}(),localDOMHandlers={mousedown:function(n){n=normalizeEvent(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=normalizeEvent(this.dom,n);var t=this.__mayPointerCapture;t&&(n.zrX!==t[0]||n.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=normalizeEvent(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=normalizeEvent(this.dom,n);var t=n.toElement||n.relatedTarget;isLocalEl(this,t)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){wheelEventSupported=!0,n=normalizeEvent(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){wheelEventSupported||(n=normalizeEvent(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),localDOMHandlers.mousemove.call(this,n),localDOMHandlers.mousedown.call(this,n)},touchmove:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.handler.processGesture(n,"change"),localDOMHandlers.mousemove.call(this,n)},touchend:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.handler.processGesture(n,"end"),localDOMHandlers.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,n)},pointerdown:function(n){localDOMHandlers.mousedown.call(this,n)},pointermove:function(n){isPointerFromTouch(n)||localDOMHandlers.mousemove.call(this,n)},pointerup:function(n){localDOMHandlers.mouseup.call(this,n)},pointerout:function(n){isPointerFromTouch(n)||localDOMHandlers.mouseout.call(this,n)}};each$f(["click","dblclick","contextmenu"],function(n){localDOMHandlers[n]=function(t){t=normalizeEvent(this.dom,t),this.trigger(n,t)}});var globalDOMHandlers={pointermove:function(n){isPointerFromTouch(n)||globalDOMHandlers.mousemove.call(this,n)},pointerup:function(n){globalDOMHandlers.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),t&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function mountLocalDOMEventListeners(n,t){var r=t.domHandlers;env$1.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(a){mountSingleDOMEventListener(t,a,function(o){r[a].call(n,o)})}):(env$1.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(a){mountSingleDOMEventListener(t,a,function(o){r[a].call(n,o),setTouchTimer(t)})}),each$f(localNativeListenerNames.mouse,function(a){mountSingleDOMEventListener(t,a,function(o){o=getNativeEvent(o),t.touching||r[a].call(n,o)})}))}function mountGlobalDOMEventListeners(n,t){env$1.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,r):env$1.touchEventsSupported||each$f(globalNativeListenerNames.mouse,r);function r(a){function o(s){s=getNativeEvent(s),isLocalEl(n,s.target)||(s=normalizeGlobalEvent(n,s),t.domHandlers[a].call(n,s))}mountSingleDOMEventListener(t,a,o,{capture:!0})}}function mountSingleDOMEventListener(n,t,r,a){n.mounted[t]=r,n.listenerOpts[t]=a,addEventListener(n.domTarget,t,r,a)}function unmountDOMEventListeners(n){var t=n.mounted;for(var r in t)t.hasOwnProperty(r)&&removeEventListener(n.domTarget,r,t[r],n.listenerOpts[r]);n.mounted={}}var DOMHandlerScope=function(){function n(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return n}(),HandlerDomProxy=function(n){__extends(t,n);function t(r,a){var o=n.call(this)||this;return o.__pointerCapturing=!1,o.dom=r,o.painterRoot=a,o._localHandlerScope=new DOMHandlerScope(r,localDOMHandlers),globalEventSupported&&(o._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(o,o._localHandlerScope),o}return t.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var a=this._globalHandlerScope;r?mountGlobalDOMEventListeners(this,a):unmountDOMEventListeners(a)}},t}(Eventful$1);const HandlerProxy=HandlerDomProxy;var dpr=1;env$1.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(n){return n>EPSILON$2||n<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function n(){}return n.prototype.getLocalTransform=function(t){return n.getLocalTransform(this,t)},n.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},n.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},n.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},n.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},n.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},n.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),a=this.transform;if(!(r||t)){a&&mIdentity(a);return}a=a||create$1(),r?this.getLocalTransform(a):mIdentity(a),t&&(r?mul(a,t,a):copy(a,t)),this.transform=a,this._resolveGlobalScaleRatio(a)},n.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(scaleTmp);var a=scaleTmp[0]<0?-1:1,o=scaleTmp[1]<0?-1:1,s=((scaleTmp[0]-a)*r+a)/scaleTmp[0]||0,l=((scaleTmp[1]-o)*r+o)/scaleTmp[1]||0;t[0]*=s,t[1]*=s,t[2]*=l,t[3]*=l}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,t)},n.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},n.prototype.setLocalTransform=function(t){if(t){var r=t[0]*t[0]+t[1]*t[1],a=t[2]*t[2]+t[3]*t[3],o=Math.atan2(t[1],t[0]),s=Math.PI/2+o-Math.atan2(t[3],t[2]);a=Math.sqrt(a)*Math.cos(s),r=Math.sqrt(r),this.skewX=s,this.skewY=0,this.rotation=-o,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=a,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(mul(tmpTransform,t.invTransform,r),r=tmpTransform);var a=this.originX,o=this.originY;(a||o)&&(originTransform[4]=a,originTransform[5]=o,mul(tmpTransform,r,originTransform),tmpTransform[4]-=a,tmpTransform[5]-=o,r=tmpTransform),this.setLocalTransform(r)}},n.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},n.prototype.transformCoordToLocal=function(t,r){var a=[t,r],o=this.invTransform;return o&&applyTransform$1(a,a,o),a},n.prototype.transformCoordToGlobal=function(t,r){var a=[t,r],o=this.transform;return o&&applyTransform$1(a,a,o),a},n.prototype.getLineScale=function(){var t=this.transform;return t&&abs(t[0]-1)>1e-10&&abs(t[3]-1)>1e-10?Math.sqrt(abs(t[0]*t[3]-t[2]*t[1])):1},n.prototype.copyTransform=function(t){copyTransform(this,t)},n.getLocalTransform=function(t,r){r=r||[];var a=t.originX||0,o=t.originY||0,s=t.scaleX,l=t.scaleY,u=t.anchorX,d=t.anchorY,v=t.rotation||0,g=t.x,f=t.y,c=t.skewX?Math.tan(t.skewX):0,y=t.skewY?Math.tan(-t.skewY):0;if(a||o||u||d){var _=a+u,b=o+d;r[4]=-_*s-c*b*l,r[5]=-b*l-y*_*s}else r[4]=r[5]=0;return r[0]=s,r[3]=l,r[1]=y*s,r[2]=c*l,v&&rotate(r,r,v),r[4]+=a+g,r[5]+=o+f,r},n.initDefaultProps=function(){var t=n.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),n}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(n,t){for(var r=0;r<TRANSFORMABLE_PROPS.length;r++){var a=TRANSFORMABLE_PROPS[r];n[a]=t[a]}}const Transformable$1=Transformable;var textWidthCache={};function getWidth(n,t){t=t||DEFAULT_FONT;var r=textWidthCache[t];r||(r=textWidthCache[t]=new LRU$1(500));var a=r.get(n);return a==null&&(a=platformApi.measureText(n,t).width,r.put(n,a)),a}function innerGetBoundingRect(n,t,r,a){var o=getWidth(n,t),s=getLineHeight(t),l=adjustTextX(0,o,r),u=adjustTextY(0,s,a),d=new BoundingRect$1(l,u,o,s);return d}function getBoundingRect(n,t,r,a){var o=((n||"")+"").split(`
`),s=o.length;if(s===1)return innerGetBoundingRect(o[0],t,r,a);for(var l=new BoundingRect$1(0,0,0,0),u=0;u<o.length;u++){var d=innerGetBoundingRect(o[u],t,r,a);u===0?l.copy(d):l.union(d)}return l}function adjustTextX(n,t,r){return r==="right"?n-=t:r==="center"&&(n-=t/2),n}function adjustTextY(n,t,r){return r==="middle"?n-=t/2:r==="bottom"&&(n-=t),n}function getLineHeight(n){return getWidth("国",n)}function parsePercent$1(n,t){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*t:parseFloat(n):n}function calculateTextPosition(n,t,r){var a=t.position||"inside",o=t.distance!=null?t.distance:5,s=r.height,l=r.width,u=s/2,d=r.x,v=r.y,g="left",f="top";if(a instanceof Array)d+=parsePercent$1(a[0],r.width),v+=parsePercent$1(a[1],r.height),g=null,f=null;else switch(a){case"left":d-=o,v+=u,g="right",f="middle";break;case"right":d+=o+l,v+=u,f="middle";break;case"top":d+=l/2,v-=o,g="center",f="bottom";break;case"bottom":d+=l/2,v+=s+o,g="center";break;case"inside":d+=l/2,v+=u,g="center",f="middle";break;case"insideLeft":d+=o,v+=u,f="middle";break;case"insideRight":d+=l-o,v+=u,g="right",f="middle";break;case"insideTop":d+=l/2,v+=o,g="center";break;case"insideBottom":d+=l/2,v+=s-o,g="center",f="bottom";break;case"insideTopLeft":d+=o,v+=o;break;case"insideTopRight":d+=l-o,v+=o,g="right";break;case"insideBottomLeft":d+=o,v+=s-o,f="bottom";break;case"insideBottomRight":d+=l-o,v+=s-o,g="right",f="bottom";break}return n=n||{},n.x=d,n.y=v,n.align=g,n.verticalAlign=f,n}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(n,t){return n[t]=!0,n},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect$1(0,0,0,0),Element$1=function(){function n(t){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return n.prototype._init=function(t){this.attr(t)},n.prototype.drift=function(t,r,a){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var o=this.transform;o||(o=this.transform=[1,0,0,1,0,0]),o[4]+=t,o[5]+=r,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var a=this.textConfig,o=a.local,s=r.innerTransformable,l=void 0,u=void 0,d=!1;s.parent=o?this:null;var v=!1;if(s.copyTransform(r),a.position!=null){var g=tmpBoundingRect;a.layoutRect?g.copy(a.layoutRect):g.copy(this.getBoundingRect()),o||g.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,a,g):calculateTextPosition(tmpTextPosCalcRes,a,g),s.x=tmpTextPosCalcRes.x,s.y=tmpTextPosCalcRes.y,l=tmpTextPosCalcRes.align,u=tmpTextPosCalcRes.verticalAlign;var f=a.origin;if(f&&a.rotation!=null){var c=void 0,y=void 0;f==="center"?(c=g.width*.5,y=g.height*.5):(c=parsePercent$1(f[0],g.width),y=parsePercent$1(f[1],g.height)),v=!0,s.originX=-s.x+c+(o?0:g.x),s.originY=-s.y+y+(o?0:g.y)}}a.rotation!=null&&(s.rotation=a.rotation);var _=a.offset;_&&(s.x+=_[0],s.y+=_[1],v||(s.originX=-_[0],s.originY=-_[1]));var b=a.inside==null?typeof a.position=="string"&&a.position.indexOf("inside")>=0:a.inside,S=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),x=void 0,w=void 0,T=void 0;b&&this.canBeInsideText()?(x=a.insideFill,w=a.insideStroke,(x==null||x==="auto")&&(x=this.getInsideTextFill()),(w==null||w==="auto")&&(w=this.getInsideTextStroke(x),T=!0)):(x=a.outsideFill,w=a.outsideStroke,(x==null||x==="auto")&&(x=this.getOutsideFill()),(w==null||w==="auto")&&(w=this.getOutsideStroke(x),T=!0)),x=x||"#000",(x!==S.fill||w!==S.stroke||T!==S.autoStroke||l!==S.align||u!==S.verticalAlign)&&(d=!0,S.fill=x,S.stroke=w,S.autoStroke=T,S.align=l,S.verticalAlign=u,r.setDefaultTextStyle(S)),r.__dirty|=REDRAW_BIT,d&&r.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(t){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},n.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),a=typeof r=="string"&&parse(r);a||(a=[255,255,255,1]);for(var o=a[3],s=this.__zr.isDarkMode(),l=0;l<3;l++)a[l]=a[l]*o+(s?0:255)*(1-o);return a[3]=1,stringify(a,"rgba")},n.prototype.traverse=function(t,r){},n.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},extend(this.extra,r)):this[t]=r},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(isObject$3(t))for(var a=t,o=keys(a),s=0;s<o.length;s++){var l=o[s];this.attrKV(l,t[l])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,a=0;a<this.animators.length;a++){var o=this.animators[a],s=o.__fromStateTransition;if(!(o.getLoop()||s&&s!==PRESERVED_NORMAL_STATE)){var l=o.targetName,u=l?r[l]:r;o.saveTo(u)}}},n.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,PRIMARY_STATES_KEYS$1)},n.prototype._savePrimaryToNormal=function(t,r,a){for(var o=0;o<a.length;o++){var s=a[o];t[s]!=null&&!(s in r)&&(r[s]=this[s])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(t){return this.states[t]},n.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},n.prototype.clearStates=function(t){this.useState(PRESERVED_NORMAL_STATE,!1,t)},n.prototype.useState=function(t,r,a,o){var s=t===PRESERVED_NORMAL_STATE,l=this.hasState();if(!(!l&&s)){var u=this.currentStates,d=this.stateTransition;if(!(indexOf(u,t)>=0&&(r||u.length===1))){var v;if(this.stateProxy&&!s&&(v=this.stateProxy(t)),v||(v=this.states&&this.states[t]),!v&&!s){logError("State "+t+" not exists.");return}s||this.saveCurrentToNormalState(v);var g=!!(v&&v.hoverLayer||o);g&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,v,this._normalState,r,!a&&!this.__inHover&&d&&d.duration>0,d);var f=this._textContent,c=this._textGuide;return f&&f.useState(t,r,a,g),c&&c.useState(t,r,a,g),s?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!g&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),v}}},n.prototype.useStates=function(t,r,a){if(!t.length)this.clearStates();else{var o=[],s=this.currentStates,l=t.length,u=l===s.length;if(u){for(var d=0;d<l;d++)if(t[d]!==s[d]){u=!1;break}}if(u)return;for(var d=0;d<l;d++){var v=t[d],g=void 0;this.stateProxy&&(g=this.stateProxy(v,t)),g||(g=this.states[v]),g&&o.push(g)}var f=o[l-1],c=!!(f&&f.hoverLayer||a);c&&this._toggleHoverLayerFlag(!0);var y=this._mergeStates(o),_=this.stateTransition;this.saveCurrentToNormalState(y),this._applyStateObj(t.join(","),y,this._normalState,!1,!r&&!this.__inHover&&_&&_.duration>0,_);var b=this._textContent,S=this._textGuide;b&&b.useStates(t,r,c),S&&S.useStates(t,r,c),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},n.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},n.prototype.removeState=function(t){var r=indexOf(this.currentStates,t);if(r>=0){var a=this.currentStates.slice();a.splice(r,1),this.useStates(a)}},n.prototype.replaceState=function(t,r,a){var o=this.currentStates.slice(),s=indexOf(o,t),l=indexOf(o,r)>=0;s>=0?l?o.splice(s,1):o[s]=r:a&&!l&&o.push(r),this.useStates(o)},n.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},n.prototype._mergeStates=function(t){for(var r={},a,o=0;o<t.length;o++){var s=t[o];extend(r,s),s.textConfig&&(a=a||{},extend(a,s.textConfig))}return a&&(r.textConfig=a),r},n.prototype._applyStateObj=function(t,r,a,o,s,l){var u=!(r&&o);r&&r.textConfig?(this.textConfig=extend({},o?this.textConfig:a.textConfig),extend(this.textConfig,r.textConfig)):u&&a.textConfig&&(this.textConfig=a.textConfig);for(var d={},v=!1,g=0;g<PRIMARY_STATES_KEYS$1.length;g++){var f=PRIMARY_STATES_KEYS$1[g],c=s&&DEFAULT_ANIMATABLE_MAP[f];r&&r[f]!=null?c?(v=!0,d[f]=r[f]):this[f]=r[f]:u&&a[f]!=null&&(c?(v=!0,d[f]=a[f]):this[f]=a[f])}if(!s)for(var g=0;g<this.animators.length;g++){var y=this.animators[g],_=y.targetName;y.getLoop()||y.__changeFinalValue(_?(r||a)[_]:r||a)}v&&this._transitionState(t,d,l)},n.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},n.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},n.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Transformable$1,this._attachComponent(t),this._textContent=t,this.markRedraw())},n.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),extend(this.textConfig,t),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,a=this._textGuide;r&&(r.__inHover=t),a&&(a.__inHover=t)},n.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var a=0;a<r.length;a++)t.animation.addAnimator(r[a]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},n.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var a=0;a<r.length;a++)t.animation.removeAnimator(r[a]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},n.prototype.animate=function(t,r,a){var o=t?this[t]:this,s=new Animator(o,r,a);return t&&(s.targetName=t),this.addAnimator(s,t),s},n.prototype.addAnimator=function(t,r){var a=this.__zr,o=this;t.during(function(){o.updateDuringAnimation(r)}).done(function(){var s=o.animators,l=indexOf(s,t);l>=0&&s.splice(l,1)}),this.animators.push(t),a&&a.animation.addAnimator(t),a&&a.wakeUp()},n.prototype.updateDuringAnimation=function(t){this.markRedraw()},n.prototype.stopAnimation=function(t,r){for(var a=this.animators,o=a.length,s=[],l=0;l<o;l++){var u=a[l];!t||t===u.scope?u.stop(r):s.push(u)}return this.animators=s,this},n.prototype.animateTo=function(t,r,a){animateTo(this,t,r,a)},n.prototype.animateFrom=function(t,r,a){animateTo(this,t,r,a,!0)},n.prototype._transitionState=function(t,r,a,o){for(var s=animateTo(this,r,a,o),l=0;l<s.length;l++)s[l].__fromStateTransition=t},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var t=n.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=REDRAW_BIT;function r(a,o,s,l){Object.defineProperty(t,a,{get:function(){if(!this[o]){var d=this[o]=[];u(this,d)}return this[o]},set:function(d){this[s]=d[0],this[l]=d[1],this[o]=d,u(this,d)}});function u(d,v){Object.defineProperty(v,0,{get:function(){return d[s]},set:function(g){d[s]=g}}),Object.defineProperty(v,1,{get:function(){return d[l]},set:function(g){d[l]=g}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),n}();mixin(Element$1,Eventful$1);mixin(Element$1,Transformable$1);function animateTo(n,t,r,a,o){r=r||{};var s=[];animateToShallow(n,"",n,t,r,a,s,o);var l=s.length,u=!1,d=r.done,v=r.aborted,g=function(){u=!0,l--,l<=0&&(u?d&&d():v&&v())},f=function(){l--,l<=0&&(u?d&&d():v&&v())};l||d&&d(),s.length>0&&r.during&&s[0].during(function(_,b){r.during(b)});for(var c=0;c<s.length;c++){var y=s[c];g&&y.done(g),f&&y.aborted(f),r.force&&y.duration(r.duration),y.start(r.easing)}return s}function copyArrShallow(n,t,r){for(var a=0;a<r;a++)n[a]=t[a]}function is2DArray(n){return isArrayLike(n[0])}function copyValue(n,t,r){if(isArrayLike(t[r]))if(isArrayLike(n[r])||(n[r]=[]),isTypedArray(t[r])){var a=t[r].length;n[r].length!==a&&(n[r]=new t[r].constructor(a),copyArrShallow(n[r],t[r],a))}else{var o=t[r],s=n[r],l=o.length;if(is2DArray(o))for(var u=o[0].length,d=0;d<l;d++)s[d]?copyArrShallow(s[d],o[d],u):s[d]=Array.prototype.slice.call(o[d]);else copyArrShallow(s,o,l);s.length=o.length}else n[r]=t[r]}function isValueSame(n,t){return n===t||isArrayLike(n)&&isArrayLike(t)&&is1DArraySame(n,t)}function is1DArraySame(n,t){var r=n.length;if(r!==t.length)return!1;for(var a=0;a<r;a++)if(n[a]!==t[a])return!1;return!0}function animateToShallow(n,t,r,a,o,s,l,u){for(var d=keys(a),v=o.duration,g=o.delay,f=o.additive,c=o.setToFinal,y=!isObject$3(s),_=n.animators,b=[],S=0;S<d.length;S++){var x=d[S],w=a[x];if(w!=null&&r[x]!=null&&(y||s[x]))if(isObject$3(w)&&!isArrayLike(w)&&!isGradientObject(w)){if(t){u||(r[x]=w,n.updateDuringAnimation(t));continue}animateToShallow(n,x,r[x],w,o,s&&s[x],l,u)}else b.push(x);else u||(r[x]=w,n.updateDuringAnimation(t),b.push(x))}var T=b.length;if(!f&&T)for(var A=0;A<_.length;A++){var E=_[A];if(E.targetName===t){var $=E.stopTracks(b);if($){var P=indexOf(_,E);_.splice(P,1)}}}if(o.force||(b=filter(b,function(D){return!isValueSame(a[D],r[D])}),T=b.length),T>0||o.force&&!l.length){var I=void 0,C=void 0,M=void 0;if(u){C={},c&&(I={});for(var A=0;A<T;A++){var x=b[A];C[x]=r[x],c?I[x]=a[x]:r[x]=a[x]}}else if(c){M={};for(var A=0;A<T;A++){var x=b[A];M[x]=cloneValue(r[x]),copyValue(r,a,x)}}var E=new Animator(r,!1,!1,f?filter(_,function(R){return R.targetName===t}):null);E.targetName=t,o.scope&&(E.scope=o.scope),c&&I&&E.whenWithKeys(0,I,b),M&&E.whenWithKeys(0,M,b),E.whenWithKeys(v??500,u?C:a,b).delay(g||0),n.addAnimator(E,t),l.push(E)}}const Element$2=Element$1;var Group$3=function(n){__extends(t,n);function t(r){var a=n.call(this)||this;return a.isGroup=!0,a._children=[],a.attr(r),a}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var a=this._children,o=0;o<a.length;o++)if(a[o].name===r)return a[o]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,a){if(r&&r!==this&&r.parent!==this&&a&&a.parent===this){var o=this._children,s=o.indexOf(a);s>=0&&(o.splice(s,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,a){var o=indexOf(this._children,r);return o>=0&&this.replaceAt(a,o),this},t.prototype.replaceAt=function(r,a){var o=this._children,s=o[a];if(r&&r!==this&&r.parent!==this&&r!==s){o[a]=r,s.parent=null;var l=this.__zr;l&&s.removeSelfFromZr(l),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var a=this.__zr;a&&a!==r.__zr&&r.addSelfToZr(a),a&&a.refresh()},t.prototype.remove=function(r){var a=this.__zr,o=this._children,s=indexOf(o,r);return s<0?this:(o.splice(s,1),r.parent=null,a&&r.removeSelfFromZr(a),a&&a.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,a=this.__zr,o=0;o<r.length;o++){var s=r[o];a&&s.removeSelfFromZr(a),s.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,a){for(var o=this._children,s=0;s<o.length;s++){var l=o[s];r.call(a,l,s)}return this},t.prototype.traverse=function(r,a){for(var o=0;o<this._children.length;o++){var s=this._children[o],l=r.call(a,s);s.isGroup&&!l&&s.traverse(r,a)}return this},t.prototype.addSelfToZr=function(r){n.prototype.addSelfToZr.call(this,r);for(var a=0;a<this._children.length;a++){var o=this._children[a];o.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){n.prototype.removeSelfFromZr.call(this,r);for(var a=0;a<this._children.length;a++){var o=this._children[a];o.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var a=new BoundingRect$1(0,0,0,0),o=r||this._children,s=[],l=null,u=0;u<o.length;u++){var d=o[u];if(!(d.ignore||d.invisible)){var v=d.getBoundingRect(),g=d.getLocalTransform(s);g?(BoundingRect$1.applyTransform(a,v,g),l=l||a.clone(),l.union(a)):(l=l||v.clone(),l.union(v))}}return l||a},t}(Element$2);Group$3.prototype.type="group";const Group$4=Group$3;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(n){delete instances$1[n]}function isDarkMode(n){if(!n)return!1;if(typeof n=="string")return lum(n,1)<DARK_MODE_THRESHOLD;if(n.colorStops){for(var t=n.colorStops,r=0,a=t.length,o=0;o<a;o++)r+=lum(t[o].color,1);return r/=a,r<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function n(t,r,a){var o=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,a=a||{},this.dom=r,this.id=t;var s=new Storage$1,l=a.renderer||"canvas";painterCtors[l]||(l=keys(painterCtors)[0]),a.useDirtyRect=a.useDirtyRect==null?!1:a.useDirtyRect;var u=new painterCtors[l](r,s,a,t),d=a.ssr||u.ssrOnly;this.storage=s,this.painter=u;var v=!env$1.node&&!env$1.worker&&!d?new HandlerProxy(u.getViewportRoot(),u.root):null,g=a.useCoarsePointer,f=g==null||g==="auto"?env$1.touchEventsSupported:!!g,c=44,y;f&&(y=retrieve2(a.pointerSize,c)),this.handler=new Handler$1(s,u,v,u.root,y),this.animation=new Animation$1({stage:{update:d?null:function(){return o._flush(!0)}}}),d||this.animation.start()}return n.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},n.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},n.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=isDarkMode(t)},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(t){this._darkMode=t},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},n.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},n.prototype.flush=function(){this._flush(!1)},n.prototype._flush=function(t){var r,a=getTime();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var o=getTime();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:o-a})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},n.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},n.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},n.prototype.clearAnimation=function(){this.animation.clear()},n.prototype.getWidth=function(){return this.painter.getWidth()},n.prototype.getHeight=function(){return this.painter.getHeight()},n.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},n.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},n.prototype.on=function(t,r,a){return this.handler.on(t,r,a),this},n.prototype.off=function(t,r){this.handler.off(t,r)},n.prototype.trigger=function(t,r){this.handler.trigger(t,r)},n.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Group$4&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},n.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,delInstance(this.id)},n}();function init$2(n,t){var r=new ZRender(guid(),n,t);return instances$1[r.id]=r,r}function registerPainter(n,t){painterCtors[n]=t}var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(n){return n.replace(/^\s+|\s+$/g,"")}function linearMap$2(n,t,r,a){var o=t[0],s=t[1],l=r[0],u=r[1],d=s-o,v=u-l;if(d===0)return v===0?l:(l+u)/2;if(a)if(d>0){if(n<=o)return l;if(n>=s)return u}else{if(n>=o)return l;if(n<=s)return u}else{if(n===o)return l;if(n===s)return u}return(n-o)/d*v+l}function parsePercent(n,t){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return isString(n)?_trim(n).match(/%$/)?parseFloat(n)/100*t:parseFloat(n):n==null?NaN:+n}function round$3(n,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),ROUND_SUPPORTED_PRECISION_MAX),n=(+n).toFixed(t),r?n:+n}function asc$2(n){return n.sort(function(t,r){return t-r}),n}function getPrecision(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(n*t)/t===n)return r}return getPrecisionSafe(n)}function getPrecisionSafe(n){var t=n.toString().toLowerCase(),r=t.indexOf("e"),a=r>0?+t.slice(r+1):0,o=r>0?r:t.length,s=t.indexOf("."),l=s<0?0:o-1-s;return Math.max(0,l-a)}function getPixelPrecision(n,t){var r=Math.log,a=Math.LN10,o=Math.floor(r(n[1]-n[0])/a),s=Math.round(r(Math.abs(t[1]-t[0]))/a),l=Math.min(Math.max(-o+s,0),20);return isFinite(l)?l:20}function getPercentSeats(n,t){var r=reduce(n,function(y,_){return y+(isNaN(_)?0:_)},0);if(r===0)return[];for(var a=Math.pow(10,t),o=map$1(n,function(y){return(isNaN(y)?0:y)/r*a*100}),s=a*100,l=map$1(o,function(y){return Math.floor(y)}),u=reduce(l,function(y,_){return y+_},0),d=map$1(o,function(y,_){return y-l[_]});u<s;){for(var v=Number.NEGATIVE_INFINITY,g=null,f=0,c=d.length;f<c;++f)d[f]>v&&(v=d[f],g=f);++l[g],d[g]=0,++u}return map$1(l,function(y){return y/a})}function addSafe(n,t){var r=Math.max(getPrecision(n),getPrecision(t)),a=n+t;return r>ROUND_SUPPORTED_PRECISION_MAX?a:round$3(a,r)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(n){var t=Math.PI*2;return(n%t+t)%t}function isRadianAroundZero(n){return n>-RADIAN_EPSILON&&n<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(n){if(n instanceof Date)return n;if(isString(n)){var t=TIME_REG.exec(n);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function quantity(n){return Math.pow(10,quantityExponent(n))}function quantityExponent(n){if(n===0)return 0;var t=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,t)>=10&&t++,t}function nice(n,t){var r=quantityExponent(n),a=Math.pow(10,r),o=n/a,s;return t?o<1.5?s=1:o<2.5?s=2:o<4?s=3:o<7?s=5:s=10:o<1?s=1:o<2?s=2:o<3?s=3:o<5?s=5:s=10,n=s*a,r>=-20?+n.toFixed(r<0?-r:0):n}function quantile(n,t){var r=(n.length-1)*t+1,a=Math.floor(r),o=+n[a-1],s=r-a;return s?o+s*(n[a]-o):o}function reformIntervals(n){n.sort(function(d,v){return u(d,v,0)?-1:1});for(var t=-1/0,r=1,a=0;a<n.length;){for(var o=n[a].interval,s=n[a].close,l=0;l<2;l++)o[l]<=t&&(o[l]=t,s[l]=l?1:1-r),t=o[l],r=s[l];o[0]===o[1]&&s[0]*s[1]!==1?n.splice(a,1):a++}return n;function u(d,v,g){return d.interval[g]<v.interval[g]||d.interval[g]===v.interval[g]&&(d.close[g]-v.close[g]===(g?-1:1)||!g&&u(d,v,1))}}function numericToNumber(n){var t=parseFloat(n);return t==n&&(t!==0||!isString(n)||n.indexOf("x")<=0)?t:NaN}function isNumeric(n){return!isNaN(numericToNumber(n))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(n,t){return t===0?n:getGreatestCommonDividor(t,n%t)}function getLeastCommonMultiple(n,t){return n==null?t:t==null?n:n*t/getGreatestCommonDividor(n,t)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(n,t,r){if(hasConsole){if(r){if(storedLogs[t])return;storedLogs[t]=!0}console[n](ECHARTS_PREFIX+t)}}function warn(n,t){outputLog("warn",n,t)}function throwError(n){throw new Error(n)}function interpolateNumber(n,t,r){return(t-n)*r+n}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(n){return n instanceof Array?n:n==null?[]:[n]}function defaultEmphasis(n,t,r){if(n){n[t]=n[t]||{},n.emphasis=n.emphasis||{},n.emphasis[t]=n.emphasis[t]||{};for(var a=0,o=r.length;a<o;a++){var s=r[a];!n.emphasis[t].hasOwnProperty(s)&&n[t].hasOwnProperty(s)&&(n.emphasis[t][s]=n[t][s])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(n){return isObject$3(n)&&!isArray$1(n)&&!(n instanceof Date)?n.value:n}function isDataItemOption(n){return isObject$3(n)&&!(n instanceof Array)}function mappingToExists(n,t,r){var a=r==="normalMerge",o=r==="replaceMerge",s=r==="replaceAll";n=n||[],t=(t||[]).slice();var l=createHashMap();each$f(t,function(d,v){if(!isObject$3(d)){t[v]=null;return}});var u=prepareResult(n,l,r);return(a||o)&&mappingById(u,n,l,t),a&&mappingByName(u,t),a||o?mappingByIndex(u,t,o):s&&mappingInReplaceAllMode(u,t),makeIdAndName(u),u}function prepareResult(n,t,r){var a=[];if(r==="replaceAll")return a;for(var o=0;o<n.length;o++){var s=n[o];s&&s.id!=null&&t.set(s.id,o),a.push({existing:r==="replaceMerge"||isComponentIdInternal(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return a}function mappingById(n,t,r,a){each$f(a,function(o,s){if(!(!o||o.id==null)){var l=makeComparableKey(o.id),u=r.get(l);if(u!=null){var d=n[u];assert(!d.newOption,'Duplicated option on id "'+l+'".'),d.newOption=o,d.existing=t[u],a[s]=null}}})}function mappingByName(n,t){each$f(t,function(r,a){if(!(!r||r.name==null))for(var o=0;o<n.length;o++){var s=n[o].existing;if(!n[o].newOption&&s&&(s.id==null||r.id==null)&&!isComponentIdInternal(r)&&!isComponentIdInternal(s)&&keyExistAndEqual("name",s,r)){n[o].newOption=r,t[a]=null;return}}})}function mappingByIndex(n,t,r){each$f(t,function(a){if(a){for(var o,s=0;(o=n[s])&&(o.newOption||isComponentIdInternal(o.existing)||o.existing&&a.id!=null&&!keyExistAndEqual("id",a,o.existing));)s++;o?(o.newOption=a,o.brandNew=r):n.push({newOption:a,brandNew:r,existing:null,keyInfo:null}),s++}})}function mappingInReplaceAllMode(n,t){each$f(t,function(r){n.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(n){var t=createHashMap();each$f(n,function(r){var a=r.existing;a&&t.set(a.id,r)}),each$f(n,function(r){var a=r.newOption;assert(!a||a.id==null||!t.get(a.id)||t.get(a.id)===r,"id duplicates: "+(a&&a.id)),a&&a.id!=null&&t.set(a.id,r),!r.keyInfo&&(r.keyInfo={})}),each$f(n,function(r,a){var o=r.existing,s=r.newOption,l=r.keyInfo;if(isObject$3(s)){if(l.name=s.name!=null?makeComparableKey(s.name):o?o.name:DUMMY_COMPONENT_NAME_PREFIX+a,o)l.id=makeComparableKey(o.id);else if(s.id!=null)l.id=makeComparableKey(s.id);else{var u=0;do l.id="\0"+l.name+"\0"+u++;while(t.get(l.id))}t.set(l.id,r)}})}function keyExistAndEqual(n,t,r){var a=convertOptionIdName(t[n],null),o=convertOptionIdName(r[n],null);return a!=null&&o!=null&&a===o}function makeComparableKey(n){return convertOptionIdName(n,"")}function convertOptionIdName(n,t){return n==null?t:isString(n)?n:isNumber(n)||isStringSafe(n)?n+"":t}function isNameSpecified(n){var t=n.name;return!!(t&&t.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(n){return n&&n.id!=null&&makeComparableKey(n.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(n){return INTERNAL_COMPONENT_ID_PREFIX+n}function setComponentTypeToKeyInfo(n,t,r){each$f(n,function(a){var o=a.newOption;isObject$3(o)&&(a.keyInfo.mainType=t,a.keyInfo.subType=determineSubType(t,o,a.existing,r))})}function determineSubType(n,t,r,a){var o=t.type?t.type:r?r.subType:a.determineSubType(n,t);return o}function compressBatches(n,t){var r={},a={};return o(n||[],r),o(t||[],a,r),[s(r),s(a)];function o(l,u,d){for(var v=0,g=l.length;v<g;v++){var f=convertOptionIdName(l[v].seriesId,null);if(f==null)return;for(var c=normalizeToArray(l[v].dataIndex),y=d&&d[f],_=0,b=c.length;_<b;_++){var S=c[_];y&&y[S]?y[S]=null:(u[f]||(u[f]={}))[S]=1}}}function s(l,u){var d=[];for(var v in l)if(l.hasOwnProperty(v)&&l[v]!=null)if(u)d.push(+v);else{var g=s(l[v],!0);g.length&&d.push({seriesId:v,dataIndex:g})}return d}}function queryDataIndex(n,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return isArray$1(t.dataIndex)?map$1(t.dataIndex,function(r){return n.indexOfRawIndex(r)}):n.indexOfRawIndex(t.dataIndex);if(t.name!=null)return isArray$1(t.name)?map$1(t.name,function(r){return n.indexOfName(r)}):n.indexOfName(t.name)}function makeInner(){var n="__ec_inner_"+innerUniqueIndex++;return function(t){return t[n]||(t[n]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(n,t,r){var a=preParseFinder(t,r),o=a.mainTypeSpecified,s=a.queryOptionMap,l=a.others,u=l,d=r?r.defaultMainType:null;return!o&&d&&s.set(d,{}),s.each(function(v,g){var f=queryReferringComponents(n,g,v,{useDefault:d===g,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});u[g+"Models"]=f.models,u[g+"Model"]=f.models[0]}),u}function preParseFinder(n,t){var r;if(isString(n)){var a={};a[n+"Index"]=0,r=a}else r=n;var o=createHashMap(),s={},l=!1;return each$f(r,function(u,d){if(d==="dataIndex"||d==="dataIndexInside"){s[d]=u;return}var v=d.match(/^(\w+)(Index|Id|Name)$/)||[],g=v[1],f=(v[2]||"").toLowerCase();if(!(!g||!f||t&&t.includeMainTypes&&indexOf(t.includeMainTypes,g)<0)){l=l||!!g;var c=o.get(g)||o.set(g,{});c[f]=u}}),{mainTypeSpecified:l,queryOptionMap:o,others:s}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(n,t,r,a){a=a||SINGLE_REFERRING;var o=r.index,s=r.id,l=r.name,u={models:null,specified:o!=null||s!=null||l!=null};if(!u.specified){var d=void 0;return u.models=a.useDefault&&(d=n.getComponent(t))?[d]:[],u}return o==="none"||o===!1?(assert(a.enableNone,'`"none"` or `false` is not a valid value on index option.'),u.models=[],u):(o==="all"&&(assert(a.enableAll,'`"all"` is not a valid value on index option.'),o=s=l=null),u.models=n.queryComponents({mainType:t,index:o,id:s,name:l}),u)}function setAttribute(n,t,r){n.setAttribute?n.setAttribute(t,r):n[t]=r}function getAttribute(n,t){return n.getAttribute?n.getAttribute(t):n[t]}function getTooltipRenderMode(n){return n==="auto"?env$1.domSupported?"html":"richText":n||"html"}function groupData(n,t){var r=createHashMap(),a=[];return each$f(n,function(o){var s=t(o);(r.get(s)||(a.push(s),r.set(s,[]))).push(o)}),{keys:a,buckets:r}}function interpolateRawValues(n,t,r,a,o){var s=t==null||t==="auto";if(a==null)return a;if(isNumber(a)){var l=interpolateNumber(r||0,a,o);return round$3(l,s?Math.max(getPrecision(r||0),getPrecision(a)):t)}else{if(isString(a))return o<1?r:a;for(var u=[],d=r,v=a,g=Math.max(d?d.length:0,v.length),f=0;f<g;++f){var c=n.getDimensionInfo(f);if(c&&c.type==="ordinal")u[f]=(o<1&&d?d:v)[f];else{var y=d&&d[f]?d[f]:0,_=v[f],l=interpolateNumber(y,_,o);u[f]=round$3(l,s?Math.max(getPrecision(y),getPrecision(_)):t)}}return u}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(n){var t={main:"",sub:""};if(n){var r=n.split(TYPE_DELIMITER);t.main=r[0]||"",t.sub=r[1]||""}return t}function checkClassType(n){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function isExtendedClass(n){return!!(n&&n[IS_EXTENDED_CLASS])}function enableClassExtend(n,t){n.$constructor=n,n.extend=function(r){var a=this,o;return isESClass(a)?o=function(s){__extends$1(l,s);function l(){return s.apply(this,arguments)||this}return l}(a):(o=function(){(r.$constructor||a).apply(this,arguments)},inherits(o,this)),extend(o.prototype,r),o[IS_EXTENDED_CLASS]=!0,o.extend=this.extend,o.superCall=superCall,o.superApply=superApply,o.superClass=a,o}}function isESClass(n){return isFunction(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function mountExtend(n,t){n.extend=t.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(n){var t=["__\0is_clz",classBase++].join("_");n.prototype[t]=!0,n.isInstance=function(r){return!!(r&&r[t])}}function superCall(n,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return this.superClass.prototype[t].apply(n,r)}function superApply(n,t,r){return this.superClass.prototype[t].apply(n,r)}function enableClassManagement(n){var t={};n.registerClass=function(a){var o=a.type||a.prototype.type;if(o){checkClassType(o),a.prototype.type=o;var s=parseClassType(o);if(!s.sub)t[s.main]=a;else if(s.sub!==IS_CONTAINER){var l=r(s);l[s.sub]=a}}return a},n.getClass=function(a,o,s){var l=t[a];if(l&&l[IS_CONTAINER]&&(l=o?l[o]:null),s&&!l)throw new Error(o?"Component "+a+"."+(o||"")+" is used but not imported.":a+".type should be specified.");return l},n.getClassesByMainType=function(a){var o=parseClassType(a),s=[],l=t[o.main];return l&&l[IS_CONTAINER]?each$f(l,function(u,d){d!==IS_CONTAINER&&s.push(u)}):s.push(l),s},n.hasClass=function(a){var o=parseClassType(a);return!!t[o.main]},n.getAllClassMainTypes=function(){var a=[];return each$f(t,function(o,s){a.push(s)}),a},n.hasSubTypes=function(a){var o=parseClassType(a),s=t[o.main];return s&&s[IS_CONTAINER]};function r(a){var o=t[a.main];return(!o||!o[IS_CONTAINER])&&(o=t[a.main]={},o[IS_CONTAINER]=!0),o}}function makeStyleMapper(n,t){for(var r=0;r<n.length;r++)n[r][1]||(n[r][1]=n[r][0]);return t=t||!1,function(a,o,s){for(var l={},u=0;u<n.length;u++){var d=n[u][1];if(!(o&&indexOf(o,d)>=0||s&&indexOf(s,d)<0)){var v=a.getShallow(d,t);v!=null&&(l[n[u][0]]=v)}}return l}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function n(){}return n.prototype.getAreaStyle=function(t,r){return getAreaStyle(this,t,r)},n}(),globalImageCache=new LRU$1(50);function findExistImage(n){if(typeof n=="string"){var t=globalImageCache.get(n);return t&&t.image}else return n}function createOrUpdateImage(n,t,r,a,o){if(n)if(typeof n=="string"){if(t&&t.__zrImageSrc===n||!r)return t;var s=globalImageCache.get(n),l={hostEl:r,cb:a,cbPayload:o};return s?(t=s.image,!isImageReady(t)&&s.pending.push(l)):(t=platformApi.loadImage(n,imageOnLoad,imageOnLoad),t.__zrImageSrc=n,globalImageCache.put(n,t.__cachedImgObj={image:t,pending:[l]})),t}else return n;else return t}function imageOnLoad(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<n.pending.length;t++){var r=n.pending[t],a=r.cb;a&&a(this,r.cbPayload),r.hostEl.dirty()}n.pending.length=0}function isImageReady(n){return n&&n.width&&n.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(n,t,r,a,o){if(!t)return"";var s=(n+"").split(`
`);o=prepareTruncateOptions(t,r,a,o);for(var l=0,u=s.length;l<u;l++)s[l]=truncateSingleLine(s[l],o);return s.join(`
`)}function prepareTruncateOptions(n,t,r,a){a=a||{};var o=extend({},a);o.font=t,r=retrieve2(r,"..."),o.maxIterations=retrieve2(a.maxIterations,2);var s=o.minChar=retrieve2(a.minChar,0);o.cnCharWidth=getWidth("国",t);var l=o.ascCharWidth=getWidth("a",t);o.placeholder=retrieve2(a.placeholder,"");for(var u=n=Math.max(0,n-1),d=0;d<s&&u>=l;d++)u-=l;var v=getWidth(r,t);return v>u&&(r="",v=0),u=n-v,o.ellipsis=r,o.ellipsisWidth=v,o.contentWidth=u,o.containerWidth=n,o}function truncateSingleLine(n,t){var r=t.containerWidth,a=t.font,o=t.contentWidth;if(!r)return"";var s=getWidth(n,a);if(s<=r)return n;for(var l=0;;l++){if(s<=o||l>=t.maxIterations){n+=t.ellipsis;break}var u=l===0?estimateLength(n,o,t.ascCharWidth,t.cnCharWidth):s>0?Math.floor(n.length*o/s):0;n=n.substr(0,u),s=getWidth(n,a)}return n===""&&(n=t.placeholder),n}function estimateLength(n,t,r,a){for(var o=0,s=0,l=n.length;s<l&&o<t;s++){var u=n.charCodeAt(s);o+=0<=u&&u<=127?r:a}return s}function parsePlainText(n,t){n!=null&&(n+="");var r=t.overflow,a=t.padding,o=t.font,s=r==="truncate",l=getLineHeight(o),u=retrieve2(t.lineHeight,l),d=!!t.backgroundColor,v=t.lineOverflow==="truncate",g=t.width,f;g!=null&&(r==="break"||r==="breakAll")?f=n?wrapText(n,t.font,g,r==="breakAll",0).lines:[]:f=n?n.split(`
`):[];var c=f.length*u,y=retrieve2(t.height,c);if(c>y&&v){var _=Math.floor(y/u);f=f.slice(0,_)}if(n&&s&&g!=null)for(var b=prepareTruncateOptions(g,o,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),S=0;S<f.length;S++)f[S]=truncateSingleLine(f[S],b);for(var x=y,w=0,S=0;S<f.length;S++)w=Math.max(getWidth(f[S],o),w);g==null&&(g=w);var T=w;return a&&(x+=a[0]+a[2],T+=a[1]+a[3],g+=a[1]+a[3]),d&&(T=g),{lines:f,height:y,outerWidth:T,outerHeight:x,lineHeight:u,calculatedLineHeight:l,contentWidth:w,contentHeight:c,width:g}}var RichTextToken=function(){function n(){}return n}(),RichTextLine=function(){function n(t){this.tokens=[],t&&(this.tokens=t)}return n}(),RichTextContentBlock=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return n}();function parseRichText(n,t){var r=new RichTextContentBlock;if(n!=null&&(n+=""),!n)return r;for(var a=t.width,o=t.height,s=t.overflow,l=(s==="break"||s==="breakAll")&&a!=null?{width:a,accumWidth:0,breakAll:s==="breakAll"}:null,u=STYLE_REG.lastIndex=0,d;(d=STYLE_REG.exec(n))!=null;){var v=d.index;v>u&&pushTokens(r,n.substring(u,v),t,l),pushTokens(r,d[2],t,l,d[1]),u=STYLE_REG.lastIndex}u<n.length&&pushTokens(r,n.substring(u,n.length),t,l);var g=[],f=0,c=0,y=t.padding,_=s==="truncate",b=t.lineOverflow==="truncate";function S(V,H,X){V.width=H,V.lineHeight=X,f+=X,c=Math.max(c,H)}e:for(var x=0;x<r.lines.length;x++){for(var w=r.lines[x],T=0,A=0,E=0;E<w.tokens.length;E++){var $=w.tokens[E],P=$.styleName&&t.rich[$.styleName]||{},I=$.textPadding=P.padding,C=I?I[1]+I[3]:0,M=$.font=P.font||t.font;$.contentHeight=getLineHeight(M);var D=retrieve2(P.height,$.contentHeight);if($.innerHeight=D,I&&(D+=I[0]+I[2]),$.height=D,$.lineHeight=retrieve3(P.lineHeight,t.lineHeight,D),$.align=P&&P.align||t.align,$.verticalAlign=P&&P.verticalAlign||"middle",b&&o!=null&&f+$.lineHeight>o){E>0?(w.tokens=w.tokens.slice(0,E),S(w,A,T),r.lines=r.lines.slice(0,x+1)):r.lines=r.lines.slice(0,x);break e}var R=P.width,N=R==null||R==="auto";if(typeof R=="string"&&R.charAt(R.length-1)==="%")$.percentWidth=R,g.push($),$.contentWidth=getWidth($.text,M);else{if(N){var O=P.backgroundColor,F=O&&O.image;F&&(F=findExistImage(F),isImageReady(F)&&($.width=Math.max($.width,F.width*D/F.height)))}var L=_&&a!=null?a-A:null;L!=null&&L<$.width?!N||L<C?($.text="",$.width=$.contentWidth=0):($.text=truncateText($.text,L-C,M,t.ellipsis,{minChar:t.truncateMinChar}),$.width=$.contentWidth=getWidth($.text,M)):$.contentWidth=getWidth($.text,M)}$.width+=C,A+=$.width,P&&(T=Math.max(T,$.lineHeight))}S(w,A,T)}r.outerWidth=r.width=retrieve2(a,c),r.outerHeight=r.height=retrieve2(o,f),r.contentHeight=f,r.contentWidth=c,y&&(r.outerWidth+=y[1]+y[3],r.outerHeight+=y[0]+y[2]);for(var x=0;x<g.length;x++){var $=g[x],B=$.percentWidth;$.width=parseInt(B,10)/100*r.width}return r}function pushTokens(n,t,r,a,o){var s=t==="",l=o&&r.rich[o]||{},u=n.lines,d=l.font||r.font,v=!1,g,f;if(a){var c=l.padding,y=c?c[1]+c[3]:0;if(l.width!=null&&l.width!=="auto"){var _=parsePercent$1(l.width,a.width)+y;u.length>0&&_+a.accumWidth>a.width&&(g=t.split(`
`),v=!0),a.accumWidth=_}else{var b=wrapText(t,d,a.width,a.breakAll,a.accumWidth);a.accumWidth=b.accumWidth+y,f=b.linesWidths,g=b.lines}}else g=t.split(`
`);for(var S=0;S<g.length;S++){var x=g[S],w=new RichTextToken;if(w.styleName=o,w.text=x,w.isLineHolder=!x&&!s,typeof l.width=="number"?w.width=l.width:w.width=f?f[S]:getWidth(x,d),!S&&!v){var T=(u[u.length-1]||(u[0]=new RichTextLine)).tokens,A=T.length;A===1&&T[0].isLineHolder?T[0]=w:(x||!A||s)&&T.push(w)}else u.push(new RichTextLine([w]))}}function isAlphabeticLetter(n){var t=n.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(n,t){return n[t]=!0,n},{});function isWordBreakChar(n){return isAlphabeticLetter(n)?!!breakCharMap[n]:!0}function wrapText(n,t,r,a,o){for(var s=[],l=[],u="",d="",v=0,g=0,f=0;f<n.length;f++){var c=n.charAt(f);if(c===`
`){d&&(u+=d,g+=v),s.push(u),l.push(g),u="",d="",v=0,g=0;continue}var y=getWidth(c,t),_=a?!1:!isWordBreakChar(c);if(s.length?g+y>r:o+g+y>r){g?(u||d)&&(_?(u||(u=d,d="",v=0,g=v),s.push(u),l.push(g-v),d+=c,v+=y,u="",g=v):(d&&(u+=d,d="",v=0),s.push(u),l.push(g),u=c,g=y)):_?(s.push(d),l.push(v),d=c,v=y):(s.push(c),l.push(y));continue}g+=y,_?(d+=c,v+=y):(d&&(u+=d,d="",v=0),u+=c)}return!s.length&&!u&&(u=n,d="",v=0),d&&(u+=d),u&&(s.push(u),l.push(g)),s.length===1&&(g+=o),{accumWidth:g,lines:s,linesWidths:l}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype._init=function(r){for(var a=keys(r),o=0;o<a.length;o++){var s=a[o];s==="style"?this.useStyle(r[s]):n.prototype.attrKV.call(this,s,r[s])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,a,o,s){var l=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,r,a)||l&&!l[0]&&!l[3])return!1;if(o&&this.__clipPaths){for(var u=0;u<this.__clipPaths.length;++u)if(this.__clipPaths[u].isZeroArea())return!1}if(s&&this.parent)for(var d=this.parent;d;){if(d.ignore)return!1;d=d.parent}return!0},t.prototype.contain=function(r,a){return this.rectContain(r,a)},t.prototype.traverse=function(r,a){r.call(a,this)},t.prototype.rectContain=function(r,a){var o=this.transformCoordToLocal(r,a),s=this.getBoundingRect();return s.contain(o[0],o[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var a=this.transform,o=this.getBoundingRect(),s=this.style,l=s.shadowBlur||0,u=s.shadowOffsetX||0,d=s.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new BoundingRect$1(0,0,0,0)),a?BoundingRect$1.applyTransform(r,o,a):r.copy(o),(l||u||d)&&(r.width+=l*2+Math.abs(u),r.height+=l*2+Math.abs(d),r.x=Math.min(r.x,r.x+u-l),r.y=Math.min(r.y,r.y+d-l));var v=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-v),r.y=Math.floor(r.y-v),r.width=Math.ceil(r.width+1+v*2),r.height=Math.ceil(r.height+1+v*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new BoundingRect$1(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,a){r!=="style"?n.prototype.attrKV.call(this,r,a):this.style?this.setStyle(a):this.useStyle(a)},t.prototype.setStyle=function(r,a){return typeof r=="string"?this.style[r]=a:extend(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},t.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},t.prototype.createStyle=function(r){return createObject(DEFAULT_COMMON_STYLE,r)},t.prototype.useStyle=function(r){r[STYLE_MAGIC_KEY]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[STYLE_MAGIC_KEY]},t.prototype._innerSaveToNormal=function(r){n.prototype._innerSaveToNormal.call(this,r);var a=this._normalState;r.style&&!a.style&&(a.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,a,PRIMARY_STATES_KEYS)},t.prototype._applyStateObj=function(r,a,o,s,l,u){n.prototype._applyStateObj.call(this,r,a,o,s,l,u);var d=!(a&&s),v;if(a&&a.style?l?s?v=a.style:(v=this._mergeStyle(this.createStyle(),o.style),this._mergeStyle(v,a.style)):(v=this._mergeStyle(this.createStyle(),s?this.style:o.style),this._mergeStyle(v,a.style)):d&&(v=o.style),v)if(l){var g=this.style;if(this.style=this.createStyle(d?{}:g),d)for(var f=keys(g),c=0;c<f.length;c++){var y=f[c];y in v&&(v[y]=v[y],this.style[y]=g[y])}for(var _=keys(v),c=0;c<_.length;c++){var y=_[c];this.style[y]=this.style[y]}this._transitionState(r,{style:v},u,this.getAnimationStyleProps())}else this.useStyle(v);for(var b=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,c=0;c<b.length;c++){var y=b[c];a&&a[y]!=null?this[y]=a[y]:d&&o[y]!=null&&(this[y]=o[y])}},t.prototype._mergeStates=function(r){for(var a=n.prototype._mergeStates.call(this,r),o,s=0;s<r.length;s++){var l=r[s];l.style&&(o=o||{},this._mergeStyle(o,l.style))}return o&&(a.style=o),a},t.prototype._mergeStyle=function(r,a){return extend(r,a),r},t.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),t}(Element$2),tmpRect=new BoundingRect$1(0,0,0,0),viewRect=new BoundingRect$1(0,0,0,0);function isDisplayableCulled(n,t,r){return tmpRect.copy(n.getBoundingRect()),n.transform&&tmpRect.applyTransform(n.transform),viewRect.width=t,viewRect.height=r,!tmpRect.intersect(viewRect)}const Displayable$1=Displayable;var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(n,t,r){if(n.length!==0){for(var a=n[0],o=a[0],s=a[0],l=a[1],u=a[1],d=1;d<n.length;d++)a=n[d],o=mathMin$9(o,a[0]),s=mathMax$9(s,a[0]),l=mathMin$9(l,a[1]),u=mathMax$9(u,a[1]);t[0]=o,t[1]=l,r[0]=s,r[1]=u}}function fromLine(n,t,r,a,o,s){o[0]=mathMin$9(n,r),o[1]=mathMin$9(t,a),s[0]=mathMax$9(n,r),s[1]=mathMax$9(t,a)}var xDim=[],yDim=[];function fromCubic(n,t,r,a,o,s,l,u,d,v){var g=cubicExtrema,f=cubicAt,c=g(n,r,o,l,xDim);d[0]=1/0,d[1]=1/0,v[0]=-1/0,v[1]=-1/0;for(var y=0;y<c;y++){var _=f(n,r,o,l,xDim[y]);d[0]=mathMin$9(_,d[0]),v[0]=mathMax$9(_,v[0])}c=g(t,a,s,u,yDim);for(var y=0;y<c;y++){var b=f(t,a,s,u,yDim[y]);d[1]=mathMin$9(b,d[1]),v[1]=mathMax$9(b,v[1])}d[0]=mathMin$9(n,d[0]),v[0]=mathMax$9(n,v[0]),d[0]=mathMin$9(l,d[0]),v[0]=mathMax$9(l,v[0]),d[1]=mathMin$9(t,d[1]),v[1]=mathMax$9(t,v[1]),d[1]=mathMin$9(u,d[1]),v[1]=mathMax$9(u,v[1])}function fromQuadratic(n,t,r,a,o,s,l,u){var d=quadraticExtremum,v=quadraticAt$1,g=mathMax$9(mathMin$9(d(n,r,o),1),0),f=mathMax$9(mathMin$9(d(t,a,s),1),0),c=v(n,r,o,g),y=v(t,a,s,f);l[0]=mathMin$9(n,o,c),l[1]=mathMin$9(t,s,y),u[0]=mathMax$9(n,o,c),u[1]=mathMax$9(t,s,y)}function fromArc(n,t,r,a,o,s,l,u,d){var v=min$1,g=max$1,f=Math.abs(o-s);if(f%PI2$8<1e-4&&f>1e-4){u[0]=n-r,u[1]=t-a,d[0]=n+r,d[1]=t+a;return}if(start[0]=mathCos$4(o)*r+n,start[1]=mathSin$4(o)*a+t,end[0]=mathCos$4(s)*r+n,end[1]=mathSin$4(s)*a+t,v(u,start,end),g(d,start,end),o=o%PI2$8,o<0&&(o=o+PI2$8),s=s%PI2$8,s<0&&(s=s+PI2$8),o>s&&!l?s+=PI2$8:o<s&&l&&(o+=PI2$8),l){var c=s;s=o,o=c}for(var y=0;y<s;y+=Math.PI/2)y>o&&(extremity[0]=mathCos$4(y)*r+n,extremity[1]=mathSin$4(y)*a+t,v(u,extremity,u),g(d,extremity,d))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(n){var t=Math.round(n/PI$8*1e8)/1e8;return t%2*PI$8}function normalizeArcAngles(n,t){var r=modPI2(n[0]);r<0&&(r+=PI2$7);var a=r-n[0],o=n[1];o+=a,!t&&o-r>=PI2$7?o=r+PI2$7:t&&r-o>=PI2$7?o=r-PI2$7:!t&&r>o?o=r+(PI2$7-modPI2(r-o)):t&&r<o&&(o=r-(PI2$7-modPI2(o-r))),n[0]=r,n[1]=o}var PathProxy=function(){function n(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(t,r,a){a=a||0,a>0&&(this._ux=mathAbs$2(a/devicePixelRatio/t)||0,this._uy=mathAbs$2(a/devicePixelRatio/r)||0)},n.prototype.setDPR=function(t){this.dpr=t},n.prototype.setContext=function(t){this._ctx=t},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(CMD$4.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},n.prototype.lineTo=function(t,r){var a=mathAbs$2(t-this._xi),o=mathAbs$2(r-this._yi),s=a>this._ux||o>this._uy;if(this.addData(CMD$4.L,t,r),this._ctx&&s&&this._ctx.lineTo(t,r),s)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var l=a*a+o*o;l>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=l)}return this},n.prototype.bezierCurveTo=function(t,r,a,o,s,l){return this._drawPendingPt(),this.addData(CMD$4.C,t,r,a,o,s,l),this._ctx&&this._ctx.bezierCurveTo(t,r,a,o,s,l),this._xi=s,this._yi=l,this},n.prototype.quadraticCurveTo=function(t,r,a,o){return this._drawPendingPt(),this.addData(CMD$4.Q,t,r,a,o),this._ctx&&this._ctx.quadraticCurveTo(t,r,a,o),this._xi=a,this._yi=o,this},n.prototype.arc=function(t,r,a,o,s,l){this._drawPendingPt(),tmpAngles[0]=o,tmpAngles[1]=s,normalizeArcAngles(tmpAngles,l),o=tmpAngles[0],s=tmpAngles[1];var u=s-o;return this.addData(CMD$4.A,t,r,a,a,o,u,0,l?0:1),this._ctx&&this._ctx.arc(t,r,a,o,s,l),this._xi=mathCos$3(s)*a+t,this._yi=mathSin$3(s)*a+r,this},n.prototype.arcTo=function(t,r,a,o,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,a,o,s),this},n.prototype.rect=function(t,r,a,o){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,a,o),this.addData(CMD$4.R,t,r,a,o),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var t=this._ctx,r=this._x0,a=this._y0;return t&&t.closePath(),this._xi=r,this._yi=a,this},n.prototype.fill=function(t){t&&t.fill(),this.toStatic()},n.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&hasTypedArray&&(this.data=new Float32Array(r));for(var a=0;a<r;a++)this.data[a]=t[a];this._len=r},n.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,a=0,o=this._len,s=0;s<r;s++)a+=t[s].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(o+a));for(var s=0;s<r;s++)for(var l=t[s].data,u=0;u<l.length;u++)this.data[o++]=l[u];this._len=o},n.prototype.addData=function(t,r,a,o,s,l,u,d,v){if(this._saveData){var g=this.data;this._len+arguments.length>g.length&&(this._expandData(),g=this.data);for(var f=0;f<arguments.length;f++)g[this._len++]=arguments[f]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(t)))}},n.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var t=this.data,r=0,a=0,o=0,s=0,l;for(l=0;l<this._len;){var u=t[l++],d=l===1;switch(d&&(r=t[l],a=t[l+1],o=r,s=a),u){case CMD$4.M:r=o=t[l++],a=s=t[l++],min2[0]=o,min2[1]=s,max2[0]=o,max2[1]=s;break;case CMD$4.L:fromLine(r,a,t[l],t[l+1],min2,max2),r=t[l++],a=t[l++];break;case CMD$4.C:fromCubic(r,a,t[l++],t[l++],t[l++],t[l++],t[l],t[l+1],min2,max2),r=t[l++],a=t[l++];break;case CMD$4.Q:fromQuadratic(r,a,t[l++],t[l++],t[l],t[l+1],min2,max2),r=t[l++],a=t[l++];break;case CMD$4.A:var v=t[l++],g=t[l++],f=t[l++],c=t[l++],y=t[l++],_=t[l++]+y;l+=1;var b=!t[l++];d&&(o=mathCos$3(y)*f+v,s=mathSin$3(y)*c+g),fromArc(v,g,f,c,y,_,b,min2,max2),r=mathCos$3(_)*f+v,a=mathSin$3(_)*c+g;break;case CMD$4.R:o=r=t[l++],s=a=t[l++];var S=t[l++],x=t[l++];fromLine(o,s,o+S,s+x,min2,max2);break;case CMD$4.Z:r=o,a=s;break}min$1(min,min,min2),max$1(max,max,max2)}return l===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect$1(min[0],min[1],max[0]-min[0],max[1]-min[1])},n.prototype._calculateLength=function(){var t=this.data,r=this._len,a=this._ux,o=this._uy,s=0,l=0,u=0,d=0;this._pathSegLen||(this._pathSegLen=[]);for(var v=this._pathSegLen,g=0,f=0,c=0;c<r;){var y=t[c++],_=c===1;_&&(s=t[c],l=t[c+1],u=s,d=l);var b=-1;switch(y){case CMD$4.M:s=u=t[c++],l=d=t[c++];break;case CMD$4.L:{var S=t[c++],x=t[c++],w=S-s,T=x-l;(mathAbs$2(w)>a||mathAbs$2(T)>o||c===r-1)&&(b=Math.sqrt(w*w+T*T),s=S,l=x);break}case CMD$4.C:{var A=t[c++],E=t[c++],S=t[c++],x=t[c++],$=t[c++],P=t[c++];b=cubicLength(s,l,A,E,S,x,$,P,10),s=$,l=P;break}case CMD$4.Q:{var A=t[c++],E=t[c++],S=t[c++],x=t[c++];b=quadraticLength(s,l,A,E,S,x,10),s=S,l=x;break}case CMD$4.A:var I=t[c++],C=t[c++],M=t[c++],D=t[c++],R=t[c++],N=t[c++],O=N+R;c+=1,t[c++],_&&(u=mathCos$3(R)*M+I,d=mathSin$3(R)*D+C),b=mathMax$8(M,D)*mathMin$8(PI2$7,Math.abs(N)),s=mathCos$3(O)*M+I,l=mathSin$3(O)*D+C;break;case CMD$4.R:{u=s=t[c++],d=l=t[c++];var F=t[c++],L=t[c++];b=F*2+L*2;break}case CMD$4.Z:{var w=u-s,T=d-l;b=Math.sqrt(w*w+T*T),s=u,l=d;break}}b>=0&&(v[f++]=b,g+=b)}return this._pathLen=g,g},n.prototype.rebuildPath=function(t,r){var a=this.data,o=this._ux,s=this._uy,l=this._len,u,d,v,g,f,c,y=r<1,_,b,S=0,x=0,w,T=0,A,E;if(!(y&&(this._pathSegLen||this._calculateLength(),_=this._pathSegLen,b=this._pathLen,w=r*b,!w)))e:for(var $=0;$<l;){var P=a[$++],I=$===1;switch(I&&(v=a[$],g=a[$+1],u=v,d=g),P!==CMD$4.L&&T>0&&(t.lineTo(A,E),T=0),P){case CMD$4.M:u=v=a[$++],d=g=a[$++],t.moveTo(v,g);break;case CMD$4.L:{f=a[$++],c=a[$++];var C=mathAbs$2(f-v),M=mathAbs$2(c-g);if(C>o||M>s){if(y){var D=_[x++];if(S+D>w){var R=(w-S)/D;t.lineTo(v*(1-R)+f*R,g*(1-R)+c*R);break e}S+=D}t.lineTo(f,c),v=f,g=c,T=0}else{var N=C*C+M*M;N>T&&(A=f,E=c,T=N)}break}case CMD$4.C:{var O=a[$++],F=a[$++],L=a[$++],B=a[$++],V=a[$++],H=a[$++];if(y){var D=_[x++];if(S+D>w){var R=(w-S)/D;cubicSubdivide(v,O,L,V,R,tmpOutX),cubicSubdivide(g,F,B,H,R,tmpOutY),t.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}S+=D}t.bezierCurveTo(O,F,L,B,V,H),v=V,g=H;break}case CMD$4.Q:{var O=a[$++],F=a[$++],L=a[$++],B=a[$++];if(y){var D=_[x++];if(S+D>w){var R=(w-S)/D;quadraticSubdivide(v,O,L,R,tmpOutX),quadraticSubdivide(g,F,B,R,tmpOutY),t.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}S+=D}t.quadraticCurveTo(O,F,L,B),v=L,g=B;break}case CMD$4.A:var X=a[$++],U=a[$++],te=a[$++],ee=a[$++],q=a[$++],ie=a[$++],pe=a[$++],j=!a[$++],Q=te>ee?te:ee,J=mathAbs$2(te-ee)>.001,oe=q+ie,ne=!1;if(y){var D=_[x++];S+D>w&&(oe=q+ie*(w-S)/D,ne=!0),S+=D}if(J&&t.ellipse?t.ellipse(X,U,te,ee,pe,q,oe,j):t.arc(X,U,Q,q,oe,j),ne)break e;I&&(u=mathCos$3(q)*te+X,d=mathSin$3(q)*ee+U),v=mathCos$3(oe)*te+X,g=mathSin$3(oe)*ee+U;break;case CMD$4.R:u=v=a[$],d=g=a[$+1],f=a[$++],c=a[$++];var z=a[$++],W=a[$++];if(y){var D=_[x++];if(S+D>w){var Z=w-S;t.moveTo(f,c),t.lineTo(f+mathMin$8(Z,z),c),Z-=z,Z>0&&t.lineTo(f+z,c+mathMin$8(Z,W)),Z-=W,Z>0&&t.lineTo(f+mathMax$8(z-Z,0),c+W),Z-=z,Z>0&&t.lineTo(f,c+mathMax$8(W-Z,0));break e}S+=D}t.rect(f,c,z,W);break;case CMD$4.Z:if(y){var D=_[x++];if(S+D>w){var R=(w-S)/D;t.lineTo(v*(1-R)+u*R,g*(1-R)+d*R);break e}S+=D}t.closePath(),v=u,g=d}}},n.prototype.clone=function(){var t=new n,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},n.CMD=CMD$4,n.initDefaultProps=function(){var t=n.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),n}();const PathProxy$1=PathProxy;function containStroke$4(n,t,r,a,o,s,l){if(o===0)return!1;var u=o,d=0,v=n;if(l>t+u&&l>a+u||l<t-u&&l<a-u||s>n+u&&s>r+u||s<n-u&&s<r-u)return!1;if(n!==r)d=(t-a)/(n-r),v=(n*a-r*t)/(n-r);else return Math.abs(s-n)<=u/2;var g=d*s-l+v,f=g*g/(d*d+1);return f<=u/2*u/2}function containStroke$3(n,t,r,a,o,s,l,u,d,v,g){if(d===0)return!1;var f=d;if(g>t+f&&g>a+f&&g>s+f&&g>u+f||g<t-f&&g<a-f&&g<s-f&&g<u-f||v>n+f&&v>r+f&&v>o+f&&v>l+f||v<n-f&&v<r-f&&v<o-f&&v<l-f)return!1;var c=cubicProjectPoint(n,t,r,a,o,s,l,u,v,g,null);return c<=f/2}function containStroke$2(n,t,r,a,o,s,l,u,d){if(l===0)return!1;var v=l;if(d>t+v&&d>a+v&&d>s+v||d<t-v&&d<a-v&&d<s-v||u>n+v&&u>r+v&&u>o+v||u<n-v&&u<r-v&&u<o-v)return!1;var g=quadraticProjectPoint(n,t,r,a,o,s,u,d,null);return g<=v/2}var PI2$6=Math.PI*2;function normalizeRadian(n){return n%=PI2$6,n<0&&(n+=PI2$6),n}var PI2$5=Math.PI*2;function containStroke$1(n,t,r,a,o,s,l,u,d){if(l===0)return!1;var v=l;u-=n,d-=t;var g=Math.sqrt(u*u+d*d);if(g-v>r||g+v<r)return!1;if(Math.abs(a-o)%PI2$5<1e-4)return!0;if(s){var f=a;a=normalizeRadian(o),o=normalizeRadian(f)}else a=normalizeRadian(a),o=normalizeRadian(o);a>o&&(o+=PI2$5);var c=Math.atan2(d,u);return c<0&&(c+=PI2$5),c>=a&&c<=o||c+PI2$5>=a&&c+PI2$5<=o}function windingLine(n,t,r,a,o,s){if(s>t&&s>a||s<t&&s<a||a===t)return 0;var l=(s-t)/(a-t),u=a<t?1:-1;(l===1||l===0)&&(u=a<t?.5:-.5);var d=l*(r-n)+n;return d===o?1/0:d>o?u:0}var CMD$3=PathProxy$1.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(n,t){return Math.abs(n-t)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var n=extrema[0];extrema[0]=extrema[1],extrema[1]=n}function windingCubic(n,t,r,a,o,s,l,u,d,v){if(v>t&&v>a&&v>s&&v>u||v<t&&v<a&&v<s&&v<u)return 0;var g=cubicRootAt(t,a,s,u,v,roots);if(g===0)return 0;for(var f=0,c=-1,y=void 0,_=void 0,b=0;b<g;b++){var S=roots[b],x=S===0||S===1?.5:1,w=cubicAt(n,r,o,l,S);w<d||(c<0&&(c=cubicExtrema(t,a,s,u,extrema),extrema[1]<extrema[0]&&c>1&&swapExtrema(),y=cubicAt(t,a,s,u,extrema[0]),c>1&&(_=cubicAt(t,a,s,u,extrema[1]))),c===2?S<extrema[0]?f+=y<t?x:-x:S<extrema[1]?f+=_<y?x:-x:f+=u<_?x:-x:S<extrema[0]?f+=y<t?x:-x:f+=u<y?x:-x)}return f}function windingQuadratic(n,t,r,a,o,s,l,u){if(u>t&&u>a&&u>s||u<t&&u<a&&u<s)return 0;var d=quadraticRootAt(t,a,s,u,roots);if(d===0)return 0;var v=quadraticExtremum(t,a,s);if(v>=0&&v<=1){for(var g=0,f=quadraticAt$1(t,a,s,v),c=0;c<d;c++){var y=roots[c]===0||roots[c]===1?.5:1,_=quadraticAt$1(n,r,o,roots[c]);_<l||(roots[c]<v?g+=f<t?y:-y:g+=s<f?y:-y)}return g}else{var y=roots[0]===0||roots[0]===1?.5:1,_=quadraticAt$1(n,r,o,roots[0]);return _<l?0:s<t?y:-y}}function windingArc(n,t,r,a,o,s,l,u){if(u-=t,u>r||u<-r)return 0;var d=Math.sqrt(r*r-u*u);roots[0]=-d,roots[1]=d;var v=Math.abs(a-o);if(v<1e-4)return 0;if(v>=PI2$4-1e-4){a=0,o=PI2$4;var g=s?1:-1;return l>=roots[0]+n&&l<=roots[1]+n?g:0}if(a>o){var f=a;a=o,o=f}a<0&&(a+=PI2$4,o+=PI2$4);for(var c=0,y=0;y<2;y++){var _=roots[y];if(_+n>l){var b=Math.atan2(u,_),g=s?1:-1;b<0&&(b=PI2$4+b),(b>=a&&b<=o||b+PI2$4>=a&&b+PI2$4<=o)&&(b>Math.PI/2&&b<Math.PI*1.5&&(g=-g),c+=g)}}return c}function containPath(n,t,r,a,o){for(var s=n.data,l=n.len(),u=0,d=0,v=0,g=0,f=0,c,y,_=0;_<l;){var b=s[_++],S=_===1;switch(b===CMD$3.M&&_>1&&(r||(u+=windingLine(d,v,g,f,a,o))),S&&(d=s[_],v=s[_+1],g=d,f=v),b){case CMD$3.M:g=s[_++],f=s[_++],d=g,v=f;break;case CMD$3.L:if(r){if(containStroke$4(d,v,s[_],s[_+1],t,a,o))return!0}else u+=windingLine(d,v,s[_],s[_+1],a,o)||0;d=s[_++],v=s[_++];break;case CMD$3.C:if(r){if(containStroke$3(d,v,s[_++],s[_++],s[_++],s[_++],s[_],s[_+1],t,a,o))return!0}else u+=windingCubic(d,v,s[_++],s[_++],s[_++],s[_++],s[_],s[_+1],a,o)||0;d=s[_++],v=s[_++];break;case CMD$3.Q:if(r){if(containStroke$2(d,v,s[_++],s[_++],s[_],s[_+1],t,a,o))return!0}else u+=windingQuadratic(d,v,s[_++],s[_++],s[_],s[_+1],a,o)||0;d=s[_++],v=s[_++];break;case CMD$3.A:var x=s[_++],w=s[_++],T=s[_++],A=s[_++],E=s[_++],$=s[_++];_+=1;var P=!!(1-s[_++]);c=Math.cos(E)*T+x,y=Math.sin(E)*A+w,S?(g=c,f=y):u+=windingLine(d,v,c,y,a,o);var I=(a-x)*A/T+x;if(r){if(containStroke$1(x,w,A,E,E+$,P,t,I,o))return!0}else u+=windingArc(x,w,A,E,E+$,P,I,o);d=Math.cos(E+$)*T+x,v=Math.sin(E+$)*A+w;break;case CMD$3.R:g=d=s[_++],f=v=s[_++];var C=s[_++],M=s[_++];if(c=g+C,y=f+M,r){if(containStroke$4(g,f,c,f,t,a,o)||containStroke$4(c,f,c,y,t,a,o)||containStroke$4(c,y,g,y,t,a,o)||containStroke$4(g,y,g,f,t,a,o))return!0}else u+=windingLine(c,f,c,y,a,o),u+=windingLine(g,y,g,f,a,o);break;case CMD$3.Z:if(r){if(containStroke$4(d,v,g,f,t,a,o))return!0}else u+=windingLine(d,v,g,f,a,o);d=g,v=f;break}}return!r&&!isAroundEqual$1(v,f)&&(u+=windingLine(d,v,g,f,a,o)||0),u!==0}function contain$2(n,t,r){return containPath(n,0,!1,t,r)}function containStroke(n,t,r,a){return containPath(n,t,!0,r,a)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.update=function(){var r=this;n.prototype.update.call(this);var a=this.style;if(a.decal){var o=this._decalEl=this._decalEl||new t;o.buildPath===t.prototype.buildPath&&(o.buildPath=function(d){r.buildPath(d,r.shape)}),o.silent=!0;var s=o.style;for(var l in a)s[l]!==a[l]&&(s[l]=a[l]);s.fill=a.fill?a.decal:null,s.decal=null,s.shadowColor=null,a.strokeFirst&&(s.stroke=null);for(var u=0;u<pathCopyParams.length;++u)o[pathCopyParams[u]]=this[pathCopyParams[u]];o.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var a=keys(r);this.shape=this.getDefaultShape();var o=this.getDefaultStyle();o&&this.useStyle(o);for(var s=0;s<a.length;s++){var l=a[s],u=r[l];l==="style"?this.style?extend(this.style,u):this.useStyle(u):l==="shape"?extend(this.shape,u):n.prototype.attrKV.call(this,l,u)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(isString(r)){var a=lum(r,0);return a>.5?DARK_LABEL_COLOR:a>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(r)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},t.prototype.getInsideTextStroke=function(r){var a=this.style.fill;if(isString(a)){var o=this.__zr,s=!!(o&&o.isDarkMode()),l=lum(r,0)<DARK_MODE_THRESHOLD;if(s===l)return a}},t.prototype.buildPath=function(r,a,o){},t.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new PathProxy$1(!1)},t.prototype.hasStroke=function(){var r=this.style,a=r.stroke;return!(a==null||a==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,a=r.fill;return a!=null&&a!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,a=this.style,o=!r;if(o){var s=!1;this.path||(s=!0,this.createPathProxy());var l=this.path;(s||this.__dirty&SHAPE_CHANGED_BIT)&&(l.beginPath(),this.buildPath(l,this.shape,!1),this.pathUpdated()),r=l.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var u=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||o){u.copy(r);var d=a.strokeNoScale?this.getLineScale():1,v=a.lineWidth;if(!this.hasFill()){var g=this.strokeContainThreshold;v=Math.max(v,g??4)}d>1e-10&&(u.width+=v/d,u.height+=v/d,u.x-=v/d/2,u.y-=v/d/2)}return u}return r},t.prototype.contain=function(r,a){var o=this.transformCoordToLocal(r,a),s=this.getBoundingRect(),l=this.style;if(r=o[0],a=o[1],s.contain(r,a)){var u=this.path;if(this.hasStroke()){var d=l.lineWidth,v=l.strokeNoScale?this.getLineScale():1;if(v>1e-10&&(this.hasFill()||(d=Math.max(d,this.strokeContainThreshold)),containStroke(u,d/v,r,a)))return!0}if(this.hasFill())return contain$2(u,r,a)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,a){r==="shape"?this.setShape(a):n.prototype.attrKV.call(this,r,a)},t.prototype.setShape=function(r,a){var o=this.shape;return o||(o=this.shape={}),typeof r=="string"?o[r]=a:extend(o,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},t.prototype.createStyle=function(r){return createObject(DEFAULT_PATH_STYLE,r)},t.prototype._innerSaveToNormal=function(r){n.prototype._innerSaveToNormal.call(this,r);var a=this._normalState;r.shape&&!a.shape&&(a.shape=extend({},this.shape))},t.prototype._applyStateObj=function(r,a,o,s,l,u){n.prototype._applyStateObj.call(this,r,a,o,s,l,u);var d=!(a&&s),v;if(a&&a.shape?l?s?v=a.shape:(v=extend({},o.shape),extend(v,a.shape)):(v=extend({},s?this.shape:o.shape),extend(v,a.shape)):d&&(v=o.shape),v)if(l){this.shape=extend({},this.shape);for(var g={},f=keys(v),c=0;c<f.length;c++){var y=f[c];typeof v[y]=="object"?this.shape[y]=v[y]:g[y]=v[y]}this._transitionState(r,{shape:g},u)}else this.shape=v,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var a=n.prototype._mergeStates.call(this,r),o,s=0;s<r.length;s++){var l=r[s];l.shape&&(o=o||{},this._mergeStyle(o,l.shape))}return o&&(a.shape=o),a},t.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var a=function(s){__extends(l,s);function l(u){var d=s.call(this,u)||this;return r.init&&r.init.call(d,u),d}return l.prototype.getDefaultStyle=function(){return clone$4(r.style)},l.prototype.getDefaultShape=function(){return clone$4(r.shape)},l}(t);for(var o in r)typeof r[o]=="function"&&(a.prototype[o]=r[o]);return a},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),t}(Displayable$1);const Path$1=Path;var DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(n){__extends(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,a=r.stroke;return a!=null&&a!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,a=r.fill;return a!=null&&a!=="none"},t.prototype.createStyle=function(r){return createObject(DEFAULT_TSPAN_STYLE,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var a=r.text;a!=null?a+="":a="";var o=getBoundingRect(a,r.font,r.textAlign,r.textBaseline);if(o.x+=r.x||0,o.y+=r.y||0,this.hasStroke()){var s=r.lineWidth;o.x-=s/2,o.y-=s/2,o.width+=s,o.height+=s}this._rect=o}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Displayable$1);TSpan.prototype.type="tspan";const TSpan$1=TSpan;var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var ZRImage=function(n){__extends(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return createObject(DEFAULT_IMAGE_STYLE,r)},t.prototype._getSize=function(r){var a=this.style,o=a[r];if(o!=null)return o;var s=isImageLike$1(a.image)?a.image:this.__image;if(!s)return 0;var l=r==="width"?"height":"width",u=a[l];return u==null?s[r]:s[r]/s[l]*u},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new BoundingRect$1(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Displayable$1);ZRImage.prototype.type="image";const ZRImage$1=ZRImage;function buildPath$2(n,t){var r=t.x,a=t.y,o=t.width,s=t.height,l=t.r,u,d,v,g;o<0&&(r=r+o,o=-o),s<0&&(a=a+s,s=-s),typeof l=="number"?u=d=v=g=l:l instanceof Array?l.length===1?u=d=v=g=l[0]:l.length===2?(u=v=l[0],d=g=l[1]):l.length===3?(u=l[0],d=g=l[1],v=l[2]):(u=l[0],d=l[1],v=l[2],g=l[3]):u=d=v=g=0;var f;u+d>o&&(f=u+d,u*=o/f,d*=o/f),v+g>o&&(f=v+g,v*=o/f,g*=o/f),d+v>s&&(f=d+v,d*=s/f,v*=s/f),u+g>s&&(f=u+g,u*=s/f,g*=s/f),n.moveTo(r+u,a),n.lineTo(r+o-d,a),d!==0&&n.arc(r+o-d,a+d,d,-Math.PI/2,0),n.lineTo(r+o,a+s-v),v!==0&&n.arc(r+o-v,a+s-v,v,0,Math.PI/2),n.lineTo(r+g,a+s),g!==0&&n.arc(r+g,a+s-g,g,Math.PI/2,Math.PI),n.lineTo(r,a+u),u!==0&&n.arc(r+u,a+u,u,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(n,t,r){if(t){var a=t.x1,o=t.x2,s=t.y1,l=t.y2;n.x1=a,n.x2=o,n.y1=s,n.y2=l;var u=r&&r.lineWidth;return u&&(round$2(a*2)===round$2(o*2)&&(n.x1=n.x2=subPixelOptimize$1(a,u,!0)),round$2(s*2)===round$2(l*2)&&(n.y1=n.y2=subPixelOptimize$1(s,u,!0))),n}}function subPixelOptimizeRect$1(n,t,r){if(t){var a=t.x,o=t.y,s=t.width,l=t.height;n.x=a,n.y=o,n.width=s,n.height=l;var u=r&&r.lineWidth;return u&&(n.x=subPixelOptimize$1(a,u,!0),n.y=subPixelOptimize$1(o,u,!0),n.width=Math.max(subPixelOptimize$1(a+s,u,!1)-n.x,s===0?0:1),n.height=Math.max(subPixelOptimize$1(o+l,u,!1)-n.y,l===0?0:1)),n}}function subPixelOptimize$1(n,t,r){if(!t)return n;var a=round$2(n*2);return(a+round$2(t))%2===0?a/2:(a+(r?1:-1))/2}var RectShape=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),subPixelOptimizeOutputShape$1={},Rect$2=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new RectShape},t.prototype.buildPath=function(r,a){var o,s,l,u;if(this.subPixelOptimize){var d=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,a,this.style);o=d.x,s=d.y,l=d.width,u=d.height,d.r=a.r,a=d}else o=a.x,s=a.y,l=a.width,u=a.height;a.r?buildPath$2(r,a):r.rect(o,s,l,u)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Path$1);Rect$2.prototype.type="rect";const Rect$3=Rect$2;var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(n){__extends(t,n);function t(r){var a=n.call(this)||this;return a.type="text",a._children=[],a._defaultStyle=DEFAULT_RICH_TEXT_COLOR,a.attr(r),a}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var a=this._children[r];a.zlevel=this.zlevel,a.z=this.z,a.z2=this.z2,a.culling=this.culling,a.cursor=this.cursor,a.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):n.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var a=this.innerTransformable;return a?a.getLocalTransform(r):n.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){n.prototype.addSelfToZr.call(this,r);for(var a=0;a<this._children.length;a++)this._children[a].__zr=r},t.prototype.removeSelfFromZr=function(r){n.prototype.removeSelfFromZr.call(this,r);for(var a=0;a<this._children.length;a++)this._children[a].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new BoundingRect$1(0,0,0,0),a=this._children,o=[],s=null,l=0;l<a.length;l++){var u=a[l],d=u.getBoundingRect(),v=u.getLocalTransform(o);v?(r.copy(d),r.applyTransform(v),s=s||r.clone(),s.union(r)):(s=s||d.clone(),s.union(d))}this._rect=s||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||DEFAULT_RICH_TEXT_COLOR},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,a){if(!a)return r;var o=a.rich,s=r.rich||o&&{};return extend(r,a),o&&s?(this._mergeRich(s,o),r.rich=s):s&&(r.rich=s),r},t.prototype._mergeRich=function(r,a){for(var o=keys(a),s=0;s<o.length;s++){var l=o[s];r[l]=r[l]||{},extend(r[l],a[l])}},t.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},t.prototype._getOrCreateChild=function(r){var a=this._children[this._childCursor];return(!a||!(a instanceof r))&&(a=new r),this._children[this._childCursor++]=a,a.__zr=this.__zr,a.parent=this,a},t.prototype._updatePlainTexts=function(){var r=this.style,a=r.font||DEFAULT_FONT,o=r.padding,s=getStyleText(r),l=parsePlainText(s,r),u=needDrawBackground(r),d=!!r.backgroundColor,v=l.outerHeight,g=l.outerWidth,f=l.contentWidth,c=l.lines,y=l.lineHeight,_=this._defaultStyle,b=r.x||0,S=r.y||0,x=r.align||_.align||"left",w=r.verticalAlign||_.verticalAlign||"top",T=b,A=adjustTextY(S,l.contentHeight,w);if(u||o){var E=adjustTextX(b,g,x),$=adjustTextY(S,v,w);u&&this._renderBackground(r,r,E,$,g,v)}A+=y/2,o&&(T=getTextXForPadding(b,x,o),w==="top"?A+=o[0]:w==="bottom"&&(A-=o[2]));for(var P=0,I=!1,C=getFill("fill"in r?r.fill:(I=!0,_.fill)),M=getStroke("stroke"in r?r.stroke:!d&&(!_.autoStroke||I)?(P=DEFAULT_STROKE_LINE_WIDTH,_.stroke):null),D=r.textShadowBlur>0,R=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),N=l.calculatedLineHeight,O=0;O<c.length;O++){var F=this._getOrCreateChild(TSpan$1),L=F.createStyle();F.useStyle(L),L.text=c[O],L.x=T,L.y=A,x&&(L.textAlign=x),L.textBaseline="middle",L.opacity=r.opacity,L.strokeFirst=!0,D&&(L.shadowBlur=r.textShadowBlur||0,L.shadowColor=r.textShadowColor||"transparent",L.shadowOffsetX=r.textShadowOffsetX||0,L.shadowOffsetY=r.textShadowOffsetY||0),L.stroke=M,L.fill=C,M&&(L.lineWidth=r.lineWidth||P,L.lineDash=r.lineDash,L.lineDashOffset=r.lineDashOffset||0),L.font=a,setSeparateFont(L,r),A+=y,R&&F.setBoundingRect(new BoundingRect$1(adjustTextX(L.x,r.width,L.textAlign),adjustTextY(L.y,N,L.textBaseline),f,N))}},t.prototype._updateRichTexts=function(){var r=this.style,a=getStyleText(r),o=parseRichText(a,r),s=o.width,l=o.outerWidth,u=o.outerHeight,d=r.padding,v=r.x||0,g=r.y||0,f=this._defaultStyle,c=r.align||f.align,y=r.verticalAlign||f.verticalAlign,_=adjustTextX(v,l,c),b=adjustTextY(g,u,y),S=_,x=b;d&&(S+=d[3],x+=d[0]);var w=S+s;needDrawBackground(r)&&this._renderBackground(r,r,_,b,l,u);for(var T=!!r.backgroundColor,A=0;A<o.lines.length;A++){for(var E=o.lines[A],$=E.tokens,P=$.length,I=E.lineHeight,C=E.width,M=0,D=S,R=w,N=P-1,O=void 0;M<P&&(O=$[M],!O.align||O.align==="left");)this._placeToken(O,r,I,x,D,"left",T),C-=O.width,D+=O.width,M++;for(;N>=0&&(O=$[N],O.align==="right");)this._placeToken(O,r,I,x,R,"right",T),C-=O.width,R-=O.width,N--;for(D+=(s-(D-S)-(w-R)-C)/2;M<=N;)O=$[M],this._placeToken(O,r,I,x,D+O.width/2,"center",T),D+=O.width,M++;x+=I}},t.prototype._placeToken=function(r,a,o,s,l,u,d){var v=a.rich[r.styleName]||{};v.text=r.text;var g=r.verticalAlign,f=s+o/2;g==="top"?f=s+r.height/2:g==="bottom"&&(f=s+o-r.height/2);var c=!r.isLineHolder&&needDrawBackground(v);c&&this._renderBackground(v,a,u==="right"?l-r.width:u==="center"?l-r.width/2:l,f-r.height/2,r.width,r.height);var y=!!v.backgroundColor,_=r.textPadding;_&&(l=getTextXForPadding(l,u,_),f-=r.height/2-_[0]-r.innerHeight/2);var b=this._getOrCreateChild(TSpan$1),S=b.createStyle();b.useStyle(S);var x=this._defaultStyle,w=!1,T=0,A=getFill("fill"in v?v.fill:"fill"in a?a.fill:(w=!0,x.fill)),E=getStroke("stroke"in v?v.stroke:"stroke"in a?a.stroke:!y&&!d&&(!x.autoStroke||w)?(T=DEFAULT_STROKE_LINE_WIDTH,x.stroke):null),$=v.textShadowBlur>0||a.textShadowBlur>0;S.text=r.text,S.x=l,S.y=f,$&&(S.shadowBlur=v.textShadowBlur||a.textShadowBlur||0,S.shadowColor=v.textShadowColor||a.textShadowColor||"transparent",S.shadowOffsetX=v.textShadowOffsetX||a.textShadowOffsetX||0,S.shadowOffsetY=v.textShadowOffsetY||a.textShadowOffsetY||0),S.textAlign=u,S.textBaseline="middle",S.font=r.font||DEFAULT_FONT,S.opacity=retrieve3(v.opacity,a.opacity,1),setSeparateFont(S,v),E&&(S.lineWidth=retrieve3(v.lineWidth,a.lineWidth,T),S.lineDash=retrieve2(v.lineDash,a.lineDash),S.lineDashOffset=a.lineDashOffset||0,S.stroke=E),A&&(S.fill=A);var P=r.contentWidth,I=r.contentHeight;b.setBoundingRect(new BoundingRect$1(adjustTextX(S.x,P,S.textAlign),adjustTextY(S.y,I,S.textBaseline),P,I))},t.prototype._renderBackground=function(r,a,o,s,l,u){var d=r.backgroundColor,v=r.borderWidth,g=r.borderColor,f=d&&d.image,c=d&&!f,y=r.borderRadius,_=this,b,S;if(c||r.lineHeight||v&&g){b=this._getOrCreateChild(Rect$3),b.useStyle(b.createStyle()),b.style.fill=null;var x=b.shape;x.x=o,x.y=s,x.width=l,x.height=u,x.r=y,b.dirtyShape()}if(c){var w=b.style;w.fill=d||null,w.fillOpacity=retrieve2(r.fillOpacity,1)}else if(f){S=this._getOrCreateChild(ZRImage$1),S.onload=function(){_.dirtyStyle()};var T=S.style;T.image=d.image,T.x=o,T.y=s,T.width=l,T.height=u}if(v&&g){var w=b.style;w.lineWidth=v,w.stroke=g,w.strokeOpacity=retrieve2(r.strokeOpacity,1),w.lineDash=r.borderDash,w.lineDashOffset=r.borderDashOffset||0,b.strokeContainThreshold=0,b.hasFill()&&b.hasStroke()&&(w.strokeFirst=!0,w.lineWidth*=2)}var A=(b||S).style;A.shadowBlur=r.shadowBlur||0,A.shadowColor=r.shadowColor||"transparent",A.shadowOffsetX=r.shadowOffsetX||0,A.shadowOffsetY=r.shadowOffsetY||0,A.opacity=retrieve3(r.opacity,a.opacity,1)},t.makeFont=function(r){var a="";return hasSeparateFont(r)&&(a=[r.fontStyle,r.fontWeight,parseFontSize(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),a&&trim$1(a)||r.textFont||r.font},t}(Displayable$1),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?DEFAULT_FONT_SIZE+"px":n+"px"}function setSeparateFont(n,t){for(var r=0;r<FONT_PARTS.length;r++){var a=FONT_PARTS[r],o=t[a];o!=null&&(n[a]=o)}}function hasSeparateFont(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function normalizeTextStyle(n){return normalizeStyle(n),each$f(n.rich,normalizeStyle),n}function normalizeStyle(n){if(n){n.font=ZRText.makeFont(n);var t=n.align;t==="middle"&&(t="center"),n.align=t==null||VALID_TEXT_ALIGN[t]?t:"left";var r=n.verticalAlign;r==="center"&&(r="middle"),n.verticalAlign=r==null||VALID_TEXT_VERTICAL_ALIGN[r]?r:"top";var a=n.padding;a&&(n.padding=normalizeCssArray$1(n.padding))}}function getStroke(n,t){return n==null||t<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function getFill(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function getTextXForPadding(n,t,r){return t==="right"?n-r[1]:t==="center"?n+r[3]/2-r[1]/2:n+r[3]}function getStyleText(n){var t=n.text;return t!=null&&(t+=""),t}function needDrawBackground(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}const ZRText$1=ZRText;var getECData=makeInner(),setCommonECData=function(n,t,r,a){if(a){var o=getECData(a);o.dataIndex=r,o.dataType=t,o.seriesIndex=n,a.type==="group"&&a.traverse(function(s){var l=getECData(s);l.seriesIndex=n,l.dataIndex=r,l.dataType=t})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(n){return n!=null&&n!=="none"}var liftedColorCache=new LRU$1(100);function liftColor(n){if(isString(n)){var t=liftedColorCache.get(n);return t||(t=lift(n,-.1),liftedColorCache.put(n,t)),t}else if(isGradientObject(n)){var r=extend({},n);return r.colorStops=map$1(n.colorStops,function(a){return{offset:a.offset,color:lift(a.color,-.1)}}),r}return n}function doChangeHoverState(n,t,r){n.onHoverStateChange&&(n.hoverState||0)!==r&&n.onHoverStateChange(t),n.hoverState=r}function singleEnterEmphasis(n){doChangeHoverState(n,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(n){n.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(n,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(n){doChangeHoverState(n,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(n){n.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(n,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(n){n.selected=!0}function singleLeaveSelect(n){n.selected=!1}function updateElementState(n,t,r){t(n,r)}function traverseUpdateState(n,t,r){updateElementState(n,t,r),n.isGroup&&n.traverse(function(a){updateElementState(a,t,r)})}function setStatesFlag(n,t){switch(t){case"emphasis":n.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":n.hoverState=HOVER_STATE_NORMAL;break;case"blur":n.hoverState=HOVER_STATE_BLUR;break;case"select":n.selected=!0}}function getFromStateStyle(n,t,r,a){for(var o=n.style,s={},l=0;l<t.length;l++){var u=t[l],d=o[u];s[u]=d??(a&&a[u])}for(var l=0;l<n.animators.length;l++){var v=n.animators[l];v.__fromStateTransition&&v.__fromStateTransition.indexOf(r)<0&&v.targetName==="style"&&v.saveTo(s,t)}return s}function createEmphasisDefaultState(n,t,r,a){var o=r&&indexOf(r,"select")>=0,s=!1;if(n instanceof Path$1){var l=getSavedStates(n),u=o&&l.selectFill||l.normalFill,d=o&&l.selectStroke||l.normalStroke;if(hasFillOrStroke(u)||hasFillOrStroke(d)){a=a||{};var v=a.style||{};v.fill==="inherit"?(s=!0,a=extend({},a),v=extend({},v),v.fill=u):!hasFillOrStroke(v.fill)&&hasFillOrStroke(u)?(s=!0,a=extend({},a),v=extend({},v),v.fill=liftColor(u)):!hasFillOrStroke(v.stroke)&&hasFillOrStroke(d)&&(s||(a=extend({},a),v=extend({},v)),v.stroke=liftColor(d)),a.style=v}}if(a&&a.z2==null){s||(a=extend({},a));var g=n.z2EmphasisLift;a.z2=n.z2+(g??Z2_EMPHASIS_LIFT)}return a}function createSelectDefaultState(n,t,r){if(r&&r.z2==null){r=extend({},r);var a=n.z2SelectLift;r.z2=n.z2+(a??Z2_SELECT_LIFT)}return r}function createBlurDefaultState(n,t,r){var a=indexOf(n.currentStates,t)>=0,o=n.style.opacity,s=a?null:getFromStateStyle(n,["opacity"],t,{opacity:1});r=r||{};var l=r.style||{};return l.opacity==null&&(r=extend({},r),l=extend({opacity:a?o:s.opacity*.1},l),r.style=l),r}function elementStateProxy(n,t){var r=this.states[n];if(this.style){if(n==="emphasis")return createEmphasisDefaultState(this,n,t,r);if(n==="blur")return createBlurDefaultState(this,n,r);if(n==="select")return createSelectDefaultState(this,n,r)}return r}function setDefaultStateProxy(n){n.stateProxy=elementStateProxy;var t=n.getTextContent(),r=n.getTextGuideLine();t&&(t.stateProxy=elementStateProxy),r&&(r.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(n,t){!shouldSilent(n,t)&&!n.__highByOuter&&traverseUpdateState(n,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(n,t){!shouldSilent(n,t)&&!n.__highByOuter&&traverseUpdateState(n,singleLeaveEmphasis)}function enterEmphasis(n,t){n.__highByOuter|=1<<(t||0),traverseUpdateState(n,singleEnterEmphasis)}function leaveEmphasis(n,t){!(n.__highByOuter&=~(1<<(t||0)))&&traverseUpdateState(n,singleLeaveEmphasis)}function enterBlur(n){traverseUpdateState(n,singleEnterBlur)}function leaveBlur(n){traverseUpdateState(n,singleLeaveBlur)}function enterSelect(n){traverseUpdateState(n,singleEnterSelect)}function leaveSelect(n){traverseUpdateState(n,singleLeaveSelect)}function shouldSilent(n,t){return n.__highDownSilentOnTouch&&t.zrByTouch}function allLeaveBlur(n){var t=n.getModel(),r=[],a=[];t.eachComponent(function(o,s){var l=getComponentStates(s),u=o==="series",d=u?n.getViewOfSeriesModel(s):n.getViewOfComponentModel(s);!u&&a.push(d),l.isBlured&&(d.group.traverse(function(v){singleLeaveBlur(v)}),u&&r.push(s)),l.isBlured=!1}),each$f(a,function(o){o&&o.toggleBlurSeries&&o.toggleBlurSeries(r,!1,t)})}function blurSeries(n,t,r,a){var o=a.getModel();r=r||"coordinateSystem";function s(v,g){for(var f=0;f<g.length;f++){var c=v.getItemGraphicEl(g[f]);c&&leaveBlur(c)}}if(n!=null&&!(!t||t==="none")){var l=o.getSeriesByIndex(n),u=l.coordinateSystem;u&&u.master&&(u=u.master);var d=[];o.eachSeries(function(v){var g=l===v,f=v.coordinateSystem;f&&f.master&&(f=f.master);var c=f&&u?f===u:g;if(!(r==="series"&&!g||r==="coordinateSystem"&&!c||t==="series"&&g)){var y=a.getViewOfSeriesModel(v);if(y.group.traverse(function(S){singleEnterBlur(S)}),isArrayLike(t))s(v.getData(),t);else if(isObject$3(t))for(var _=keys(t),b=0;b<_.length;b++)s(v.getData(_[b]),t[_[b]]);d.push(v),getComponentStates(v).isBlured=!0}}),o.eachComponent(function(v,g){if(v!=="series"){var f=a.getViewOfComponentModel(g);f&&f.toggleBlurSeries&&f.toggleBlurSeries(d,!0,o)}})}}function blurComponent(n,t,r){if(!(n==null||t==null)){var a=r.getModel().getComponent(n,t);if(a){getComponentStates(a).isBlured=!0;var o=r.getViewOfComponentModel(a);!o||!o.focusBlurEnabled||o.group.traverse(function(s){singleEnterBlur(s)})}}}function blurSeriesFromHighlightPayload(n,t,r){var a=n.seriesIndex,o=n.getData(t.dataType);if(o){var s=queryDataIndex(o,t);s=(isArray$1(s)?s[0]:s)||0;var l=o.getItemGraphicEl(s);if(!l)for(var u=o.count(),d=0;!l&&d<u;)l=o.getItemGraphicEl(d++);if(l){var v=getECData(l);blurSeries(a,v.focus,v.blurScope,r)}else{var g=n.get(["emphasis","focus"]),f=n.get(["emphasis","blurScope"]);g!=null&&blurSeries(a,g,f,r)}}}function findComponentHighDownDispatchers(n,t,r,a){var o={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||t==null||r==null)return o;var s=a.getModel().getComponent(n,t);if(!s)return o;var l=a.getViewOfComponentModel(s);if(!l||!l.findHighDownDispatchers)return o;for(var u=l.findHighDownDispatchers(r),d,v=0;v<u.length;v++)if(getECData(u[v]).focus==="self"){d=!0;break}return{focusSelf:d,dispatchers:u}}function handleGlobalMouseOverForHighDown(n,t,r){var a=getECData(n),o=findComponentHighDownDispatchers(a.componentMainType,a.componentIndex,a.componentHighDownName,r),s=o.dispatchers,l=o.focusSelf;s?(l&&blurComponent(a.componentMainType,a.componentIndex,r),each$f(s,function(u){return enterEmphasisWhenMouseOver(u,t)})):(blurSeries(a.seriesIndex,a.focus,a.blurScope,r),a.focus==="self"&&blurComponent(a.componentMainType,a.componentIndex,r),enterEmphasisWhenMouseOver(n,t))}function handleGlobalMouseOutForHighDown(n,t,r){allLeaveBlur(r);var a=getECData(n),o=findComponentHighDownDispatchers(a.componentMainType,a.componentIndex,a.componentHighDownName,r).dispatchers;o?each$f(o,function(s){return leaveEmphasisWhenMouseOut(s,t)}):leaveEmphasisWhenMouseOut(n,t)}function toggleSelectionFromPayload(n,t,r){if(isSelectChangePayload(t)){var a=t.dataType,o=n.getData(a),s=queryDataIndex(o,t);isArray$1(s)||(s=[s]),n[t.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":t.type===SELECT_ACTION_TYPE?"select":"unselect"](s,a)}}function updateSeriesElementSelection(n){var t=n.getAllData();each$f(t,function(r){var a=r.data,o=r.type;a.eachItemGraphicEl(function(s,l){n.isSelected(l,o)?enterSelect(s):leaveSelect(s)})})}function getAllSelectedIndices(n){var t=[];return n.eachSeries(function(r){var a=r.getAllData();each$f(a,function(o){o.data;var s=o.type,l=r.getSelectedDataIndices();if(l.length>0){var u={dataIndex:l,seriesIndex:r.seriesIndex};s!=null&&(u.dataType=s),t.push(u)}})}),t}function enableHoverEmphasis(n,t,r){setAsHighDownDispatcher(n,!0),traverseUpdateState(n,setDefaultStateProxy),enableHoverFocus(n,t,r)}function disableHoverEmphasis(n){setAsHighDownDispatcher(n,!1)}function toggleHoverEmphasis(n,t,r,a){a?disableHoverEmphasis(n):enableHoverEmphasis(n,t,r)}function enableHoverFocus(n,t,r){var a=getECData(n);t!=null?(a.focus=t,a.blurScope=r):a.focus&&(a.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(n,t,r,a){r=r||"itemStyle";for(var o=0;o<OTHER_STATES.length;o++){var s=OTHER_STATES[o],l=t.getModel([s,r]),u=n.ensureState(s);u.style=a?a(l):l[defaultStyleGetterMap[r]]()}}function setAsHighDownDispatcher(n,t){var r=t===!1,a=n;n.highDownSilentOnTouch&&(a.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!r||a.__highDownDispatcher)&&(a.__highByOuter=a.__highByOuter||0,a.__highDownDispatcher=!r)}function isHighDownDispatcher(n){return!!(n&&n.__highDownDispatcher)}function enableComponentHighDownFeatures(n,t,r){var a=getECData(n);a.componentMainType=t.mainType,a.componentIndex=t.componentIndex,a.componentHighDownName=r}function getHighlightDigit(n){var t=_highlightKeyMap[n];return t==null&&_highlightNextDigit<=32&&(t=_highlightKeyMap[n]=_highlightNextDigit++),t}function isSelectChangePayload(n){var t=n.type;return t===SELECT_ACTION_TYPE||t===UNSELECT_ACTION_TYPE||t===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(n){var t=n.type;return t===HIGHLIGHT_ACTION_TYPE||t===DOWNPLAY_ACTION_TYPE}function savePathStates(n){var t=getSavedStates(n);t.normalFill=n.style.fill,t.normalStroke=n.style.stroke;var r=n.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var CMD$2=PathProxy$1.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(n,t){if(t){var r=n.data,a=n.len(),o,s,l,u,d,v,g=CMD$2.M,f=CMD$2.C,c=CMD$2.L,y=CMD$2.R,_=CMD$2.A,b=CMD$2.Q;for(l=0,u=0;l<a;){switch(o=r[l++],u=l,s=0,o){case g:s=1;break;case c:s=1;break;case f:s=3;break;case b:s=2;break;case _:var S=t[4],x=t[5],w=mathSqrt$2(t[0]*t[0]+t[1]*t[1]),T=mathSqrt$2(t[2]*t[2]+t[3]*t[3]),A=mathAtan2(-t[1]/T,t[0]/w);r[l]*=w,r[l++]+=S,r[l]*=T,r[l++]+=x,r[l++]*=w,r[l++]*=T,r[l++]+=A,r[l++]+=A,l+=2,u=l;break;case y:v[0]=r[l++],v[1]=r[l++],applyTransform$1(v,v,t),r[u++]=v[0],r[u++]=v[1],v[0]+=r[l++],v[1]+=r[l++],applyTransform$1(v,v,t),r[u++]=v[0],r[u++]=v[1]}for(d=0;d<s;d++){var E=points$2[d];E[0]=r[l++],E[1]=r[l++],applyTransform$1(E,E,t),r[u++]=E[0],r[u++]=E[1]}}n.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function vRatio(n,t){return(n[0]*t[0]+n[1]*t[1])/(vMag(n)*vMag(t))}function vAngle(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(vRatio(n,t))}function processArc(n,t,r,a,o,s,l,u,d,v,g){var f=d*(PI$7/180),c=mathCos$2(f)*(n-r)/2+mathSin$2(f)*(t-a)/2,y=-1*mathSin$2(f)*(n-r)/2+mathCos$2(f)*(t-a)/2,_=c*c/(l*l)+y*y/(u*u);_>1&&(l*=mathSqrt$1(_),u*=mathSqrt$1(_));var b=(o===s?-1:1)*mathSqrt$1((l*l*(u*u)-l*l*(y*y)-u*u*(c*c))/(l*l*(y*y)+u*u*(c*c)))||0,S=b*l*y/u,x=b*-u*c/l,w=(n+r)/2+mathCos$2(f)*S-mathSin$2(f)*x,T=(t+a)/2+mathSin$2(f)*S+mathCos$2(f)*x,A=vAngle([1,0],[(c-S)/l,(y-x)/u]),E=[(c-S)/l,(y-x)/u],$=[(-1*c-S)/l,(-1*y-x)/u],P=vAngle(E,$);if(vRatio(E,$)<=-1&&(P=PI$7),vRatio(E,$)>=1&&(P=0),P<0){var I=Math.round(P/PI$7*1e6)/1e6;P=PI$7*2+I%2*PI$7}g.addData(v,w,T,l,u,A,P,f,s)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(n){var t=new PathProxy$1;if(!n)return t;var r=0,a=0,o=r,s=a,l,u=PathProxy$1.CMD,d=n.match(commandReg);if(!d)return t;for(var v=0;v<d.length;v++){for(var g=d[v],f=g.charAt(0),c=void 0,y=g.match(numberReg$1)||[],_=y.length,b=0;b<_;b++)y[b]=parseFloat(y[b]);for(var S=0;S<_;){var x=void 0,w=void 0,T=void 0,A=void 0,E=void 0,$=void 0,P=void 0,I=r,C=a,M=void 0,D=void 0;switch(f){case"l":r+=y[S++],a+=y[S++],c=u.L,t.addData(c,r,a);break;case"L":r=y[S++],a=y[S++],c=u.L,t.addData(c,r,a);break;case"m":r+=y[S++],a+=y[S++],c=u.M,t.addData(c,r,a),o=r,s=a,f="l";break;case"M":r=y[S++],a=y[S++],c=u.M,t.addData(c,r,a),o=r,s=a,f="L";break;case"h":r+=y[S++],c=u.L,t.addData(c,r,a);break;case"H":r=y[S++],c=u.L,t.addData(c,r,a);break;case"v":a+=y[S++],c=u.L,t.addData(c,r,a);break;case"V":a=y[S++],c=u.L,t.addData(c,r,a);break;case"C":c=u.C,t.addData(c,y[S++],y[S++],y[S++],y[S++],y[S++],y[S++]),r=y[S-2],a=y[S-1];break;case"c":c=u.C,t.addData(c,y[S++]+r,y[S++]+a,y[S++]+r,y[S++]+a,y[S++]+r,y[S++]+a),r+=y[S-2],a+=y[S-1];break;case"S":x=r,w=a,M=t.len(),D=t.data,l===u.C&&(x+=r-D[M-4],w+=a-D[M-3]),c=u.C,I=y[S++],C=y[S++],r=y[S++],a=y[S++],t.addData(c,x,w,I,C,r,a);break;case"s":x=r,w=a,M=t.len(),D=t.data,l===u.C&&(x+=r-D[M-4],w+=a-D[M-3]),c=u.C,I=r+y[S++],C=a+y[S++],r+=y[S++],a+=y[S++],t.addData(c,x,w,I,C,r,a);break;case"Q":I=y[S++],C=y[S++],r=y[S++],a=y[S++],c=u.Q,t.addData(c,I,C,r,a);break;case"q":I=y[S++]+r,C=y[S++]+a,r+=y[S++],a+=y[S++],c=u.Q,t.addData(c,I,C,r,a);break;case"T":x=r,w=a,M=t.len(),D=t.data,l===u.Q&&(x+=r-D[M-4],w+=a-D[M-3]),r=y[S++],a=y[S++],c=u.Q,t.addData(c,x,w,r,a);break;case"t":x=r,w=a,M=t.len(),D=t.data,l===u.Q&&(x+=r-D[M-4],w+=a-D[M-3]),r+=y[S++],a+=y[S++],c=u.Q,t.addData(c,x,w,r,a);break;case"A":T=y[S++],A=y[S++],E=y[S++],$=y[S++],P=y[S++],I=r,C=a,r=y[S++],a=y[S++],c=u.A,processArc(I,C,r,a,$,P,T,A,E,c,t);break;case"a":T=y[S++],A=y[S++],E=y[S++],$=y[S++],P=y[S++],I=r,C=a,r+=y[S++],a+=y[S++],c=u.A,processArc(I,C,r,a,$,P,T,A,E,c,t);break}}(f==="z"||f==="Z")&&(c=u.Z,t.addData(c),r=o,a=s),l=c}return t.toStatic(),t}var SVGPath=function(n){__extends(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(Path$1);function isPathProxy(n){return n.setData!=null}function createPathOptions(n,t){var r=createPathProxyFromString(n),a=extend({},t);return a.buildPath=function(o){if(isPathProxy(o)){o.setData(r.data);var s=o.getContext();s&&o.rebuildPath(s,1)}else{var s=o;r.rebuildPath(s,1)}},a.applyTransform=function(o){transformPath(r,o),this.dirtyShape()},a}function createFromString(n,t){return new SVGPath(createPathOptions(n,t))}function extendFromString(n,t){var r=createPathOptions(n,t),a=function(o){__extends(s,o);function s(l){var u=o.call(this,l)||this;return u.applyTransform=r.applyTransform,u.buildPath=r.buildPath,u}return s}(SVGPath);return a}function mergePath$1(n,t){for(var r=[],a=n.length,o=0;o<a;o++){var s=n[o];r.push(s.getUpdatedPathProxy(!0))}var l=new Path$1(t);return l.createPathProxy(),l.buildPath=function(u){if(isPathProxy(u)){u.appendPath(r);var d=u.getContext();d&&u.rebuildPath(d,1)}},l}function clonePath(n,t){t=t||{};var r=new Path$1;return n.shape&&r.setShape(n.shape),r.setStyle(n.style),t.bakeTransform?transformPath(r.path,n.getComputedTransform()):t.toLocal?r.setLocalTransform(n.getComputedTransform()):r.copyTransform(n),r.buildPath=n.buildPath,r.applyTransform=r.applyTransform,r.z=n.z,r.z2=n.z2,r.zlevel=n.zlevel,r}var CircleShape=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),Circle=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new CircleShape},t.prototype.buildPath=function(r,a){r.moveTo(a.cx+a.r,a.cy),r.arc(a.cx,a.cy,a.r,0,Math.PI*2)},t}(Path$1);Circle.prototype.type="circle";const Circle$1=Circle;var EllipseShape=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),Ellipse=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new EllipseShape},t.prototype.buildPath=function(r,a){var o=.5522848,s=a.cx,l=a.cy,u=a.rx,d=a.ry,v=u*o,g=d*o;r.moveTo(s-u,l),r.bezierCurveTo(s-u,l-g,s-v,l-d,s,l-d),r.bezierCurveTo(s+v,l-d,s+u,l-g,s+u,l),r.bezierCurveTo(s+u,l+g,s+v,l+d,s,l+d),r.bezierCurveTo(s-v,l+d,s-u,l+g,s-u,l),r.closePath()},t}(Path$1);Ellipse.prototype.type="ellipse";const Ellipse$1=Ellipse;var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(n,t,r,a,o,s,l,u){var d=r-n,v=a-t,g=l-o,f=u-s,c=f*d-g*v;if(!(c*c<e))return c=(g*(t-s)-f*(n-o))/c,[n+c*d,t+c*v]}function computeCornerTangents(n,t,r,a,o,s,l){var u=n-r,d=t-a,v=(l?s:-s)/mathSqrt(u*u+d*d),g=v*d,f=-v*u,c=n+g,y=t+f,_=r+g,b=a+f,S=(c+_)/2,x=(y+b)/2,w=_-c,T=b-y,A=w*w+T*T,E=o-s,$=c*b-_*y,P=(T<0?-1:1)*mathSqrt(mathMax$7(0,E*E*A-$*$)),I=($*T-w*P)/A,C=(-$*w-T*P)/A,M=($*T+w*P)/A,D=(-$*w+T*P)/A,R=I-S,N=C-x,O=M-S,F=D-x;return R*R+N*N>O*O+F*F&&(I=M,C=D),{cx:I,cy:C,x0:-g,y0:-f,x1:I*(o/E-1),y1:C*(o/E-1)}}function normalizeCornerRadius(n){var t;if(isArray$1(n)){var r=n.length;if(!r)return n;r===1?t=[n[0],n[0],0,0]:r===2?t=[n[0],n[0],n[1],n[1]]:r===3?t=n.concat(n[2]):t=n}else t=[n,n,n,n];return t}function buildPath$1(n,t){var r,a=mathMax$7(t.r,0),o=mathMax$7(t.r0||0,0),s=a>0,l=o>0;if(!(!s&&!l)){if(s||(a=o,o=0),o>a){var u=a;a=o,o=u}var d=t.startAngle,v=t.endAngle;if(!(isNaN(d)||isNaN(v))){var g=t.cx,f=t.cy,c=!!t.clockwise,y=mathAbs$1(v-d),_=y>PI2$3&&y%PI2$3;if(_>e&&(y=_),!(a>e))n.moveTo(g,f);else if(y>PI2$3-e)n.moveTo(g+a*mathCos$1(d),f+a*mathSin$1(d)),n.arc(g,f,a,d,v,!c),o>e&&(n.moveTo(g+o*mathCos$1(v),f+o*mathSin$1(v)),n.arc(g,f,o,v,d,c));else{var b=void 0,S=void 0,x=void 0,w=void 0,T=void 0,A=void 0,E=void 0,$=void 0,P=void 0,I=void 0,C=void 0,M=void 0,D=void 0,R=void 0,N=void 0,O=void 0,F=a*mathCos$1(d),L=a*mathSin$1(d),B=o*mathCos$1(v),V=o*mathSin$1(v),H=y>e;if(H){var X=t.cornerRadius;X&&(r=normalizeCornerRadius(X),b=r[0],S=r[1],x=r[2],w=r[3]);var U=mathAbs$1(a-o)/2;if(T=mathMin$7(U,x),A=mathMin$7(U,w),E=mathMin$7(U,b),$=mathMin$7(U,S),C=P=mathMax$7(T,A),M=I=mathMax$7(E,$),(P>e||I>e)&&(D=a*mathCos$1(v),R=a*mathSin$1(v),N=o*mathCos$1(d),O=o*mathSin$1(d),y<PI$6)){var te=intersect(F,L,N,O,D,R,B,V);if(te){var ee=F-te[0],q=L-te[1],ie=D-te[0],pe=R-te[1],j=1/mathSin$1(mathACos((ee*ie+q*pe)/(mathSqrt(ee*ee+q*q)*mathSqrt(ie*ie+pe*pe)))/2),Q=mathSqrt(te[0]*te[0]+te[1]*te[1]);C=mathMin$7(P,(a-Q)/(j+1)),M=mathMin$7(I,(o-Q)/(j-1))}}}if(!H)n.moveTo(g+F,f+L);else if(C>e){var J=mathMin$7(x,C),oe=mathMin$7(w,C),ne=computeCornerTangents(N,O,F,L,a,J,c),z=computeCornerTangents(D,R,B,V,a,oe,c);n.moveTo(g+ne.cx+ne.x0,f+ne.cy+ne.y0),C<P&&J===oe?n.arc(g+ne.cx,f+ne.cy,C,mathATan2(ne.y0,ne.x0),mathATan2(z.y0,z.x0),!c):(J>0&&n.arc(g+ne.cx,f+ne.cy,J,mathATan2(ne.y0,ne.x0),mathATan2(ne.y1,ne.x1),!c),n.arc(g,f,a,mathATan2(ne.cy+ne.y1,ne.cx+ne.x1),mathATan2(z.cy+z.y1,z.cx+z.x1),!c),oe>0&&n.arc(g+z.cx,f+z.cy,oe,mathATan2(z.y1,z.x1),mathATan2(z.y0,z.x0),!c))}else n.moveTo(g+F,f+L),n.arc(g,f,a,d,v,!c);if(!(o>e)||!H)n.lineTo(g+B,f+V);else if(M>e){var J=mathMin$7(b,M),oe=mathMin$7(S,M),ne=computeCornerTangents(B,V,D,R,o,-oe,c),z=computeCornerTangents(F,L,N,O,o,-J,c);n.lineTo(g+ne.cx+ne.x0,f+ne.cy+ne.y0),M<I&&J===oe?n.arc(g+ne.cx,f+ne.cy,M,mathATan2(ne.y0,ne.x0),mathATan2(z.y0,z.x0),!c):(oe>0&&n.arc(g+ne.cx,f+ne.cy,oe,mathATan2(ne.y0,ne.x0),mathATan2(ne.y1,ne.x1),!c),n.arc(g,f,o,mathATan2(ne.cy+ne.y1,ne.cx+ne.x1),mathATan2(z.cy+z.y1,z.cx+z.x1),c),J>0&&n.arc(g+z.cx,f+z.cy,J,mathATan2(z.y1,z.x1),mathATan2(z.y0,z.x0),!c))}else n.lineTo(g+B,f+V),n.arc(g,f,o,v,d,c)}n.closePath()}}}var SectorShape=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),Sector=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new SectorShape},t.prototype.buildPath=function(r,a){buildPath$1(r,a)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Path$1);Sector.prototype.type="sector";const Sector$1=Sector;var RingShape=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),Ring=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new RingShape},t.prototype.buildPath=function(r,a){var o=a.cx,s=a.cy,l=Math.PI*2;r.moveTo(o+a.r,s),r.arc(o,s,a.r,0,l,!1),r.moveTo(o+a.r0,s),r.arc(o,s,a.r0,0,l,!0)},t}(Path$1);Ring.prototype.type="ring";const Ring$1=Ring;function smoothBezier(n,t,r,a){var o=[],s=[],l=[],u=[],d,v,g,f;if(a){g=[1/0,1/0],f=[-1/0,-1/0];for(var c=0,y=n.length;c<y;c++)min$1(g,g,n[c]),max$1(f,f,n[c]);min$1(g,g,a[0]),max$1(f,f,a[1])}for(var c=0,y=n.length;c<y;c++){var _=n[c];if(r)d=n[c?c-1:y-1],v=n[(c+1)%y];else if(c===0||c===y-1){o.push(clone$3(n[c]));continue}else d=n[c-1],v=n[c+1];sub(s,v,d),scale$2(s,s,t);var b=distance(_,d),S=distance(_,v),x=b+S;x!==0&&(b/=x,S/=x),scale$2(l,s,-b),scale$2(u,s,S);var w=add([],_,l),T=add([],_,u);a&&(max$1(w,w,g),min$1(w,w,f),max$1(T,T,g),min$1(T,T,f)),o.push(w),o.push(T)}return r&&o.push(o.shift()),o}function buildPath(n,t,r){var a=t.smooth,o=t.points;if(o&&o.length>=2){if(a){var s=smoothBezier(o,a,r,t.smoothConstraint);n.moveTo(o[0][0],o[0][1]);for(var l=o.length,u=0;u<(r?l:l-1);u++){var d=s[u*2],v=s[u*2+1],g=o[(u+1)%l];n.bezierCurveTo(d[0],d[1],v[0],v[1],g[0],g[1])}}else{n.moveTo(o[0][0],o[0][1]);for(var u=1,f=o.length;u<f;u++)n.lineTo(o[u][0],o[u][1])}r&&n.closePath()}}var PolygonShape=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),Polygon=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new PolygonShape},t.prototype.buildPath=function(r,a){buildPath(r,a,!0)},t}(Path$1);Polygon.prototype.type="polygon";const Polygon$1=Polygon;var PolylineShape=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),Polyline$2=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new PolylineShape},t.prototype.buildPath=function(r,a){buildPath(r,a,!1)},t}(Path$1);Polyline$2.prototype.type="polyline";const Polyline$3=Polyline$2;var subPixelOptimizeOutputShape={},LineShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),Line$2=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new LineShape},t.prototype.buildPath=function(r,a){var o,s,l,u;if(this.subPixelOptimize){var d=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,a,this.style);o=d.x1,s=d.y1,l=d.x2,u=d.y2}else o=a.x1,s=a.y1,l=a.x2,u=a.y2;var v=a.percent;v!==0&&(r.moveTo(o,s),v<1&&(l=o*(1-v)+l*v,u=s*(1-v)+u*v),r.lineTo(l,u))},t.prototype.pointAt=function(r){var a=this.shape;return[a.x1*(1-r)+a.x2*r,a.y1*(1-r)+a.y2*r]},t}(Path$1);Line$2.prototype.type="line";const Line$3=Line$2;var out=[],BezierCurveShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function someVectorAt(n,t,r){var a=n.cpx2,o=n.cpy2;return a!=null||o!=null?[(r?cubicDerivativeAt:cubicAt)(n.x1,n.cpx1,n.cpx2,n.x2,t),(r?cubicDerivativeAt:cubicAt)(n.y1,n.cpy1,n.cpy2,n.y2,t)]:[(r?quadraticDerivativeAt:quadraticAt$1)(n.x1,n.cpx1,n.x2,t),(r?quadraticDerivativeAt:quadraticAt$1)(n.y1,n.cpy1,n.y2,t)]}var BezierCurve=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new BezierCurveShape},t.prototype.buildPath=function(r,a){var o=a.x1,s=a.y1,l=a.x2,u=a.y2,d=a.cpx1,v=a.cpy1,g=a.cpx2,f=a.cpy2,c=a.percent;c!==0&&(r.moveTo(o,s),g==null||f==null?(c<1&&(quadraticSubdivide(o,d,l,c,out),d=out[1],l=out[2],quadraticSubdivide(s,v,u,c,out),v=out[1],u=out[2]),r.quadraticCurveTo(d,v,l,u)):(c<1&&(cubicSubdivide(o,d,g,l,c,out),d=out[1],g=out[2],l=out[3],cubicSubdivide(s,v,f,u,c,out),v=out[1],f=out[2],u=out[3]),r.bezierCurveTo(d,v,g,f,l,u)))},t.prototype.pointAt=function(r){return someVectorAt(this.shape,r,!1)},t.prototype.tangentAt=function(r){var a=someVectorAt(this.shape,r,!0);return normalize$3(a,a)},t}(Path$1);BezierCurve.prototype.type="bezier-curve";const BezierCurve$1=BezierCurve;var ArcShape=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),Arc=function(n){__extends(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ArcShape},t.prototype.buildPath=function(r,a){var o=a.cx,s=a.cy,l=Math.max(a.r,0),u=a.startAngle,d=a.endAngle,v=a.clockwise,g=Math.cos(u),f=Math.sin(u);r.moveTo(g*l+o,f*l+s),r.arc(o,s,l,u,d,!v)},t}(Path$1);Arc.prototype.type="arc";const Arc$1=Arc;var CompoundPath=function(n){__extends(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,a=this.shapeChanged(),o=0;o<r.length;o++)a=a||r[o].shapeChanged();a&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],a=this.getGlobalScale(),o=0;o<r.length;o++)r[o].path||r[o].createPathProxy(),r[o].path.setScale(a[0],a[1],r[o].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,a){for(var o=a.paths||[],s=0;s<o.length;s++)o[s].buildPath(r,o[s].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],a=0;a<r.length;a++)r[a].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path$1.prototype.getBoundingRect.call(this)},t}(Path$1);const CompoundPath$1=CompoundPath;var Gradient=function(){function n(t){this.colorStops=t||[]}return n.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},n}();const Gradient$1=Gradient;var LinearGradient=function(n){__extends(t,n);function t(r,a,o,s,l,u){var d=n.call(this,l)||this;return d.x=r??0,d.y=a??0,d.x2=o??1,d.y2=s??0,d.type="linear",d.global=u||!1,d}return t}(Gradient$1);const LinearGradient$1=LinearGradient;var RadialGradient=function(n){__extends(t,n);function t(r,a,o,s,l){var u=n.call(this,s)||this;return u.x=r??.5,u.y=a??.5,u.r=o??.5,u.type="radial",u.global=l||!1,u}return t}(Gradient$1);const RadialGradient$1=RadialGradient;var extent=[0,0],extent2=[0,0],minTv=new Point$1,maxTv=new Point$1,OrientedBoundingRect=function(){function n(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var a=0;a<4;a++)this._corners[a]=new Point$1;for(var a=0;a<2;a++)this._axes[a]=new Point$1;t&&this.fromBoundingRect(t,r)}return n.prototype.fromBoundingRect=function(t,r){var a=this._corners,o=this._axes,s=t.x,l=t.y,u=s+t.width,d=l+t.height;if(a[0].set(s,l),a[1].set(u,l),a[2].set(u,d),a[3].set(s,d),r)for(var v=0;v<4;v++)a[v].transform(r);Point$1.sub(o[0],a[1],a[0]),Point$1.sub(o[1],a[3],a[0]),o[0].normalize(),o[1].normalize();for(var v=0;v<2;v++)this._origin[v]=o[v].dot(a[0])},n.prototype.intersect=function(t,r){var a=!0,o=!r;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,t,minTv,maxTv,o,1)&&(a=!1,o)||!this._intersectCheckOneSide(t,this,minTv,maxTv,o,-1)&&(a=!1,o)||o||Point$1.copy(r,a?minTv:maxTv),a},n.prototype._intersectCheckOneSide=function(t,r,a,o,s,l){for(var u=!0,d=0;d<2;d++){var v=this._axes[d];if(this._getProjMinMaxOnAxis(d,t._corners,extent),this._getProjMinMaxOnAxis(d,r._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(u=!1,s)return u;var g=Math.abs(extent2[0]-extent[1]),f=Math.abs(extent[0]-extent2[1]);Math.min(g,f)>o.len()&&(g<f?Point$1.scale(o,v,-g*l):Point$1.scale(o,v,f*l))}else if(a){var g=Math.abs(extent2[0]-extent[1]),f=Math.abs(extent[0]-extent2[1]);Math.min(g,f)<a.len()&&(g<f?Point$1.scale(a,v,g*l):Point$1.scale(a,v,-f*l))}}return u},n.prototype._getProjMinMaxOnAxis=function(t,r,a){for(var o=this._axes[t],s=this._origin,l=r[0].dot(o)+s[t],u=l,d=l,v=1;v<r.length;v++){var g=r[v].dot(o)+s[t];u=Math.min(g,u),d=Math.max(g,d)}a[0]=u,a[1]=d},n}();const OrientedBoundingRect$1=OrientedBoundingRect;var m=[],IncrementalDisplayable=function(n){__extends(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,a){r.call(a,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,a){a?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,a){a=a||!1;for(var o=0;o<r.length;o++)this.addDisplayable(r[o],a)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var a=this._cursor;a<this._displayables.length;a++)r&&r(this._displayables[a]);for(var a=0;a<this._temporaryDisplayables.length;a++)r&&r(this._temporaryDisplayables[a])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var a=this._displayables[r];a.parent=this,a.update(),a.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var a=this._temporaryDisplayables[r];a.parent=this,a.update(),a.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new BoundingRect$1(1/0,1/0,-1/0,-1/0),a=0;a<this._displayables.length;a++){var o=this._displayables[a],s=o.getBoundingRect().clone();o.needLocalTransform()&&s.applyTransform(o.getLocalTransform(m)),r.union(s)}this._rect=r}return this._rect},t.prototype.contain=function(r,a){var o=this.transformCoordToLocal(r,a),s=this.getBoundingRect();if(s.contain(o[0],o[1]))for(var l=0;l<this._displayables.length;l++){var u=this._displayables[l];if(u.contain(r,a))return!0}return!1},t}(Displayable$1);const IncrementalDisplayable$1=IncrementalDisplayable;var transitionStore=makeInner();function getAnimationConfig(n,t,r,a,o){var s;if(t&&t.ecModel){var l=t.ecModel.getUpdatePayload();s=l&&l.animation}var u=t&&t.isAnimationEnabled(),d=n==="update";if(u){var v=void 0,g=void 0,f=void 0;a?(v=retrieve2(a.duration,200),g=retrieve2(a.easing,"cubicOut"),f=0):(v=t.getShallow(d?"animationDurationUpdate":"animationDuration"),g=t.getShallow(d?"animationEasingUpdate":"animationEasing"),f=t.getShallow(d?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(v=s.duration),s.easing!=null&&(g=s.easing),s.delay!=null&&(f=s.delay)),isFunction(f)&&(f=f(r,o)),isFunction(v)&&(v=v(r));var c={duration:v||0,delay:f,easing:g};return c}else return null}function animateOrSetProps(n,t,r,a,o,s,l){var u=!1,d;isFunction(o)?(l=s,s=o,o=null):isObject$3(o)&&(s=o.cb,l=o.during,u=o.isFrom,d=o.removeOpt,o=o.dataIndex);var v=n==="leave";v||t.stopAnimation("leave");var g=getAnimationConfig(n,a,o,v?d||{}:null,a&&a.getAnimationDelayParams?a.getAnimationDelayParams(t,o):null);if(g&&g.duration>0){var f=g.duration,c=g.delay,y=g.easing,_={duration:f,delay:c||0,easing:y,done:s,force:!!s||!!l,setToFinal:!v,scope:n,during:l};u?t.animateFrom(r,_):t.animateTo(r,_)}else t.stopAnimation(),!u&&t.attr(r),l&&l(1),s&&s()}function updateProps$1(n,t,r,a,o,s){animateOrSetProps("update",n,t,r,a,o,s)}function initProps(n,t,r,a,o,s){animateOrSetProps("enter",n,t,r,a,o,s)}function isElementRemoved(n){if(!n.__zr)return!0;for(var t=0;t<n.animators.length;t++){var r=n.animators[t];if(r.scope==="leave")return!0}return!1}function removeElement(n,t,r,a,o,s){isElementRemoved(n)||animateOrSetProps("leave",n,t,r,a,o,s)}function fadeOutDisplayable(n,t,r,a){n.removeTextContent(),n.removeTextGuideLine(),removeElement(n,{style:{opacity:0}},t,r,a)}function removeElementWithFadeOut(n,t,r){function a(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(o){o.isGroup||fadeOutDisplayable(o,t,r,a)}):fadeOutDisplayable(n,t,r,a)}function saveOldStyle(n){transitionStore(n).oldStyle=n.style}function getOldStyle(n){return transitionStore(n).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(n){return Path$1.extend(n)}var extendPathFromString=extendFromString;function extendPath(n,t){return extendPathFromString(n,t)}function registerShape(n,t){_customShapeMap[n]=t}function getShapeClass(n){if(_customShapeMap.hasOwnProperty(n))return _customShapeMap[n]}function makePath(n,t,r,a){var o=createFromString(n,t);return r&&(a==="center"&&(r=centerGraphic(r,o.getBoundingRect())),resizePath(o,r)),o}function makeImage(n,t,r){var a=new ZRImage$1({style:{image:n,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(o){if(r==="center"){var s={width:o.width,height:o.height};a.setStyle(centerGraphic(t,s))}}});return a}function centerGraphic(n,t){var r=t.width/t.height,a=n.height*r,o;a<=n.width?o=n.height:(a=n.width,o=a/r);var s=n.x+n.width/2,l=n.y+n.height/2;return{x:s-a/2,y:l-o/2,width:a,height:o}}var mergePath=mergePath$1;function resizePath(n,t){if(n.applyTransform){var r=n.getBoundingRect(),a=r.calculateTransform(t);n.applyTransform(a)}}function subPixelOptimizeLine(n,t){return subPixelOptimizeLine$1(n,n,{lineWidth:t}),n}function subPixelOptimizeRect(n){return subPixelOptimizeRect$1(n.shape,n.shape,n.style),n}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(n,t){for(var r=identity([]);n&&n!==t;)mul(r,n.getLocalTransform(),r),n=n.parent;return r}function applyTransform(n,t,r){return t&&!isArrayLike(t)&&(t=Transformable$1.getLocalTransform(t)),r&&(t=invert([],t)),applyTransform$1([],n,t)}function transformDirection(n,t,r){var a=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),o=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),s=[n==="left"?-a:n==="right"?a:0,n==="top"?-o:n==="bottom"?o:0];return s=applyTransform(s,t,r),Math.abs(s[0])>Math.abs(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function isNotGroup(n){return!n.isGroup}function isPath$1(n){return n.shape!=null}function groupTransition(n,t,r){if(!n||!t)return;function a(l){var u={};return l.traverse(function(d){isNotGroup(d)&&d.anid&&(u[d.anid]=d)}),u}function o(l){var u={x:l.x,y:l.y,rotation:l.rotation};return isPath$1(l)&&(u.shape=extend({},l.shape)),u}var s=a(n);t.traverse(function(l){if(isNotGroup(l)&&l.anid){var u=s[l.anid];if(u){var d=o(l);l.attr(o(u)),updateProps$1(l,d,r,getECData(l).dataIndex)}}})}function clipPointsByRect(n,t){return map$1(n,function(r){var a=r[0];a=mathMax$6(a,t.x),a=mathMin$6(a,t.x+t.width);var o=r[1];return o=mathMax$6(o,t.y),o=mathMin$6(o,t.y+t.height),[a,o]})}function clipRectByRect(n,t){var r=mathMax$6(n.x,t.x),a=mathMin$6(n.x+n.width,t.x+t.width),o=mathMax$6(n.y,t.y),s=mathMin$6(n.y+n.height,t.y+t.height);if(a>=r&&s>=o)return{x:r,y:o,width:a-r,height:s-o}}function createIcon(n,t,r){var a=extend({rectHover:!0},t),o=a.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(o.image=n.slice(8),defaults(o,r),new ZRImage$1(a)):makePath(n.replace("path://",""),a,r,"center")}function linePolygonIntersect(n,t,r,a,o){for(var s=0,l=o[o.length-1];s<o.length;s++){var u=o[s];if(lineLineIntersect$1(n,t,r,a,u[0],u[1],l[0],l[1]))return!0;l=u}}function lineLineIntersect$1(n,t,r,a,o,s,l,u){var d=r-n,v=a-t,g=l-o,f=u-s,c=crossProduct2d$1(g,f,d,v);if(nearZero(c))return!1;var y=n-o,_=t-s,b=crossProduct2d$1(y,_,d,v)/c;if(b<0||b>1)return!1;var S=crossProduct2d$1(y,_,g,f)/c;return!(S<0||S>1)}function crossProduct2d$1(n,t,r,a){return n*a-r*t}function nearZero(n){return n<=1e-6&&n>=-1e-6}function setTooltipConfig(n){var t=n.itemTooltipOption,r=n.componentModel,a=n.itemName,o=isString(t)?{formatter:t}:t,s=r.mainType,l=r.componentIndex,u={componentType:s,name:a,$vars:["name"]};u[s+"Index"]=l;var d=n.formatterParamsExtra;d&&each$f(keys(d),function(g){hasOwn(u,g)||(u[g]=d[g],u.$vars.push(g))});var v=getECData(n.el);v.componentMainType=s,v.componentIndex=l,v.tooltipConfig={name:a,option:defaults({content:a,formatterParams:u},o)}}function traverseElement(n,t){var r;n.isGroup&&(r=t(n)),r||n.traverse(t)}function traverseElements(n,t){if(n)if(isArray$1(n))for(var r=0;r<n.length;r++)traverseElement(n[r],t);else traverseElement(n,t)}registerShape("circle",Circle$1);registerShape("ellipse",Ellipse$1);registerShape("sector",Sector$1);registerShape("ring",Ring$1);registerShape("polygon",Polygon$1);registerShape("polyline",Polyline$3);registerShape("rect",Rect$3);registerShape("line",Line$3);registerShape("bezierCurve",BezierCurve$1);registerShape("arc",Arc$1);const graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc:Arc$1,BezierCurve:BezierCurve$1,BoundingRect:BoundingRect$1,Circle:Circle$1,CompoundPath:CompoundPath$1,Ellipse:Ellipse$1,Group:Group$4,Image:ZRImage$1,IncrementalDisplayable:IncrementalDisplayable$1,Line:Line$3,LinearGradient:LinearGradient$1,OrientedBoundingRect:OrientedBoundingRect$1,Path:Path$1,Point:Point$1,Polygon:Polygon$1,Polyline:Polyline$3,RadialGradient:RadialGradient$1,Rect:Rect$3,Ring:Ring$1,Sector:Sector$1,Text:ZRText$1,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(n,t){for(var r=0;r<SPECIAL_STATES.length;r++){var a=SPECIAL_STATES[r],o=t[a],s=n.ensureState(a);s.style=s.style||{},s.style.text=o}var l=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:t.normal}),n.useStates(l,!0)}function getLabelText(n,t,r){var a=n.labelFetcher,o=n.labelDataIndex,s=n.labelDimIndex,l=t.normal,u;a&&(u=a.getFormattedLabel(o,"normal",null,s,l&&l.get("formatter"),r!=null?{interpolatedValue:r}:null)),u==null&&(u=isFunction(n.defaultText)?n.defaultText(o,n,r):n.defaultText);for(var d={normal:u},v=0;v<SPECIAL_STATES.length;v++){var g=SPECIAL_STATES[v],f=t[g];d[g]=retrieve2(a?a.getFormattedLabel(o,g,null,s,f&&f.get("formatter")):null,u)}return d}function setLabelStyle(n,t,r,a){r=r||EMPTY_OBJ;for(var o=n instanceof ZRText$1,s=!1,l=0;l<DISPLAY_STATES.length;l++){var u=t[DISPLAY_STATES[l]];if(u&&u.getShallow("show")){s=!0;break}}var d=o?n:n.getTextContent();if(s){o||(d||(d=new ZRText$1,n.setTextContent(d)),n.stateProxy&&(d.stateProxy=n.stateProxy));var v=getLabelText(r,t),g=t.normal,f=!!g.getShallow("show"),c=createTextStyle(g,a&&a.normal,r,!1,!o);c.text=v.normal,o||n.setTextConfig(createTextConfig(g,r,!1));for(var l=0;l<SPECIAL_STATES.length;l++){var y=SPECIAL_STATES[l],u=t[y];if(u){var _=d.ensureState(y),b=!!retrieve2(u.getShallow("show"),f);if(b!==f&&(_.ignore=!b),_.style=createTextStyle(u,a&&a[y],r,!0,!o),_.style.text=v[y],!o){var S=n.ensureState(y);S.textConfig=createTextConfig(u,r,!0)}}}d.silent=!!g.getShallow("silent"),d.style.x!=null&&(c.x=d.style.x),d.style.y!=null&&(c.y=d.style.y),d.ignore=!f,d.useStyle(c),d.dirty(),r.enableTextSetter&&(labelInner(d).setLabelText=function(x){var w=getLabelText(r,t,x);setLabelText(d,w)})}else d&&(d.ignore=!0);n.dirty()}function getLabelStatesModels(n,t){t=t||"label";for(var r={normal:n.getModel(t)},a=0;a<SPECIAL_STATES.length;a++){var o=SPECIAL_STATES[a];r[o]=n.getModel([o,t])}return r}function createTextStyle(n,t,r,a,o){var s={};return setTextStyleCommon(s,n,r,a,o),t&&extend(s,t),s}function createTextConfig(n,t,r){t=t||{};var a={},o,s=n.getShallow("rotate"),l=retrieve2(n.getShallow("distance"),r?null:5),u=n.getShallow("offset");return o=n.getShallow("position")||(r?null:"inside"),o==="outside"&&(o=t.defaultOutsidePosition||"top"),o!=null&&(a.position=o),u!=null&&(a.offset=u),s!=null&&(s*=Math.PI/180,a.rotation=s),l!=null&&(a.distance=l),a.outsideFill=n.get("color")==="inherit"?t.inheritColor||null:"auto",a}function setTextStyleCommon(n,t,r,a,o){r=r||EMPTY_OBJ;var s=t.ecModel,l=s&&s.option.textStyle,u=getRichItemNames(t),d;if(u){d={};for(var v in u)if(u.hasOwnProperty(v)){var g=t.getModel(["rich",v]);setTokenTextStyle(d[v]={},g,l,r,a,o,!1,!0)}}d&&(n.rich=d);var f=t.get("overflow");f&&(n.overflow=f);var c=t.get("minMargin");c!=null&&(n.margin=c),setTokenTextStyle(n,t,l,r,a,o,!0,!1)}function getRichItemNames(n){for(var t;n&&n!==n.ecModel;){var r=(n.option||EMPTY_OBJ).rich;if(r){t=t||{};for(var a=keys(r),o=0;o<a.length;o++){var s=a[o];t[s]=1}}n=n.parentModel}return t}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(n,t,r,a,o,s,l,u){r=!o&&r||EMPTY_OBJ;var d=a&&a.inheritColor,v=t.getShallow("color"),g=t.getShallow("textBorderColor"),f=retrieve2(t.getShallow("opacity"),r.opacity);(v==="inherit"||v==="auto")&&(d?v=d:v=null),(g==="inherit"||g==="auto")&&(d?g=d:g=null),s||(v=v||r.color,g=g||r.textBorderColor),v!=null&&(n.fill=v),g!=null&&(n.stroke=g);var c=retrieve2(t.getShallow("textBorderWidth"),r.textBorderWidth);c!=null&&(n.lineWidth=c);var y=retrieve2(t.getShallow("textBorderType"),r.textBorderType);y!=null&&(n.lineDash=y);var _=retrieve2(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);_!=null&&(n.lineDashOffset=_),!o&&f==null&&!u&&(f=a&&a.defaultOpacity),f!=null&&(n.opacity=f),!o&&!s&&n.fill==null&&a.inheritColor&&(n.fill=a.inheritColor);for(var b=0;b<TEXT_PROPS_WITH_GLOBAL.length;b++){var S=TEXT_PROPS_WITH_GLOBAL[b],x=retrieve2(t.getShallow(S),r[S]);x!=null&&(n[S]=x)}for(var b=0;b<TEXT_PROPS_SELF.length;b++){var S=TEXT_PROPS_SELF[b],x=t.getShallow(S);x!=null&&(n[S]=x)}if(n.verticalAlign==null){var w=t.getShallow("baseline");w!=null&&(n.verticalAlign=w)}if(!l||!a.disableBox){for(var b=0;b<TEXT_PROPS_BOX.length;b++){var S=TEXT_PROPS_BOX[b],x=t.getShallow(S);x!=null&&(n[S]=x)}var T=t.getShallow("borderType");T!=null&&(n.borderDash=T),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&d&&(n.backgroundColor=d),(n.borderColor==="auto"||n.borderColor==="inherit")&&d&&(n.borderColor=d)}}function getFont(n,t){var r=t&&t.getModel("textStyle");return trim$1([n.fontStyle||r&&r.getShallow("fontStyle")||"",n.fontWeight||r&&r.getShallow("fontWeight")||"",(n.fontSize||r&&r.getShallow("fontSize")||12)+"px",n.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(n,t,r,a){if(n){var o=labelInner(n);o.prevValue=o.value,o.value=r;var s=t.normal;o.valueAnimation=s.get("valueAnimation"),o.valueAnimation&&(o.precision=s.get("precision"),o.defaultInterpolatedText=a,o.statesModels=t)}}function animateLabelValue(n,t,r,a,o){var s=labelInner(n);if(!s.valueAnimation||s.prevValue===s.value)return;var l=s.defaultInterpolatedText,u=retrieve2(s.interpolatedValue,s.prevValue),d=s.value;function v(g){var f=interpolateRawValues(r,s.precision,u,d,g);s.interpolatedValue=g===1?null:f;var c=getLabelText({labelDataIndex:t,labelFetcher:o,defaultText:l?l(f):f+""},s.statesModels,f);setLabelText(n,c)}n.percent=0,(s.prevValue==null?initProps:updateProps$1)(n,{percent:1},a,t,null,v)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText$1,TextStyleMixin=function(){function n(){}return n.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(PATH_COLOR):null)},n.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},a=0;a<textStyleParams.length;a++)r[textStyleParams[a]]=this.getShallow(textStyleParams[a]);return tmpText.useStyle(r),tmpText.update(),tmpText.getBoundingRect()},n}();const TextStyleMixin$1=TextStyleMixin;var LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function n(){}return n.prototype.getLineStyle=function(t){return getLineStyle(this,t)},n}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function n(){}return n.prototype.getItemStyle=function(t,r){return getItemStyle(this,t,r)},n}(),Model=function(){function n(t,r,a){this.parentModel=r,this.ecModel=a,this.option=t}return n.prototype.init=function(t,r,a){},n.prototype.mergeOption=function(t,r){merge(this.option,t,!0)},n.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},n.prototype.getShallow=function(t,r){var a=this.option,o=a==null?a:a[t];if(o==null&&!r){var s=this.parentModel;s&&(o=s.getShallow(t))}return o},n.prototype.getModel=function(t,r){var a=t!=null,o=a?this.parsePath(t):null,s=a?this._doGet(o):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(o)),new n(s,r,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var t=this.constructor;return new t(clone$4(this.option))},n.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},n.prototype.resolveParentPath=function(t){return t},n.prototype.isAnimationEnabled=function(){if(!env$1.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(t,r){var a=this.option;if(!t)return a;for(var o=0;o<t.length&&!(t[o]&&(a=a&&typeof a=="object"?a[t[o]]:null,a==null));o++);return a==null&&r&&(a=r._doGet(this.resolveParentPath(t),r.parentModel)),a},n}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin$1);const Model$1=Model;var base=Math.round(Math.random()*10);function getUID(n){return[n||"",base++].join("_")}function enableSubTypeDefaulter(n){var t={};n.registerSubTypeDefaulter=function(r,a){var o=parseClassType(r);t[o.main]=a},n.determineSubType=function(r,a){var o=a.type;if(!o){var s=parseClassType(r).main;n.hasSubTypes(r)&&t[s]&&(o=t[s](a))}return o}}function enableTopologicalTravel(n,t){n.topologicalTravel=function(s,l,u,d){if(!s.length)return;var v=r(l),g=v.graph,f=v.noEntryList,c={};for(each$f(s,function(w){c[w]=!0});f.length;){var y=f.pop(),_=g[y],b=!!c[y];b&&(u.call(d,y,_.originalDeps.slice()),delete c[y]),each$f(_.successor,b?x:S)}each$f(c,function(){var w="";throw new Error(w)});function S(w){g[w].entryCount--,g[w].entryCount===0&&f.push(w)}function x(w){c[w]=!0,S(w)}};function r(s){var l={},u=[];return each$f(s,function(d){var v=a(l,d),g=v.originalDeps=t(d),f=o(g,s);v.entryCount=f.length,v.entryCount===0&&u.push(d),each$f(f,function(c){indexOf(v.predecessor,c)<0&&v.predecessor.push(c);var y=a(l,c);indexOf(y.successor,c)<0&&y.successor.push(d)})}),{graph:l,noEntryList:u}}function a(s,l){return s[l]||(s[l]={predecessor:[],successor:[]}),s[l]}function o(s,l){var u=[];return each$f(s,function(d){indexOf(l,d)>=0&&u.push(d)}),u}}function inheritDefaultOption(n,t){return merge(merge({},n,!0),t,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env$1.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return n.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(n,t){n=n.toUpperCase(),localeModels[n]=new Model$1(t),localeStorage[n]=t}function createLocaleObject(n){if(isString(n)){var t=localeStorage[n.toUpperCase()]||{};return n===LOCALE_ZH||n===LOCALE_EN?clone$4(t):merge(clone$4(t),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(n),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(n){return localeModels[n]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(n,t){return n+="","0000".substr(0,t-n.length)+n}function getPrimaryTimeUnit(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function isPrimaryTimeUnit(n){return n===getPrimaryTimeUnit(n)}function getDefaultFormatPrecisionOfInterval(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format(n,t,r,a){var o=parseDate(n),s=o[fullYearGetterName(r)](),l=o[monthGetterName(r)]()+1,u=Math.floor((l-1)/3)+1,d=o[dateGetterName(r)](),v=o["get"+(r?"UTC":"")+"Day"](),g=o[hoursGetterName(r)](),f=(g-1)%12+1,c=o[minutesGetterName(r)](),y=o[secondsGetterName(r)](),_=o[millisecondsGetterName(r)](),b=a instanceof Model$1?a:getLocaleModel(a||SYSTEM_LANG)||getDefaultLocaleModel(),S=b.getModel("time"),x=S.get("month"),w=S.get("monthAbbr"),T=S.get("dayOfWeek"),A=S.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,s%100+"").replace(/{Q}/g,u+"").replace(/{MMMM}/g,x[l-1]).replace(/{MMM}/g,w[l-1]).replace(/{MM}/g,pad(l,2)).replace(/{M}/g,l+"").replace(/{dd}/g,pad(d,2)).replace(/{d}/g,d+"").replace(/{eeee}/g,T[v]).replace(/{ee}/g,A[v]).replace(/{e}/g,v+"").replace(/{HH}/g,pad(g,2)).replace(/{H}/g,g+"").replace(/{hh}/g,pad(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,pad(c,2)).replace(/{m}/g,c+"").replace(/{ss}/g,pad(y,2)).replace(/{s}/g,y+"").replace(/{SSS}/g,pad(_,3)).replace(/{S}/g,_+"")}function leveledFormat(n,t,r,a,o){var s=null;if(isString(r))s=r;else if(isFunction(r))s=r(n.value,t,{level:n.level});else{var l=extend({},defaultLeveledFormatter);if(n.level>0)for(var u=0;u<primaryTimeUnits.length;++u)l[primaryTimeUnits[u]]="{primary|"+l[primaryTimeUnits[u]]+"}";var d=r?r.inherit===!1?r:defaults(r,l):l,v=getUnitFromValue(n.value,o);if(d[v])s=d[v];else if(d.inherit){for(var g=timeUnits.indexOf(v),u=g-1;u>=0;--u)if(d[v]){s=d[v];break}s=s||l.none}if(isArray$1(s)){var f=n.level==null?0:n.level>=0?n.level:s.length+n.level;f=Math.min(f,s.length-1),s=s[f]}}return format(new Date(n.value),s,o,a)}function getUnitFromValue(n,t){var r=parseDate(n),a=r[monthGetterName(t)]()+1,o=r[dateGetterName(t)](),s=r[hoursGetterName(t)](),l=r[minutesGetterName(t)](),u=r[secondsGetterName(t)](),d=r[millisecondsGetterName(t)](),v=d===0,g=v&&u===0,f=g&&l===0,c=f&&s===0,y=c&&o===1,_=y&&a===1;return _?"year":y?"month":c?"day":f?"hour":g?"minute":v?"second":"millisecond"}function getUnitValue(n,t,r){var a=isNumber(n)?parseDate(n):n;switch(t=t||getUnitFromValue(n,r),t){case"year":return a[fullYearGetterName(r)]();case"half-year":return a[monthGetterName(r)]()>=6?1:0;case"quarter":return Math.floor((a[monthGetterName(r)]()+1)/4);case"month":return a[monthGetterName(r)]();case"day":return a[dateGetterName(r)]();case"half-day":return a[hoursGetterName(r)]()/24;case"hour":return a[hoursGetterName(r)]();case"minute":return a[minutesGetterName(r)]();case"second":return a[secondsGetterName(r)]();case"millisecond":return a[millisecondsGetterName(r)]()}}function fullYearGetterName(n){return n?"getUTCFullYear":"getFullYear"}function monthGetterName(n){return n?"getUTCMonth":"getMonth"}function dateGetterName(n){return n?"getUTCDate":"getDate"}function hoursGetterName(n){return n?"getUTCHours":"getHours"}function minutesGetterName(n){return n?"getUTCMinutes":"getMinutes"}function secondsGetterName(n){return n?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(n){return n?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(n){return n?"setUTCFullYear":"setFullYear"}function monthSetterName(n){return n?"setUTCMonth":"setMonth"}function dateSetterName(n){return n?"setUTCDate":"setDate"}function hoursSetterName(n){return n?"setUTCHours":"setHours"}function minutesSetterName(n){return n?"setUTCMinutes":"setMinutes"}function secondsSetterName(n){return n?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(n){return n?"setUTCMilliseconds":"setMilliseconds"}function addCommas(n){if(!isNumeric(n))return isString(n)?n:"-";var t=(n+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function toCamelCase(n,t){return n=(n||"").toLowerCase().replace(/-(.)/g,function(r,a){return a.toUpperCase()}),t&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(n,t,r){var a="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function o(g){return g&&trim$1(g)?g:"-"}function s(g){return!!(g!=null&&!isNaN(g)&&isFinite(g))}var l=t==="time",u=n instanceof Date;if(l||u){var d=l?parseDate(n):n;if(isNaN(+d)){if(u)return"-"}else return format(d,a,r)}if(t==="ordinal")return isStringSafe(n)?o(n):isNumber(n)&&s(n)?n+"":"-";var v=numericToNumber(n);return s(v)?addCommas(v):isStringSafe(n)?o(n):typeof n=="boolean"?n+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(n,t){return"{"+n+(t??"")+"}"};function formatTpl(n,t,r){isArray$1(t)||(t=[t]);var a=t.length;if(!a)return"";for(var o=t[0].$vars||[],s=0;s<o.length;s++){var l=TPL_VAR_ALIAS[s];n=n.replace(wrapVar(l),wrapVar(l,0))}for(var u=0;u<a;u++)for(var d=0;d<o.length;d++){var v=t[u][o[d]];n=n.replace(wrapVar(TPL_VAR_ALIAS[d],u),r?encodeHTML(v):v)}return n}function formatTplSimple(n,t,r){return each$f(t,function(a,o){n=n.replace("{"+o+"}",r?encodeHTML(a):a)}),n}function getTooltipMarker(n,t){var r=isString(n)?{color:n,extraCssText:t}:n||{},a=r.color,o=r.type;t=r.extraCssText;var s=r.renderMode||"html";if(!a)return"";if(s==="html")return o==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(a)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(a)+";"+(t||"")+'"></span>';var l=r.markerId||"markerX";return{renderMode:s,content:"{"+l+"|}  ",style:o==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:a}:{width:10,height:10,borderRadius:5,backgroundColor:a}}}function convertToColorString(n,t){return t=t||"transparent",isString(n)?n:isObject$3(n)&&n.colorStops&&(n.colorStops[0]||{}).color||t}function windowOpen(n,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=n}else window.open(n,t)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(n,t,r,a,o){var s=0,l=0;a==null&&(a=1/0),o==null&&(o=1/0);var u=0;t.eachChild(function(d,v){var g=d.getBoundingRect(),f=t.childAt(v+1),c=f&&f.getBoundingRect(),y,_;if(n==="horizontal"){var b=g.width+(c?-c.x+g.x:0);y=s+b,y>a||d.newline?(s=0,y=b,l+=u+r,u=g.height):u=Math.max(u,g.height)}else{var S=g.height+(c?-c.y+g.y:0);_=l+S,_>o||d.newline?(s+=u+r,l=0,_=S,u=g.width):u=Math.max(u,g.width)}d.newline||(d.x=s,d.y=l,d.markRedraw(),n==="horizontal"?s=y+r:l=_+r)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(n,t,r){var a=t.width,o=t.height,s=parsePercent(n.left,a),l=parsePercent(n.top,o),u=parsePercent(n.right,a),d=parsePercent(n.bottom,o);return(isNaN(s)||isNaN(parseFloat(n.left)))&&(s=0),(isNaN(u)||isNaN(parseFloat(n.right)))&&(u=a),(isNaN(l)||isNaN(parseFloat(n.top)))&&(l=0),(isNaN(d)||isNaN(parseFloat(n.bottom)))&&(d=o),r=normalizeCssArray(r||0),{width:Math.max(u-s-r[1]-r[3],0),height:Math.max(d-l-r[0]-r[2],0)}}function getLayoutRect(n,t,r){r=normalizeCssArray(r||0);var a=t.width,o=t.height,s=parsePercent(n.left,a),l=parsePercent(n.top,o),u=parsePercent(n.right,a),d=parsePercent(n.bottom,o),v=parsePercent(n.width,a),g=parsePercent(n.height,o),f=r[2]+r[0],c=r[1]+r[3],y=n.aspect;switch(isNaN(v)&&(v=a-u-c-s),isNaN(g)&&(g=o-d-f-l),y!=null&&(isNaN(v)&&isNaN(g)&&(y>a/o?v=a*.8:g=o*.8),isNaN(v)&&(v=y*g),isNaN(g)&&(g=v/y)),isNaN(s)&&(s=a-u-v-c),isNaN(l)&&(l=o-d-g-f),n.left||n.right){case"center":s=a/2-v/2-r[3];break;case"right":s=a-v-c;break}switch(n.top||n.bottom){case"middle":case"center":l=o/2-g/2-r[0];break;case"bottom":l=o-g-f;break}s=s||0,l=l||0,isNaN(v)&&(v=a-c-s-(u||0)),isNaN(g)&&(g=o-f-l-(d||0));var _=new BoundingRect$1(s+r[3],l+r[0],v,g);return _.margin=r,_}function positionElement(n,t,r,a,o,s){var l=!o||!o.hv||o.hv[0],u=!o||!o.hv||o.hv[1],d=o&&o.boundingMode||"all";if(s=s||n,s.x=n.x,s.y=n.y,!l&&!u)return!1;var v;if(d==="raw")v=n.type==="group"?new BoundingRect$1(0,0,+t.width||0,+t.height||0):n.getBoundingRect();else if(v=n.getBoundingRect(),n.needLocalTransform()){var g=n.getLocalTransform();v=v.clone(),v.applyTransform(g)}var f=getLayoutRect(defaults({width:v.width,height:v.height},t),r,a),c=l?f.x-v.x:0,y=u?f.y-v.y:0;return d==="raw"?(s.x=c,s.y=y):(s.x+=c,s.y+=y),s===n&&n.markRedraw(),!0}function sizeCalculable(n,t){return n[HV_NAMES[t][0]]!=null||n[HV_NAMES[t][1]]!=null&&n[HV_NAMES[t][2]]!=null}function fetchLayoutMode(n){var t=n.layoutMode||n.constructor.layoutMode;return isObject$3(t)?t:t?{type:t}:null}function mergeLayoutParam(n,t,r){var a=r&&r.ignoreSize;!isArray$1(a)&&(a=[a,a]);var o=l(HV_NAMES[0],0),s=l(HV_NAMES[1],1);v(HV_NAMES[0],n,o),v(HV_NAMES[1],n,s);function l(g,f){var c={},y=0,_={},b=0,S=2;if(each$e(g,function(T){_[T]=n[T]}),each$e(g,function(T){u(t,T)&&(c[T]=_[T]=t[T]),d(c,T)&&y++,d(_,T)&&b++}),a[f])return d(t,g[1])?_[g[2]]=null:d(t,g[2])&&(_[g[1]]=null),_;if(b===S||!y)return _;if(y>=S)return c;for(var x=0;x<g.length;x++){var w=g[x];if(!u(c,w)&&u(n,w)){c[w]=n[w];break}}return c}function u(g,f){return g.hasOwnProperty(f)}function d(g,f){return g[f]!=null&&g[f]!=="auto"}function v(g,f,c){each$e(g,function(y){f[y]=c[y]})}}function getLayoutParams(n){return copyLayoutParams({},n)}function copyLayoutParams(n,t){return t&&n&&each$e(LOCATION_PARAMS,function(r){t.hasOwnProperty(r)&&(n[r]=t[r])}),n}var inner$l=makeInner(),ComponentModel=function(n){__extends$1(t,n);function t(r,a,o){var s=n.call(this,r,a,o)||this;return s.uid=getUID("ec_cpt_model"),s}return t.prototype.init=function(r,a,o){this.mergeDefaultAndTheme(r,o)},t.prototype.mergeDefaultAndTheme=function(r,a){var o=fetchLayoutMode(this),s=o?getLayoutParams(r):{},l=a.getTheme();merge(r,l.get(this.mainType)),merge(r,this.getDefaultOption()),o&&mergeLayoutParam(r,s,o)},t.prototype.mergeOption=function(r,a){merge(this.option,r,!0);var o=fetchLayoutMode(this);o&&mergeLayoutParam(this.option,r,o)},t.prototype.optionUpdated=function(r,a){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!isExtendedClass(r))return r.defaultOption;var a=inner$l(this);if(!a.defaultOption){for(var o=[],s=r;s;){var l=s.prototype.defaultOption;l&&o.push(l),s=s.superClass}for(var u={},d=o.length-1;d>=0;d--)u=merge(u,o[d],!0);a.defaultOption=u}return a.defaultOption},t.prototype.getReferringComponents=function(r,a){var o=r+"Index",s=r+"Id";return queryReferringComponents(this.ecModel,r,{index:this.get(o,!0),id:this.get(s,!0)},a)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Model$1);mountExtend(ComponentModel,Model$1);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(n){var t=[];return each$f(ComponentModel.getClassesByMainType(n),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=map$1(t,function(r){return parseClassType(r).main}),n!=="dataset"&&indexOf(t,"dataset")<=0&&t.unshift("dataset"),t}const ComponentModel$1=ComponentModel;var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(n){innerGlobalModel(n).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(n,t,r){var a={},o=querySeriesUpstreamDatasetModel(t);if(!o||!n)return a;var s=[],l=[],u=t.ecModel,d=innerGlobalModel(u).datasetMap,v=o.uid+"_"+r.seriesLayoutBy,g,f;n=n.slice(),each$f(n,function(b,S){var x=isObject$3(b)?b:n[S]={name:b};x.type==="ordinal"&&g==null&&(g=S,f=_(x)),a[x.name]=[]});var c=d.get(v)||d.set(v,{categoryWayDim:f,valueWayDim:0});each$f(n,function(b,S){var x=b.name,w=_(b);if(g==null){var T=c.valueWayDim;y(a[x],T,w),y(l,T,w),c.valueWayDim+=w}else if(g===S)y(a[x],0,w),y(s,0,w);else{var T=c.categoryWayDim;y(a[x],T,w),y(l,T,w),c.categoryWayDim+=w}});function y(b,S,x){for(var w=0;w<x;w++)b.push(S+w)}function _(b){var S=b.dimsDef;return S?S.length:1}return s.length&&(a.itemName=s),l.length&&(a.seriesName=l),a}function makeSeriesEncodeForNameBased(n,t,r){var a={},o=querySeriesUpstreamDatasetModel(n);if(!o)return a;var s=t.sourceFormat,l=t.dimensionsDefine,u;(s===SOURCE_FORMAT_OBJECT_ROWS||s===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(l,function(g,f){(isObject$3(g)?g.name:g)==="name"&&(u=f)});var d=function(){for(var g={},f={},c=[],y=0,_=Math.min(5,r);y<_;y++){var b=doGuessOrdinal(t.data,s,t.seriesLayoutBy,l,t.startIndex,y);c.push(b);var S=b===BE_ORDINAL.Not;if(S&&g.v==null&&y!==u&&(g.v=y),(g.n==null||g.n===g.v||!S&&c[g.n]===BE_ORDINAL.Not)&&(g.n=y),x(g)&&c[g.n]!==BE_ORDINAL.Not)return g;S||(b===BE_ORDINAL.Might&&f.v==null&&y!==u&&(f.v=y),(f.n==null||f.n===f.v)&&(f.n=y))}function x(w){return w.v!=null&&w.n!=null}return x(g)?g:x(f)?f:null}();if(d){a.value=[d.v];var v=u??d.n;a.itemName=[v],a.seriesName=[v]}return a}function querySeriesUpstreamDatasetModel(n){var t=n.get("data",!0);if(!t)return queryReferringComponents(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:queryReferringComponents(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(n,t){return doGuessOrdinal(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,t)}function doGuessOrdinal(n,t,r,a,o,s){var l,u=5;if(isTypedArray(n))return BE_ORDINAL.Not;var d,v;if(a){var g=a[s];isObject$3(g)?(d=g.name,v=g.type):isString(g)&&(d=g)}if(v!=null)return v==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(t===SOURCE_FORMAT_ARRAY_ROWS){var f=n;if(r===SERIES_LAYOUT_BY_ROW){for(var c=f[s],y=0;y<(c||[]).length&&y<u;y++)if((l=A(c[o+y]))!=null)return l}else for(var y=0;y<f.length&&y<u;y++){var _=f[o+y];if(_&&(l=A(_[s]))!=null)return l}}else if(t===SOURCE_FORMAT_OBJECT_ROWS){var b=n;if(!d)return BE_ORDINAL.Not;for(var y=0;y<b.length&&y<u;y++){var S=b[y];if(S&&(l=A(S[d]))!=null)return l}}else if(t===SOURCE_FORMAT_KEYED_COLUMNS){var x=n;if(!d)return BE_ORDINAL.Not;var c=x[d];if(!c||isTypedArray(c))return BE_ORDINAL.Not;for(var y=0;y<c.length&&y<u;y++)if((l=A(c[y]))!=null)return l}else if(t===SOURCE_FORMAT_ORIGINAL)for(var w=n,y=0;y<w.length&&y<u;y++){var S=w[y],T=getDataItemValue(S);if(!isArray$1(T))return BE_ORDINAL.Not;if((l=A(T[s]))!=null)return l}function A(E){var $=isString(E);if(E!=null&&isFinite(E)&&E!=="")return $?BE_ORDINAL.Might:BE_ORDINAL.Not;if($&&E!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(n,t){assert(internalOptionCreatorMap.get(n)==null&&t),internalOptionCreatorMap.set(n,t)}function concatInternalOptions(n,t,r){var a=internalOptionCreatorMap.get(t);if(!a)return r;var o=a(n);return o?r.concat(o):r}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function n(){}return n.prototype.getColorFromPalette=function(t,r,a){var o=normalizeToArray(this.get("color",!0)),s=this.get("colorLayer",!0);return getFromPalette(this,innerColor,o,s,t,r,a)},n.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},n}();function getDecalFromPalette(n,t,r,a){var o=normalizeToArray(n.get(["aria","decal","decals"]));return getFromPalette(n,innerDecal,o,null,t,r,a)}function getNearestPalette(n,t){for(var r=n.length,a=0;a<r;a++)if(n[a].length>t)return n[a];return n[r-1]}function getFromPalette(n,t,r,a,o,s,l){s=s||n;var u=t(s),d=u.paletteIdx||0,v=u.paletteNameMap=u.paletteNameMap||{};if(v.hasOwnProperty(o))return v[o];var g=l==null||!a?r:getNearestPalette(a,l);if(g=g||r,!(!g||!g.length)){var f=g[d];return o&&(v[o]=f),u.paletteIdx=(d+1)%g.length,f}}function clearPalette(n,t){t(n).paletteIdx=0,t(n).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(r,a,o,s,l,u){s=s||{},this.option=null,this._theme=new Model$1(s),this._locale=new Model$1(l),this._optionManager=u},t.prototype.setOption=function(r,a,o){var s=normalizeSetOptionInput(a);this._optionManager.setOption(r,o,s),this._resetOption(null,s)},t.prototype.resetOption=function(r,a){return this._resetOption(r,normalizeSetOptionInput(a))},t.prototype._resetOption=function(r,a){var o=!1,s=this._optionManager;if(!r||r==="recreate"){var l=s.mountOption(r==="recreate");!this.option||r==="recreate"?initBase(this,l):(this.restoreData(),this._mergeOption(l,a)),o=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var u=s.getTimelineOption(this);u&&(o=!0,this._mergeOption(u,a))}if(!r||r==="recreate"||r==="media"){var d=s.getMediaOption(this);d.length&&each$f(d,function(v){o=!0,this._mergeOption(v,a)},this)}return o},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,a){var o=this.option,s=this._componentsMap,l=this._componentsCount,u=[],d=createHashMap(),v=a&&a.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(r,function(f,c){f!=null&&(ComponentModel$1.hasClass(c)?c&&(u.push(c),d.set(c,!0)):o[c]=o[c]==null?clone$4(f):merge(o[c],f,!0))}),v&&v.each(function(f,c){ComponentModel$1.hasClass(c)&&!d.get(c)&&(u.push(c),d.set(c,!0))}),ComponentModel$1.topologicalTravel(u,ComponentModel$1.getAllClassMainTypes(),g,this);function g(f){var c=concatInternalOptions(this,f,normalizeToArray(r[f])),y=s.get(f),_=y?v&&v.get(f)?"replaceMerge":"normalMerge":"replaceAll",b=mappingToExists(y,c,_);setComponentTypeToKeyInfo(b,f,ComponentModel$1),o[f]=null,s.set(f,null),l.set(f,0);var S=[],x=[],w=0,T;each$f(b,function(A,E){var $=A.existing,P=A.newOption;if(!P)$&&($.mergeOption({},this),$.optionUpdated({},!1));else{var I=f==="series",C=ComponentModel$1.getClass(f,A.keyInfo.subType,!I);if(!C)return;if(f==="tooltip"){if(T)return;T=!0}if($&&$.constructor===C)$.name=A.keyInfo.name,$.mergeOption(P,this),$.optionUpdated(P,!1);else{var M=extend({componentIndex:E},A.keyInfo);$=new C(P,this,this,M),extend($,M),A.brandNew&&($.__requireNewView=!0),$.init(P,this,this),$.optionUpdated(null,!0)}}$?(S.push($.option),x.push($),w++):(S.push(void 0),x.push(void 0))},this),o[f]=S,s.set(f,x),l.set(f,w),f==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},t.prototype.getOption=function(){var r=clone$4(this.option);return each$f(r,function(a,o){if(ComponentModel$1.hasClass(o)){for(var s=normalizeToArray(a),l=s.length,u=!1,d=l-1;d>=0;d--)s[d]&&!isComponentIdInternal(s[d])?u=!0:(s[d]=null,!u&&l--);s.length=l,r[o]=s}}),delete r[OPTION_INNER_KEY],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,a){var o=this._componentsMap.get(r);if(o){var s=o[a||0];if(s)return s;if(a==null){for(var l=0;l<o.length;l++)if(o[l])return o[l]}}},t.prototype.queryComponents=function(r){var a=r.mainType;if(!a)return[];var o=r.index,s=r.id,l=r.name,u=this._componentsMap.get(a);if(!u||!u.length)return[];var d;return o!=null?(d=[],each$f(normalizeToArray(o),function(v){u[v]&&d.push(u[v])})):s!=null?d=queryByIdOrName("id",s,u):l!=null?d=queryByIdOrName("name",l,u):d=filter(u,function(v){return!!v}),filterBySubType(d,r)},t.prototype.findComponents=function(r){var a=r.query,o=r.mainType,s=u(a),l=s?this.queryComponents(s):filter(this._componentsMap.get(o),function(v){return!!v});return d(filterBySubType(l,r));function u(v){var g=o+"Index",f=o+"Id",c=o+"Name";return v&&(v[g]!=null||v[f]!=null||v[c]!=null)?{mainType:o,index:v[g],id:v[f],name:v[c]}:null}function d(v){return r.filter?filter(v,r.filter):v}},t.prototype.eachComponent=function(r,a,o){var s=this._componentsMap;if(isFunction(r)){var l=a,u=r;s.each(function(f,c){for(var y=0;f&&y<f.length;y++){var _=f[y];_&&u.call(l,c,_,_.componentIndex)}})}else for(var d=isString(r)?s.get(r):isObject$3(r)?this.findComponents(r):null,v=0;d&&v<d.length;v++){var g=d[v];g&&a.call(o,g,g.componentIndex)}},t.prototype.getSeriesByName=function(r){var a=convertOptionIdName(r,null);return filter(this._componentsMap.get("series"),function(o){return!!o&&a!=null&&o.name===a})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return filter(this._componentsMap.get("series"),function(a){return!!a&&a.subType===r})},t.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,a){assertSeriesInitialized(this),each$f(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];r.call(a,s,o)},this)},t.prototype.eachRawSeries=function(r,a){each$f(this._componentsMap.get("series"),function(o){o&&r.call(a,o,o.componentIndex)})},t.prototype.eachSeriesByType=function(r,a,o){assertSeriesInitialized(this),each$f(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];l.subType===r&&a.call(o,l,s)},this)},t.prototype.eachRawSeriesByType=function(r,a,o){return each$f(this.getSeriesByType(r),a,o)},t.prototype.isSeriesFiltered=function(r){return assertSeriesInitialized(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,a){assertSeriesInitialized(this);var o=[];each$f(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];r.call(a,l,s)&&o.push(s)},this),this._seriesIndices=o,this._seriesIndicesMap=createHashMap(o)},t.prototype.restoreData=function(r){reCreateSeriesIndices(this);var a=this._componentsMap,o=[];a.each(function(s,l){ComponentModel$1.hasClass(l)&&o.push(l)}),ComponentModel$1.topologicalTravel(o,ComponentModel$1.getAllClassMainTypes(),function(s){each$f(a.get(s),function(l){l&&(s!=="series"||!isNotTargetSeries(l,r))&&l.restoreData()})})},t.internalField=function(){reCreateSeriesIndices=function(r){var a=r._seriesIndices=[];each$f(r._componentsMap.get("series"),function(o){o&&a.push(o.componentIndex)}),r._seriesIndicesMap=createHashMap(a)},assertSeriesInitialized=function(r){},initBase=function(r,a){r.option={},r.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,r._componentsMap=createHashMap({series:[]}),r._componentsCount=createHashMap();var o=a.aria;isObject$3(o)&&o.enabled==null&&(o.enabled=!0),mergeTheme(a,r._theme.option),merge(a,globalDefault,!1),r._mergeOption(a,null)}}(),t}(Model$1);function isNotTargetSeries(n,t){if(t){var r=t.seriesIndex,a=t.seriesId,o=t.seriesName;return r!=null&&n.componentIndex!==r||a!=null&&n.id!==a||o!=null&&n.name!==o}}function mergeTheme(n,t){var r=n.color&&!n.colorLayer;each$f(t,function(a,o){o==="colorLayer"&&r||ComponentModel$1.hasClass(o)||(typeof a=="object"?n[o]=n[o]?merge(n[o],a,!1):clone$4(a):n[o]==null&&(n[o]=a))})}function queryByIdOrName(n,t,r){if(isArray$1(t)){var a=createHashMap();return each$f(t,function(s){if(s!=null){var l=convertOptionIdName(s,null);l!=null&&a.set(s,!0)}}),filter(r,function(s){return s&&a.get(s[n])})}else{var o=convertOptionIdName(t,null);return filter(r,function(s){return s&&o!=null&&s[n]===o})}}function filterBySubType(n,t){return t.hasOwnProperty("subType")?filter(n,function(r){return r&&r.subType===t.subType}):n}function normalizeSetOptionInput(n){var t=createHashMap();return n&&each$f(normalizeToArray(n.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}mixin(GlobalModel,PaletteMixin);const GlobalModel$1=GlobalModel;var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function n(t){each$f(availableMethods,function(r){this[r]=bind$1(t[r],t)},this)}return n}();const ExtensionAPI$1=ExtensionAPI;var coordinateSystemCreators={},CoordinateSystemManager=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(t,r){var a=[];each$f(coordinateSystemCreators,function(o,s){var l=o.create(t,r);a=a.concat(l||[])}),this._coordinateSystems=a},n.prototype.update=function(t,r){each$f(this._coordinateSystems,function(a){a.update&&a.update(t,r)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(t,r){coordinateSystemCreators[t]=r},n.get=function(t){return coordinateSystemCreators[t]},n}();const CoordinateSystem=CoordinateSystemManager;var QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function n(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return n.prototype.setOption=function(t,r,a){t&&(each$f(normalizeToArray(t.series),function(l){l&&l.data&&isTypedArray(l.data)&&setAsPrimitive(l.data)}),each$f(normalizeToArray(t.dataset),function(l){l&&l.source&&isTypedArray(l.source)&&setAsPrimitive(l.source)})),t=clone$4(t);var o=this._optionBackup,s=parseRawOption(t,r,!o);this._newBaseOption=s.baseOption,o?(s.timelineOptions.length&&(o.timelineOptions=s.timelineOptions),s.mediaList.length&&(o.mediaList=s.mediaList),s.mediaDefault&&(o.mediaDefault=s.mediaDefault)):this._optionBackup=s},n.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],clone$4(t?r.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(t){var r,a=this._timelineOptions;if(a.length){var o=t.getComponent("timeline");o&&(r=clone$4(a[o.getCurrentIndex()]))}return r},n.prototype.getMediaOption=function(t){var r=this._api.getWidth(),a=this._api.getHeight(),o=this._mediaList,s=this._mediaDefault,l=[],u=[];if(!o.length&&!s)return u;for(var d=0,v=o.length;d<v;d++)applyMediaQuery(o[d].query,r,a)&&l.push(d);return!l.length&&s&&(l=[-1]),l.length&&!indicesEquals(l,this._currentMediaIndices)&&(u=map$1(l,function(g){return clone$4(g===-1?s.option:o[g].option)})),this._currentMediaIndices=l,u},n}();function parseRawOption(n,t,r){var a=[],o,s,l=n.baseOption,u=n.timeline,d=n.options,v=n.media,g=!!n.media,f=!!(d||u||l&&l.timeline);l?(s=l,s.timeline||(s.timeline=u)):((f||g)&&(n.options=n.media=null),s=n),g&&isArray$1(v)&&each$f(v,function(y){y&&y.option&&(y.query?a.push(y):o||(o=y))}),c(s),each$f(d,function(y){return c(y)}),each$f(a,function(y){return c(y.option)});function c(y){each$f(t,function(_){_(y,r)})}return{baseOption:s,timelineOptions:d||[],mediaDefault:o,mediaList:a}}function applyMediaQuery(n,t,r){var a={width:t,height:r,aspectratio:t/r},o=!0;return each$f(n,function(s,l){var u=l.match(QUERY_REG);if(!(!u||!u[1]||!u[2])){var d=u[1],v=u[2].toLowerCase();compare(a[v],s,d)||(o=!1)}}),o}function compare(n,t,r){return r==="min"?n>=t:r==="max"?n<=t:n===t}function indicesEquals(n,t){return n.join(",")===t.join(",")}const OptionManager$1=OptionManager;var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(n){var t=n&&n.itemStyle;if(t)for(var r=0,a=POSSIBLE_STYLES.length;r<a;r++){var o=POSSIBLE_STYLES[r],s=t.normal,l=t.emphasis;s&&s[o]&&(n[o]=n[o]||{},n[o].normal?merge(n[o].normal,s[o]):n[o].normal=s[o],s[o]=null),l&&l[o]&&(n[o]=n[o]||{},n[o].emphasis?merge(n[o].emphasis,l[o]):n[o].emphasis=l[o],l[o]=null)}}function convertNormalEmphasis(n,t,r){if(n&&n[t]&&(n[t].normal||n[t].emphasis)){var a=n[t].normal,o=n[t].emphasis;a&&(r?(n[t].normal=n[t].emphasis=null,defaults(n[t],a)):n[t]=a),o&&(n.emphasis=n.emphasis||{},n.emphasis[t]=o,o.focus&&(n.emphasis.focus=o.focus),o.blurScope&&(n.emphasis.blurScope=o.blurScope))}}function removeEC3NormalStatus(n){convertNormalEmphasis(n,"itemStyle"),convertNormalEmphasis(n,"lineStyle"),convertNormalEmphasis(n,"areaStyle"),convertNormalEmphasis(n,"label"),convertNormalEmphasis(n,"labelLine"),convertNormalEmphasis(n,"upperLabel"),convertNormalEmphasis(n,"edgeLabel")}function compatTextStyle(n,t){var r=isObject$2(n)&&n[t],a=isObject$2(r)&&r.textStyle;if(a)for(var o=0,s=TEXT_STYLE_OPTIONS.length;o<s;o++){var l=TEXT_STYLE_OPTIONS[o];a.hasOwnProperty(l)&&(r[l]=a[l])}}function compatEC3CommonStyles(n){n&&(removeEC3NormalStatus(n),compatTextStyle(n,"label"),n.emphasis&&compatTextStyle(n.emphasis,"label"))}function processSeries(n){if(isObject$2(n)){compatEC2ItemStyle(n),removeEC3NormalStatus(n),compatTextStyle(n,"label"),compatTextStyle(n,"upperLabel"),compatTextStyle(n,"edgeLabel"),n.emphasis&&(compatTextStyle(n.emphasis,"label"),compatTextStyle(n.emphasis,"upperLabel"),compatTextStyle(n.emphasis,"edgeLabel"));var t=n.markPoint;t&&(compatEC2ItemStyle(t),compatEC3CommonStyles(t));var r=n.markLine;r&&(compatEC2ItemStyle(r),compatEC3CommonStyles(r));var a=n.markArea;a&&compatEC3CommonStyles(a);var o=n.data;if(n.type==="graph"){o=o||n.nodes;var s=n.links||n.edges;if(s&&!isTypedArray(s))for(var l=0;l<s.length;l++)compatEC3CommonStyles(s[l]);each$f(n.categories,function(v){removeEC3NormalStatus(v)})}if(o&&!isTypedArray(o))for(var l=0;l<o.length;l++)compatEC3CommonStyles(o[l]);if(t=n.markPoint,t&&t.data)for(var u=t.data,l=0;l<u.length;l++)compatEC3CommonStyles(u[l]);if(r=n.markLine,r&&r.data)for(var d=r.data,l=0;l<d.length;l++)isArray$1(d[l])?(compatEC3CommonStyles(d[l][0]),compatEC3CommonStyles(d[l][1])):compatEC3CommonStyles(d[l]);n.type==="gauge"?(compatTextStyle(n,"axisLabel"),compatTextStyle(n,"title"),compatTextStyle(n,"detail")):n.type==="treemap"?(convertNormalEmphasis(n.breadcrumb,"itemStyle"),each$f(n.levels,function(v){removeEC3NormalStatus(v)})):n.type==="tree"&&removeEC3NormalStatus(n.leaves)}}function toArr(n){return isArray$1(n)?n:n?[n]:[]}function toObj(n){return(isArray$1(n)?n[0]:n)||{}}function globalCompatStyle(n,t){each$d(toArr(n.series),function(a){isObject$2(a)&&processSeries(a)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(r,function(a){each$d(toArr(n[a]),function(o){o&&(compatTextStyle(o,"axisLabel"),compatTextStyle(o.axisPointer,"label"))})}),each$d(toArr(n.parallel),function(a){var o=a&&a.parallelAxisDefault;compatTextStyle(o,"axisLabel"),compatTextStyle(o&&o.axisPointer,"label")}),each$d(toArr(n.calendar),function(a){convertNormalEmphasis(a,"itemStyle"),compatTextStyle(a,"dayLabel"),compatTextStyle(a,"monthLabel"),compatTextStyle(a,"yearLabel")}),each$d(toArr(n.radar),function(a){compatTextStyle(a,"name"),a.name&&a.axisName==null&&(a.axisName=a.name,delete a.name),a.nameGap!=null&&a.axisNameGap==null&&(a.axisNameGap=a.nameGap,delete a.nameGap)}),each$d(toArr(n.geo),function(a){isObject$2(a)&&(compatEC3CommonStyles(a),each$d(toArr(a.regions),function(o){compatEC3CommonStyles(o)}))}),each$d(toArr(n.timeline),function(a){compatEC3CommonStyles(a),convertNormalEmphasis(a,"label"),convertNormalEmphasis(a,"itemStyle"),convertNormalEmphasis(a,"controlStyle",!0);var o=a.data;isArray$1(o)&&each$f(o,function(s){isObject$3(s)&&(convertNormalEmphasis(s,"label"),convertNormalEmphasis(s,"itemStyle"))})}),each$d(toArr(n.toolbox),function(a){convertNormalEmphasis(a,"iconStyle"),each$d(a.feature,function(o){convertNormalEmphasis(o,"iconStyle")})}),compatTextStyle(toObj(n.axisPointer),"label"),compatTextStyle(toObj(n.tooltip).axisPointer,"label")}function get(n,t){for(var r=t.split(","),a=n,o=0;o<r.length&&(a=a&&a[r[o]],a!=null);o++);return a}function set(n,t,r,a){for(var o=t.split(","),s=n,l,u=0;u<o.length-1;u++)l=o[u],s[l]==null&&(s[l]={}),s=s[l];(a||s[o[u]]==null)&&(s[o[u]]=r)}function compatLayoutProperties(n){n&&each$f(LAYOUT_PROPERTIES,function(t){t[0]in n&&!(t[1]in n)&&(n[t[1]]=n[t[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(n){var t=n&&n.itemStyle;if(t)for(var r=0;r<BAR_ITEM_STYLE_MAP.length;r++){var a=BAR_ITEM_STYLE_MAP[r][1],o=BAR_ITEM_STYLE_MAP[r][0];t[a]!=null&&(t[o]=t[a])}}function compatPieLabel(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function compatSunburstState(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function compatGraphFocus(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function traverseTree(n,t){if(n)for(var r=0;r<n.length;r++)t(n[r]),n[r]&&traverseTree(n[r].children,t)}function globalBackwardCompat(n,t){globalCompatStyle(n,t),n.series=normalizeToArray(n.series),each$f(n.series,function(r){if(isObject$3(r)){var a=r.type;if(a==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(a==="pie"||a==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),compatPieLabel(r.label);var o=r.data;if(o&&!isTypedArray(o))for(var s=0;s<o.length;s++)compatPieLabel(o[s]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(a==="gauge"){var l=get(r,"pointer.color");l!=null&&set(r,"itemStyle.color",l)}else if(a==="bar"){compatBarItemStyle(r),compatBarItemStyle(r.backgroundStyle),compatBarItemStyle(r.emphasis);var o=r.data;if(o&&!isTypedArray(o))for(var s=0;s<o.length;s++)typeof o[s]=="object"&&(compatBarItemStyle(o[s]),compatBarItemStyle(o[s]&&o[s].emphasis))}else if(a==="sunburst"){var u=r.highlightPolicy;u&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=u)),compatSunburstState(r),traverseTree(r.data,compatSunburstState)}else a==="graph"||a==="sankey"?compatGraphFocus(r):a==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&defaults(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),compatLayoutProperties(r)}}),n.dataRange&&(n.visualMap=n.dataRange),each$f(COMPATITABLE_COMPONENTS,function(r){var a=n[r];a&&(isArray$1(a)||(a=[a]),each$f(a,function(o){compatLayoutProperties(o)}))})}function dataStack(n){var t=createHashMap();n.eachSeries(function(r){var a=r.get("stack");if(a){var o=t.get(a)||t.set(a,[]),s=r.getData(),l={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:r};if(!l.stackedDimension||!(l.isStackedByIndex||l.stackedByDimension))return;o.length&&s.setCalculationInfo("stackedOnSeries",o[o.length-1].seriesModel),o.push(l)}}),t.each(calculateStack)}function calculateStack(n){each$f(n,function(t,r){var a=[],o=[NaN,NaN],s=[t.stackResultDimension,t.stackedOverDimension],l=t.data,u=t.isStackedByIndex,d=t.seriesModel.get("stackStrategy")||"samesign";l.modify(s,function(v,g,f){var c=l.get(t.stackedDimension,f);if(isNaN(c))return o;var y,_;u?_=l.getRawIndex(f):y=l.get(t.stackedByDimension,f);for(var b=NaN,S=r-1;S>=0;S--){var x=n[S];if(u||(_=x.data.rawIndexOf(x.stackedByDimension,y)),_>=0){var w=x.data.getByRawIndex(x.stackResultDimension,_);if(d==="all"||d==="positive"&&w>0||d==="negative"&&w<0||d==="samesign"&&c>=0&&w>0||d==="samesign"&&c<=0&&w<0){c=addSafe(c,w),b=w;break}}}return a[0]=c,a[1]=b,a})})}var SourceImpl=function(){function n(t){this.data=t.data||(t.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=t.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=t.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var a=0;a<r.length;a++){var o=r[a];o.type==null&&guessOrdinal(this,a)===BE_ORDINAL.Must&&(o.type="ordinal")}}return n}();function isSourceInstance(n){return n instanceof SourceImpl}function createSource(n,t,r){r=r||detectSourceFormat(n);var a=t.seriesLayoutBy,o=determineSourceDimensions(n,r,a,t.sourceHeader,t.dimensions),s=new SourceImpl({data:n,sourceFormat:r,seriesLayoutBy:a,dimensionsDefine:o.dimensionsDefine,startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount,metaRawOption:clone$4(t)});return s}function createSourceFromSeriesDataOption(n){return new SourceImpl({data:n,sourceFormat:isTypedArray(n)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(n){return new SourceImpl({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:clone$4(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function detectSourceFormat(n){var t=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(n))t=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(n)){n.length===0&&(t=SOURCE_FORMAT_ARRAY_ROWS);for(var r=0,a=n.length;r<a;r++){var o=n[r];if(o!=null){if(isArray$1(o)){t=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(o)){t=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(n)){for(var s in n)if(hasOwn(n,s)&&isArrayLike(n[s])){t=SOURCE_FORMAT_KEYED_COLUMNS;break}}return t}function determineSourceDimensions(n,t,r,a,o){var s,l;if(!n)return{dimensionsDefine:normalizeDimensionsOption(o),startIndex:l,dimensionsDetectedCount:s};if(t===SOURCE_FORMAT_ARRAY_ROWS){var u=n;a==="auto"||a==null?arrayRowsTravelFirst(function(v){v!=null&&v!=="-"&&(isString(v)?l==null&&(l=1):l=0)},r,u,10):l=isNumber(a)?a:a?1:0,!o&&l===1&&(o=[],arrayRowsTravelFirst(function(v,g){o[g]=v!=null?v+"":""},r,u,1/0)),s=o?o.length:r===SERIES_LAYOUT_BY_ROW?u.length:u[0]?u[0].length:null}else if(t===SOURCE_FORMAT_OBJECT_ROWS)o||(o=objectRowsCollectDimensions(n));else if(t===SOURCE_FORMAT_KEYED_COLUMNS)o||(o=[],each$f(n,function(v,g){o.push(g)}));else if(t===SOURCE_FORMAT_ORIGINAL){var d=getDataItemValue(n[0]);s=isArray$1(d)&&d.length||1}return{startIndex:l,dimensionsDefine:normalizeDimensionsOption(o),dimensionsDetectedCount:s}}function objectRowsCollectDimensions(n){for(var t=0,r;t<n.length&&!(r=n[t++]););if(r)return keys(r)}function normalizeDimensionsOption(n){if(n){var t=createHashMap();return map$1(n,function(r,a){r=isObject$3(r)?r:{name:r};var o={name:r.name,displayName:r.displayName,type:r.type};if(o.name==null)return o;o.name+="",o.displayName==null&&(o.displayName=o.name);var s=t.get(o.name);return s?o.name+="-"+s.count++:t.set(o.name,{count:1}),o})}}function arrayRowsTravelFirst(n,t,r,a){if(t===SERIES_LAYOUT_BY_ROW)for(var o=0;o<r.length&&o<a;o++)n(r[o]?r[o][0]:null,o);else for(var s=r[0]||[],o=0;o<s.length&&o<a;o++)n(s[o],o)}function shouldRetrieveDataByName(n){var t=n.sourceFormat;return t===SOURCE_FORMAT_OBJECT_ROWS||t===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function n(t,r){var a=isSourceInstance(t)?t:createSourceFromSeriesDataOption(t);this._source=a;var o=this._data=a.data;a.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=r,this._data=o),mountMethods(this,o,a)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(t,r){},n.prototype.appendData=function(t){},n.prototype.clean=function(){},n.protoInitialize=function(){var t=n.prototype;t.pure=!1,t.persistent=!0}(),n.internalField=function(){var t;mountMethods=function(l,u,d){var v=d.sourceFormat,g=d.seriesLayoutBy,f=d.startIndex,c=d.dimensionsDefine,y=providerMethods[getMethodMapKey(v,g)];if(extend(l,y),v===SOURCE_FORMAT_TYPED_ARRAY)l.getItem=r,l.count=o,l.fillStorage=a;else{var _=getRawSourceItemGetter(v,g);l.getItem=bind$1(_,null,u,f,c);var b=getRawSourceDataCounter(v,g);l.count=bind$1(b,null,u,f,c)}};var r=function(l,u){l=l-this._offset,u=u||[];for(var d=this._data,v=this._dimSize,g=v*l,f=0;f<v;f++)u[f]=d[g+f];return u},a=function(l,u,d,v){for(var g=this._data,f=this._dimSize,c=0;c<f;c++){for(var y=v[c],_=y[0]==null?1/0:y[0],b=y[1]==null?-1/0:y[1],S=u-l,x=d[c],w=0;w<S;w++){var T=g[w*f+c];x[l+w]=T,T<_&&(_=T),T>b&&(b=T)}y[0]=_,y[1]=b}},o=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(t={},t[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:s},t[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:s},t[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(l){var u=this._data;each$f(l,function(d,v){for(var g=u[v]||(u[v]=[]),f=0;f<(d||[]).length;f++)g.push(d[f])})}},t[SOURCE_FORMAT_ORIGINAL]={appendData:s},t[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(l){this._data=l},clean:function(){this._offset+=this.count(),this._data=null}},t);function s(l){for(var u=0;u<l.length;u++)this._data.push(l[u])}}(),n}(),getItemSimply=function(n,t,r,a){return n[a]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(n,t,r,a){return n[a+t]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(n,t,r,a,o){a+=t;for(var s=o||[],l=n,u=0;u<l.length;u++){var d=l[u];s[u]=d?d[a]:null}return s},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(n,t,r,a,o){for(var s=o||[],l=0;l<r.length;l++){var u=r[l].name,d=n[u];s[l]=d?d[a]:null}return s},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(n,t){var r=rawSourceItemGetterMap[getMethodMapKey(n,t)];return r}var countSimply=function(n,t,r){return n.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(n,t,r){return Math.max(0,n.length-t)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(n,t,r){var a=n[0];return a?Math.max(0,a.length-t):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(n,t,r){var a=r[0].name,o=n[a];return o?o.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(n,t){var r=rawSourceDataCounterMap[getMethodMapKey(n,t)];return r}var getRawValueSimply=function(n,t,r){return n[t]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(n,t,r){return n[r]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(n,t,r){var a=getDataItemValue(n);return a instanceof Array?a[t]:a},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(n){var t=rawSourceValueGetterMap[n];return t}function getMethodMapKey(n,t){return n===SOURCE_FORMAT_ARRAY_ROWS?n+"_"+t:n}function retrieveRawValue(n,t,r){if(n){var a=n.getRawDataItem(t);if(a!=null){var o=n.getStore(),s=o.getSource().sourceFormat;if(r!=null){var l=n.getDimensionIndex(r),u=o.getDimensionProperty(l);return getRawSourceValueGetter(s)(a,l,u)}else{var d=a;return s===SOURCE_FORMAT_ORIGINAL&&(d=getDataItemValue(a)),d}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function n(){}return n.prototype.getDataParams=function(t,r){var a=this.getData(r),o=this.getRawValue(t,r),s=a.getRawIndex(t),l=a.getName(t),u=a.getRawDataItem(t),d=a.getItemVisual(t,"style"),v=d&&d[a.getItemVisual(t,"drawType")||"fill"],g=d&&d.stroke,f=this.mainType,c=f==="series",y=a.userOutput&&a.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:c?this.subType:null,seriesIndex:this.seriesIndex,seriesId:c?this.id:null,seriesName:c?this.name:null,name:l,dataIndex:s,data:u,dataType:r,value:o,color:v,borderColor:g,dimensionNames:y?y.fullDimensions:null,encode:y?y.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(t,r,a,o,s,l){r=r||"normal";var u=this.getData(a),d=this.getDataParams(t,a);if(l&&(d.value=l.interpolatedValue),o!=null&&isArray$1(d.value)&&(d.value=d.value[o]),!s){var v=u.getItemModel(t);s=v.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(isFunction(s))return d.status=r,d.dimensionIndex=o,s(d);if(isString(s)){var g=formatTpl(s,d);return g.replace(DIMENSION_LABEL_REG,function(f,c){var y=c.length,_=c;_.charAt(0)==="["&&_.charAt(y-1)==="]"&&(_=+_.slice(1,y-1));var b=retrieveRawValue(u,t,_);if(l&&isArray$1(l.interpolatedValue)){var S=u.getDimensionIndex(_);S>=0&&(b=l.interpolatedValue[S])}return b!=null?b+"":""})}},n.prototype.getRawValue=function(t,r){return retrieveRawValue(this.getData(r),t)},n.prototype.formatTooltip=function(t,r,a){},n}();function normalizeTooltipFormatResult(n){var t,r;return isObject$3(n)?n.type&&(r=n):t=n,{text:t,frag:r}}function createTask(n){return new Task(n)}var Task=function(){function n(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return n.prototype.perform=function(t){var r=this._upstream,a=t&&t.skip;if(this._dirty&&r){var o=this.context;o.data=o.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!a&&(s=this._plan(this.context));var l=g(this._modBy),u=this._modDataCount||0,d=g(t&&t.modBy),v=t&&t.modDataCount||0;(l!==d||u!==v)&&(s="reset");function g(w){return!(w>=1)&&(w=1),w}var f;(this._dirty||s==="reset")&&(this._dirty=!1,f=this._doReset(a)),this._modBy=d,this._modDataCount=v;var c=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var y=this._dueIndex,_=Math.min(c!=null?this._dueIndex+c:1/0,this._dueEnd);if(!a&&(f||y<_)){var b=this._progress;if(isArray$1(b))for(var S=0;S<b.length;S++)this._doProgress(b[S],y,_,d,v);else this._doProgress(b,y,_,d,v)}this._dueIndex=_;var x=this._settedOutputEnd!=null?this._settedOutputEnd:_;this._outputDueEnd=x}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(t,r,a,o,s){iterator.reset(r,a,o,s),this._callingProgress=t,this._callingProgress({start:r,end:a,count:a-r,next:iterator.next},this.context)},n.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,a;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(a=r.forceFirstProgress,r=r.progress),isArray$1(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var o=this._downstream;return o&&o.dirty(),a},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},n}(),iterator=function(){var n,t,r,a,o,s={reset:function(d,v,g,f){t=d,n=v,r=g,a=f,o=Math.ceil(a/r),s.next=r>1&&a>0?u:l}};return s;function l(){return t<n?t++:null}function u(){var d=t%o*r+Math.ceil(t/o),v=t>=n?null:d<a?d:t;return t++,v}}();function parseDataValue(n,t){var r=t&&t.type;return r==="ordinal"?n:(r==="time"&&!isNumber(n)&&n!=null&&n!=="-"&&(n=+parseDate(n)),n==null||n===""?NaN:+n)}var valueParserMap=createHashMap({number:function(n){return parseFloat(n)},time:function(n){return+parseDate(n)},trim:function(n){return isString(n)?trim$1(n):n}});function getRawValueParser(n){return valueParserMap.get(n)}var ORDER_COMPARISON_OP_MAP={lt:function(n,t){return n<t},lte:function(n,t){return n<=t},gt:function(n,t){return n>t},gte:function(n,t){return n>=t}},FilterOrderComparator=function(){function n(t,r){if(!isNumber(r)){var a="";throwError(a)}this._opFn=ORDER_COMPARISON_OP_MAP[t],this._rvalFloat=numericToNumber(r)}return n.prototype.evaluate=function(t){return isNumber(t)?this._opFn(t,this._rvalFloat):this._opFn(numericToNumber(t),this._rvalFloat)},n}(),SortOrderComparator=function(){function n(t,r){var a=t==="desc";this._resultLT=a?1:-1,r==null&&(r=a?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return n.prototype.evaluate=function(t,r){var a=isNumber(t)?t:numericToNumber(t),o=isNumber(r)?r:numericToNumber(r),s=isNaN(a),l=isNaN(o);if(s&&(a=this._incomparable),l&&(o=this._incomparable),s&&l){var u=isString(t),d=isString(r);u&&(a=d?t:0),d&&(o=u?r:0)}return a<o?this._resultLT:a>o?-this._resultLT:0},n}(),FilterEqualityComparator=function(){function n(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=numericToNumber(r)}return n.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var a=typeof t;a!==this._rvalTypeof&&(a==="number"||this._rvalTypeof==="number")&&(r=numericToNumber(t)===this._rvalFloat)}return this._isEQ?r:!r},n}();function createFilterComparator(n,t){return n==="eq"||n==="ne"?new FilterEqualityComparator(n==="eq",t):hasOwn(ORDER_COMPARISON_OP_MAP,n)?new FilterOrderComparator(n,t):null}var ExternalSource=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(t){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(t){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(t,r){},n.prototype.retrieveValueFromItem=function(t,r){},n.prototype.convertValue=function(t,r){return parseDataValue(t,r)},n}();function createExternalSource(n,t){var r=new ExternalSource,a=n.data,o=r.sourceFormat=n.sourceFormat,s=n.startIndex,l="";n.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(l);var u=[],d={},v=n.dimensionsDefine;if(v)each$f(v,function(b,S){var x=b.name,w={index:S,name:x,displayName:b.displayName};if(u.push(w),x!=null){var T="";hasOwn(d,x)&&throwError(T),d[x]=w}});else for(var g=0;g<n.dimensionsDetectedCount;g++)u.push({index:g});var f=getRawSourceItemGetter(o,SERIES_LAYOUT_BY_COLUMN);t.__isBuiltIn&&(r.getRawDataItem=function(b){return f(a,s,u,b)},r.getRawData=bind$1(getRawData,null,n)),r.cloneRawData=bind$1(cloneRawData,null,n);var c=getRawSourceDataCounter(o,SERIES_LAYOUT_BY_COLUMN);r.count=bind$1(c,null,a,s,u);var y=getRawSourceValueGetter(o);r.retrieveValue=function(b,S){var x=f(a,s,u,b);return _(x,S)};var _=r.retrieveValueFromItem=function(b,S){if(b!=null){var x=u[S];if(x)return y(b,S,x.name)}};return r.getDimensionInfo=bind$1(getDimensionInfo,null,u,d),r.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,u),r}function getRawData(n){var t=n.sourceFormat;if(!isSupportedSourceFormat(t)){var r="";throwError(r)}return n.data}function cloneRawData(n){var t=n.sourceFormat,r=n.data;if(!isSupportedSourceFormat(t)){var a="";throwError(a)}if(t===SOURCE_FORMAT_ARRAY_ROWS){for(var o=[],s=0,l=r.length;s<l;s++)o.push(r[s].slice());return o}else if(t===SOURCE_FORMAT_OBJECT_ROWS){for(var o=[],s=0,l=r.length;s<l;s++)o.push(extend({},r[s]));return o}}function getDimensionInfo(n,t,r){if(r!=null){if(isNumber(r)||!isNaN(r)&&!hasOwn(t,r))return n[r];if(hasOwn(t,r))return t[r]}}function cloneAllDimensionInfo(n){return clone$4(n)}var externalTransformMap=createHashMap();function registerExternalTransform(n){n=clone$4(n);var t=n.type,r="";t||throwError(r);var a=t.split(":");a.length!==2&&throwError(r);var o=!1;a[0]==="echarts"&&(t=a[1],o=!0),n.__isBuiltIn=o,externalTransformMap.set(t,n)}function applyDataTransform(n,t,r){var a=normalizeToArray(n),o=a.length,s="";o||throwError(s);for(var l=0,u=o;l<u;l++){var d=a[l];t=applySingleDataTransform(d,t),l!==u-1&&(t.length=Math.max(t.length,1))}return t}function applySingleDataTransform(n,t,r,a){var o="";t.length||throwError(o),isObject$3(n)||throwError(o);var s=n.type,l=externalTransformMap.get(s);l||throwError(o);var u=map$1(t,function(v){return createExternalSource(v,l)}),d=normalizeToArray(l.transform({upstream:u[0],upstreamList:u,config:clone$4(n.config)}));return map$1(d,function(v,g){var f="";isObject$3(v)||throwError(f),v.data||throwError(f);var c=detectSourceFormat(v.data);isSupportedSourceFormat(c)||throwError(f);var y,_=t[0];if(_&&g===0&&!v.dimensions){var b=_.startIndex;b&&(v.data=_.data.slice(0,b).concat(v.data)),y={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:b,dimensions:_.metaRawOption.dimensions}}else y={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:v.dimensions};return createSource(v.data,y,null)})}function isSupportedSourceFormat(n){return n===SOURCE_FORMAT_ARRAY_ROWS||n===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(n){return n>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(n){var t=n.constructor;return t===Array?n.slice():new t(n)}function prepareStore(n,t,r,a,o){var s=dataCtors[r||"float"];if(o){var l=n[t],u=l&&l.length;if(u!==a){for(var d=new s(a),v=0;v<u;v++)d[v]=l[v];n[t]=d}}else n[t]=new s(a)}var DataStore=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return n.prototype.initData=function(t,r,a){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var o=t.getSource(),s=this.defaultDimValueGetter=defaultDimValueGetters[o.sourceFormat];this._dimValueGetter=a||s,this._rawExtent=[],shouldRetrieveDataByName(o),this._dimensions=map$1(r,function(l){return{type:l.type,property:l.property}}),this._initDataFromProvider(0,t.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(t,r){var a=this._calcDimNameToIdx,o=this._dimensions,s=a.get(t);if(s!=null){if(o[s].type===r)return s}else s=o.length;return o[s]={type:r},a.set(t,s),this._chunks[s]=new dataCtors[r||"float"](this._rawCount),this._rawExtent[s]=getInitialExtent(),s},n.prototype.collectOrdinalMeta=function(t,r){var a=this._chunks[t],o=this._dimensions[t],s=this._rawExtent,l=o.ordinalOffset||0,u=a.length;l===0&&(s[t]=getInitialExtent());for(var d=s[t],v=l;v<u;v++){var g=a[v]=r.parseAndCollect(a[v]);isNaN(g)||(d[0]=Math.min(g,d[0]),d[1]=Math.max(g,d[1]))}o.ordinalMeta=r,o.ordinalOffset=u,o.type="ordinal"},n.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],a=r.ordinalMeta;return a},n.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},n.prototype.appendData=function(t){var r=this._provider,a=this.count();r.appendData(t);var o=r.count();return r.persistent||(o+=a),a<o&&this._initDataFromProvider(a,o,!0),[a,o]},n.prototype.appendValues=function(t,r){for(var a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,u=this.count(),d=u+Math.max(t.length,r||0),v=0;v<s;v++){var g=o[v];prepareStore(a,v,g.type,d,!0)}for(var f=[],c=u;c<d;c++)for(var y=c-u,_=0;_<s;_++){var g=o[_],b=defaultDimValueGetters.arrayRows.call(this,t[y]||f,g.property,y,_);a[_][c]=b;var S=l[_];b<S[0]&&(S[0]=b),b>S[1]&&(S[1]=b)}return this._rawCount=this._count=d,{start:u,end:d}},n.prototype._initDataFromProvider=function(t,r,a){for(var o=this._provider,s=this._chunks,l=this._dimensions,u=l.length,d=this._rawExtent,v=map$1(l,function(w){return w.property}),g=0;g<u;g++){var f=l[g];d[g]||(d[g]=getInitialExtent()),prepareStore(s,g,f.type,r,a)}if(o.fillStorage)o.fillStorage(t,r,s,d);else for(var c=[],y=t;y<r;y++){c=o.getItem(y,c);for(var _=0;_<u;_++){var b=s[_],S=this._dimValueGetter(c,v[_],y,_);b[y]=S;var x=d[_];S<x[0]&&(x[0]=S),S>x[1]&&(x[1]=S)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=r,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var a=this._chunks[t];return a?a[this.getRawIndex(r)]:NaN},n.prototype.getValues=function(t,r){var a=[],o=[];if(r==null){r=t,t=[];for(var s=0;s<this._dimensions.length;s++)o.push(s)}else o=t;for(var s=0,l=o.length;s<l;s++)a.push(this.get(o[s],r));return a},n.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var a=this._chunks[t];return a?a[r]:NaN},n.prototype.getSum=function(t){var r=this._chunks[t],a=0;if(r)for(var o=0,s=this.count();o<s;o++){var l=this.get(t,o);isNaN(l)||(a+=l)}return a},n.prototype.getMedian=function(t){var r=[];this.each([t],function(s){isNaN(s)||r.push(s)});var a=r.sort(function(s,l){return s-l}),o=this.count();return o===0?0:o%2===1?a[(o-1)/2]:(a[o/2]+a[o/2-1])/2},n.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,a=r[t];if(a!=null&&a<this._count&&a===t)return t;for(var o=0,s=this._count-1;o<=s;){var l=(o+s)/2|0;if(r[l]<t)o=l+1;else if(r[l]>t)s=l-1;else return l}return-1},n.prototype.indicesOfNearest=function(t,r,a){var o=this._chunks,s=o[t],l=[];if(!s)return l;a==null&&(a=1/0);for(var u=1/0,d=-1,v=0,g=0,f=this.count();g<f;g++){var c=this.getRawIndex(g),y=r-s[c],_=Math.abs(y);_<=a&&((_<u||_===u&&y>=0&&d<0)&&(u=_,d=y,v=0),y===d&&(l[v++]=g))}return l.length=v,l},n.prototype.getIndices=function(){var t,r=this._indices;if(r){var a=r.constructor,o=this._count;if(a===Array){t=new a(o);for(var s=0;s<o;s++)t[s]=r[s]}else t=new a(r.buffer,0,o)}else{var a=getIndicesCtor(this._rawCount);t=new a(this.count());for(var s=0;s<t.length;s++)t[s]=s}return t},n.prototype.filter=function(t,r){if(!this._count)return this;for(var a=this.clone(),o=a.count(),s=getIndicesCtor(a._rawCount),l=new s(o),u=[],d=t.length,v=0,g=t[0],f=a._chunks,c=0;c<o;c++){var y=void 0,_=a.getRawIndex(c);if(d===0)y=r(c);else if(d===1){var b=f[g][_];y=r(b,c)}else{for(var S=0;S<d;S++)u[S]=f[t[S]][_];u[S]=c,y=r.apply(null,u)}y&&(l[v++]=_)}return v<o&&(a._indices=l),a._count=v,a._extent=[],a._updateGetRawIdx(),a},n.prototype.selectRange=function(t){var r=this.clone(),a=r._count;if(!a)return this;var o=keys(t),s=o.length;if(!s)return this;var l=r.count(),u=getIndicesCtor(r._rawCount),d=new u(l),v=0,g=o[0],f=t[g][0],c=t[g][1],y=r._chunks,_=!1;if(!r._indices){var b=0;if(s===1){for(var S=y[o[0]],x=0;x<a;x++){var w=S[x];(w>=f&&w<=c||isNaN(w))&&(d[v++]=b),b++}_=!0}else if(s===2){for(var S=y[o[0]],T=y[o[1]],A=t[o[1]][0],E=t[o[1]][1],x=0;x<a;x++){var w=S[x],$=T[x];(w>=f&&w<=c||isNaN(w))&&($>=A&&$<=E||isNaN($))&&(d[v++]=b),b++}_=!0}}if(!_)if(s===1)for(var x=0;x<l;x++){var P=r.getRawIndex(x),w=y[o[0]][P];(w>=f&&w<=c||isNaN(w))&&(d[v++]=P)}else for(var x=0;x<l;x++){for(var I=!0,P=r.getRawIndex(x),C=0;C<s;C++){var M=o[C],w=y[M][P];(w<t[M][0]||w>t[M][1])&&(I=!1)}I&&(d[v++]=r.getRawIndex(x))}return v<l&&(r._indices=d),r._count=v,r._extent=[],r._updateGetRawIdx(),r},n.prototype.map=function(t,r){var a=this.clone(t);return this._updateDims(a,t,r),a},n.prototype.modify=function(t,r){this._updateDims(this,t,r)},n.prototype._updateDims=function(t,r,a){for(var o=t._chunks,s=[],l=r.length,u=t.count(),d=[],v=t._rawExtent,g=0;g<r.length;g++)v[r[g]]=getInitialExtent();for(var f=0;f<u;f++){for(var c=t.getRawIndex(f),y=0;y<l;y++)d[y]=o[r[y]][c];d[l]=f;var _=a&&a.apply(null,d);if(_!=null){typeof _!="object"&&(s[0]=_,_=s);for(var g=0;g<_.length;g++){var b=r[g],S=_[g],x=v[b],w=o[b];w&&(w[c]=S),S<x[0]&&(x[0]=S),S>x[1]&&(x[1]=S)}}}},n.prototype.lttbDownSample=function(t,r){var a=this.clone([t],!0),o=a._chunks,s=o[t],l=this.count(),u=0,d=Math.floor(1/r),v=this.getRawIndex(0),g,f,c,y=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(l/d)+2)*2,l));y[u++]=v;for(var _=1;_<l-1;_+=d){for(var b=Math.min(_+d,l-1),S=Math.min(_+d*2,l),x=(S+b)/2,w=0,T=b;T<S;T++){var A=this.getRawIndex(T),E=s[A];isNaN(E)||(w+=E)}w/=S-b;var $=_,P=Math.min(_+d,l),I=_-1,C=s[v];g=-1,c=$;for(var M=-1,D=0,T=$;T<P;T++){var A=this.getRawIndex(T),E=s[A];if(isNaN(E)){D++,M<0&&(M=A);continue}f=Math.abs((I-x)*(E-C)-(I-T)*(w-C)),f>g&&(g=f,c=A)}D>0&&D<P-$&&(y[u++]=Math.min(M,c),c=Math.max(M,c)),y[u++]=c,v=c}return y[u++]=this.getRawIndex(l-1),a._count=u,a._indices=y,a.getRawIndex=this._getRawIdx,a},n.prototype.downSample=function(t,r,a,o){for(var s=this.clone([t],!0),l=s._chunks,u=[],d=Math.floor(1/r),v=l[t],g=this.count(),f=s._rawExtent[t]=getInitialExtent(),c=new(getIndicesCtor(this._rawCount))(Math.ceil(g/d)),y=0,_=0;_<g;_+=d){d>g-_&&(d=g-_,u.length=d);for(var b=0;b<d;b++){var S=this.getRawIndex(_+b);u[b]=v[S]}var x=a(u),w=this.getRawIndex(Math.min(_+o(u,x)||0,g-1));v[w]=x,x<f[0]&&(f[0]=x),x>f[1]&&(f[1]=x),c[y++]=w}return s._count=y,s._indices=c,s._updateGetRawIdx(),s},n.prototype.each=function(t,r){if(this._count)for(var a=t.length,o=this._chunks,s=0,l=this.count();s<l;s++){var u=this.getRawIndex(s);switch(a){case 0:r(s);break;case 1:r(o[t[0]][u],s);break;case 2:r(o[t[0]][u],o[t[1]][u],s);break;default:for(var d=0,v=[];d<a;d++)v[d]=o[t[d]][u];v[d]=s,r.apply(null,v)}}},n.prototype.getDataExtent=function(t){var r=this._chunks[t],a=getInitialExtent();if(!r)return a;var o=this.count(),s=!this._indices,l;if(s)return this._rawExtent[t].slice();if(l=this._extent[t],l)return l.slice();l=a;for(var u=l[0],d=l[1],v=0;v<o;v++){var g=this.getRawIndex(v),f=r[g];f<u&&(u=f),f>d&&(d=f)}return l=[u,d],this._extent[t]=l,l},n.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var a=[],o=this._chunks,s=0;s<o.length;s++)a.push(o[s][r]);return a},n.prototype.clone=function(t,r){var a=new n,o=this._chunks,s=t&&reduce(t,function(u,d){return u[d]=!0,u},{});if(s)for(var l=0;l<o.length;l++)a._chunks[l]=s[l]?cloneChunk(o[l]):o[l];else a._chunks=o;return this._copyCommonProps(a),r||(a._indices=this._cloneIndices()),a._updateGetRawIdx(),a},n.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=clone$4(this._extent),t._rawExtent=clone$4(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var a=this._indices.length;r=new t(a);for(var o=0;o<a;o++)r[o]=this._indices[o]}else r=new t(this._indices);return r}return null},n.prototype._getRawIdxIdentity=function(t){return t},n.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function t(r,a,o,s){return parseDataValue(r[s],this._dimensions[s])}defaultDimValueGetters={arrayRows:t,objectRows:function(r,a,o,s){return parseDataValue(r[a],this._dimensions[s])},keyedColumns:t,original:function(r,a,o,s){var l=r&&(r.value==null?r:r.value);return parseDataValue(l instanceof Array?l[s]:l,this._dimensions[s])},typedArray:function(r,a,o,s){return r[s]}}}(),n}(),SourceManager=function(){function n(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),a=!!r.length,o,s;if(isSeries(t)){var l=t,u=void 0,d=void 0,v=void 0;if(a){var g=r[0];g.prepareSource(),v=g.getSource(),u=v.data,d=v.sourceFormat,s=[g._getVersionSign()]}else u=l.get("data",!0),d=isTypedArray(u)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,s=[];var f=this._getSourceMetaRawOption()||{},c=v&&v.metaRawOption||{},y=retrieve2(f.seriesLayoutBy,c.seriesLayoutBy)||null,_=retrieve2(f.sourceHeader,c.sourceHeader),b=retrieve2(f.dimensions,c.dimensions),S=y!==c.seriesLayoutBy||!!_!=!!c.sourceHeader||b;o=S?[createSource(u,{seriesLayoutBy:y,sourceHeader:_,dimensions:b},d)]:[]}else{var x=t;if(a){var w=this._applyTransform(r);o=w.sourceList,s=w.upstreamSignList}else{var T=x.get("source",!0);o=[createSource(T,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(o,s)},n.prototype._applyTransform=function(t){var r=this._sourceHost,a=r.get("transform",!0),o=r.get("fromTransformResult",!0);if(o!=null){var s="";t.length!==1&&doThrow(s)}var l,u=[],d=[];return each$f(t,function(v){v.prepareSource();var g=v.getSource(o||0),f="";o!=null&&!g&&doThrow(f),u.push(g),d.push(v._getVersionSign())}),a?l=applyDataTransform(a,u,{datasetIndex:r.componentIndex}):o!=null&&(l=[cloneSourceShallow(u[0])]),{sourceList:l,upstreamSignList:d}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var a=t[r];if(a._isDirty()||this._upstreamSignList[r]!==a._getVersionSign())return!0}},n.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var a=this._getUpstreamSourceManagers();return a[0]&&a[0].getSource(t)}return r},n.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},n.prototype._innerGetDataStore=function(t,r,a){var o=0,s=this._storeList,l=s[o];l||(l=s[o]={});var u=l[a];if(!u){var d=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&d?u=d._innerGetDataStore(t,r,a):(u=new DataStore,u.initData(new DefaultDataProvider(r,t.length),t)),l[a]=u}return u},n.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(isSeries(t)){var r=querySeriesUpstreamDatasetModel(t);return r?[r.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(t),function(a){return a.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,a,o;if(isSeries(t))r=t.get("seriesLayoutBy",!0),a=t.get("sourceHeader",!0),o=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=t;r=s.get("seriesLayoutBy",!0),a=s.get("sourceHeader",!0),o=s.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:a,dimensions:o}},n}();function disableTransformOptionMerge(n){var t=n.option.transform;t&&setAsPrimitive(n.option.transform)}function isSeries(n){return n.mainType==="series"}function doThrow(n){throw new Error(n)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipTextStyle(n,t){var r=n.color||"#6e7079",a=n.fontSize||12,o=n.fontWeight||"400",s=n.color||"#464646",l=n.fontSize||14,u=n.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+encodeHTML(a+"")+"px;color:"+encodeHTML(r)+";font-weight:"+encodeHTML(o+""),valueStyle:"font-size:"+encodeHTML(l+"")+"px;color:"+encodeHTML(s)+";font-weight:"+encodeHTML(u+"")}:{nameStyle:{fontSize:a,fill:r,fontWeight:o},valueStyle:{fontSize:l,fill:s,fontWeight:u}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(n,t){return t.type=n,t}function isSectionFragment(n){return n.type==="section"}function getBuilder(n){return isSectionFragment(n)?buildSection:buildNameValue}function getBlockGapLevel(n){if(isSectionFragment(n)){var t=0,r=n.blocks.length,a=r>1||r>0&&!n.noHeader;return each$f(n.blocks,function(o){var s=getBlockGapLevel(o);s>=t&&(t=s+ +(a&&(!s||isSectionFragment(o)&&!o.noHeader)))}),t}return 0}function buildSection(n,t,r,a){var o=t.noHeader,s=getGap(getBlockGapLevel(t)),l=[],u=t.blocks||[];assert(!u||isArray$1(u)),u=u||[];var d=n.orderMode;if(t.sortBlocks&&d){u=u.slice();var v={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(v,d)){var g=new SortOrderComparator(v[d],null);u.sort(function(_,b){return g.evaluate(_.sortParam,b.sortParam)})}else d==="seriesDesc"&&u.reverse()}each$f(u,function(_,b){var S=t.valueFormatter,x=getBuilder(_)(S?extend(extend({},n),{valueFormatter:S}):n,_,b>0?s.html:0,a);x!=null&&l.push(x)});var f=n.renderMode==="richText"?l.join(s.richText):wrapBlockHTML(l.join(""),o?r:s.html);if(o)return f;var c=makeValueReadable(t.header,"ordinal",n.useUTC),y=getTooltipTextStyle(a,n.renderMode).nameStyle;return n.renderMode==="richText"?wrapInlineNameRichText(n,c,y)+s.richText+f:wrapBlockHTML('<div style="'+y+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+encodeHTML(c)+"</div>"+f,r)}function buildNameValue(n,t,r,a){var o=n.renderMode,s=t.noName,l=t.noValue,u=!t.markerType,d=t.name,v=n.useUTC,g=t.valueFormatter||n.valueFormatter||function(A){return A=isArray$1(A)?A:[A],map$1(A,function(E,$){return makeValueReadable(E,isArray$1(y)?y[$]:y,v)})};if(!(s&&l)){var f=u?"":n.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",o),c=s?"":makeValueReadable(d,"ordinal",v),y=t.valueType,_=l?[]:g(t.value),b=!u||!s,S=!u&&s,x=getTooltipTextStyle(a,o),w=x.nameStyle,T=x.valueStyle;return o==="richText"?(u?"":f)+(s?"":wrapInlineNameRichText(n,c,w))+(l?"":wrapInlineValueRichText(n,_,b,S,T)):wrapBlockHTML((u?"":f)+(s?"":wrapInlineNameHTML(c,!u,w))+(l?"":wrapInlineValueHTML(_,b,S,T)),r)}}function buildTooltipMarkup(n,t,r,a,o,s){if(n){var l=getBuilder(n),u={useUTC:o,renderMode:r,orderMode:a,markupStyleCreator:t,valueFormatter:n.valueFormatter};return l(u,n,0,s)}}function getGap(n){return{html:HTML_GAPS[n],richText:RICH_TEXT_GAPS[n]}}function wrapBlockHTML(n,t){var r='<div style="clear:both"></div>',a="margin: "+t+"px 0 0";return'<div style="'+a+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+n+r+"</div>"}function wrapInlineNameHTML(n,t,r){var a=t?"margin-left:2px":"";return'<span style="'+r+";"+a+'">'+encodeHTML(n)+"</span>"}function wrapInlineValueHTML(n,t,r,a){var o=r?"10px":"20px",s=t?"float:right;margin-left:"+o:"";return n=isArray$1(n)?n:[n],'<span style="'+s+";"+a+'">'+map$1(n,function(l){return encodeHTML(l)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(n,t,r){return n.markupStyleCreator.wrapRichTextStyle(t,r)}function wrapInlineValueRichText(n,t,r,a,o){var s=[o],l=a?10:20;return r&&s.push({padding:[0,0,0,l],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(isArray$1(t)?t.join("  "):t,s)}function retrieveVisualColorForTooltipMarker(n,t){var r=n.getData().getItemVisual(t,"style"),a=r[n.visualDrawType];return convertToColorString(a)}function getPaddingFromTooltipModel(n,t){var r=n.get("padding");return r??(t==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function n(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(t,r,a){var o=a==="richText"?this._generateStyleName():null,s=getTooltipMarker({color:r,type:t,renderMode:a,markerId:o});return isString(s)?s:(this.richTextStyles[o]=s.style,s.content)},n.prototype.wrapRichTextStyle=function(t,r){var a={};isArray$1(r)?each$f(r,function(s){return extend(a,s)}):extend(a,r);var o=this._generateStyleName();return this.richTextStyles[o]=a,"{"+o+"|"+t+"}"},n}();function defaultSeriesFormatTooltip(n){var t=n.series,r=n.dataIndex,a=n.multipleSeries,o=t.getData(),s=o.mapDimensionsAll("defaultedTooltip"),l=s.length,u=t.getRawValue(r),d=isArray$1(u),v=retrieveVisualColorForTooltipMarker(t,r),g,f,c,y;if(l>1||d&&!l){var _=formatTooltipArrayValue(u,t,r,s,v);g=_.inlineValues,f=_.inlineValueTypes,c=_.blocks,y=_.inlineValues[0]}else if(l){var b=o.getDimensionInfo(s[0]);y=g=retrieveRawValue(o,r,s[0]),f=b.type}else y=g=d?u[0]:u;var S=isNameSpecified(t),x=S&&t.name||"",w=o.getName(r),T=a?x:w;return createTooltipMarkup("section",{header:x,noHeader:a||!S,sortParam:y,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:v,name:T,noName:!trim$1(T),value:g,valueType:f})].concat(c||[])})}function formatTooltipArrayValue(n,t,r,a,o){var s=t.getData(),l=reduce(n,function(f,c,y){var _=s.getDimensionInfo(y);return f=f||_&&_.tooltip!==!1&&_.displayName!=null},!1),u=[],d=[],v=[];a.length?each$f(a,function(f){g(retrieveRawValue(s,r,f),f)}):each$f(n,g);function g(f,c){var y=s.getDimensionInfo(c);!y||y.otherDims.tooltip===!1||(l?v.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:o,name:y.displayName,value:f,valueType:y.type})):(u.push(f),d.push(y.type)))}return{inlineValues:u,inlineValueTypes:d,blocks:v}}var inner$k=makeInner();function getSelectionKey(n,t){return n.getName(t)||n.getId(t)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,a,o){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,o);var s=inner$k(this).sourceManager=new SourceManager(this);s.prepareSource();var l=this.getInitialData(r,o);wrapData(l,this),this.dataTask.context.data=l,inner$k(this).dataBeforeProcessed=l,autoSeriesName(this),this._initSelectedMapFromData(l)},t.prototype.mergeDefaultAndTheme=function(r,a){var o=fetchLayoutMode(this),s=o?getLayoutParams(r):{},l=this.subType;ComponentModel$1.hasClass(l)&&(l+="Series"),merge(r,a.getTheme().get(this.subType)),merge(r,this.getDefaultOption()),defaultEmphasis(r,"label",["show"]),this.fillDataTextStyle(r.data),o&&mergeLayoutParam(r,s,o)},t.prototype.mergeOption=function(r,a){r=merge(this.option,r,!0),this.fillDataTextStyle(r.data);var o=fetchLayoutMode(this);o&&mergeLayoutParam(this.option,r,o);var s=inner$k(this).sourceManager;s.dirty(),s.prepareSource();var l=this.getInitialData(r,a);wrapData(l,this),this.dataTask.dirty(),this.dataTask.context.data=l,inner$k(this).dataBeforeProcessed=l,autoSeriesName(this),this._initSelectedMapFromData(l)},t.prototype.fillDataTextStyle=function(r){if(r&&!isTypedArray(r))for(var a=["show"],o=0;o<r.length;o++)r[o]&&r[o].label&&defaultEmphasis(r[o],"label",a)},t.prototype.getInitialData=function(r,a){},t.prototype.appendData=function(r){var a=this.getRawData();a.appendData(r.data)},t.prototype.getData=function(r){var a=getCurrentTask(this);if(a){var o=a.context.data;return r==null?o:o.getLinkedData(r)}else return inner$k(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var a=getCurrentTask(this);if(a){var o=a.context;o.outputData=r,a!==this.dataTask&&(o.data=r)}inner$k(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return createHashMap(r)},t.prototype.getSourceManager=function(){return inner$k(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,a,o){return defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:a})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(env$1.node&&!(r&&r.ssr))return!1;var a=this.getShallow("animation");return a&&this.getData().count()>this.getShallow("animationThreshold")&&(a=!1),!!a},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,a,o){var s=this.ecModel,l=PaletteMixin.prototype.getColorFromPalette.call(this,r,a,o);return l||(l=s.getColorFromPalette(r,a,o)),l},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,a){this._innerSelect(this.getData(a),r)},t.prototype.unselect=function(r,a){var o=this.option.selectedMap;if(o){var s=this.option.selectedMode,l=this.getData(a);if(s==="series"||o==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var u=0;u<r.length;u++){var d=r[u],v=getSelectionKey(l,d);o[v]=!1,this._selectedDataIndicesMap[v]=-1}}},t.prototype.toggleSelect=function(r,a){for(var o=[],s=0;s<r.length;s++)o[0]=r[s],this.isSelected(r[s],a)?this.unselect(o,a):this.select(o,a)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,a=keys(r),o=[],s=0;s<a.length;s++){var l=r[a[s]];l>=0&&o.push(l)}return o},t.prototype.isSelected=function(r,a){var o=this.option.selectedMap;if(!o)return!1;var s=this.getData(a);return(o==="all"||o[getSelectionKey(s,r)])&&!s.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,a){var o,s,l=this.option,u=l.selectedMode,d=a.length;if(!(!u||!d)){if(u==="series")l.selectedMap="all";else if(u==="multiple"){isObject$3(l.selectedMap)||(l.selectedMap={});for(var v=l.selectedMap,g=0;g<d;g++){var f=a[g],c=getSelectionKey(r,f);v[c]=!0,this._selectedDataIndicesMap[c]=r.getRawIndex(f)}}else if(u==="single"||u===!0){var y=a[d-1],c=getSelectionKey(r,y);l.selectedMap=(o={},o[c]=!0,o),this._selectedDataIndicesMap=(s={},s[c]=r.getRawIndex(y),s)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var a=[];r.hasItemOption&&r.each(function(o){var s=r.getRawDataItem(o);s&&s.selected&&a.push(o)}),a.length>0&&this._innerSelect(r,a)}},t.registerClass=function(r){return ComponentModel$1.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(ComponentModel$1);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel$1);function autoSeriesName(n){var t=n.name;isNameSpecified(n)||(n.name=getSeriesAutoName(n)||t)}function getSeriesAutoName(n){var t=n.getRawData(),r=t.mapDimensionsAll("seriesName"),a=[];return each$f(r,function(o){var s=t.getDimensionInfo(o);s.displayName&&a.push(s.displayName)}),a.join(" ")}function dataTaskCount(n){return n.model.getRawData().count()}function dataTaskReset(n){var t=n.model;return t.setData(t.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(n,t){t.outputData&&n.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function wrapData(n,t){each$f(concatArray(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(r){n.wrapMethod(r,curry$1(onDataChange,t))})}function onDataChange(n,t){var r=getCurrentTask(n);return r&&r.setOutputEnd((t||this).count()),t}function getCurrentTask(n){var t=(n.ecModel||{}).scheduler,r=t&&t.getPipeline(n.uid);if(r){var a=r.currentTask;if(a){var o=a.agentStubMap;o&&(a=o.get(n.uid))}return a}}const SeriesModel$1=SeriesModel;var ComponentView=function(){function n(){this.group=new Group$4,this.uid=getUID("viewComponent")}return n.prototype.init=function(t,r){},n.prototype.render=function(t,r,a,o){},n.prototype.dispose=function(t,r){},n.prototype.updateView=function(t,r,a,o){},n.prototype.updateLayout=function(t,r,a,o){},n.prototype.updateVisual=function(t,r,a,o){},n.prototype.toggleBlurSeries=function(t,r,a){},n.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},n}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);const ComponentView$1=ComponentView;function createRenderPlanner(){var n=makeInner();return function(t){var r=n(t),a=t.pipelineContext,o=!!r.large,s=!!r.progressiveRender,l=r.large=!!(a&&a.large),u=r.progressiveRender=!!(a&&a.progressiveRender);return(o!==l||s!==u)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function n(){this.group=new Group$4,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return n.prototype.init=function(t,r){},n.prototype.render=function(t,r,a,o){},n.prototype.highlight=function(t,r,a,o){var s=t.getData(o&&o.dataType);s&&toggleHighlight(s,o,"emphasis")},n.prototype.downplay=function(t,r,a,o){var s=t.getData(o&&o.dataType);s&&toggleHighlight(s,o,"normal")},n.prototype.remove=function(t,r){this.group.removeAll()},n.prototype.dispose=function(t,r){},n.prototype.updateView=function(t,r,a,o){this.render(t,r,a,o)},n.prototype.updateLayout=function(t,r,a,o){this.render(t,r,a,o)},n.prototype.updateVisual=function(t,r,a,o){this.render(t,r,a,o)},n.prototype.eachRendered=function(t){traverseElements(this.group,t)},n.markUpdateMethod=function(t,r){inner$j(t).updateMethod=r},n.protoInitialize=function(){var t=n.prototype;t.type="chart"}(),n}();function elSetState(n,t,r){n&&isHighDownDispatcher(n)&&(t==="emphasis"?enterEmphasis:leaveEmphasis)(n,r)}function toggleHighlight(n,t,r){var a=queryDataIndex(n,t),o=t&&t.highlightKey!=null?getHighlightDigit(t.highlightKey):null;a!=null?each$f(normalizeToArray(a),function(s){elSetState(n.getItemGraphicEl(s),r,o)}):n.eachItemGraphicEl(function(s){elSetState(s,r,o)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(n){return renderPlanner(n.model)}function renderTaskReset(n){var t=n.model,r=n.ecModel,a=n.api,o=n.payload,s=t.pipelineContext.progressiveRender,l=n.view,u=o&&inner$j(o).updateMethod,d=s?"incrementalPrepareRender":u&&l[u]?u:"render";return d!=="render"&&l[d](t,r,a,o),progressMethodMap[d]}var progressMethodMap={incrementalPrepareRender:{progress:function(n,t){t.view.incrementalRender(n,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(n,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const ChartView$1=ChartView;var ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(n,t,r){var a,o=0,s=0,l=null,u,d,v,g;t=t||0;function f(){s=new Date().getTime(),l=null,n.apply(d,v||[])}var c=function(){for(var y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];a=new Date().getTime(),d=this,v=y;var b=g||t,S=g||r;g=null,u=a-(S?o:s)-b,clearTimeout(l),S?l=setTimeout(f,b):u>=0?f():l=setTimeout(f,-u),o=a};return c.clear=function(){l&&(clearTimeout(l),l=null)},c.debounceNextCall=function(y){g=y},c}function createOrUpdate(n,t,r,a){var o=n[t];if(o){var s=o[ORIGIN_METHOD]||o,l=o[THROTTLE_TYPE],u=o[RATE];if(u!==r||l!==a){if(r==null||!a)return n[t]=s;o=n[t]=throttle(s,r,a==="debounce"),o[ORIGIN_METHOD]=s,o[THROTTLE_TYPE]=a,o[RATE]=r}return o}}function clear$1(n,t){var r=n[t];r&&r[ORIGIN_METHOD]&&(r.clear&&r.clear(),n[t]=r[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(n,t){var r=n.visualStyleMapper||defaultStyleMappers[t];return r||(console.warn("Unknown style type '"+t+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(n,t){var r=n.visualDrawType||defaultColorKey[t];return r||(console.warn("Unknown style type '"+t+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var r=n.getData(),a=n.visualStyleAccessPath||"itemStyle",o=n.getModel(a),s=getStyleMapper(n,a),l=s(o),u=o.getShallow("decal");u&&(r.setVisual("decal",u),u.dirty=!0);var d=getDefaultColorKey(n,a),v=l[d],g=isFunction(v)?v:null,f=l.fill==="auto"||l.stroke==="auto";if(!l[d]||g||f){var c=n.getColorFromPalette(n.name,null,t.getSeriesCount());l[d]||(l[d]=c,r.setVisual("colorFromPalette",!0)),l.fill=l.fill==="auto"||isFunction(l.fill)?c:l.fill,l.stroke=l.stroke==="auto"||isFunction(l.stroke)?c:l.stroke}if(r.setVisual("style",l),r.setVisual("drawType",d),!t.isSeriesFiltered(n)&&g)return r.setVisual("colorFromPalette",!1),{dataEach:function(y,_){var b=n.getDataParams(_),S=extend({},l);S[d]=g(b),y.setItemVisual(_,"style",S)}}}},sharedModel=new Model$1,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(!(n.ignoreStyleOnData||t.isSeriesFiltered(n))){var r=n.getData(),a=n.visualStyleAccessPath||"itemStyle",o=getStyleMapper(n,a),s=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(l,u){var d=l.getRawDataItem(u);if(d&&d[a]){sharedModel.option=d[a];var v=o(sharedModel),g=l.ensureUniqueItemVisual(u,"style");extend(g,v),sharedModel.option.decal&&(l.setItemVisual(u,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),s in v&&l.setItemVisual(u,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(n){var t=createHashMap();n.eachSeries(function(r){var a=r.getColorBy();if(!r.isColorBySeries()){var o=r.type+"-"+a,s=t.get(o);s||(s={},t.set(o,s)),inner$i(r).scope=s}}),n.eachSeries(function(r){if(!(r.isColorBySeries()||n.isSeriesFiltered(r))){var a=r.getRawData(),o={},s=r.getData(),l=inner$i(r).scope,u=r.visualStyleAccessPath||"itemStyle",d=getDefaultColorKey(r,u);s.each(function(v){var g=s.getRawIndex(v);o[g]=v}),a.each(function(v){var g=o[v],f=s.getItemVisual(g,"colorFromPalette");if(f){var c=s.ensureUniqueItemVisual(g,"style"),y=a.getName(v)||v+"",_=a.count();c[d]=r.getColorFromPalette(y,l,_)}})}})}},PI$5=Math.PI;function defaultLoading(n,t){t=t||{},defaults(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Group$4,a=new Rect$3({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(a);var o=new ZRText$1({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),s=new Rect$3({style:{fill:"none"},textContent:o,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(s);var l;return t.showSpinner&&(l=new Arc$1({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),l.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),l.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),r.add(l)),r.resize=function(){var u=o.getBoundingRect().width,d=t.showSpinner?t.spinnerRadius:0,v=(n.getWidth()-d*2-(t.showSpinner&&u?10:0)-u)/2-(t.showSpinner&&u?0:5+u/2)+(t.showSpinner?0:u/2)+(u?0:d),g=n.getHeight()/2;t.showSpinner&&l.setShape({cx:v,cy:g}),s.setShape({x:v-d,y:g-d,width:d*2,height:d*2}),a.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},r.resize(),r}var Scheduler=function(){function n(t,r,a,o){this._stageTaskMap=createHashMap(),this.ecInstance=t,this.api=r,a=this._dataProcessorHandlers=a.slice(),o=this._visualHandlers=o.slice(),this._allHandlers=a.concat(o)}return n.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(a){var o=a.overallTask;o&&o.dirty()})},n.prototype.getPerformArgs=function(t,r){if(t.__pipeline){var a=this._pipelineMap.get(t.__pipeline.id),o=a.context,s=!r&&a.progressiveEnabled&&(!o||o.progressiveRender)&&t.__idxInPipeline>a.blockIndex,l=s?a.step:null,u=o&&o.modDataCount,d=u!=null?Math.ceil(u/l):null;return{step:l,modBy:d,modDataCount:u}}},n.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},n.prototype.updateStreamModes=function(t,r){var a=this._pipelineMap.get(t.uid),o=t.getData(),s=o.count(),l=a.progressiveEnabled&&r.incrementalPrepareRender&&s>=a.threshold,u=t.get("large")&&s>=t.get("largeThreshold"),d=t.get("progressiveChunkMode")==="mod"?s:null;t.pipelineContext=a.context={progressiveRender:l,modDataCount:d,large:u}},n.prototype.restorePipelines=function(t){var r=this,a=r._pipelineMap=createHashMap();t.eachSeries(function(o){var s=o.getProgressive(),l=o.uid;a.set(l,{id:l,head:null,tail:null,threshold:o.getProgressiveThreshold(),progressiveEnabled:s&&!(o.preventIncremental&&o.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),r._pipe(o,o.dataTask)})},n.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),a=this.api;each$f(this._allHandlers,function(o){var s=t.get(o.uid)||t.set(o.uid,{}),l="";assert(!(o.reset&&o.overallReset),l),o.reset&&this._createSeriesStageTask(o,s,r,a),o.overallReset&&this._createOverallStageTask(o,s,r,a)},this)},n.prototype.prepareView=function(t,r,a,o){var s=t.renderTask,l=s.context;l.model=r,l.ecModel=a,l.api=o,s.__block=!t.incrementalPrepareRender,this._pipe(r,s)},n.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},n.prototype.performVisualTasks=function(t,r,a){this._performStageTasks(this._visualHandlers,t,r,a)},n.prototype._performStageTasks=function(t,r,a,o){o=o||{};var s=!1,l=this;each$f(t,function(d,v){if(!(o.visualType&&o.visualType!==d.visualType)){var g=l._stageTaskMap.get(d.uid),f=g.seriesTaskMap,c=g.overallTask;if(c){var y,_=c.agentStubMap;_.each(function(S){u(o,S)&&(S.dirty(),y=!0)}),y&&c.dirty(),l.updatePayload(c,a);var b=l.getPerformArgs(c,o.block);_.each(function(S){S.perform(b)}),c.perform(b)&&(s=!0)}else f&&f.each(function(S,x){u(o,S)&&S.dirty();var w=l.getPerformArgs(S,o.block);w.skip=!d.performRawSeries&&r.isSeriesFiltered(S.context.model),l.updatePayload(S,a),S.perform(w)&&(s=!0)})}});function u(d,v){return d.setDirty&&(!d.dirtyMap||d.dirtyMap.get(v.__pipeline.id))}this.unfinished=s||this.unfinished},n.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(a){r=a.dataTask.perform()||r}),this.unfinished=r||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},n.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},n.prototype._createSeriesStageTask=function(t,r,a,o){var s=this,l=r.seriesTaskMap,u=r.seriesTaskMap=createHashMap(),d=t.seriesType,v=t.getTargetSeries;t.createOnAllSeries?a.eachRawSeries(g):d?a.eachRawSeriesByType(d,g):v&&v(a,o).each(g);function g(f){var c=f.uid,y=u.set(c,l&&l.get(c)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));y.context={model:f,ecModel:a,api:o,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:s},s._pipe(f,y)}},n.prototype._createOverallStageTask=function(t,r,a,o){var s=this,l=r.overallTask=r.overallTask||createTask({reset:overallTaskReset});l.context={ecModel:a,api:o,overallReset:t.overallReset,scheduler:s};var u=l.agentStubMap,d=l.agentStubMap=createHashMap(),v=t.seriesType,g=t.getTargetSeries,f=!0,c=!1,y="";assert(!t.createOnAllSeries,y),v?a.eachRawSeriesByType(v,_):g?g(a,o).each(_):(f=!1,each$f(a.getSeries(),_));function _(b){var S=b.uid,x=d.set(S,u&&u.get(S)||(c=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));x.context={model:b,overallProgress:f},x.agent=l,x.__block=f,s._pipe(b,x)}c&&l.dirty()},n.prototype._pipe=function(t,r){var a=t.uid,o=this._pipelineMap.get(a);!o.head&&(o.head=r),o.tail&&o.tail.pipe(r),o.tail=r,r.__idxInPipeline=o.count++,r.__pipeline=o},n.wrapStageHandler=function(t,r){return isFunction(t)&&(t={overallReset:t,seriesType:detectSeriseType(t)}),t.uid=getUID("stageHandler"),r&&(t.visualType=r),t},n}();function overallTaskReset(n){n.overallReset(n.ecModel,n.api,n.payload)}function stubReset(n){return n.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function seriesTaskReset(n){n.useClearVisual&&n.data.clearAllVisual();var t=n.resetDefines=normalizeToArray(n.reset(n.model,n.ecModel,n.api,n.payload));return t.length>1?map$1(t,function(r,a){return makeSeriesTaskProgress(a)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(n){return function(t,r){var a=r.data,o=r.resetDefines[n];if(o&&o.dataEach)for(var s=t.start;s<t.end;s++)o.dataEach(a,s);else o&&o.progress&&o.progress(t,a)}}function seriesTaskCount(n){return n.data.count()}function detectSeriseType(n){seriesType=null;try{n(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel$1);mockMethods(apiMock,ExtensionAPI$1);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(n){seriesType=n};ecModelMock.eachComponent=function(n){n.mainType==="series"&&n.subType&&(seriesType=n.subType)};function mockMethods(n,t){for(var r in t.prototype)n[r]=noop}const Scheduler$1=Scheduler;var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;const darkTheme=theme;var ECEventProcessor=function(){function n(){}return n.prototype.normalizeQuery=function(t){var r={},a={},o={};if(isString(t)){var s=parseClassType(t);r.mainType=s.main||null,r.subType=s.sub||null}else{var l=["Index","Name","Id"],u={name:1,dataIndex:1,dataType:1};each$f(t,function(d,v){for(var g=!1,f=0;f<l.length;f++){var c=l[f],y=v.lastIndexOf(c);if(y>0&&y===v.length-c.length){var _=v.slice(0,y);_!=="data"&&(r.mainType=_,r[c.toLowerCase()]=d,g=!0)}}u.hasOwnProperty(v)&&(a[v]=d,g=!0),g||(o[v]=d)})}return{cptQuery:r,dataQuery:a,otherQuery:o}},n.prototype.filter=function(t,r){var a=this.eventInfo;if(!a)return!0;var o=a.targetEl,s=a.packedEvent,l=a.model,u=a.view;if(!l||!u)return!0;var d=r.cptQuery,v=r.dataQuery;return g(d,l,"mainType")&&g(d,l,"subType")&&g(d,l,"index","componentIndex")&&g(d,l,"name")&&g(d,l,"id")&&g(v,s,"name")&&g(v,s,"dataIndex")&&g(v,s,"dataType")&&(!u.filterForExposedEvent||u.filterForExposedEvent(t,r.otherQuery,o,s));function g(f,c,y,_){return f[y]==null||c[_||y]===f[y]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var r=n.getData();if(n.legendIcon&&r.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var a={},o={},s=!1,l=0;l<SYMBOL_PROPS_WITH_CB.length;l++){var u=SYMBOL_PROPS_WITH_CB[l],d=n.get(u);isFunction(d)?(s=!0,o[u]=d):a[u]=d}if(a.symbol=a.symbol||n.defaultSymbol,r.setVisual(extend({legendIcon:n.legendIcon||a.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},a)),t.isSeriesFiltered(n))return;var v=keys(o);function g(f,c){for(var y=n.getRawValue(c),_=n.getDataParams(c),b=0;b<v.length;b++){var S=v[b];f.setItemVisual(c,S,o[S](y,_))}}return{dataEach:s?g:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(!n.hasSymbolVisual||t.isSeriesFiltered(n))return;var r=n.getData();function a(o,s){for(var l=o.getItemModel(s),u=0;u<SYMBOL_PROPS.length;u++){var d=SYMBOL_PROPS[u],v=l.getShallow(d,!0);v!=null&&o.setItemVisual(s,d,v)}}return{dataEach:r.hasItemOption?a:null}}};function getItemVisualFromData(n,t,r){switch(r){case"color":var a=n.getItemVisual(t,"style");return a[n.getVisual("drawType")];case"opacity":return n.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(t,r)}}function getVisualFromData(n,t){switch(t){case"color":var r=n.getVisual("style");return r[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(t)}}function setItemVisualFromData(n,t,r,a){switch(r){case"color":var o=n.ensureUniqueItemVisual(t,"style");o[n.getVisual("drawType")]=a,n.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(t,"style").opacity=a;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(t,r,a);break}}function createLegacyDataSelectAction(n,t){function r(a,o){var s=[];return a.eachComponent({mainType:"series",subType:n,query:o},function(l){s.push(l.seriesIndex)}),s}each$f([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(a){t(a[0],function(o,s,l){o=extend({},o),l.dispatchAction(extend(o,{type:a[1],seriesIndex:r(s,o)}))})})}function handleSeriesLegacySelectEvents(n,t,r,a,o){var s=n+t;r.isSilent(s)||a.eachComponent({mainType:"series",subType:"pie"},function(l){for(var u=l.seriesIndex,d=l.option.selectedMap,v=o.selected,g=0;g<v.length;g++)if(v[g].seriesIndex===u){var f=l.getData(),c=queryDataIndex(f,o.fromActionPayload);r.trigger(s,{type:s,seriesId:l.id,name:isArray$1(c)?f.getName(c[0]):f.getName(c),selected:isString(d)?d:extend({},d)})}})}function handleLegacySelectEvents(n,t,r){n.on("selectchanged",function(a){var o=r.getModel();a.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",t,o,a),handleSeriesLegacySelectEvents("pie","selectchanged",t,o,a)):a.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",t,o,a),handleSeriesLegacySelectEvents("pie","selected",t,o,a)):a.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",t,o,a),handleSeriesLegacySelectEvents("pie","unselected",t,o,a))})}function findEventDispatcher(n,t,r){for(var a;n&&!(t(n)&&(a=n,r));)n=n.__hostTarget||n.parent;return a}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function n(){this._id="__ec_inner_"+wmUniqueIndex++}return n.prototype.get=function(t){return this._guard(t)[this._id]},n.prototype.set=function(t,r){var a=this._guard(t);return supportDefineProperty?Object.defineProperty(a,this._id,{value:r,enumerable:!1,configurable:!0}):a[this._id]=r,this},n.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},n.prototype.has=function(t){return!!this._guard(t)[this._id]},n.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},n}();const WeakMap$2=WeakMap$1;var Triangle=Path$1.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var r=t.cx,a=t.cy,o=t.width/2,s=t.height/2;n.moveTo(r,a-s),n.lineTo(r+o,a+s),n.lineTo(r-o,a+s),n.closePath()}}),Diamond=Path$1.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var r=t.cx,a=t.cy,o=t.width/2,s=t.height/2;n.moveTo(r,a-s),n.lineTo(r+o,a),n.lineTo(r,a+s),n.lineTo(r-o,a),n.closePath()}}),Pin=Path$1.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var r=t.x,a=t.y,o=t.width/5*3,s=Math.max(o,t.height),l=o/2,u=l*l/(s-l),d=a-s+l+u,v=Math.asin(u/l),g=Math.cos(v)*l,f=Math.sin(v),c=Math.cos(v),y=l*.6,_=l*.7;n.moveTo(r-g,d+u),n.arc(r,d,l,Math.PI-v,Math.PI*2+v),n.bezierCurveTo(r+g-f*y,d+u+c*y,r,a-_,r,a),n.bezierCurveTo(r,a-_,r-g+f*y,d+u+c*y,r-g,d+u),n.closePath()}}),Arrow=Path$1.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var r=t.height,a=t.width,o=t.x,s=t.y,l=a/3*2;n.moveTo(o,s),n.lineTo(o+l,s+r),n.lineTo(o,s+r/4*3),n.lineTo(o-l,s+r),n.lineTo(o,s),n.closePath()}}),symbolCtors={line:Line$3,rect:Rect$3,roundRect:Rect$3,square:Rect$3,circle:Circle$1,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(n,t,r,a,o){o.x1=n,o.y1=t+a/2,o.x2=n+r,o.y2=t+a/2},rect:function(n,t,r,a,o){o.x=n,o.y=t,o.width=r,o.height=a},roundRect:function(n,t,r,a,o){o.x=n,o.y=t,o.width=r,o.height=a,o.r=Math.min(r,a)/4},square:function(n,t,r,a,o){var s=Math.min(r,a);o.x=n,o.y=t,o.width=s,o.height=s},circle:function(n,t,r,a,o){o.cx=n+r/2,o.cy=t+a/2,o.r=Math.min(r,a)/2},diamond:function(n,t,r,a,o){o.cx=n+r/2,o.cy=t+a/2,o.width=r,o.height=a},pin:function(n,t,r,a,o){o.x=n+r/2,o.y=t+a/2,o.width=r,o.height=a},arrow:function(n,t,r,a,o){o.x=n+r/2,o.y=t+a/2,o.width=r,o.height=a},triangle:function(n,t,r,a,o){o.cx=n+r/2,o.cy=t+a/2,o.width=r,o.height=a}},symbolBuildProxies={};each$f(symbolCtors,function(n,t){symbolBuildProxies[t]=new n});var SymbolClz$1=Path$1.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,t,r){var a=calculateTextPosition(n,t,r),o=this.shape;return o&&o.symbolType==="pin"&&t.position==="inside"&&(a.y=r.y+r.height*.4),a},buildPath:function(n,t,r){var a=t.symbolType;if(a!=="none"){var o=symbolBuildProxies[a];o||(a="rect",o=symbolBuildProxies[a]),symbolShapeMakers[a](t.x,t.y,t.width,t.height,o.shape),o.buildPath(n,o.shape,r)}}});function symbolPathSetColor(n,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=n,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=n:r.fill=n,this.markRedraw()}}function createSymbol$1(n,t,r,a,o,s,l){var u=n.indexOf("empty")===0;u&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var d;return n.indexOf("image://")===0?d=makeImage(n.slice(8),new BoundingRect$1(t,r,a,o),l?"center":"cover"):n.indexOf("path://")===0?d=makePath(n.slice(7),{},new BoundingRect$1(t,r,a,o),l?"center":"cover"):d=new SymbolClz$1({shape:{symbolType:n,x:t,y:r,width:a,height:o}}),d.__isEmptyBrush=u,d.setColor=symbolPathSetColor,s&&d.setColor(s),d}function normalizeSymbolSize(n){return isArray$1(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function normalizeSymbolOffset(n,t){if(n!=null)return isArray$1(n)||(n=[n,n]),[parsePercent(n[0],t[0])||0,parsePercent(retrieve2(n[1],n[0]),t[1])||0]}function isSafeNum(n){return isFinite(n)}function createLinearGradient(n,t,r){var a=t.x==null?0:t.x,o=t.x2==null?1:t.x2,s=t.y==null?0:t.y,l=t.y2==null?0:t.y2;t.global||(a=a*r.width+r.x,o=o*r.width+r.x,s=s*r.height+r.y,l=l*r.height+r.y),a=isSafeNum(a)?a:0,o=isSafeNum(o)?o:1,s=isSafeNum(s)?s:0,l=isSafeNum(l)?l:0;var u=n.createLinearGradient(a,s,o,l);return u}function createRadialGradient(n,t,r){var a=r.width,o=r.height,s=Math.min(a,o),l=t.x==null?.5:t.x,u=t.y==null?.5:t.y,d=t.r==null?.5:t.r;t.global||(l=l*a+r.x,u=u*o+r.y,d=d*s),l=isSafeNum(l)?l:.5,u=isSafeNum(u)?u:.5,d=d>=0&&isSafeNum(d)?d:.5;var v=n.createRadialGradient(l,u,0,l,u,d);return v}function getCanvasGradient(n,t,r){for(var a=t.type==="radial"?createRadialGradient(n,t,r):createLinearGradient(n,t,r),o=t.colorStops,s=0;s<o.length;s++)a.addColorStop(o[s].offset,o[s].color);return a}function isClipPathChanged(n,t){if(n===t||!n&&!t)return!1;if(!n||!t||n.length!==t.length)return!0;for(var r=0;r<n.length;r++)if(n[r]!==t[r])return!0;return!1}function parseInt10(n){return parseInt(n,10)}function getSize$1(n,t,r){var a=["width","height"][t],o=["clientWidth","clientHeight"][t],s=["paddingLeft","paddingTop"][t],l=["paddingRight","paddingBottom"][t];if(r[a]!=null&&r[a]!=="auto")return parseFloat(r[a]);var u=document.defaultView.getComputedStyle(n);return(n[o]||parseInt10(u[a])||parseInt10(n.style[a]))-(parseInt10(u[s])||0)-(parseInt10(u[l])||0)|0}function normalizeLineDash(n,t){return!n||n==="solid"||!(t>0)?null:n==="dashed"?[4*t,2*t]:n==="dotted"?[t]:isNumber(n)?[n]:isArray$1(n)?n:null}function getLineDash(n){var t=n.style,r=t.lineDash&&t.lineWidth>0&&normalizeLineDash(t.lineDash,t.lineWidth),a=t.lineDashOffset;if(r){var o=t.strokeNoScale&&n.getLineScale?n.getLineScale():1;o&&o!==1&&(r=map$1(r,function(s){return s/o}),a/=o)}return[r,a]}var pathProxyForDraw=new PathProxy$1(!0);function styleHasStroke(n){var t=n.stroke;return!(t==null||t==="none"||!(n.lineWidth>0))}function isValidStrokeFillStyle(n){return typeof n=="string"&&n!=="none"}function styleHasFill(n){var t=n.fill;return t!=null&&t!=="none"}function doFillPath(n,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=n.globalAlpha;n.globalAlpha=t.fillOpacity*t.opacity,n.fill(),n.globalAlpha=r}else n.fill()}function doStrokePath(n,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=n.globalAlpha;n.globalAlpha=t.strokeOpacity*t.opacity,n.stroke(),n.globalAlpha=r}else n.stroke()}function createCanvasPattern(n,t,r){var a=createOrUpdateImage(t.image,t.__image,r);if(isImageReady(a)){var o=n.createPattern(a,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&o&&o.setTransform){var s=new DOMMatrix;s.translateSelf(t.x||0,t.y||0),s.rotateSelf(0,0,(t.rotation||0)*RADIAN_TO_DEGREE),s.scaleSelf(t.scaleX||1,t.scaleY||1),o.setTransform(s)}return o}}function brushPath(n,t,r,a){var o,s=styleHasStroke(r),l=styleHasFill(r),u=r.strokePercent,d=u<1,v=!t.path;(!t.silent||d)&&v&&t.createPathProxy();var g=t.path||pathProxyForDraw,f=t.__dirty;if(!a){var c=r.fill,y=r.stroke,_=l&&!!c.colorStops,b=s&&!!y.colorStops,S=l&&!!c.image,x=s&&!!y.image,w=void 0,T=void 0,A=void 0,E=void 0,$=void 0;(_||b)&&($=t.getBoundingRect()),_&&(w=f?getCanvasGradient(n,c,$):t.__canvasFillGradient,t.__canvasFillGradient=w),b&&(T=f?getCanvasGradient(n,y,$):t.__canvasStrokeGradient,t.__canvasStrokeGradient=T),S&&(A=f||!t.__canvasFillPattern?createCanvasPattern(n,c,t):t.__canvasFillPattern,t.__canvasFillPattern=A),x&&(E=f||!t.__canvasStrokePattern?createCanvasPattern(n,y,t):t.__canvasStrokePattern,t.__canvasStrokePattern=A),_?n.fillStyle=w:S&&(A?n.fillStyle=A:l=!1),b?n.strokeStyle=T:x&&(E?n.strokeStyle=E:s=!1)}var P=t.getGlobalScale();g.setScale(P[0],P[1],t.segmentIgnoreThreshold);var I,C;n.setLineDash&&r.lineDash&&(o=getLineDash(t),I=o[0],C=o[1]);var M=!0;(v||f&SHAPE_CHANGED_BIT)&&(g.setDPR(n.dpr),d?g.setContext(null):(g.setContext(n),M=!1),g.reset(),t.buildPath(g,t.shape,a),g.toStatic(),t.pathUpdated()),M&&g.rebuildPath(n,d?u:1),I&&(n.setLineDash(I),n.lineDashOffset=C),a||(r.strokeFirst?(s&&doStrokePath(n,r),l&&doFillPath(n,r)):(l&&doFillPath(n,r),s&&doStrokePath(n,r))),I&&n.setLineDash([])}function brushImage(n,t,r){var a=t.__image=createOrUpdateImage(r.image,t.__image,t,t.onload);if(!(!a||!isImageReady(a))){var o=r.x||0,s=r.y||0,l=t.getWidth(),u=t.getHeight(),d=a.width/a.height;if(l==null&&u!=null?l=u*d:u==null&&l!=null?u=l/d:l==null&&u==null&&(l=a.width,u=a.height),r.sWidth&&r.sHeight){var v=r.sx||0,g=r.sy||0;n.drawImage(a,v,g,r.sWidth,r.sHeight,o,s,l,u)}else if(r.sx&&r.sy){var v=r.sx,g=r.sy,f=l-v,c=u-g;n.drawImage(a,v,g,f,c,o,s,l,u)}else n.drawImage(a,o,s,l,u)}}function brushText(n,t,r){var a,o=r.text;if(o!=null&&(o+=""),o){n.font=r.font||DEFAULT_FONT,n.textAlign=r.textAlign,n.textBaseline=r.textBaseline;var s=void 0,l=void 0;n.setLineDash&&r.lineDash&&(a=getLineDash(t),s=a[0],l=a[1]),s&&(n.setLineDash(s),n.lineDashOffset=l),r.strokeFirst?(styleHasStroke(r)&&n.strokeText(o,r.x,r.y),styleHasFill(r)&&n.fillText(o,r.x,r.y)):(styleHasFill(r)&&n.fillText(o,r.x,r.y),styleHasStroke(r)&&n.strokeText(o,r.x,r.y)),s&&n.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(n,t,r,a,o){var s=!1;if(!a&&(r=r||{},t===r))return!1;if(a||t.opacity!==r.opacity){flushPathDrawn(n,o),s=!0;var l=Math.max(Math.min(t.opacity,1),0);n.globalAlpha=isNaN(l)?DEFAULT_COMMON_STYLE.opacity:l}(a||t.blend!==r.blend)&&(s||(flushPathDrawn(n,o),s=!0),n.globalCompositeOperation=t.blend||DEFAULT_COMMON_STYLE.blend);for(var u=0;u<SHADOW_NUMBER_PROPS.length;u++){var d=SHADOW_NUMBER_PROPS[u];(a||t[d]!==r[d])&&(s||(flushPathDrawn(n,o),s=!0),n[d]=n.dpr*(t[d]||0))}return(a||t.shadowColor!==r.shadowColor)&&(s||(flushPathDrawn(n,o),s=!0),n.shadowColor=t.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),s}function bindPathAndTextCommonStyle(n,t,r,a,o){var s=getStyle(t,o.inHover),l=a?null:r&&getStyle(r,o.inHover)||{};if(s===l)return!1;var u=bindCommonProps(n,s,l,a,o);if((a||s.fill!==l.fill)&&(u||(flushPathDrawn(n,o),u=!0),isValidStrokeFillStyle(s.fill)&&(n.fillStyle=s.fill)),(a||s.stroke!==l.stroke)&&(u||(flushPathDrawn(n,o),u=!0),isValidStrokeFillStyle(s.stroke)&&(n.strokeStyle=s.stroke)),(a||s.opacity!==l.opacity)&&(u||(flushPathDrawn(n,o),u=!0),n.globalAlpha=s.opacity==null?1:s.opacity),t.hasStroke()){var d=s.lineWidth,v=d/(s.strokeNoScale&&t.getLineScale?t.getLineScale():1);n.lineWidth!==v&&(u||(flushPathDrawn(n,o),u=!0),n.lineWidth=v)}for(var g=0;g<STROKE_PROPS.length;g++){var f=STROKE_PROPS[g],c=f[0];(a||s[c]!==l[c])&&(u||(flushPathDrawn(n,o),u=!0),n[c]=s[c]||f[1])}return u}function bindImageStyle(n,t,r,a,o){return bindCommonProps(n,getStyle(t,o.inHover),r&&getStyle(r,o.inHover),a,o)}function setContextTransform(n,t){var r=t.transform,a=n.dpr||1;r?n.setTransform(a*r[0],a*r[1],a*r[2],a*r[3],a*r[4],a*r[5]):n.setTransform(a,0,0,a,0,0)}function updateClipStatus(n,t,r){for(var a=!1,o=0;o<n.length;o++){var s=n[o];a=a||s.isZeroArea(),setContextTransform(t,s),t.beginPath(),s.buildPath(t,s.shape),t.clip()}r.allClipped=a}function isTransformChanged(n,t){return n&&t?n[0]!==t[0]||n[1]!==t[1]||n[2]!==t[2]||n[3]!==t[3]||n[4]!==t[4]||n[5]!==t[5]:!(!n&&!t)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(n){var t=styleHasFill(n),r=styleHasStroke(n);return!(n.lineDash||!(+t^+r)||t&&typeof n.fill!="string"||r&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function flushPathDrawn(n,t){t.batchFill&&n.fill(),t.batchStroke&&n.stroke(),t.batchFill="",t.batchStroke=""}function getStyle(n,t){return t&&n.__hoverStyle||n.style}function brushSingle(n,t){brush$1(n,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(n,t,r,a){var o=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~REDRAW_BIT,t.__isRendered=!1;return}var s=t.__clipPaths,l=r.prevElClipPaths,u=!1,d=!1;if((!l||isClipPathChanged(s,l))&&(l&&l.length&&(flushPathDrawn(n,r),n.restore(),d=u=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),s&&s.length&&(flushPathDrawn(n,r),n.save(),updateClipStatus(s,n,r),u=!0),r.prevElClipPaths=s),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var v=r.prevEl;v||(d=u=!0);var g=t instanceof Path$1&&t.autoBatch&&canPathBatch(t.style);u||isTransformChanged(o,v.transform)?(flushPathDrawn(n,r),setContextTransform(n,t)):g||flushPathDrawn(n,r);var f=getStyle(t,r.inHover);t instanceof Path$1?(r.lastDrawType!==DRAW_TYPE_PATH&&(d=!0,r.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(n,t,v,d,r),(!g||!r.batchFill&&!r.batchStroke)&&n.beginPath(),brushPath(n,t,f,g),g&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof TSpan$1?(r.lastDrawType!==DRAW_TYPE_TEXT&&(d=!0,r.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(n,t,v,d,r),brushText(n,t,f)):t instanceof ZRImage$1?(r.lastDrawType!==DRAW_TYPE_IMAGE&&(d=!0,r.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(n,t,v,d,r),brushImage(n,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(d=!0,r.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(n,t,r)),g&&a&&flushPathDrawn(n,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function brushIncremental(n,t,r){var a=t.getDisplayables(),o=t.getTemporalDisplayables();n.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},l,u;for(l=t.getCursor(),u=a.length;l<u;l++){var d=a[l];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(n,d,s,l===u-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),s.prevEl=d}for(var v=0,g=o.length;v<g;v++){var d=o[v];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(n,d,s,v===g-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),s.prevEl=d}t.clearTemporalDisplayables(),t.notClear=!0,n.restore()}var decalMap=new WeakMap$2,decalCache=new LRU$1(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(n,t){if(n==="none")return null;var r=t.getDevicePixelRatio(),a=t.getZr(),o=a.painter.type==="svg";n.dirty&&decalMap.delete(n);var s=decalMap.get(n);if(s)return s;var l=defaults(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});l.backgroundColor==="none"&&(l.backgroundColor=null);var u={repeat:"repeat"};return d(u),u.rotation=l.rotation,u.scaleX=u.scaleY=o?1:1/r,decalMap.set(n,u),n.dirty=!1,u;function d(v){for(var g=[r],f=!0,c=0;c<decalKeys.length;++c){var y=l[decalKeys[c]];if(y!=null&&!isArray$1(y)&&!isString(y)&&!isNumber(y)&&typeof y!="boolean"){f=!1;break}g.push(y)}var _;if(f){_=g.join(",")+(o?"-svg":"");var b=decalCache.get(_);b&&(o?v.svgElement=b:v.image=b)}var S=normalizeDashArrayX(l.dashArrayX),x=normalizeDashArrayY(l.dashArrayY),w=normalizeSymbolArray(l.symbol),T=getLineBlockLengthX(S),A=getLineBlockLengthY(x),E=!o&&platformApi.createCanvas(),$=o&&{tag:"g",attrs:{},key:"dcl",children:[]},P=C(),I;E&&(E.width=P.width*r,E.height=P.height*r,I=E.getContext("2d")),M(),f&&decalCache.put(_,E||$),v.image=E,v.svgElement=$,v.svgWidth=P.width,v.svgHeight=P.height;function C(){for(var D=1,R=0,N=T.length;R<N;++R)D=getLeastCommonMultiple(D,T[R]);for(var O=1,R=0,N=w.length;R<N;++R)O=getLeastCommonMultiple(O,w[R].length);D*=O;var F=A*T.length*w.length;return{width:Math.max(1,Math.min(D,l.maxTileWidth)),height:Math.max(1,Math.min(F,l.maxTileHeight))}}function M(){I&&(I.clearRect(0,0,E.width,E.height),l.backgroundColor&&(I.fillStyle=l.backgroundColor,I.fillRect(0,0,E.width,E.height)));for(var D=0,R=0;R<x.length;++R)D+=x[R];if(D<=0)return;for(var N=-A,O=0,F=0,L=0;N<P.height;){if(O%2===0){for(var B=F/2%w.length,V=0,H=0,X=0;V<P.width*2;){for(var U=0,R=0;R<S[L].length;++R)U+=S[L][R];if(U<=0)break;if(H%2===0){var te=(1-l.symbolSize)*.5,ee=V+S[L][H]*te,q=N+x[O]*te,ie=S[L][H]*l.symbolSize,pe=x[O]*l.symbolSize,j=X/2%w[B].length;Q(ee,q,ie,pe,w[B][j])}V+=S[L][H],++X,++H,H===S[L].length&&(H=0)}++L,L===S.length&&(L=0)}N+=x[O],++F,++O,O===x.length&&(O=0)}function Q(J,oe,ne,z,W){var Z=o?1:r,ae=createSymbol$1(W,J*Z,oe*Z,ne*Z,z*Z,l.color,l.symbolKeepAspect);if(o){var se=a.painter.renderOneToVNode(ae);se&&$.children.push(se)}else brushSingle(I,ae)}}}}function normalizeSymbolArray(n){if(!n||n.length===0)return[["rect"]];if(isString(n))return[[n]];for(var t=!0,r=0;r<n.length;++r)if(!isString(n[r])){t=!1;break}if(t)return normalizeSymbolArray([n]);for(var a=[],r=0;r<n.length;++r)isString(n[r])?a.push([n[r]]):a.push(n[r]);return a}function normalizeDashArrayX(n){if(!n||n.length===0)return[[0,0]];if(isNumber(n)){var t=Math.ceil(n);return[[t,t]]}for(var r=!0,a=0;a<n.length;++a)if(!isNumber(n[a])){r=!1;break}if(r)return normalizeDashArrayX([n]);for(var o=[],a=0;a<n.length;++a)if(isNumber(n[a])){var t=Math.ceil(n[a]);o.push([t,t])}else{var t=map$1(n[a],function(u){return Math.ceil(u)});t.length%2===1?o.push(t.concat(t)):o.push(t)}return o}function normalizeDashArrayY(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(isNumber(n)){var t=Math.ceil(n);return[t,t]}var r=map$1(n,function(a){return Math.ceil(a)});return n.length%2?r.concat(r):r}function getLineBlockLengthX(n){return map$1(n,function(t){return getLineBlockLengthY(t)})}function getLineBlockLengthY(n){for(var t=0,r=0;r<n.length;++r)t+=n[r];return n.length%2===1?t*2:t}function decalVisual(n,t){n.eachRawSeries(function(r){if(!n.isSeriesFiltered(r)){var a=r.getData();a.hasItemVisual()&&a.each(function(l){var u=a.getItemVisual(l,"decal");if(u){var d=a.ensureUniqueItemVisual(l,"style");d.decal=createOrUpdatePatternFromDecal(u,t)}});var o=a.getVisual("decal");if(o){var s=a.getVisual("style");s.decal=createOrUpdatePatternFromDecal(o,t)}}})}var lifecycle=new Eventful$1;const lifecycle$1=lifecycle;var implsStore={};function registerImpl(n,t){implsStore[n]=t}function getImpl(n){return implsStore[n]}var TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(n){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,n,t)}}function createRegisterEventWithLowercaseMessageCenter(n){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return toLowercaseNameAndCallEventful(this,n,t)}}function toLowercaseNameAndCallEventful(n,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Eventful$1.prototype[t].apply(n,r)}var MessageCenter=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(Eventful$1),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(n){__extends$1(t,n);function t(r,a,o){var s=n.call(this,new ECEventProcessor)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],o=o||{},isString(a)&&(a=themeStorage[a]),s._dom=r;var l="canvas",u="auto",d=!1,v=s._zr=init$2(r,{renderer:o.renderer||l,devicePixelRatio:o.devicePixelRatio,width:o.width,height:o.height,ssr:o.ssr,useDirtyRect:retrieve2(o.useDirtyRect,d),useCoarsePointer:retrieve2(o.useCoarsePointer,u),pointerSize:o.pointerSize});s._ssr=o.ssr,s._throttledZrFlush=throttle(bind$1(v.flush,v),17),a=clone$4(a),a&&globalBackwardCompat(a,!0),s._theme=a,s._locale=createLocaleObject(o.locale||SYSTEM_LANG),s._coordSysMgr=new CoordinateSystem;var g=s._api=createExtensionAPI(s);function f(c,y){return c.__prio-y.__prio}return sort$2(visualFuncs,f),sort$2(dataProcessorFuncs,f),s._scheduler=new Scheduler$1(s,g,dataProcessorFuncs,visualFuncs),s._messageCenter=new MessageCenter,s._initEvents(),s.resize=bind$1(s.resize,s),v.animation.on("frame",s._onframe,s),bindRenderedEvent(v,s),bindMouseEvent(v,s),setAsPrimitive(s),s}return t.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var r=this._scheduler;if(this[PENDING_UPDATE]){var a=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(d){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,d}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,a),triggerUpdatedEvent.call(this,a)}else if(r.unfinished){var o=TEST_FRAME_REMAIN_TIME,s=this._model,l=this._api;r.unfinished=!1;do{var u=+new Date;r.performSeriesTasks(s),r.performDataProcessorTasks(s),updateStreamModes(this,s),r.performVisualTasks(s),renderSeries(this,this._model,l,"remain",{}),o-=+new Date-u}while(o>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,a,o){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var s,l,u;if(isObject$3(a)&&(o=a.lazyUpdate,s=a.silent,l=a.replaceMerge,u=a.transition,a=a.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||a){var d=new OptionManager$1(this._api),v=this._theme,g=this._model=new GlobalModel$1;g.scheduler=this._scheduler,g.ssr=this._ssr,g.init(null,null,null,v,this._locale,d)}this._model.setOption(r,{replaceMerge:l},optionPreprocessorFuncs);var f={seriesTransition:u,optionChanged:!0};if(o)this[PENDING_UPDATE]={silent:s,updateParams:f},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,f)}catch(c){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,c}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env$1.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var a=this._zr.painter;return a.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var a=this._zr.painter;return a.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(env$1.svgSupported){var r=this._zr,a=r.storage.getDisplayList();return each$f(a,function(o){o.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var a=r.excludeComponents,o=this._model,s=[],l=this;each$f(a,function(d){o.eachComponent({mainType:d},function(v){var g=l._componentsMap[v.__viewId];g.group.ignore||(s.push(g),g.group.ignore=!0)})});var u=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return each$f(s,function(d){d.group.ignore=!1}),u},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var a=r.type==="svg",o=this.group,s=Math.min,l=Math.max,u=1/0;if(connectedGroups[o]){var d=u,v=u,g=-u,f=-u,c=[],y=r&&r.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(T,A){if(T.group===o){var E=a?T.getZr().painter.getSvgDom().innerHTML:T.renderToCanvas(clone$4(r)),$=T.getDom().getBoundingClientRect();d=s($.left,d),v=s($.top,v),g=l($.right,g),f=l($.bottom,f),c.push({dom:E,left:$.left,top:$.top})}}),d*=y,v*=y,g*=y,f*=y;var _=g-d,b=f-v,S=platformApi.createCanvas(),x=init$2(S,{renderer:a?"svg":"canvas"});if(x.resize({width:_,height:b}),a){var w="";return each$f(c,function(T){var A=T.left-d,E=T.top-v;w+='<g transform="translate('+A+","+E+')">'+T.dom+"</g>"}),x.painter.getSvgRoot().innerHTML=w,r.connectedBackgroundColor&&x.painter.setBackgroundColor(r.connectedBackgroundColor),x.refreshImmediately(),x.painter.toDataURL()}else return r.connectedBackgroundColor&&x.add(new Rect$3({shape:{x:0,y:0,width:_,height:b},style:{fill:r.connectedBackgroundColor}})),each$f(c,function(T){var A=new ZRImage$1({style:{x:T.left*y-d,y:T.top*y-v,image:T.dom}});x.add(A)}),x.refreshImmediately(),S.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,a){return doConvertPixel(this,"convertToPixel",r,a)},t.prototype.convertFromPixel=function(r,a){return doConvertPixel(this,"convertFromPixel",r,a)},t.prototype.containPixel=function(r,a){if(this._disposed){this.id;return}var o=this._model,s,l=parseFinder$1(o,r);return each$f(l,function(u,d){d.indexOf("Models")>=0&&each$f(u,function(v){var g=v.coordinateSystem;if(g&&g.containPoint)s=s||!!g.containPoint(a);else if(d==="seriesModels"){var f=this._chartsMap[v.__viewId];f&&f.containPoint&&(s=s||f.containPoint(a,v))}},this)},this),!!s},t.prototype.getVisual=function(r,a){var o=this._model,s=parseFinder$1(o,r,{defaultMainType:"series"}),l=s.seriesModel,u=l.getData(),d=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?u.indexOfRawIndex(s.dataIndex):null;return d!=null?getItemVisualFromData(u,d,a):getVisualFromData(u,a)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;each$f(MOUSE_EVENT_NAMES,function(a){var o=function(s){var l=r.getModel(),u=s.target,d,v=a==="globalout";if(v?d={}:u&&findEventDispatcher(u,function(_){var b=getECData(_);if(b&&b.dataIndex!=null){var S=b.dataModel||l.getSeriesByIndex(b.seriesIndex);return d=S&&S.getDataParams(b.dataIndex,b.dataType)||{},!0}else if(b.eventData)return d=extend({},b.eventData),!0},!0),d){var g=d.componentType,f=d.componentIndex;(g==="markLine"||g==="markPoint"||g==="markArea")&&(g="series",f=d.seriesIndex);var c=g&&f!=null&&l.getComponent(g,f),y=c&&r[c.mainType==="series"?"_chartsMap":"_componentsMap"][c.__viewId];d.event=s,d.type=a,r._$eventProcessor.eventInfo={targetEl:u,packedEvent:d,model:c,view:y},r.trigger(a,d)}};o.zrEventfulCallAtLast=!0,r._zr.on(a,o,r)}),each$f(eventActionMap,function(a,o){r._messageCenter.on(o,function(s){this.trigger(o,s)},r)}),each$f(["selectchanged"],function(a){r._messageCenter.on(a,function(o){this.trigger(a,o)},r)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var a=this,o=a._api,s=a._model;each$f(a._componentsViews,function(l){l.dispose(s,o)}),each$f(a._chartsViews,function(l){l.dispose(s,o)}),a._zr.dispose(),a._dom=a._model=a._chartsMap=a._componentsMap=a._chartsViews=a._componentsViews=a._scheduler=a._api=a._zr=a._throttledZrFlush=a._theme=a._coordSysMgr=a._messageCenter=null,delete instances[a.id]},t.prototype.resize=function(r){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(r);var a=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!a){var o=a.resetOption("media"),s=r&&r.silent;this[PENDING_UPDATE]&&(s==null&&(s=this[PENDING_UPDATE].silent),o=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{o&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},r&&r.animation)})}catch(l){throw this[IN_MAIN_PROCESS_KEY]=!1,l}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}}},t.prototype.showLoading=function(r,a){if(this._disposed){this.id;return}if(isObject$3(r)&&(a=r,r=""),r=r||"default",this.hideLoading(),!!loadingEffects[r]){var o=loadingEffects[r](this._api,a),s=this._zr;this._loadingFX=o,s.add(o)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var a=extend({},r);return a.type=eventActionMap[r.type],a},t.prototype.dispatchAction=function(r,a){if(this._disposed){this.id;return}if(isObject$3(a)||(a={silent:!!a}),!!actions[r.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(r);return}var o=a.silent;doDispatchAction.call(this,r,o);var s=a.flush;s?this._zr.flush():s!==!1&&env$1.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}},t.prototype.updateLabelLayout=function(){lifecycle$1.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var a=r.seriesIndex,o=this.getModel(),s=o.getSeriesByIndex(a);s.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){prepare=function(f){var c=f._scheduler;c.restorePipelines(f._model),c.prepareStageTasks(),prepareView(f,!0),prepareView(f,!1),c.plan()},prepareView=function(f,c){for(var y=f._model,_=f._scheduler,b=c?f._componentsViews:f._chartsViews,S=c?f._componentsMap:f._chartsMap,x=f._zr,w=f._api,T=0;T<b.length;T++)b[T].__alive=!1;c?y.eachComponent(function($,P){$!=="series"&&A(P)}):y.eachSeries(A);function A($){var P=$.__requireNewView;$.__requireNewView=!1;var I="_ec_"+$.id+"_"+$.type,C=!P&&S[I];if(!C){var M=parseClassType($.type),D=c?ComponentView$1.getClass(M.main,M.sub):ChartView$1.getClass(M.sub);C=new D,C.init(y,w),S[I]=C,b.push(C),x.add(C.group)}$.__viewId=C.__id=I,C.__alive=!0,C.__model=$,C.group.__ecComponentInfo={mainType:$.mainType,index:$.componentIndex},!c&&_.prepareView(C,$,y,w)}for(var T=0;T<b.length;){var E=b[T];E.__alive?T++:(!c&&E.renderTask.dispose(),x.remove(E.group),E.dispose(y,w),b.splice(T,1),S[E.__id]===E&&delete S[E.__id],E.__id=E.group.__ecComponentInfo=null)}},updateDirectly=function(f,c,y,_,b){var S=f._model;if(S.setUpdatePayload(y),!_){each$f([].concat(f._componentsViews).concat(f._chartsViews),E);return}var x={};x[_+"Id"]=y[_+"Id"],x[_+"Index"]=y[_+"Index"],x[_+"Name"]=y[_+"Name"];var w={mainType:_,query:x};b&&(w.subType=b);var T=y.excludeSeriesId,A;T!=null&&(A=createHashMap(),each$f(normalizeToArray(T),function($){var P=convertOptionIdName($,null);P!=null&&A.set(P,!0)})),S&&S.eachComponent(w,function($){var P=A&&A.get($.id)!=null;if(!P)if(isHighDownPayload(y))if($ instanceof SeriesModel$1)y.type===HIGHLIGHT_ACTION_TYPE&&!y.notBlur&&!$.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload($,y,f._api);else{var I=findComponentHighDownDispatchers($.mainType,$.componentIndex,y.name,f._api),C=I.focusSelf,M=I.dispatchers;y.type===HIGHLIGHT_ACTION_TYPE&&C&&!y.notBlur&&blurComponent($.mainType,$.componentIndex,f._api),M&&each$f(M,function(D){y.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(D):leaveEmphasis(D)})}else isSelectChangePayload(y)&&$ instanceof SeriesModel$1&&(toggleSelectionFromPayload($,y,f._api),updateSeriesElementSelection($),markStatusToUpdate(f))},f),S&&S.eachComponent(w,function($){var P=A&&A.get($.id)!=null;P||E(f[_==="series"?"_chartsMap":"_componentsMap"][$.__viewId])},f);function E($){$&&$.__alive&&$[c]&&$[c]($.__model,S,f._api,y)}},updateMethods={prepareAndUpdate:function(f){prepare(this),updateMethods.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,c){var y=this._model,_=this._api,b=this._zr,S=this._coordSysMgr,x=this._scheduler;if(y){y.setUpdatePayload(f),x.restoreData(y,f),x.performSeriesTasks(y),S.create(y,_),x.performDataProcessorTasks(y,f),updateStreamModes(this,y),S.update(y,_),r(y),x.performVisualTasks(y,f),render(this,y,_,f,c);var w=y.get("backgroundColor")||"transparent",T=y.get("darkMode");b.setBackgroundColor(w),T!=null&&T!=="auto"&&b.setDarkMode(T),lifecycle$1.trigger("afterupdate",y,_)}},updateTransform:function(f){var c=this,y=this._model,_=this._api;if(y){y.setUpdatePayload(f);var b=[];y.eachComponent(function(x,w){if(x!=="series"){var T=c.getViewOfComponentModel(w);if(T&&T.__alive)if(T.updateTransform){var A=T.updateTransform(w,y,_,f);A&&A.update&&b.push(T)}else b.push(T)}});var S=createHashMap();y.eachSeries(function(x){var w=c._chartsMap[x.__viewId];if(w.updateTransform){var T=w.updateTransform(x,y,_,f);T&&T.update&&S.set(x.uid,1)}else S.set(x.uid,1)}),r(y),this._scheduler.performVisualTasks(y,f,{setDirty:!0,dirtyMap:S}),renderSeries(this,y,_,f,{},S),lifecycle$1.trigger("afterupdate",y,_)}},updateView:function(f){var c=this._model;c&&(c.setUpdatePayload(f),ChartView$1.markUpdateMethod(f,"updateView"),r(c),this._scheduler.performVisualTasks(c,f,{setDirty:!0}),render(this,c,this._api,f,{}),lifecycle$1.trigger("afterupdate",c,this._api))},updateVisual:function(f){var c=this,y=this._model;y&&(y.setUpdatePayload(f),y.eachSeries(function(_){_.getData().clearAllVisual()}),ChartView$1.markUpdateMethod(f,"updateVisual"),r(y),this._scheduler.performVisualTasks(y,f,{visualType:"visual",setDirty:!0}),y.eachComponent(function(_,b){if(_!=="series"){var S=c.getViewOfComponentModel(b);S&&S.__alive&&S.updateVisual(b,y,c._api,f)}}),y.eachSeries(function(_){var b=c._chartsMap[_.__viewId];b.updateVisual(_,y,c._api,f)}),lifecycle$1.trigger("afterupdate",y,this._api))},updateLayout:function(f){updateMethods.update.call(this,f)}},doConvertPixel=function(f,c,y,_){if(f._disposed){f.id;return}for(var b=f._model,S=f._coordSysMgr.getCoordinateSystems(),x,w=parseFinder$1(b,y),T=0;T<S.length;T++){var A=S[T];if(A[c]&&(x=A[c](b,w,_))!=null)return x}},updateStreamModes=function(f,c){var y=f._chartsMap,_=f._scheduler;c.eachSeries(function(b){_.updateStreamModes(b,y[b.__viewId])})},doDispatchAction=function(f,c){var y=this,_=this.getModel(),b=f.type,S=f.escapeConnect,x=actions[b],w=x.actionInfo,T=(w.update||"update").split(":"),A=T.pop(),E=T[0]!=null&&parseClassType(T[0]);this[IN_MAIN_PROCESS_KEY]=!0;var $=[f],P=!1;f.batch&&(P=!0,$=map$1(f.batch,function(O){return O=defaults(extend({},O),f),O.batch=null,O}));var I=[],C,M=isSelectChangePayload(f),D=isHighDownPayload(f);if(D&&allLeaveBlur(this._api),each$f($,function(O){if(C=x.action(O,y._model,y._api),C=C||extend({},O),C.type=w.event||C.type,I.push(C),D){var F=preParseFinder(f),L=F.queryOptionMap,B=F.mainTypeSpecified,V=B?L.keys()[0]:"series";updateDirectly(y,A,O,V),markStatusToUpdate(y)}else M?(updateDirectly(y,A,O,"series"),markStatusToUpdate(y)):E&&updateDirectly(y,A,O,E.main,E.sub)}),A!=="none"&&!D&&!M&&!E)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,f),this[PENDING_UPDATE]=null):updateMethods[A].call(this,f)}catch(O){throw this[IN_MAIN_PROCESS_KEY]=!1,O}if(P?C={type:w.event||b,escapeConnect:S,batch:I}:C=I[0],this[IN_MAIN_PROCESS_KEY]=!1,!c){var R=this._messageCenter;if(R.trigger(C.type,C),M){var N={type:"selectchanged",escapeConnect:S,selected:getAllSelectedIndices(_),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};R.trigger(N.type,N)}}},flushPendingActions=function(f){for(var c=this._pendingActions;c.length;){var y=c.shift();doDispatchAction.call(this,y,f)}},triggerUpdatedEvent=function(f){!f&&this.trigger("updated")},bindRenderedEvent=function(f,c){f.on("rendered",function(y){c.trigger("rendered",y),f.animation.isFinished()&&!c[PENDING_UPDATE]&&!c._scheduler.unfinished&&!c._pendingActions.length&&c.trigger("finished")})},bindMouseEvent=function(f,c){f.on("mouseover",function(y){var _=y.target,b=findEventDispatcher(_,isHighDownDispatcher);b&&(handleGlobalMouseOverForHighDown(b,y,c._api),markStatusToUpdate(c))}).on("mouseout",function(y){var _=y.target,b=findEventDispatcher(_,isHighDownDispatcher);b&&(handleGlobalMouseOutForHighDown(b,y,c._api),markStatusToUpdate(c))}).on("click",function(y){var _=y.target,b=findEventDispatcher(_,function(w){return getECData(w).dataIndex!=null},!0);if(b){var S=b.selected?"unselect":"select",x=getECData(b);c._api.dispatchAction({type:S,dataType:x.dataType,dataIndexInside:x.dataIndex,seriesIndex:x.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(c){c.clearColorPalette()})}function a(f){var c=[],y=[],_=!1;if(f.eachComponent(function(w,T){var A=T.get("zlevel")||0,E=T.get("z")||0,$=T.getZLevelKey();_=_||!!$,(w==="series"?y:c).push({zlevel:A,z:E,idx:T.componentIndex,type:w,key:$})}),_){var b=c.concat(y),S,x;sort$2(b,function(w,T){return w.zlevel===T.zlevel?w.z-T.z:w.zlevel-T.zlevel}),each$f(b,function(w){var T=f.getComponent(w.type,w.idx),A=w.zlevel,E=w.key;S!=null&&(A=Math.max(S,A)),E?(A===S&&E!==x&&A++,x=E):x&&(A===S&&A++,x=""),S=A,T.setZLevel(A)})}}render=function(f,c,y,_,b){a(c),renderComponents(f,c,y,_,b),each$f(f._chartsViews,function(S){S.__alive=!1}),renderSeries(f,c,y,_,b),each$f(f._chartsViews,function(S){S.__alive||S.remove(c,y)})},renderComponents=function(f,c,y,_,b,S){each$f(S||f._componentsViews,function(x){var w=x.__model;v(w,x),x.render(w,c,y,_),u(w,x),g(w,x)})},renderSeries=function(f,c,y,_,b,S){var x=f._scheduler;b=extend(b||{},{updatedSeries:c.getSeries()}),lifecycle$1.trigger("series:beforeupdate",c,y,b);var w=!1;c.eachSeries(function(T){var A=f._chartsMap[T.__viewId];A.__alive=!0;var E=A.renderTask;x.updatePayload(E,_),v(T,A),S&&S.get(T.uid)&&E.dirty(),E.perform(x.getPerformArgs(E))&&(w=!0),A.group.silent=!!T.get("silent"),l(T,A),updateSeriesElementSelection(T)}),x.unfinished=w||x.unfinished,lifecycle$1.trigger("series:layoutlabels",c,y,b),lifecycle$1.trigger("series:transition",c,y,b),c.eachSeries(function(T){var A=f._chartsMap[T.__viewId];u(T,A),g(T,A)}),s(f,c),lifecycle$1.trigger("series:afterupdate",c,y,b)},markStatusToUpdate=function(f){f[STATUS_NEEDS_UPDATE_KEY]=!0,f.getZr().wakeUp()},applyChangedStates=function(f){f[STATUS_NEEDS_UPDATE_KEY]&&(f.getZr().storage.traverse(function(c){isElementRemoved(c)||o(c)}),f[STATUS_NEEDS_UPDATE_KEY]=!1)};function o(f){for(var c=[],y=f.currentStates,_=0;_<y.length;_++){var b=y[_];b==="emphasis"||b==="blur"||b==="select"||c.push(b)}f.selected&&f.states.select&&c.push("select"),f.hoverState===HOVER_STATE_EMPHASIS&&f.states.emphasis?c.push("emphasis"):f.hoverState===HOVER_STATE_BLUR&&f.states.blur&&c.push("blur"),f.useStates(c)}function s(f,c){var y=f._zr,_=y.storage,b=0;_.traverse(function(S){S.isGroup||b++}),b>c.get("hoverLayerThreshold")&&!env$1.node&&!env$1.worker&&c.eachSeries(function(S){if(!S.preventUsingHoverLayer){var x=f._chartsMap[S.__viewId];x.__alive&&x.eachRendered(function(w){w.states.emphasis&&(w.states.emphasis.hoverLayer=!0)})}})}function l(f,c){var y=f.get("blendMode")||null;c.eachRendered(function(_){_.isGroup||(_.style.blend=y)})}function u(f,c){if(!f.preventAutoZ){var y=f.get("z")||0,_=f.get("zlevel")||0;c.eachRendered(function(b){return d(b,y,_,-1/0),!0})}}function d(f,c,y,_){var b=f.getTextContent(),S=f.getTextGuideLine(),x=f.isGroup;if(x)for(var w=f.childrenRef(),T=0;T<w.length;T++)_=Math.max(d(w[T],c,y,_),_);else f.z=c,f.zlevel=y,_=Math.max(f.z2,_);if(b&&(b.z=c,b.zlevel=y,isFinite(_)&&(b.z2=_+2)),S){var A=f.textGuideLineConfig;S.z=c,S.zlevel=y,isFinite(_)&&(S.z2=_+(A&&A.showAbove?1:-1))}return _}function v(f,c){c.eachRendered(function(y){if(!isElementRemoved(y)){var _=y.getTextContent(),b=y.getTextGuideLine();y.stateTransition&&(y.stateTransition=null),_&&_.stateTransition&&(_.stateTransition=null),b&&b.stateTransition&&(b.stateTransition=null),y.hasState()?(y.prevStates=y.currentStates,y.clearStates()):y.prevStates&&(y.prevStates=null)}})}function g(f,c){var y=f.getModel("stateAnimation"),_=f.isAnimationEnabled(),b=y.get("duration"),S=b>0?{duration:b,delay:y.get("delay"),easing:y.get("easing")}:null;c.eachRendered(function(x){if(x.states&&x.states.emphasis){if(isElementRemoved(x))return;if(x instanceof Path$1&&savePathStates(x),x.__dirty){var w=x.prevStates;w&&x.useStates(w)}if(_){x.stateTransition=S;var T=x.getTextContent(),A=x.getTextGuideLine();T&&(T.stateTransition=S),A&&(A.stateTransition=S)}x.__dirty&&o(x)}})}createExtensionAPI=function(f){return new(function(c){__extends$1(y,c);function y(){return c!==null&&c.apply(this,arguments)||this}return y.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},y.prototype.getComponentByElement=function(_){for(;_;){var b=_.__ecComponentInfo;if(b!=null)return f._model.getComponent(b.mainType,b.index);_=_.parent}},y.prototype.enterEmphasis=function(_,b){enterEmphasis(_,b),markStatusToUpdate(f)},y.prototype.leaveEmphasis=function(_,b){leaveEmphasis(_,b),markStatusToUpdate(f)},y.prototype.enterBlur=function(_){enterBlur(_),markStatusToUpdate(f)},y.prototype.leaveBlur=function(_){leaveBlur(_),markStatusToUpdate(f)},y.prototype.enterSelect=function(_){enterSelect(_),markStatusToUpdate(f)},y.prototype.leaveSelect=function(_){leaveSelect(_),markStatusToUpdate(f)},y.prototype.getModel=function(){return f.getModel()},y.prototype.getViewOfComponentModel=function(_){return f.getViewOfComponentModel(_)},y.prototype.getViewOfSeriesModel=function(_){return f.getViewOfSeriesModel(_)},y}(ExtensionAPI$1))(f)},enableConnect=function(f){function c(y,_){for(var b=0;b<y.length;b++){var S=y[b];S[CONNECT_STATUS_KEY]=_}}each$f(eventActionMap,function(y,_){f._messageCenter.on(_,function(b){if(connectedGroups[f.group]&&f[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(b&&b.escapeConnect)return;var S=f.makeActionFromEvent(b),x=[];each$f(instances,function(w){w!==f&&w.group===f.group&&x.push(w)}),c(x,CONNECT_STATUS_PENDING),each$f(x,function(w){w[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&w.dispatchAction(S)}),c(x,CONNECT_STATUS_UPDATED)}})})}}(),t}(Eventful$1),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(n,t,r){var a=this;function o(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];t&&t.apply&&t.apply(this,s),a.off(n,o)}this.on.call(this,n,o,r)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(n){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(n,t,r){var a=!(r&&r.ssr);if(a){var o=getInstanceByDom(n);if(o)return o}var s=new ECharts(n,t,r);return s.id="ec_"+idBase++,instances[s.id]=s,a&&setAttribute(n,DOM_ATTRIBUTE_KEY,s.id),enableConnect(s),lifecycle$1.trigger("afterinit",s),s}function getInstanceByDom(n){return instances[getAttribute(n,DOM_ATTRIBUTE_KEY)]}function registerTheme(n,t){themeStorage[n]=t}function registerPreprocessor(n){indexOf(optionPreprocessorFuncs,n)<0&&optionPreprocessorFuncs.push(n)}function registerProcessor(n,t){normalizeRegister(dataProcessorFuncs,n,t,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(n){registerUpdateLifecycle("afterinit",n)}function registerPostUpdate(n){registerUpdateLifecycle("afterupdate",n)}function registerUpdateLifecycle(n,t){lifecycle$1.on(n,t)}function registerAction(n,t,r){isFunction(t)&&(r=t,t="");var a=isObject$3(n)?n.type:[n,n={event:t}][0];n.event=(n.event||a).toLowerCase(),t=n.event,!eventActionMap[t]&&(assert(ACTION_REG.test(a)&&ACTION_REG.test(t)),actions[a]||(actions[a]={action:r,actionInfo:n}),eventActionMap[t]=a)}function registerCoordinateSystem(n,t){CoordinateSystem.register(n,t)}function registerLayout(n,t){normalizeRegister(visualFuncs,n,t,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(n,t){normalizeRegister(visualFuncs,n,t,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(n,t,r,a,o){if((isFunction(t)||isObject$3(t))&&(r=t,t=a),!(indexOf(registeredTasks,r)>=0)){registeredTasks.push(r);var s=Scheduler$1.wrapStageHandler(r,o);s.__prio=t,s.__raw=r,n.push(s)}}function registerLoading(n,t){loadingEffects[n]=t}function registerMap$1(n,t,r){var a=getImpl("registerMap");a&&a(n,t,r)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",darkTheme);var extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel:ComponentModel$1,ComponentView:ComponentView$1,SeriesModel:SeriesModel$1,ChartView:ChartView$1,registerComponentModel:function(n){ComponentModel$1.registerClass(n)},registerComponentView:function(n){ComponentView$1.registerClass(n)},registerSeriesModel:function(n){SeriesModel$1.registerClass(n)},registerChartView:function(n){ChartView$1.registerClass(n)},registerSubTypeDefaulter:function(n,t){ComponentModel$1.registerSubTypeDefaulter(n,t)},registerPainter:function(n,t){registerPainter(n,t)}};function use(n){if(isArray$1(n)){each$f(n,function(t){use(t)});return}indexOf(extensions,n)>=0||(extensions.push(n),isFunction(n)&&(n={install:n}),n.install(extensionRegisters))}function dataIndexMapValueLength(n){return n==null?0:n.length||1}function defaultKeyGetter(n){return n}var DataDiffer=function(){function n(t,r,a,o,s,l){this._old=t,this._new=r,this._oldKeyGetter=a||defaultKeyGetter,this._newKeyGetter=o||defaultKeyGetter,this.context=s,this._diffModeMultiple=l==="multiple"}return n.prototype.add=function(t){return this._add=t,this},n.prototype.update=function(t){return this._update=t,this},n.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},n.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},n.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},n.prototype.remove=function(t){return this._remove=t,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var t=this._old,r=this._new,a={},o=new Array(t.length),s=new Array(r.length);this._initIndexMap(t,null,o,"_oldKeyGetter"),this._initIndexMap(r,a,s,"_newKeyGetter");for(var l=0;l<t.length;l++){var u=o[l],d=a[u],v=dataIndexMapValueLength(d);if(v>1){var g=d.shift();d.length===1&&(a[u]=d[0]),this._update&&this._update(g,l)}else v===1?(a[u]=null,this._update&&this._update(d,l)):this._remove&&this._remove(l)}this._performRestAdd(s,a)},n.prototype._executeMultiple=function(){var t=this._old,r=this._new,a={},o={},s=[],l=[];this._initIndexMap(t,a,s,"_oldKeyGetter"),this._initIndexMap(r,o,l,"_newKeyGetter");for(var u=0;u<s.length;u++){var d=s[u],v=a[d],g=o[d],f=dataIndexMapValueLength(v),c=dataIndexMapValueLength(g);if(f>1&&c===1)this._updateManyToOne&&this._updateManyToOne(g,v),o[d]=null;else if(f===1&&c>1)this._updateOneToMany&&this._updateOneToMany(g,v),o[d]=null;else if(f===1&&c===1)this._update&&this._update(g,v),o[d]=null;else if(f>1&&c>1)this._updateManyToMany&&this._updateManyToMany(g,v),o[d]=null;else if(f>1)for(var y=0;y<f;y++)this._remove&&this._remove(v[y]);else this._remove&&this._remove(v)}this._performRestAdd(l,o)},n.prototype._performRestAdd=function(t,r){for(var a=0;a<t.length;a++){var o=t[a],s=r[o],l=dataIndexMapValueLength(s);if(l>1)for(var u=0;u<l;u++)this._add&&this._add(s[u]);else l===1&&this._add&&this._add(s);r[o]=null}},n.prototype._initIndexMap=function(t,r,a,o){for(var s=this._diffModeMultiple,l=0;l<t.length;l++){var u="_ec_"+this[o](t[l],l);if(s||(a[l]=u),!!r){var d=r[u],v=dataIndexMapValueLength(d);v===0?(r[u]=l,s&&a.push(u)):v===1?r[u]=[d,l]:d.push(l)}}},n}();const DataDiffer$1=DataDiffer;var DimensionUserOuput=function(){function n(t,r){this._encode=t,this._schema=r}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function summarizeDimensions(n,t){var r={},a=r.encode={},o=createHashMap(),s=[],l=[],u={};each$f(n.dimensions,function(c){var y=n.getDimensionInfo(c),_=y.coordDim;if(_){var b=y.coordDimIndex;getOrCreateEncodeArr(a,_)[b]=c,y.isExtraCoord||(o.set(_,1),mayLabelDimType(y.type)&&(s[0]=c),getOrCreateEncodeArr(u,_)[b]=n.getDimensionIndex(y.name)),y.defaultTooltip&&l.push(c)}VISUAL_DIMENSIONS.each(function(S,x){var w=getOrCreateEncodeArr(a,x),T=y.otherDims[x];T!=null&&T!==!1&&(w[T]=y.name)})});var d=[],v={};o.each(function(c,y){var _=a[y];v[y]=_[0],d=d.concat(_)}),r.dataDimsOnCoord=d,r.dataDimIndicesOnCoord=map$1(d,function(c){return n.getDimensionInfo(c).storeDimIndex}),r.encodeFirstDimNotExtra=v;var g=a.label;g&&g.length&&(s=g.slice());var f=a.tooltip;return f&&f.length?l=f.slice():l.length||(l=s.slice()),a.defaultedLabel=s,a.defaultedTooltip=l,r.userOutput=new DimensionUserOuput(u,t),r}function getOrCreateEncodeArr(n,t){return n.hasOwnProperty(t)||(n[t]=[]),n[t]}function getDimensionTypeByAxis(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function mayLabelDimType(n){return!(n==="ordinal"||n==="time")}var SeriesDimensionDefine=function(){function n(t){this.otherDims={},t!=null&&extend(this,t)}return n}();const SeriesDimensionDefine$1=SeriesDimensionDefine;var inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function n(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},n.prototype.getSourceDimensionIndex=function(t){return retrieve2(this._dimNameMap.get(t),-1)},n.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},n.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=shouldRetrieveDataByName(this.source),a=!shouldOmitUnusedDimensions(t),o="",s=[],l=0,u=0;l<t;l++){var d=void 0,v=void 0,g=void 0,f=this.dimensions[u];if(f&&f.storeDimIndex===l)d=r?f.name:null,v=f.type,g=f.ordinalMeta,u++;else{var c=this.getSourceDimension(l);c&&(d=r?c.name:null,v=c.type)}s.push({property:d,type:v,ordinalMeta:g}),r&&d!=null&&(!f||!f.isCalculationCoord)&&(o+=a?d.replace(/\`/g,"`1").replace(/\$/g,"`2"):d),o+="$",o+=dimTypeShort[v]||"f",g&&(o+=g.uid),o+="$"}var y=this.source,_=[y.seriesLayoutBy,y.startIndex,o].join("$$");return{dimensions:s,hash:_}},n.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,a=0;r<this._fullDimCount;r++){var o=void 0,s=this.dimensions[a];if(s&&s.storeDimIndex===r)s.isCalculationCoord||(o=s.name),a++;else{var l=this.getSourceDimension(r);l&&(o=l.name)}t.push(o)}return t},n.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function isSeriesDataSchema(n){return n instanceof SeriesDataSchema}function createDimNameMap(n){for(var t=createHashMap(),r=0;r<(n||[]).length;r++){var a=n[r],o=isObject$3(a)?a.name:a;o!=null&&t.get(o)==null&&t.set(o,r)}return t}function ensureSourceDimNameMap(n){var t=inner$h(n);return t.dimNameMap||(t.dimNameMap=createDimNameMap(n.dimensionsDefine))}function shouldOmitUnusedDimensions(n){return n>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function n(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var a,o=!1;isSeriesDataSchema(t)?(a=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(o=!0,a=t),a=a||["x","y"];for(var s={},l=[],u={},d=!1,v={},g=0;g<a.length;g++){var f=a[g],c=isString(f)?new SeriesDimensionDefine$1({name:f}):f instanceof SeriesDimensionDefine$1?f:new SeriesDimensionDefine$1(f),y=c.name;c.type=c.type||"float",c.coordDim||(c.coordDim=y,c.coordDimIndex=0);var _=c.otherDims=c.otherDims||{};l.push(y),s[y]=c,v[y]!=null&&(d=!0),c.createInvertedIndices&&(u[y]=[]),_.itemName===0&&(this._nameDimIdx=g),_.itemId===0&&(this._idDimIdx=g),o&&(c.storeDimIndex=g)}if(this.dimensions=l,this._dimInfos=s,this._initGetDimensionInfo(d),this.hostModel=r,this._invertedIndicesMap=u,this._dimOmitted){var b=this._dimIdxToName=createHashMap();each$f(l,function(S){b.set(s[S].storeDimIndex,S)})}}return n.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var a=this._dimIdxToName.get(r);if(a!=null)return a;var o=this._schema.getSourceDimension(r);if(o)return o.name},n.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var a=this._getDimInfo(t);return a?a.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},n.prototype._recognizeDimIndex=function(t){if(isNumber(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},n.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},n.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},n.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(a){return r.hasOwnProperty(a)?r[a]:void 0}:function(a){return r[a]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(t,r){var a=this._dimSummary;if(r==null)return a.encodeFirstDimNotExtra[t];var o=a.encode[t];return o?o[r]:null},n.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,a=r.encode[t];return(a||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(t,r,a){var o=this,s;if(t instanceof DataStore&&(s=t),!s){var l=this.dimensions,u=isSourceInstance(t)||isArrayLike(t)?new DefaultDataProvider(t,l.length):t;s=new DataStore;var d=map(l,function(v){return{type:o._dimInfos[v].type,property:v}});s.initData(u,d,a)}this._store=s,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},n.prototype.appendValues=function(t,r){var a=this._store.appendValues(t,r.length),o=a.start,s=a.end,l=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var u=o;u<s;u++){var d=u-o;this._nameList[u]=r[d],l&&makeIdFromName(this,u)}},n.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,a=0;a<r.length;a++){var o=this._dimInfos[r[a]];o.ordinalMeta&&t.collectOrdinalMeta(o.storeDimIndex,o.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!t.fillStorage},n.prototype._doInit=function(t,r){if(!(t>=r)){var a=this._store,o=a.getProvider();this._updateOrdinalMeta();var s=this._nameList,l=this._idList,u=o.getSource().sourceFormat,d=u===SOURCE_FORMAT_ORIGINAL;if(d&&!o.pure)for(var v=[],g=t;g<r;g++){var f=o.getItem(g,v);if(!this.hasItemOption&&isDataItemOption(f)&&(this.hasItemOption=!0),f){var c=f.name;s[g]==null&&c!=null&&(s[g]=convertOptionIdName(c,null));var y=f.id;l[g]==null&&y!=null&&(l[g]=convertOptionIdName(y,null))}}if(this._shouldMakeIdFromName())for(var g=t;g<r;g++)makeIdFromName(this,g);prepareInvertedIndex(this)}},n.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},n.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},n.prototype.setCalculationInfo=function(t,r){isObject$1(t)?extend(this._calculationInfo,t):this._calculationInfo[t]=r},n.prototype.getName=function(t){var r=this.getRawIndex(t),a=this._nameList[r];return a==null&&this._nameDimIdx!=null&&(a=getIdNameFromStore(this,this._nameDimIdx,r)),a==null&&(a=""),a},n.prototype._getCategory=function(t,r){var a=this._store.get(t,r),o=this._store.getOrdinalMeta(t);return o?o.categories[a]:a},n.prototype.getId=function(t){return getId(this,this.getRawIndex(t))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(t,r){var a=this._store,o=this._dimInfos[t];if(o)return a.get(o.storeDimIndex,r)},n.prototype.getByRawIndex=function(t,r){var a=this._store,o=this._dimInfos[t];if(o)return a.getByRawIndex(o.storeDimIndex,r)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},n.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},n.prototype.getValues=function(t,r){var a=this,o=this._store;return isArray$1(t)?o.getValues(map(t,function(s){return a._getStoreDimIndex(s)}),r):o.getValues(t)},n.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,a=0,o=r.length;a<o;a++)if(isNaN(this._store.get(r[a],t)))return!1;return!0},n.prototype.indexOfName=function(t){for(var r=0,a=this._store.count();r<a;r++)if(this.getName(r)===t)return r;return-1},n.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},n.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},n.prototype.rawIndexOf=function(t,r){var a=t&&this._invertedIndicesMap[t],o=a[r];return o==null||isNaN(o)?INDEX_NOT_FOUND:o},n.prototype.indicesOfNearest=function(t,r,a){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,a)},n.prototype.each=function(t,r,a){isFunction(t)&&(a=r,r=t,t=[]);var o=a||this,s=map(normalizeDimensions(t),this._getStoreDimIndex,this);this._store.each(s,o?bind$1(r,o):r)},n.prototype.filterSelf=function(t,r,a){isFunction(t)&&(a=r,r=t,t=[]);var o=a||this,s=map(normalizeDimensions(t),this._getStoreDimIndex,this);return this._store=this._store.filter(s,o?bind$1(r,o):r),this},n.prototype.selectRange=function(t){var r=this,a={},o=keys(t);return each$f(o,function(s){var l=r._getStoreDimIndex(s);a[l]=t[s]}),this._store=this._store.selectRange(a),this},n.prototype.mapArray=function(t,r,a){isFunction(t)&&(a=r,r=t,t=[]),a=a||this;var o=[];return this.each(t,function(){o.push(r&&r.apply(this,arguments))},a),o},n.prototype.map=function(t,r,a,o){var s=a||o||this,l=map(normalizeDimensions(t),this._getStoreDimIndex,this),u=cloneListForMapAndSample(this);return u._store=this._store.map(l,s?bind$1(r,s):r),u},n.prototype.modify=function(t,r,a,o){var s=a||o||this,l=map(normalizeDimensions(t),this._getStoreDimIndex,this);this._store.modify(l,s?bind$1(r,s):r)},n.prototype.downSample=function(t,r,a,o){var s=cloneListForMapAndSample(this);return s._store=this._store.downSample(this._getStoreDimIndex(t),r,a,o),s},n.prototype.lttbDownSample=function(t,r){var a=cloneListForMapAndSample(this);return a._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),a},n.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},n.prototype.getItemModel=function(t){var r=this.hostModel,a=this.getRawDataItem(t);return new Model$1(a,r,r&&r.ecModel)},n.prototype.diff=function(t){var r=this;return new DataDiffer$1(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(a){return getId(t,a)},function(a){return getId(r,a)})},n.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},n.prototype.setVisual=function(t,r){this._visual=this._visual||{},isObject$1(t)?extend(this._visual,t):this._visual[t]=r},n.prototype.getItemVisual=function(t,r){var a=this._itemVisuals[t],o=a&&a[r];return o??this.getVisual(r)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(t,r){var a=this._itemVisuals,o=a[t];o||(o=a[t]={});var s=o[r];return s==null&&(s=this.getVisual(r),isArray$1(s)?s=s.slice():isObject$1(s)&&(s=extend({},s)),o[r]=s),s},n.prototype.setItemVisual=function(t,r,a){var o=this._itemVisuals[t]||{};this._itemVisuals[t]=o,isObject$1(r)?extend(o,r):o[r]=a},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(t,r){isObject$1(t)?extend(this._layout,t):this._layout[t]=r},n.prototype.getLayout=function(t){return this._layout[t]},n.prototype.getItemLayout=function(t){return this._itemLayouts[t]},n.prototype.setItemLayout=function(t,r,a){this._itemLayouts[t]=a?extend(this._itemLayouts[t]||{},r):r},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(t,r){var a=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(a,this.dataType,t,r),this._graphicEls[t]=r},n.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},n.prototype.eachItemGraphicEl=function(t,r){each$f(this._graphicEls,function(a,o){a&&t&&t.call(r,a,o)})},n.prototype.cloneShallow=function(t){return t||(t=new n(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(t,this),t._store=this._store,t},n.prototype.wrapMethod=function(t,r){var a=this[t];isFunction(a)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var o=a.apply(this,arguments);return r.apply(this,[o].concat(slice(arguments)))})},n.internalField=function(){prepareInvertedIndex=function(t){var r=t._invertedIndicesMap;each$f(r,function(a,o){var s=t._dimInfos[o],l=s.ordinalMeta,u=t._store;if(l){a=r[o]=new CtorInt32Array(l.categories.length);for(var d=0;d<a.length;d++)a[d]=INDEX_NOT_FOUND;for(var d=0;d<u.count();d++)a[u.get(s.storeDimIndex,d)]=d}})},getIdNameFromStore=function(t,r,a){return convertOptionIdName(t._getCategory(r,a),null)},getId=function(t,r){var a=t._idList[r];return a==null&&t._idDimIdx!=null&&(a=getIdNameFromStore(t,t._idDimIdx,r)),a==null&&(a=ID_PREFIX+r),a},normalizeDimensions=function(t){return isArray$1(t)||(t=t!=null?[t]:[]),t},cloneListForMapAndSample=function(t){var r=new n(t._schema?t._schema:map(t.dimensions,t._getDimInfo,t),t.hostModel);return transferProperties(r,t),r},transferProperties=function(t,r){each$f(TRANSFERABLE_PROPERTIES.concat(r.__wrappedMethods||[]),function(a){r.hasOwnProperty(a)&&(t[a]=r[a])}),t.__wrappedMethods=r.__wrappedMethods,each$f(CLONE_PROPERTIES,function(a){t[a]=clone$4(r[a])}),t._calculationInfo=extend({},r._calculationInfo)},makeIdFromName=function(t,r){var a=t._nameList,o=t._idList,s=t._nameDimIdx,l=t._idDimIdx,u=a[r],d=o[r];if(u==null&&s!=null&&(a[r]=u=getIdNameFromStore(t,s,r)),d==null&&l!=null&&(o[r]=d=getIdNameFromStore(t,l,r)),d==null&&u!=null){var v=t._nameRepeatCount,g=v[u]=(v[u]||0)+1;d=u,g>1&&(d+="__ec__"+g),o[r]=d}}}(),n}();const SeriesData$1=SeriesData;function prepareSeriesDataSchema(n,t){isSourceInstance(n)||(n=createSourceFromSeriesDataOption(n)),t=t||{};var r=t.coordDimensions||[],a=t.dimensionsDefine||n.dimensionsDefine||[],o=createHashMap(),s=[],l=getDimCount(n,r,a,t.dimensionsCount),u=t.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(l),d=a===n.dimensionsDefine,v=d?ensureSourceDimNameMap(n):createDimNameMap(a),g=t.encodeDefine;!g&&t.encodeDefaulter&&(g=t.encodeDefaulter(n,l));for(var f=createHashMap(g),c=new CtorInt32Array$1(l),y=0;y<c.length;y++)c[y]=-1;function _(C){var M=c[C];if(M<0){var D=a[C],R=isObject$3(D)?D:{name:D},N=new SeriesDimensionDefine$1,O=R.name;O!=null&&v.get(O)!=null&&(N.name=N.displayName=O),R.type!=null&&(N.type=R.type),R.displayName!=null&&(N.displayName=R.displayName);var F=s.length;return c[C]=F,N.storeDimIndex=C,s.push(N),N}return s[M]}if(!u)for(var y=0;y<l;y++)_(y);f.each(function(C,M){var D=normalizeToArray(C).slice();if(D.length===1&&!isString(D[0])&&D[0]<0){f.set(M,!1);return}var R=f.set(M,[]);each$f(D,function(N,O){var F=isString(N)?v.get(N):N;F!=null&&F<l&&(R[O]=F,S(_(F),M,O))})});var b=0;each$f(r,function(C){var M,D,R,N;if(isString(C))M=C,N={};else{N=C,M=N.name;var O=N.ordinalMeta;N.ordinalMeta=null,N=extend({},N),N.ordinalMeta=O,D=N.dimsDef,R=N.otherDims,N.name=N.coordDim=N.coordDimIndex=N.dimsDef=N.otherDims=null}var F=f.get(M);if(F!==!1){if(F=normalizeToArray(F),!F.length)for(var L=0;L<(D&&D.length||1);L++){for(;b<l&&_(b).coordDim!=null;)b++;b<l&&F.push(b++)}each$f(F,function(B,V){var H=_(B);if(d&&N.type!=null&&(H.type=N.type),S(defaults(H,N),M,V),H.name==null&&D){var X=D[V];!isObject$3(X)&&(X={name:X}),H.name=H.displayName=X.name,H.defaultTooltip=X.defaultTooltip}R&&defaults(H.otherDims,R)})}});function S(C,M,D){VISUAL_DIMENSIONS.get(M)!=null?C.otherDims[M]=D:(C.coordDim=M,C.coordDimIndex=D,o.set(M,!0))}var x=t.generateCoord,w=t.generateCoordCount,T=w!=null;w=x?w||1:0;var A=x||"value";function E(C){C.name==null&&(C.name=C.coordDim)}if(u)each$f(s,function(C){E(C)}),s.sort(function(C,M){return C.storeDimIndex-M.storeDimIndex});else for(var $=0;$<l;$++){var P=_($),I=P.coordDim;I==null&&(P.coordDim=genCoordDimName(A,o,T),P.coordDimIndex=0,(!x||w<=0)&&(P.isExtraCoord=!0),w--),E(P),P.type==null&&(guessOrdinal(n,$)===BE_ORDINAL.Must||P.isExtraCoord&&(P.otherDims.itemName!=null||P.otherDims.seriesName!=null))&&(P.type="ordinal")}return removeDuplication(s),new SeriesDataSchema({source:n,dimensions:s,fullDimensionCount:l,dimensionOmitted:u})}function removeDuplication(n){for(var t=createHashMap(),r=0;r<n.length;r++){var a=n[r],o=a.name,s=t.get(o)||0;s>0&&(a.name=o+(s-1)),s++,t.set(o,s)}}function getDimCount(n,t,r,a){var o=Math.max(n.dimensionsDetectedCount||1,t.length,r.length,a||0);return each$f(t,function(s){var l;isObject$3(s)&&(l=s.dimsDef)&&(o=Math.max(o,l.length))}),o}function genCoordDimName(n,t,r){if(r||t.hasKey(n)){for(var a=0;t.hasKey(n+a);)a++;n+=a}return t.set(n,!0),n}var CoordSysInfo=function(){function n(t){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=t}return n}();function getCoordSysInfoBySeries(n){var t=n.get("coordinateSystem"),r=new CoordSysInfo(t),a=fetchers[t];if(a)return a(n,r,r.axisMap,r.categoryAxisMap),r}var fetchers={cartesian2d:function(n,t,r,a){var o=n.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],s=n.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];t.coordSysDims=["x","y"],r.set("x",o),r.set("y",s),isCategory(o)&&(a.set("x",o),t.firstCategoryDimIndex=0),isCategory(s)&&(a.set("y",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(n,t,r,a){var o=n.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];t.coordSysDims=["single"],r.set("single",o),isCategory(o)&&(a.set("single",o),t.firstCategoryDimIndex=0)},polar:function(n,t,r,a){var o=n.getReferringComponents("polar",SINGLE_REFERRING).models[0],s=o.findAxisModel("radiusAxis"),l=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",s),r.set("angle",l),isCategory(s)&&(a.set("radius",s),t.firstCategoryDimIndex=0),isCategory(l)&&(a.set("angle",l),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(n,t,r,a){t.coordSysDims=["lng","lat"]},parallel:function(n,t,r,a){var o=n.ecModel,s=o.getComponent("parallel",n.get("parallelIndex")),l=t.coordSysDims=s.dimensions.slice();each$f(s.parallelAxisIndex,function(u,d){var v=o.getComponent("parallelAxis",u),g=l[d];r.set(g,v),isCategory(v)&&(a.set(g,v),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=d))})}};function isCategory(n){return n.get("type")==="category"}function enableDataStack(n,t,r){r=r||{};var a=r.byIndex,o=r.stackedCoordDimension,s,l,u;isLegacyDimensionsInput(t)?s=t:(l=t.schema,s=l.dimensions,u=t.store);var d=!!(n&&n.get("stack")),v,g,f,c;if(each$f(s,function(w,T){isString(w)&&(s[T]=w={name:w}),d&&!w.isExtraCoord&&(!a&&!v&&w.ordinalMeta&&(v=w),!g&&w.type!=="ordinal"&&w.type!=="time"&&(!o||o===w.coordDim)&&(g=w))}),g&&!a&&!v&&(a=!0),g){f="__\0ecstackresult_"+n.id,c="__\0ecstackedover_"+n.id,v&&(v.createInvertedIndices=!0);var y=g.coordDim,_=g.type,b=0;each$f(s,function(w){w.coordDim===y&&b++});var S={name:f,coordDim:y,coordDimIndex:b,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length},x={name:c,coordDim:c,coordDimIndex:b+1,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length+1};l?(u&&(S.storeDimIndex=u.ensureCalculationDimension(c,_),x.storeDimIndex=u.ensureCalculationDimension(f,_)),l.appendCalculationDimension(S),l.appendCalculationDimension(x)):(s.push(S),s.push(x))}return{stackedDimension:g&&g.name,stackedByDimension:v&&v.name,isStackedByIndex:a,stackedOverDimension:c,stackResultDimension:f}}function isLegacyDimensionsInput(n){return!isSeriesDataSchema(n.schema)}function isDimensionStacked(n,t){return!!t&&t===n.getCalculationInfo("stackedDimension")}function getStackedDimension(n,t){return isDimensionStacked(n,t)?n.getCalculationInfo("stackResultDimension"):t}function getCoordSysDimDefs(n,t){var r=n.get("coordinateSystem"),a=CoordinateSystem.get(r),o;return t&&t.coordSysDims&&(o=map$1(t.coordSysDims,function(s){var l={name:s},u=t.axisMap.get(s);if(u){var d=u.get("type");l.type=getDimensionTypeByAxis(d)}return l})),o||(o=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),o}function injectOrdinalMeta(n,t,r){var a,o;return r&&each$f(n,function(s,l){var u=s.coordDim,d=r.categoryAxisMap.get(u);d&&(a==null&&(a=l),s.ordinalMeta=d.getOrdinalMeta(),t&&(s.createInvertedIndices=!0)),s.otherDims.itemName!=null&&(o=!0)}),!o&&a!=null&&(n[a].otherDims.itemName=0),a}function createSeriesData(n,t,r){r=r||{};var a=t.getSourceManager(),o,s=!1;n?(s=!0,o=createSourceFromSeriesDataOption(n)):(o=a.getSource(),s=o.sourceFormat===SOURCE_FORMAT_ORIGINAL);var l=getCoordSysInfoBySeries(t),u=getCoordSysDimDefs(t,l),d=r.useEncodeDefaulter,v=isFunction(d)?d:d?curry$1(makeSeriesEncodeForAxisCoordSys,u,t):null,g={coordDimensions:u,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:v,canOmitUnusedDimensions:!s},f=prepareSeriesDataSchema(o,g),c=injectOrdinalMeta(f.dimensions,r.createInvertedIndices,l),y=s?null:a.getSharedDataStore(f),_=enableDataStack(t,{schema:f,store:y}),b=new SeriesData$1(f,t);b.setCalculationInfo(_);var S=c!=null&&isNeedCompleteOrdinalData(o)?function(x,w,T,A){return A===c?T:this.defaultDimValueGetter(x,w,T,A)}:null;return b.hasItemOption=!1,b.initData(s?o:y,null,S),b}function isNeedCompleteOrdinalData(n){if(n.sourceFormat===SOURCE_FORMAT_ORIGINAL){var t=firstDataNotNull(n.data||[]);return!isArray$1(getDataItemValue(t))}}function firstDataNotNull(n){for(var t=0;t<n.length&&n[t]==null;)t++;return n[t]}var Scale=function(){function n(t){this._setting=t||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(t){return this._setting[t]},n.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},n.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(t,r){var a=this._extent;isNaN(t)||(a[0]=t),isNaN(r)||(a[1]=r)},n.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(t){this._isBlank=t},n}();enableClassManagement(Scale);const Scale$1=Scale;var uidBase=0,OrdinalMeta=function(){function n(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++uidBase}return n.createByAxisModel=function(t){var r=t.option,a=r.data,o=a&&map$1(a,getName);return new n({categories:o,needCollect:!o,deduplication:r.dedplication!==!1})},n.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},n.prototype.parseAndCollect=function(t){var r,a=this._needCollect;if(!isString(t)&&!a)return t;if(a&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var o=this._getOrCreateMap();return r=o.get(t),r==null&&(a?(r=this.categories.length,this.categories[r]=t,o.set(t,r)):r=NaN),r},n.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},n}();function getName(n){return isObject$3(n)&&n.value!=null?n.value:n+""}const OrdinalMeta$1=OrdinalMeta;function isIntervalOrLogScale(n){return n.type==="interval"||n.type==="log"}function intervalScaleNiceTicks(n,t,r,a){var o={},s=n[1]-n[0],l=o.interval=nice(s/t,!0);r!=null&&l<r&&(l=o.interval=r),a!=null&&l>a&&(l=o.interval=a);var u=o.intervalPrecision=getIntervalPrecision(l),d=o.niceTickExtent=[round$3(Math.ceil(n[0]/l)*l,u),round$3(Math.floor(n[1]/l)*l,u)];return fixExtent(d,n),o}function increaseInterval(n){var t=Math.pow(10,quantityExponent(n)),r=n/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,round$3(r*t)}function getIntervalPrecision(n){return getPrecision(n)+2}function clamp(n,t,r){n[t]=Math.max(Math.min(n[t],r[1]),r[0])}function fixExtent(n,t){!isFinite(n[0])&&(n[0]=t[0]),!isFinite(n[1])&&(n[1]=t[1]),clamp(n,0,t),clamp(n,1,t),n[0]>n[1]&&(n[0]=n[1])}function contain$1(n,t){return n>=t[0]&&n<=t[1]}function normalize$2(n,t){return t[1]===t[0]?.5:(n-t[0])/(t[1]-t[0])}function scale(n,t){return n*(t[1]-t[0])+t[0]}var OrdinalScale=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;a.type="ordinal";var o=a.getSetting("ordinalMeta");return o||(o=new OrdinalMeta$1({})),isArray$1(o)&&(o=new OrdinalMeta$1({categories:map$1(o,function(s){return isObject$3(s)?s.value:s})})),a._ordinalMeta=o,a._extent=a.getSetting("extent")||[0,o.categories.length-1],a}return t.prototype.parse=function(r){return r==null?NaN:isString(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),contain$1(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),normalize$2(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(scale(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],a=this._extent,o=a[0];o<=a[1];)r.push({value:o}),o++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var a=r.ordinalNumbers,o=this._ordinalNumbersByTick=[],s=this._ticksByOrdinalNumber=[],l=0,u=this._ordinalMeta.categories.length,d=Math.min(u,a.length);l<d;++l){var v=a[l];o[l]=v,s[v]=l}for(var g=0;l<u;++l){for(;s[g]!=null;)g++;o.push(g),s[g]=l}},t.prototype._getTickNumber=function(r){var a=this._ticksByOrdinalNumber;return a&&r>=0&&r<a.length?a[r]:r},t.prototype.getRawOrdinalNumber=function(r){var a=this._ordinalNumbersByTick;return a&&r>=0&&r<a.length?a[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var a=this.getRawOrdinalNumber(r.value),o=this._ordinalMeta.categories[a];return o==null?"":o+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,a){this.unionExtent(r.getApproximateExtent(a))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Scale$1);Scale$1.registerClass(OrdinalScale);const OrdinalScale$1=OrdinalScale;var roundNumber=round$3,IntervalScale=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return contain$1(r,this._extent)},t.prototype.normalize=function(r){return normalize$2(r,this._extent)},t.prototype.scale=function(r){return scale(r,this._extent)},t.prototype.setExtent=function(r,a){var o=this._extent;isNaN(r)||(o[0]=parseFloat(r)),isNaN(a)||(o[1]=parseFloat(a))},t.prototype.unionExtent=function(r){var a=this._extent;r[0]<a[0]&&(a[0]=r[0]),r[1]>a[1]&&(a[1]=r[1]),this.setExtent(a[0],a[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(r)},t.prototype.getTicks=function(r){var a=this._interval,o=this._extent,s=this._niceExtent,l=this._intervalPrecision,u=[];if(!a)return u;var d=1e4;o[0]<s[0]&&(r?u.push({value:roundNumber(s[0]-a,l)}):u.push({value:o[0]}));for(var v=s[0];v<=s[1]&&(u.push({value:v}),v=roundNumber(v+a,l),v!==u[u.length-1].value);)if(u.length>d)return[];var g=u.length?u[u.length-1].value:s[1];return o[1]>g&&(r?u.push({value:roundNumber(g+a,l)}):u.push({value:o[1]})),u},t.prototype.getMinorTicks=function(r){for(var a=this.getTicks(!0),o=[],s=this.getExtent(),l=1;l<a.length;l++){for(var u=a[l],d=a[l-1],v=0,g=[],f=u.value-d.value,c=f/r;v<r-1;){var y=roundNumber(d.value+(v+1)*c);y>s[0]&&y<s[1]&&g.push(y),v++}o.push(g)}return o},t.prototype.getLabel=function(r,a){if(r==null)return"";var o=a&&a.precision;o==null?o=getPrecision(r.value)||0:o==="auto"&&(o=this._intervalPrecision);var s=roundNumber(r.value,o,!0);return addCommas(s)},t.prototype.calcNiceTicks=function(r,a,o){r=r||5;var s=this._extent,l=s[1]-s[0];if(isFinite(l)){l<0&&(l=-l,s.reverse());var u=intervalScaleNiceTicks(s,r,a,o);this._intervalPrecision=u.intervalPrecision,this._interval=u.interval,this._niceExtent=u.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var a=this._extent;if(a[0]===a[1])if(a[0]!==0){var o=Math.abs(a[0]);r.fixMax||(a[1]+=o/2),a[0]-=o/2}else a[1]=1;var s=a[1]-a[0];isFinite(s)||(a[0]=0,a[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var l=this._interval;r.fixMin||(a[0]=roundNumber(Math.floor(a[0]/l)*l)),r.fixMax||(a[1]=roundNumber(Math.ceil(a[1]/l)*l))},t.prototype.setNiceExtent=function(r,a){this._niceExtent=[r,a]},t.type="interval",t}(Scale$1);Scale$1.registerClass(IntervalScale);const IntervalScale$1=IntervalScale;var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(n){return isArray$1(n)?supportFloat32Array?new Float32Array(n):n:new Float32ArrayCtor(n)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(n){return n.get("stack")||STACK_PREFIX+n.seriesIndex}function getAxisKey$1(n){return n.dim+n.index}function getLayoutOnAxis(n){var t=[],r=n.axis,a="axis0";if(r.type==="category"){for(var o=r.getBandWidth(),s=0;s<n.count;s++)t.push(defaults({bandWidth:o,axisKey:a,stackId:STACK_PREFIX+s},n));for(var l=doCalBarWidthAndOffset(t),u=[],s=0;s<n.count;s++){var d=l[a][STACK_PREFIX+s];d.offsetCenter=d.offset+d.width/2,u.push(d)}return u}}function prepareLayoutBarSeries(n,t){var r=[];return t.eachSeriesByType(n,function(a){isOnCartesian(a)&&r.push(a)}),r}function getValueAxesMinGaps(n){var t={};each$f(n,function(d){var v=d.coordinateSystem,g=v.getBaseAxis();if(!(g.type!=="time"&&g.type!=="value"))for(var f=d.getData(),c=g.dim+"_"+g.index,y=f.getDimensionIndex(f.mapDimension(g.dim)),_=f.getStore(),b=0,S=_.count();b<S;++b){var x=_.get(y,b);t[c]?t[c].push(x):t[c]=[x]}});var r={};for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];if(o){o.sort(function(d,v){return d-v});for(var s=null,l=1;l<o.length;++l){var u=o[l]-o[l-1];u>0&&(s=s===null?u:Math.min(s,u))}r[a]=s}}return r}function makeColumnLayout(n){var t=getValueAxesMinGaps(n),r=[];return each$f(n,function(a){var o=a.coordinateSystem,s=o.getBaseAxis(),l=s.getExtent(),u;if(s.type==="category")u=s.getBandWidth();else if(s.type==="value"||s.type==="time"){var d=s.dim+"_"+s.index,v=t[d],g=Math.abs(l[1]-l[0]),f=s.scale.getExtent(),c=Math.abs(f[1]-f[0]);u=v?g/c*v:g}else{var y=a.getData();u=Math.abs(l[1]-l[0])/y.count()}var _=parsePercent(a.get("barWidth"),u),b=parsePercent(a.get("barMaxWidth"),u),S=parsePercent(a.get("barMinWidth")||(isInLargeMode(a)?.5:1),u),x=a.get("barGap"),w=a.get("barCategoryGap");r.push({bandWidth:u,barWidth:_,barMaxWidth:b,barMinWidth:S,barGap:x,barCategoryGap:w,axisKey:getAxisKey$1(s),stackId:getSeriesStackId$1(a)})}),doCalBarWidthAndOffset(r)}function doCalBarWidthAndOffset(n){var t={};each$f(n,function(a,o){var s=a.axisKey,l=a.bandWidth,u=t[s]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},d=u.stacks;t[s]=u;var v=a.stackId;d[v]||u.autoWidthCount++,d[v]=d[v]||{width:0,maxWidth:0};var g=a.barWidth;g&&!d[v].width&&(d[v].width=g,g=Math.min(u.remainedWidth,g),u.remainedWidth-=g);var f=a.barMaxWidth;f&&(d[v].maxWidth=f);var c=a.barMinWidth;c&&(d[v].minWidth=c);var y=a.barGap;y!=null&&(u.gap=y);var _=a.barCategoryGap;_!=null&&(u.categoryGap=_)});var r={};return each$f(t,function(a,o){r[o]={};var s=a.stacks,l=a.bandWidth,u=a.categoryGap;if(u==null){var d=keys(s).length;u=Math.max(35-d*4,15)+"%"}var v=parsePercent(u,l),g=parsePercent(a.gap,1),f=a.remainedWidth,c=a.autoWidthCount,y=(f-v)/(c+(c-1)*g);y=Math.max(y,0),each$f(s,function(x){var w=x.maxWidth,T=x.minWidth;if(x.width){var A=x.width;w&&(A=Math.min(A,w)),T&&(A=Math.max(A,T)),x.width=A,f-=A+g*A,c--}else{var A=y;w&&w<A&&(A=Math.min(w,f)),T&&T>A&&(A=T),A!==y&&(x.width=A,f-=A+g*A,c--)}}),y=(f-v)/(c+(c-1)*g),y=Math.max(y,0);var _=0,b;each$f(s,function(x,w){x.width||(x.width=y),b=x,_+=x.width*(1+g)}),b&&(_-=b.width*g);var S=-_/2;each$f(s,function(x,w){r[o][w]=r[o][w]||{bandWidth:l,offset:S,width:x.width},S+=x.width*(1+g)})}),r}function retrieveColumnLayout(n,t,r){if(n&&t){var a=n[getAxisKey$1(t)];return a!=null&&r!=null?a[getSeriesStackId$1(r)]:a}}function layout$3(n,t){var r=prepareLayoutBarSeries(n,t),a=makeColumnLayout(r);each$f(r,function(o){var s=o.getData(),l=o.coordinateSystem,u=l.getBaseAxis(),d=getSeriesStackId$1(o),v=a[getAxisKey$1(u)][d],g=v.offset,f=v.width;s.setLayout({bandWidth:v.bandWidth,offset:g,size:f})})}function createProgressiveLayout(n){return{seriesType:n,plan:createRenderPlanner(),reset:function(t){if(isOnCartesian(t)){var r=t.getData(),a=t.coordinateSystem,o=a.getBaseAxis(),s=a.getOtherAxis(o),l=r.getDimensionIndex(r.mapDimension(s.dim)),u=r.getDimensionIndex(r.mapDimension(o.dim)),d=t.get("showBackground",!0),v=r.mapDimension(s.dim),g=r.getCalculationInfo("stackResultDimension"),f=isDimensionStacked(r,v)&&!!r.getCalculationInfo("stackedOnSeries"),c=s.isHorizontal(),y=getValueAxisStart(o,s),_=isInLargeMode(t),b=t.get("barMinHeight")||0,S=g&&r.getDimensionIndex(g),x=r.getLayout("size"),w=r.getLayout("offset");return{progress:function(T,A){for(var E=T.count,$=_&&createFloat32Array(E*3),P=_&&d&&createFloat32Array(E*3),I=_&&createFloat32Array(E),C=a.master.getRect(),M=c?C.width:C.height,D,R=A.getStore(),N=0;(D=T.next())!=null;){var O=R.get(f?S:l,D),F=R.get(u,D),L=y,B=void 0;f&&(B=+O-R.get(l,D));var V=void 0,H=void 0,X=void 0,U=void 0;if(c){var te=a.dataToPoint([O,F]);if(f){var ee=a.dataToPoint([B,F]);L=ee[0]}V=L,H=te[1]+w,X=te[0]-L,U=x,Math.abs(X)<b&&(X=(X<0?-1:1)*b)}else{var te=a.dataToPoint([F,O]);if(f){var ee=a.dataToPoint([F,B]);L=ee[1]}V=te[0]+w,H=L,X=x,U=te[1]-L,Math.abs(U)<b&&(U=(U<=0?-1:1)*b)}_?($[N]=V,$[N+1]=H,$[N+2]=c?X:U,P&&(P[N]=c?C.x:V,P[N+1]=c?H:C.y,P[N+2]=M),I[D]=D):A.setItemLayout(D,{x:V,y:H,width:X,height:U}),N+=3}_&&A.setLayout({largePoints:$,largeDataIndices:I,largeBackgroundPoints:P,valueAxisHorizontal:c})}}}}}}function isOnCartesian(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function isInLargeMode(n){return n.pipelineContext&&n.pipelineContext.large}function getValueAxisStart(n,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var bisect=function(n,t,r,a){for(;r<a;){var o=r+a>>>1;n[o][1]<t?r=o+1:a=o}return r},TimeScale=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="time",a}return t.prototype.getLabel=function(r){var a=this.getSetting("useUTC");return format(r.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,a,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,a,o){var s=this.getSetting("useUTC"),l=this.getSetting("locale");return leveledFormat(r,a,o,l,s)},t.prototype.getTicks=function(){var r=this._interval,a=this._extent,o=[];if(!r)return o;o.push({value:a[0],level:0});var s=this.getSetting("useUTC"),l=getIntervalTicks(this._minLevelUnit,this._approxInterval,s,a);return o=o.concat(l),o.push({value:a[1],level:0}),o},t.prototype.calcNiceExtent=function(r){var a=this._extent;if(a[0]===a[1]&&(a[0]-=ONE_DAY,a[1]+=ONE_DAY),a[1]===-1/0&&a[0]===1/0){var o=new Date;a[1]=+new Date(o.getFullYear(),o.getMonth(),o.getDate()),a[0]=a[1]-ONE_DAY}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,a,o){r=r||10;var s=this._extent,l=s[1]-s[0];this._approxInterval=l/r,a!=null&&this._approxInterval<a&&(this._approxInterval=a),o!=null&&this._approxInterval>o&&(this._approxInterval=o);var u=scaleIntervals.length,d=Math.min(bisect(scaleIntervals,this._approxInterval,0,u),u-1);this._interval=scaleIntervals[d][1],this._minLevelUnit=scaleIntervals[Math.max(d-1,0)][0]},t.prototype.parse=function(r){return isNumber(r)?r:+parseDate(r)},t.prototype.contain=function(r){return contain$1(this.parse(r),this._extent)},t.prototype.normalize=function(r){return normalize$2(this.parse(r),this._extent)},t.prototype.scale=function(r){return scale(r,this._extent)},t.type="time",t}(IntervalScale$1),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(n,t,r,a){var o=parseDate(t),s=parseDate(r),l=function(_){return getUnitValue(o,_,a)===getUnitValue(s,_,a)},u=function(){return l("year")},d=function(){return u()&&l("month")},v=function(){return d()&&l("day")},g=function(){return v()&&l("hour")},f=function(){return g()&&l("minute")},c=function(){return f()&&l("second")},y=function(){return c()&&l("millisecond")};switch(n){case"year":return u();case"month":return d();case"day":return v();case"hour":return g();case"minute":return f();case"second":return c();case"millisecond":return y()}}function getDateInterval(n,t){return n/=ONE_DAY,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function getMonthInterval(n){var t=30*ONE_DAY;return n/=t,n>6?6:n>3?3:n>2?2:1}function getHourInterval(n){return n/=ONE_HOUR,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function getMinutesAndSecondsInterval(n,t){return n/=t?ONE_MINUTE:ONE_SECOND,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function getMillisecondsInterval(n){return nice(n,!0)}function getFirstTimestampOfUnit(n,t,r){var a=new Date(n);switch(getPrimaryTimeUnit(t)){case"year":case"month":a[monthSetterName(r)](0);case"day":a[dateSetterName(r)](1);case"hour":a[hoursSetterName(r)](0);case"minute":a[minutesSetterName(r)](0);case"second":a[secondsSetterName(r)](0),a[millisecondsSetterName(r)](0)}return a.getTime()}function getIntervalTicks(n,t,r,a){var o=1e4,s=timeUnits,l=0;function u(M,D,R,N,O,F,L){for(var B=new Date(D),V=D,H=B[N]();V<R&&V<=a[1];)L.push({value:V}),H+=M,B[O](H),V=B.getTime();L.push({value:V,notAdd:!0})}function d(M,D,R){var N=[],O=!D.length;if(!isUnitValueSame(getPrimaryTimeUnit(M),a[0],a[1],r)){O&&(D=[{value:getFirstTimestampOfUnit(new Date(a[0]),M,r)},{value:a[1]}]);for(var F=0;F<D.length-1;F++){var L=D[F].value,B=D[F+1].value;if(L!==B){var V=void 0,H=void 0,X=void 0,U=!1;switch(M){case"year":V=Math.max(1,Math.round(t/ONE_DAY/365)),H=fullYearGetterName(r),X=fullYearSetterName(r);break;case"half-year":case"quarter":case"month":V=getMonthInterval(t),H=monthGetterName(r),X=monthSetterName(r);break;case"week":case"half-week":case"day":V=getDateInterval(t),H=dateGetterName(r),X=dateSetterName(r),U=!0;break;case"half-day":case"quarter-day":case"hour":V=getHourInterval(t),H=hoursGetterName(r),X=hoursSetterName(r);break;case"minute":V=getMinutesAndSecondsInterval(t,!0),H=minutesGetterName(r),X=minutesSetterName(r);break;case"second":V=getMinutesAndSecondsInterval(t,!1),H=secondsGetterName(r),X=secondsSetterName(r);break;case"millisecond":V=getMillisecondsInterval(t),H=millisecondsGetterName(r),X=millisecondsSetterName(r);break}u(V,L,B,H,X,U,N),M==="year"&&R.length>1&&F===0&&R.unshift({value:R[0].value-V})}}for(var F=0;F<N.length;F++)R.push(N[F]);return N}}for(var v=[],g=[],f=0,c=0,y=0;y<s.length&&l++<o;++y){var _=getPrimaryTimeUnit(s[y]);if(isPrimaryTimeUnit(s[y])){d(s[y],v[v.length-1]||[],g);var b=s[y+1]?getPrimaryTimeUnit(s[y+1]):null;if(_!==b){if(g.length){c=f,g.sort(function(M,D){return M.value-D.value});for(var S=[],x=0;x<g.length;++x){var w=g[x].value;(x===0||g[x-1].value!==w)&&(S.push(g[x]),w>=a[0]&&w<=a[1]&&f++)}var T=(a[1]-a[0])/t;if(f>T*1.5&&c>T/1.5||(v.push(S),f>T||n===s[y]))break}g=[]}}}for(var A=filter(map$1(v,function(M){return filter(M,function(D){return D.value>=a[0]&&D.value<=a[1]&&!D.notAdd})}),function(M){return M.length>0}),E=[],$=A.length-1,y=0;y<A.length;++y)for(var P=A[y],I=0;I<P.length;++I)E.push({value:P[I].value,level:$-y});E.sort(function(M,D){return M.value-D.value});for(var C=[],y=0;y<E.length;++y)(y===0||E[y].value!==E[y-1].value)&&C.push(E[y]);return C}Scale$1.registerClass(TimeScale);const TimeScale$1=TimeScale;var scaleProto=Scale$1.prototype,intervalScaleProto=IntervalScale$1.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new IntervalScale$1,r._interval=0,r}return t.prototype.getTicks=function(r){var a=this._originalScale,o=this._extent,s=a.getExtent(),l=intervalScaleProto.getTicks.call(this,r);return map$1(l,function(u){var d=u.value,v=round$3(mathPow$1(this.base,d));return v=d===o[0]&&this._fixMin?fixRoundingError(v,s[0]):v,v=d===o[1]&&this._fixMax?fixRoundingError(v,s[1]):v,{value:v}},this)},t.prototype.setExtent=function(r,a){var o=mathLog$1(this.base);r=mathLog$1(Math.max(0,r))/o,a=mathLog$1(Math.max(0,a))/o,intervalScaleProto.setExtent.call(this,r,a)},t.prototype.getExtent=function(){var r=this.base,a=scaleProto.getExtent.call(this);a[0]=mathPow$1(r,a[0]),a[1]=mathPow$1(r,a[1]);var o=this._originalScale,s=o.getExtent();return this._fixMin&&(a[0]=fixRoundingError(a[0],s[0])),this._fixMax&&(a[1]=fixRoundingError(a[1],s[1])),a},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var a=this.base;r[0]=mathLog$1(r[0])/mathLog$1(a),r[1]=mathLog$1(r[1])/mathLog$1(a),scaleProto.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,a){this.unionExtent(r.getApproximateExtent(a))},t.prototype.calcNiceTicks=function(r){r=r||10;var a=this._extent,o=a[1]-a[0];if(!(o===1/0||o<=0)){var s=quantity(o),l=r/o*s;for(l<=.5&&(s*=10);!isNaN(s)&&Math.abs(s)<1&&Math.abs(s)>0;)s*=10;var u=[round$3(mathCeil$1(a[0]/s)*s),round$3(mathFloor$1(a[1]/s)*s)];this._interval=s,this._niceExtent=u}},t.prototype.calcNiceExtent=function(r){intervalScaleProto.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=mathLog$1(r)/mathLog$1(this.base),contain$1(r,this._extent)},t.prototype.normalize=function(r){return r=mathLog$1(r)/mathLog$1(this.base),normalize$2(r,this._extent)},t.prototype.scale=function(r){return r=scale(r,this._extent),mathPow$1(this.base,r)},t.type="log",t}(Scale$1),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(n,t){return roundingErrorFix(n,getPrecision(t))}Scale$1.registerClass(LogScale);const LogScale$1=LogScale;var ScaleRawExtentInfo=function(){function n(t,r,a){this._prepareParams(t,r,a)}return n.prototype._prepareParams=function(t,r,a){a[1]<a[0]&&(a=[NaN,NaN]),this._dataMin=a[0],this._dataMax=a[1];var o=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var s=this._modelMinRaw=r.get("min",!0);isFunction(s)?this._modelMinNum=parseAxisModelMinMax(t,s({min:a[0],max:a[1]})):s!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(t,s));var l=this._modelMaxRaw=r.get("max",!0);if(isFunction(l)?this._modelMaxNum=parseAxisModelMinMax(t,l({min:a[0],max:a[1]})):l!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(t,l)),o)this._axisDataLen=r.getCategories().length;else{var u=r.get("boundaryGap"),d=isArray$1(u)?u:[u||0,u||0];typeof d[0]=="boolean"||typeof d[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(d[0],1),parsePercent$1(d[1],1)]}},n.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,a=this._dataMax,o=this._axisDataLen,s=this._boundaryGapInner,l=t?null:a-r||Math.abs(r),u=this._modelMinRaw==="dataMin"?r:this._modelMinNum,d=this._modelMaxRaw==="dataMax"?a:this._modelMaxNum,v=u!=null,g=d!=null;u==null&&(u=t?o?0:NaN:r-s[0]*l),d==null&&(d=t?o?o-1:NaN:a+s[1]*l),(u==null||!isFinite(u))&&(u=NaN),(d==null||!isFinite(d))&&(d=NaN);var f=eqNaN(u)||eqNaN(d)||t&&!o;this._needCrossZero&&(u>0&&d>0&&!v&&(u=0),u<0&&d<0&&!g&&(d=0));var c=this._determinedMin,y=this._determinedMax;return c!=null&&(u=c,v=!0),y!=null&&(d=y,g=!0),{min:u,max:d,minFixed:v,maxFixed:g,isBlank:f}},n.prototype.modifyDataMinMax=function(t,r){this[DATA_MIN_MAX_ATTR[t]]=r},n.prototype.setDeterminedMinMax=function(t,r){var a=DETERMINED_MIN_MAX_ATTR[t];this[a]=r},n.prototype.freeze=function(){this.frozen=!0},n}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(n,t,r){var a=n.rawExtentInfo;return a||(a=new ScaleRawExtentInfo(n,t,r),n.rawExtentInfo=a,a)}function parseAxisModelMinMax(n,t){return t==null?null:eqNaN(t)?NaN:n.parse(t)}function getScaleExtent(n,t){var r=n.type,a=ensureScaleRawExtentInfo(n,t,n.getExtent()).calculate();n.setBlank(a.isBlank);var o=a.min,s=a.max,l=t.ecModel;if(l&&r==="time"){var u=prepareLayoutBarSeries("bar",l),d=!1;if(each$f(u,function(f){d=d||f.getBaseAxis()===t.axis}),d){var v=makeColumnLayout(u),g=adjustScaleForOverflow(o,s,t,v);o=g.min,s=g.max}}return{extent:[o,s],fixMin:a.minFixed,fixMax:a.maxFixed}}function adjustScaleForOverflow(n,t,r,a){var o=r.axis.getExtent(),s=o[1]-o[0],l=retrieveColumnLayout(a,r.axis);if(l===void 0)return{min:n,max:t};var u=1/0;each$f(l,function(y){u=Math.min(y.offset,u)});var d=-1/0;each$f(l,function(y){d=Math.max(y.offset+y.width,d)}),u=Math.abs(u),d=Math.abs(d);var v=u+d,g=t-n,f=1-(u+d)/s,c=g/f-g;return t+=c*(d/v),n-=c*(u/v),{min:n,max:t}}function niceScaleExtent(n,t){var r=t,a=getScaleExtent(n,r),o=a.extent,s=r.get("splitNumber");n instanceof LogScale$1&&(n.base=r.get("logBase"));var l=n.type,u=r.get("interval"),d=l==="interval"||l==="time";n.setExtent(o[0],o[1]),n.calcNiceExtent({splitNumber:s,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:d?r.get("minInterval"):null,maxInterval:d?r.get("maxInterval"):null}),u!=null&&n.setInterval&&n.setInterval(u)}function createScaleByModel$1(n,t){if(t=t||n.get("type"),t)switch(t){case"category":return new OrdinalScale$1({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale$1({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(Scale$1.getClass(t)||IntervalScale$1)}}function ifAxisCrossZero(n){var t=n.scale.getExtent(),r=t[0],a=t[1];return!(r>0&&a>0||r<0&&a<0)}function makeLabelFormatter(n){var t=n.getLabelModel().get("formatter"),r=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(a){return function(o,s){return n.scale.getFormattedLabel(o,s,a)}}(t):isString(t)?function(a){return function(o){var s=n.scale.getLabel(o),l=a.replace("{value}",s??"");return l}}(t):isFunction(t)?function(a){return function(o,s){return r!=null&&(s=o.value-r),a(getAxisRawValue(n,o),s,o.level!=null?{level:o.level}:null)}}(t):function(a){return n.scale.getLabel(a)}}function getAxisRawValue(n,t){return n.type==="category"?n.scale.getLabel(t):t.value}function estimateLabelUnionRect(n){var t=n.model,r=n.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var a,o,s=r.getExtent();r instanceof OrdinalScale$1?o=r.count():(a=r.getTicks(),o=a.length);var l=n.getLabelModel(),u=makeLabelFormatter(n),d,v=1;o>40&&(v=Math.ceil(o/40));for(var g=0;g<o;g+=v){var f=a?a[g]:{value:s[0]+g},c=u(f,g),y=l.getTextRect(c),_=rotateTextRect(y,l.get("rotate")||0);d?d.union(_):d=_}return d}}function rotateTextRect(n,t){var r=t*Math.PI/180,a=n.width,o=n.height,s=a*Math.abs(Math.cos(r))+Math.abs(o*Math.sin(r)),l=a*Math.abs(Math.sin(r))+Math.abs(o*Math.cos(r)),u=new BoundingRect$1(n.x,n.y,s,l);return u}function getOptionCategoryInterval(n){var t=n.get("interval");return t??"auto"}function shouldShowAllLabels(n){return n.type==="category"&&getOptionCategoryInterval(n.getLabelModel())===0}function getDataDimensionsOnAxis(n,t){var r={};return each$f(n.mapDimensionsAll(t),function(a){r[getStackedDimension(n,a)]=!0}),keys(r)}function unionAxisExtentFromData(n,t,r){t&&each$f(getDataDimensionsOnAxis(t,r),function(a){var o=t.getApproximateExtent(a);o[0]<n[0]&&(n[0]=o[0]),o[1]>n[1]&&(n[1]=o[1])})}var AxisModelCommonMixin=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},n.prototype.getCoordSysModel=function(){},n}(),EPSILON=1e-8;function isAroundEqual(n,t){return Math.abs(n-t)<EPSILON}function contain(n,t,r){var a=0,o=n[0];if(!o)return!1;for(var s=1;s<n.length;s++){var l=n[s];a+=windingLine(o[0],o[1],l[0],l[1],t,r),o=l}var u=n[0];return(!isAroundEqual(o[0],u[0])||!isAroundEqual(o[1],u[1]))&&(a+=windingLine(o[0],o[1],u[0],u[1],t,r)),a!==0}var TMP_TRANSFORM=[];function transformPoints(n,t){for(var r=0;r<n.length;r++)applyTransform$1(n[r],n[r],t)}function updateBBoxFromPoints(n,t,r,a){for(var o=0;o<n.length;o++){var s=n[o];a&&(s=a.project(s)),s&&isFinite(s[0])&&isFinite(s[1])&&(min$1(t,t,s),max$1(r,r,s))}}function centroid$1(n){for(var t=0,r=0,a=0,o=n.length,s=n[o-1][0],l=n[o-1][1],u=0;u<o;u++){var d=n[u][0],v=n[u][1],g=s*v-d*l;t+=g,r+=(s+d)*g,a+=(l+v)*g,s=d,l=v}return t?[r/t/3,a/t/3,t]:[n[0][0]||0,n[0][1]||0]}var Region=function(){function n(t){this.name=t}return n.prototype.setCenter=function(t){this._center=t},n.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},n}(),GeoJSONPolygonGeometry=function(){function n(t,r){this.type="polygon",this.exterior=t,this.interiors=r}return n}(),GeoJSONLineStringGeometry=function(){function n(t){this.type="linestring",this.points=t}return n}(),GeoJSONRegion=function(n){__extends$1(t,n);function t(r,a,o){var s=n.call(this,r)||this;return s.type="geoJSON",s.geometries=a,s._center=o&&[o[0],o[1]],s}return t.prototype.calcCenter=function(){for(var r=this.geometries,a,o=0,s=0;s<r.length;s++){var l=r[s],u=l.exterior,d=u&&u.length;d>o&&(a=l,o=d)}if(a)return centroid$1(a.exterior);var v=this.getBoundingRect();return[v.x+v.width/2,v.y+v.height/2]},t.prototype.getBoundingRect=function(r){var a=this._rect;if(a&&!r)return a;var o=[1/0,1/0],s=[-1/0,-1/0],l=this.geometries;return each$f(l,function(u){u.type==="polygon"?updateBBoxFromPoints(u.exterior,o,s,r):each$f(u.points,function(d){updateBBoxFromPoints(d,o,s,r)})}),isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])||(o[0]=o[1]=s[0]=s[1]=0),a=new BoundingRect$1(o[0],o[1],s[0]-o[0],s[1]-o[1]),r||(this._rect=a),a},t.prototype.contain=function(r){var a=this.getBoundingRect(),o=this.geometries;if(!a.contain(r[0],r[1]))return!1;e:for(var s=0,l=o.length;s<l;s++){var u=o[s];if(u.type==="polygon"){var d=u.exterior,v=u.interiors;if(contain(d,r[0],r[1])){for(var g=0;g<(v?v.length:0);g++)if(contain(v[g],r[0],r[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(r,a,o,s){var l=this.getBoundingRect(),u=l.width/l.height;o?s||(s=o/u):o=u*s;for(var d=new BoundingRect$1(r,a,o,s),v=l.calculateTransform(d),g=this.geometries,f=0;f<g.length;f++){var c=g[f];c.type==="polygon"?(transformPoints(c.exterior,v),each$f(c.interiors,function(y){transformPoints(y,v)})):each$f(c.points,function(y){transformPoints(y,v)})}l=this._rect,l.copy(d),this._center=[l.x+l.width/2,l.y+l.height/2]},t.prototype.cloneShallow=function(r){r==null&&(r=this.name);var a=new t(r,this.geometries,this._center);return a._rect=this._rect,a.transformTo=null,a},t}(Region),GeoSVGRegion=function(n){__extends$1(t,n);function t(r,a){var o=n.call(this,r)||this;return o.type="geoSVG",o._elOnlyForCalculate=a,o}return t.prototype.calcCenter=function(){for(var r=this._elOnlyForCalculate,a=r.getBoundingRect(),o=[a.x+a.width/2,a.y+a.height/2],s=identity(TMP_TRANSFORM),l=r;l&&!l.isGeoSVGGraphicRoot;)mul(s,l.getLocalTransform(),s),l=l.parent;return invert(s,s),applyTransform$1(o,o,s),o},t}(Region);function decode(n){if(!n.UTF8Encoding)return n;var t=n,r=t.UTF8Scale;r==null&&(r=1024);var a=t.features;return each$f(a,function(o){var s=o.geometry,l=s.encodeOffsets,u=s.coordinates;if(l)switch(s.type){case"LineString":s.coordinates=decodeRing(u,l,r);break;case"Polygon":decodeRings(u,l,r);break;case"MultiLineString":decodeRings(u,l,r);break;case"MultiPolygon":each$f(u,function(d,v){return decodeRings(d,l[v],r)})}}),t.UTF8Encoding=!1,t}function decodeRings(n,t,r){for(var a=0;a<n.length;a++)n[a]=decodeRing(n[a],t[a],r)}function decodeRing(n,t,r){for(var a=[],o=t[0],s=t[1],l=0;l<n.length;l+=2){var u=n.charCodeAt(l)-64,d=n.charCodeAt(l+1)-64;u=u>>1^-(u&1),d=d>>1^-(d&1),u+=o,d+=s,o=u,s=d,a.push([u/r,d/r])}return a}function parseGeoJSON(n,t){return n=decode(n),map$1(filter(n.features,function(r){return r.geometry&&r.properties&&r.geometry.coordinates.length>0}),function(r){var a=r.properties,o=r.geometry,s=[];switch(o.type){case"Polygon":var l=o.coordinates;s.push(new GeoJSONPolygonGeometry(l[0],l.slice(1)));break;case"MultiPolygon":each$f(o.coordinates,function(d){d[0]&&s.push(new GeoJSONPolygonGeometry(d[0],d.slice(1)))});break;case"LineString":s.push(new GeoJSONLineStringGeometry([o.coordinates]));break;case"MultiLineString":s.push(new GeoJSONLineStringGeometry(o.coordinates))}var u=new GeoJSONRegion(a[t||"name"],s,a.cp);return u.properties=a,u})}var inner$g=makeInner();function createAxisLabels(n){return n.type==="category"?makeCategoryLabels(n):makeRealNumberLabels(n)}function createAxisTicks(n,t){return n.type==="category"?makeCategoryTicks(n,t):{ticks:map$1(n.scale.getTicks(),function(r){return r.value})}}function makeCategoryLabels(n){var t=n.getLabelModel(),r=makeCategoryLabelsActually(n,t);return!t.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function makeCategoryLabelsActually(n,t){var r=getListCache(n,"labels"),a=getOptionCategoryInterval(t),o=listCacheGet(r,a);if(o)return o;var s,l;return isFunction(a)?s=makeLabelsByCustomizedCategoryInterval(n,a):(l=a==="auto"?makeAutoCategoryInterval(n):a,s=makeLabelsByNumericCategoryInterval(n,l)),listCacheSet(r,a,{labels:s,labelCategoryInterval:l})}function makeCategoryTicks(n,t){var r=getListCache(n,"ticks"),a=getOptionCategoryInterval(t),o=listCacheGet(r,a);if(o)return o;var s,l;if((!t.get("show")||n.scale.isBlank())&&(s=[]),isFunction(a))s=makeLabelsByCustomizedCategoryInterval(n,a,!0);else if(a==="auto"){var u=makeCategoryLabelsActually(n,n.getLabelModel());l=u.labelCategoryInterval,s=map$1(u.labels,function(d){return d.tickValue})}else l=a,s=makeLabelsByNumericCategoryInterval(n,l,!0);return listCacheSet(r,a,{ticks:s,tickCategoryInterval:l})}function makeRealNumberLabels(n){var t=n.scale.getTicks(),r=makeLabelFormatter(n);return{labels:map$1(t,function(a,o){return{level:a.level,formattedLabel:r(a,o),rawLabel:n.scale.getLabel(a),tickValue:a.value}})}}function getListCache(n,t){return inner$g(n)[t]||(inner$g(n)[t]=[])}function listCacheGet(n,t){for(var r=0;r<n.length;r++)if(n[r].key===t)return n[r].value}function listCacheSet(n,t,r){return n.push({key:t,value:r}),r}function makeAutoCategoryInterval(n){var t=inner$g(n).autoInterval;return t??(inner$g(n).autoInterval=n.calculateCategoryInterval())}function calculateCategoryInterval(n){var t=fetchAutoCategoryIntervalCalculationParams(n),r=makeLabelFormatter(n),a=(t.axisRotate-t.labelRotate)/180*Math.PI,o=n.scale,s=o.getExtent(),l=o.count();if(s[1]-s[0]<1)return 0;var u=1;l>40&&(u=Math.max(1,Math.floor(l/40)));for(var d=s[0],v=n.dataToCoord(d+1)-n.dataToCoord(d),g=Math.abs(v*Math.cos(a)),f=Math.abs(v*Math.sin(a)),c=0,y=0;d<=s[1];d+=u){var _=0,b=0,S=getBoundingRect(r({value:d}),t.font,"center","top");_=S.width*1.3,b=S.height*1.3,c=Math.max(c,_,7),y=Math.max(y,b,7)}var x=c/g,w=y/f;isNaN(x)&&(x=1/0),isNaN(w)&&(w=1/0);var T=Math.max(0,Math.floor(Math.min(x,w))),A=inner$g(n.model),E=n.getExtent(),$=A.lastAutoInterval,P=A.lastTickCount;return $!=null&&P!=null&&Math.abs($-T)<=1&&Math.abs(P-l)<=1&&$>T&&A.axisExtent0===E[0]&&A.axisExtent1===E[1]?T=$:(A.lastTickCount=l,A.lastAutoInterval=T,A.axisExtent0=E[0],A.axisExtent1=E[1]),T}function fetchAutoCategoryIntervalCalculationParams(n){var t=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function makeLabelsByNumericCategoryInterval(n,t,r){var a=makeLabelFormatter(n),o=n.scale,s=o.getExtent(),l=n.getLabelModel(),u=[],d=Math.max((t||0)+1,1),v=s[0],g=o.count();v!==0&&d>1&&g/d>2&&(v=Math.round(Math.ceil(v/d)*d));var f=shouldShowAllLabels(n),c=l.get("showMinLabel")||f,y=l.get("showMaxLabel")||f;c&&v!==s[0]&&b(s[0]);for(var _=v;_<=s[1];_+=d)b(_);y&&_-d!==s[1]&&b(s[1]);function b(S){var x={value:S};u.push(r?S:{formattedLabel:a(x),rawLabel:o.getLabel(x),tickValue:S})}return u}function makeLabelsByCustomizedCategoryInterval(n,t,r){var a=n.scale,o=makeLabelFormatter(n),s=[];return each$f(a.getTicks(),function(l){var u=a.getLabel(l),d=l.value;t(l.value,u)&&s.push(r?d:{formattedLabel:o(l),rawLabel:u,tickValue:d})}),s}var NORMALIZED_EXTENT=[0,1],Axis=function(){function n(t,r,a){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=a||[0,0]}return n.prototype.contain=function(t){var r=this._extent,a=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return t>=a&&t<=o},n.prototype.containData=function(t){return this.scale.contain(t)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(t){return getPixelPrecision(t||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(t,r){var a=this._extent;a[0]=t,a[1]=r},n.prototype.dataToCoord=function(t,r){var a=this._extent,o=this.scale;return t=o.normalize(t),this.onBand&&o.type==="ordinal"&&(a=a.slice(),fixExtentWithBands(a,o.count())),linearMap$2(t,NORMALIZED_EXTENT,a,r)},n.prototype.coordToData=function(t,r){var a=this._extent,o=this.scale;this.onBand&&o.type==="ordinal"&&(a=a.slice(),fixExtentWithBands(a,o.count()));var s=linearMap$2(t,a,NORMALIZED_EXTENT,r);return this.scale.scale(s)},n.prototype.pointToData=function(t,r){},n.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),a=createAxisTicks(this,r),o=a.ticks,s=map$1(o,function(u){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(u):u),tickValue:u}},this),l=r.get("alignWithLabel");return fixOnBandTicksCoords(this,s,l,t.clamp),s},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var a=this.scale.getMinorTicks(r),o=map$1(a,function(s){return map$1(s,function(l){return{coord:this.dataToCoord(l),tickValue:l}},this)},this);return o},n.prototype.getViewLabels=function(){return createAxisLabels(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),a=r[1]-r[0]+(this.onBand?1:0);a===0&&(a=1);var o=Math.abs(t[1]-t[0]);return Math.abs(o)/a},n.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},n}();function fixExtentWithBands(n,t){var r=n[1]-n[0],a=t,o=r/a/2;n[0]+=o,n[1]-=o}function fixOnBandTicksCoords(n,t,r,a){var o=t.length;if(!n.onBand||r||!o)return;var s=n.getExtent(),l,u;if(o===1)t[0].coord=s[0],l=t[1]={coord:s[0]};else{var d=t[o-1].tickValue-t[0].tickValue,v=(t[o-1].coord-t[0].coord)/d;each$f(t,function(y){y.coord-=v/2});var g=n.scale.getExtent();u=1+g[1]-t[o-1].tickValue,l={coord:t[o-1].coord+v*u},t.push(l)}var f=s[0]>s[1];c(t[0].coord,s[0])&&(a?t[0].coord=s[0]:t.shift()),a&&c(s[0],t[0].coord)&&t.unshift({coord:s[0]}),c(s[1],l.coord)&&(a?l.coord=s[1]:t.pop()),a&&c(l.coord,s[1])&&t.push({coord:s[1]});function c(y,_){return y=round$3(y),_=round$3(_),f?y>_:y<_}}const Axis$1=Axis;var PI2$2=Math.PI*2,CMD$1=PathProxy$1.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(n,t,r,a,o){var s=r.width,l=r.height;switch(n){case"top":a.set(r.x+s/2,r.y-t),o.set(0,-1);break;case"bottom":a.set(r.x+s/2,r.y+l+t),o.set(0,1);break;case"left":a.set(r.x-t,r.y+l/2),o.set(-1,0);break;case"right":a.set(r.x+s+t,r.y+l/2),o.set(1,0);break}}function projectPointToArc(n,t,r,a,o,s,l,u,d){l-=n,u-=t;var v=Math.sqrt(l*l+u*u);l/=v,u/=v;var g=l*r+n,f=u*r+t;if(Math.abs(a-o)%PI2$2<1e-4)return d[0]=g,d[1]=f,v-r;if(s){var c=a;a=normalizeRadian(o),o=normalizeRadian(c)}else a=normalizeRadian(a),o=normalizeRadian(o);a>o&&(o+=PI2$2);var y=Math.atan2(u,l);if(y<0&&(y+=PI2$2),y>=a&&y<=o||y+PI2$2>=a&&y+PI2$2<=o)return d[0]=g,d[1]=f,v-r;var _=r*Math.cos(a)+n,b=r*Math.sin(a)+t,S=r*Math.cos(o)+n,x=r*Math.sin(o)+t,w=(_-l)*(_-l)+(b-u)*(b-u),T=(S-l)*(S-l)+(x-u)*(x-u);return w<T?(d[0]=_,d[1]=b,Math.sqrt(w)):(d[0]=S,d[1]=x,Math.sqrt(T))}function projectPointToLine(n,t,r,a,o,s,l,u){var d=o-n,v=s-t,g=r-n,f=a-t,c=Math.sqrt(g*g+f*f);g/=c,f/=c;var y=d*g+v*f,_=y/c;u&&(_=Math.min(Math.max(_,0),1)),_*=c;var b=l[0]=n+_*g,S=l[1]=t+_*f;return Math.sqrt((b-o)*(b-o)+(S-s)*(S-s))}function projectPointToRect(n,t,r,a,o,s,l){r<0&&(n=n+r,r=-r),a<0&&(t=t+a,a=-a);var u=n+r,d=t+a,v=l[0]=Math.min(Math.max(o,n),u),g=l[1]=Math.min(Math.max(s,t),d);return Math.sqrt((v-o)*(v-o)+(g-s)*(g-s))}var tmpPt=[];function nearestPointOnRect(n,t,r){var a=projectPointToRect(t.x,t.y,t.width,t.height,n.x,n.y,tmpPt);return r.set(tmpPt[0],tmpPt[1]),a}function nearestPointOnPath(n,t,r){for(var a=0,o=0,s=0,l=0,u,d,v=1/0,g=t.data,f=n.x,c=n.y,y=0;y<g.length;){var _=g[y++];y===1&&(a=g[y],o=g[y+1],s=a,l=o);var b=v;switch(_){case CMD$1.M:s=g[y++],l=g[y++],a=s,o=l;break;case CMD$1.L:b=projectPointToLine(a,o,g[y],g[y+1],f,c,tmpPt,!0),a=g[y++],o=g[y++];break;case CMD$1.C:b=cubicProjectPoint(a,o,g[y++],g[y++],g[y++],g[y++],g[y],g[y+1],f,c,tmpPt),a=g[y++],o=g[y++];break;case CMD$1.Q:b=quadraticProjectPoint(a,o,g[y++],g[y++],g[y],g[y+1],f,c,tmpPt),a=g[y++],o=g[y++];break;case CMD$1.A:var S=g[y++],x=g[y++],w=g[y++],T=g[y++],A=g[y++],E=g[y++];y+=1;var $=!!(1-g[y++]);u=Math.cos(A)*w+S,d=Math.sin(A)*T+x,y<=1&&(s=u,l=d);var P=(f-S)*T/w+S;b=projectPointToArc(S,x,T,A,A+E,$,P,c,tmpPt),a=Math.cos(A+E)*w+S,o=Math.sin(A+E)*T+x;break;case CMD$1.R:s=a=g[y++],l=o=g[y++];var I=g[y++],C=g[y++];b=projectPointToRect(s,l,I,C,f,c,tmpPt);break;case CMD$1.Z:b=projectPointToLine(a,o,s,l,f,c,tmpPt,!0),a=s,o=l;break}b<v&&(v=b,r.set(tmpPt[0],tmpPt[1]))}return v}var pt0=new Point$1,pt1=new Point$1,pt2=new Point$1,dir=new Point$1,dir2=new Point$1;function updateLabelLinePoints(n,t){if(n){var r=n.getTextGuideLine(),a=n.getTextContent();if(a&&r){var o=n.textGuideLineConfig||{},s=[[0,0],[0,0],[0,0]],l=o.candidates||DEFAULT_SEARCH_SPACE,u=a.getBoundingRect().clone();u.applyTransform(a.getComputedTransform());var d=1/0,v=o.anchor,g=n.getComputedTransform(),f=g&&invert([],g),c=t.get("length2")||0;v&&pt2.copy(v);for(var y=0;y<l.length;y++){var _=l[y];getCandidateAnchor(_,0,u,pt0,dir),Point$1.scaleAndAdd(pt1,pt0,dir,c),pt1.transform(f);var b=n.getBoundingRect(),S=v?v.distance(pt1):n instanceof Path$1?nearestPointOnPath(pt1,n.path,pt2):nearestPointOnRect(pt1,b,pt2);S<d&&(d=S,pt1.transform(g),pt2.transform(g),pt2.toArray(s[0]),pt1.toArray(s[1]),pt0.toArray(s[2]))}limitTurnAngle(s,t.get("minTurnAngle")),r.setShape({points:s})}}}var tmpArr=[],tmpProjPoint=new Point$1;function limitTurnAngle(n,t){if(t<=180&&t>0){t=t/180*Math.PI,pt0.fromArray(n[0]),pt1.fromArray(n[1]),pt2.fromArray(n[2]),Point$1.sub(dir,pt0,pt1),Point$1.sub(dir2,pt2,pt1);var r=dir.len(),a=dir2.len();if(!(r<.001||a<.001)){dir.scale(1/r),dir2.scale(1/a);var o=dir.dot(dir2),s=Math.cos(t);if(s<o){var l=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,l/Math.tan(Math.PI-t));var u=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(u))return;u<0?Point$1.copy(tmpProjPoint,pt1):u>1&&Point$1.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(n[1])}}}}function limitSurfaceAngle(n,t,r){if(r<=180&&r>0){r=r/180*Math.PI,pt0.fromArray(n[0]),pt1.fromArray(n[1]),pt2.fromArray(n[2]),Point$1.sub(dir,pt1,pt0),Point$1.sub(dir2,pt2,pt1);var a=dir.len(),o=dir2.len();if(!(a<.001||o<.001)){dir.scale(1/a),dir2.scale(1/o);var s=dir.dot(t),l=Math.cos(r);if(s<l){var u=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var d=Math.PI/2,v=Math.acos(dir2.dot(t)),g=d+v-r;if(g>=d)Point$1.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,u/Math.tan(Math.PI/2-g));var f=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(f))return;f<0?Point$1.copy(tmpProjPoint,pt1):f>1&&Point$1.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(n[1])}}}}function setLabelLineState(n,t,r,a){var o=r==="normal",s=o?n:n.ensureState(r);s.ignore=t;var l=a.get("smooth");l&&l===!0&&(l=.3),s.shape=s.shape||{},l>0&&(s.shape.smooth=l);var u=a.getModel("lineStyle").getLineStyle();o?n.useStyle(u):s.style=u}function buildLabelLinePath(n,t){var r=t.smooth,a=t.points;if(a)if(n.moveTo(a[0][0],a[0][1]),r>0&&a.length>=3){var o=dist$1(a[0],a[1]),s=dist$1(a[1],a[2]);if(!o||!s){n.lineTo(a[1][0],a[1][1]),n.lineTo(a[2][0],a[2][1]);return}var l=Math.min(o,s)*r,u=lerp$1([],a[1],a[0],l/o),d=lerp$1([],a[1],a[2],l/s),v=lerp$1([],u,d,.5);n.bezierCurveTo(u[0],u[1],u[0],u[1],v[0],v[1]),n.bezierCurveTo(d[0],d[1],d[0],d[1],a[2][0],a[2][1])}else for(var g=1;g<a.length;g++)n.lineTo(a[g][0],a[g][1])}function setLabelLineStyle(n,t,r){var a=n.getTextGuideLine(),o=n.getTextContent();if(!o){a&&n.removeTextGuideLine();return}for(var s=t.normal,l=s.get("show"),u=o.ignore,d=0;d<DISPLAY_STATES.length;d++){var v=DISPLAY_STATES[d],g=t[v],f=v==="normal";if(g){var c=g.get("show"),y=f?u:retrieve2(o.states[v]&&o.states[v].ignore,u);if(y||!retrieve2(c,l)){var _=f?a:a&&a.states[v];_&&(_.ignore=!0);continue}a||(a=new Polyline$3,n.setTextGuideLine(a),!f&&(u||!l)&&setLabelLineState(a,!0,"normal",t.normal),n.stateProxy&&(a.stateProxy=n.stateProxy)),setLabelLineState(a,!1,v,g)}}if(a){defaults(a.style,r),a.style.fill=null;var b=s.get("showAbove"),S=n.textGuideLineConfig=n.textGuideLineConfig||{};S.showAbove=b||!1,a.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(n,t){t=t||"labelLine";for(var r={normal:n.getModel(t)},a=0;a<SPECIAL_STATES.length;a++){var o=SPECIAL_STATES[a];r[o]=n.getModel([o,t])}return r}function prepareLayoutList(n){for(var t=[],r=0;r<n.length;r++){var a=n[r];if(!a.defaultAttr.ignore){var o=a.label,s=o.getComputedTransform(),l=o.getBoundingRect(),u=!s||s[1]<1e-5&&s[2]<1e-5,d=o.style.margin||0,v=l.clone();v.applyTransform(s),v.x-=d/2,v.y-=d/2,v.width+=d,v.height+=d;var g=u?new OrientedBoundingRect$1(l,s):null;t.push({label:o,labelLine:a.labelLine,rect:v,localRect:l,obb:g,priority:a.priority,defaultAttr:a.defaultAttr,layoutOption:a.computedLayoutOption,axisAligned:u,transform:s})}}return t}function shiftLayout(n,t,r,a,o,s){var l=n.length;if(l<2)return;n.sort(function(I,C){return I.rect[t]-C.rect[t]});for(var u=0,d,v=!1,g=0,f=0;f<l;f++){var c=n[f],y=c.rect;d=y[t]-u,d<0&&(y[t]-=d,c.label[t]-=d,v=!0);var _=Math.max(-d,0);g+=_,u=y[t]+y[r]}g>0&&s&&E(-g/l,0,l);var b=n[0],S=n[l-1],x,w;T(),x<0&&$(-x,.8),w<0&&$(w,.8),T(),A(x,w,1),A(w,x,-1),T(),x<0&&P(-x),w<0&&P(w);function T(){x=b.rect[t]-a,w=o-S.rect[t]-S.rect[r]}function A(I,C,M){if(I<0){var D=Math.min(C,-I);if(D>0){E(D*M,0,l);var R=D+I;R<0&&$(-R*M,1)}else $(-I*M,1)}}function E(I,C,M){I!==0&&(v=!0);for(var D=C;D<M;D++){var R=n[D],N=R.rect;N[t]+=I,R.label[t]+=I}}function $(I,C){for(var M=[],D=0,R=1;R<l;R++){var N=n[R-1].rect,O=Math.max(n[R].rect[t]-N[t]-N[r],0);M.push(O),D+=O}if(D){var F=Math.min(Math.abs(I)/D,C);if(I>0)for(var R=0;R<l-1;R++){var L=M[R]*F;E(L,0,R+1)}else for(var R=l-1;R>0;R--){var L=M[R-1]*F;E(-L,R,l)}}}function P(I){var C=I<0?-1:1;I=Math.abs(I);for(var M=Math.ceil(I/(l-1)),D=0;D<l-1;D++)if(C>0?E(M,0,D+1):E(-M,l-D-1,l),I-=M,I<=0)return}return v}function shiftLayoutOnX(n,t,r,a){return shiftLayout(n,"x","width",t,r,a)}function shiftLayoutOnY(n,t,r,a){return shiftLayout(n,"y","height",t,r,a)}function hideOverlap(n){var t=[];n.sort(function(b,S){return S.priority-b.priority});var r=new BoundingRect$1(0,0,0,0);function a(b){if(!b.ignore){var S=b.ensureState("emphasis");S.ignore==null&&(S.ignore=!1)}b.ignore=!0}for(var o=0;o<n.length;o++){var s=n[o],l=s.axisAligned,u=s.localRect,d=s.transform,v=s.label,g=s.labelLine;r.copy(s.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=s.obb,c=!1,y=0;y<t.length;y++){var _=t[y];if(r.intersect(_.rect)){if(l&&_.axisAligned){c=!0;break}if(_.obb||(_.obb=new OrientedBoundingRect$1(_.localRect,_.transform)),f||(f=new OrientedBoundingRect$1(u,d)),f.intersect(_.obb)){c=!0;break}}}c?(a(v),g&&a(g)):(v.attr("ignore",s.defaultAttr.ignore),g&&g.attr("ignore",s.defaultAttr.labelGuideIgnore),t.push(s))}}function cloneArr(n){if(n){for(var t=[],r=0;r<n.length;r++)t.push(n[r].slice());return t}}function prepareLayoutCallbackParams(n,t){var r=n.label,a=t&&t.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:cloneArr(a&&a.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable$1,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(n,t,r){for(var a=0;a<r.length;a++){var o=r[a];t[o]!=null&&(n[o]=t[o])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(t,r,a,o,s){var l=o.style,u=o.__hostTarget,d=u.textConfig||{},v=o.getComputedTransform(),g=o.getBoundingRect().plain();BoundingRect$1.applyTransform(g,g,v),v?dummyTransformable.setLocalTransform(v):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1);var f=o.__hostTarget,c;if(f){c=f.getBoundingRect().plain();var y=f.getComputedTransform();BoundingRect$1.applyTransform(c,c,y)}var _=c&&f.getTextGuideLine();this._labelList.push({label:o,labelLine:_,seriesModel:a,dataIndex:t,dataType:r,layoutOption:s,computedLayoutOption:null,rect:g,hostRect:c,priority:c?c.width*c.height:0,defaultAttr:{ignore:o.ignore,labelGuideIgnore:_&&_.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:l.x,y:l.y,align:l.align,verticalAlign:l.verticalAlign,width:l.width,height:l.height,fontSize:l.fontSize},cursor:o.cursor,attachedPos:d.position,attachedRot:d.rotation}})},n.prototype.addLabelsOfSeries=function(t){var r=this;this._chartViewList.push(t);var a=t.__model,o=a.get("labelLayout");(isFunction(o)||keys(o).length)&&t.group.traverse(function(s){if(s.ignore)return!0;var l=s.getTextContent(),u=getECData(s);l&&!l.disableLabelLayout&&r._addLabel(u.dataIndex,u.dataType,a,l,o)})},n.prototype.updateLayoutConfig=function(t){var r=t.getWidth(),a=t.getHeight();function o(T,A){return function(){updateLabelLinePoints(T,A)}}for(var s=0;s<this._labelList.length;s++){var l=this._labelList[s],u=l.label,d=u.__hostTarget,v=l.defaultAttr,g=void 0;isFunction(l.layoutOption)?g=l.layoutOption(prepareLayoutCallbackParams(l,d)):g=l.layoutOption,g=g||{},l.computedLayoutOption=g;var f=Math.PI/180;d&&d.setTextConfig({local:!1,position:g.x!=null||g.y!=null?null:v.attachedPos,rotation:g.rotate!=null?g.rotate*f:v.attachedRot,offset:[g.dx||0,g.dy||0]});var c=!1;if(g.x!=null?(u.x=parsePercent(g.x,r),u.setStyle("x",0),c=!0):(u.x=v.x,u.setStyle("x",v.style.x)),g.y!=null?(u.y=parsePercent(g.y,a),u.setStyle("y",0),c=!0):(u.y=v.y,u.setStyle("y",v.style.y)),g.labelLinePoints){var y=d.getTextGuideLine();y&&(y.setShape({points:g.labelLinePoints}),c=!1)}var _=labelLayoutInnerStore(u);_.needsUpdateLabelLine=c,u.rotation=g.rotate!=null?g.rotate*f:v.rotation,u.scaleX=v.scaleX,u.scaleY=v.scaleY;for(var b=0;b<LABEL_OPTION_TO_STYLE_KEYS.length;b++){var S=LABEL_OPTION_TO_STYLE_KEYS[b];u.setStyle(S,g[S]!=null?g[S]:v.style[S])}if(g.draggable){if(u.draggable=!0,u.cursor="move",d){var x=l.seriesModel;if(l.dataIndex!=null){var w=l.seriesModel.getData(l.dataType);x=w.getItemModel(l.dataIndex)}u.on("drag",o(d,x.getModel("labelLine")))}}else u.off("drag"),u.cursor=v.cursor}},n.prototype.layout=function(t){var r=t.getWidth(),a=t.getHeight(),o=prepareLayoutList(this._labelList),s=filter(o,function(d){return d.layoutOption.moveOverlap==="shiftX"}),l=filter(o,function(d){return d.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(s,0,r),shiftLayoutOnY(l,0,a);var u=filter(o,function(d){return d.layoutOption.hideOverlap});hideOverlap(u)},n.prototype.processLabelsOverall=function(){var t=this;each$f(this._chartViewList,function(r){var a=r.__model,o=r.ignoreLabelLineUpdate,s=a.isAnimationEnabled();r.group.traverse(function(l){if(l.ignore&&!l.forceLabelAnimation)return!0;var u=!o,d=l.getTextContent();!u&&d&&(u=labelLayoutInnerStore(d).needsUpdateLabelLine),u&&t._updateLabelLine(l,a),s&&t._animateLabels(l,a)})})},n.prototype._updateLabelLine=function(t,r){var a=t.getTextContent(),o=getECData(t),s=o.dataIndex;if(a&&s!=null){var l=r.getData(o.dataType),u=l.getItemModel(s),d={},v=l.getItemVisual(s,"style"),g=l.getVisual("drawType");d.stroke=v[g];var f=u.getModel("labelLine");setLabelLineStyle(t,getLabelLineStatesModels(u),d),updateLabelLinePoints(t,f)}},n.prototype._animateLabels=function(t,r){var a=t.getTextContent(),o=t.getTextGuideLine();if(a&&(t.forceLabelAnimation||!a.ignore&&!a.invisible&&!t.disableLabelAnimation&&!isElementRemoved(t))){var s=labelLayoutInnerStore(a),l=s.oldLayout,u=getECData(t),d=u.dataIndex,v={x:a.x,y:a.y,rotation:a.rotation},g=r.getData(u.dataType);if(l){a.attr(l);var c=t.prevStates;c&&(indexOf(c,"select")>=0&&a.attr(s.oldLayoutSelect),indexOf(c,"emphasis")>=0&&a.attr(s.oldLayoutEmphasis)),updateProps$1(a,v,r,d)}else if(a.attr(v),!labelInner(a).valueAnimation){var f=retrieve2(a.style.opacity,1);a.style.opacity=0,initProps(a,{style:{opacity:f}},r,d)}if(s.oldLayout=v,a.states.select){var y=s.oldLayoutSelect={};extendWithKeys(y,v,LABEL_LAYOUT_PROPS),extendWithKeys(y,a.states.select,LABEL_LAYOUT_PROPS)}if(a.states.emphasis){var _=s.oldLayoutEmphasis={};extendWithKeys(_,v,LABEL_LAYOUT_PROPS),extendWithKeys(_,a.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(a,d,g,r,r)}if(o&&!o.ignore&&!o.invisible){var s=labelLineAnimationStore(o),l=s.oldLayout,b={points:o.shape.points};l?(o.attr({shape:l}),updateProps$1(o,{shape:b},r)):(o.setShape(b),o.style.strokePercent=0,initProps(o,{style:{strokePercent:1}},r)),s.oldLayout=b}},n}();const LabelManager$1=LabelManager;var getLabelManager=makeInner();function installLabelLayout(n){n.registerUpdateLifecycle("series:beforeupdate",function(t,r,a){var o=getLabelManager(r).labelManager;o||(o=getLabelManager(r).labelManager=new LabelManager$1),o.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(t,r,a){var o=getLabelManager(r).labelManager;a.updatedSeries.forEach(function(s){o.addLabelsOfSeries(r.getViewOfSeriesModel(s))}),o.updateLayoutConfig(r),o.layout(r),o.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function n(){}return n.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},n.prototype.moveTo=function(t,r){this._add("M",t,r)},n.prototype.lineTo=function(t,r){this._add("L",t,r)},n.prototype.bezierCurveTo=function(t,r,a,o,s,l){this._add("C",t,r,a,o,s,l)},n.prototype.quadraticCurveTo=function(t,r,a,o){this._add("Q",t,r,a,o)},n.prototype.arc=function(t,r,a,o,s,l){this.ellipse(t,r,a,a,0,o,s,l)},n.prototype.ellipse=function(t,r,a,o,s,l,u,d){var v=u-l,g=!d,f=Math.abs(v),c=isAroundZero(f-PI2$1)||(g?v>=PI2$1:-v>=PI2$1),y=v>0?v%PI2$1:v%PI2$1+PI2$1,_=!1;c?_=!0:isAroundZero(f)?_=!1:_=y>=PI$4==!!g;var b=t+a*mathCos(l),S=r+o*mathSin(l);this._start&&this._add("M",b,S);var x=Math.round(s*degree);if(c){var w=1/this._p,T=(g?1:-1)*(PI2$1-w);this._add("A",a,o,x,1,+g,t+a*mathCos(l+T),r+o*mathSin(l+T)),w>.01&&this._add("A",a,o,x,0,+g,b,S)}else{var A=t+a*mathCos(u),E=r+o*mathSin(u);this._add("A",a,o,x,+_,+g,A,E)}},n.prototype.rect=function(t,r,a,o){this._add("M",t,r),this._add("l",a,0),this._add("l",0,o),this._add("l",-a,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(t,r,a,o,s,l,u,d,v){for(var g=[],f=this._p,c=1;c<arguments.length;c++){var y=arguments[c];if(isNaN(y)){this._invalid=!0;return}g.push(Math.round(y*f)/f)}this._d.push(t+g.join(" ")),this._start=t==="Z"},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n}();const SVGPathRebuilder$1=SVGPathRebuilder;var NONE="none",mathRound=Math.round;function pathHasFill(n){var t=n.fill;return t!=null&&t!==NONE}function pathHasStroke(n){var t=n.stroke;return t!=null&&t!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(n){return"stroke-"+n.toLowerCase()});function mapStyleToAttrs(n,t,r,a){var o=t.opacity==null?1:t.opacity;if(r instanceof ZRImage$1){n("opacity",o);return}if(pathHasFill(t)){var s=normalizeColor(t.fill);n("fill",s.color);var l=t.fillOpacity!=null?t.fillOpacity*s.opacity*o:s.opacity*o;(a||l<1)&&n("fill-opacity",l)}else n("fill",NONE);if(pathHasStroke(t)){var u=normalizeColor(t.stroke);n("stroke",u.color);var d=t.strokeNoScale?r.getLineScale():1,v=d?(t.lineWidth||0)/d:0,g=t.strokeOpacity!=null?t.strokeOpacity*u.opacity*o:u.opacity*o,f=t.strokeFirst;if((a||v!==1)&&n("stroke-width",v),(a||f)&&n("paint-order",f?"stroke":"fill"),(a||g<1)&&n("stroke-opacity",g),t.lineDash){var c=getLineDash(r),y=c[0],_=c[1];y&&(_=mathRound(_||0),n("stroke-dasharray",y.join(",")),(_||a)&&n("stroke-dashoffset",_))}else a&&n("stroke-dasharray",NONE);for(var b=0;b<strokeProps.length;b++){var S=strokeProps[b];if(a||t[S]!==DEFAULT_PATH_STYLE[S]){var x=t[S]||DEFAULT_PATH_STYLE[S];x&&n(svgStrokeProps[b],x)}}}else a&&n("stroke",NONE)}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace";function createElement(n){return document.createElementNS(SVGNS,n)}function createVNode(n,t,r,a,o){return{tag:n,attrs:r||{},children:a,text:o,key:t}}function createElementOpen(n,t){var r=[];if(t)for(var a in t){var o=t[a],s=a;o!==!1&&(o!==!0&&o!=null&&(s+='="'+o+'"'),r.push(s))}return"<"+n+" "+r.join(" ")+">"}function createElementClose(n){return"</"+n+">"}function vNodeToString(n,t){t=t||{};var r=t.newline?`
`:"";function a(o){var s=o.children,l=o.tag,u=o.attrs,d=o.text;return createElementOpen(l,u)+(l!=="style"?encodeHTML(d):d||"")+(s?""+r+map$1(s,function(v){return a(v)}).join(r)+r:"")+createElementClose(l)}return a(n)}function getCssString(n,t,r){r=r||{};var a=r.newline?`
`:"",o=" {"+a,s=a+"}",l=map$1(keys(n),function(d){return d+o+map$1(keys(n[d]),function(v){return v+":"+n[d][v]+";"}).join(a)+s}).join(a),u=map$1(keys(t),function(d){return"@keyframes "+d+o+map$1(keys(t[d]),function(v){return v+o+map$1(keys(t[d][v]),function(g){var f=t[d][v][g];return g==="d"&&(f='path("'+f+'")'),g+":"+f+";"}).join(a)+s}).join(a)+s}).join(a);return!l&&!u?"":["<![CDATA[",l,u,"]]>"].join(a)}function createBrushScope(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(n,t,r,a){return createVNode("svg","root",{width:n,height:t,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:a?"0 0 "+n+" "+t:!1},r)}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(n,t,r){var a=extend({},n.shape);extend(a,t),n.buildPath(r,a);var o=new SVGPathRebuilder$1;return o.reset(getPathPrecision(n)),r.rebuildPath(o,1),o.generateStr(),o.getStr()}function setTransformOrigin(n,t){var r=t.originX,a=t.originY;(r||a)&&(n[transformOriginKey]=r+"px "+a+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(n,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=n,r}function createCompoundPathCSSAnimation(n,t,r){var a=n.shape.paths,o={},s,l;if(each$f(a,function(d){var v=createBrushScope(r.zrId);v.animation=!0,createCSSAnimation(d,{},v,!0);var g=v.cssAnims,f=v.cssNodes,c=keys(g),y=c.length;if(y){l=c[y-1];var _=g[l];for(var b in _){var S=_[b];o[b]=o[b]||{d:""},o[b].d+=S.d||""}for(var x in f){var w=f[x].animation;w.indexOf(l)>=0&&(s=w)}}}),!!s){t.d=!1;var u=addAnimation(o,r);return s.replace(l,u)}}function getEasingFunc(n){return isString(n)?EASING_MAP[n]?"cubic-bezier("+EASING_MAP[n]+")":createCubicEasingFunc(n)?n:"":""}function createCSSAnimation(n,t,r,a){var o=n.animators,s=o.length,l=[];if(n instanceof CompoundPath$1){var u=createCompoundPathCSSAnimation(n,t,r);if(u)l.push(u);else if(!s)return}else if(!s)return;for(var d={},v=0;v<s;v++){var g=o[v],f=[g.getMaxTime()/1e3+"s"],c=getEasingFunc(g.getClip().easing),y=g.getDelay();c?f.push(c):f.push("linear"),y&&f.push(y/1e3+"s"),g.getLoop()&&f.push("infinite");var _=f.join(" ");d[_]=d[_]||[_,[]],d[_][1].push(g)}function b(w){var T=w[1],A=T.length,E={},$={},P={},I="animation-timing-function";function C(Q,J,oe){for(var ne=Q.getTracks(),z=Q.getMaxTime(),W=0;W<ne.length;W++){var Z=ne[W];if(Z.needsAnimate()){var ae=Z.keyframes,se=Z.propName;if(oe&&(se=oe(se)),se)for(var ce=0;ce<ae.length;ce++){var _e=ae[ce],ge=Math.round(_e.time/z*100)+"%",me=getEasingFunc(_e.easing),de=_e.rawValue;(isString(de)||isNumber(de))&&(J[ge]=J[ge]||{},J[ge][se]=_e.rawValue,me&&(J[ge][I]=me))}}}}for(var M=0;M<A;M++){var D=T[M],R=D.targetName;R?R==="shape"&&C(D,$):!a&&C(D,E)}for(var N in E){var O={};copyTransform(O,n),extend(O,E[N]);var F=getSRTTransformString(O),L=E[N][I];P[N]=F?{transform:F}:{},setTransformOrigin(P[N],O),L&&(P[N][I]=L)}var B,V=!0;for(var N in $){P[N]=P[N]||{};var H=!B,L=$[N][I];H&&(B=new PathProxy$1);var X=B.len();B.reset(),P[N].d=buildPathString(n,$[N],B);var U=B.len();if(!H&&X!==U){V=!1;break}L&&(P[N][I]=L)}if(!V)for(var N in P)delete P[N].d;if(!a)for(var M=0;M<A;M++){var D=T[M],R=D.targetName;R==="style"&&C(D,P,function(ne){return ANIMATE_STYLE_MAP[ne]})}for(var te=keys(P),ee=!0,q,M=1;M<te.length;M++){var ie=te[M-1],pe=te[M];if(P[ie][transformOriginKey]!==P[pe][transformOriginKey]){ee=!1;break}q=P[ie][transformOriginKey]}if(ee&&q){for(var N in P)P[N][transformOriginKey]&&delete P[N][transformOriginKey];t[transformOriginKey]=q}if(filter(te,function(Q){return keys(P[Q]).length>0}).length){var j=addAnimation(P,r);return j+" "+w[0]+" both"}}for(var S in d){var u=b(d[S]);u&&l.push(u)}if(l.length){var x=r.zrId+"-cls-"+r.cssClassIdx++;r.cssNodes["."+x]={animation:l.join(",")},t.class=x}}var round$1=Math.round;function isImageLike(n){return n&&isString(n.src)}function isCanvasLike(n){return n&&isFunction(n.toDataURL)}function setStyleAttrs(n,t,r,a){mapStyleToAttrs(function(o,s){var l=o==="fill"||o==="stroke";l&&isGradient(s)?setGradient(t,n,o,a):l&&isPattern(s)?setPattern(r,n,o,a):n[o]=s},t,r,!1),setShadow(r,n,a)}function noRotateScale(n){return isAroundZero(n[0]-1)&&isAroundZero(n[1])&&isAroundZero(n[2])&&isAroundZero(n[3]-1)}function noTranslate(n){return isAroundZero(n[4])&&isAroundZero(n[5])}function setTransform(n,t,r){if(t&&!(noTranslate(t)&&noRotateScale(t))){var a=r?10:1e4;n.transform=noRotateScale(t)?"translate("+round$1(t[4]*a)/a+" "+round$1(t[5]*a)/a+")":getMatrixStr(t)}}function convertPolyShape(n,t,r){for(var a=n.points,o=[],s=0;s<a.length;s++)o.push(round$1(a[s][0]*r)/r),o.push(round$1(a[s][1]*r)/r);t.points=o.join(" ")}function validatePolyShape(n){return!n.smooth}function createAttrsConvert(n){var t=map$1(n,function(r){return typeof r=="string"?[r,r]:r});return function(r,a,o){for(var s=0;s<t.length;s++){var l=t[s],u=r[l[0]];u!=null&&(a[l[1]]=round$1(u*o)/o)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(n){for(var t=n.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function brushSVGPath(n,t){var r=n.style,a=n.shape,o=builtinShapesDef[n.type],s={},l=t.animation,u="path",d=n.style.strokePercent,v=t.compress&&getPathPrecision(n)||4;if(o&&!t.willUpdate&&!(o[1]&&!o[1](a))&&!(l&&hasShapeAnimation(n))&&!(d<1)){u=n.type;var g=Math.pow(10,v);o[0](a,s,g)}else{var f=!n.path||n.shapeChanged();n.path||n.createPathProxy();var c=n.path;f&&(c.beginPath(),n.buildPath(c,n.shape),n.pathUpdated());var y=c.getVersion(),_=n,b=_.__svgPathBuilder;(_.__svgPathVersion!==y||!b||d!==_.__svgPathStrokePercent)&&(b||(b=_.__svgPathBuilder=new SVGPathRebuilder$1),b.reset(v),c.rebuildPath(b,d),b.generateStr(),_.__svgPathVersion=y,_.__svgPathStrokePercent=d),s.d=b.getStr()}return setTransform(s,n.transform),setStyleAttrs(s,r,n,t),t.animation&&createCSSAnimation(n,s,t),createVNode(u,n.id+"",s)}function brushSVGImage(n,t){var r=n.style,a=r.image;if(a&&!isString(a)&&(isImageLike(a)?a=a.src:isCanvasLike(a)&&(a=a.toDataURL())),!!a){var o=r.x||0,s=r.y||0,l=r.width,u=r.height,d={href:a,width:l,height:u};return o&&(d.x=o),s&&(d.y=s),setTransform(d,n.transform),setStyleAttrs(d,r,n,t),t.animation&&createCSSAnimation(n,d,t),createVNode("image",n.id+"",d)}}function brushSVGTSpan(n,t){var r=n.style,a=r.text;if(a!=null&&(a+=""),!(!a||isNaN(r.x)||isNaN(r.y))){var o=r.font||DEFAULT_FONT,s=r.x||0,l=adjustTextY$1(r.y||0,getLineHeight(o),r.textBaseline),u=TEXT_ALIGN_TO_ANCHOR[r.textAlign]||r.textAlign,d={"dominant-baseline":"central","text-anchor":u};if(hasSeparateFont(r)){var v="",g=r.fontStyle,f=parseFontSize(r.fontSize);if(!parseFloat(f))return;var c=r.fontFamily||DEFAULT_FONT_FAMILY,y=r.fontWeight;v+="font-size:"+f+";font-family:"+c+";",g&&g!=="normal"&&(v+="font-style:"+g+";"),y&&y!=="normal"&&(v+="font-weight:"+y+";"),d.style=v}else d.style="font: "+o;return a.match(/\s/)&&(d["xml:space"]="preserve"),s&&(d.x=s),l&&(d.y=l),setTransform(d,n.transform),setStyleAttrs(d,r,n,t),t.animation&&createCSSAnimation(n,d,t),createVNode("text",n.id+"",d,void 0,a)}}function brush(n,t){if(n instanceof Path$1)return brushSVGPath(n,t);if(n instanceof ZRImage$1)return brushSVGImage(n,t);if(n instanceof TSpan$1)return brushSVGTSpan(n,t)}function setShadow(n,t,r){var a=n.style;if(hasShadow(a)){var o=getShadowKey(n),s=r.shadowCache,l=s[o];if(!l){var u=n.getGlobalScale(),d=u[0],v=u[1];if(!d||!v)return;var g=a.shadowOffsetX||0,f=a.shadowOffsetY||0,c=a.shadowBlur,y=normalizeColor(a.shadowColor),_=y.opacity,b=y.color,S=c/2/d,x=c/2/v,w=S+" "+x;l=r.zrId+"-s"+r.shadowIdx++,r.defs[l]=createVNode("filter",l,{id:l,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:g/d,dy:f/v,stdDeviation:w,"flood-color":b,"flood-opacity":_})]),s[o]=l}t.filter=getIdURL(l)}}function setGradient(n,t,r,a){var o=n[r],s,l={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(o))s="linearGradient",l.x1=o.x,l.y1=o.y,l.x2=o.x2,l.y2=o.y2;else if(isRadialGradient(o))s="radialGradient",l.cx=retrieve2(o.x,.5),l.cy=retrieve2(o.y,.5),l.r=retrieve2(o.r,.5);else return;for(var u=o.colorStops,d=[],v=0,g=u.length;v<g;++v){var f=round4(u[v].offset)*100+"%",c=u[v].color,y=normalizeColor(c),_=y.color,b=y.opacity,S={offset:f};S["stop-color"]=_,b<1&&(S["stop-opacity"]=b),d.push(createVNode("stop",v+"",S))}var x=createVNode(s,"",l,d),w=vNodeToString(x),T=a.gradientCache,A=T[w];A||(A=a.zrId+"-g"+a.gradientIdx++,T[w]=A,l.id=A,a.defs[A]=createVNode(s,A,l,d)),t[r]=getIdURL(A)}function setPattern(n,t,r,a){var o=n.style[r],s=n.getBoundingRect(),l={},u=o.repeat,d=u==="no-repeat",v=u==="repeat-x",g=u==="repeat-y",f;if(isImagePattern(o)){var c=o.imageWidth,y=o.imageHeight,_=void 0,b=o.image;if(isString(b)?_=b:isImageLike(b)?_=b.src:isCanvasLike(b)&&(_=b.toDataURL()),typeof Image>"u"){var S="Image width/height must been given explictly in svg-ssr renderer.";assert(c,S),assert(y,S)}else if(c==null||y==null){var x=function(M,D){if(M){var R=M.elm,N=c||D.width,O=y||D.height;M.tag==="pattern"&&(v?(O=1,N/=s.width):g&&(N=1,O/=s.height)),M.attrs.width=N,M.attrs.height=O,R&&(R.setAttribute("width",N),R.setAttribute("height",O))}},w=createOrUpdateImage(_,null,n,function(M){d||x($,M),x(f,M)});w&&w.width&&w.height&&(c=c||w.width,y=y||w.height)}f=createVNode("image","img",{href:_,width:c,height:y}),l.width=c,l.height=y}else o.svgElement&&(f=clone$4(o.svgElement),l.width=o.svgWidth,l.height=o.svgHeight);if(f){var T,A;d?T=A=1:v?(A=1,T=l.width/s.width):g?(T=1,A=l.height/s.height):l.patternUnits="userSpaceOnUse",T!=null&&!isNaN(T)&&(l.width=T),A!=null&&!isNaN(A)&&(l.height=A);var E=getSRTTransformString(o);E&&(l.patternTransform=E);var $=createVNode("pattern","",l,[f]),P=vNodeToString($),I=a.patternCache,C=I[P];C||(C=a.zrId+"-p"+a.patternIdx++,I[P]=C,l.id=C,$=a.defs[C]=createVNode("pattern",C,l,[f])),t[r]=getIdURL(C)}}function setClipPath(n,t,r){var a=r.clipPathCache,o=r.defs,s=a[n.id];if(!s){s=r.zrId+"-c"+r.clipPathIdx++;var l={id:s};a[n.id]=s,o[s]=createVNode("clipPath",s,l,[brushSVGPath(n,r)])}t["clip-path"]=getIdURL(s)}function createTextNode(n){return document.createTextNode(n)}function insertBefore(n,t,r){n.insertBefore(t,r)}function removeChild(n,t){n.removeChild(t)}function appendChild(n,t){n.appendChild(t)}function parentNode(n){return n.parentNode}function nextSibling(n){return n.nextSibling}function setTextContent(n,t){n.textContent=t}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(n){return n===void 0}function isDef(n){return n!==void 0}function createKeyToOldIdx(n,t,r){for(var a={},o=t;o<=r;++o){var s=n[o].key;s!==void 0&&(a[s]=o)}return a}function sameVnode(n,t){var r=n.key===t.key,a=n.tag===t.tag;return a&&r}function createElm(n){var t,r=n.children,a=n.tag;if(isDef(a)){var o=n.elm=createElement(a);if(updateAttrs(emptyNode,n),isArray$1(r))for(t=0;t<r.length;++t){var s=r[t];s!=null&&appendChild(o,createElm(s))}else isDef(n.text)&&!isObject$3(n.text)&&appendChild(o,createTextNode(n.text))}else n.elm=createTextNode(n.text);return n.elm}function addVnodes(n,t,r,a,o){for(;a<=o;++a){var s=r[a];s!=null&&insertBefore(n,createElm(s),t)}}function removeVnodes(n,t,r,a){for(;r<=a;++r){var o=t[r];if(o!=null)if(isDef(o.tag)){var s=parentNode(o.elm);removeChild(s,o.elm)}else removeChild(n,o.elm)}}function updateAttrs(n,t){var r,a=t.elm,o=n&&n.attrs||{},s=t.attrs||{};if(o!==s){for(r in s){var l=s[r],u=o[r];u!==l&&(l===!0?a.setAttribute(r,""):l===!1?a.removeAttribute(r):r.charCodeAt(0)!==xChar?a.setAttribute(r,l):r==="xmlns:xlink"||r==="xmlns"?a.setAttributeNS(XMLNS,r,l):r.charCodeAt(3)===colonChar?a.setAttributeNS(XML_NAMESPACE,r,l):r.charCodeAt(5)===colonChar?a.setAttributeNS(XLINKNS,r,l):a.setAttribute(r,l))}for(r in o)r in s||a.removeAttribute(r)}}function updateChildren(n,t,r){for(var a=0,o=0,s=t.length-1,l=t[0],u=t[s],d=r.length-1,v=r[0],g=r[d],f,c,y,_;a<=s&&o<=d;)l==null?l=t[++a]:u==null?u=t[--s]:v==null?v=r[++o]:g==null?g=r[--d]:sameVnode(l,v)?(patchVnode(l,v),l=t[++a],v=r[++o]):sameVnode(u,g)?(patchVnode(u,g),u=t[--s],g=r[--d]):sameVnode(l,g)?(patchVnode(l,g),insertBefore(n,l.elm,nextSibling(u.elm)),l=t[++a],g=r[--d]):sameVnode(u,v)?(patchVnode(u,v),insertBefore(n,u.elm,l.elm),u=t[--s],v=r[++o]):(isUndef(f)&&(f=createKeyToOldIdx(t,a,s)),c=f[v.key],isUndef(c)?insertBefore(n,createElm(v),l.elm):(y=t[c],y.tag!==v.tag?insertBefore(n,createElm(v),l.elm):(patchVnode(y,v),t[c]=void 0,insertBefore(n,y.elm,l.elm))),v=r[++o]);(a<=s||o<=d)&&(a>s?(_=r[d+1]==null?null:r[d+1].elm,addVnodes(n,_,r,o,d)):removeVnodes(n,t,a,s))}function patchVnode(n,t){var r=t.elm=n.elm,a=n.children,o=t.children;n!==t&&(updateAttrs(n,t),isUndef(t.text)?isDef(a)&&isDef(o)?a!==o&&updateChildren(r,a,o):isDef(o)?(isDef(n.text)&&setTextContent(r,""),addVnodes(r,null,o,0,o.length-1)):isDef(a)?removeVnodes(r,a,0,a.length-1):isDef(n.text)&&setTextContent(r,""):n.text!==t.text&&(isDef(a)&&removeVnodes(r,a,0,a.length-1),setTextContent(r,t.text)))}function patch(n,t){if(sameVnode(n,t))patchVnode(n,t);else{var r=n.elm,a=parentNode(r);createElm(t),a!==null&&(insertBefore(a,t.elm,nextSibling(r)),removeVnodes(a,[n],0,0))}return t}var svgId=0,SVGPainter=function(){function n(t,r,a){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=r,this._opts=a=extend({},a),this.root=t,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(a.width,a.height),t&&!a.ssr){var o=this._viewport=document.createElement("div");o.style.cssText="position:relative;overflow:hidden";var s=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),o.appendChild(s),t.appendChild(o)}this.resize(a.width,a.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,t),this._oldVNode=t}},n.prototype.renderOneToVNode=function(t){return brush(t,createBrushScope(this._id))},n.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),a=this._width,o=this._height,s=createBrushScope(this._id);s.animation=t.animation,s.willUpdate=t.willUpdate,s.compress=t.compress;var l=[],u=this._bgVNode=createBackgroundVNode(a,o,this._backgroundColor,s);u&&l.push(u);var d=t.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(r,s,d?d.children:l),d&&l.push(d);var v=map$1(keys(s.defs),function(c){return s.defs[c]});if(v.length&&l.push(createVNode("defs","defs",{},v)),t.animation){var g=getCssString(s.cssNodes,s.cssAnims,{newline:!0});if(g){var f=createVNode("style","stl",{},[],g);l.push(f)}}return createSVGVNode(a,o,l,t.useViewBox)},n.prototype.renderToString=function(t){return t=t||{},vNodeToString(this.renderToVNode({animation:retrieve2(t.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(t.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(t){this._backgroundColor=t},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(t,r,a){for(var o=t.length,s=[],l=0,u,d,v=0,g=0;g<o;g++){var f=t[g];if(!f.invisible){var c=f.__clipPaths,y=c&&c.length||0,_=d&&d.length||0,b=void 0;for(b=Math.max(y-1,_-1);b>=0&&!(c&&d&&c[b]===d[b]);b--);for(var S=_-1;S>b;S--)l--,u=s[l-1];for(var x=b+1;x<y;x++){var w={};setClipPath(c[x],w,r);var T=createVNode("g","clip-g-"+v++,w,[]);(u?u.children:a).push(T),s[l++]=T,u=T}d=c;var A=brush(f,r);A&&(u?u.children:a).push(A)}}},n.prototype.resize=function(t,r){var a=this._opts,o=this.root,s=this._viewport;if(t!=null&&(a.width=t),r!=null&&(a.height=r),o&&s&&(s.style.display="none",t=getSize$1(o,0,a),r=getSize$1(o,1,a),s.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,s){var l=s.style;l.width=t+"px",l.height=r+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var u=this._svgDom;u&&(u.setAttribute("width",t),u.setAttribute("height",r));var d=this._bgVNode&&this._bgVNode.elm;d&&(d.setAttribute("width",t),d.setAttribute("height",r))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(t){var r=this.renderToString(),a="data:image/svg+xml;";return t?(r=encodeBase64(r),r&&a+"base64,"+r):a+"charset=UTF-8,"+encodeURIComponent(r)},n}();function createMethodNotSupport(n){return function(){}}function createBackgroundVNode(n,t,r,a){var o;if(r&&r!=="none")if(o=createVNode("rect","bg",{width:n,height:t,x:"0",y:"0",id:"0"}),isGradient(r))setGradient({fill:r},o.attrs,"fill",a);else if(isPattern(r))setPattern({style:{fill:r},dirty:noop,getBoundingRect:function(){return{width:n,height:t}}},o.attrs,"fill",a);else{var s=normalizeColor(r),l=s.color,u=s.opacity;o.attrs.fill=l,u<1&&(o.attrs["fill-opacity"]=u)}return o}const SVGPainter$1=SVGPainter;function install$S(n){n.registerPainter("svg",SVGPainter$1)}function createDom(n,t,r){var a=platformApi.createCanvas(),o=t.getWidth(),s=t.getHeight(),l=a.style;return l&&(l.position="absolute",l.left="0",l.top="0",l.width=o+"px",l.height=s+"px",a.setAttribute("data-zr-dom-id",n)),a.width=o*r,a.height=s*r,a}var Layer=function(n){__extends(t,n);function t(r,a,o){var s=n.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var l;o=o||devicePixelRatio,typeof r=="string"?l=createDom(r,a,o):isObject$3(r)&&(l=r,r=l.id),s.id=r,s.dom=l;var u=l.style;return u&&(disableUserSelect(l),l.onselectstart=function(){return!1},u.padding="0",u.margin="0",u.borderWidth="0"),s.painter=a,s.dpr=o,s}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,a,o,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var l=[],u=this.maxRepaintRectCount,d=!1,v=new BoundingRect$1(0,0,0,0);function g(w){if(!(!w.isFinite()||w.isZero()))if(l.length===0){var T=new BoundingRect$1(0,0,0,0);T.copy(w),l.push(T)}else{for(var A=!1,E=1/0,$=0,P=0;P<l.length;++P){var I=l[P];if(I.intersect(w)){var C=new BoundingRect$1(0,0,0,0);C.copy(I),C.union(w),l[P]=C,A=!0;break}else if(d){v.copy(w),v.union(I);var M=w.width*w.height,D=I.width*I.height,R=v.width*v.height,N=R-M-D;N<E&&(E=N,$=P)}}if(d&&(l[$].union(w),A=!0),!A){var T=new BoundingRect$1(0,0,0,0);T.copy(w),l.push(T)}d||(d=l.length>=u)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var c=r[f];if(c){var y=c.shouldBePainted(o,s,!0,!0),_=c.__isRendered&&(c.__dirty&REDRAW_BIT||!y)?c.getPrevPaintRect():null;_&&g(_);var b=y&&(c.__dirty&REDRAW_BIT||!c.__isRendered)?c.getPaintRect():null;b&&g(b)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var c=a[f],y=c.shouldBePainted(o,s,!0,!0);if(c&&(!y||!c.__zr)&&c.__isRendered){var _=c.getPrevPaintRect();_&&g(_)}}var S;do{S=!1;for(var f=0;f<l.length;){if(l[f].isZero()){l.splice(f,1);continue}for(var x=f+1;x<l.length;)l[f].intersect(l[x])?(S=!0,l[f].union(l[x]),l.splice(x,1)):x++;f++}}while(S);return this._paintRects=l,l},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,a){var o=this.dpr,s=this.dom,l=s.style,u=this.domBack;l&&(l.width=r+"px",l.height=a+"px"),s.width=r*o,s.height=a*o,u&&(u.width=r*o,u.height=a*o,o!==1&&this.ctxBack.scale(o,o))},t.prototype.clear=function(r,a,o){var s=this.dom,l=this.ctx,u=s.width,d=s.height;a=a||this.clearColor;var v=this.motionBlur&&!r,g=this.lastFrameAlpha,f=this.dpr,c=this;v&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,u/f,d/f));var y=this.domBack;function _(b,S,x,w){if(l.clearRect(b,S,x,w),a&&a!=="transparent"){var T=void 0;if(isGradientObject(a)){var A=a.global||a.__width===x&&a.__height===w;T=A&&a.__canvasGradient||getCanvasGradient(l,a,{x:0,y:0,width:x,height:w}),a.__canvasGradient=T,a.__width=x,a.__height=w}else isImagePatternObject(a)&&(a.scaleX=a.scaleX||f,a.scaleY=a.scaleY||f,T=createCanvasPattern(l,a,{dirty:function(){c.setUnpainted(),c.__painter.refresh()}}));l.save(),l.fillStyle=T||a,l.fillRect(b,S,x,w),l.restore()}v&&(l.save(),l.globalAlpha=g,l.drawImage(y,b,S,x,w),l.restore())}!o||v?_(0,0,u,d):o.length&&each$f(o,function(b){_(b.x*f,b.y*f,b.width*f,b.height*f)})},t}(Eventful$1);const Layer$1=Layer;var HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function createRoot(n,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+n+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var CanvasPainter=function(){function n(t,r,a,o){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=a=extend({},a||{}),this.dpr=a.devicePixelRatio||devicePixelRatio,this._singleCanvas=s,this.root=t;var l=t.style;l&&(disableUserSelect(t),t.innerHTML=""),this.storage=r;var u=this._zlevelList;this._prevDisplayList=[];var d=this._layers;if(s){var g=t,f=g.width,c=g.height;a.width!=null&&(f=a.width),a.height!=null&&(c=a.height),this.dpr=a.devicePixelRatio||1,g.width=f*this.dpr,g.height=c*this.dpr,this._width=f,this._height=c;var y=new Layer$1(g,this,this.dpr);y.__builtin__=!0,y.initContext(),d[CANVAS_ZLEVEL]=y,y.zlevel=CANVAS_ZLEVEL,u.push(CANVAS_ZLEVEL),this._domRoot=t}else{this._width=getSize$1(t,0,a),this._height=getSize$1(t,1,a);var v=this._domRoot=createRoot(this._width,this._height);t.appendChild(v)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},n.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),a=this._prevDisplayList,o=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,a,t,this._redrawId);for(var s=0;s<o.length;s++){var l=o[s],u=this._layers[l];if(!u.__builtin__&&u.refresh){var d=s===0?this._backgroundColor:null;u.refresh(d)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(t){var r=t.length,a=this._hoverlayer;if(a&&a.clear(),!!r){for(var o={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,l=0;l<r;l++){var u=t[l];u.__inHover&&(a||(a=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),s||(s=a.ctx,s.save()),brush$1(s,u,o,l===r-1))}s&&s.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},n.prototype.paintOne=function(t,r){brushSingle(t,r)},n.prototype._paintList=function(t,r,a,o){if(this._redrawId===o){a=a||!1,this._updateLayerStatus(t);var s=this._doPaintList(t,r,a),l=s.finished,u=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),u&&this._paintHoverList(t),l)this.eachLayer(function(v){v.afterBrush&&v.afterBrush()});else{var d=this;requestAnimationFrame$1(function(){d._paintList(t,r,a,o)})}}},n.prototype._compositeManually=function(){var t=this.getLayer(CANVAS_ZLEVEL).ctx,r=this._domRoot.width,a=this._domRoot.height;t.clearRect(0,0,r,a),this.eachBuiltinLayer(function(o){o.virtual&&t.drawImage(o.dom,0,0,r,a)})},n.prototype._doPaintList=function(t,r,a){for(var o=this,s=[],l=this._opts.useDirtyRect,u=0;u<this._zlevelList.length;u++){var d=this._zlevelList[u],v=this._layers[d];v.__builtin__&&v!==this._hoverlayer&&(v.__dirty||a)&&s.push(v)}for(var g=!0,f=!1,c=function(b){var S=s[b],x=S.ctx,w=l&&S.createRepaintRects(t,r,y._width,y._height),T=a?S.__startIndex:S.__drawIndex,A=!a&&S.incremental&&Date.now,E=A&&Date.now(),$=S.zlevel===y._zlevelList[0]?y._backgroundColor:null;if(S.__startIndex===S.__endIndex)S.clear(!1,$,w);else if(T===S.__startIndex){var P=t[T];(!P.incremental||!P.notClear||a)&&S.clear(!1,$,w)}T===-1&&(console.error("For some unknown reason. drawIndex is -1"),T=S.__startIndex);var I,C=function(N){var O={inHover:!1,allClipped:!1,prevEl:null,viewWidth:o._width,viewHeight:o._height};for(I=T;I<S.__endIndex;I++){var F=t[I];if(F.__inHover&&(f=!0),o._doPaintEl(F,S,l,N,O,I===S.__endIndex-1),A){var L=Date.now()-E;if(L>15)break}}O.prevElClipPaths&&x.restore()};if(w)if(w.length===0)I=S.__endIndex;else for(var M=y.dpr,D=0;D<w.length;++D){var R=w[D];x.save(),x.beginPath(),x.rect(R.x*M,R.y*M,R.width*M,R.height*M),x.clip(),C(R),x.restore()}else x.save(),C(),x.restore();S.__drawIndex=I,S.__drawIndex<S.__endIndex&&(g=!1)},y=this,_=0;_<s.length;_++)c(_);return env$1.wxa&&each$f(this._layers,function(b){b&&b.ctx&&b.ctx.draw&&b.ctx.draw()}),{finished:g,needsRefreshHover:f}},n.prototype._doPaintEl=function(t,r,a,o,s,l){var u=r.ctx;if(a){var d=t.getPaintRect();(!o||d&&d.intersect(o))&&(brush$1(u,t,s,l),t.setPrevPaintRect(d))}else brush$1(u,t,s,l)},n.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=CANVAS_ZLEVEL);var a=this._layers[t];return a||(a=new Layer$1("zr_"+t,this,this.dpr),a.zlevel=t,a.__builtin__=!0,this._layerConfig[t]?merge(a,this._layerConfig[t],!0):this._layerConfig[t-EL_AFTER_INCREMENTAL_INC]&&merge(a,this._layerConfig[t-EL_AFTER_INCREMENTAL_INC],!0),r&&(a.virtual=r),this.insertLayer(t,a),a.initContext()),a},n.prototype.insertLayer=function(t,r){var a=this._layers,o=this._zlevelList,s=o.length,l=this._domRoot,u=null,d=-1;if(!a[t]&&isLayerValid(r)){if(s>0&&t>o[0]){for(d=0;d<s-1&&!(o[d]<t&&o[d+1]>t);d++);u=a[o[d]]}if(o.splice(d+1,0,t),a[t]=r,!r.virtual)if(u){var v=u.dom;v.nextSibling?l.insertBefore(r.dom,v.nextSibling):l.appendChild(r.dom)}else l.firstChild?l.insertBefore(r.dom,l.firstChild):l.appendChild(r.dom);r.__painter=this}},n.prototype.eachLayer=function(t,r){for(var a=this._zlevelList,o=0;o<a.length;o++){var s=a[o];t.call(r,this._layers[s],s)}},n.prototype.eachBuiltinLayer=function(t,r){for(var a=this._zlevelList,o=0;o<a.length;o++){var s=a[o],l=this._layers[s];l.__builtin__&&t.call(r,l,s)}},n.prototype.eachOtherLayer=function(t,r){for(var a=this._zlevelList,o=0;o<a.length;o++){var s=a[o],l=this._layers[s];l.__builtin__||t.call(r,l,s)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,c){f.__dirty=f.__used=!1});function r(f){s&&(s.__endIndex!==f&&(s.__dirty=!0),s.__endIndex=f)}if(this._singleCanvas)for(var a=1;a<t.length;a++){var o=t[a];if(o.zlevel!==t[a-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}}var s=null,l=0,u,d;for(d=0;d<t.length;d++){var o=t[d],v=o.zlevel,g=void 0;u!==v&&(u=v,l=0),o.incremental?(g=this.getLayer(v+INCREMENTAL_INC,this._needsManuallyCompositing),g.incremental=!0,l=1):g=this.getLayer(v+(l>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),g.__builtin__||logError("ZLevel "+v+" has been used by unkown layer "+g.id),g!==s&&(g.__used=!0,g.__startIndex!==d&&(g.__dirty=!0),g.__startIndex=d,g.incremental?g.__drawIndex=-1:g.__drawIndex=d,r(d),s=g),o.__dirty&REDRAW_BIT&&!o.__inHover&&(g.__dirty=!0,g.incremental&&g.__drawIndex<0&&(g.__drawIndex=d))}r(d),this.eachBuiltinLayer(function(f,c){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(t){t.clear()},n.prototype.setBackgroundColor=function(t){this._backgroundColor=t,each$f(this._layers,function(r){r.setUnpainted()})},n.prototype.configLayer=function(t,r){if(r){var a=this._layerConfig;a[t]?merge(a[t],r,!0):a[t]=r;for(var o=0;o<this._zlevelList.length;o++){var s=this._zlevelList[o];if(s===t||s===t+EL_AFTER_INCREMENTAL_INC){var l=this._layers[s];merge(l,a[t],!0)}}}},n.prototype.delLayer=function(t){var r=this._layers,a=this._zlevelList,o=r[t];o&&(o.dom.parentNode.removeChild(o.dom),delete r[t],a.splice(indexOf(a,t),1))},n.prototype.resize=function(t,r){if(this._domRoot.style){var a=this._domRoot;a.style.display="none";var o=this._opts,s=this.root;if(t!=null&&(o.width=t),r!=null&&(o.height=r),t=getSize$1(s,0,o),r=getSize$1(s,1,o),a.style.display="",this._width!==t||r!==this._height){a.style.width=t+"px",a.style.height=r+"px";for(var l in this._layers)this._layers.hasOwnProperty(l)&&this._layers[l].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(CANVAS_ZLEVEL).resize(t,r)}return this},n.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var r=new Layer$1("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var a=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var o=r.dom.width,s=r.dom.height;this.eachLayer(function(f){f.__builtin__?a.drawImage(f.dom,0,0,o,s):f.renderToCanvas&&(a.save(),f.renderToCanvas(a),a.restore())})}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},u=this.storage.getDisplayList(!0),d=0,v=u.length;d<v;d++){var g=u[d];brush$1(a,g,l,d===v-1)}return r.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();const CanvasPainter$1=CanvasPainter;function install$R(n){n.registerPainter("canvas",CanvasPainter$1)}var LineSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var a=new Group$4,o=createSymbol$1("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);a.add(o),o.setStyle(r.lineStyle);var s=this.getData().getVisual("symbol"),l=this.getData().getVisual("symbolRotate"),u=s==="none"?"circle":s,d=r.itemHeight*.8,v=createSymbol$1(u,(r.itemWidth-d)/2,(r.itemHeight-d)/2,d,d,r.itemStyle.fill);a.add(v),v.setStyle(r.itemStyle);var g=r.iconRotate==="inherit"?l:r.iconRotate||0;return v.rotation=g*Math.PI/180,v.setOrigin([r.itemWidth/2,r.itemHeight/2]),u.indexOf("empty")>-1&&(v.style.stroke=v.style.fill,v.style.fill="#fff",v.style.lineWidth=2),a},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(SeriesModel$1);const LineSeries=LineSeriesModel;function getDefaultLabel(n,t){var r=n.mapDimensionsAll("defaultedLabel"),a=r.length;if(a===1){var o=retrieveRawValue(n,t,r[0]);return o!=null?o+"":null}else if(a){for(var s=[],l=0;l<r.length;l++)s.push(retrieveRawValue(n,t,r[l]));return s.join(" ")}}function getDefaultInterpolatedLabel(n,t){var r=n.mapDimensionsAll("defaultedLabel");if(!isArray$1(t))return t+"";for(var a=[],o=0;o<r.length;o++){var s=n.getDimensionIndex(r[o]);s>=0&&a.push(t[s])}return a.join(" ")}var Symbol$1=function(n){__extends$1(t,n);function t(r,a,o,s){var l=n.call(this)||this;return l.updateData(r,a,o,s),l}return t.prototype._createSymbol=function(r,a,o,s,l){this.removeAll();var u=createSymbol$1(r,-1,-1,2,2,null,l);u.attr({z2:100,culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),u.drift=driftSymbol,this._symbolType=r,this.add(u)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){enterEmphasis(this.childAt(0))},t.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},t.prototype.setZ=function(r,a){var o=this.childAt(0);o.zlevel=r,o.z=a},t.prototype.setDraggable=function(r,a){var o=this.childAt(0);o.draggable=r,o.cursor=!a&&r?"move":o.cursor},t.prototype.updateData=function(r,a,o,s){this.silent=!1;var l=r.getItemVisual(a,"symbol")||"circle",u=r.hostModel,d=t.getSymbolSize(r,a),v=l!==this._symbolType,g=s&&s.disableAnimation;if(v){var f=r.getItemVisual(a,"symbolKeepAspect");this._createSymbol(l,r,a,d,f)}else{var c=this.childAt(0);c.silent=!1;var y={scaleX:d[0]/2,scaleY:d[1]/2};g?c.attr(y):updateProps$1(c,y,u,a),saveOldStyle(c)}if(this._updateCommon(r,a,d,o,s),v){var c=this.childAt(0);if(!g){var y={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:c.style.opacity}};c.scaleX=c.scaleY=0,c.style.opacity=0,initProps(c,y,u,a)}}g&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,a,o,s,l){var u=this.childAt(0),d=r.hostModel,v,g,f,c,y,_,b,S,x;if(s&&(v=s.emphasisItemStyle,g=s.blurItemStyle,f=s.selectItemStyle,c=s.focus,y=s.blurScope,b=s.labelStatesModels,S=s.hoverScale,x=s.cursorStyle,_=s.emphasisDisabled),!s||r.hasItemOption){var w=s&&s.itemModel?s.itemModel:r.getItemModel(a),T=w.getModel("emphasis");v=T.getModel("itemStyle").getItemStyle(),f=w.getModel(["select","itemStyle"]).getItemStyle(),g=w.getModel(["blur","itemStyle"]).getItemStyle(),c=T.get("focus"),y=T.get("blurScope"),_=T.get("disabled"),b=getLabelStatesModels(w),S=T.getShallow("scale"),x=w.getShallow("cursor")}var A=r.getItemVisual(a,"symbolRotate");u.attr("rotation",(A||0)*Math.PI/180||0);var E=normalizeSymbolOffset(r.getItemVisual(a,"symbolOffset"),o);E&&(u.x=E[0],u.y=E[1]),x&&u.attr("cursor",x);var $=r.getItemVisual(a,"style"),P=$.fill;if(u instanceof ZRImage$1){var I=u.style;u.useStyle(extend({image:I.image,x:I.x,y:I.y,width:I.width,height:I.height},$))}else u.__isEmptyBrush?u.useStyle(extend({},$)):u.useStyle($),u.style.decal=null,u.setColor(P,l&&l.symbolInnerColor),u.style.strokeNoScale=!0;var C=r.getItemVisual(a,"liftZ"),M=this._z2;C!=null?M==null&&(this._z2=u.z2,u.z2+=C):M!=null&&(u.z2=M,this._z2=null);var D=l&&l.useNameLabel;setLabelStyle(u,b,{labelFetcher:d,labelDataIndex:a,defaultText:R,inheritColor:P,defaultOpacity:$.opacity});function R(F){return D?r.getName(F):getDefaultLabel(r,F)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var N=u.ensureState("emphasis");N.style=v,u.ensureState("select").style=f,u.ensureState("blur").style=g;var O=S==null||S===!0?Math.max(1.1,3/this._sizeY):isFinite(S)&&S>0?+S:1;N.scaleX=this._sizeX*O,N.scaleY=this._sizeY*O,this.setSymbolScale(1),toggleHoverEmphasis(this,c,y,_)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,a,o){var s=this.childAt(0),l=getECData(this).dataIndex,u=o&&o.animation;if(this.silent=s.silent=!0,o&&o.fadeLabel){var d=s.getTextContent();d&&removeElement(d,{style:{opacity:0}},a,{dataIndex:l,removeOpt:u,cb:function(){s.removeTextContent()}})}else s.removeTextContent();removeElement(s,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:l,cb:r,removeOpt:u})},t.getSymbolSize=function(r,a){return normalizeSymbolSize(r.getItemVisual(a,"symbolSize"))},t}(Group$4);function driftSymbol(n,t){this.parent.drift(n,t)}const SymbolClz=Symbol$1;function symbolNeedsDraw$1(n,t,r,a){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(a.isIgnore&&a.isIgnore(r))&&!(a.clipShape&&!a.clipShape.contain(t[0],t[1]))&&n.getItemVisual(r,"symbol")!=="none"}function normalizeUpdateOpt(n){return n!=null&&!isObject$3(n)&&(n={isIgnore:n}),n||{}}function makeSeriesScope$2(n){var t=n.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:getLabelStatesModels(t),cursorStyle:t.get("cursor")}}var SymbolDraw=function(){function n(t){this.group=new Group$4,this._SymbolCtor=t||SymbolClz}return n.prototype.updateData=function(t,r){this._progressiveEls=null,r=normalizeUpdateOpt(r);var a=this.group,o=t.hostModel,s=this._data,l=this._SymbolCtor,u=r.disableAnimation,d=makeSeriesScope$2(t),v={disableAnimation:u},g=r.getSymbolPoint||function(f){return t.getItemLayout(f)};s||a.removeAll(),t.diff(s).add(function(f){var c=g(f);if(symbolNeedsDraw$1(t,c,f,r)){var y=new l(t,f,d,v);y.setPosition(c),t.setItemGraphicEl(f,y),a.add(y)}}).update(function(f,c){var y=s.getItemGraphicEl(c),_=g(f);if(!symbolNeedsDraw$1(t,_,f,r)){a.remove(y);return}var b=t.getItemVisual(f,"symbol")||"circle",S=y&&y.getSymbolType&&y.getSymbolType();if(!y||S&&S!==b)a.remove(y),y=new l(t,f,d,v),y.setPosition(_);else{y.updateData(t,f,d,v);var x={x:_[0],y:_[1]};u?y.attr(x):updateProps$1(y,x,o)}a.add(y),t.setItemGraphicEl(f,y)}).remove(function(f){var c=s.getItemGraphicEl(f);c&&c.fadeOut(function(){a.remove(c)},o)}).execute(),this._getSymbolPoint=g,this._data=t},n.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(a,o){var s=t._getSymbolPoint(o);a.setPosition(s),a.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=makeSeriesScope$2(t),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,r,a){this._progressiveEls=[],a=normalizeUpdateOpt(a);function o(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var s=t.start;s<t.end;s++){var l=r.getItemLayout(s);if(symbolNeedsDraw$1(r,l,s,a)){var u=new this._SymbolCtor(r,s,this._seriesScope);u.traverse(o),u.setPosition(l),this.group.add(u),r.setItemGraphicEl(s,u),this._progressiveEls.push(u)}}},n.prototype.eachRendered=function(t){traverseElements(this._progressiveEls||this.group,t)},n.prototype.remove=function(t){var r=this.group,a=this._data;a&&t?a.eachItemGraphicEl(function(o){o.fadeOut(function(){r.remove(o)},a.hostModel)}):r.removeAll()},n}();const SymbolDraw$1=SymbolDraw;function prepareDataCoordInfo(n,t,r){var a=n.getBaseAxis(),o=n.getOtherAxis(a),s=getValueStart(o,r),l=a.dim,u=o.dim,d=t.mapDimension(u),v=t.mapDimension(l),g=u==="x"||u==="radius"?1:0,f=map$1(n.dimensions,function(_){return t.mapDimension(_)}),c=!1,y=t.getCalculationInfo("stackResultDimension");return isDimensionStacked(t,f[0])&&(c=!0,f[0]=y),isDimensionStacked(t,f[1])&&(c=!0,f[1]=y),{dataDimsForPoint:f,valueStart:s,valueAxisDim:u,baseAxisDim:l,stacked:!!c,valueDim:d,baseDim:v,baseDataOffset:g,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function getValueStart(n,t){var r=0,a=n.scale.getExtent();return t==="start"?r=a[0]:t==="end"?r=a[1]:isNumber(t)&&!isNaN(t)?r=t:a[0]>0?r=a[0]:a[1]<0&&(r=a[1]),r}function getStackedOnPoint(n,t,r,a){var o=NaN;n.stacked&&(o=r.get(r.getCalculationInfo("stackedOverDimension"),a)),isNaN(o)&&(o=n.valueStart);var s=n.baseDataOffset,l=[];return l[s]=r.get(n.baseDim,a),l[1-s]=o,t.dataToPoint(l)}function diffData(n,t){var r=[];return t.diff(n).add(function(a){r.push({cmd:"+",idx:a})}).update(function(a,o){r.push({cmd:"=",idx:o,idx1:a})}).remove(function(a){r.push({cmd:"-",idx:a})}).execute(),r}function lineAnimationDiff(n,t,r,a,o,s,l,u){for(var d=diffData(n,t),v=[],g=[],f=[],c=[],y=[],_=[],b=[],S=prepareDataCoordInfo(o,t,l),x=n.getLayout("points")||[],w=t.getLayout("points")||[],T=0;T<d.length;T++){var A=d[T],E=!0,$=void 0,P=void 0;switch(A.cmd){case"=":$=A.idx*2,P=A.idx1*2;var I=x[$],C=x[$+1],M=w[P],D=w[P+1];(isNaN(I)||isNaN(C))&&(I=M,C=D),v.push(I,C),g.push(M,D),f.push(r[$],r[$+1]),c.push(a[P],a[P+1]),b.push(t.getRawIndex(A.idx1));break;case"+":var R=A.idx,N=S.dataDimsForPoint,O=o.dataToPoint([t.get(N[0],R),t.get(N[1],R)]);P=R*2,v.push(O[0],O[1]),g.push(w[P],w[P+1]);var F=getStackedOnPoint(S,o,t,R);f.push(F[0],F[1]),c.push(a[P],a[P+1]),b.push(t.getRawIndex(R));break;case"-":E=!1}E&&(y.push(A),_.push(_.length))}_.sort(function(ie,pe){return b[ie]-b[pe]});for(var L=v.length,B=createFloat32Array(L),V=createFloat32Array(L),H=createFloat32Array(L),X=createFloat32Array(L),U=[],T=0;T<_.length;T++){var te=_[T],ee=T*2,q=te*2;B[ee]=v[q],B[ee+1]=v[q+1],V[ee]=g[q],V[ee+1]=g[q+1],H[ee]=f[q],H[ee+1]=f[q+1],X[ee]=c[q],X[ee+1]=c[q+1],U[T]=y[te]}return{current:B,next:V,stackedOnCurrent:H,stackedOnNext:X,status:U}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(n,t){return isNaN(n)||isNaN(t)}function drawSegment(n,t,r,a,o,s,l,u,d){for(var v,g,f,c,y,_,b=r,S=0;S<a;S++){var x=t[b*2],w=t[b*2+1];if(b>=o||b<0)break;if(isPointNull$1(x,w)){if(d){b+=s;continue}break}if(b===r)n[s>0?"moveTo":"lineTo"](x,w),f=x,c=w;else{var T=x-v,A=w-g;if(T*T+A*A<.5){b+=s;continue}if(l>0){for(var E=b+s,$=t[E*2],P=t[E*2+1];$===x&&P===w&&S<a;)S++,E+=s,b+=s,$=t[E*2],P=t[E*2+1],x=t[b*2],w=t[b*2+1],T=x-v,A=w-g;var I=S+1;if(d)for(;isPointNull$1($,P)&&I<a;)I++,E+=s,$=t[E*2],P=t[E*2+1];var C=.5,M=0,D=0,R=void 0,N=void 0;if(I>=a||isPointNull$1($,P))y=x,_=w;else{M=$-v,D=P-g;var O=x-v,F=$-x,L=w-g,B=P-w,V=void 0,H=void 0;if(u==="x"){V=Math.abs(O),H=Math.abs(F);var X=M>0?1:-1;y=x-X*V*l,_=w,R=x+X*H*l,N=w}else if(u==="y"){V=Math.abs(L),H=Math.abs(B);var U=D>0?1:-1;y=x,_=w-U*V*l,R=x,N=w+U*H*l}else V=Math.sqrt(O*O+L*L),H=Math.sqrt(F*F+B*B),C=H/(H+V),y=x-M*l*(1-C),_=w-D*l*(1-C),R=x+M*l*C,N=w+D*l*C,R=mathMin$5(R,mathMax$5($,x)),N=mathMin$5(N,mathMax$5(P,w)),R=mathMax$5(R,mathMin$5($,x)),N=mathMax$5(N,mathMin$5(P,w)),M=R-x,D=N-w,y=x-M*V/H,_=w-D*V/H,y=mathMin$5(y,mathMax$5(v,x)),_=mathMin$5(_,mathMax$5(g,w)),y=mathMax$5(y,mathMin$5(v,x)),_=mathMax$5(_,mathMin$5(g,w)),M=x-y,D=w-_,R=x+M*H/V,N=w+D*H/V}n.bezierCurveTo(f,c,y,_,x,w),f=R,c=N}else n.lineTo(x,w)}v=x,g=w,b+=s}return S}var ECPolylineShape=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),ECPolyline=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="ec-polyline",a}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ECPolylineShape},t.prototype.buildPath=function(r,a){var o=a.points,s=0,l=o.length/2;if(a.connectNulls){for(;l>0&&isPointNull$1(o[l*2-2],o[l*2-1]);l--);for(;s<l&&isPointNull$1(o[s*2],o[s*2+1]);s++);}for(;s<l;)s+=drawSegment(r,o,s,l,l,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},t.prototype.getPointOn=function(r,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o=this.path,s=o.data,l=PathProxy$1.CMD,u,d,v=a==="x",g=[],f=0;f<s.length;){var c=s[f++],y=void 0,_=void 0,b=void 0,S=void 0,x=void 0,w=void 0,T=void 0;switch(c){case l.M:u=s[f++],d=s[f++];break;case l.L:if(y=s[f++],_=s[f++],T=v?(r-u)/(y-u):(r-d)/(_-d),T<=1&&T>=0){var A=v?(_-d)*T+d:(y-u)*T+u;return v?[r,A]:[A,r]}u=y,d=_;break;case l.C:y=s[f++],_=s[f++],b=s[f++],S=s[f++],x=s[f++],w=s[f++];var E=v?cubicRootAt(u,y,b,x,r,g):cubicRootAt(d,_,S,w,r,g);if(E>0)for(var $=0;$<E;$++){var P=g[$];if(P<=1&&P>=0){var A=v?cubicAt(d,_,S,w,P):cubicAt(u,y,b,x,P);return v?[r,A]:[A,r]}}u=x,d=w;break}}},t}(Path$1),ECPolygonShape=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(ECPolylineShape),ECPolygon=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="ec-polygon",a}return t.prototype.getDefaultShape=function(){return new ECPolygonShape},t.prototype.buildPath=function(r,a){var o=a.points,s=a.stackedOnPoints,l=0,u=o.length/2,d=a.smoothMonotone;if(a.connectNulls){for(;u>0&&isPointNull$1(o[u*2-2],o[u*2-1]);u--);for(;l<u&&isPointNull$1(o[l*2],o[l*2+1]);l++);}for(;l<u;){var v=drawSegment(r,o,l,u,u,1,a.smooth,d,a.connectNulls);drawSegment(r,s,l+v-1,v,u,-1,a.stackedOnSmooth,d,a.connectNulls),l+=v+1,r.closePath()}},t}(Path$1);function createGridClipPath(n,t,r,a,o){var s=n.getArea(),l=s.x,u=s.y,d=s.width,v=s.height,g=r.get(["lineStyle","width"])||2;l-=g/2,u-=g/2,d+=g,v+=g,l=Math.floor(l),d=Math.round(d);var f=new Rect$3({shape:{x:l,y:u,width:d,height:v}});if(t){var c=n.getBaseAxis(),y=c.isHorizontal(),_=c.inverse;y?(_&&(f.shape.x+=d),f.shape.width=0):(_||(f.shape.y+=v),f.shape.height=0);var b=isFunction(o)?function(S){o(S,f)}:null;initProps(f,{shape:{width:d,height:v,x:l,y:u}},r,null,a,b)}return f}function createPolarClipPath(n,t,r){var a=n.getArea(),o=round$3(a.r0,1),s=round$3(a.r,1),l=new Sector$1({shape:{cx:round$3(n.cx,1),cy:round$3(n.cy,1),r0:o,r:s,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(t){var u=n.getBaseAxis().dim==="angle";u?l.shape.endAngle=a.startAngle:l.shape.r=o,initProps(l,{shape:{endAngle:a.endAngle,r:s}},r)}return l}function createClipPath(n,t,r,a,o){if(n){if(n.type==="polar")return createPolarClipPath(n,t,r);if(n.type==="cartesian2d")return createGridClipPath(n,t,r,a,o)}else return null;return null}function isCoordinateSystemType(n,t){return n.type===t}function isPointsSame(n,t){if(n.length===t.length){for(var r=0;r<n.length;r++)if(n[r]!==t[r])return;return!0}}function bboxFromPoints(n){for(var t=1/0,r=1/0,a=-1/0,o=-1/0,s=0;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||(t=Math.min(l,t),a=Math.max(l,a)),isNaN(u)||(r=Math.min(u,r),o=Math.max(u,o))}return[[t,r],[a,o]]}function getBoundingDiff(n,t){var r=bboxFromPoints(n),a=r[0],o=r[1],s=bboxFromPoints(t),l=s[0],u=s[1];return Math.max(Math.abs(a[0]-l[0]),Math.abs(a[1]-l[1]),Math.abs(o[0]-u[0]),Math.abs(o[1]-u[1]))}function getSmooth(n){return isNumber(n)?n:n?.5:0}function getStackedOnPoints(n,t,r){if(!r.valueDim)return[];for(var a=t.count(),o=createFloat32Array(a*2),s=0;s<a;s++){var l=getStackedOnPoint(r,n,t,s);o[s*2]=l[0],o[s*2+1]=l[1]}return o}function turnPointsIntoStep(n,t,r,a){var o=t.getBaseAxis(),s=o.dim==="x"||o.dim==="radius"?0:1,l=[],u=0,d=[],v=[],g=[],f=[];if(a){for(u=0;u<n.length;u+=2)!isNaN(n[u])&&!isNaN(n[u+1])&&f.push(n[u],n[u+1]);n=f}for(u=0;u<n.length-2;u+=2)switch(g[0]=n[u+2],g[1]=n[u+3],v[0]=n[u],v[1]=n[u+1],l.push(v[0],v[1]),r){case"end":d[s]=g[s],d[1-s]=v[1-s],l.push(d[0],d[1]);break;case"middle":var c=(v[s]+g[s])/2,y=[];d[s]=y[s]=c,d[1-s]=v[1-s],y[1-s]=g[1-s],l.push(d[0],d[1]),l.push(y[0],y[1]);break;default:d[s]=v[s],d[1-s]=g[1-s],l.push(d[0],d[1])}return l.push(n[u++],n[u++]),l}function clipColorStops(n,t){var r=[],a=n.length,o,s;function l(g,f,c){var y=g.coord,_=(c-y)/(f.coord-y),b=lerp(_,[g.color,f.color]);return{coord:c,color:b}}for(var u=0;u<a;u++){var d=n[u],v=d.coord;if(v<0)o=d;else if(v>t){s?r.push(l(s,d,t)):o&&r.push(l(o,d,0),l(o,d,t));break}else o&&(r.push(l(o,d,0)),o=null),r.push(d),s=d}return r}function getVisualGradient(n,t,r){var a=n.getVisual("visualMeta");if(!(!a||!a.length||!n.count())&&t.type==="cartesian2d"){for(var o,s,l=a.length-1;l>=0;l--){var u=n.getDimensionInfo(a[l].dimension);if(o=u&&u.coordDim,o==="x"||o==="y"){s=a[l];break}}if(s){var d=t.getAxis(o),v=map$1(s.stops,function(T){return{coord:d.toGlobalCoord(d.dataToCoord(T.value)),color:T.color}}),g=v.length,f=s.outerColors.slice();g&&v[0].coord>v[g-1].coord&&(v.reverse(),f.reverse());var c=clipColorStops(v,o==="x"?r.getWidth():r.getHeight()),y=c.length;if(!y&&g)return v[0].coord<0?f[1]?f[1]:v[g-1].color:f[0]?f[0]:v[0].color;var _=10,b=c[0].coord-_,S=c[y-1].coord+_,x=S-b;if(x<.001)return"transparent";each$f(c,function(T){T.offset=(T.coord-b)/x}),c.push({offset:y?c[y-1].offset:.5,color:f[1]||"transparent"}),c.unshift({offset:y?c[0].offset:.5,color:f[0]||"transparent"});var w=new LinearGradient$1(0,0,0,0,c,!0);return w[o]=b,w[o+"2"]=S,w}}}function getIsIgnoreFunc(n,t,r){var a=n.get("showAllSymbol"),o=a==="auto";if(!(a&&!o)){var s=r.getAxesByScale("ordinal")[0];if(s&&!(o&&canShowAllSymbolForCategory(s,t))){var l=t.mapDimension(s.dim),u={};return each$f(s.getViewLabels(),function(d){var v=s.scale.getRawOrdinalNumber(d.tickValue);u[v]=1}),function(d){return!u.hasOwnProperty(t.get(l,d))}}}}function canShowAllSymbolForCategory(n,t){var r=n.getExtent(),a=Math.abs(r[1]-r[0])/n.scale.count();isNaN(a)&&(a=0);for(var o=t.count(),s=Math.max(1,Math.round(o/5)),l=0;l<o;l+=s)if(SymbolClz.getSymbolSize(t,l)[n.isHorizontal()?1:0]*1.5>a)return!1;return!0}function isPointNull(n,t){return isNaN(n)||isNaN(t)}function getLastIndexNotNull(n){for(var t=n.length/2;t>0&&isPointNull(n[t*2-2],n[t*2-1]);t--);return t-1}function getPointAtIndex(n,t){return[n[t*2],n[t*2+1]]}function getIndexRange(n,t,r){for(var a=n.length/2,o=r==="x"?0:1,s,l,u=0,d=-1,v=0;v<a;v++)if(l=n[v*2+o],!(isNaN(l)||isNaN(n[v*2+1-o]))){if(v===0){s=l;continue}if(s<=t&&l>=t||s>=t&&l<=t){d=v;break}u=v,s=l}return{range:[u,d],t:(t-s)/(l-s)}}function anyStateShowEndLabel(n){if(n.get(["endLabel","show"]))return!0;for(var t=0;t<SPECIAL_STATES.length;t++)if(n.get([SPECIAL_STATES[t],"endLabel","show"]))return!0;return!1}function createLineClipPath(n,t,r,a){if(isCoordinateSystemType(t,"cartesian2d")){var o=a.getModel("endLabel"),s=o.get("valueAnimation"),l=a.getData(),u={lastFrameIndex:0},d=anyStateShowEndLabel(a)?function(y,_){n._endLabelOnDuring(y,_,l,u,s,o,t)}:null,v=t.getBaseAxis().isHorizontal(),g=createGridClipPath(t,r,a,function(){var y=n._endLabel;y&&r&&u.originalX!=null&&y.attr({x:u.originalX,y:u.originalY})},d);if(!a.get("clip",!0)){var f=g.shape,c=Math.max(f.width,f.height);v?(f.y-=c,f.height+=c*2):(f.x-=c,f.width+=c*2)}return d&&d(1,g),g}else return createPolarClipPath(t,r,a)}function getEndLabelStateSpecified(n,t){var r=t.getBaseAxis(),a=r.isHorizontal(),o=r.inverse,s=a?o?"right":"left":"center",l=a?"middle":o?"top":"bottom";return{normal:{align:n.get("align")||s,verticalAlign:n.get("verticalAlign")||l}}}var LineView=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(){var r=new Group$4,a=new SymbolDraw$1;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=r},t.prototype.render=function(r,a,o){var s=this,l=r.coordinateSystem,u=this.group,d=r.getData(),v=r.getModel("lineStyle"),g=r.getModel("areaStyle"),f=d.getLayout("points")||[],c=l.type==="polar",y=this._coordSys,_=this._symbolDraw,b=this._polyline,S=this._polygon,x=this._lineGroup,w=!a.ssr&&r.isAnimationEnabled(),T=!g.isEmpty(),A=g.get("origin"),E=prepareDataCoordInfo(l,d,A),$=T&&getStackedOnPoints(l,d,E),P=r.get("showSymbol"),I=r.get("connectNulls"),C=P&&!c&&getIsIgnoreFunc(r,d,l),M=this._data;M&&M.eachItemGraphicEl(function(pe,j){pe.__temp&&(u.remove(pe),M.setItemGraphicEl(j,null))}),P||_.remove(),u.add(x);var D=c?!1:r.get("step"),R;l&&l.getArea&&r.get("clip",!0)&&(R=l.getArea(),R.width!=null?(R.x-=.1,R.y-=.1,R.width+=.2,R.height+=.2):R.r0&&(R.r0-=.5,R.r+=.5)),this._clipShapeForSymbol=R;var N=getVisualGradient(d,l,o)||d.getVisual("style")[d.getVisual("drawType")];if(!(b&&y.type===l.type&&D===this._step))P&&_.updateData(d,{isIgnore:C,clipShape:R,disableAnimation:!0,getSymbolPoint:function(pe){return[f[pe*2],f[pe*2+1]]}}),w&&this._initSymbolLabelAnimation(d,l,R),D&&(f=turnPointsIntoStep(f,l,D,I),$&&($=turnPointsIntoStep($,l,D,I))),b=this._newPolyline(f),T?S=this._newPolygon(f,$):S&&(x.remove(S),S=this._polygon=null),c||this._initOrUpdateEndLabel(r,l,convertToColorString(N)),x.setClipPath(createLineClipPath(this,l,!0,r));else{T&&!S?S=this._newPolygon(f,$):S&&!T&&(x.remove(S),S=this._polygon=null),c||this._initOrUpdateEndLabel(r,l,convertToColorString(N));var O=x.getClipPath();if(O){var F=createLineClipPath(this,l,!1,r);initProps(O,{shape:F.shape},r)}else x.setClipPath(createLineClipPath(this,l,!0,r));P&&_.updateData(d,{isIgnore:C,clipShape:R,disableAnimation:!0,getSymbolPoint:function(pe){return[f[pe*2],f[pe*2+1]]}}),(!isPointsSame(this._stackedOnPoints,$)||!isPointsSame(this._points,f))&&(w?this._doUpdateAnimation(d,$,l,o,D,A,I):(D&&(f=turnPointsIntoStep(f,l,D,I),$&&($=turnPointsIntoStep($,l,D,I))),b.setShape({points:f}),S&&S.setShape({points:f,stackedOnPoints:$})))}var L=r.getModel("emphasis"),B=L.get("focus"),V=L.get("blurScope"),H=L.get("disabled");if(b.useStyle(defaults(v.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"})),setStatesStylesFromModel(b,r,"lineStyle"),b.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var X=b.getState("emphasis").style;X.lineWidth=+b.style.lineWidth+1}getECData(b).seriesIndex=r.seriesIndex,toggleHoverEmphasis(b,B,V,H);var U=getSmooth(r.get("smooth")),te=r.get("smoothMonotone");if(b.setShape({smooth:U,smoothMonotone:te,connectNulls:I}),S){var ee=d.getCalculationInfo("stackedOnSeries"),q=0;S.useStyle(defaults(g.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel",decal:d.getVisual("style").decal})),ee&&(q=getSmooth(ee.get("smooth"))),S.setShape({smooth:U,stackedOnSmooth:q,smoothMonotone:te,connectNulls:I}),setStatesStylesFromModel(S,r,"areaStyle"),getECData(S).seriesIndex=r.seriesIndex,toggleHoverEmphasis(S,B,V,H)}var ie=function(pe){s._changePolyState(pe)};d.eachItemGraphicEl(function(pe){pe&&(pe.onHoverStateChange=ie)}),this._polyline.onHoverStateChange=ie,this._data=d,this._coordSys=l,this._stackedOnPoints=$,this._points=f,this._step=D,this._valueOrigin=A,r.get("triggerLineEvent")&&(this.packEventData(r,b),S&&this.packEventData(r,S))},t.prototype.packEventData=function(r,a){getECData(a).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,a,o,s){var l=r.getData(),u=queryDataIndex(l,s);if(this._changePolyState("emphasis"),!(u instanceof Array)&&u!=null&&u>=0){var d=l.getLayout("points"),v=l.getItemGraphicEl(u);if(!v){var g=d[u*2],f=d[u*2+1];if(isNaN(g)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(g,f))return;var c=r.get("zlevel")||0,y=r.get("z")||0;v=new SymbolClz(l,u),v.x=g,v.y=f,v.setZ(c,y);var _=v.getSymbolPath().getTextContent();_&&(_.zlevel=c,_.z=y,_.z2=this._polyline.z2+1),v.__temp=!0,l.setItemGraphicEl(u,v),v.stopSymbolAnimation(!0),this.group.add(v)}v.highlight()}else ChartView$1.prototype.highlight.call(this,r,a,o,s)},t.prototype.downplay=function(r,a,o,s){var l=r.getData(),u=queryDataIndex(l,s);if(this._changePolyState("normal"),u!=null&&u>=0){var d=l.getItemGraphicEl(u);d&&(d.__temp?(l.setItemGraphicEl(u,null),this.group.remove(d)):d.downplay())}else ChartView$1.prototype.downplay.call(this,r,a,o,s)},t.prototype._changePolyState=function(r){var a=this._polygon;setStatesFlag(this._polyline,r),a&&setStatesFlag(a,r)},t.prototype._newPolyline=function(r){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new ECPolyline({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},t.prototype._newPolygon=function(r,a){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new ECPolygon({shape:{points:r,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},t.prototype._initSymbolLabelAnimation=function(r,a,o){var s,l,u=a.getBaseAxis(),d=u.inverse;a.type==="cartesian2d"?(s=u.isHorizontal(),l=!1):a.type==="polar"&&(s=u.dim==="angle",l=!0);var v=r.hostModel,g=v.get("animationDuration");isFunction(g)&&(g=g(null));var f=v.get("animationDelay")||0,c=isFunction(f)?f(null):f;r.eachItemGraphicEl(function(y,_){var b=y;if(b){var S=[y.x,y.y],x=void 0,w=void 0,T=void 0;if(o)if(l){var A=o,E=a.pointToCoord(S);s?(x=A.startAngle,w=A.endAngle,T=-E[1]/180*Math.PI):(x=A.r0,w=A.r,T=E[0])}else{var $=o;s?(x=$.x,w=$.x+$.width,T=y.x):(x=$.y+$.height,w=$.y,T=y.y)}var P=w===x?0:(T-x)/(w-x);d&&(P=1-P);var I=isFunction(f)?f(_):g*P+c,C=b.getSymbolPath(),M=C.getTextContent();b.attr({scaleX:0,scaleY:0}),b.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:I}),M&&M.animateFrom({style:{opacity:0}},{duration:300,delay:I}),C.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,a,o){var s=r.getModel("endLabel");if(anyStateShowEndLabel(r)){var l=r.getData(),u=this._polyline,d=l.getLayout("points");if(!d){u.removeTextContent(),this._endLabel=null;return}var v=this._endLabel;v||(v=this._endLabel=new ZRText$1({z2:200}),v.ignoreClip=!0,u.setTextContent(this._endLabel),u.disableLabelAnimation=!0);var g=getLastIndexNotNull(d);g>=0&&(setLabelStyle(u,getLabelStatesModels(r,"endLabel"),{inheritColor:o,labelFetcher:r,labelDataIndex:g,defaultText:function(f,c,y){return y!=null?getDefaultInterpolatedLabel(l,y):getDefaultLabel(l,f)},enableTextSetter:!0},getEndLabelStateSpecified(s,a)),u.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,a,o,s,l,u,d){var v=this._endLabel,g=this._polyline;if(v){r<1&&s.originalX==null&&(s.originalX=v.x,s.originalY=v.y);var f=o.getLayout("points"),c=o.hostModel,y=c.get("connectNulls"),_=u.get("precision"),b=u.get("distance")||0,S=d.getBaseAxis(),x=S.isHorizontal(),w=S.inverse,T=a.shape,A=w?x?T.x:T.y+T.height:x?T.x+T.width:T.y,E=(x?b:0)*(w?-1:1),$=(x?0:-b)*(w?-1:1),P=x?"x":"y",I=getIndexRange(f,A,P),C=I.range,M=C[1]-C[0],D=void 0;if(M>=1){if(M>1&&!y){var R=getPointAtIndex(f,C[0]);v.attr({x:R[0]+E,y:R[1]+$}),l&&(D=c.getRawValue(C[0]))}else{var R=g.getPointOn(A,P);R&&v.attr({x:R[0]+E,y:R[1]+$});var N=c.getRawValue(C[0]),O=c.getRawValue(C[1]);l&&(D=interpolateRawValues(o,_,N,O,I.t))}s.lastFrameIndex=C[0]}else{var F=r===1||s.lastFrameIndex>0?C[0]:0,R=getPointAtIndex(f,F);l&&(D=c.getRawValue(F)),v.attr({x:R[0]+E,y:R[1]+$})}l&&labelInner(v).setLabelText(D)}},t.prototype._doUpdateAnimation=function(r,a,o,s,l,u,d){var v=this._polyline,g=this._polygon,f=r.hostModel,c=lineAnimationDiff(this._data,r,this._stackedOnPoints,a,this._coordSys,o,this._valueOrigin),y=c.current,_=c.stackedOnCurrent,b=c.next,S=c.stackedOnNext;if(l&&(y=turnPointsIntoStep(c.current,o,l,d),_=turnPointsIntoStep(c.stackedOnCurrent,o,l,d),b=turnPointsIntoStep(c.next,o,l,d),S=turnPointsIntoStep(c.stackedOnNext,o,l,d)),getBoundingDiff(y,b)>3e3||g&&getBoundingDiff(_,S)>3e3){v.stopAnimation(),v.setShape({points:b}),g&&(g.stopAnimation(),g.setShape({points:b,stackedOnPoints:S}));return}v.shape.__points=c.current,v.shape.points=y;var x={shape:{points:b}};c.current!==y&&(x.shape.__points=c.next),v.stopAnimation(),updateProps$1(v,x,f),g&&(g.setShape({points:y,stackedOnPoints:_}),g.stopAnimation(),updateProps$1(g,{shape:{stackedOnPoints:S}},f),v.shape.points!==g.shape.points&&(g.shape.points=v.shape.points));for(var w=[],T=c.status,A=0;A<T.length;A++){var E=T[A].cmd;if(E==="="){var $=r.getItemGraphicEl(T[A].idx1);$&&w.push({el:$,ptIdx:A})}}v.animators&&v.animators.length&&v.animators[0].during(function(){g&&g.dirtyShape();for(var P=v.shape.__points,I=0;I<w.length;I++){var C=w[I].el,M=w[I].ptIdx*2;C.x=P[M],C.y=P[M+1],C.markRedraw()}})},t.prototype.remove=function(r){var a=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(s,l){s.__temp&&(a.remove(s),o.setItemGraphicEl(l,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ChartView$1);const LineView$1=LineView;function pointsLayout(n,t){return{seriesType:n,plan:createRenderPlanner(),reset:function(r){var a=r.getData(),o=r.coordinateSystem,s=r.pipelineContext,l=t||s.large;if(o){var u=map$1(o.dimensions,function(y){return a.mapDimension(y)}).slice(0,2),d=u.length,v=a.getCalculationInfo("stackResultDimension");isDimensionStacked(a,u[0])&&(u[0]=v),isDimensionStacked(a,u[1])&&(u[1]=v);var g=a.getStore(),f=a.getDimensionIndex(u[0]),c=a.getDimensionIndex(u[1]);return d&&{progress:function(y,_){for(var b=y.end-y.start,S=l&&createFloat32Array(b*d),x=[],w=[],T=y.start,A=0;T<y.end;T++){var E=void 0;if(d===1){var $=g.get(f,T);E=o.dataToPoint($,null,w)}else x[0]=g.get(f,T),x[1]=g.get(c,T),E=o.dataToPoint(x,null,w);l?(S[A++]=E[0],S[A++]=E[1]):_.setItemLayout(T,E.slice())}l&&_.setLayout("points",S)}}}}}}var samplers={average:function(n){for(var t=0,r=0,a=0;a<n.length;a++)isNaN(n[a])||(t+=n[a],r++);return r===0?NaN:t/r},sum:function(n){for(var t=0,r=0;r<n.length;r++)t+=n[r]||0;return t},max:function(n){for(var t=-1/0,r=0;r<n.length;r++)n[r]>t&&(t=n[r]);return isFinite(t)?t:NaN},min:function(n){for(var t=1/0,r=0;r<n.length;r++)n[r]<t&&(t=n[r]);return isFinite(t)?t:NaN},nearest:function(n){return n[0]}},indexSampler=function(n){return Math.round(n.length/2)};function dataSample(n){return{seriesType:n,reset:function(t,r,a){var o=t.getData(),s=t.get("sampling"),l=t.coordinateSystem,u=o.count();if(u>10&&l.type==="cartesian2d"&&s){var d=l.getBaseAxis(),v=l.getOtherAxis(d),g=d.getExtent(),f=a.getDevicePixelRatio(),c=Math.abs(g[1]-g[0])*(f||1),y=Math.round(u/c);if(isFinite(y)&&y>1){s==="lttb"&&t.setData(o.lttbDownSample(o.mapDimension(v.dim),1/y));var _=void 0;isString(s)?_=samplers[s]:isFunction(s)&&(_=s),_&&t.setData(o.downSample(o.mapDimension(v.dim),1/y,_,indexSampler))}}}}}function install$Q(n){n.registerChartView(LineView$1),n.registerSeriesModel(LineSeries),n.registerLayout(pointsLayout("line",!0)),n.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),a=t.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",a)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r,a,o){var s=this.coordinateSystem;if(s&&s.clampData){var l=s.clampData(r),u=s.dataToPoint(l);if(o)each$f(s.getAxes(),function(c,y){if(c.type==="category"&&a!=null){var _=c.getTicksCoords(),b=l[y],S=a[y]==="x1"||a[y]==="y1";if(S&&(b+=1),_.length<2)return;if(_.length===2){u[y]=c.toGlobalCoord(c.getExtent()[S?1:0]);return}for(var x=void 0,w=void 0,T=1,A=0;A<_.length;A++){var E=_[A].coord,$=A===_.length-1?_[A-1].tickValue+T:_[A].tickValue;if($===b){w=E;break}else if($<b)x=E;else if(x!=null&&$>b){w=(E+x)/2;break}A===1&&(T=$-_[0].tickValue)}w==null&&(x?x&&(w=_[_.length-1].coord):w=_[0].coord),u[y]=c.toGlobalCoord(w)}});else{var d=this.getData(),v=d.getLayout("offset"),g=d.getLayout("size"),f=s.getBaseAxis().isHorizontal()?0:1;u[f]+=v+g/2}return u}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(SeriesModel$1);SeriesModel$1.registerClass(BaseBarSeriesModel);const BaseBarSeriesModel$1=BaseBarSeriesModel;var BarSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),a=this.get("largeThreshold");return a>r&&(r=a),r},t.prototype.brushSelector=function(r,a,o){return o.rect(a.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=inheritDefaultOption(BaseBarSeriesModel$1.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(BaseBarSeriesModel$1);const BarSeries=BarSeriesModel;var SausageShape=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),SausagePath=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="sausage",a}return t.prototype.getDefaultShape=function(){return new SausageShape},t.prototype.buildPath=function(r,a){var o=a.cx,s=a.cy,l=Math.max(a.r0||0,0),u=Math.max(a.r,0),d=(u-l)*.5,v=l+d,g=a.startAngle,f=a.endAngle,c=a.clockwise,y=Math.PI*2,_=c?f-g<y:g-f<y;_||(g=f-(c?y:-y));var b=Math.cos(g),S=Math.sin(g),x=Math.cos(f),w=Math.sin(f);_?(r.moveTo(b*l+o,S*l+s),r.arc(b*v+o,S*v+s,d,-Math.PI+g,g,!c)):r.moveTo(b*u+o,S*u+s),r.arc(o,s,u,g,f,!c),r.arc(x*v+o,w*v+s,d,f-Math.PI*2,f-Math.PI,!c),l!==0&&r.arc(o,s,l,f,g,c)},t}(Path$1);const Sausage=SausagePath;function createSectorCalculateTextPosition(n,t){t=t||{};var r=t.isRoundCap;return function(a,o,s){var l=o.position;if(!l||l instanceof Array)return calculateTextPosition(a,o,s);var u=n(l),d=o.distance!=null?o.distance:5,v=this.shape,g=v.cx,f=v.cy,c=v.r,y=v.r0,_=(c+y)/2,b=v.startAngle,S=v.endAngle,x=(b+S)/2,w=r?Math.abs(c-y)/2:0,T=Math.cos,A=Math.sin,E=g+c*T(b),$=f+c*A(b),P="left",I="top";switch(u){case"startArc":E=g+(y-d)*T(x),$=f+(y-d)*A(x),P="center",I="top";break;case"insideStartArc":E=g+(y+d)*T(x),$=f+(y+d)*A(x),P="center",I="bottom";break;case"startAngle":E=g+_*T(b)+adjustAngleDistanceX(b,d+w,!1),$=f+_*A(b)+adjustAngleDistanceY(b,d+w,!1),P="right",I="middle";break;case"insideStartAngle":E=g+_*T(b)+adjustAngleDistanceX(b,-d+w,!1),$=f+_*A(b)+adjustAngleDistanceY(b,-d+w,!1),P="left",I="middle";break;case"middle":E=g+_*T(x),$=f+_*A(x),P="center",I="middle";break;case"endArc":E=g+(c+d)*T(x),$=f+(c+d)*A(x),P="center",I="bottom";break;case"insideEndArc":E=g+(c-d)*T(x),$=f+(c-d)*A(x),P="center",I="top";break;case"endAngle":E=g+_*T(S)+adjustAngleDistanceX(S,d+w,!0),$=f+_*A(S)+adjustAngleDistanceY(S,d+w,!0),P="left",I="middle";break;case"insideEndAngle":E=g+_*T(S)+adjustAngleDistanceX(S,-d+w,!0),$=f+_*A(S)+adjustAngleDistanceY(S,-d+w,!0),P="right",I="middle";break;default:return calculateTextPosition(a,o,s)}return a=a||{},a.x=E,a.y=$,a.align=P,a.verticalAlign=I,a}}function setSectorTextRotation(n,t,r,a){if(isNumber(a)){n.setTextConfig({rotation:a});return}else if(isArray$1(t)){n.setTextConfig({rotation:0});return}var o=n.shape,s=o.clockwise?o.startAngle:o.endAngle,l=o.clockwise?o.endAngle:o.startAngle,u=(s+l)/2,d,v=r(t);switch(v){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":d=u;break;case"startAngle":case"insideStartAngle":d=s;break;case"endAngle":case"insideEndAngle":d=l;break;default:n.setTextConfig({rotation:0});return}var g=Math.PI*1.5-d;v==="middle"&&g>Math.PI/2&&g<Math.PI*1.5&&(g-=Math.PI),n.setTextConfig({rotation:g})}function adjustAngleDistanceX(n,t,r){return t*Math.sin(n)*(r?-1:1)}function adjustAngleDistanceY(n,t,r){return t*Math.cos(n)*(r?1:-1)}function getSectorCornerRadius(n,t,r){var a=n.get("borderRadius");if(a==null)return r?{cornerRadius:0}:null;isArray$1(a)||(a=[a,a,a,a]);var o=Math.abs(t.r||0-t.r0||0);return{cornerRadius:map$1(a,function(s){return parsePercent$1(s,o)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(n,t){var r=n.getArea&&n.getArea();if(isCoordinateSystemType(n,"cartesian2d")){var a=n.getBaseAxis();if(a.type!=="category"||!a.onBand){var o=t.getLayout("bandWidth");a.isHorizontal()?(r.x-=o,r.width+=o*2):(r.y-=o,r.height+=o*2)}}return r}var BarView=function(n){__extends$1(t,n);function t(){var r=n.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,a,o,s){this._model=r,this._removeOnRenderedListener(o),this._updateDrawMode(r);var l=r.get("coordinateSystem");(l==="cartesian2d"||l==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,a,o):this._renderNormal(r,a,o,s))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,a){this._progressiveEls=[],this._incrementalRenderLarge(r,a)},t.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var a=r.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},t.prototype._renderNormal=function(r,a,o,s){var l=this.group,u=r.getData(),d=this._data,v=r.coordinateSystem,g=v.getBaseAxis(),f;v.type==="cartesian2d"?f=g.isHorizontal():v.type==="polar"&&(f=g.dim==="angle");var c=r.isAnimationEnabled()?r:null,y=shouldRealtimeSort(r,v);y&&this._enableRealtimeSort(y,u,o);var _=r.get("clip",!0)||y,b=getClipArea(v,u);l.removeClipPath();var S=r.get("roundCap",!0),x=r.get("showBackground",!0),w=r.getModel("backgroundStyle"),T=w.get("borderRadius")||0,A=[],E=this._backgroundEls,$=s&&s.isInitSort,P=s&&s.type==="changeAxisOrder";function I(D){var R=getLayout[v.type](u,D),N=createBackgroundEl(v,f,R);return N.useStyle(w.getItemStyle()),v.type==="cartesian2d"?N.setShape("r",T):N.setShape("cornerRadius",T),A[D]=N,N}u.diff(d).add(function(D){var R=u.getItemModel(D),N=getLayout[v.type](u,D,R);if(x&&I(D),!(!u.hasValue(D)||!isValidLayout[v.type](N))){var O=!1;_&&(O=clip[v.type](b,N));var F=elementCreator[v.type](r,u,D,N,f,c,g.model,!1,S);y&&(F.forceLabelAnimation=!0),updateStyle(F,u,D,R,N,r,f,v.type==="polar"),$?F.attr({shape:N}):y?updateRealtimeAnimation(y,c,F,N,D,f,!1,!1):initProps(F,{shape:N},r,D),u.setItemGraphicEl(D,F),l.add(F),F.ignore=O}}).update(function(D,R){var N=u.getItemModel(D),O=getLayout[v.type](u,D,N);if(x){var F=void 0;E.length===0?F=I(R):(F=E[R],F.useStyle(w.getItemStyle()),v.type==="cartesian2d"?F.setShape("r",T):F.setShape("cornerRadius",T),A[D]=F);var L=getLayout[v.type](u,D),B=createBackgroundShape(f,L,v);updateProps$1(F,{shape:B},c,D)}var V=d.getItemGraphicEl(R);if(!u.hasValue(D)||!isValidLayout[v.type](O)){l.remove(V);return}var H=!1;if(_&&(H=clip[v.type](b,O),H&&l.remove(V)),V?saveOldStyle(V):V=elementCreator[v.type](r,u,D,O,f,c,g.model,!!V,S),y&&(V.forceLabelAnimation=!0),P){var X=V.getTextContent();if(X){var U=labelInner(X);U.prevValue!=null&&(U.prevValue=U.value)}}else updateStyle(V,u,D,N,O,r,f,v.type==="polar");$?V.attr({shape:O}):y?updateRealtimeAnimation(y,c,V,O,D,f,!0,P):updateProps$1(V,{shape:O},r,D,null),u.setItemGraphicEl(D,V),V.ignore=H,l.add(V)}).remove(function(D){var R=d.getItemGraphicEl(D);R&&removeElementWithFadeOut(R,r,D)}).execute();var C=this._backgroundGroup||(this._backgroundGroup=new Group$4);C.removeAll();for(var M=0;M<A.length;++M)C.add(A[M]);l.add(C),this._backgroundEls=A,this._data=u},t.prototype._renderLarge=function(r,a,o){this._clear(),createLarge$1(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,a){this._removeBackground(),createLarge$1(a,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var a=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r),o=this.group;a?o.setClipPath(a):o.removeClipPath()},t.prototype._enableRealtimeSort=function(r,a,o){var s=this;if(a.count()){var l=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(a,r,o),this._isFirstFrame=!1;else{var u=function(d){var v=a.getItemGraphicEl(d),g=v&&v.shape;return g&&Math.abs(l.isHorizontal()?g.height:g.width)||0};this._onRendered=function(){s._updateSortWithinSameData(a,u,l,o)},o.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,a,o){var s=[];return r.each(r.mapDimension(a.dim),function(l,u){var d=o(u);d=d??NaN,s.push({dataIndex:u,mappedValue:d,ordinalNumber:l})}),s.sort(function(l,u){return u.mappedValue-l.mappedValue}),{ordinalNumbers:map$1(s,function(l){return l.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,a,o){for(var s=o.scale,l=r.mapDimension(o.dim),u=Number.MAX_VALUE,d=0,v=s.getOrdinalMeta().categories.length;d<v;++d){var g=r.rawIndexOf(l,s.getRawOrdinalNumber(d)),f=g<0?Number.MIN_VALUE:a(r.indexOfRawIndex(g));if(f>u)return!0;u=f}return!1},t.prototype._isOrderDifferentInView=function(r,a){for(var o=a.scale,s=o.getExtent(),l=Math.max(0,s[0]),u=Math.min(s[1],o.getOrdinalMeta().categories.length-1);l<=u;++l)if(r.ordinalNumbers[l]!==o.getRawOrdinalNumber(l))return!0},t.prototype._updateSortWithinSameData=function(r,a,o,s){if(this._isOrderChangedWithinSameData(r,a,o)){var l=this._dataSort(r,o,a);this._isOrderDifferentInView(l,o)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",axisId:o.index,sortInfo:l}))}},t.prototype._dispatchInitSort=function(r,a,o){var s=a.baseAxis,l=this._dataSort(r,s,function(u){return r.get(r.mapDimension(a.otherAxis.dim),u)});o.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:l})},t.prototype.remove=function(r,a){this._clear(this._model),this._removeOnRenderedListener(a)},t.prototype.dispose=function(r,a){this._removeOnRenderedListener(a)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var a=this.group,o=this._data;r&&r.isAnimationEnabled()&&o&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],o.eachItemGraphicEl(function(s){removeElementWithFadeOut(s,r,getECData(s).dataIndex)})):a.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(ChartView$1),clip={cartesian2d:function(n,t){var r=t.width<0?-1:1,a=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var o=n.x+n.width,s=n.y+n.height,l=mathMax$4(t.x,n.x),u=mathMin$4(t.x+t.width,o),d=mathMax$4(t.y,n.y),v=mathMin$4(t.y+t.height,s),g=u<l,f=v<d;return t.x=g&&l>o?u:l,t.y=f&&d>s?v:d,t.width=g?0:u-l,t.height=f?0:v-d,r<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),g||f},polar:function(n,t){var r=t.r0<=t.r?1:-1;if(r<0){var a=t.r;t.r=t.r0,t.r0=a}var o=mathMin$4(t.r,n.r),s=mathMax$4(t.r0,n.r0);t.r=o,t.r0=s;var l=o-s<0;if(r<0){var a=t.r;t.r=t.r0,t.r0=a}return l}},elementCreator={cartesian2d:function(n,t,r,a,o,s,l,u,d){var v=new Rect$3({shape:extend({},a),z2:1});if(v.__dataIndex=r,v.name="item",s){var g=v.shape,f=o?"height":"width";g[f]=0}return v},polar:function(n,t,r,a,o,s,l,u,d){var v=!o&&d?Sausage:Sector$1,g=new v({shape:a,z2:1});g.name="item";var f=createPolarPositionMapping(o);if(g.calculateTextPosition=createSectorCalculateTextPosition(f,{isRoundCap:v===Sausage}),s){var c=g.shape,y=o?"r":"endAngle",_={};c[y]=o?a.r0:a.startAngle,_[y]=a[y],(u?updateProps$1:initProps)(g,{shape:_},s)}return g}};function shouldRealtimeSort(n,t){var r=n.get("realtimeSort",!0),a=t.getBaseAxis();if(r&&a.type==="category"&&t.type==="cartesian2d")return{baseAxis:a,otherAxis:t.getOtherAxis(a)}}function updateRealtimeAnimation(n,t,r,a,o,s,l,u){var d,v;s?(v={x:a.x,width:a.width},d={y:a.y,height:a.height}):(v={y:a.y,height:a.height},d={x:a.x,width:a.width}),u||(l?updateProps$1:initProps)(r,{shape:d},t,o,null);var g=t?n.baseAxis.model:null;(l?updateProps$1:initProps)(r,{shape:v},g,o)}function checkPropertiesNotValid(n,t){for(var r=0;r<t.length;r++)if(!isFinite(n[t[r]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(n){return!checkPropertiesNotValid(n,rectPropties)},polar:function(n){return!checkPropertiesNotValid(n,polarPropties)}},getLayout={cartesian2d:function(n,t,r){var a=n.getItemLayout(t),o=r?getLineWidth(r,a):0,s=a.width>0?1:-1,l=a.height>0?1:-1;return{x:a.x+s*o/2,y:a.y+l*o/2,width:a.width-s*o,height:a.height-l*o}},polar:function(n,t,r){var a=n.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function isZeroOnPolar(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function createPolarPositionMapping(n){return function(t){var r=t?"Arc":"Angle";return function(a){switch(a){case"start":case"insideStart":case"end":case"insideEnd":return a+r;default:return a}}}(n)}function updateStyle(n,t,r,a,o,s,l,u){var d=t.getItemVisual(r,"style");if(u){if(!s.get("roundCap")){var g=n.shape,f=getSectorCornerRadius(a.getModel("itemStyle"),g,!0);extend(g,f),n.setShape(g)}}else{var v=a.get(["itemStyle","borderRadius"])||0;n.setShape("r",v)}n.useStyle(d);var c=a.getShallow("cursor");c&&n.attr("cursor",c);var y=u?l?o.r>=o.r0?"endArc":"startArc":o.endAngle>=o.startAngle?"endAngle":"startAngle":l?o.height>=0?"bottom":"top":o.width>=0?"right":"left",_=getLabelStatesModels(a);setLabelStyle(n,_,{labelFetcher:s,labelDataIndex:r,defaultText:getDefaultLabel(s.getData(),r),inheritColor:d.fill,defaultOpacity:d.opacity,defaultOutsidePosition:y});var b=n.getTextContent();if(u&&b){var S=a.get(["label","position"]);n.textConfig.inside=S==="middle"?!0:null,setSectorTextRotation(n,S==="outside"?y:S,createPolarPositionMapping(l),a.get(["label","rotate"]))}setLabelValueAnimation(b,_,s.getRawValue(r),function(w){return getDefaultInterpolatedLabel(t,w)});var x=a.getModel(["emphasis"]);toggleHoverEmphasis(n,x.get("focus"),x.get("blurScope"),x.get("disabled")),setStatesStylesFromModel(n,a),isZeroOnPolar(o)&&(n.style.fill="none",n.style.stroke="none",each$f(n.states,function(w){w.style&&(w.style.fill=w.style.stroke="none")}))}function getLineWidth(n,t){var r=n.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var a=n.get(["itemStyle","borderWidth"])||0,o=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),s=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(a,o,s)}var LagePathShape=function(){function n(){}return n}(),LargePath=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="largeBar",a}return t.prototype.getDefaultShape=function(){return new LagePathShape},t.prototype.buildPath=function(r,a){for(var o=a.points,s=this.baseDimIdx,l=1-this.baseDimIdx,u=[],d=[],v=this.barWidth,g=0;g<o.length;g+=3)d[s]=v,d[l]=o[g+2],u[s]=o[g+s],u[l]=o[g+l],r.rect(u[0],u[1],d[0],d[1])},t}(Path$1);function createLarge$1(n,t,r,a){var o=n.getData(),s=o.getLayout("valueAxisHorizontal")?1:0,l=o.getLayout("largeDataIndices"),u=o.getLayout("size"),d=n.getModel("backgroundStyle"),v=o.getLayout("largeBackgroundPoints");if(v){var g=new LargePath({shape:{points:v},incremental:!!a,silent:!0,z2:0});g.baseDimIdx=s,g.largeDataIndices=l,g.barWidth=u,g.useStyle(d.getItemStyle()),t.add(g),r&&r.push(g)}var f=new LargePath({shape:{points:o.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=s,f.largeDataIndices=l,f.barWidth=u,t.add(f),f.useStyle(o.getVisual("style")),getECData(f).seriesIndex=n.seriesIndex,n.get("silent")||(f.on("mousedown",largePathUpdateDataIndex),f.on("mousemove",largePathUpdateDataIndex)),r&&r.push(f)}var largePathUpdateDataIndex=throttle(function(n){var t=this,r=largePathFindDataIndex(t,n.offsetX,n.offsetY);getECData(t).dataIndex=r>=0?r:null},30,!1);function largePathFindDataIndex(n,t,r){for(var a=n.baseDimIdx,o=1-a,s=n.shape.points,l=n.largeDataIndices,u=[],d=[],v=n.barWidth,g=0,f=s.length/3;g<f;g++){var c=g*3;if(d[a]=v,d[o]=s[c+2],u[a]=s[c+a],u[o]=s[c+o],d[o]<0&&(u[o]+=d[o],d[o]=-d[o]),t>=u[0]&&t<=u[0]+d[0]&&r>=u[1]&&r<=u[1]+d[1])return l[g]}return-1}function createBackgroundShape(n,t,r){if(isCoordinateSystemType(r,"cartesian2d")){var a=t,o=r.getArea();return{x:n?a.x:o.x,y:n?o.y:a.y,width:n?a.width:o.width,height:n?o.height:a.height}}else{var o=r.getArea(),s=t;return{cx:o.cx,cy:o.cy,r0:n?o.r0:s.r0,r:n?o.r:s.r,startAngle:n?s.startAngle:0,endAngle:n?s.endAngle:Math.PI*2}}}function createBackgroundEl(n,t,r){var a=n.type==="polar"?Sector$1:Rect$3;return new a({shape:createBackgroundShape(t,r,n),silent:!0,z2:0})}const BarView$1=BarView;function install$P(n){n.registerChartView(BarView$1),n.registerSeriesModel(BarSeries),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var a=t.componentType||"series";r.eachComponent({mainType:a,query:t},function(o){t.sortInfo&&o.axis.setCategorySortInfo(t.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(n,t){return getLayoutRect(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function getBasicPieLayout(n,t){var r=getViewRect$5(n,t),a=n.get("center"),o=n.get("radius");isArray$1(o)||(o=[0,o]);var s=parsePercent(r.width,t.getWidth()),l=parsePercent(r.height,t.getHeight()),u=Math.min(s,l),d=parsePercent(o[0],u/2),v=parsePercent(o[1],u/2),g,f,c=n.coordinateSystem;if(c){var y=c.dataToPoint(a);g=y[0]||0,f=y[1]||0}else isArray$1(a)||(a=[a,a]),g=parsePercent(a[0],s)+r.x,f=parsePercent(a[1],l)+r.y;return{cx:g,cy:f,r0:d,r:v}}function pieLayout(n,t,r){t.eachSeriesByType(n,function(a){var o=a.getData(),s=o.mapDimension("value"),l=getViewRect$5(a,r),u=getBasicPieLayout(a,r),d=u.cx,v=u.cy,g=u.r,f=u.r0,c=-a.get("startAngle")*RADIAN$2,y=a.get("minAngle")*RADIAN$2,_=0;o.each(s,function(M){!isNaN(M)&&_++});var b=o.getSum(s),S=Math.PI/(b||_)*2,x=a.get("clockwise"),w=a.get("roseType"),T=a.get("stillShowZeroSum"),A=o.getDataExtent(s);A[0]=0;var E=PI2,$=0,P=c,I=x?1:-1;if(o.setLayout({viewRect:l,r:g}),o.each(s,function(M,D){var R;if(isNaN(M)){o.setItemLayout(D,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:d,cy:v,r0:f,r:w?NaN:g});return}w!=="area"?R=b===0&&T?S:M*S:R=PI2/_,R<y?(R=y,E-=y):$+=M;var N=P+I*R;o.setItemLayout(D,{angle:R,startAngle:P,endAngle:N,clockwise:x,cx:d,cy:v,r0:f,r:w?linearMap$2(M,A,[f,g]):g}),P=N}),E<PI2&&_)if(E<=.001){var C=PI2/_;o.each(s,function(M,D){if(!isNaN(M)){var R=o.getItemLayout(D);R.angle=C,R.startAngle=c+I*D*C,R.endAngle=c+I*(D+1)*C}})}else S=E/$,P=c,o.each(s,function(M,D){if(!isNaN(M)){var R=o.getItemLayout(D),N=R.angle===y?y:M*S;R.startAngle=P,R.endAngle=P+I*N,P+=I*N}})})}function dataFilter$1(n){return{seriesType:n,reset:function(t,r){var a=r.findComponents({mainType:"legend"});if(!(!a||!a.length)){var o=t.getData();o.filterSelf(function(s){for(var l=o.getName(s),u=0;u<a.length;u++)if(!a[u].isSelected(l))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(n,t,r,a,o,s,l,u,d,v){if(n.length<2)return;function g(b){for(var S=b.rB,x=S*S,w=0;w<b.list.length;w++){var T=b.list[w],A=Math.abs(T.label.y-r),E=a+T.len,$=E*E,P=Math.sqrt((1-Math.abs(A*A/x))*$),I=t+(P+T.len2)*o,C=I-T.label.x,M=T.targetTextWidth-C*o;constrainTextWidth(T,M,!0),T.label.x=I}}function f(b){for(var S={list:[],maxY:0},x={list:[],maxY:0},w=0;w<b.length;w++)if(b[w].labelAlignTo==="none"){var T=b[w],A=T.label.y>r?x:S,E=Math.abs(T.label.y-r);if(E>=A.maxY){var $=T.label.x-t-T.len2*o,P=a+T.len,I=Math.abs($)<P?Math.sqrt(E*E/(1-$*$/P/P)):P;A.rB=I,A.maxY=E}A.list.push(T)}g(S),g(x)}for(var c=n.length,y=0;y<c;y++)if(n[y].position==="outer"&&n[y].labelAlignTo==="labelLine"){var _=n[y].label.x-v;n[y].linePoints[1][0]+=_,n[y].label.x=v}shiftLayoutOnY(n,d,d+l)&&f(n)}function avoidOverlap(n,t,r,a,o,s,l,u){for(var d=[],v=[],g=Number.MAX_VALUE,f=-Number.MAX_VALUE,c=0;c<n.length;c++){var y=n[c].label;isPositionCenter(n[c])||(y.x<t?(g=Math.min(g,y.x),d.push(n[c])):(f=Math.max(f,y.x),v.push(n[c])))}for(var c=0;c<n.length;c++){var _=n[c];if(!isPositionCenter(_)&&_.linePoints){if(_.labelStyleWidth!=null)continue;var y=_.label,b=_.linePoints,S=void 0;_.labelAlignTo==="edge"?y.x<t?S=b[2][0]-_.labelDistance-l-_.edgeDistance:S=l+o-_.edgeDistance-b[2][0]-_.labelDistance:_.labelAlignTo==="labelLine"?y.x<t?S=g-l-_.bleedMargin:S=l+o-f-_.bleedMargin:y.x<t?S=y.x-l-_.bleedMargin:S=l+o-y.x-_.bleedMargin,_.targetTextWidth=S,constrainTextWidth(_,S)}}adjustSingleSide(v,t,r,a,1,o,s,l,u,f),adjustSingleSide(d,t,r,a,-1,o,s,l,u,g);for(var c=0;c<n.length;c++){var _=n[c];if(!isPositionCenter(_)&&_.linePoints){var y=_.label,b=_.linePoints,x=_.labelAlignTo==="edge",w=y.style.padding,T=w?w[1]+w[3]:0,A=y.style.backgroundColor?0:T,E=_.rect.width+A,$=b[1][0]-b[2][0];x?y.x<t?b[2][0]=l+_.edgeDistance+E+_.labelDistance:b[2][0]=l+o-_.edgeDistance-E-_.labelDistance:(y.x<t?b[2][0]=y.x+_.labelDistance:b[2][0]=y.x-_.labelDistance,b[1][0]=b[2][0]+$),b[1][1]=b[2][1]=y.y}}}function constrainTextWidth(n,t,r){if(r===void 0&&(r=!1),n.labelStyleWidth==null){var a=n.label,o=a.style,s=n.rect,l=o.backgroundColor,u=o.padding,d=u?u[1]+u[3]:0,v=o.overflow,g=s.width+(l?0:d);if(t<g||r){var f=s.height;if(v&&v.match("break")){a.setStyle("backgroundColor",null),a.setStyle("width",t-d);var c=a.getBoundingRect();a.setStyle("width",Math.ceil(c.width)),a.setStyle("backgroundColor",l)}else{var y=t-d,_=t<g?y:r?y>n.unconstrainedWidth?null:y:null;a.setStyle("width",_)}var b=a.getBoundingRect();s.width=b.width;var S=(a.style.margin||0)+2.1;s.height=b.height+S,s.y-=(s.height-f)/2}}}function isPositionCenter(n){return n.position==="center"}function pieLabelLayout(n){var t=n.getData(),r=[],a,o,s=!1,l=(n.get("minShowLabelAngle")||0)*RADIAN$1,u=t.getLayout("viewRect"),d=t.getLayout("r"),v=u.width,g=u.x,f=u.y,c=u.height;function y($){$.ignore=!0}function _($){if(!$.ignore)return!0;for(var P in $.states)if($.states[P].ignore===!1)return!0;return!1}t.each(function($){var P=t.getItemGraphicEl($),I=P.shape,C=P.getTextContent(),M=P.getTextGuideLine(),D=t.getItemModel($),R=D.getModel("label"),N=R.get("position")||D.get(["emphasis","label","position"]),O=R.get("distanceToLabelLine"),F=R.get("alignTo"),L=parsePercent(R.get("edgeDistance"),v),B=R.get("bleedMargin"),V=D.getModel("labelLine"),H=V.get("length");H=parsePercent(H,v);var X=V.get("length2");if(X=parsePercent(X,v),Math.abs(I.endAngle-I.startAngle)<l){each$f(C.states,y),C.ignore=!0,M&&(each$f(M.states,y),M.ignore=!0);return}if(_(C)){var U=(I.startAngle+I.endAngle)/2,te=Math.cos(U),ee=Math.sin(U),q,ie,pe,j;a=I.cx,o=I.cy;var Q=N==="inside"||N==="inner";if(N==="center")q=I.cx,ie=I.cy,j="center";else{var J=(Q?(I.r+I.r0)/2*te:I.r*te)+a,oe=(Q?(I.r+I.r0)/2*ee:I.r*ee)+o;if(q=J+te*3,ie=oe+ee*3,!Q){var ne=J+te*(H+d-I.r),z=oe+ee*(H+d-I.r),W=ne+(te<0?-1:1)*X,Z=z;F==="edge"?q=te<0?g+L:g+v-L:q=W+(te<0?-O:O),ie=Z,pe=[[J,oe],[ne,z],[W,Z]]}j=Q?"center":F==="edge"?te>0?"right":"left":te>0?"left":"right"}var ae=Math.PI,se=0,ce=R.get("rotate");if(isNumber(ce))se=ce*(ae/180);else if(N==="center")se=0;else if(ce==="radial"||ce===!0){var _e=te<0?-U+ae:-U;se=_e}else if(ce==="tangential"&&N!=="outside"&&N!=="outer"){var ge=Math.atan2(te,ee);ge<0&&(ge=ae*2+ge);var me=ee>0;me&&(ge=ae+ge),se=ge-ae}if(s=!!se,C.x=q,C.y=ie,C.rotation=se,C.setStyle({verticalAlign:"middle"}),Q){C.setStyle({align:j});var be=C.states.select;be&&(be.x+=C.x,be.y+=C.y)}else{var de=C.getBoundingRect().clone();de.applyTransform(C.getComputedTransform());var xe=(C.style.margin||0)+2.1;de.y-=xe/2,de.height+=xe,r.push({label:C,labelLine:M,position:N,len:H,len2:X,minTurnAngle:V.get("minTurnAngle"),maxSurfaceAngle:V.get("maxSurfaceAngle"),surfaceNormal:new Point$1(te,ee),linePoints:pe,textAlign:j,labelDistance:O,labelAlignTo:F,edgeDistance:L,bleedMargin:B,rect:de,unconstrainedWidth:de.width,labelStyleWidth:C.style.width})}P.setTextConfig({inside:Q})}}),!s&&n.get("avoidLabelOverlap")&&avoidOverlap(r,a,o,d,v,c,g,f);for(var b=0;b<r.length;b++){var S=r[b],x=S.label,w=S.labelLine,T=isNaN(x.x)||isNaN(x.y);if(x){x.setStyle({align:S.textAlign}),T&&(each$f(x.states,y),x.ignore=!0);var A=x.states.select;A&&(A.x+=x.x,A.y+=x.y)}if(w){var E=S.linePoints;T||!E?(each$f(w.states,y),w.ignore=!0):(limitTurnAngle(E,S.minTurnAngle),limitSurfaceAngle(E,S.surfaceNormal,S.maxSurfaceAngle),w.setShape({points:E}),x.__hostTarget.textGuideLineConfig={anchor:new Point$1(E[0][0],E[0][1])})}}}var PiePiece=function(n){__extends$1(t,n);function t(r,a,o){var s=n.call(this)||this;s.z2=2;var l=new ZRText$1;return s.setTextContent(l),s.updateData(r,a,o,!0),s}return t.prototype.updateData=function(r,a,o,s){var l=this,u=r.hostModel,d=r.getItemModel(a),v=d.getModel("emphasis"),g=r.getItemLayout(a),f=extend(getSectorCornerRadius(d.getModel("itemStyle"),g,!0),g);if(isNaN(f.startAngle)){l.setShape(f);return}if(s){l.setShape(f);var c=u.getShallow("animationType");u.ecModel.ssr?(initProps(l,{scaleX:0,scaleY:0},u,{dataIndex:a,isFrom:!0}),l.originX=f.cx,l.originY=f.cy):c==="scale"?(l.shape.r=g.r0,initProps(l,{shape:{r:g.r}},u,a)):o!=null?(l.setShape({startAngle:o,endAngle:o}),initProps(l,{shape:{startAngle:g.startAngle,endAngle:g.endAngle}},u,a)):(l.shape.endAngle=g.startAngle,updateProps$1(l,{shape:{endAngle:g.endAngle}},u,a))}else saveOldStyle(l),updateProps$1(l,{shape:f},u,a);l.useStyle(r.getItemVisual(a,"style")),setStatesStylesFromModel(l,d);var y=(g.startAngle+g.endAngle)/2,_=u.get("selectedOffset"),b=Math.cos(y)*_,S=Math.sin(y)*_,x=d.getShallow("cursor");x&&l.attr("cursor",x),this._updateLabel(u,r,a),l.ensureState("emphasis").shape=extend({r:g.r+(v.get("scale")&&v.get("scaleSize")||0)},getSectorCornerRadius(v.getModel("itemStyle"),g)),extend(l.ensureState("select"),{x:b,y:S,shape:getSectorCornerRadius(d.getModel(["select","itemStyle"]),g)}),extend(l.ensureState("blur"),{shape:getSectorCornerRadius(d.getModel(["blur","itemStyle"]),g)});var w=l.getTextGuideLine(),T=l.getTextContent();w&&extend(w.ensureState("select"),{x:b,y:S}),extend(T.ensureState("select"),{x:b,y:S}),toggleHoverEmphasis(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},t.prototype._updateLabel=function(r,a,o){var s=this,l=a.getItemModel(o),u=l.getModel("labelLine"),d=a.getItemVisual(o,"style"),v=d&&d.fill,g=d&&d.opacity;setLabelStyle(s,getLabelStatesModels(l),{labelFetcher:a.hostModel,labelDataIndex:o,inheritColor:v,defaultOpacity:g,defaultText:r.getFormattedLabel(o,"normal")||a.getName(o)});var f=s.getTextContent();s.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var c=r.get(["label","position"]);if(c!=="outside"&&c!=="outer")s.removeTextGuideLine();else{var y=this.getTextGuideLine();y||(y=new Polyline$3,this.setTextGuideLine(y)),setLabelLineStyle(this,getLabelLineStatesModels(l),{stroke:v,opacity:retrieve3(u.get(["lineStyle","opacity"]),g,1)})}},t}(Sector$1),PieView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,a,o,s){var l=r.getData(),u=this._data,d=this.group,v;if(!u&&l.count()>0){for(var g=l.getItemLayout(0),f=1;isNaN(g&&g.startAngle)&&f<l.count();++f)g=l.getItemLayout(f);g&&(v=g.startAngle)}if(this._emptyCircleSector&&d.remove(this._emptyCircleSector),l.count()===0&&r.get("showEmptyCircle")){var c=new Sector$1({shape:getBasicPieLayout(r,o)});c.useStyle(r.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=c,d.add(c)}l.diff(u).add(function(y){var _=new PiePiece(l,y,v);l.setItemGraphicEl(y,_),d.add(_)}).update(function(y,_){var b=u.getItemGraphicEl(_);b.updateData(l,y,v),b.off("click"),d.add(b),l.setItemGraphicEl(y,b)}).remove(function(y){var _=u.getItemGraphicEl(y);removeElementWithFadeOut(_,r,y)}).execute(),pieLabelLayout(r),r.get("animationTypeUpdate")!=="expansion"&&(this._data=l)},t.prototype.dispose=function(){},t.prototype.containPoint=function(r,a){var o=a.getData(),s=o.getItemLayout(0);if(s){var l=r[0]-s.cx,u=r[1]-s.cy,d=Math.sqrt(l*l+u*u);return d<=s.r&&d>=s.r0}},t.type="pie",t}(ChartView$1);const PieView$1=PieView;function createSeriesDataSimply(n,t,r){t=isArray$1(t)&&{coordDimensions:t}||extend({encodeDefine:n.getEncode()},t);var a=n.getSource(),o=prepareSeriesDataSchema(a,t).dimensions,s=new SeriesData$1(o,n);return s.initData(a,r),s}var LegendVisualProvider=function(){function n(t,r){this._getDataWithEncodedVisual=t,this._getRawData=r}return n.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},n.prototype.containName=function(t){var r=this._getRawData();return r.indexOfName(t)>=0},n.prototype.indexOfName=function(t){var r=this._getDataWithEncodedVisual();return r.indexOfName(t)},n.prototype.getItemVisual=function(t,r){var a=this._getDataWithEncodedVisual();return a.getItemVisual(t,r)},n}();const LegendVisualProvider$1=LegendVisualProvider;var innerData=makeInner(),PieSeriesModel=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(r){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},t.prototype.getDataParams=function(r){var a=this.getData(),o=innerData(a),s=o.seats;if(!s){var l=[];a.each(a.mapDimension("value"),function(d){l.push(d)}),s=o.seats=getPercentSeats(l,a.hostModel.get("percentPrecision"))}var u=n.prototype.getDataParams.call(this,r);return u.percent=s[r]||0,u.$vars.push("percent"),u},t.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var a=r.labelLine,o=r.emphasis.labelLine;a.show=a.show&&r.label.show,o.show=o.show&&r.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(SeriesModel$1);const PieSeriesModel$1=PieSeriesModel;function negativeDataFilter(n){return{seriesType:n,reset:function(t,r){var a=t.getData();a.filterSelf(function(o){var s=a.mapDimension("value"),l=a.get(s,o);return!(isNumber(l)&&!isNaN(l)&&l<0)})}}}function install$O(n){n.registerChartView(PieView$1),n.registerSeriesModel(PieSeriesModel$1),createLegacyDataSelectAction("pie",n.registerAction),n.registerLayout(curry$1(pieLayout,"pie")),n.registerProcessor(dataFilter$1("pie")),n.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(r,a,o){return o.point(a.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(SeriesModel$1);const ScatterSeriesModel$1=ScatterSeriesModel;var BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function n(){}return n}(),LargeSymbolPath=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,a){var o=a.points,s=a.size,l=this.symbolProxy,u=l.shape,d=r.getContext?r.getContext():r,v=d&&s[0]<BOOST_SIZE_THRESHOLD,g=this.softClipShape,f;if(v){this._ctx=d;return}for(this._ctx=null,f=this._off;f<o.length;){var c=o[f++],y=o[f++];isNaN(c)||isNaN(y)||g&&!g.contain(c,y)||(u.x=c-s[0]/2,u.y=y-s[1]/2,u.width=s[0],u.height=s[1],l.buildPath(r,u,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,a=r.points,o=r.size,s=this._ctx,l=this.softClipShape,u;if(s){for(u=this._off;u<a.length;){var d=a[u++],v=a[u++];isNaN(d)||isNaN(v)||l&&!l.contain(d,v)||s.fillRect(d-o[0]/2,v-o[1]/2,o[0],o[1])}this.incremental&&(this._off=u,this.notClear=!0)}},t.prototype.findDataIndex=function(r,a){for(var o=this.shape,s=o.points,l=o.size,u=Math.max(l[0],4),d=Math.max(l[1],4),v=s.length/2-1;v>=0;v--){var g=v*2,f=s[g]-u/2,c=s[g+1]-d/2;if(r>=f&&a>=c&&r<=f+u&&a<=c+d)return v}return-1},t.prototype.contain=function(r,a){var o=this.transformCoordToLocal(r,a),s=this.getBoundingRect();if(r=o[0],a=o[1],s.contain(r,a)){var l=this.hoverDataIdx=this.findDataIndex(r,a);return l>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var a=this.shape,o=a.points,s=a.size,l=s[0],u=s[1],d=1/0,v=1/0,g=-1/0,f=-1/0,c=0;c<o.length;){var y=o[c++],_=o[c++];d=Math.min(y,d),g=Math.max(y,g),v=Math.min(_,v),f=Math.max(_,f)}r=this._rect=new BoundingRect$1(d-l/2,v-u/2,g-d+l,f-v+u)}return r},t}(Path$1),LargeSymbolDraw=function(){function n(){this.group=new Group$4}return n.prototype.updateData=function(t,r){this._clear();var a=this._create();a.setShape({points:t.getLayout("points")}),this._setCommon(a,t,r)},n.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var o=(a.endIndex-a.startIndex)*2,s=a.startIndex*4*2;r=new Float32Array(r.buffer,s,o)}a.setShape("points",r),a.reset()})},n.prototype.incrementalPrepareUpdate=function(t){this._clear()},n.prototype.incrementalUpdate=function(t,r,a){var o=this._newAdded[0],s=r.getLayout("points"),l=o&&o.shape.points;if(l&&l.length<2e4){var u=l.length,d=new Float32Array(u+s.length);d.set(l),d.set(s,u),o.endIndex=t.end,o.setShape({points:d})}else{this._newAdded=[];var v=this._create();v.startIndex=t.start,v.endIndex=t.end,v.incremental=!0,v.setShape({points:s}),this._setCommon(v,r,a)}},n.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},n.prototype._create=function(){var t=new LargeSymbolPath({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},n.prototype._setCommon=function(t,r,a){var o=r.hostModel;a=a||{};var s=r.getVisual("symbolSize");t.setShape("size",s instanceof Array?s:[s,s]),t.softClipShape=a.clipShape||null,t.symbolProxy=createSymbol$1(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var l=t.shape.size[0]<BOOST_SIZE_THRESHOLD;t.useStyle(o.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var u=r.getVisual("style"),d=u&&u.fill;d&&t.setColor(d);var v=getECData(t);v.seriesIndex=o.seriesIndex,t.on("mousemove",function(g){v.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(v.dataIndex=f+(t.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}();const LargeSymbolDraw$1=LargeSymbolDraw;var ScatterView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){var s=r.getData(),l=this._updateSymbolDraw(s,r);l.updateData(s,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,a,o){var s=r.getData(),l=this._updateSymbolDraw(s,r);l.incrementalPrepareUpdate(s),this._finished=!1},t.prototype.incrementalRender=function(r,a,o){this._symbolDraw.incrementalUpdate(r,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=r.end===a.getData().count()},t.prototype.updateTransform=function(r,a,o){var s=r.getData();if(this.group.dirty(),!this._finished||s.count()>1e4)return{update:!0};var l=pointsLayout("").reset(r,a,o);l.progress&&l.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var a=r.coordinateSystem,o=a&&a.getArea&&a.getArea();return r.get("clip",!0)?o:null},t.prototype._updateSymbolDraw=function(r,a){var o=this._symbolDraw,s=a.pipelineContext,l=s.large;return(!o||l!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=l?new LargeSymbolDraw$1:new SymbolDraw$1,this._isLargeDraw=l,this.group.removeAll()),this.group.add(o.group),o},t.prototype.remove=function(r,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ChartView$1);const ScatterView$1=ScatterView;var GridModel=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(ComponentModel$1);const GridModel$1=GridModel;var CartesianAxisModel=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},t.type="cartesian2dAxis",t}(ComponentModel$1);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(n,t,r,a){each$f(AXIS_TYPES,function(o,s){var l=merge(merge({},axisDefault[s],!0),a,!0),u=function(d){__extends$1(v,d);function v(){var g=d!==null&&d.apply(this,arguments)||this;return g.type=t+"Axis."+s,g}return v.prototype.mergeDefaultAndTheme=function(g,f){var c=fetchLayoutMode(this),y=c?getLayoutParams(g):{},_=f.getTheme();merge(g,_.get(s+"Axis")),merge(g,this.getDefaultOption()),g.type=getAxisType(g),c&&mergeLayoutParam(g,y,c)},v.prototype.optionUpdated=function(){var g=this.option;g.type==="category"&&(this.__ordinalMeta=OrdinalMeta$1.createByAxisModel(this))},v.prototype.getCategories=function(g){var f=this.option;if(f.type==="category")return g?f.data:this.__ordinalMeta.categories},v.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},v.type=t+"Axis."+s,v.defaultOption=l,v}(r);n.registerComponentModel(u)}),n.registerSubTypeDefaulter(t+"Axis",getAxisType)}function getAxisType(n){return n.type||(n.data?"category":"value")}var Cartesian=function(){function n(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return n.prototype.getAxis=function(t){return this._axes[t]},n.prototype.getAxes=function(){return map$1(this._dimList,function(t){return this._axes[t]},this)},n.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),filter(this.getAxes(),function(r){return r.scale.type===t})},n.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},n}();const Cartesian$1=Cartesian;var cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(n){return n.type==="interval"||n.type==="time"}var Cartesian2D=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=cartesian2DDimensions,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,a=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(r)||!canCalculateAffineTransform(a))){var o=r.getExtent(),s=a.getExtent(),l=this.dataToPoint([o[0],s[0]]),u=this.dataToPoint([o[1],s[1]]),d=o[1]-o[0],v=s[1]-s[0];if(!(!d||!v)){var g=(u[0]-l[0])/d,f=(u[1]-l[1])/v,c=l[0]-o[0]*g,y=l[1]-s[0]*f,_=this._transform=[g,0,0,f,c,y];this._invTransform=invert([],_)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var a=this.getAxis("x"),o=this.getAxis("y");return a.contain(a.toLocalCoord(r[0]))&&o.contain(o.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,a){var o=this.dataToPoint(r),s=this.dataToPoint(a),l=this.getArea(),u=new BoundingRect$1(o[0],o[1],s[0]-o[0],s[1]-o[1]);return l.intersect(u)},t.prototype.dataToPoint=function(r,a,o){o=o||[];var s=r[0],l=r[1];if(this._transform&&s!=null&&isFinite(s)&&l!=null&&isFinite(l))return applyTransform$1(o,r,this._transform);var u=this.getAxis("x"),d=this.getAxis("y");return o[0]=u.toGlobalCoord(u.dataToCoord(s,a)),o[1]=d.toGlobalCoord(d.dataToCoord(l,a)),o},t.prototype.clampData=function(r,a){var o=this.getAxis("x").scale,s=this.getAxis("y").scale,l=o.getExtent(),u=s.getExtent(),d=o.parse(r[0]),v=s.parse(r[1]);return a=a||[],a[0]=Math.min(Math.max(Math.min(l[0],l[1]),d),Math.max(l[0],l[1])),a[1]=Math.min(Math.max(Math.min(u[0],u[1]),v),Math.max(u[0],u[1])),a},t.prototype.pointToData=function(r,a){var o=[];if(this._invTransform)return applyTransform$1(o,r,this._invTransform);var s=this.getAxis("x"),l=this.getAxis("y");return o[0]=s.coordToData(s.toLocalCoord(r[0]),a),o[1]=l.coordToData(l.toLocalCoord(r[1]),a),o},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),a=this.getAxis("y").getGlobalExtent(),o=Math.min(r[0],r[1]),s=Math.min(a[0],a[1]),l=Math.max(r[0],r[1])-o,u=Math.max(a[0],a[1])-s;return new BoundingRect$1(o,s,l,u)},t}(Cartesian$1),Axis2D=function(n){__extends$1(t,n);function t(r,a,o,s,l){var u=n.call(this,r,a,o)||this;return u.index=0,u.type=s||"value",u.position=l||"bottom",u}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var a=this.getExtent();return a[0]=this.toGlobalCoord(a[0]),a[1]=this.toGlobalCoord(a[1]),r&&a[0]>a[1]&&a.reverse(),a},t.prototype.pointToData=function(r,a){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),a)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Axis$1);const Axis2D$1=Axis2D;function layout$2(n,t,r){r=r||{};var a=n.coordinateSystem,o=t.axis,s={},l=o.getAxesOnZeroOf()[0],u=o.position,d=l?"onZero":u,v=o.dim,g=a.getRect(),f=[g.x,g.x+g.width,g.y,g.y+g.height],c={left:0,right:1,top:0,bottom:1,onZero:2},y=t.get("offset")||0,_=v==="x"?[f[2]-y,f[3]+y]:[f[0]-y,f[1]+y];if(l){var b=l.toGlobalCoord(l.dataToCoord(0));_[c.onZero]=Math.max(Math.min(b,_[1]),_[0])}s.position=[v==="y"?_[c[d]]:f[0],v==="x"?_[c[d]]:f[3]],s.rotation=Math.PI/2*(v==="x"?0:1);var S={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=S[u],s.labelOffset=l?_[c[u]]-_[c.onZero]:0,t.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),retrieve(r.labelInside,t.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var x=t.get(["axisLabel","rotate"]);return s.labelRotate=d==="top"?-x:x,s.z2=1,s}function isCartesian2DSeries(n){return n.get("coordinateSystem")==="cartesian2d"}function findAxisModels(n){var t={xAxisModel:null,yAxisModel:null};return each$f(t,function(r,a){var o=a.replace(/Model$/,""),s=n.getReferringComponents(o,SINGLE_REFERRING).models[0];t[a]=s}),t}var mathLog=Math.log;function alignScaleTicks(n,t,r){var a=IntervalScale$1.prototype,o=a.getTicks.call(r),s=a.getTicks.call(r,!0),l=o.length-1,u=a.getInterval.call(r),d=getScaleExtent(n,t),v=d.extent,g=d.fixMin,f=d.fixMax;if(n.type==="log"){var c=mathLog(n.base);v=[mathLog(v[0])/c,mathLog(v[1])/c]}n.setExtent(v[0],v[1]),n.calcNiceExtent({splitNumber:l,fixMin:g,fixMax:f});var y=a.getExtent.call(n);g&&(v[0]=y[0]),f&&(v[1]=y[1]);var _=a.getInterval.call(n),b=v[0],S=v[1];if(g&&f)_=(S-b)/l;else if(g)for(S=v[0]+_*l;S<v[1]&&isFinite(S)&&isFinite(v[1]);)_=increaseInterval(_),S=v[0]+_*l;else if(f)for(b=v[1]-_*l;b>v[0]&&isFinite(b)&&isFinite(v[0]);)_=increaseInterval(_),b=v[1]-_*l;else{var x=n.getTicks().length-1;x>l&&(_=increaseInterval(_));var w=_*l;S=Math.ceil(v[1]/_)*_,b=round$3(S-w),b<0&&v[0]>=0?(b=0,S=round$3(w)):S>0&&v[1]<=0&&(S=0,b=-round$3(w))}var T=(o[0].value-s[0].value)/u,A=(o[l].value-s[l].value)/u;a.setExtent.call(n,b+_*T,S+_*A),a.setInterval.call(n,_),(T||A)&&a.setNiceExtent.call(n,b+_,S-_)}var Grid=function(){function n(t,r,a){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(t,r,a),this.model=t}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(t,r){var a=this._axesMap;this._updateScale(t,this.model);function o(l){var u,d=keys(l),v=d.length;if(v){for(var g=[],f=v-1;f>=0;f--){var c=+d[f],y=l[c],_=y.model,b=y.scale;isIntervalOrLogScale(b)&&_.get("alignTicks")&&_.get("interval")==null?g.push(y):(niceScaleExtent(b,_),isIntervalOrLogScale(b)&&(u=y))}g.length&&(u||(u=g.pop(),niceScaleExtent(u.scale,u.model)),each$f(g,function(S){alignScaleTicks(S.scale,S.model,u.scale)}))}}o(a.x),o(a.y);var s={};each$f(a.x,function(l){fixAxisOnZero(a,"y",l,s)}),each$f(a.y,function(l){fixAxisOnZero(a,"x",l,s)}),this.resize(this.model,r)},n.prototype.resize=function(t,r,a){var o=t.getBoxLayoutParams(),s=!a&&t.get("containLabel"),l=getLayoutRect(o,{width:r.getWidth(),height:r.getHeight()});this._rect=l;var u=this._axesList;d(),s&&(each$f(u,function(v){if(!v.model.get(["axisLabel","inside"])){var g=estimateLabelUnionRect(v);if(g){var f=v.isHorizontal()?"height":"width",c=v.model.get(["axisLabel","margin"]);l[f]-=g[f]+c,v.position==="top"?l.y+=g.height+c:v.position==="left"&&(l.x+=g.width+c)}}}),d()),each$f(this._coordsList,function(v){v.calcAffineTransform()});function d(){each$f(u,function(v){var g=v.isHorizontal(),f=g?[0,l.width]:[0,l.height],c=v.inverse?1:0;v.setExtent(f[c],f[1-c]),updateAxisTransform(v,g?l.x:l.y)})}},n.prototype.getAxis=function(t,r){var a=this._axesMap[t];if(a!=null)return a[r||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var a="x"+t+"y"+r;return this._coordsMap[a]}isObject$3(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var o=0,s=this._coordsList;o<s.length;o++)if(s[o].getAxis("x").index===t||s[o].getAxis("y").index===r)return s[o]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(t,r,a){var o=this._findConvertTarget(r);return o.cartesian?o.cartesian.dataToPoint(a):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(a)):null},n.prototype.convertFromPixel=function(t,r,a){var o=this._findConvertTarget(r);return o.cartesian?o.cartesian.pointToData(a):o.axis?o.axis.coordToData(o.axis.toLocalCoord(a)):null},n.prototype._findConvertTarget=function(t){var r=t.seriesModel,a=t.xAxisModel||r&&r.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],o=t.yAxisModel||r&&r.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],s=t.gridModel,l=this._coordsList,u,d;if(r)u=r.coordinateSystem,indexOf(l,u)<0&&(u=null);else if(a&&o)u=this.getCartesian(a.componentIndex,o.componentIndex);else if(a)d=this.getAxis("x",a.componentIndex);else if(o)d=this.getAxis("y",o.componentIndex);else if(s){var v=s.coordinateSystem;v===this&&(u=this._coordsList[0])}return{cartesian:u,axis:d}},n.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},n.prototype._initCartesian=function(t,r,a){var o=this,s=this,l={left:!1,right:!1,top:!1,bottom:!1},u={x:{},y:{}},d={x:0,y:0};if(r.eachComponent("xAxis",v("x"),this),r.eachComponent("yAxis",v("y"),this),!d.x||!d.y){this._axesMap={},this._axesList=[];return}this._axesMap=u,each$f(u.x,function(g,f){each$f(u.y,function(c,y){var _="x"+f+"y"+y,b=new Cartesian2D(_);b.master=o,b.model=t,o._coordsMap[_]=b,o._coordsList.push(b),b.addAxis(g),b.addAxis(c)})});function v(g){return function(f,c){if(isAxisUsedInTheGrid(f,t)){var y=f.get("position");g==="x"?y!=="top"&&y!=="bottom"&&(y=l.bottom?"top":"bottom"):y!=="left"&&y!=="right"&&(y=l.left?"right":"left"),l[y]=!0;var _=new Axis2D$1(g,createScaleByModel$1(f),[0,0],f.get("type"),y),b=_.type==="category";_.onBand=b&&f.get("boundaryGap"),_.inverse=f.get("inverse"),f.axis=_,_.model=f,_.grid=s,_.index=c,s._axesList.push(_),u[g][c]=_,d[g]++}}}},n.prototype._updateScale=function(t,r){each$f(this._axesList,function(o){if(o.scale.setExtent(1/0,-1/0),o.type==="category"){var s=o.model.get("categorySortInfo");o.scale.setSortInfo(s)}}),t.eachSeries(function(o){if(isCartesian2DSeries(o)){var s=findAxisModels(o),l=s.xAxisModel,u=s.yAxisModel;if(!isAxisUsedInTheGrid(l,r)||!isAxisUsedInTheGrid(u,r))return;var d=this.getCartesian(l.componentIndex,u.componentIndex),v=o.getData(),g=d.getAxis("x"),f=d.getAxis("y");a(v,g),a(v,f)}},this);function a(o,s){each$f(getDataDimensionsOnAxis(o,s.dim),function(l){s.scale.unionExtentFromData(o,l)})}},n.prototype.getTooltipAxes=function(t){var r=[],a=[];return each$f(this.getCartesians(),function(o){var s=t!=null&&t!=="auto"?o.getAxis(t):o.getBaseAxis(),l=o.getOtherAxis(s);indexOf(r,s)<0&&r.push(s),indexOf(a,l)<0&&a.push(l)}),{baseAxes:r,otherAxes:a}},n.create=function(t,r){var a=[];return t.eachComponent("grid",function(o,s){var l=new n(o,t,r);l.name="grid_"+s,l.resize(o,r,!0),o.coordinateSystem=l,a.push(l)}),t.eachSeries(function(o){if(isCartesian2DSeries(o)){var s=findAxisModels(o),l=s.xAxisModel,u=s.yAxisModel,d=l.getCoordSysModel(),v=d.coordinateSystem;o.coordinateSystem=v.getCartesian(l.componentIndex,u.componentIndex)}}),a},n.dimensions=cartesian2DDimensions,n}();function isAxisUsedInTheGrid(n,t){return n.getCoordSysModel()===t}function fixAxisOnZero(n,t,r,a){r.getAxesOnZeroOf=function(){return s?[s]:[]};var o=n[t],s,l=r.model,u=l.get(["axisLine","onZero"]),d=l.get(["axisLine","onZeroAxisIndex"]);if(!u)return;if(d!=null)canOnZeroToAxis(o[d])&&(s=o[d]);else for(var v in o)if(o.hasOwnProperty(v)&&canOnZeroToAxis(o[v])&&!a[g(o[v])]){s=o[v];break}s&&(a[g(s)]=!0);function g(f){return f.dim+"_"+f.index}}function canOnZeroToAxis(n){return n&&n.type!=="category"&&n.type!=="time"&&ifAxisCrossZero(n)}function updateAxisTransform(n,t){var r=n.getExtent(),a=r[0]+r[1];n.toGlobalCoord=n.dim==="x"?function(o){return o+t}:function(o){return a-o+t},n.toLocalCoord=n.dim==="x"?function(o){return o-t}:function(o){return a-o+t}}const Grid$1=Grid;var PI$3=Math.PI,AxisBuilder=function(){function n(t,r){this.group=new Group$4,this.opt=r,this.axisModel=t,defaults(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var a=new Group$4({x:r.position[0],y:r.position[1],rotation:r.rotation});a.updateTransform(),this._transformGroup=a}return n.prototype.hasBuilder=function(t){return!!builders[t]},n.prototype.add=function(t){builders[t](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(t,r,a){var o=remRadian(r-t),s,l;return isRadianAroundZero(o)?(l=a>0?"top":"bottom",s="center"):isRadianAroundZero(o-PI$3)?(l=a>0?"bottom":"top",s="center"):(l="middle",o>0&&o<PI$3?s=a>0?"right":"left":s=a>0?"left":"right"),{rotation:o,textAlign:s,textVerticalAlign:l}},n.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},n.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},n}(),builders={axisLine:function(n,t,r,a){var o=t.get(["axisLine","show"]);if(o==="auto"&&n.handleAutoShown&&(o=n.handleAutoShown("axisLine")),!!o){var s=t.axis.getExtent(),l=a.transform,u=[s[0],0],d=[s[1],0],v=u[0]>d[0];l&&(applyTransform$1(u,u,l),applyTransform$1(d,d,l));var g=extend({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Line$3({shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:g,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var c=t.get(["axisLine","symbol"]);if(c!=null){var y=t.get(["axisLine","symbolSize"]);isString(c)&&(c=[c,c]),(isString(y)||isNumber(y))&&(y=[y,y]);var _=normalizeSymbolOffset(t.get(["axisLine","symbolOffset"])||0,y),b=y[0],S=y[1];each$f([{rotate:n.rotation+Math.PI/2,offset:_[0],r:0},{rotate:n.rotation-Math.PI/2,offset:_[1],r:Math.sqrt((u[0]-d[0])*(u[0]-d[0])+(u[1]-d[1])*(u[1]-d[1]))}],function(x,w){if(c[w]!=="none"&&c[w]!=null){var T=createSymbol$1(c[w],-b/2,-S/2,b,S,g.stroke,!0),A=x.r+x.offset,E=v?d:u;T.attr({rotation:x.rotate,x:E[0]+A*Math.cos(n.rotation),y:E[1]-A*Math.sin(n.rotation),silent:!0,z2:11}),r.add(T)}})}}},axisTickLabel:function(n,t,r,a){var o=buildAxisMajorTicks(r,a,t,n),s=buildAxisLabel(r,a,t,n);if(fixMinMaxLabelShow(t,s,o),buildAxisMinorTicks(r,a,t,n.tickDirection),t.get(["axisLabel","hideOverlap"])){var l=prepareLayoutList(map$1(s,function(u){return{label:u,priority:u.z2,defaultAttr:{ignore:u.ignore}}}));hideOverlap(l)}},axisName:function(n,t,r,a){var o=retrieve(n.axisName,t.get("name"));if(o){var s=t.get("nameLocation"),l=n.nameDirection,u=t.getModel("nameTextStyle"),d=t.get("nameGap")||0,v=t.axis.getExtent(),g=v[0]>v[1]?-1:1,f=[s==="start"?v[0]-g*d:s==="end"?v[1]+g*d:(v[0]+v[1])/2,isNameLocationCenter(s)?n.labelOffset+l*d:0],c,y=t.get("nameRotate");y!=null&&(y=y*PI$3/180);var _;isNameLocationCenter(s)?c=AxisBuilder.innerTextLayout(n.rotation,y??n.rotation,l):(c=endTextLayout(n.rotation,s,y||0,v),_=n.axisNameAvailableWidth,_!=null&&(_=Math.abs(_/Math.sin(c.rotation)),!isFinite(_)&&(_=null)));var b=u.getFont(),S=t.get("nameTruncate",!0)||{},x=S.ellipsis,w=retrieve(n.nameTruncateMaxWidth,S.maxWidth,_),T=new ZRText$1({x:f[0],y:f[1],rotation:c.rotation,silent:AxisBuilder.isLabelSilent(t),style:createTextStyle(u,{text:o,font:b,overflow:"truncate",width:w,ellipsis:x,fill:u.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:u.get("align")||c.textAlign,verticalAlign:u.get("verticalAlign")||c.textVerticalAlign}),z2:1});if(setTooltipConfig({el:T,componentModel:t,itemName:o}),T.__fullText=o,T.anid="name",t.get("triggerEvent")){var A=AxisBuilder.makeAxisEventDataBase(t);A.targetType="axisName",A.name=o,getECData(T).eventData=A}a.add(T),T.updateTransform(),r.add(T),T.decomposeTransform()}}};function endTextLayout(n,t,r,a){var o=remRadian(r-n),s,l,u=a[0]>a[1],d=t==="start"&&!u||t!=="start"&&u;return isRadianAroundZero(o-PI$3/2)?(l=d?"bottom":"top",s="center"):isRadianAroundZero(o-PI$3*1.5)?(l=d?"top":"bottom",s="center"):(l="middle",o<PI$3*1.5&&o>PI$3/2?s=d?"left":"right":s=d?"right":"left"),{rotation:o,textAlign:s,textVerticalAlign:l}}function fixMinMaxLabelShow(n,t,r){if(!shouldShowAllLabels(n.axis)){var a=n.get(["axisLabel","showMinLabel"]),o=n.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var s=t[0],l=t[1],u=t[t.length-1],d=t[t.length-2],v=r[0],g=r[1],f=r[r.length-1],c=r[r.length-2];a===!1?(ignoreEl(s),ignoreEl(v)):isTwoLabelOverlapped(s,l)&&(a?(ignoreEl(l),ignoreEl(g)):(ignoreEl(s),ignoreEl(v))),o===!1?(ignoreEl(u),ignoreEl(f)):isTwoLabelOverlapped(d,u)&&(o?(ignoreEl(d),ignoreEl(c)):(ignoreEl(u),ignoreEl(f)))}}function ignoreEl(n){n&&(n.ignore=!0)}function isTwoLabelOverlapped(n,t){var r=n&&n.getBoundingRect().clone(),a=t&&t.getBoundingRect().clone();if(!(!r||!a)){var o=identity([]);return rotate(o,o,-n.rotation),r.applyTransform(mul([],o,n.getLocalTransform())),a.applyTransform(mul([],o,t.getLocalTransform())),r.intersect(a)}}function isNameLocationCenter(n){return n==="middle"||n==="center"}function createTicks(n,t,r,a,o){for(var s=[],l=[],u=[],d=0;d<n.length;d++){var v=n[d].coord;l[0]=v,l[1]=0,u[0]=v,u[1]=r,t&&(applyTransform$1(l,l,t),applyTransform$1(u,u,t));var g=new Line$3({shape:{x1:l[0],y1:l[1],x2:u[0],y2:u[1]},style:a,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(g.shape,g.style.lineWidth),g.anid=o+"_"+n[d].tickValue,s.push(g)}return s}function buildAxisMajorTicks(n,t,r,a){var o=r.axis,s=r.getModel("axisTick"),l=s.get("show");if(l==="auto"&&a.handleAutoShown&&(l=a.handleAutoShown("axisTick")),!(!l||o.scale.isBlank())){for(var u=s.getModel("lineStyle"),d=a.tickDirection*s.get("length"),v=o.getTicksCoords(),g=createTicks(v,t.transform,d,defaults(u.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<g.length;f++)n.add(g[f]);return g}}function buildAxisMinorTicks(n,t,r,a){var o=r.axis,s=r.getModel("minorTick");if(!(!s.get("show")||o.scale.isBlank())){var l=o.getMinorTicksCoords();if(l.length)for(var u=s.getModel("lineStyle"),d=a*s.get("length"),v=defaults(u.getLineStyle(),defaults(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),g=0;g<l.length;g++)for(var f=createTicks(l[g],t.transform,d,v,"minorticks_"+g),c=0;c<f.length;c++)n.add(f[c])}}function buildAxisLabel(n,t,r,a){var o=r.axis,s=retrieve(a.axisLabelShow,r.get(["axisLabel","show"]));if(!(!s||o.scale.isBlank())){var l=r.getModel("axisLabel"),u=l.get("margin"),d=o.getViewLabels(),v=(retrieve(a.labelRotate,l.get("rotate"))||0)*PI$3/180,g=AxisBuilder.innerTextLayout(a.rotation,v,a.labelDirection),f=r.getCategories&&r.getCategories(!0),c=[],y=AxisBuilder.isLabelSilent(r),_=r.get("triggerEvent");return each$f(d,function(b,S){var x=o.scale.type==="ordinal"?o.scale.getRawOrdinalNumber(b.tickValue):b.tickValue,w=b.formattedLabel,T=b.rawLabel,A=l;if(f&&f[x]){var E=f[x];isObject$3(E)&&E.textStyle&&(A=new Model$1(E.textStyle,l,r.ecModel))}var $=A.getTextColor()||r.get(["axisLine","lineStyle","color"]),P=o.dataToCoord(x),I=new ZRText$1({x:P,y:a.labelOffset+a.labelDirection*u,rotation:g.rotation,silent:y,z2:10+(b.level||0),style:createTextStyle(A,{text:w,align:A.getShallow("align",!0)||g.textAlign,verticalAlign:A.getShallow("verticalAlign",!0)||A.getShallow("baseline",!0)||g.textVerticalAlign,fill:isFunction($)?$(o.type==="category"?T:o.type==="value"?x+"":x,S):$})});if(I.anid="label_"+x,_){var C=AxisBuilder.makeAxisEventDataBase(r);C.targetType="axisLabel",C.value=T,C.tickIndex=S,o.type==="category"&&(C.dataIndex=x),getECData(I).eventData=C}t.add(I),I.updateTransform(),c.push(I),n.add(I),I.decomposeTransform()}),c}}const AxisBuilder$1=AxisBuilder;function collect(n,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(r,n,t),r.seriesInvolved&&collectSeriesInfo(r,n),r}function collectAxesInfo(n,t,r){var a=t.getComponent("tooltip"),o=t.getComponent("axisPointer"),s=o.get("link",!0)||[],l=[];each$f(r.getCoordinateSystems(),function(u){if(!u.axisPointerEnabled)return;var d=makeKey(u.model),v=n.coordSysAxesInfo[d]={};n.coordSysMap[d]=u;var g=u.model,f=g.getModel("tooltip",a);if(each$f(u.getAxes(),curry$1(b,!1,null)),u.getTooltipAxes&&a&&f.get("show")){var c=f.get("trigger")==="axis",y=f.get(["axisPointer","type"])==="cross",_=u.getTooltipAxes(f.get(["axisPointer","axis"]));(c||y)&&each$f(_.baseAxes,curry$1(b,y?"cross":!0,c)),y&&each$f(_.otherAxes,curry$1(b,"cross",!1))}function b(S,x,w){var T=w.model.getModel("axisPointer",o),A=T.get("show");if(!(!A||A==="auto"&&!S&&!isHandleTrigger(T))){x==null&&(x=T.get("triggerTooltip")),T=S?makeAxisPointerModel(w,f,o,t,S,x):T;var E=T.get("snap"),$=makeKey(w.model),P=x||E||w.type==="category",I=n.axesInfo[$]={key:$,axis:w,coordSys:u,axisPointerModel:T,triggerTooltip:x,involveSeries:P,snap:E,useHandle:isHandleTrigger(T),seriesModels:[],linkGroup:null};v[$]=I,n.seriesInvolved=n.seriesInvolved||P;var C=getLinkGroupIndex(s,w);if(C!=null){var M=l[C]||(l[C]={axesInfo:{}});M.axesInfo[$]=I,M.mapper=s[C].mapper,I.linkGroup=M}}}})}function makeAxisPointerModel(n,t,r,a,o,s){var l=t.getModel("axisPointer"),u=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],d={};each$f(u,function(c){d[c]=clone$4(l.get(c))}),d.snap=n.type!=="category"&&!!s,l.get("type")==="cross"&&(d.type="line");var v=d.label||(d.label={});if(v.show==null&&(v.show=!1),o==="cross"){var g=l.get(["label","show"]);if(v.show=g??!0,!s){var f=d.lineStyle=l.get("crossStyle");f&&defaults(v,f.textStyle)}}return n.model.getModel("axisPointer",new Model$1(d,r,a))}function collectSeriesInfo(n,t){t.eachSeries(function(r){var a=r.coordinateSystem,o=r.get(["tooltip","trigger"],!0),s=r.get(["tooltip","show"],!0);!a||o==="none"||o===!1||o==="item"||s===!1||r.get(["axisPointer","show"],!0)===!1||each$f(n.coordSysAxesInfo[makeKey(a.model)],function(l){var u=l.axis;a.getAxis(u.dim)===u&&(l.seriesModels.push(r),l.seriesDataCount==null&&(l.seriesDataCount=0),l.seriesDataCount+=r.getData().count())})})}function getLinkGroupIndex(n,t){for(var r=t.model,a=t.dim,o=0;o<n.length;o++){var s=n[o]||{};if(checkPropInLink(s[a+"AxisId"],r.id)||checkPropInLink(s[a+"AxisIndex"],r.componentIndex)||checkPropInLink(s[a+"AxisName"],r.name))return o}}function checkPropInLink(n,t){return n==="all"||isArray$1(n)&&indexOf(n,t)>=0||n===t}function fixValue(n){var t=getAxisInfo$1(n);if(t){var r=t.axisPointerModel,a=t.axis.scale,o=r.option,s=r.get("status"),l=r.get("value");l!=null&&(l=a.parse(l));var u=isHandleTrigger(r);s==null&&(o.status=u?"show":"hide");var d=a.getExtent().slice();d[0]>d[1]&&d.reverse(),(l==null||l>d[1])&&(l=d[1]),l<d[0]&&(l=d[0]),o.value=l,u&&(o.status=t.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(n){var t=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[makeKey(n)]}function getAxisPointerModel(n){var t=getAxisInfo$1(n);return t&&t.axisPointerModel}function isHandleTrigger(n){return!!n.get(["handle","show"])}function makeKey(n){return n.type+"||"+n.id}var axisPointerClazz={},AxisView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o,s){this.axisPointerClass&&fixValue(r),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,o,!0)},t.prototype.updateAxisPointer=function(r,a,o,s){this._doUpdateAxisPointerClass(r,o,!1)},t.prototype.remove=function(r,a){var o=this._axisPointer;o&&o.remove(a)},t.prototype.dispose=function(r,a){this._disposeAxisPointer(a),n.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,a,o){var s=t.getAxisPointerClass(this.axisPointerClass);if(s){var l=getAxisPointerModel(r);l?(this._axisPointer||(this._axisPointer=new s)).render(r,l,a,o):this._disposeAxisPointer(a)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,a){axisPointerClazz[r]=a},t.getAxisPointerClass=function(r){return r&&axisPointerClazz[r]},t.type="axis",t}(ComponentView$1);const AxisView$1=AxisView;var inner$f=makeInner();function rectCoordAxisBuildSplitArea(n,t,r,a){var o=r.axis;if(!o.scale.isBlank()){var s=r.getModel("splitArea"),l=s.getModel("areaStyle"),u=l.get("color"),d=a.coordinateSystem.getRect(),v=o.getTicksCoords({tickModel:s,clamp:!0});if(v.length){var g=u.length,f=inner$f(n).splitAreaColors,c=createHashMap(),y=0;if(f)for(var _=0;_<v.length;_++){var b=f.get(v[_].tickValue);if(b!=null){y=(b+(g-1)*_)%g;break}}var S=o.toGlobalCoord(v[0].coord),x=l.getAreaStyle();u=isArray$1(u)?u:[u];for(var _=1;_<v.length;_++){var w=o.toGlobalCoord(v[_].coord),T=void 0,A=void 0,E=void 0,$=void 0;o.isHorizontal()?(T=S,A=d.y,E=w-T,$=d.height,S=T+E):(T=d.x,A=S,E=d.width,$=w-A,S=A+$);var P=v[_-1].tickValue;P!=null&&c.set(P,y),t.add(new Rect$3({anid:P!=null?"area_"+P:null,shape:{x:T,y:A,width:E,height:$},style:defaults({fill:u[y]},x),autoBatch:!0,silent:!0})),y=(y+1)%g}inner$f(n).splitAreaColors=c}}}function rectCoordAxisHandleRemove(n){inner$f(n).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,a,o,s){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!r.get("show")){var u=r.getCoordSysModel(),d=layout$2(u,r),v=new AxisBuilder$1(r,extend({handleAutoShown:function(f){for(var c=u.coordinateSystem.getCartesians(),y=0;y<c.length;y++)if(isIntervalOrLogScale(c[y].getOtherAxis(r.axis).scale))return!0;return!1}},d));each$f(axisBuilderAttrs$3,v.add,v),this._axisGroup.add(v.getGroup()),each$f(selfBuilderAttrs$2,function(f){r.get([f,"show"])&&axisElementBuilders$2[f](this,this._axisGroup,r,u)},this);var g=s&&s.type==="changeAxisOrder"&&s.isInitSort;g||groupTransition(l,this._axisGroup,r),n.prototype.render.call(this,r,a,o,s)}},t.prototype.remove=function(){rectCoordAxisHandleRemove(this)},t.type="cartesianAxis",t}(AxisView$1),axisElementBuilders$2={splitLine:function(n,t,r,a){var o=r.axis;if(!o.scale.isBlank()){var s=r.getModel("splitLine"),l=s.getModel("lineStyle"),u=l.get("color");u=isArray$1(u)?u:[u];for(var d=a.coordinateSystem.getRect(),v=o.isHorizontal(),g=0,f=o.getTicksCoords({tickModel:s}),c=[],y=[],_=l.getLineStyle(),b=0;b<f.length;b++){var S=o.toGlobalCoord(f[b].coord);v?(c[0]=S,c[1]=d.y,y[0]=S,y[1]=d.y+d.height):(c[0]=d.x,c[1]=S,y[0]=d.x+d.width,y[1]=S);var x=g++%u.length,w=f[b].tickValue,T=new Line$3({anid:w!=null?"line_"+f[b].tickValue:null,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:y[0],y2:y[1]},style:defaults({stroke:u[x]},_),silent:!0});subPixelOptimizeLine(T.shape,_.lineWidth),t.add(T)}}},minorSplitLine:function(n,t,r,a){var o=r.axis,s=r.getModel("minorSplitLine"),l=s.getModel("lineStyle"),u=a.coordinateSystem.getRect(),d=o.isHorizontal(),v=o.getMinorTicksCoords();if(v.length)for(var g=[],f=[],c=l.getLineStyle(),y=0;y<v.length;y++)for(var _=0;_<v[y].length;_++){var b=o.toGlobalCoord(v[y][_].coord);d?(g[0]=b,g[1]=u.y,f[0]=b,f[1]=u.y+u.height):(g[0]=u.x,g[1]=b,f[0]=u.x+u.width,f[1]=b);var S=new Line$3({anid:"minor_line_"+v[y][_].tickValue,autoBatch:!0,shape:{x1:g[0],y1:g[1],x2:f[0],y2:f[1]},style:c,silent:!0});subPixelOptimizeLine(S.shape,c.lineWidth),t.add(S)}},splitArea:function(n,t,r,a){rectCoordAxisBuildSplitArea(n,t,r,a)}},CartesianXAxisView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(CartesianAxisView),CartesianYAxisView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=CartesianXAxisView.type,r}return t.type="yAxis",t}(CartesianAxisView),GridView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,a){this.group.removeAll(),r.get("show")&&this.group.add(new Rect$3({shape:r.coordinateSystem.getRect(),style:defaults({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ComponentView$1),extraOption={offset:0};function install$N(n){n.registerComponentView(GridView),n.registerComponentModel(GridModel$1),n.registerCoordinateSystem("cartesian2d",Grid$1),axisModelCreator(n,"x",CartesianAxisModel,extraOption),axisModelCreator(n,"y",CartesianAxisModel,extraOption),n.registerComponentView(CartesianXAxisView),n.registerComponentView(CartesianYAxisView),n.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function install$M(n){use(install$N),n.registerSeriesModel(ScatterSeriesModel$1),n.registerChartView(ScatterView$1),n.registerLayout(pointsLayout("scatter"))}function radarLayout(n){n.eachSeriesByType("radar",function(t){var r=t.getData(),a=[],o=t.coordinateSystem;if(o){var s=o.getIndicatorAxes();each$f(s,function(l,u){r.each(r.mapDimension(s[u].dim),function(d,v){a[v]=a[v]||[];var g=o.dataToPoint(d,u);a[v][u]=isValidPoint(g)?g:getValueMissingPoint(o)})}),r.each(function(l){var u=find(a[l],function(d){return isValidPoint(d)})||getValueMissingPoint(o);a[l].push(u.slice()),r.setItemLayout(l,a[l])})}})}function isValidPoint(n){return!isNaN(n[0])&&!isNaN(n[1])}function getValueMissingPoint(n){return[n.cx,n.cy]}function radarBackwardCompat(n){var t=n.polar;if(t){isArray$1(t)||(t=[t]);var r=[];each$f(t,function(a,o){a.indicator?(a.type&&!a.shape&&(a.shape=a.type),n.radar=n.radar||[],isArray$1(n.radar)||(n.radar=[n.radar]),n.radar.push(a)):r.push(a)}),n.polar=r}each$f(n.series,function(a){a&&a.type==="radar"&&a.polarIndex&&(a.radarIndex=a.polarIndex)})}var RadarView$2=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){var s=r.coordinateSystem,l=this.group,u=r.getData(),d=this._data;function v(c,y){var _=c.getItemVisual(y,"symbol")||"circle";if(_!=="none"){var b=normalizeSymbolSize(c.getItemVisual(y,"symbolSize")),S=createSymbol$1(_,-1,-1,2,2),x=c.getItemVisual(y,"symbolRotate")||0;return S.attr({style:{strokeNoScale:!0},z2:100,scaleX:b[0]/2,scaleY:b[1]/2,rotation:x*Math.PI/180||0}),S}}function g(c,y,_,b,S,x){_.removeAll();for(var w=0;w<y.length-1;w++){var T=v(b,S);T&&(T.__dimIdx=w,c[w]?(T.setPosition(c[w]),graphic[x?"initProps":"updateProps"](T,{x:y[w][0],y:y[w][1]},r,S)):T.setPosition(y[w]),_.add(T))}}function f(c){return map$1(c,function(y){return[s.cx,s.cy]})}u.diff(d).add(function(c){var y=u.getItemLayout(c);if(y){var _=new Polygon$1,b=new Polyline$3,S={shape:{points:y}};_.shape.points=f(y),b.shape.points=f(y),initProps(_,S,r,c),initProps(b,S,r,c);var x=new Group$4,w=new Group$4;x.add(b),x.add(_),x.add(w),g(b.shape.points,y,w,u,c,!0),u.setItemGraphicEl(c,x)}}).update(function(c,y){var _=d.getItemGraphicEl(y),b=_.childAt(0),S=_.childAt(1),x=_.childAt(2),w={shape:{points:u.getItemLayout(c)}};w.shape.points&&(g(b.shape.points,w.shape.points,x,u,c,!1),saveOldStyle(S),saveOldStyle(b),updateProps$1(b,w,r),updateProps$1(S,w,r),u.setItemGraphicEl(c,_))}).remove(function(c){l.remove(d.getItemGraphicEl(c))}).execute(),u.eachItemGraphicEl(function(c,y){var _=u.getItemModel(y),b=c.childAt(0),S=c.childAt(1),x=c.childAt(2),w=u.getItemVisual(y,"style"),T=w.fill;l.add(c),b.useStyle(defaults(_.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:T})),setStatesStylesFromModel(b,_,"lineStyle"),setStatesStylesFromModel(S,_,"areaStyle");var A=_.getModel("areaStyle"),E=A.isEmpty()&&A.parentModel.isEmpty();S.ignore=E,each$f(["emphasis","select","blur"],function(I){var C=_.getModel([I,"areaStyle"]),M=C.isEmpty()&&C.parentModel.isEmpty();S.ensureState(I).ignore=M&&E}),S.useStyle(defaults(A.getAreaStyle(),{fill:T,opacity:.7,decal:w.decal}));var $=_.getModel("emphasis"),P=$.getModel("itemStyle").getItemStyle();x.eachChild(function(I){if(I instanceof ZRImage$1){var C=I.style;I.useStyle(extend({image:C.image,x:C.x,y:C.y,width:C.width,height:C.height},w))}else I.useStyle(w),I.setColor(T),I.style.strokeNoScale=!0;var M=I.ensureState("emphasis");M.style=clone$4(P);var D=u.getStore().get(u.getDimensionIndex(I.__dimIdx),y);(D==null||isNaN(D))&&(D=""),setLabelStyle(I,getLabelStatesModels(_),{labelFetcher:u.hostModel,labelDataIndex:y,labelDimIndex:I.__dimIdx,defaultText:D,inheritColor:T,defaultOpacity:w.opacity})}),toggleHoverEmphasis(c,$.get("focus"),$.get("blurScope"),$.get("disabled"))}),this._data=u},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(ChartView$1);const RadarView$3=RadarView$2;var RadarSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this))},t.prototype.getInitialData=function(r,a){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(r,a,o){var s=this.getData(),l=this.coordinateSystem,u=l.getIndicatorAxes(),d=this.getData().getName(r),v=d===""?this.name:d,g=retrieveVisualColorForTooltipMarker(this,r);return createTooltipMarkup("section",{header:v,sortBlocks:!0,blocks:map$1(u,function(f){var c=s.get(s.mapDimension(f.dim),r);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:g,name:f.name,value:c,sortParam:c})})})},t.prototype.getTooltipPosition=function(r){if(r!=null){for(var a=this.getData(),o=this.coordinateSystem,s=a.getValues(map$1(o.dimensions,function(v){return a.mapDimension(v)}),r),l=0,u=s.length;l<u;l++)if(!isNaN(s[l])){var d=o.getIndicatorAxes();return o.coordToPoint(d[l].dataToCoord(s[l]),l)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(SeriesModel$1);const RadarSeriesModel$1=RadarSeriesModel;var valueAxisDefault=axisDefault.value;function defaultsShow(n,t){return defaults({show:t},n)}var RadarModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){var r=this.get("boundaryGap"),a=this.get("splitNumber"),o=this.get("scale"),s=this.get("axisLine"),l=this.get("axisTick"),u=this.get("axisLabel"),d=this.get("axisName"),v=this.get(["axisName","show"]),g=this.get(["axisName","formatter"]),f=this.get("axisNameGap"),c=this.get("triggerEvent"),y=map$1(this.get("indicator")||[],function(_){_.max!=null&&_.max>0&&!_.min?_.min=0:_.min!=null&&_.min<0&&!_.max&&(_.max=0);var b=d;_.color!=null&&(b=defaults({color:_.color},d));var S=merge(clone$4(_),{boundaryGap:r,splitNumber:a,scale:o,axisLine:s,axisTick:l,axisLabel:u,name:_.text,showName:v,nameLocation:"end",nameGap:f,nameTextStyle:b,triggerEvent:c},!1);if(isString(g)){var x=S.name;S.name=g.replace("{value}",x??"")}else isFunction(g)&&(S.name=g(S.name,S));var w=new Model$1(S,null,this.ecModel);return mixin(w,AxisModelCommonMixin.prototype),w.mainType="radar",w.componentIndex=this.componentIndex,w},this);this._indicatorModels=y},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},t}(ComponentModel$1);const RadarModel$1=RadarModel;var axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){var s=this.group;s.removeAll(),this._buildAxes(r),this._buildSplitLineAndArea(r)},t.prototype._buildAxes=function(r){var a=r.coordinateSystem,o=a.getIndicatorAxes(),s=map$1(o,function(l){var u=l.model.get("showName")?l.name:"",d=new AxisBuilder$1(l.model,{axisName:u,position:[a.cx,a.cy],rotation:l.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return d});each$f(s,function(l){each$f(axisBuilderAttrs$2,l.add,l),this.group.add(l.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(r){var a=r.coordinateSystem,o=a.getIndicatorAxes();if(!o.length)return;var s=r.get("shape"),l=r.getModel("splitLine"),u=r.getModel("splitArea"),d=l.getModel("lineStyle"),v=u.getModel("areaStyle"),g=l.get("show"),f=u.get("show"),c=d.get("color"),y=v.get("color"),_=isArray$1(c)?c:[c],b=isArray$1(y)?y:[y],S=[],x=[];function w(F,L,B){var V=B%L.length;return F[V]=F[V]||[],V}if(s==="circle")for(var T=o[0].getTicksCoords(),A=a.cx,E=a.cy,$=0;$<T.length;$++){if(g){var P=w(S,_,$);S[P].push(new Circle$1({shape:{cx:A,cy:E,r:T[$].coord}}))}if(f&&$<T.length-1){var P=w(x,b,$);x[P].push(new Ring$1({shape:{cx:A,cy:E,r0:T[$].coord,r:T[$+1].coord}}))}}else for(var I,C=map$1(o,function(F,L){var B=F.getTicksCoords();return I=I==null?B.length-1:Math.min(B.length-1,I),map$1(B,function(V){return a.coordToPoint(V.coord,L)})}),M=[],$=0;$<=I;$++){for(var D=[],R=0;R<o.length;R++)D.push(C[R][$]);if(D[0]&&D.push(D[0].slice()),g){var P=w(S,_,$);S[P].push(new Polyline$3({shape:{points:D}}))}if(f&&M){var P=w(x,b,$-1);x[P].push(new Polygon$1({shape:{points:D.concat(M)}}))}M=D.slice().reverse()}var N=d.getLineStyle(),O=v.getAreaStyle();each$f(x,function(F,L){this.group.add(mergePath(F,{style:defaults({stroke:"none",fill:b[L%b.length]},O),silent:!0}))},this),each$f(S,function(F,L){this.group.add(mergePath(F,{style:defaults({fill:"none",stroke:_[L%_.length]},N),silent:!0}))},this)},t.type="radar",t}(ComponentView$1);const RadarView$1=RadarView;var IndicatorAxis=function(n){__extends$1(t,n);function t(r,a,o){var s=n.call(this,r,a,o)||this;return s.type="value",s.angle=0,s.name="",s}return t}(Axis$1);const IndicatorAxis$1=IndicatorAxis;var Radar=function(){function n(t,r,a){this.dimensions=[],this._model=t,this._indicatorAxes=map$1(t.getIndicatorModels(),function(o,s){var l="indicator_"+s,u=new IndicatorAxis$1(l,new IntervalScale$1);return u.name=o.get("name"),u.model=o,o.axis=u,this.dimensions.push(l),u},this),this.resize(t,a)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(t,r){var a=this._indicatorAxes[r];return this.coordToPoint(a.dataToCoord(t),r)},n.prototype.coordToPoint=function(t,r){var a=this._indicatorAxes[r],o=a.angle,s=this.cx+t*Math.cos(o),l=this.cy-t*Math.sin(o);return[s,l]},n.prototype.pointToData=function(t){var r=t[0]-this.cx,a=t[1]-this.cy,o=Math.sqrt(r*r+a*a);r/=o,a/=o;for(var s=Math.atan2(-a,r),l=1/0,u,d=-1,v=0;v<this._indicatorAxes.length;v++){var g=this._indicatorAxes[v],f=Math.abs(s-g.angle);f<l&&(u=g,d=v,l=f)}return[d,+(u&&u.coordToData(o))]},n.prototype.resize=function(t,r){var a=t.get("center"),o=r.getWidth(),s=r.getHeight(),l=Math.min(o,s)/2;this.cx=parsePercent(a[0],o),this.cy=parsePercent(a[1],s),this.startAngle=t.get("startAngle")*Math.PI/180;var u=t.get("radius");(isString(u)||isNumber(u))&&(u=[0,u]),this.r0=parsePercent(u[0],l),this.r=parsePercent(u[1],l),each$f(this._indicatorAxes,function(d,v){d.setExtent(this.r0,this.r);var g=this.startAngle+v*Math.PI*2/this._indicatorAxes.length;g=Math.atan2(Math.sin(g),Math.cos(g)),d.angle=g},this)},n.prototype.update=function(t,r){var a=this._indicatorAxes,o=this._model;each$f(a,function(u){u.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(u,d){if(!(u.get("coordinateSystem")!=="radar"||t.getComponent("radar",u.get("radarIndex"))!==o)){var v=u.getData();each$f(a,function(g){g.scale.unionExtentFromData(v,v.mapDimension(g.dim))})}},this);var s=o.get("splitNumber"),l=new IntervalScale$1;l.setExtent(0,s),l.setInterval(1),each$f(a,function(u,d){alignScaleTicks(u.scale,u.model,l)})},n.prototype.convertToPixel=function(t,r,a){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(t,r,a){return console.warn("Not implemented."),null},n.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},n.create=function(t,r){var a=[];return t.eachComponent("radar",function(o){var s=new n(o,t,r);a.push(s),o.coordinateSystem=s}),t.eachSeriesByType("radar",function(o){o.get("coordinateSystem")==="radar"&&(o.coordinateSystem=a[o.get("radarIndex")||0])}),a},n.dimensions=[],n}();const Radar$1=Radar;function install$L(n){n.registerCoordinateSystem("radar",Radar$1),n.registerComponentModel(RadarModel$1),n.registerComponentView(RadarView$1),n.registerVisual({seriesType:"radar",reset:function(t){var r=t.getData();r.each(function(a){r.setItemVisual(a,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}function install$K(n){use(install$L),n.registerChartView(RadarView$3),n.registerSeriesModel(RadarSeriesModel$1),n.registerLayout(radarLayout),n.registerProcessor(dataFilter$1("radar")),n.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(n,t,r){var a=getStore(n);a[t]=r}function release(n,t,r){var a=getStore(n),o=a[t];o===r&&(a[t]=null)}function isTaken(n,t){return!!getStore(n)[t]}function getStore(n){return n[ATTR]||(n[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(n){__extends$1(t,n);function t(r){var a=n.call(this)||this;a._zr=r;var o=bind$1(a._mousedownHandler,a),s=bind$1(a._mousemoveHandler,a),l=bind$1(a._mouseupHandler,a),u=bind$1(a._mousewheelHandler,a),d=bind$1(a._pinchHandler,a);return a.enable=function(v,g){this.disable(),this._opt=defaults(clone$4(g)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),v==null&&(v=!0),(v===!0||v==="move"||v==="pan")&&(r.on("mousedown",o),r.on("mousemove",s),r.on("mouseup",l)),(v===!0||v==="scale"||v==="zoom")&&(r.on("mousewheel",u),r.on("pinch",d))},a.disable=function(){r.off("mousedown",o),r.off("mousemove",s),r.off("mouseup",l),r.off("mousewheel",u),r.off("pinch",d)},a}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!isMiddleOrRightButtonOnMouseUpDown(r)){for(var a=r.target;a;){if(a.draggable)return;a=a.__hostTarget||a.parent}var o=r.offsetX,s=r.offsetY;this.pointerChecker&&this.pointerChecker(r,o,s)&&(this._x=o,this._y=s,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var a=r.offsetX,o=r.offsetY,s=this._x,l=this._y,u=a-s,d=o-l;this._x=a,this._y=o,this._opt.preventDefaultMouseMove&&stop(r.event),trigger$1(this,"pan","moveOnMouseMove",r,{dx:u,dy:d,oldX:s,oldY:l,newX:a,newY:o,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){isMiddleOrRightButtonOnMouseUpDown(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var a=isAvailableBehavior("zoomOnMouseWheel",r,this._opt),o=isAvailableBehavior("moveOnMouseWheel",r,this._opt),s=r.wheelDelta,l=Math.abs(s),u=r.offsetX,d=r.offsetY;if(!(s===0||!a&&!o)){if(a){var v=l>3?1.4:l>1?1.2:1.1,g=s>0?v:1/v;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",r,{scale:g,originX:u,originY:d,isAvailableBehavior:null})}if(o){var f=Math.abs(s),c=(s>0?1:-1)*(f>3?.4:f>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:c,originX:u,originY:d,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!isTaken(this._zr,"globalPan")){var a=r.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,r,{scale:a,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Eventful$1);function checkPointerAndTrigger(n,t,r,a,o){n.pointerChecker&&n.pointerChecker(a,o.originX,o.originY)&&(stop(a.event),trigger$1(n,t,r,a,o))}function trigger$1(n,t,r,a,o){o.isAvailableBehavior=bind$1(isAvailableBehavior,null,r,a),n.trigger(t,o)}function isAvailableBehavior(n,t,r){var a=r[n];return!n||a&&(!isString(a)||t.event[a+"Key"])}const RoamController$1=RoamController;function updateViewOnPan(n,t,r){var a=n.target;a.x+=t,a.y+=r,a.dirty()}function updateViewOnZoom(n,t,r,a){var o=n.target,s=n.zoomLimit,l=n.zoom=n.zoom||1;if(l*=t,s){var u=s.min||0,d=s.max||1/0;l=Math.max(Math.min(d,l),u)}var v=l/n.zoom;n.zoom=l,o.x-=(r-o.x)*(v-1),o.y-=(a-o.y)*(v-1),o.scaleX*=v,o.scaleY*=v,o.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(n,t,r){var a=t.getComponentByElement(n.topTarget),o=a&&a.coordinateSystem;return a&&a!==r&&!IRRELEVANT_EXCLUDES.hasOwnProperty(a.mainType)&&o&&o.model!==r}function parseXML(n){if(isString(n)){var t=new DOMParser;n=t.parseFromString(n,"text/xml")}var r=n;for(r.nodeType===9&&(r=r.firstChild);r.nodeName.toLowerCase()!=="svg"||r.nodeType!==1;)r=r.nextSibling;return r}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(t,r){r=r||{};var a=parseXML(t);this._defsUsePending=[];var o=new Group$4;this._root=o;var s=[],l=a.getAttribute("viewBox")||"",u=parseFloat(a.getAttribute("width")||r.width),d=parseFloat(a.getAttribute("height")||r.height);isNaN(u)&&(u=null),isNaN(d)&&(d=null),parseAttributes(a,o,null,!0,!1);for(var v=a.firstChild;v;)this._parseNode(v,o,s,null,!1,!1),v=v.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var g,f;if(l){var c=splitNumberSequence(l);c.length>=4&&(g={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(g&&u!=null&&d!=null&&(f=makeViewBoxTransform(g,{x:0,y:0,width:u,height:d}),!r.ignoreViewBox)){var y=o;o=new Group$4,o.add(y),y.scaleX=y.scaleY=f.scale,y.x=f.x,y.y=f.y}return!r.ignoreRootClip&&u!=null&&d!=null&&o.setClipPath(new Rect$3({shape:{x:0,y:0,width:u,height:d}})),{root:o,width:u,height:d,viewBoxRect:g,viewBoxTransform:f,named:s}},n.prototype._parseNode=function(t,r,a,o,s,l){var u=t.nodeName.toLowerCase(),d,v=o;if(u==="defs"&&(s=!0),u==="text"&&(l=!0),u==="defs"||u==="switch")d=r;else{if(!s){var g=nodeParsers[u];if(g&&hasOwn(nodeParsers,u)){d=g.call(this,t,r);var f=t.getAttribute("name");if(f){var c={name:f,namedFrom:null,svgNodeTagLower:u,el:d};a.push(c),u==="g"&&(v=c)}else o&&a.push({name:o.name,namedFrom:o,svgNodeTagLower:u,el:d});r.add(d)}}var y=paintServerParsers[u];if(y&&hasOwn(paintServerParsers,u)){var _=y.call(this,t),b=t.getAttribute("id");b&&(this._defs[b]=_)}}if(d&&d.isGroup)for(var S=t.firstChild;S;)S.nodeType===1?this._parseNode(S,d,a,v,s,l):S.nodeType===3&&l&&this._parseText(S,d),S=S.nextSibling},n.prototype._parseText=function(t,r){var a=new TSpan$1({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(r,a),parseAttributes(t,a,this._defsUsePending,!1,!1),applyTextAlignment(a,r);var o=a.style,s=o.fontSize;s&&s<9&&(o.fontSize=9,a.scaleX*=s/9,a.scaleY*=s/9);var l=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=l;var u=a.getBoundingRect();return this._textX+=u.width,r.add(a),a},n.internalField=function(){nodeParsers={g:function(t,r){var a=new Group$4;return inheritStyle(r,a),parseAttributes(t,a,this._defsUsePending,!1,!1),a},rect:function(t,r){var a=new Rect$3;return inheritStyle(r,a),parseAttributes(t,a,this._defsUsePending,!1,!1),a.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),a.silent=!0,a},circle:function(t,r){var a=new Circle$1;return inheritStyle(r,a),parseAttributes(t,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),a.silent=!0,a},line:function(t,r){var a=new Line$3;return inheritStyle(r,a),parseAttributes(t,a,this._defsUsePending,!1,!1),a.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),a.silent=!0,a},ellipse:function(t,r){var a=new Ellipse$1;return inheritStyle(r,a),parseAttributes(t,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),a.silent=!0,a},polygon:function(t,r){var a=t.getAttribute("points"),o;a&&(o=parsePoints(a));var s=new Polygon$1({shape:{points:o||[]},silent:!0});return inheritStyle(r,s),parseAttributes(t,s,this._defsUsePending,!1,!1),s},polyline:function(t,r){var a=t.getAttribute("points"),o;a&&(o=parsePoints(a));var s=new Polyline$3({shape:{points:o||[]},silent:!0});return inheritStyle(r,s),parseAttributes(t,s,this._defsUsePending,!1,!1),s},image:function(t,r){var a=new ZRImage$1;return inheritStyle(r,a),parseAttributes(t,a,this._defsUsePending,!1,!1),a.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),a.silent=!0,a},text:function(t,r){var a=t.getAttribute("x")||"0",o=t.getAttribute("y")||"0",s=t.getAttribute("dx")||"0",l=t.getAttribute("dy")||"0";this._textX=parseFloat(a)+parseFloat(s),this._textY=parseFloat(o)+parseFloat(l);var u=new Group$4;return inheritStyle(r,u),parseAttributes(t,u,this._defsUsePending,!1,!0),u},tspan:function(t,r){var a=t.getAttribute("x"),o=t.getAttribute("y");a!=null&&(this._textX=parseFloat(a)),o!=null&&(this._textY=parseFloat(o));var s=t.getAttribute("dx")||"0",l=t.getAttribute("dy")||"0",u=new Group$4;return inheritStyle(r,u),parseAttributes(t,u,this._defsUsePending,!1,!0),this._textX+=parseFloat(s),this._textY+=parseFloat(l),u},path:function(t,r){var a=t.getAttribute("d")||"",o=createFromString(a);return inheritStyle(r,o),parseAttributes(t,o,this._defsUsePending,!1,!1),o.silent=!0,o}}}(),n}(),paintServerParsers={lineargradient:function(n){var t=parseInt(n.getAttribute("x1")||"0",10),r=parseInt(n.getAttribute("y1")||"0",10),a=parseInt(n.getAttribute("x2")||"10",10),o=parseInt(n.getAttribute("y2")||"0",10),s=new LinearGradient$1(t,r,a,o);return parsePaintServerUnit(n,s),parseGradientColorStops(n,s),s},radialgradient:function(n){var t=parseInt(n.getAttribute("cx")||"0",10),r=parseInt(n.getAttribute("cy")||"0",10),a=parseInt(n.getAttribute("r")||"0",10),o=new RadialGradient$1(t,r,a);return parsePaintServerUnit(n,o),parseGradientColorStops(n,o),o}};function parsePaintServerUnit(n,t){var r=n.getAttribute("gradientUnits");r==="userSpaceOnUse"&&(t.global=!0)}function parseGradientColorStops(n,t){for(var r=n.firstChild;r;){if(r.nodeType===1&&r.nodeName.toLocaleLowerCase()==="stop"){var a=r.getAttribute("offset"),o=void 0;a&&a.indexOf("%")>0?o=parseInt(a,10)/100:a?o=parseFloat(a):o=0;var s={};parseInlineStyle(r,s,s);var l=s.stopColor||r.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:o,color:l})}r=r.nextSibling}}function inheritStyle(n,t){n&&n.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),defaults(t.__inheritedStyle,n.__inheritedStyle))}function parsePoints(n){for(var t=splitNumberSequence(n),r=[],a=0;a<t.length;a+=2){var o=parseFloat(t[a]),s=parseFloat(t[a+1]);r.push([o,s])}return r}function parseAttributes(n,t,r,a,o){var s=t,l=s.__inheritedStyle=s.__inheritedStyle||{},u={};n.nodeType===1&&(parseTransformAttribute(n,t),parseInlineStyle(n,l,u),a||parseAttributeStyle(n,l,u)),s.style=s.style||{},l.fill!=null&&(s.style.fill=getFillStrokeStyle(s,"fill",l.fill,r)),l.stroke!=null&&(s.style.stroke=getFillStrokeStyle(s,"stroke",l.stroke,r)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(d){l[d]!=null&&(s.style[d]=parseFloat(l[d]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(d){l[d]!=null&&(s.style[d]=l[d])}),o&&(s.__selfStyle=u),l.lineDash&&(s.style.lineDash=map$1(splitNumberSequence(l.lineDash),function(d){return parseFloat(d)})),(l.visibility==="hidden"||l.visibility==="collapse")&&(s.invisible=!0),l.display==="none"&&(s.ignore=!0)}function applyTextAlignment(n,t){var r=t.__selfStyle;if(r){var a=r.textBaseline,o=a;!a||a==="auto"||a==="baseline"?o="alphabetic":a==="before-edge"||a==="text-before-edge"?o="top":a==="after-edge"||a==="text-after-edge"?o="bottom":(a==="central"||a==="mathematical")&&(o="middle"),n.style.textBaseline=o}var s=t.__inheritedStyle;if(s){var l=s.textAlign,u=l;l&&(l==="middle"&&(u="center"),n.style.textAlign=u)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(n,t,r,a){var o=r&&r.match(urlRegex);if(o){var s=trim$1(o[1]);a.push([n,t,s]);return}return r==="none"&&(r=null),r}function applyDefs(n,t){for(var r=0;r<t.length;r++){var a=t[r];a[0].style[a[1]]=n[a[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(n){return n.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(n,t){var r=n.getAttribute("transform");if(r){r=r.replace(/,/g," ");var a=[],o=null;r.replace(transformRegex,function(f,c,y){return a.push(c,y),""});for(var s=a.length-1;s>0;s-=2){var l=a[s],u=a[s-1],d=splitNumberSequence(l);switch(o=o||create$1(),u){case"translate":translate(o,o,[parseFloat(d[0]),parseFloat(d[1]||"0")]);break;case"scale":scale$1(o,o,[parseFloat(d[0]),parseFloat(d[1]||d[0])]);break;case"rotate":rotate(o,o,-parseFloat(d[0])*DEGREE_TO_ANGLE);break;case"skewX":var v=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(o,[1,0,v,1,0,0],o);break;case"skewY":var g=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(o,[1,g,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(d[0]),o[1]=parseFloat(d[1]),o[2]=parseFloat(d[2]),o[3]=parseFloat(d[3]),o[4]=parseFloat(d[4]),o[5]=parseFloat(d[5]);break}}t.setLocalTransform(o)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(n,t,r){var a=n.getAttribute("style");if(a){styleRegex.lastIndex=0;for(var o;(o=styleRegex.exec(a))!=null;){var s=o[1],l=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,s)?INHERITABLE_STYLE_ATTRIBUTES_MAP[s]:null;l&&(t[l]=o[2]);var u=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,s)?SELF_STYLE_ATTRIBUTES_MAP[s]:null;u&&(r[u]=o[2])}}}function parseAttributeStyle(n,t,r){for(var a=0;a<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;a++){var o=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[a],s=n.getAttribute(o);s!=null&&(t[INHERITABLE_STYLE_ATTRIBUTES_MAP[o]]=s)}for(var a=0;a<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;a++){var o=SELF_STYLE_ATTRIBUTES_MAP_KEYS[a],s=n.getAttribute(o);s!=null&&(r[SELF_STYLE_ATTRIBUTES_MAP[o]]=s)}}function makeViewBoxTransform(n,t){var r=t.width/n.width,a=t.height/n.height,o=Math.min(r,a);return{scale:o,x:-(n.x+n.width/2)*o+(t.x+t.width/2),y:-(n.y+n.height/2)*o+(t.y+t.height/2)}}function parseSVG(n,t){var r=new SVGParser;return r.parse(n,t)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function n(t,r){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=t,this._parsedXML=parseXML(r)}return n.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=createRegions(t.named),a=r.regions,o=r.regionsMap;this._regions=a,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(t){var r,a;try{r=t&&parseSVG(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},a=r.root,assert(a!=null)}catch(S){throw new Error(`Invalid svg format
`+S.message)}var o=new Group$4;o.add(a),o.isGeoSVGGraphicRoot=!0;var s=r.width,l=r.height,u=r.viewBoxRect,d=this._boundingRect;if(!d){var v=void 0,g=void 0,f=void 0,c=void 0;if(s!=null?(v=0,f=s):u&&(v=u.x,f=u.width),l!=null?(g=0,c=l):u&&(g=u.y,c=u.height),v==null||g==null){var y=a.getBoundingRect();v==null&&(v=y.x,f=y.width),g==null&&(g=y.y,c=y.height)}d=this._boundingRect=new BoundingRect$1(v,g,f,c)}if(u){var _=makeViewBoxTransform(u,d);a.scaleX=a.scaleY=_.scale,a.x=_.x,a.y=_.y}o.setClipPath(new Rect$3({shape:d.plain()}));var b=[];return each$f(r.named,function(S){REGION_AVAILABLE_SVG_TAG_MAP.get(S.svgNodeTagLower)!=null&&(b.push(S),setSilent(S.el))}),{root:o,boundingRect:d,named:b}},n.prototype.useGraphic=function(t){var r=this._usedGraphicMap,a=r.get(t);return a||(a=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(t,a),a)},n.prototype.freeGraphic=function(t){var r=this._usedGraphicMap,a=r.get(t);a&&(r.removeKey(t),this._freedGraphics.push(a))},n}();function setSilent(n){n.silent=!1,n.isGroup&&n.traverse(function(t){t.silent=!1})}function createRegions(n){var t=[],r=createHashMap();return each$f(n,function(a){if(a.namedFrom==null){var o=new GeoSVGRegion(a.name,a.el);t.push(o),r.set(a.name,o)}}),{regions:t,regionsMap:r}}var geoCoord=[126,25],nanhaiName="南海诸岛",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(n,t){if(n==="china"){for(var r=0;r<t.length;r++)if(t[r].name===nanhaiName)return;t.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(a){return{type:"polygon",exterior:a}}),geoCoord))}}var coordsOffsetMap={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function fixTextCoords(n,t){if(n==="china"){var r=coordsOffsetMap[t.name];if(r){var a=t.getCenter();a[0]+=r[0]/10.5,a[1]+=-r[1]/(10.5/.75),t.setCenter(a)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(n,t){n==="china"&&t.name==="台湾"&&t.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function n(t,r,a){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=t,this._specialAreas=a,this._geoJSON=parseInput(r)}return n.prototype.load=function(t,r){r=r||DEFAULT_NAME_PROPERTY;var a=this._parsedMap.get(r);if(!a){var o=this._parseToRegions(r);a=this._parsedMap.set(r,{regions:o,boundingRect:calculateBoundingRect(o)})}var s=createHashMap(),l=[];return each$f(a.regions,function(u){var d=u.name;t&&hasOwn(t,d)&&(u=u.cloneShallow(d=t[d])),l.push(u),s.set(d,u)}),{regions:l,boundingRect:a.boundingRect||new BoundingRect$1(0,0,0,0),regionsMap:s}},n.prototype._parseToRegions=function(t){var r=this._mapName,a=this._geoJSON,o;try{o=a?parseGeoJSON(a,t):[]}catch(s){throw new Error(`Invalid geoJson format
`+s.message)}return fixNanhai(r,o),each$f(o,function(s){var l=s.name;fixTextCoords(r,s),fixDiaoyuIsland(r,s);var u=this._specialAreas&&this._specialAreas[l];u&&s.transformTo(u.left,u.top,u.width,u.height)},this),o},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function calculateBoundingRect(n){for(var t,r=0;r<n.length;r++){var a=n[r].getBoundingRect();t=t||a.clone(),t.union(a)}return t}function parseInput(n){return isString(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var storage=createHashMap();const geoSourceManager={registerMap:function(n,t,r){if(t.svg){var a=new GeoSVGResource(n,t.svg);storage.set(n,a)}else{var o=t.geoJson||t.geoJSON;o&&!t.features?r=t.specialAreas:o=t;var a=new GeoJSONResource(n,o,r);storage.set(n,a)}},getGeoResource:function(n){return storage.get(n)},getMapForUser:function(n){var t=storage.get(n);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(n,t,r){var a=storage.get(n);if(a)return a.load(t,r)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(n){var t=n.getItemStyle(),r=n.get("areaColor");return r!=null&&(t.fill=r),t}function fixLineStyle(n){var t=n.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var MapDraw=function(){function n(t){var r=new Group$4;this.uid=getUID("ec_map_draw"),this._controller=new RoamController$1(t.getZr()),this._controllerHost={target:r},this.group=r,r.add(this._regionsGroup=new Group$4),r.add(this._svgGroup=new Group$4)}return n.prototype.draw=function(t,r,a,o,s){var l=t.mainType==="geo",u=t.getData&&t.getData();l&&r.eachComponent({mainType:"series",subType:"map"},function(x){!u&&x.getHostGeoModel()===t&&(u=x.getData())});var d=t.coordinateSystem,v=this._regionsGroup,g=this.group,f=d.getTransformInfo(),c=f.raw,y=f.roam,_=!v.childAt(0)||s;_?(g.x=y.x,g.y=y.y,g.scaleX=y.scaleX,g.scaleY=y.scaleY,g.dirty()):updateProps$1(g,y,t);var b=u&&u.getVisual("visualMeta")&&u.getVisual("visualMeta").length>0,S={api:a,geo:d,mapOrGeoModel:t,data:u,isVisualEncodedByVisualMap:b,isGeo:l,transformInfoRaw:c};d.resourceType==="geoJSON"?this._buildGeoJSON(S):d.resourceType==="geoSVG"&&this._buildSVG(S),this._updateController(t,r,a),this._updateMapSelectHandler(t,v,a,o)},n.prototype._buildGeoJSON=function(t){var r=this._regionsGroupByName=createHashMap(),a=createHashMap(),o=this._regionsGroup,s=t.transformInfoRaw,l=t.mapOrGeoModel,u=t.data,d=t.geo.projection,v=d&&d.stream;function g(y,_){return _&&(y=_(y)),y&&[y[0]*s.scaleX+s.x,y[1]*s.scaleY+s.y]}function f(y){for(var _=[],b=!v&&d&&d.project,S=0;S<y.length;++S){var x=g(y[S],b);x&&_.push(x)}return _}function c(y){return{shape:{points:f(y)}}}o.removeAll(),each$f(t.geo.regions,function(y){var _=y.name,b=r.get(_),S=a.get(_)||{},x=S.dataIdx,w=S.regionModel;b||(b=r.set(_,new Group$4),o.add(b),x=u?u.indexOfName(_):null,w=t.isGeo?l.getRegionModel(_):u?u.getItemModel(x):null,a.set(_,{dataIdx:x,regionModel:w}));var T=[],A=[];each$f(y.geometries,function(P){if(P.type==="polygon"){var I=[P.exterior].concat(P.interiors||[]);v&&(I=projectPolys(I,v)),each$f(I,function(M){T.push(new Polygon$1(c(M)))})}else{var C=P.points;v&&(C=projectPolys(C,v,!0)),each$f(C,function(M){A.push(new Polyline$3(c(M)))})}});var E=g(y.getCenter(),d&&d.project);function $(P,I){if(P.length){var C=new CompoundPath$1({culling:!0,segmentIgnoreThreshold:1,shape:{paths:P}});b.add(C),applyOptionStyleForRegion(t,C,x,w),resetLabelForRegion(t,C,_,w,l,x,E),I&&(fixLineStyle(C),each$f(C.states,fixLineStyle))}}$(T),$(A,!0)}),r.each(function(y,_){var b=a.get(_),S=b.dataIdx,x=b.regionModel;resetEventTriggerForRegion(t,y,_,x,l,S),resetTooltipForRegion(t,y,_,x,l),resetStateTriggerForRegion(t,y,_,x,l)},this)},n.prototype._buildSVG=function(t){var r=t.geo.map,a=t.transformInfoRaw;this._svgGroup.x=a.x,this._svgGroup.y=a.y,this._svgGroup.scaleX=a.scaleX,this._svgGroup.scaleY=a.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var o=this._svgDispatcherMap=createHashMap(),s=!1;each$f(this._svgGraphicRecord.named,function(l){var u=l.name,d=t.mapOrGeoModel,v=t.data,g=l.svgNodeTagLower,f=l.el,c=v?v.indexOfName(u):null,y=d.getRegionModel(u);if(OPTION_STYLE_ENABLED_TAG_MAP.get(g)!=null&&f instanceof Displayable$1&&applyOptionStyleForRegion(t,f,c,y),f instanceof Displayable$1&&(f.culling=!0),f.z2EmphasisLift=0,!l.namedFrom&&(LABEL_HOST_MAP.get(g)!=null&&resetLabelForRegion(t,f,u,y,d,c,null),resetEventTriggerForRegion(t,f,u,y,d,c),resetTooltipForRegion(t,f,u,y,d),STATE_TRIGGER_TAG_MAP.get(g)!=null)){var _=resetStateTriggerForRegion(t,f,u,y,d);_==="self"&&(s=!0);var b=o.get(u)||o.set(u,[]);b.push(f)}},this),this._enableBlurEntireSVG(s,t)},n.prototype._enableBlurEntireSVG=function(t,r){if(t&&r.isGeo){var a=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),o=a.opacity;this._svgGraphicRecord.root.traverse(function(s){if(!s.isGroup){setDefaultStateProxy(s);var l=s.ensureState("blur").style||{};l.opacity==null&&o!=null&&(l.opacity=o),s.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(t,r){if(t==null)return[];var a=r.coordinateSystem;if(a.resourceType==="geoJSON"){var o=this._regionsGroupByName;if(o){var s=o.get(t);return s?[s]:[]}}else if(a.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},n.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},n.prototype._useSVG=function(t){var r=geoSourceManager.getGeoResource(t);if(r&&r.type==="geoSVG"){var a=r.useGraphic(this.uid);this._svgGroup.add(a.root),this._svgGraphicRecord=a,this._svgMapName=t}},n.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var r=geoSourceManager.getGeoResource(t);r&&r.type==="geoSVG"&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(t,r,a){var o=t.coordinateSystem,s=this._controller,l=this._controllerHost;l.zoomLimit=t.get("scaleLimit"),l.zoom=o.getZoom(),s.enable(t.get("roam")||!1);var u=t.mainType;function d(){var v={type:"geoRoam",componentType:u};return v[u+"Id"]=t.id,v}s.off("pan").on("pan",function(v){this._mouseDownFlag=!1,updateViewOnPan(l,v.dx,v.dy),a.dispatchAction(extend(d(),{dx:v.dx,dy:v.dy,animation:{duration:0}}))},this),s.off("zoom").on("zoom",function(v){this._mouseDownFlag=!1,updateViewOnZoom(l,v.scale,v.originX,v.originY),a.dispatchAction(extend(d(),{zoom:v.scale,originX:v.originX,originY:v.originY,animation:{duration:0}}))},this),s.setPointerChecker(function(v,g,f){return o.containPoint([g,f])&&!onIrrelevantElement(v,a,t)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var r=t.getTextContent();r&&(r.ignore=mapLabelRaw(r).ignore)})},n.prototype._updateMapSelectHandler=function(t,r,a,o){var s=this;r.off("mousedown"),r.off("click"),t.get("selectedMode")&&(r.on("mousedown",function(){s._mouseDownFlag=!0}),r.on("click",function(l){s._mouseDownFlag&&(s._mouseDownFlag=!1)}))},n}();function applyOptionStyleForRegion(n,t,r,a){var o=a.getModel("itemStyle"),s=a.getModel(["emphasis","itemStyle"]),l=a.getModel(["blur","itemStyle"]),u=a.getModel(["select","itemStyle"]),d=getFixedItemStyle(o),v=getFixedItemStyle(s),g=getFixedItemStyle(u),f=getFixedItemStyle(l),c=n.data;if(c){var y=c.getItemVisual(r,"style"),_=c.getItemVisual(r,"decal");n.isVisualEncodedByVisualMap&&y.fill&&(d.fill=y.fill),_&&(d.decal=createOrUpdatePatternFromDecal(_,n.api))}t.setStyle(d),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=v,t.ensureState("select").style=g,t.ensureState("blur").style=f,setDefaultStateProxy(t)}function resetLabelForRegion(n,t,r,a,o,s,l){var u=n.data,d=n.isGeo,v=u&&isNaN(u.get(u.mapDimension("value"),s)),g=u&&u.getItemLayout(s);if(d||v||g&&g.showLabel){var f=d?r:s,c=void 0;(!u||s>=0)&&(c=o);var y=l?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(t,getLabelStatesModels(a),{labelFetcher:c,labelDataIndex:f,defaultText:r},y);var _=t.getTextContent();if(_&&(mapLabelRaw(_).ignore=_.ignore,t.textConfig&&l)){var b=t.getBoundingRect().clone();t.textConfig.layoutRect=b,t.textConfig.position=[(l[0]-b.x)/b.width*100+"%",(l[1]-b.y)/b.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function resetEventTriggerForRegion(n,t,r,a,o,s){n.data?n.data.setItemGraphicEl(s,t):getECData(t).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:r,region:a&&a.option||{}}}function resetTooltipForRegion(n,t,r,a,o){n.data||setTooltipConfig({el:t,componentModel:o,itemName:r,itemTooltipOption:a.get("tooltip")})}function resetStateTriggerForRegion(n,t,r,a,o){t.highDownSilentOnTouch=!!o.get("selectedMode");var s=a.getModel("emphasis"),l=s.get("focus");return toggleHoverEmphasis(t,l,s.get("blurScope"),s.get("disabled")),n.isGeo&&enableComponentHighDownFeatures(t,o,r),l}function projectPolys(n,t,r){var a=[],o;function s(){o=[]}function l(){o.length&&(a.push(o),o=[])}var u=t({polygonStart:s,polygonEnd:l,lineStart:s,lineEnd:l,point:function(d,v){isFinite(d)&&isFinite(v)&&o.push([d,v])},sphere:function(){}});return!r&&u.polygonStart(),each$f(n,function(d){u.lineStart();for(var v=0;v<d.length;v++)u.point(d[v][0],d[v][1]);u.lineEnd()}),!r&&u.polygonEnd(),a}const MapDraw$1=MapDraw;var MapView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o,s){if(!(s&&s.type==="mapToggleSelect"&&s.from===this.uid)){var l=this.group;if(l.removeAll(),!r.getHostGeoModel()){if(this._mapDraw&&s&&s.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),s&&s.type==="geoRoam"&&s.componentType==="series"&&s.seriesId===r.id){var u=this._mapDraw;u&&l.add(u.group)}else if(r.needsDrawMap){var u=this._mapDraw||new MapDraw$1(o);l.add(u.group),u.draw(r,a,o,this,s),this._mapDraw=u}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;r.get("showLegendSymbol")&&a.getComponent("legend")&&this._renderSymbols(r,a,o)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(r,a,o){var s=r.originalData,l=this.group;s.each(s.mapDimension("value"),function(u,d){if(!isNaN(u)){var v=s.getItemLayout(d);if(!(!v||!v.point)){var g=v.point,f=v.offset,c=new Circle$1({style:{fill:r.getData().getVisual("style").fill},shape:{cx:g[0]+f*9,cy:g[1],r:3},silent:!0,z2:8+(f?0:Z2_EMPHASIS_LIFT+1)});if(!f){var y=r.mainSeries.getData(),_=s.getName(d),b=y.indexOfName(_),S=s.getItemModel(d),x=S.getModel("label"),w=y.getItemGraphicEl(b);setLabelStyle(c,getLabelStatesModels(S),{labelFetcher:{getFormattedLabel:function(T,A){return r.getFormattedLabel(b,A)}},defaultText:_}),c.disableLabelAnimation=!0,x.get("position")||c.setTextConfig({position:"bottom"}),w.onHoverStateChange=function(T){setStatesFlag(c,T)}}l.add(c)}}})},t.type="map",t}(ChartView$1);const MapView$1=MapView;var MapSeries=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(a){if(a!=null){var o=this.getData().getName(a),s=this.coordinateSystem,l=s.getRegion(o);return l&&s.dataToPoint(l.getCenter())}},r}return t.prototype.getInitialData=function(r){for(var a=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),o=createHashMap(),s=[],l=0,u=a.count();l<u;l++){var d=a.getName(l);o.set(d,!0)}var v=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(v.regions,function(g){var f=g.name;o.get(f)||s.push(f)}),a.appendValues([],s),a},t.prototype.getHostGeoModel=function(){var r=this.option.geoIndex;return r!=null?this.ecModel.getComponent("geo",r):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(r){var a=this.getData();return a.get(a.mapDimension("value"),r)},t.prototype.getRegionModel=function(r){var a=this.getData();return a.getItemModel(a.indexOfName(r))},t.prototype.formatTooltip=function(r,a,o){for(var s=this.getData(),l=this.getRawValue(r),u=s.getName(r),d=this.seriesGroup,v=[],g=0;g<d.length;g++){var f=d[g].originalData.indexOfName(u),c=s.mapDimension("value");isNaN(d[g].originalData.get(c,f))||v.push(d[g].name)}return createTooltipMarkup("section",{header:v.join(", "),noHeader:!v.length,blocks:[createTooltipMarkup("nameValue",{name:u,value:l})]})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.getLegendIcon=function(r){var a=r.icon||"roundRect",o=createSymbol$1(a,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill);return o.setStyle(r.itemStyle),o.style.stroke="none",a.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill="#fff",o.style.lineWidth=2),o},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(SeriesModel$1);const MapSeries$1=MapSeries;function dataStatistics(n,t){var r={};return each$f(n,function(a){a.each(a.mapDimension("value"),function(o,s){var l="ec-"+a.getName(s);r[l]=r[l]||[],isNaN(o)||r[l].push(o)})}),n[0].map(n[0].mapDimension("value"),function(a,o){for(var s="ec-"+n[0].getName(o),l=0,u=1/0,d=-1/0,v=r[s].length,g=0;g<v;g++)u=Math.min(u,r[s][g]),d=Math.max(d,r[s][g]),l+=r[s][g];var f;return t==="min"?f=u:t==="max"?f=d:t==="average"?f=l/v:f=l,v===0?NaN:f})}function mapDataStatistic(n){var t={};n.eachSeriesByType("map",function(r){var a=r.getHostGeoModel(),o=a?"o"+a.id:"i"+r.getMapType();(t[o]=t[o]||[]).push(r)}),each$f(t,function(r,a){for(var o=dataStatistics(map$1(r,function(l){return l.getData()}),r[0].get("mapValueCalculation")),s=0;s<r.length;s++)r[s].originalData=r[s].getData();for(var s=0;s<r.length;s++)r[s].seriesGroup=r,r[s].needsDrawMap=s===0&&!r[s].getHostGeoModel(),r[s].setData(o.cloneShallow()),r[s].mainSeries=r[0]})}function mapSymbolLayout(n){var t={};n.eachSeriesByType("map",function(r){var a=r.getMapType();if(!(r.getHostGeoModel()||t[a])){var o={};each$f(r.seriesGroup,function(l){var u=l.coordinateSystem,d=l.originalData;l.get("showLegendSymbol")&&n.getComponent("legend")&&d.each(d.mapDimension("value"),function(v,g){var f=d.getName(g),c=u.getRegion(f);if(!(!c||isNaN(v))){var y=o[f]||0,_=u.dataToPoint(c.getCenter());o[f]=y+1,d.setItemLayout(g,{point:_,offset:y})}})});var s=r.getData();s.each(function(l){var u=s.getName(l),d=s.getItemLayout(l)||{};d.showLabel=!o[u],s.setItemLayout(l,d)}),t[a]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(n){__extends$1(t,n);function t(r){var a=n.call(this)||this;return a.type="view",a.dimensions=["x","y"],a._roamTransformable=new Transformable$1,a._rawTransformable=new Transformable$1,a.name=r,a}return t.prototype.setBoundingRect=function(r,a,o,s){return this._rect=new BoundingRect$1(r,a,o,s),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,a,o,s){this._transformTo(r,a,o,s),this._viewRect=new BoundingRect$1(r,a,o,s)},t.prototype._transformTo=function(r,a,o,s){var l=this.getBoundingRect(),u=this._rawTransformable;u.transform=l.calculateTransform(new BoundingRect$1(r,a,o,s));var d=u.parent;u.parent=null,u.decomposeTransform(),u.parent=d,this._updateTransform()},t.prototype.setCenter=function(r,a){r&&(this._center=[parsePercent(r[0],a.getWidth()),parsePercent(r[1],a.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var a=this.zoomLimit;a&&(a.max!=null&&(r=Math.min(a.max,r)),a.min!=null&&(r=Math.max(a.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),a=r.x+r.width/2,o=r.y+r.height/2;return[a,o]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),a=this._roamTransformable,o=this.getDefaultCenter(),s=this.getCenter(),l=this.getZoom();s=applyTransform$1([],s,r),o=applyTransform$1([],o,r),a.originX=s[0],a.originY=s[1],a.x=o[0]-s[0],a.y=o[1]-s[1],a.scaleX=a.scaleY=l,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,a=this._rawTransformable;a.parent=r,r.updateTransform(),a.updateTransform(),copy(this.transform||(this.transform=[]),a.transform||create$1()),this._rawTransform=a.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,a=this._roamTransformable,o=new Transformable$1;return o.transform=a.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,a,o){var s=a?this._rawTransform:this.transform;return o=o||[],s?v2ApplyTransform(o,r,s):copy$1(o,r)},t.prototype.pointToData=function(r){var a=this.invTransform;return a?v2ApplyTransform([],r,a):[r[0],r[1]]},t.prototype.convertToPixel=function(r,a,o){var s=getCoordSys$4(a);return s===this?s.dataToPoint(o):null},t.prototype.convertFromPixel=function(r,a,o){var s=getCoordSys$4(a);return s===this?s.pointToData(o):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(Transformable$1);function getCoordSys$4(n){var t=n.seriesModel;return t?t.coordinateSystem:null}const View$1=View;var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(n){__extends$1(t,n);function t(r,a,o){var s=n.call(this,r)||this;s.dimensions=geo2DDimensions,s.type="geo",s._nameCoordMap=createHashMap(),s.map=a;var l=o.projection,u=geoSourceManager.load(a,o.nameMap,o.nameProperty),d=geoSourceManager.getGeoResource(a);s.resourceType=d?d.type:null;var v=s.regions=u.regions,g=GEO_DEFAULT_PARAMS[d.type];s._regionsMap=u.regionsMap,s.regions=u.regions,s.projection=l;var f;if(l)for(var c=0;c<v.length;c++){var y=v[c].getBoundingRect(l);f=f||y.clone(),f.union(y)}else f=u.boundingRect;return s.setBoundingRect(f.x,f.y,f.width,f.height),s.aspectScale=l?1:retrieve2(o.aspectScale,g.aspectScale),s._invertLongitute=l?!1:g.invertLongitute,s}return t.prototype._transformTo=function(r,a,o,s){var l=this.getBoundingRect(),u=this._invertLongitute;l=l.clone(),u&&(l.y=-l.y-l.height);var d=this._rawTransformable;d.transform=l.calculateTransform(new BoundingRect$1(r,a,o,s));var v=d.parent;d.parent=null,d.decomposeTransform(),d.parent=v,u&&(d.scaleY=-d.scaleY),this._updateTransform()},t.prototype.getRegion=function(r){return this._regionsMap.get(r)},t.prototype.getRegionByCoord=function(r){for(var a=this.regions,o=0;o<a.length;o++){var s=a[o];if(s.type==="geoJSON"&&s.contain(r))return a[o]}},t.prototype.addGeoCoord=function(r,a){this._nameCoordMap.set(r,a)},t.prototype.getGeoCoord=function(r){var a=this._regionsMap.get(r);return this._nameCoordMap.get(r)||a&&a.getCenter()},t.prototype.dataToPoint=function(r,a,o){if(isString(r)&&(r=this.getGeoCoord(r)),r){var s=this.projection;return s&&(r=s.project(r)),r&&this.projectedToPoint(r,a,o)}},t.prototype.pointToData=function(r){var a=this.projection;return a&&(r=a.unproject(r)),r&&this.pointToProjected(r)},t.prototype.pointToProjected=function(r){return n.prototype.pointToData.call(this,r)},t.prototype.projectedToPoint=function(r,a,o){return n.prototype.dataToPoint.call(this,r,a,o)},t.prototype.convertToPixel=function(r,a,o){var s=getCoordSys$3(a);return s===this?s.dataToPoint(o):null},t.prototype.convertFromPixel=function(r,a,o){var s=getCoordSys$3(a);return s===this?s.pointToData(o):null},t}(View$1);mixin(Geo,View$1);function getCoordSys$3(n){var t=n.geoModel,r=n.seriesModel;return t?t.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}const Geo$1=Geo;function resizeGeo(n,t){var r=n.get("boundingCoords");if(r!=null){var a=r[0],o=r[1];if(isFinite(a[0])&&isFinite(a[1])&&isFinite(o[0])&&isFinite(o[1])){var s=this.projection;if(s){var l=a[0],u=a[1],d=o[0],v=o[1];a=[1/0,1/0],o=[-1/0,-1/0];var g=function($,P,I,C){for(var M=I-$,D=C-P,R=0;R<=100;R++){var N=R/100,O=s.project([$+M*N,P+D*N]);min$1(a,a,O),max$1(o,o,O)}};g(l,u,d,u),g(d,u,d,v),g(d,v,l,v),g(l,v,d,u)}this.setBoundingRect(a[0],a[1],o[0]-a[0],o[1]-a[1])}}var f=this.getBoundingRect(),c=n.get("layoutCenter"),y=n.get("layoutSize"),_=t.getWidth(),b=t.getHeight(),S=f.width/f.height*this.aspectScale,x=!1,w,T;c&&y&&(w=[parsePercent(c[0],_),parsePercent(c[1],b)],T=parsePercent(y,Math.min(_,b)),!isNaN(w[0])&&!isNaN(w[1])&&!isNaN(T)&&(x=!0));var A;if(x)A={},S>1?(A.width=T,A.height=T/S):(A.height=T,A.width=T*S),A.y=w[1]-A.height/2,A.x=w[0]-A.width/2;else{var E=n.getBoxLayoutParams();E.aspect=S,A=getLayoutRect(E,{width:_,height:b})}this.setViewRect(A.x,A.y,A.width,A.height),this.setCenter(n.get("center"),t),this.setZoom(n.get("zoom"))}function setGeoCoords(n,t){each$f(t.get("geoCoord"),function(r,a){n.addGeoCoord(a,r)})}var GeoCreator=function(){function n(){this.dimensions=geo2DDimensions}return n.prototype.create=function(t,r){var a=[];function o(l){return{nameProperty:l.get("nameProperty"),aspectScale:l.get("aspectScale"),projection:l.get("projection")}}t.eachComponent("geo",function(l,u){var d=l.get("map"),v=new Geo$1(d+u,d,extend({nameMap:l.get("nameMap")},o(l)));v.zoomLimit=l.get("scaleLimit"),a.push(v),l.coordinateSystem=v,v.model=l,v.resize=resizeGeo,v.resize(l,r)}),t.eachSeries(function(l){var u=l.get("coordinateSystem");if(u==="geo"){var d=l.get("geoIndex")||0;l.coordinateSystem=a[d]}});var s={};return t.eachSeriesByType("map",function(l){if(!l.getHostGeoModel()){var u=l.getMapType();s[u]=s[u]||[],s[u].push(l)}}),each$f(s,function(l,u){var d=map$1(l,function(g){return g.get("nameMap")}),v=new Geo$1(u,u,extend({nameMap:mergeAll(d)},o(l[0])));v.zoomLimit=retrieve.apply(null,map$1(l,function(g){return g.get("scaleLimit")})),a.push(v),v.resize=resizeGeo,v.resize(l[0],r),each$f(l,function(g){g.coordinateSystem=v,setGeoCoords(v,g)})}),a},n.prototype.getFilledRegions=function(t,r,a,o){for(var s=(t||[]).slice(),l=createHashMap(),u=0;u<s.length;u++)l.set(s[u].name,s[u]);var d=geoSourceManager.load(r,a,o);return each$f(d.regions,function(v){var g=v.name;!l.get(g)&&s.push({name:g})}),s},n}(),geoCreator=new GeoCreator;const geoCreator$1=geoCreator;var GeoModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,a,o){var s=geoSourceManager.getGeoResource(r.map);if(s&&s.type==="geoJSON"){var l=r.itemStyle=r.itemStyle||{};"color"in l||(l.color="#eee")}this.mergeDefaultAndTheme(r,o),defaultEmphasis(r,"label",["show"])},t.prototype.optionUpdated=function(){var r=this,a=this.option;a.regions=geoCreator$1.getFilledRegions(a.regions,a.map,a.nameMap,a.nameProperty);var o={};this._optionModelMap=reduce(a.regions||[],function(s,l){var u=l.name;return u&&(s.set(u,new Model$1(l,r,r.ecModel)),l.selected&&(o[u]=!0)),s},createHashMap()),a.selectedMap||(a.selectedMap=o)},t.prototype.getRegionModel=function(r){return this._optionModelMap.get(r)||new Model$1(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(r,a){var o=this.getRegionModel(r),s=a==="normal"?o.get(["label","formatter"]):o.get(["emphasis","label","formatter"]),l={name:r};if(isFunction(s))return l.status=a,s(l);if(isString(s))return s.replace("{a}",r??"")},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.select=function(r){var a=this.option,o=a.selectedMode;if(o){o!=="multiple"&&(a.selectedMap=null);var s=a.selectedMap||(a.selectedMap={});s[r]=!0}},t.prototype.unSelect=function(r){var a=this.option.selectedMap;a&&(a[r]=!1)},t.prototype.toggleSelected=function(r){this[this.isSelected(r)?"unSelect":"select"](r)},t.prototype.isSelected=function(r){var a=this.option.selectedMap;return!!(a&&a[r])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(ComponentModel$1);const GeoModel$1=GeoModel;function getCenterCoord(n,t){return n.pointToProjected?n.pointToProjected(t):n.pointToData(t)}function updateCenterAndZoom(n,t,r,a){var o=n.getZoom(),s=n.getCenter(),l=t.zoom,u=n.projectedToPoint?n.projectedToPoint(s):n.dataToPoint(s);if(t.dx!=null&&t.dy!=null&&(u[0]-=t.dx,u[1]-=t.dy,n.setCenter(getCenterCoord(n,u),a)),l!=null){if(r){var d=r.min||0,v=r.max||1/0;l=Math.max(Math.min(o*l,v),d)/o}n.scaleX*=l,n.scaleY*=l;var g=(t.originX-n.x)*(l-1),f=(t.originY-n.y)*(l-1);n.x-=g,n.y-=f,n.updateTransform(),n.setCenter(getCenterCoord(n,u),a),n.setZoom(l*o)}return{center:n.getCenter(),zoom:n.getZoom()}}var GeoView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.focusBlurEnabled=!0,r}return t.prototype.init=function(r,a){this._api=a},t.prototype.render=function(r,a,o,s){if(this._model=r,!r.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw$1(o));var l=this._mapDraw;l.draw(r,a,o,this,s),l.group.on("click",this._handleRegionClick,this),l.group.silent=r.get("silent"),this.group.add(l.group),this.updateSelectStatus(r,a,o)},t.prototype._handleRegionClick=function(r){var a;findEventDispatcher(r.target,function(o){return(a=getECData(o).eventData)!=null},!0),a&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:a.name})},t.prototype.updateSelectStatus=function(r,a,o){var s=this;this._mapDraw.group.traverse(function(l){var u=getECData(l).eventData;if(u)return s._model.isSelected(u.name)?o.enterSelect(l):o.leaveSelect(l),!0})},t.prototype.findHighDownDispatchers=function(r){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(r,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(ComponentView$1);const GeoView$1=GeoView;function registerMap(n,t,r){geoSourceManager.registerMap(n,t,r)}function install$J(n){n.registerCoordinateSystem("geo",geoCreator$1),n.registerComponentModel(GeoModel$1),n.registerComponentView(GeoView$1),n.registerImpl("registerMap",registerMap),n.registerImpl("getMap",function(r){return geoSourceManager.getMapForUser(r)});function t(r,a){a.update="geo:updateSelectStatus",n.registerAction(a,function(o,s){var l={},u=[];return s.eachComponent({mainType:"geo",query:o},function(d){d[r](o.name);var v=d.coordinateSystem;each$f(v.regions,function(f){l[f.name]=d.isSelected(f.name)||!1});var g=[];each$f(l,function(f,c){l[c]&&g.push(c)}),u.push({geoIndex:d.componentIndex,name:g})}),{selected:l,allSelected:u,name:o.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(r,a,o){var s=r.componentType||"series";a.eachComponent({mainType:s,query:r},function(l){var u=l.coordinateSystem;if(u.type==="geo"){var d=updateCenterAndZoom(u,r,l.get("scaleLimit"),o);l.setCenter&&l.setCenter(d.center),l.setZoom&&l.setZoom(d.zoom),s==="series"&&each$f(l.seriesGroup,function(v){v.setCenter(d.center),v.setZoom(d.zoom)})}})})}function install$I(n){use(install$J),n.registerChartView(MapView$1),n.registerSeriesModel(MapSeries$1),n.registerLayout(mapSymbolLayout),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",n.registerAction)}function init(n){var t=n;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],a,o;a=r.pop();)if(o=a.children,a.isExpand&&o.length)for(var s=o.length,l=s-1;l>=0;l--){var u=o[l];u.hierNode={defaultAncestor:null,ancestor:u,prelim:0,modifier:0,change:0,shift:0,i:l,thread:null},r.push(u)}}function firstWalk(n,t){var r=n.isExpand?n.children:[],a=n.parentNode.children,o=n.hierNode.i?a[n.hierNode.i-1]:null;if(r.length){executeShifts(n);var s=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;o?(n.hierNode.prelim=o.hierNode.prelim+t(n,o),n.hierNode.modifier=n.hierNode.prelim-s):n.hierNode.prelim=s}else o&&(n.hierNode.prelim=o.hierNode.prelim+t(n,o));n.parentNode.hierNode.defaultAncestor=apportion(n,o,n.parentNode.hierNode.defaultAncestor||a[0],t)}function secondWalk(n){var t=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:t},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function separation(n){return arguments.length?n:defaultSeparation}function radialCoordinate(n,t){return n-=Math.PI/2,{x:t*Math.cos(n),y:t*Math.sin(n)}}function getViewRect$4(n,t){return getLayoutRect(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function executeShifts(n){for(var t=n.children,r=t.length,a=0,o=0;--r>=0;){var s=t[r];s.hierNode.prelim+=a,s.hierNode.modifier+=a,o+=s.hierNode.change,a+=s.hierNode.shift+o}}function apportion(n,t,r,a){if(t){for(var o=n,s=n,l=s.parentNode.children[0],u=t,d=o.hierNode.modifier,v=s.hierNode.modifier,g=l.hierNode.modifier,f=u.hierNode.modifier;u=nextRight(u),s=nextLeft(s),u&&s;){o=nextRight(o),l=nextLeft(l),o.hierNode.ancestor=n;var c=u.hierNode.prelim+f-s.hierNode.prelim-v+a(u,s);c>0&&(moveSubtree(nextAncestor(u,n,r),n,c),v+=c,d+=c),f+=u.hierNode.modifier,v+=s.hierNode.modifier,d+=o.hierNode.modifier,g+=l.hierNode.modifier}u&&!nextRight(o)&&(o.hierNode.thread=u,o.hierNode.modifier+=f-d),s&&!nextLeft(l)&&(l.hierNode.thread=s,l.hierNode.modifier+=v-g,r=n)}return r}function nextRight(n){var t=n.children;return t.length&&n.isExpand?t[t.length-1]:n.hierNode.thread}function nextLeft(n){var t=n.children;return t.length&&n.isExpand?t[0]:n.hierNode.thread}function nextAncestor(n,t,r){return n.hierNode.ancestor.parentNode===t.parentNode?n.hierNode.ancestor:r}function moveSubtree(n,t,r){var a=r/(t.hierNode.i-n.hierNode.i);t.hierNode.change-=a,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,n.hierNode.change+=a}function defaultSeparation(n,t){return n.parentNode===t.parentNode?1:2}var TreeEdgeShape=function(){function n(){this.parentPoint=[],this.childPoints=[]}return n}(),TreePath=function(n){__extends$1(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new TreeEdgeShape},t.prototype.buildPath=function(r,a){var o=a.childPoints,s=o.length,l=a.parentPoint,u=o[0],d=o[s-1];if(s===1){r.moveTo(l[0],l[1]),r.lineTo(u[0],u[1]);return}var v=a.orient,g=v==="TB"||v==="BT"?0:1,f=1-g,c=parsePercent(a.forkPosition,1),y=[];y[g]=l[g],y[f]=l[f]+(d[f]-l[f])*c,r.moveTo(l[0],l[1]),r.lineTo(y[0],y[1]),r.moveTo(u[0],u[1]),y[g]=u[g],r.lineTo(y[0],y[1]),y[g]=d[g],r.lineTo(y[0],y[1]),r.lineTo(d[0],d[1]);for(var _=1;_<s-1;_++){var b=o[_];r.moveTo(b[0],b[1]),y[g]=b[g],r.lineTo(y[0],y[1])}},t}(Path$1),TreeView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Group$4,r}return t.prototype.init=function(r,a){this._controller=new RoamController$1(a.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,a,o){var s=r.getData(),l=r.layoutInfo,u=this._mainGroup,d=r.get("layout");d==="radial"?(u.x=l.x+l.width/2,u.y=l.y+l.height/2):(u.x=l.x,u.y=l.y),this._updateViewCoordSys(r,o),this._updateController(r,a,o);var v=this._data;s.diff(v).add(function(g){symbolNeedsDraw(s,g)&&updateNode(s,g,null,u,r)}).update(function(g,f){var c=v.getItemGraphicEl(f);if(!symbolNeedsDraw(s,g)){c&&removeNode(v,f,c,u,r);return}updateNode(s,g,c,u,r)}).remove(function(g){var f=v.getItemGraphicEl(g);f&&removeNode(v,g,f,u,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&s.eachItemGraphicEl(function(g,f){g.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=s},t.prototype._updateViewCoordSys=function(r,a){var o=r.getData(),s=[];o.each(function(f){var c=o.getItemLayout(f);c&&!isNaN(c.x)&&!isNaN(c.y)&&s.push([+c.x,+c.y])});var l=[],u=[];fromPoints(s,l,u);var d=this._min,v=this._max;u[0]-l[0]===0&&(l[0]=d?d[0]:l[0]-1,u[0]=v?v[0]:u[0]+1),u[1]-l[1]===0&&(l[1]=d?d[1]:l[1]-1,u[1]=v?v[1]:u[1]+1);var g=r.coordinateSystem=new View$1;g.zoomLimit=r.get("scaleLimit"),g.setBoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1]),g.setCenter(r.get("center"),a),g.setZoom(r.get("zoom")),this.group.attr({x:g.x,y:g.y,scaleX:g.scaleX,scaleY:g.scaleY}),this._min=l,this._max=u},t.prototype._updateController=function(r,a,o){var s=this,l=this._controller,u=this._controllerHost,d=this.group;l.setPointerChecker(function(v,g,f){var c=d.getBoundingRect();return c.applyTransform(d.transform),c.contain(g,f)&&!onIrrelevantElement(v,o,r)}),l.enable(r.get("roam")),u.zoomLimit=r.get("scaleLimit"),u.zoom=r.coordinateSystem.getZoom(),l.off("pan").off("zoom").on("pan",function(v){updateViewOnPan(u,v.dx,v.dy),o.dispatchAction({seriesId:r.id,type:"treeRoam",dx:v.dx,dy:v.dy})}).on("zoom",function(v){updateViewOnZoom(u,v.scale,v.originX,v.originY),o.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:v.scale,originX:v.originX,originY:v.originY}),s._updateNodeAndLinkScale(r),o.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var a=r.getData(),o=this._getNodeGlobalScale(r);a.eachItemGraphicEl(function(s,l){s.setSymbolScale(o)})},t.prototype._getNodeGlobalScale=function(r){var a=r.coordinateSystem;if(a.type!=="view")return 1;var o=this._nodeScaleRatio,s=a.scaleX||1,l=a.getZoom(),u=(l-1)*o+1;return u/s},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(ChartView$1);function symbolNeedsDraw(n,t){var r=n.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function updateNode(n,t,r,a,o){var s=!r,l=n.tree.getNodeByDataIndex(t),u=l.getModel(),d=l.getVisual("style").fill,v=l.isExpand===!1&&l.children.length!==0?d:"#fff",g=n.tree.root,f=l.parentNode===g?l:l.parentNode||l,c=n.getItemGraphicEl(f.dataIndex),y=f.getLayout(),_=c?{x:c.__oldX,y:c.__oldY,rawX:c.__radialOldRawX,rawY:c.__radialOldRawY}:y,b=l.getLayout();s?(r=new SymbolClz(n,t,null,{symbolInnerColor:v,useNameLabel:!0}),r.x=_.x,r.y=_.y):r.updateData(n,t,null,{symbolInnerColor:v,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=b.rawX,r.__radialRawY=b.rawY,a.add(r),n.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,updateProps$1(r,{x:b.x,y:b.y},o);var S=r.getSymbolPath();if(o.get("layout")==="radial"){var x=g.children[0],w=x.getLayout(),T=x.children.length,A=void 0,E=void 0;if(b.x===w.x&&l.isExpand===!0&&x.children.length){var $={x:(x.children[0].getLayout().x+x.children[T-1].getLayout().x)/2,y:(x.children[0].getLayout().y+x.children[T-1].getLayout().y)/2};A=Math.atan2($.y-w.y,$.x-w.x),A<0&&(A=Math.PI*2+A),E=$.x<w.x,E&&(A=A-Math.PI)}else A=Math.atan2(b.y-w.y,b.x-w.x),A<0&&(A=Math.PI*2+A),l.children.length===0||l.children.length!==0&&l.isExpand===!1?(E=b.x<w.x,E&&(A=A-Math.PI)):(E=b.x>w.x,E||(A=A-Math.PI));var P=E?"left":"right",I=u.getModel("label"),C=I.get("rotate"),M=C*(Math.PI/180),D=S.getTextContent();D&&(S.setTextConfig({position:I.get("position")||P,rotation:C==null?-A:M,origin:"center"}),D.setStyle("verticalAlign","middle"))}var R=u.get(["emphasis","focus"]),N=R==="relative"?concatArray(l.getAncestorsIndices(),l.getDescendantIndices()):R==="ancestor"?l.getAncestorsIndices():R==="descendant"?l.getDescendantIndices():null;N&&(getECData(r).focus=N),drawEdge(o,l,g,r,_,y,b,a),r.__edge&&(r.onHoverStateChange=function(O){if(O!=="blur"){var F=l.parentNode&&n.getItemGraphicEl(l.parentNode.dataIndex);F&&F.hoverState===HOVER_STATE_BLUR||setStatesFlag(r.__edge,O)}})}function drawEdge(n,t,r,a,o,s,l,u){var d=t.getModel(),v=n.get("edgeShape"),g=n.get("layout"),f=n.getOrient(),c=n.get(["lineStyle","curveness"]),y=n.get("edgeForkPosition"),_=d.getModel("lineStyle").getLineStyle(),b=a.__edge;if(v==="curve")t.parentNode&&t.parentNode!==r&&(b||(b=a.__edge=new BezierCurve$1({shape:getEdgeShape(g,f,c,o,o)})),updateProps$1(b,{shape:getEdgeShape(g,f,c,s,l)},n));else if(v==="polyline"&&g==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var S=t.children,x=[],w=0;w<S.length;w++){var T=S[w].getLayout();x.push([T.x,T.y])}b||(b=a.__edge=new TreePath({shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]],orient:f,forkPosition:y}})),updateProps$1(b,{shape:{parentPoint:[l.x,l.y],childPoints:x}},n)}b&&!(v==="polyline"&&!t.isExpand)&&(b.useStyle(defaults({strokeNoScale:!0,fill:null},_)),setStatesStylesFromModel(b,d,"lineStyle"),setDefaultStateProxy(b),u.add(b))}function removeNodeEdge(n,t,r,a,o){var s=t.tree.root,l=getSourceNode(s,n),u=l.source,d=l.sourceLayout,v=t.getItemGraphicEl(n.dataIndex);if(v){var g=t.getItemGraphicEl(u.dataIndex),f=g.__edge,c=v.__edge||(u.isExpand===!1||u.children.length===1?f:void 0),y=a.get("edgeShape"),_=a.get("layout"),b=a.get("orient"),S=a.get(["lineStyle","curveness"]);c&&(y==="curve"?removeElement(c,{shape:getEdgeShape(_,b,S,d,d),style:{opacity:0}},a,{cb:function(){r.remove(c)},removeOpt:o}):y==="polyline"&&a.get("layout")==="orthogonal"&&removeElement(c,{shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]]},style:{opacity:0}},a,{cb:function(){r.remove(c)},removeOpt:o}))}}function getSourceNode(n,t){for(var r=t.parentNode===n?t:t.parentNode||t,a;a=r.getLayout(),a==null;)r=r.parentNode===n?r:r.parentNode||r;return{source:r,sourceLayout:a}}function removeNode(n,t,r,a,o){var s=n.tree.getNodeByDataIndex(t),l=n.tree.root,u=getSourceNode(l,s).sourceLayout,d={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};removeElement(r,{x:u.x+1,y:u.y+1},o,{cb:function(){a.remove(r),n.setItemGraphicEl(t,null)},removeOpt:d}),r.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:d}),s.children.forEach(function(v){removeNodeEdge(v,n,a,o,d)}),removeNodeEdge(s,n,a,o,d)}function getEdgeShape(n,t,r,a,o){var s,l,u,d,v,g,f,c;if(n==="radial"){v=a.rawX,f=a.rawY,g=o.rawX,c=o.rawY;var y=radialCoordinate(v,f),_=radialCoordinate(v,f+(c-f)*r),b=radialCoordinate(g,c+(f-c)*r),S=radialCoordinate(g,c);return{x1:y.x||0,y1:y.y||0,x2:S.x||0,y2:S.y||0,cpx1:_.x||0,cpy1:_.y||0,cpx2:b.x||0,cpy2:b.y||0}}else v=a.x,f=a.y,g=o.x,c=o.y,(t==="LR"||t==="RL")&&(s=v+(g-v)*r,l=f,u=g+(v-g)*r,d=c),(t==="TB"||t==="BT")&&(s=v,l=f+(c-f)*r,u=g,d=c+(f-c)*r);return{x1:v,y1:f,x2:g,y2:c,cpx1:s,cpy1:l,cpx2:u,cpy2:d}}const TreeView$1=TreeView;var inner$e=makeInner();function linkSeriesData(n){var t=n.mainData,r=n.datas;r||(r={main:t},n.datasAttr={main:"data"}),n.datas=n.mainData=null,linkAll(t,r,n),each$f(r,function(a){each$f(t.TRANSFERABLE_METHODS,function(o){a.wrapMethod(o,curry$1(transferInjection,n))})}),t.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,n)),each$f(t.CHANGABLE_METHODS,function(a){t.wrapMethod(a,curry$1(changeInjection,n))}),assert(r[t.dataType]===t)}function transferInjection(n,t){if(isMainData(this)){var r=extend({},inner$e(this).datas);r[this.dataType]=t,linkAll(t,r,n)}else linkSingle(t,this.dataType,inner$e(this).mainData,n);return t}function changeInjection(n,t){return n.struct&&n.struct.update(),t}function cloneShallowInjection(n,t){return each$f(inner$e(t).datas,function(r,a){r!==t&&linkSingle(r.cloneShallow(),a,t,n)}),t}function getLinkedData(n){var t=inner$e(this).mainData;return n==null||t==null?t:inner$e(t).datas[n]}function getLinkedDataAll(){var n=inner$e(this).mainData;return n==null?[{data:n}]:map$1(keys(inner$e(n).datas),function(t){return{type:t,data:inner$e(n).datas[t]}})}function isMainData(n){return inner$e(n).mainData===n}function linkAll(n,t,r){inner$e(n).datas={},each$f(t,function(a,o){linkSingle(a,o,n,r)})}function linkSingle(n,t,r,a){inner$e(r).datas[t]=n,inner$e(n).mainData=r,n.dataType=t,a.struct&&(n[a.structAttr]=a.struct,a.struct[a.datasAttr[t]]=n),n.getLinkedData=getLinkedData,n.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function n(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(t,r,a){isFunction(t)&&(a=r,r=t,t=null),t=t||{},isString(t)&&(t={order:t});var o=t.order||"preorder",s=this[t.attr||"children"],l;o==="preorder"&&(l=r.call(a,this));for(var u=0;!l&&u<s.length;u++)s[u].eachNode(t,r,a);o==="postorder"&&r.call(a,this)},n.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var a=0;a<this.children.length;a++){var o=this.children[a];o.updateDepthAndHeight(t+1),o.height>r&&(r=o.height)}this.height=r+1},n.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,a=this.children,o=a.length;r<o;r++){var s=a[r].getNodeById(t);if(s)return s}},n.prototype.contains=function(t){if(t===this)return!0;for(var r=0,a=this.children,o=a.length;r<o;r++){var s=a[r].contains(t);if(s)return s}},n.prototype.getAncestors=function(t){for(var r=[],a=t?this:this.parentNode;a;)r.push(a),a=a.parentNode;return r.reverse(),r},n.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},n.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},n.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},n.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,a=r.data.getItemModel(this.dataIndex);return a.getModel(t)}},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},n.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},n.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},n.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},n}(),Tree=function(){function n(t){this.type="tree",this._nodes=[],this.hostModel=t}return n.prototype.eachNode=function(t,r,a){this.root.eachNode(t,r,a)},n.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},n.prototype.getNodeById=function(t){return this.root.getNodeById(t)},n.prototype.update=function(){for(var t=this.data,r=this._nodes,a=0,o=r.length;a<o;a++)r[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)r[t.getRawIndex(a)].dataIndex=a},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(t,r,a){var o=new n(r),s=[],l=1;u(t);function u(g,f){var c=g.value;l=Math.max(l,isArray$1(c)?c.length:1),s.push(g);var y=new TreeNode(convertOptionIdName(g.name,""),o);f?addChild(y,f):o.root=y,o._nodes.push(y);var _=g.children;if(_)for(var b=0;b<_.length;b++)u(_[b],y)}o.root.updateDepthAndHeight(0);var d=prepareSeriesDataSchema(s,{coordDimensions:["value"],dimensionsCount:l}).dimensions,v=new SeriesData$1(d,r);return v.initData(s),a&&a(v),linkSeriesData({mainData:v,struct:o,structAttr:"tree"}),o.update(),o},n}();function addChild(n,t){var r=t.children;n.parentNode!==t&&(r.push(n),n.parentNode=t)}const Tree$1=Tree;function retrieveTargetInfo(n,t,r){if(n&&indexOf(t,n.type)>=0){var a=r.getData().tree.root,o=n.targetNode;if(isString(o)&&(o=a.getNodeById(o)),o&&a.contains(o))return{node:o};var s=n.targetNodeId;if(s!=null&&(o=a.getNodeById(s)))return{node:o}}}function getPathToRoot(n){for(var t=[];n;)n=n.parentNode,n&&t.push(n);return t.reverse()}function aboveViewRoot(n,t){var r=getPathToRoot(n);return indexOf(r,t)>=0}function wrapTreePathInfo(n,t){for(var r=[];n;){var a=n.dataIndex;r.push({name:n.name,dataIndex:a,value:t.getRawValue(a)}),n=n.parentNode}return r.reverse(),r}var TreeSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var a={name:r.name,children:r.data},o=r.leaves||{},s=new Model$1(o,this,this.ecModel),l=Tree$1.createTree(a,this,u);function u(f){f.wrapMethod("getItemModel",function(c,y){var _=l.getNodeByDataIndex(y);return _&&_.children.length&&_.isExpand||(c.parentModel=s),c})}var d=0;l.eachNode("preorder",function(f){f.depth>d&&(d=f.depth)});var v=r.expandAndCollapse,g=v&&r.initialTreeDepth>=0?r.initialTreeDepth:d;return l.root.eachNode("preorder",function(f){var c=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=c&&c.collapsed!=null?!c.collapsed:f.depth<=g}),l.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,a,o){for(var s=this.getData().tree,l=s.root.children[0],u=s.getNodeByDataIndex(r),d=u.getValue(),v=u.name;u&&u!==l;)v=u.parentNode.name+"."+v,u=u.parentNode;return createTooltipMarkup("nameValue",{name:v,value:d,noValue:isNaN(d)||d==null})},t.prototype.getDataParams=function(r){var a=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(r);return a.treeAncestors=wrapTreePathInfo(o,this),a.collapsed=!o.isExpand,a},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(SeriesModel$1);const TreeSeriesModel$1=TreeSeriesModel;function eachAfter(n,t,r){for(var a=[n],o=[],s;s=a.pop();)if(o.push(s),s.isExpand){var l=s.children;if(l.length)for(var u=0;u<l.length;u++)a.push(l[u])}for(;s=o.pop();)t(s,r)}function eachBefore(n,t){for(var r=[n],a;a=r.pop();)if(t(a),a.isExpand){var o=a.children;if(o.length)for(var s=o.length-1;s>=0;s--)r.push(o[s])}}function treeLayout(n,t){n.eachSeriesByType("tree",function(r){commonLayout(r,t)})}function commonLayout(n,t){var r=getViewRect$4(n,t);n.layoutInfo=r;var a=n.get("layout"),o=0,s=0,l=null;a==="radial"?(o=2*Math.PI,s=Math.min(r.height,r.width)/2,l=separation(function(T,A){return(T.parentNode===A.parentNode?1:2)/T.depth})):(o=r.width,s=r.height,l=separation());var u=n.getData().tree.root,d=u.children[0];if(d){init(u),eachAfter(d,firstWalk,l),u.hierNode.modifier=-d.hierNode.prelim,eachBefore(d,secondWalk);var v=d,g=d,f=d;eachBefore(d,function(T){var A=T.getLayout().x;A<v.getLayout().x&&(v=T),A>g.getLayout().x&&(g=T),T.depth>f.depth&&(f=T)});var c=v===g?1:l(v,g)/2,y=c-v.getLayout().x,_=0,b=0,S=0,x=0;if(a==="radial")_=o/(g.getLayout().x+c+y),b=s/(f.depth-1||1),eachBefore(d,function(T){S=(T.getLayout().x+y)*_,x=(T.depth-1)*b;var A=radialCoordinate(S,x);T.setLayout({x:A.x,y:A.y,rawX:S,rawY:x},!0)});else{var w=n.getOrient();w==="RL"||w==="LR"?(b=s/(g.getLayout().x+c+y),_=o/(f.depth-1||1),eachBefore(d,function(T){x=(T.getLayout().x+y)*b,S=w==="LR"?(T.depth-1)*_:o-(T.depth-1)*_,T.setLayout({x:S,y:x},!0)})):(w==="TB"||w==="BT")&&(_=o/(g.getLayout().x+c+y),b=s/(f.depth-1||1),eachBefore(d,function(T){S=(T.getLayout().x+y)*_,x=w==="TB"?(T.depth-1)*b:s-(T.depth-1)*b,T.setLayout({x:S,y:x},!0)}))}}}function treeVisual(n){n.eachSeriesByType("tree",function(t){var r=t.getData(),a=r.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle(),u=r.ensureUniqueItemVisual(o.dataIndex,"style");extend(u,l)})})}function installTreeAction(n){n.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(a){var o=t.dataIndex,s=a.getData().tree,l=s.getNodeByDataIndex(o);l.isExpand=!l.isExpand})}),n.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,a){r.eachComponent({mainType:"series",subType:"tree",query:t},function(o){var s=o.coordinateSystem,l=updateCenterAndZoom(s,t,void 0,a);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom)})})}function install$H(n){n.registerChartView(TreeView$1),n.registerSeriesModel(TreeSeriesModel$1),n.registerLayout(treeLayout),n.registerVisual(treeVisual),installTreeAction(n)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(n){for(var t=0;t<actionTypes.length;t++)n.registerAction({type:actionTypes[t],update:"updateView"},noop);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,a){a.eachComponent({mainType:"series",subType:"treemap",query:r},o);function o(s,l){var u=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(r,u,s);if(d){var v=s.getViewRoot();v&&(r.direction=aboveViewRoot(v,d.node)?"rollUp":"drillDown"),s.resetViewRoot(d.node)}}})}function enableAriaDecalForTree(n){var t=n.getData(),r=t.tree,a={};r.eachNode(function(o){for(var s=o;s&&s.depth>1;)s=s.parentNode;var l=getDecalFromPalette(n.ecModel,s.name||s.dataIndex+"",a);o.setVisual("decal",l)})}var TreemapSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.preventUsingHoverLayer=!0,r}return t.prototype.getInitialData=function(r,a){var o={name:r.name,children:r.data};completeTreeValue$1(o);var s=r.levels||[],l=this.designatedVisualItemStyle={},u=new Model$1({itemStyle:l},this,a);s=r.levels=setDefault(s,a);var d=map$1(s||[],function(f){return new Model$1(f,u,a)},this),v=Tree$1.createTree(o,this,g);function g(f){f.wrapMethod("getItemModel",function(c,y){var _=v.getNodeByDataIndex(y),b=_?d[_.depth]:null;return c.parentModel=b||u,c})}return v.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(r,a,o){var s=this.getData(),l=this.getRawValue(r),u=s.getName(r);return createTooltipMarkup("nameValue",{name:u,value:l})},t.prototype.getDataParams=function(r){var a=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(r);return a.treeAncestors=wrapTreePathInfo(o,this),a.treePathInfo=a.treeAncestors,a},t.prototype.setLayoutInfo=function(r){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,r)},t.prototype.mapIdToIndex=function(r){var a=this._idIndexMap;a||(a=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var o=a.get(r);return o==null&&a.set(r,o=this._idIndexMapCount++),o},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var a=this.getRawData().tree.root;(!r||r!==a&&!a.contains(r))&&(this._viewRoot=a)},t.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(SeriesModel$1);function completeTreeValue$1(n){var t=0;each$f(n.children,function(a){completeTreeValue$1(a);var o=a.value;isArray$1(o)&&(o=o[0]),t+=o});var r=n.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),isArray$1(n.value)?n.value[0]=r:n.value=r}function setDefault(n,t){var r=normalizeToArray(t.get("color")),a=normalizeToArray(t.get(["aria","decal","decals"]));if(r){n=n||[];var o,s;each$f(n,function(u){var d=new Model$1(u),v=d.get("color"),g=d.get("decal");(d.get(["itemStyle","color"])||v&&v!=="none")&&(o=!0),(d.get(["itemStyle","decal"])||g&&g!=="none")&&(s=!0)});var l=n[0]||(n[0]={});return o||(l.color=r.slice()),!s&&a&&(l.decal=a.slice()),n}}const TreemapSeriesModel$1=TreemapSeriesModel;var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function n(t){this.group=new Group$4,t.add(this.group)}return n.prototype.render=function(t,r,a,o){var s=t.getModel("breadcrumb"),l=this.group;if(l.removeAll(),!(!s.get("show")||!a)){var u=s.getModel("itemStyle"),d=s.getModel("emphasis"),v=u.getModel("textStyle"),g=d.getModel(["itemStyle","textStyle"]),f={pos:{left:s.get("left"),right:s.get("right"),top:s.get("top"),bottom:s.get("bottom")},box:{width:r.getWidth(),height:r.getHeight()},emptyItemWidth:s.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(a,f,v),this._renderContent(t,f,u,d,v,g,o),positionElement(l,f.pos,f.box)}},n.prototype._prepare=function(t,r,a){for(var o=t;o;o=o.parentNode){var s=convertOptionIdName(o.getModel().get("name"),""),l=a.getTextRect(s),u=Math.max(l.width+TEXT_PADDING*2,r.emptyItemWidth);r.totalWidth+=u+ITEM_GAP,r.renderList.push({node:o,text:s,width:u})}},n.prototype._renderContent=function(t,r,a,o,s,l,u){for(var d=0,v=r.emptyItemWidth,g=t.get(["breadcrumb","height"]),f=getAvailableSize(r.pos,r.box),c=r.totalWidth,y=r.renderList,_=o.getModel("itemStyle").getItemStyle(),b=y.length-1;b>=0;b--){var S=y[b],x=S.node,w=S.width,T=S.text;c>f.width&&(c-=w-v,w=v,T=null);var A=new Polygon$1({shape:{points:makeItemPoints(d,0,w,g,b===y.length-1,b===0)},style:defaults(a.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText$1({style:createTextStyle(s,{text:T})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(u,x)});A.disableLabelAnimation=!0,A.getTextContent().ensureState("emphasis").style=createTextStyle(l,{text:T}),A.ensureState("emphasis").style=_,toggleHoverEmphasis(A,o.get("focus"),o.get("blurScope"),o.get("disabled")),this.group.add(A),packEventData(A,t,x),d+=w+ITEM_GAP}},n.prototype.remove=function(){this.group.removeAll()},n}();function makeItemPoints(n,t,r,a,o,s){var l=[[o?n:n-ARRAY_LENGTH,t],[n+r,t],[n+r,t+a],[o?n:n-ARRAY_LENGTH,t+a]];return!s&&l.splice(2,0,[n+r+ARRAY_LENGTH,t+a/2]),!o&&l.push([n,t+a/2]),l}function packEventData(n,t,r){getECData(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&wrapTreePathInfo(r,t)}}const Breadcrumb$1=Breadcrumb;var AnimationWrap=function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(t,r,a,o,s){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:r,duration:a,delay:o,easing:s}),!0)},n.prototype.finished=function(t){return this._finishedCallback=t,this},n.prototype.start=function(){for(var t=this,r=this._storage.length,a=function(){r--,r<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},o=0,s=this._storage.length;o<s;o++){var l=this._storage[o];l.el.animateTo(l.target,{duration:l.duration,delay:l.delay,easing:l.easing,setToFinal:!0,done:a,aborted:a})}return this},n}();function createWrap(){return new AnimationWrap}var Group$2=Group$4,Rect$1=Rect$3,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(n){var t=getStateItemStyle(n);return t.stroke=t.fill=t.lineWidth=null,t},inner$d=makeInner(),TreemapView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r._state="ready",r._storage=createStorage(),r}return t.prototype.render=function(r,a,o,s){var l=a.findComponents({mainType:"series",subType:"treemap",query:s});if(!(indexOf(l,r)<0)){this.seriesModel=r,this.api=o,this.ecModel=a;var u=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(s,u,r),v=s&&s.type,g=r.layoutInfo,f=!this._oldTree,c=this._storage,y=v==="treemapRootToNode"&&d&&c?{rootNodeGroup:c.nodeGroup[d.node.getRawIndex()],direction:s.direction}:null,_=this._giveContainerGroup(g),b=r.get("animation"),S=this._doRender(_,r,y);b&&!f&&(!v||v==="treemapZoomToNode"||v==="treemapRootToNode")?this._doAnimation(_,S,r,y):S.renderFinally(),this._resetController(o),this._renderBreadcrumb(r,o,d)}},t.prototype._giveContainerGroup=function(r){var a=this._containerGroup;return a||(a=this._containerGroup=new Group$2,this._initEvents(a),this.group.add(a)),a.x=r.x,a.y=r.y,a},t.prototype._doRender=function(r,a,o){var s=a.getData().tree,l=this._oldTree,u=createStorage(),d=createStorage(),v=this._storage,g=[];function f(S,x,w,T){return renderNode(a,d,v,o,u,g,S,x,w,T)}y(s.root?[s.root]:[],l&&l.root?[l.root]:[],r,s===l||!l,0);var c=_(v);return this._oldTree=s,this._storage=d,{lastsForAnimation:u,willDeleteEls:c,renderFinally:b};function y(S,x,w,T,A){T?(x=S,each$f(S,function(P,I){!P.isRemoved()&&$(I,I)})):new DataDiffer$1(x,S,E,E).add($).update($).remove(curry$1($,null)).execute();function E(P){return P.getId()}function $(P,I){var C=P!=null?S[P]:null,M=I!=null?x[I]:null,D=f(C,M,w,A);D&&y(C&&C.viewChildren||[],M&&M.viewChildren||[],D,T,A+1)}}function _(S){var x=createStorage();return S&&each$f(S,function(w,T){var A=x[T];each$f(w,function(E){E&&(A.push(E),inner$d(E).willDelete=!0)})}),x}function b(){each$f(c,function(S){each$f(S,function(x){x.parent&&x.parent.remove(x)})}),each$f(g,function(S){S.invisible=!0,S.dirty()})}},t.prototype._doAnimation=function(r,a,o,s){var l=o.get("animationDurationUpdate"),u=o.get("animationEasing"),d=(isFunction(l)?0:l)||0,v=(isFunction(u)?null:u)||"cubicOut",g=createWrap();each$f(a.willDeleteEls,function(f,c){each$f(f,function(y,_){if(!y.invisible){var b=y.parent,S,x=inner$d(b);if(s&&s.direction==="drillDown")S=b===s.rootNodeGroup?{shape:{x:0,y:0,width:x.nodeWidth,height:x.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var w=0,T=0;x.willDelete||(w=x.nodeWidth/2,T=x.nodeHeight/2),S=c==="nodeGroup"?{x:w,y:T,style:{opacity:0}}:{shape:{x:w,y:T,width:0,height:0},style:{opacity:0}}}S&&g.add(y,S,d,0,v)}})}),each$f(this._storage,function(f,c){each$f(f,function(y,_){var b=a.lastsForAnimation[c][_],S={};b&&(y instanceof Group$4?b.oldX!=null&&(S.x=y.x,S.y=y.y,y.x=b.oldX,y.y=b.oldY):(b.oldShape&&(S.shape=extend({},y.shape),y.setShape(b.oldShape)),b.fadein?(y.setStyle("opacity",0),S.style={opacity:1}):y.style.opacity!==1&&(S.style={opacity:1})),g.add(y,S,d,0,v))})},this),this._state="animating",g.finished(bind$1(function(){this._state="ready",a.renderFinally()},this)).start()},t.prototype._resetController=function(r){var a=this._controller;a||(a=this._controller=new RoamController$1(r.getZr()),a.enable(this.seriesModel.get("roam")),a.on("pan",bind$1(this._onPan,this)),a.on("zoom",bind$1(this._onZoom,this)));var o=new BoundingRect$1(0,0,r.getWidth(),r.getHeight());a.setPointerChecker(function(s,l,u){return o.contain(l,u)})},t.prototype._clearController=function(){var r=this._controller;r&&(r.dispose(),r=null)},t.prototype._onPan=function(r){if(this._state!=="animating"&&(Math.abs(r.dx)>DRAG_THRESHOLD||Math.abs(r.dy)>DRAG_THRESHOLD)){var a=this.seriesModel.getData().tree.root;if(!a)return;var o=a.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+r.dx,y:o.y+r.dy,width:o.width,height:o.height}})}},t.prototype._onZoom=function(r){var a=r.originX,o=r.originY;if(this._state!=="animating"){var s=this.seriesModel.getData().tree.root;if(!s)return;var l=s.getLayout();if(!l)return;var u=new BoundingRect$1(l.x,l.y,l.width,l.height),d=this.seriesModel.layoutInfo;a-=d.x,o-=d.y;var v=create$1();translate(v,v,[-a,-o]),scale$1(v,v,[r.scale,r.scale]),translate(v,v,[a,o]),u.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:u.x,y:u.y,width:u.width,height:u.height}})}},t.prototype._initEvents=function(r){var a=this;r.on("click",function(o){if(a._state==="ready"){var s=a.seriesModel.get("nodeClick",!0);if(s){var l=a.findTarget(o.offsetX,o.offsetY);if(l){var u=l.node;if(u.getLayout().isLeafRoot)a._rootToNode(l);else if(s==="zoomToNode")a._zoomToNode(l);else if(s==="link"){var d=u.hostTree.data.getItemModel(u.dataIndex),v=d.get("link",!0),g=d.get("target",!0)||"blank";v&&windowOpen(v,g)}}}}},this)},t.prototype._renderBreadcrumb=function(r,a,o){var s=this;o||(o=r.get("leafDepth",!0)!=null?{node:r.getViewRoot()}:this.findTarget(a.getWidth()/2,a.getHeight()/2),o||(o={node:r.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb$1(this.group))).render(r,a,o.node,function(l){s._state!=="animating"&&(aboveViewRoot(r.getViewRoot(),l)?s._rootToNode({node:l}):s._zoomToNode({node:l}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(r){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype._rootToNode=function(r){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype.findTarget=function(r,a){var o,s=this.seriesModel.getViewRoot();return s.eachNode({attr:"viewChildren",order:"preorder"},function(l){var u=this._storage.background[l.getRawIndex()];if(u){var d=u.transformCoordToLocal(r,a),v=u.shape;if(v.x<=d[0]&&d[0]<=v.x+v.width&&v.y<=d[1]&&d[1]<=v.y+v.height)o={node:l,offsetX:d[0],offsetY:d[1]};else return!1}},this),o},t.type="treemap",t}(ChartView$1);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(n,t,r,a,o,s,l,u,d,v){if(!l)return;var g=l.getLayout(),f=n.getData(),c=l.getModel();if(f.setItemGraphicEl(l.dataIndex,null),!g||!g.isInView)return;var y=g.width,_=g.height,b=g.borderWidth,S=g.invisible,x=l.getRawIndex(),w=u&&u.getRawIndex(),T=l.viewChildren,A=g.upperHeight,E=T&&T.length,$=c.getModel("itemStyle"),P=c.getModel(["emphasis","itemStyle"]),I=c.getModel(["blur","itemStyle"]),C=c.getModel(["select","itemStyle"]),M=$.get("borderRadius")||0,D=q("nodeGroup",Group$2);if(!D)return;if(d.add(D),D.x=g.x||0,D.y=g.y||0,D.markRedraw(),inner$d(D).nodeWidth=y,inner$d(D).nodeHeight=_,g.isAboveViewRoot)return D;var R=q("background",Rect$1,v,Z2_BG);R&&H(D,R,E&&g.upperLabelHeight);var N=c.getModel("emphasis"),O=N.get("focus"),F=N.get("blurScope"),L=N.get("disabled"),B=O==="ancestor"?l.getAncestorsIndices():O==="descendant"?l.getDescendantIndices():O;if(E)isHighDownDispatcher(D)&&setAsHighDownDispatcher(D,!1),R&&(setAsHighDownDispatcher(R,!L),f.setItemGraphicEl(l.dataIndex,R),enableHoverFocus(R,B,F));else{var V=q("content",Rect$1,v,Z2_CONTENT);V&&X(D,V),R.disableMorphing=!0,R&&isHighDownDispatcher(R)&&setAsHighDownDispatcher(R,!1),setAsHighDownDispatcher(D,!L),f.setItemGraphicEl(l.dataIndex,D),enableHoverFocus(D,B,F)}return D;function H(j,Q,J){var oe=getECData(Q);if(oe.dataIndex=l.dataIndex,oe.seriesIndex=n.seriesIndex,Q.setShape({x:0,y:0,width:y,height:_,r:M}),S)U(Q);else{Q.invisible=!1;var ne=l.getVisual("style"),z=ne.stroke,W=getItemStyleNormal($);W.fill=z;var Z=getStateItemStyle(P);Z.fill=P.get("borderColor");var ae=getStateItemStyle(I);ae.fill=I.get("borderColor");var se=getStateItemStyle(C);if(se.fill=C.get("borderColor"),J){var ce=y-2*b;te(Q,z,ne.opacity,{x:b,y:0,width:ce,height:A})}else Q.removeTextContent();Q.setStyle(W),Q.ensureState("emphasis").style=Z,Q.ensureState("blur").style=ae,Q.ensureState("select").style=se,setDefaultStateProxy(Q)}j.add(Q)}function X(j,Q){var J=getECData(Q);J.dataIndex=l.dataIndex,J.seriesIndex=n.seriesIndex;var oe=Math.max(y-2*b,0),ne=Math.max(_-2*b,0);if(Q.culling=!0,Q.setShape({x:b,y:b,width:oe,height:ne,r:M}),S)U(Q);else{Q.invisible=!1;var z=l.getVisual("style"),W=z.fill,Z=getItemStyleNormal($);Z.fill=W,Z.decal=z.decal;var ae=getStateItemStyle(P),se=getStateItemStyle(I),ce=getStateItemStyle(C);te(Q,W,z.opacity,null),Q.setStyle(Z),Q.ensureState("emphasis").style=ae,Q.ensureState("blur").style=se,Q.ensureState("select").style=ce,setDefaultStateProxy(Q)}j.add(Q)}function U(j){!j.invisible&&s.push(j)}function te(j,Q,J,oe){var ne=c.getModel(oe?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),z=convertOptionIdName(c.get("name"),null),W=ne.getShallow("show");setLabelStyle(j,getLabelStatesModels(c,oe?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:W?z:null,inheritColor:Q,defaultOpacity:J,labelFetcher:n,labelDataIndex:l.dataIndex});var Z=j.getTextContent();if(Z){var ae=Z.style,se=normalizeCssArray$1(ae.padding||0);oe&&(j.setTextConfig({layoutRect:oe}),Z.disableLabelLayout=!0),Z.beforeUpdate=function(){var _e=Math.max((oe?oe.width:j.shape.width)-se[1]-se[3],0),ge=Math.max((oe?oe.height:j.shape.height)-se[0]-se[2],0);(ae.width!==_e||ae.height!==ge)&&Z.setStyle({width:_e,height:ge})},ae.truncateMinChar=2,ae.lineOverflow="truncate",ee(ae,oe,g);var ce=Z.getState("emphasis");ee(ce?ce.style:null,oe,g)}}function ee(j,Q,J){var oe=j?j.text:null;if(!Q&&J.isLeafRoot&&oe!=null){var ne=n.get("drillDownIcon",!0);j.text=ne?ne+" "+oe:oe}}function q(j,Q,J,oe){var ne=w!=null&&r[j][w],z=o[j];return ne?(r[j][w]=null,ie(z,ne)):S||(ne=new Q,ne instanceof Displayable$1&&(ne.z2=calculateZ2(J,oe)),pe(z,ne)),t[j][x]=ne}function ie(j,Q){var J=j[x]={};Q instanceof Group$2?(J.oldX=Q.x,J.oldY=Q.y):J.oldShape=extend({},Q.shape)}function pe(j,Q){var J=j[x]={},oe=l.parentNode,ne=Q instanceof Group$4;if(oe&&(!a||a.direction==="drillDown")){var z=0,W=0,Z=o.background[oe.getRawIndex()];!a&&Z&&Z.oldShape&&(z=Z.oldShape.width,W=Z.oldShape.height),ne?(J.oldX=0,J.oldY=W):J.oldShape={x:z,y:W,width:0,height:0}}J.fadein=!ne}}function calculateZ2(n,t){return n*Z2_BASE+t}const TreemapView$1=TreemapView;var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function n(t){var r=t.mappingMethod,a=t.type,o=this.option=clone$4(t);this.type=a,this.mappingMethod=r,this._normalizeData=normalizers[r];var s=n.visualHandlers[a];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._normalizedToVisual=s._normalizedToVisual[r],r==="piecewise"?(normalizeVisualRange(o),preprocessForPiecewise(o)):r==="category"?o.categories?preprocessForSpecifiedCategory(o):normalizeVisualRange(o,!0):(assert(r!=="linear"||o.dataExtent),normalizeVisualRange(o))}return n.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},n.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},n.listVisualTypes=function(){return keys(n.visualHandlers)},n.isValidType=function(t){return n.visualHandlers.hasOwnProperty(t)},n.eachVisual=function(t,r,a){isObject$3(t)?each$f(t,r,a):r.call(a,t)},n.mapVisual=function(t,r,a){var o,s=isArray$1(t)?[]:isObject$3(t)?{}:(o=!0,null);return n.eachVisual(t,function(l,u){var d=r.call(a,l,u);o?s=d:s[u]=d}),s},n.retrieveVisuals=function(t){var r={},a;return t&&each$c(n.visualHandlers,function(o,s){t.hasOwnProperty(s)&&(r[s]=t[s],a=!0)}),a?r:null},n.prepareVisualTypes=function(t){if(isArray$1(t))t=t.slice();else if(isObject(t)){var r=[];each$c(t,function(a,o){r.push(o)}),t=r}else return[];return t.sort(function(a,o){return o==="color"&&a!=="color"&&a.indexOf("color")===0?1:-1}),t},n.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},n.findPieceIndex=function(t,r,a){for(var o,s=1/0,l=0,u=r.length;l<u;l++){var d=r[l].value;if(d!=null){if(d===t||isString(d)&&d===t+"")return l;a&&c(d,l)}}for(var l=0,u=r.length;l<u;l++){var v=r[l],g=v.interval,f=v.close;if(g){if(g[0]===-1/0){if(littleThan(f[1],t,g[1]))return l}else if(g[1]===1/0){if(littleThan(f[0],g[0],t))return l}else if(littleThan(f[0],g[0],t)&&littleThan(f[1],t,g[1]))return l;a&&c(g[0],l),a&&c(g[1],l)}}if(a)return t===1/0?r.length-1:t===-1/0?0:o;function c(y,_){var b=Math.abs(y-t);b<s&&(s=b,o=_)}},n.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var t=this.option;return bind$1(t.mappingMethod==="category"?function(r,a){return!a&&(r=this._normalizeData(r)),doMapCategory.call(this,r)}:function(r,a,o){var s=!!o;return!a&&(r=this._normalizeData(r)),o=fastLerp(r,t.parsedVisual,o),s?o:stringify(o,"rgba")},this)},_normalizedToVisual:{linear:function(t){return stringify(fastLerp(t,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(t,r){var a=getSpecifiedVisual.call(this,r);return a==null&&(a=stringify(fastLerp(t,this.option.parsedVisual),"rgba")),a},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(t,r){return modifyHSL(t,r)}),colorSaturation:makePartialColorVisualHandler(function(t,r){return modifyHSL(t,null,r)}),colorLightness:makePartialColorVisualHandler(function(t,r){return modifyHSL(t,null,null,r)}),colorAlpha:makePartialColorVisualHandler(function(t,r){return modifyAlpha(t,r)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(t,r,a){var o=this.mapValueToVisual(t);a("symbol",o)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(t,r){var a=getSpecifiedVisual.call(this,r);return a==null&&(a=doMapToArray.call(this,t)),a},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},n}();function preprocessForPiecewise(n){var t=n.pieceList;n.hasSpecialVisual=!1,each$f(t,function(r,a){r.originIndex=a,r.visual!=null&&(n.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(n){var t=n.categories,r=n.categoryMap={},a=n.visual;if(each$c(t,function(l,u){r[l]=u}),!isArray$1(a)){var o=[];isObject$3(a)?each$c(a,function(l,u){var d=r[u];o[d??CATEGORY_DEFAULT_VISUAL_INDEX]=l}):o[CATEGORY_DEFAULT_VISUAL_INDEX]=a,a=setVisualToOption(n,o)}for(var s=t.length-1;s>=0;s--)a[s]==null&&(delete r[t[s]],t.pop())}function normalizeVisualRange(n,t){var r=n.visual,a=[];isObject$3(r)?each$c(r,function(s){a.push(s)}):r!=null&&a.push(r);var o={color:1,symbol:1};!t&&a.length===1&&!o.hasOwnProperty(n.type)&&(a[1]=a[0]),setVisualToOption(n,a)}function makePartialColorVisualHandler(n){return{applyVisual:function(t,r,a){var o=this.mapValueToVisual(t);a("color",n(r("color"),o))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(n){var t=this.option.visual;return t[Math.round(linearMap$2(n,[0,1],[0,t.length-1],!0))]||{}}function makeApplyVisual(n){return function(t,r,a){a(n,this.mapValueToVisual(t))}}function doMapCategory(n){var t=this.option.visual;return t[this.option.loop&&n!==CATEGORY_DEFAULT_VISUAL_INDEX?n%t.length:n]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(n){return{linear:function(t){return linearMap$2(t,n,this.option.visual,!0)},category:doMapCategory,piecewise:function(t,r){var a=getSpecifiedVisual.call(this,r);return a==null&&(a=linearMap$2(t,n,this.option.visual,!0)),a},fixed:doMapFixed}}function getSpecifiedVisual(n){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var a=VisualMapping.findPieceIndex(n,r),o=r[a];if(o&&o.visual)return o.visual[this.type]}}function setVisualToOption(n,t){return n.visual=t,n.type==="color"&&(n.parsedVisual=map$1(t,function(r){var a=parse(r);return a||[0,0,0,1]})),t}var normalizers={linear:function(n){return linearMap$2(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var t=this.option.pieceList,r=VisualMapping.findPieceIndex(n,t,!0);if(r!=null)return linearMap$2(r,[0,t.length-1],[0,1],!0)},category:function(n){var t=this.option.categories?this.option.categoryMap[n]:n;return t??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(n,t,r){return n?t<=r:t<r}const VisualMapping$1=VisualMapping;var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(n){var t=n.getData().tree,r=t.root;r.isRemoved()||travelTree(r,{},n.getViewRoot().getAncestors(),n)}};function travelTree(n,t,r,a){var o=n.getModel(),s=n.getLayout(),l=n.hostTree.data;if(!(!s||s.invisible||!s.isInView)){var u=o.getModel(ITEM_STYLE_NORMAL),d=buildVisuals(u,t,a),v=l.ensureUniqueItemVisual(n.dataIndex,"style"),g=u.get("borderColor"),f=u.get("borderColorSaturation"),c;f!=null&&(c=calculateColor(d),g=calculateBorderColor(f,c)),v.stroke=g;var y=n.viewChildren;if(!y||!y.length)c=calculateColor(d),v.fill=c;else{var _=buildVisualMapping(n,o,s,u,d,y);each$f(y,function(b,S){if(b.depth>=r.length||b===r[b.depth]){var x=mapVisual$1(o,d,b,S,_,a);travelTree(b,x,r,a)}})}}}function buildVisuals(n,t,r){var a=extend({},t),o=r.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(s){o[s]=t[s];var l=n.get(s);o[s]=null,l!=null&&(a[s]=l)}),a}function calculateColor(n){var t=getValueVisualDefine(n,"color");if(t){var r=getValueVisualDefine(n,"colorAlpha"),a=getValueVisualDefine(n,"colorSaturation");return a&&(t=modifyHSL(t,null,null,a)),r&&(t=modifyAlpha(t,r)),t}}function calculateBorderColor(n,t){return t!=null?modifyHSL(t,null,null,n):null}function getValueVisualDefine(n,t){var r=n[t];if(r!=null&&r!=="none")return r}function buildVisualMapping(n,t,r,a,o,s){if(!(!s||!s.length)){var l=getRangeVisual(t,"color")||o.color!=null&&o.color!=="none"&&(getRangeVisual(t,"colorAlpha")||getRangeVisual(t,"colorSaturation"));if(l){var u=t.get("visualMin"),d=t.get("visualMax"),v=r.dataExtent.slice();u!=null&&u<v[0]&&(v[0]=u),d!=null&&d>v[1]&&(v[1]=d);var g=t.get("colorMappingBy"),f={type:l.name,dataExtent:v,visual:l.range};f.type==="color"&&(g==="index"||g==="id")?(f.mappingMethod="category",f.loop=!0):f.mappingMethod="linear";var c=new VisualMapping$1(f);return inner$c(c).drColorMappingBy=g,c}}}function getRangeVisual(n,t){var r=n.get(t);return isArray$1(r)&&r.length?{name:t,range:r}:null}function mapVisual$1(n,t,r,a,o,s){var l=extend({},t);if(o){var u=o.type,d=u==="color"&&inner$c(o).drColorMappingBy,v=d==="index"?a:d==="id"?s.mapIdToIndex(r.getId()):r.getValue(n.get("visualDimension"));l[u]=o.mapValueToVisual(v)}return l}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(n,t,r,a){var o=r.getWidth(),s=r.getHeight(),l=n.option,u=getLayoutRect(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),d=l.size||[],v=parsePercent(retrieveValue(u.width,d[0]),o),g=parsePercent(retrieveValue(u.height,d[1]),s),f=a&&a.type,c=["treemapZoomToNode","treemapRootToNode"],y=retrieveTargetInfo(a,c,n),_=f==="treemapRender"||f==="treemapMove"?a.rootRect:null,b=n.getViewRoot(),S=getPathToRoot(b);if(f!=="treemapMove"){var x=f==="treemapZoomToNode"?estimateRootSize(n,y,b,v,g):_?[_.width,_.height]:[v,g],w=l.sort;w&&w!=="asc"&&w!=="desc"&&(w="desc");var T={squareRatio:l.squareRatio,sort:w,leafDepth:l.leafDepth};b.hostTree.clearLayouts();var A={x:0,y:0,width:x[0],height:x[1],area:x[0]*x[1]};b.setLayout(A),squarify(b,T,!1,0),A=b.getLayout(),each$b(S,function($,P){var I=(S[P+1]||b).getValue();$.setLayout(extend({dataExtent:[I,I],borderWidth:0,upperHeight:0},A))})}var E=n.getData().tree.root;E.setLayout(calculateRootPosition(u,_,y),!0),n.setLayoutInfo(u),prunning(E,new BoundingRect$1(-u.x,-u.y,o,s),S,b,0)}};function squarify(n,t,r,a){var o,s;if(!n.isRemoved()){var l=n.getLayout();o=l.width,s=l.height;var u=n.getModel(),d=u.get(PATH_BORDER_WIDTH),v=u.get(PATH_GAP_WIDTH)/2,g=getUpperLabelHeight(u),f=Math.max(d,g),c=d-v,y=f-v;n.setLayout({borderWidth:d,upperHeight:f,upperLabelHeight:g},!0),o=mathMax$3(o-2*c,0),s=mathMax$3(s-c-y,0);var _=o*s,b=initChildren$1(n,u,_,t,r,a);if(b.length){var S={x:c,y,width:o,height:s},x=mathMin$3(o,s),w=1/0,T=[];T.area=0;for(var A=0,E=b.length;A<E;){var $=b[A];T.push($),T.area+=$.getLayout().area;var P=worst(T,x,t.squareRatio);P<=w?(A++,w=P):(T.area-=T.pop().getLayout().area,position(T,x,S,v,!1),x=mathMin$3(S.width,S.height),T.length=T.area=0,w=1/0)}if(T.length&&position(T,x,S,v,!0),!r){var I=u.get("childrenVisibleMin");I!=null&&_<I&&(r=!0)}for(var A=0,E=b.length;A<E;A++)squarify(b[A],t,r,a+1)}}}function initChildren$1(n,t,r,a,o,s){var l=n.children||[],u=a.sort;u!=="asc"&&u!=="desc"&&(u=null);var d=a.leafDepth!=null&&a.leafDepth<=s;if(o&&!d)return n.viewChildren=[];l=filter(l,function(y){return!y.isRemoved()}),sort$1(l,u);var v=statistic(t,l,u);if(v.sum===0)return n.viewChildren=[];if(v.sum=filterByThreshold(t,r,v.sum,u,l),v.sum===0)return n.viewChildren=[];for(var g=0,f=l.length;g<f;g++){var c=l[g].getValue()/v.sum*r;l[g].setLayout({area:c})}return d&&(l.length&&n.setLayout({isLeafRoot:!0},!0),l.length=0),n.viewChildren=l,n.setLayout({dataExtent:v.dataExtent},!0),l}function filterByThreshold(n,t,r,a,o){if(!a)return r;for(var s=n.get("visibleMin"),l=o.length,u=l,d=l-1;d>=0;d--){var v=o[a==="asc"?l-d-1:d].getValue();v/r*t<s&&(u=d,r-=v)}return a==="asc"?o.splice(0,l-u):o.splice(u,l-u),r}function sort$1(n,t){return t&&n.sort(function(r,a){var o=t==="asc"?r.getValue()-a.getValue():a.getValue()-r.getValue();return o===0?t==="asc"?r.dataIndex-a.dataIndex:a.dataIndex-r.dataIndex:o}),n}function statistic(n,t,r){for(var a=0,o=0,s=t.length;o<s;o++)a+=t[o].getValue();var l=n.get("visualDimension"),u;return!t||!t.length?u=[NaN,NaN]:l==="value"&&r?(u=[t[t.length-1].getValue(),t[0].getValue()],r==="asc"&&u.reverse()):(u=[1/0,-1/0],each$b(t,function(d){var v=d.getValue(l);v<u[0]&&(u[0]=v),v>u[1]&&(u[1]=v)})),{sum:a,dataExtent:u}}function worst(n,t,r){for(var a=0,o=1/0,s=0,l=void 0,u=n.length;s<u;s++)l=n[s].getLayout().area,l&&(l<o&&(o=l),l>a&&(a=l));var d=n.area*n.area,v=t*t*r;return d?mathMax$3(v*a/d,d/(v*o)):1/0}function position(n,t,r,a,o){var s=t===r.width?0:1,l=1-s,u=["x","y"],d=["width","height"],v=r[u[s]],g=t?n.area/t:0;(o||g>r[d[l]])&&(g=r[d[l]]);for(var f=0,c=n.length;f<c;f++){var y=n[f],_={},b=g?y.getLayout().area/g:0,S=_[d[l]]=mathMax$3(g-2*a,0),x=r[u[s]]+r[d[s]]-v,w=f===c-1||x<b?x:b,T=_[d[s]]=mathMax$3(w-2*a,0);_[u[l]]=r[u[l]]+mathMin$3(a,S/2),_[u[s]]=v+mathMin$3(a,T/2),v+=w,y.setLayout(_,!0)}r[u[l]]+=g,r[d[l]]-=g}function estimateRootSize(n,t,r,a,o){var s=(t||{}).node,l=[a,o];if(!s||s===r)return l;for(var u,d=a*o,v=d*n.option.zoomToNodeRatio;u=s.parentNode;){for(var g=0,f=u.children,c=0,y=f.length;c<y;c++)g+=f[c].getValue();var _=s.getValue();if(_===0)return l;v*=g/_;var b=u.getModel(),S=b.get(PATH_BORDER_WIDTH),x=Math.max(S,getUpperLabelHeight(b));v+=4*S*S+(3*S+x)*Math.pow(v,.5),v>MAX_SAFE_INTEGER&&(v=MAX_SAFE_INTEGER),s=u}v<d&&(v=d);var w=Math.pow(v/d,.5);return[a*w,o*w]}function calculateRootPosition(n,t,r){if(t)return{x:t.x,y:t.y};var a={x:0,y:0};if(!r)return a;var o=r.node,s=o.getLayout();if(!s)return a;for(var l=[s.width/2,s.height/2],u=o;u;){var d=u.getLayout();l[0]+=d.x,l[1]+=d.y,u=u.parentNode}return{x:n.width/2-l[0],y:n.height/2-l[1]}}function prunning(n,t,r,a,o){var s=n.getLayout(),l=r[o],u=l&&l===n;if(!(l&&!u||o===r.length&&n!==a)){n.setLayout({isInView:!0,invisible:!u&&!t.intersect(s),isAboveViewRoot:u},!0);var d=new BoundingRect$1(t.x-s.x,t.y-s.y,t.width,t.height);each$b(n.viewChildren||[],function(v){prunning(v,d,r,a,o+1)})}}function getUpperLabelHeight(n){return n.get(PATH_UPPER_LABEL_SHOW)?n.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(n){n.registerSeriesModel(TreemapSeriesModel$1),n.registerChartView(TreemapView$1),n.registerVisual(treemapVisual),n.registerLayout(treemapLayout),installTreemapAction(n)}function categoryFilter(n){var t=n.findComponents({mainType:"legend"});!t||!t.length||n.eachSeriesByType("graph",function(r){var a=r.getCategoriesData(),o=r.getGraph(),s=o.data,l=a.mapArray(a.getName);s.filterSelf(function(u){var d=s.getItemModel(u),v=d.getShallow("category");if(v!=null){isNumber(v)&&(v=l[v]);for(var g=0;g<t.length;g++)if(!t[g].isSelected(v))return!1}return!0})})}function categoryVisual(n){var t={};n.eachSeriesByType("graph",function(r){var a=r.getCategoriesData(),o=r.getData(),s={};a.each(function(l){var u=a.getName(l);s["ec-"+u]=l;var d=a.getItemModel(l),v=d.getModel("itemStyle").getItemStyle();v.fill||(v.fill=r.getColorFromPalette(u,t)),a.setItemVisual(l,"style",v);for(var g=["symbol","symbolSize","symbolKeepAspect"],f=0;f<g.length;f++){var c=d.getShallow(g[f],!0);c!=null&&a.setItemVisual(l,g[f],c)}}),a.count()&&o.each(function(l){var u=o.getItemModel(l),d=u.getShallow("category");if(d!=null){isString(d)&&(d=s["ec-"+d]);var v=a.getItemVisual(d,"style"),g=o.ensureUniqueItemVisual(l,"style");extend(g,v);for(var f=["symbol","symbolSize","symbolKeepAspect"],c=0;c<f.length;c++)o.setItemVisual(l,f[c],a.getItemVisual(d,f[c]))}})})}function normalize$1(n){return n instanceof Array||(n=[n,n]),n}function graphEdgeVisual(n){n.eachSeriesByType("graph",function(t){var r=t.getGraph(),a=t.getEdgeData(),o=normalize$1(t.get("edgeSymbol")),s=normalize$1(t.get("edgeSymbolSize"));a.setVisual("fromSymbol",o&&o[0]),a.setVisual("toSymbol",o&&o[1]),a.setVisual("fromSymbolSize",s&&s[0]),a.setVisual("toSymbolSize",s&&s[1]),a.setVisual("style",t.getModel("lineStyle").getLineStyle()),a.each(function(l){var u=a.getItemModel(l),d=r.getEdgeByIndex(l),v=normalize$1(u.getShallow("symbol",!0)),g=normalize$1(u.getShallow("symbolSize",!0)),f=u.getModel("lineStyle").getLineStyle(),c=a.ensureUniqueItemVisual(l,"style");switch(extend(c,f),c.stroke){case"source":{var y=d.node1.getVisual("style");c.stroke=y&&y.fill;break}case"target":{var y=d.node2.getVisual("style");c.stroke=y&&y.fill;break}}v[0]&&d.setVisual("fromSymbol",v[0]),v[1]&&d.setVisual("toSymbol",v[1]),g[0]&&d.setVisual("fromSymbolSize",g[0]),g[1]&&d.setVisual("toSymbolSize",g[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(n){return n.get("autoCurveness")||null},createCurveness=function(n,t){var r=getAutoCurvenessParams(n),a=20,o=[];if(isNumber(r))a=r;else if(isArray$1(r)){n.__curvenessList=r;return}t>a&&(a=t);var s=a%2?a+2:a+3;o=[];for(var l=0;l<s;l++)o.push((l%2?l+1:l)/10*(l%2?-1:1));n.__curvenessList=o},getKeyOfEdges=function(n,t,r){var a=[n.id,n.dataIndex].join("."),o=[t.id,t.dataIndex].join(".");return[r.uid,a,o].join(KEY_DELIMITER)},getOppositeKey=function(n){var t=n.split(KEY_DELIMITER);return[t[0],t[2],t[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(n,t){var r=getKeyOfEdges(n.node1,n.node2,t);return t.__edgeMap[r]},getTotalLengthBetweenNodes=function(n,t){var r=getEdgeMapLengthWithKey(getKeyOfEdges(n.node1,n.node2,t),t),a=getEdgeMapLengthWithKey(getKeyOfEdges(n.node2,n.node1,t),t);return r+a},getEdgeMapLengthWithKey=function(n,t){var r=t.__edgeMap;return r[n]?r[n].length:0};function initCurvenessList(n){getAutoCurvenessParams(n)&&(n.__curvenessList=[],n.__edgeMap={},createCurveness(n))}function createEdgeMapForCurveness(n,t,r,a){if(getAutoCurvenessParams(r)){var o=getKeyOfEdges(n,t,r),s=r.__edgeMap,l=s[getOppositeKey(o)];s[o]&&!l?s[o].isForward=!0:l&&s[o]&&(l.isForward=!0,s[o].isForward=!1),s[o]=s[o]||[],s[o].push(a)}}function getCurvenessForEdge(n,t,r,a){var o=getAutoCurvenessParams(t),s=isArray$1(o);if(!o)return null;var l=getEdgeFromMap(n,t);if(!l)return null;for(var u=-1,d=0;d<l.length;d++)if(l[d]===r){u=d;break}var v=getTotalLengthBetweenNodes(n,t);createCurveness(t,v),n.lineStyle=n.lineStyle||{};var g=getKeyOfEdges(n.node1,n.node2,t),f=t.__curvenessList,c=s||v%2?0:1;if(l.isForward)return f[c+u];var y=getOppositeKey(g),_=getEdgeMapLengthWithKey(y,t),b=f[u+_+c];return a?s?o&&o[0]===0?(_+c)%2?b:-b:((_%2?0:1)+c)%2?b:-b:(_+c)%2?b:-b:f[u+_+c]}function simpleLayout(n){var t=n.coordinateSystem;if(!(t&&t.type!=="view")){var r=n.getGraph();r.eachNode(function(a){var o=a.getModel();a.setLayout([+o.get("x"),+o.get("y")])}),simpleLayoutEdge(r,n)}}function simpleLayoutEdge(n,t){n.eachEdge(function(r,a){var o=retrieve3(r.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(r,t,a,!0),0),s=clone$3(r.node1.getLayout()),l=clone$3(r.node2.getLayout()),u=[s,l];+o&&u.push([(s[0]+l[0])/2-(s[1]-l[1])*o,(s[1]+l[1])/2-(l[0]-s[0])*o]),r.setLayout(u)})}function graphSimpleLayout(n,t){n.eachSeriesByType("graph",function(r){var a=r.get("layout"),o=r.coordinateSystem;if(o&&o.type!=="view"){var s=r.getData(),l=[];each$f(o.dimensions,function(c){l=l.concat(s.mapDimensionsAll(c))});for(var u=0;u<s.count();u++){for(var d=[],v=!1,g=0;g<l.length;g++){var f=s.get(l[g],u);isNaN(f)||(v=!0),d.push(f)}v?s.setItemLayout(u,o.dataToPoint(d)):s.setItemLayout(u,[NaN,NaN])}simpleLayoutEdge(s.graph,r)}else(!a||a==="none")&&simpleLayout(r)})}function getNodeGlobalScale(n){var t=n.coordinateSystem;if(t.type!=="view")return 1;var r=n.option.nodeScaleRatio,a=t.scaleX,o=t.getZoom(),s=(o-1)*r+1;return s/a}function getSymbolSize(n){var t=n.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(n,t,r,a){var o=n.coordinateSystem;if(!(o&&o.type!=="view")){var s=o.getBoundingRect(),l=n.getData(),u=l.graph,d=s.width/2+s.x,v=s.height/2+s.y,g=Math.min(s.width,s.height)/2,f=l.count();if(l.setLayout({cx:d,cy:v}),!!f){if(r){var c=o.pointToData(a),y=c[0],_=c[1],b=[y-d,_-v];normalize$3(b,b),scale$2(b,b,g),r.setLayout([d+b[0],v+b[1]],!0);var S=n.get(["circular","rotateLabel"]);rotateNodeLabel(r,S,d,v)}_layoutNodesBasedOn[t](n,u,l,g,d,v,f),u.eachEdge(function(x,w){var T=retrieve3(x.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(x,n,w),0),A=clone$3(x.node1.getLayout()),E=clone$3(x.node2.getLayout()),$,P=(A[0]+E[0])/2,I=(A[1]+E[1])/2;+T&&(T*=3,$=[d*T+P*(1-T),v*T+I*(1-T)]),x.setLayout([A,E,$])})}}}var _layoutNodesBasedOn={value:function(n,t,r,a,o,s,l){var u=0,d=r.getSum("value"),v=Math.PI*2/(d||l);t.eachNode(function(g){var f=g.getValue("value"),c=v*(d?f:1)/2;u+=c,g.setLayout([a*Math.cos(u)+o,a*Math.sin(u)+s]),u+=c})},symbolSize:function(n,t,r,a,o,s,l){var u=0;_symbolRadiansHalf.length=l;var d=getNodeGlobalScale(n);t.eachNode(function(f){var c=getSymbolSize(f);isNaN(c)&&(c=2),c<0&&(c=0),c*=d;var y=Math.asin(c/2/a);isNaN(y)&&(y=PI$2/2),_symbolRadiansHalf[f.dataIndex]=y,u+=y*2});var v=(2*PI$2-u)/l/2,g=0;t.eachNode(function(f){var c=v+_symbolRadiansHalf[f.dataIndex];g+=c,(!f.getLayout()||!f.getLayout().fixed)&&f.setLayout([a*Math.cos(g)+o,a*Math.sin(g)+s]),g+=c})}};function rotateNodeLabel(n,t,r,a){var o=n.getGraphicEl();if(o){var s=n.getModel(),l=s.get(["label","rotate"])||0,u=o.getSymbolPath();if(t){var d=n.getLayout(),v=Math.atan2(d[1]-a,d[0]-r);v<0&&(v=Math.PI*2+v);var g=d[0]<r;g&&(v=v-Math.PI);var f=g?"left":"right";u.setTextConfig({rotation:-v,position:f,origin:"center"});var c=u.ensureState("emphasis");extend(c.textConfig||(c.textConfig={}),{position:f})}else u.setTextConfig({rotation:l*=Math.PI/180})}}function graphCircularLayout(n){n.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&circularLayout(t,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(n,t,r){for(var a=n,o=t,s=r.rect,l=s.width,u=s.height,d=[s.x+l/2,s.y+u/2],v=r.gravity==null?.1:r.gravity,g=0;g<a.length;g++){var f=a[g];f.p||(f.p=create$2(l*(Math.random()-.5)+d[0],u*(Math.random()-.5)+d[1])),f.pp=clone$3(f.p),f.edges=null}var c=r.friction==null?.6:r.friction,y=c,_,b;return{warmUp:function(){y=c*.8},setFixed:function(S){a[S].fixed=!0},setUnfixed:function(S){a[S].fixed=!1},beforeStep:function(S){_=S},afterStep:function(S){b=S},step:function(S){_&&_(a,o);for(var x=[],w=a.length,T=0;T<o.length;T++){var A=o[T];if(!A.ignoreForceLayout){var E=A.n1,$=A.n2;sub(x,$.p,E.p);var P=len(x)-A.d,I=$.w/(E.w+$.w);isNaN(I)&&(I=0),normalize$3(x,x),!E.fixed&&scaleAndAdd(E.p,E.p,x,I*P*y),!$.fixed&&scaleAndAdd($.p,$.p,x,-(1-I)*P*y)}}for(var T=0;T<w;T++){var C=a[T];C.fixed||(sub(x,d,C.p),scaleAndAdd(C.p,C.p,x,v*y))}for(var T=0;T<w;T++)for(var E=a[T],M=T+1;M<w;M++){var $=a[M];sub(x,$.p,E.p);var P=len(x);P===0&&(set$1(x,Math.random()-.5,Math.random()-.5),P=1);var D=(E.rep+$.rep)/P/P;!E.fixed&&scaleAndAdd(E.pp,E.pp,x,D),!$.fixed&&scaleAndAdd($.pp,$.pp,x,-D)}for(var R=[],T=0;T<w;T++){var C=a[T];C.fixed||(sub(R,C.p,C.pp),scaleAndAdd(C.p,C.p,R,y),copy$1(C.pp,C.p))}y=y*.992;var N=y<.01;b&&b(a,o,N),S&&S(N)}}}function graphForceLayout(n){n.eachSeriesByType("graph",function(t){var r=t.coordinateSystem;if(!(r&&r.type!=="view"))if(t.get("layout")==="force"){var a=t.preservedPoints||{},o=t.getGraph(),s=o.data,l=o.edgeData,u=t.getModel("force"),d=u.get("initLayout");t.preservedPoints?s.each(function(T){var A=s.getId(T);s.setItemLayout(T,a[A]||[NaN,NaN])}):!d||d==="none"?simpleLayout(t):d==="circular"&&circularLayout(t,"value");var v=s.getDataExtent("value"),g=l.getDataExtent("value"),f=u.get("repulsion"),c=u.get("edgeLength"),y=isArray$1(f)?f:[f,f],_=isArray$1(c)?c:[c,c];_=[_[1],_[0]];var b=s.mapArray("value",function(T,A){var E=s.getItemLayout(A),$=linearMap$2(T,v,y);return isNaN($)&&($=(y[0]+y[1])/2),{w:$,rep:$,fixed:s.getItemModel(A).get("fixed"),p:!E||isNaN(E[0])||isNaN(E[1])?null:E}}),S=l.mapArray("value",function(T,A){var E=o.getEdgeByIndex(A),$=linearMap$2(T,g,_);isNaN($)&&($=(_[0]+_[1])/2);var P=E.getModel(),I=retrieve3(E.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(E,t,A,!0),0);return{n1:b[E.node1.dataIndex],n2:b[E.node2.dataIndex],d:$,curveness:I,ignoreForceLayout:P.get("ignoreForceLayout")}}),x=r.getBoundingRect(),w=forceLayout(b,S,{rect:x,gravity:u.get("gravity"),friction:u.get("friction")});w.beforeStep(function(T,A){for(var E=0,$=T.length;E<$;E++)T[E].fixed&&copy$1(T[E].p,o.getNodeByIndex(E).getLayout())}),w.afterStep(function(T,A,E){for(var $=0,P=T.length;$<P;$++)T[$].fixed||o.getNodeByIndex($).setLayout(T[$].p),a[s.getId($)]=T[$].p;for(var $=0,P=A.length;$<P;$++){var I=A[$],C=o.getEdgeByIndex($),M=I.n1.p,D=I.n2.p,R=C.getLayout();R=R?R.slice():[],R[0]=R[0]||[],R[1]=R[1]||[],copy$1(R[0],M),copy$1(R[1],D),+I.curveness&&(R[2]=[(M[0]+D[0])/2-(M[1]-D[1])*I.curveness,(M[1]+D[1])/2-(D[0]-M[0])*I.curveness]),C.setLayout(R)}}),t.forceLayout=w,t.preservedPoints=a,w.step()}else t.forceLayout=null})}function getViewRect$3(n,t,r){var a=extend(n.getBoxLayoutParams(),{aspect:r});return getLayoutRect(a,{width:t.getWidth(),height:t.getHeight()})}function createViewCoordSys(n,t){var r=[];return n.eachSeriesByType("graph",function(a){var o=a.get("coordinateSystem");if(!o||o==="view"){var s=a.getData(),l=s.mapArray(function(S){var x=s.getItemModel(S);return[+x.get("x"),+x.get("y")]}),u=[],d=[];fromPoints(l,u,d),d[0]-u[0]===0&&(d[0]+=1,u[0]-=1),d[1]-u[1]===0&&(d[1]+=1,u[1]-=1);var v=(d[0]-u[0])/(d[1]-u[1]),g=getViewRect$3(a,t,v);isNaN(v)&&(u=[g.x,g.y],d=[g.x+g.width,g.y+g.height]);var f=d[0]-u[0],c=d[1]-u[1],y=g.width,_=g.height,b=a.coordinateSystem=new View$1;b.zoomLimit=a.get("scaleLimit"),b.setBoundingRect(u[0],u[1],f,c),b.setViewRect(g.x,g.y,y,_),b.setCenter(a.get("center"),t),b.setZoom(a.get("zoom")),r.push(b)}}),r}var straightLineProto=Line$3.prototype,bezierCurveProto=BezierCurve$1.prototype,StraightLineShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}();(function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t})(StraightLineShape);function isStraightLine(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var ECLinePath=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="ec-line",a}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new StraightLineShape},t.prototype.buildPath=function(r,a){isStraightLine(a)?straightLineProto.buildPath.call(this,r,a):bezierCurveProto.buildPath.call(this,r,a)},t.prototype.pointAt=function(r){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,r):bezierCurveProto.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var a=this.shape,o=isStraightLine(a)?[a.x2-a.x1,a.y2-a.y1]:bezierCurveProto.tangentAt.call(this,r);return normalize$3(o,o)},t}(Path$1);const ECLinePath$1=ECLinePath;var SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(n){return"_"+n+"Type"}function createSymbol(n,t,r){var a=t.getItemVisual(r,n);if(!(!a||a==="none")){var o=t.getItemVisual(r,n+"Size"),s=t.getItemVisual(r,n+"Rotate"),l=t.getItemVisual(r,n+"Offset"),u=t.getItemVisual(r,n+"KeepAspect"),d=normalizeSymbolSize(o),v=normalizeSymbolOffset(l||0,d),g=createSymbol$1(a,-d[0]/2+v[0],-d[1]/2+v[1],d[0],d[1],null,u);return g.__specifiedRotation=s==null||isNaN(s)?void 0:+s*Math.PI/180||0,g.name=n,g}}function createLine(n){var t=new ECLinePath$1({name:"line",subPixelOptimize:!0});return setLinePoints(t.shape,n),t}function setLinePoints(n,t){n.x1=t[0][0],n.y1=t[0][1],n.x2=t[1][0],n.y2=t[1][1],n.percent=1;var r=t[2];r?(n.cpx1=r[0],n.cpy1=r[1]):(n.cpx1=NaN,n.cpy1=NaN)}var Line=function(n){__extends$1(t,n);function t(r,a,o){var s=n.call(this)||this;return s._createLine(r,a,o),s}return t.prototype._createLine=function(r,a,o){var s=r.hostModel,l=r.getItemLayout(a),u=createLine(l);u.shape.percent=0,initProps(u,{shape:{percent:1}},s,a),this.add(u),each$f(SYMBOL_CATEGORIES,function(d){var v=createSymbol(d,r,a);this.add(v),this[makeSymbolTypeKey(d)]=r.getItemVisual(a,d)},this),this._updateCommonStl(r,a,o)},t.prototype.updateData=function(r,a,o){var s=r.hostModel,l=this.childOfName("line"),u=r.getItemLayout(a),d={shape:{}};setLinePoints(d.shape,u),updateProps$1(l,d,s,a),each$f(SYMBOL_CATEGORIES,function(v){var g=r.getItemVisual(a,v),f=makeSymbolTypeKey(v);if(this[f]!==g){this.remove(this.childOfName(v));var c=createSymbol(v,r,a);this.add(c)}this[f]=g},this),this._updateCommonStl(r,a,o)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,a,o){var s=r.hostModel,l=this.childOfName("line"),u=o&&o.emphasisLineStyle,d=o&&o.blurLineStyle,v=o&&o.selectLineStyle,g=o&&o.labelStatesModels,f=o&&o.emphasisDisabled,c=o&&o.focus,y=o&&o.blurScope;if(!o||r.hasItemOption){var _=r.getItemModel(a),b=_.getModel("emphasis");u=b.getModel("lineStyle").getLineStyle(),d=_.getModel(["blur","lineStyle"]).getLineStyle(),v=_.getModel(["select","lineStyle"]).getLineStyle(),f=b.get("disabled"),c=b.get("focus"),y=b.get("blurScope"),g=getLabelStatesModels(_)}var S=r.getItemVisual(a,"style"),x=S.stroke;l.useStyle(S),l.style.fill=null,l.style.strokeNoScale=!0,l.ensureState("emphasis").style=u,l.ensureState("blur").style=d,l.ensureState("select").style=v,each$f(SYMBOL_CATEGORIES,function($){var P=this.childOfName($);if(P){P.setColor(x),P.style.opacity=S.opacity;for(var I=0;I<SPECIAL_STATES.length;I++){var C=SPECIAL_STATES[I],M=l.getState(C);if(M){var D=M.style||{},R=P.ensureState(C),N=R.style||(R.style={});D.stroke!=null&&(N[P.__isEmptyBrush?"stroke":"fill"]=D.stroke),D.opacity!=null&&(N.opacity=D.opacity)}}P.markRedraw()}},this);var w=s.getRawValue(a);setLabelStyle(this,g,{labelDataIndex:a,labelFetcher:{getFormattedLabel:function($,P){return s.getFormattedLabel($,P,r.dataType)}},inheritColor:x||"#000",defaultOpacity:S.opacity,defaultText:(w==null?r.getName(a):isFinite(w)?round$3(w):w)+""});var T=this.getTextContent();if(T){var A=g.normal;T.__align=T.style.align,T.__verticalAlign=T.style.verticalAlign,T.__position=A.get("position")||"middle";var E=A.get("distance");isArray$1(E)||(E=[E,E]),T.__labelDistance=E}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,c,y,f)},t.prototype.highlight=function(){enterEmphasis(this)},t.prototype.downplay=function(){leaveEmphasis(this)},t.prototype.updateLayout=function(r,a){this.setLinePoints(r.getItemLayout(a))},t.prototype.setLinePoints=function(r){var a=this.childOfName("line");setLinePoints(a.shape,r),a.dirty()},t.prototype.beforeUpdate=function(){var r=this,a=r.childOfName("fromSymbol"),o=r.childOfName("toSymbol"),s=r.getTextContent();if(!a&&!o&&(!s||s.ignore))return;for(var l=1,u=this.parent;u;)u.scaleX&&(l/=u.scaleX),u=u.parent;var d=r.childOfName("line");if(!this.__dirty&&!d.__dirty)return;var v=d.shape.percent,g=d.pointAt(0),f=d.pointAt(v),c=sub([],f,g);normalize$3(c,c);function y(M,D){var R=M.__specifiedRotation;if(R==null){var N=d.tangentAt(D);M.attr("rotation",(D===1?-1:1)*Math.PI/2-Math.atan2(N[1],N[0]))}else M.attr("rotation",R)}if(a&&(a.setPosition(g),y(a,0),a.scaleX=a.scaleY=l*v,a.markRedraw()),o&&(o.setPosition(f),y(o,1),o.scaleX=o.scaleY=l*v,o.markRedraw()),s&&!s.ignore){s.x=s.y=0,s.originX=s.originY=0;var _=void 0,b=void 0,S=s.__labelDistance,x=S[0]*l,w=S[1]*l,T=v/2,A=d.tangentAt(T),E=[A[1],-A[0]],$=d.pointAt(T);E[1]>0&&(E[0]=-E[0],E[1]=-E[1]);var P=A[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var I=-Math.atan2(A[1],A[0]);f[0]<g[0]&&(I=Math.PI+I),s.rotation=I}var C=void 0;switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":C=-w,b="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":C=w,b="top";break;default:C=0,b="middle"}switch(s.__position){case"end":s.x=c[0]*x+f[0],s.y=c[1]*w+f[1],_=c[0]>.8?"left":c[0]<-.8?"right":"center",b=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":s.x=-c[0]*x+g[0],s.y=-c[1]*w+g[1],_=c[0]>.8?"right":c[0]<-.8?"left":"center",b=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s.x=x*P+g[0],s.y=g[1]+C,_=A[0]<0?"right":"left",s.originX=-x*P,s.originY=-C;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s.x=$[0],s.y=$[1]+C,_="center",s.originY=-C;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s.x=-x*P+f[0],s.y=f[1]+C,_=A[0]>=0?"right":"left",s.originX=x*P,s.originY=-C;break}s.scaleX=s.scaleY=l,s.setStyle({verticalAlign:s.__verticalAlign||b,align:s.__align||_})}},t}(Group$4);const Line$1=Line;var LineDraw=function(){function n(t){this.group=new Group$4,this._LineCtor=t||Line$1}return n.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var a=this,o=a.group,s=a._lineData;a._lineData=t,s||o.removeAll();var l=makeSeriesScope$1(t);t.diff(s).add(function(u){r._doAdd(t,u,l)}).update(function(u,d){r._doUpdate(s,t,d,u,l)}).remove(function(u){o.remove(s.getItemGraphicEl(u))}).execute()},n.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(r,a){r.updateLayout(t,a)},this)},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=makeSeriesScope$1(t),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function a(u){!u.isGroup&&!isEffectObject(u)&&(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var s=r.getItemLayout(o);if(lineNeedsDraw(s)){var l=new this._LineCtor(r,o,this._seriesScope);l.traverse(a),this.group.add(l),r.setItemGraphicEl(o,l),this._progressiveEls.push(l)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(t){traverseElements(this._progressiveEls||this.group,t)},n.prototype._doAdd=function(t,r,a){var o=t.getItemLayout(r);if(lineNeedsDraw(o)){var s=new this._LineCtor(t,r,a);t.setItemGraphicEl(r,s),this.group.add(s)}},n.prototype._doUpdate=function(t,r,a,o,s){var l=t.getItemGraphicEl(a);if(!lineNeedsDraw(r.getItemLayout(o))){this.group.remove(l);return}l?l.updateData(r,o,s):l=new this._LineCtor(r,o,s),r.setItemGraphicEl(o,l),this.group.add(l)},n}();function isEffectObject(n){return n.animators&&n.animators.length>0}function makeSeriesScope$1(n){var t=n.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:getLabelStatesModels(t)}}function isPointNaN(n){return isNaN(n[0])||isNaN(n[1])}function lineNeedsDraw(n){return n&&!isPointNaN(n[0])&&!isPointNaN(n[1])}const LineDraw$1=LineDraw;var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(n,t,r){for(var a=n[0],o=n[1],s=n[2],l=1/0,u,d=r*r,v=.1,g=.1;g<=.9;g+=.1){v1[0]=quadraticAt(a[0],o[0],s[0],g),v1[1]=quadraticAt(a[1],o[1],s[1],g);var f=mathAbs(v2DistSquare(v1,t)-d);f<l&&(l=f,u=g)}for(var c=0;c<32;c++){var y=u+v;v2[0]=quadraticAt(a[0],o[0],s[0],u),v2[1]=quadraticAt(a[1],o[1],s[1],u),v3[0]=quadraticAt(a[0],o[0],s[0],y),v3[1]=quadraticAt(a[1],o[1],s[1],y);var f=v2DistSquare(v2,t)-d;if(mathAbs(f)<.01)break;var _=v2DistSquare(v3,t)-d;v/=2,f<0?_>=0?u=u+v:u=u-v:_>=0?u=u-v:u=u+v}return u}function adjustEdge(n,t){var r=[],a=quadraticSubdivide,o=[[],[],[]],s=[[],[]],l=[];t/=2,n.eachEdge(function(u,d){var v=u.getLayout(),g=u.getVisual("fromSymbol"),f=u.getVisual("toSymbol");v.__original||(v.__original=[clone$3(v[0]),clone$3(v[1])],v[2]&&v.__original.push(clone$3(v[2])));var c=v.__original;if(v[2]!=null){if(copy$1(o[0],c[0]),copy$1(o[1],c[2]),copy$1(o[2],c[1]),g&&g!=="none"){var y=getSymbolSize(u.node1),_=intersectCurveCircle(o,c[0],y*t);a(o[0][0],o[1][0],o[2][0],_,r),o[0][0]=r[3],o[1][0]=r[4],a(o[0][1],o[1][1],o[2][1],_,r),o[0][1]=r[3],o[1][1]=r[4]}if(f&&f!=="none"){var y=getSymbolSize(u.node2),_=intersectCurveCircle(o,c[1],y*t);a(o[0][0],o[1][0],o[2][0],_,r),o[1][0]=r[1],o[2][0]=r[2],a(o[0][1],o[1][1],o[2][1],_,r),o[1][1]=r[1],o[2][1]=r[2]}copy$1(v[0],o[0]),copy$1(v[1],o[2]),copy$1(v[2],o[1])}else{if(copy$1(s[0],c[0]),copy$1(s[1],c[1]),sub(l,s[1],s[0]),normalize$3(l,l),g&&g!=="none"){var y=getSymbolSize(u.node1);scaleAndAdd$1(s[0],s[0],l,y*t)}if(f&&f!=="none"){var y=getSymbolSize(u.node2);scaleAndAdd$1(s[1],s[1],l,-y*t)}copy$1(v[0],s[0]),copy$1(v[1],s[1])}})}function isViewCoordSys(n){return n.type==="view"}var GraphView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,a){var o=new SymbolDraw$1,s=new LineDraw$1,l=this.group;this._controller=new RoamController$1(a.getZr()),this._controllerHost={target:l},l.add(o.group),l.add(s.group),this._symbolDraw=o,this._lineDraw=s,this._firstRender=!0},t.prototype.render=function(r,a,o){var s=this,l=r.coordinateSystem;this._model=r;var u=this._symbolDraw,d=this._lineDraw,v=this.group;if(isViewCoordSys(l)){var g={x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY};this._firstRender?v.attr(g):updateProps$1(v,g,r)}adjustEdge(r.getGraph(),getNodeGlobalScale(r));var f=r.getData();u.updateData(f);var c=r.getEdgeData();d.updateData(c),this._updateNodeAndLinkScale(),this._updateController(r,a,o),clearTimeout(this._layoutTimeout);var y=r.forceLayout,_=r.get(["force","layoutAnimation"]);y&&this._startForceLayoutIteration(y,_);var b=r.get("layout");f.graph.eachNode(function(T){var A=T.dataIndex,E=T.getGraphicEl(),$=T.getModel();if(E){E.off("drag").off("dragend");var P=$.get("draggable");P&&E.on("drag",function(C){switch(b){case"force":y.warmUp(),!s._layouting&&s._startForceLayoutIteration(y,_),y.setFixed(A),f.setItemLayout(A,[E.x,E.y]);break;case"circular":f.setItemLayout(A,[E.x,E.y]),T.setLayout({fixed:!0},!0),circularLayout(r,"symbolSize",T,[C.offsetX,C.offsetY]),s.updateLayout(r);break;case"none":default:f.setItemLayout(A,[E.x,E.y]),simpleLayoutEdge(r.getGraph(),r),s.updateLayout(r);break}}).on("dragend",function(){y&&y.setUnfixed(A)}),E.setDraggable(P,!!$.get("cursor"));var I=$.get(["emphasis","focus"]);I==="adjacency"&&(getECData(E).focus=T.getAdjacentDataIndices())}}),f.graph.eachEdge(function(T){var A=T.getGraphicEl(),E=T.getModel().get(["emphasis","focus"]);A&&E==="adjacency"&&(getECData(A).focus={edge:[T.dataIndex],node:[T.node1.dataIndex,T.node2.dataIndex]})});var S=r.get("layout")==="circular"&&r.get(["circular","rotateLabel"]),x=f.getLayout("cx"),w=f.getLayout("cy");f.graph.eachNode(function(T){rotateNodeLabel(T,S,x,w)}),this._firstRender=!1},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(r,a){var o=this;(function s(){r.step(function(l){o.updateLayout(o._model),(o._layouting=!l)&&(a?o._layoutTimeout=setTimeout(s,16):s())})})()},t.prototype._updateController=function(r,a,o){var s=this,l=this._controller,u=this._controllerHost,d=this.group;if(l.setPointerChecker(function(v,g,f){var c=d.getBoundingRect();return c.applyTransform(d.transform),c.contain(g,f)&&!onIrrelevantElement(v,o,r)}),!isViewCoordSys(r.coordinateSystem)){l.disable();return}l.enable(r.get("roam")),u.zoomLimit=r.get("scaleLimit"),u.zoom=r.coordinateSystem.getZoom(),l.off("pan").off("zoom").on("pan",function(v){updateViewOnPan(u,v.dx,v.dy),o.dispatchAction({seriesId:r.id,type:"graphRoam",dx:v.dx,dy:v.dy})}).on("zoom",function(v){updateViewOnZoom(u,v.scale,v.originX,v.originY),o.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:v.scale,originX:v.originX,originY:v.originY}),s._updateNodeAndLinkScale(),adjustEdge(r.getGraph(),getNodeGlobalScale(r)),s._lineDraw.updateLayout(),o.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var r=this._model,a=r.getData(),o=getNodeGlobalScale(r);a.eachItemGraphicEl(function(s,l){s&&s.setSymbolScale(o)})},t.prototype.updateLayout=function(r){adjustEdge(r.getGraph(),getNodeGlobalScale(r)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(r,a){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(ChartView$1);const GraphView$1=GraphView;function generateNodeKey(n){return"_EC_"+n}var Graph=function(){function n(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(t,r){t=t==null?""+r:""+t;var a=this._nodesMap;if(!a[generateNodeKey(t)]){var o=new GraphNode(t,r);return o.hostGraph=this,this.nodes.push(o),a[generateNodeKey(t)]=o,o}},n.prototype.getNodeByIndex=function(t){var r=this.data.getRawIndex(t);return this.nodes[r]},n.prototype.getNodeById=function(t){return this._nodesMap[generateNodeKey(t)]},n.prototype.addEdge=function(t,r,a){var o=this._nodesMap,s=this._edgesMap;if(isNumber(t)&&(t=this.nodes[t]),isNumber(r)&&(r=this.nodes[r]),t instanceof GraphNode||(t=o[generateNodeKey(t)]),r instanceof GraphNode||(r=o[generateNodeKey(r)]),!(!t||!r)){var l=t.id+"-"+r.id,u=new GraphEdge(t,r,a);return u.hostGraph=this,this._directed&&(t.outEdges.push(u),r.inEdges.push(u)),t.edges.push(u),t!==r&&r.edges.push(u),this.edges.push(u),s[l]=u,u}},n.prototype.getEdgeByIndex=function(t){var r=this.edgeData.getRawIndex(t);return this.edges[r]},n.prototype.getEdge=function(t,r){t instanceof GraphNode&&(t=t.id),r instanceof GraphNode&&(r=r.id);var a=this._edgesMap;return this._directed?a[t+"-"+r]:a[t+"-"+r]||a[r+"-"+t]},n.prototype.eachNode=function(t,r){for(var a=this.nodes,o=a.length,s=0;s<o;s++)a[s].dataIndex>=0&&t.call(r,a[s],s)},n.prototype.eachEdge=function(t,r){for(var a=this.edges,o=a.length,s=0;s<o;s++)a[s].dataIndex>=0&&a[s].node1.dataIndex>=0&&a[s].node2.dataIndex>=0&&t.call(r,a[s],s)},n.prototype.breadthFirstTraverse=function(t,r,a,o){if(r instanceof GraphNode||(r=this._nodesMap[generateNodeKey(r)]),!!r){for(var s=a==="out"?"outEdges":a==="in"?"inEdges":"edges",l=0;l<this.nodes.length;l++)this.nodes[l].__visited=!1;if(!t.call(o,r,null))for(var u=[r];u.length;)for(var d=u.shift(),v=d[s],l=0;l<v.length;l++){var g=v[l],f=g.node1===d?g.node2:g.node1;if(!f.__visited){if(t.call(o,f,d))return;u.push(f),f.__visited=!0}}}},n.prototype.update=function(){for(var t=this.data,r=this.edgeData,a=this.nodes,o=this.edges,s=0,l=a.length;s<l;s++)a[s].dataIndex=-1;for(var s=0,l=t.count();s<l;s++)a[t.getRawIndex(s)].dataIndex=s;r.filterSelf(function(u){var d=o[r.getRawIndex(u)];return d.node1.dataIndex>=0&&d.node2.dataIndex>=0});for(var s=0,l=o.length;s<l;s++)o[s].dataIndex=-1;for(var s=0,l=r.count();s<l;s++)o[r.getRawIndex(s)].dataIndex=s},n.prototype.clone=function(){for(var t=new n(this._directed),r=this.nodes,a=this.edges,o=0;o<r.length;o++)t.addNode(r[o].id,r[o].dataIndex);for(var o=0;o<a.length;o++){var s=a[o];t.addEdge(s.node1.id,s.node2.id,s.dataIndex)}return t},n}(),GraphNode=function(){function n(t,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=r??-1}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,a=r.data.getItemModel(this.dataIndex);return a.getModel(t)}},n.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},r=0;r<this.edges.length;r++){var a=this.edges[r];a.dataIndex<0||(t.edge.push(a.dataIndex),t.node.push(a.node1.dataIndex,a.node2.dataIndex))}return t},n}(),GraphEdge=function(){function n(t,r,a){this.dataIndex=-1,this.node1=t,this.node2=r,this.dataIndex=a??-1}return n.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,a=r.edgeData.getItemModel(this.dataIndex);return a.getModel(t)}},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n}();function createGraphDataProxyMixin(n,t){return{getValue:function(r){var a=this[n][t];return a.getStore().get(a.getDimensionIndex(r||"value"),this.dataIndex)},setVisual:function(r,a){this.dataIndex>=0&&this[n][t].setItemVisual(this.dataIndex,r,a)},getVisual:function(r){return this[n][t].getItemVisual(this.dataIndex,r)},setLayout:function(r,a){this.dataIndex>=0&&this[n][t].setItemLayout(this.dataIndex,r,a)},getLayout:function(){return this[n][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][t].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));const Graph$1=Graph;function createGraphFromNodeEdge(n,t,r,a,o){for(var s=new Graph$1(a),l=0;l<n.length;l++)s.addNode(retrieve(n[l].id,n[l].name,l),l);for(var u=[],d=[],v=0,l=0;l<t.length;l++){var g=t[l],f=g.source,c=g.target;s.addEdge(f,c,v)&&(d.push(g),u.push(retrieve(convertOptionIdName(g.id,null),f+" > "+c)),v++)}var y=r.get("coordinateSystem"),_;if(y==="cartesian2d"||y==="polar")_=createSeriesData(n,r);else{var b=CoordinateSystem.get(y),S=b?b.dimensions||[]:[];indexOf(S,"value")<0&&S.concat(["value"]);var x=prepareSeriesDataSchema(n,{coordDimensions:S,encodeDefine:r.getEncode()}).dimensions;_=new SeriesData$1(x,r),_.initData(n)}var w=new SeriesData$1(["value"],r);return w.initData(d,u),o&&o(_,w),linkSeriesData({mainData:_,struct:s,structAttr:"graph",datas:{node:_,edge:w},datasAttr:{node:"data",edge:"edgeData"}}),s.update(),s}var GraphSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){n.prototype.init.apply(this,arguments);var a=this;function o(){return a._categoriesData}this.legendVisualProvider=new LegendVisualProvider$1(o,o),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeOption=function(r){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(r){n.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(r,"edgeLabel",["show"])},t.prototype.getInitialData=function(r,a){var o=r.edges||r.links||[],s=r.data||r.nodes||[],l=this;if(s&&o){initCurvenessList(this);var u=createGraphFromNodeEdge(s,o,this,!0,d);return each$f(u.edges,function(v){createEdgeMapForCurveness(v.node1,v.node2,this,v.dataIndex)},this),u.data}function d(v,g){v.wrapMethod("getItemModel",function(_){var b=l._categoriesModels,S=_.getShallow("category"),x=b[S];return x&&(x.parentModel=_.parentModel,_.parentModel=x),_});var f=Model$1.prototype.getModel;function c(_,b){var S=f.call(this,_,b);return S.resolveParentPath=y,S}g.wrapMethod("getItemModel",function(_){return _.resolveParentPath=y,_.getModel=c,_});function y(_){if(_&&(_[0]==="label"||_[1]==="label")){var b=_.slice();return _[0]==="label"?b[0]="edgeLabel":_[1]==="label"&&(b[1]="edgeLabel"),b}return _}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(r,a,o){if(o==="edge"){var s=this.getData(),l=this.getDataParams(r,o),u=s.graph.getEdgeByIndex(r),d=s.getName(u.node1.dataIndex),v=s.getName(u.node2.dataIndex),g=[];return d!=null&&g.push(d),v!=null&&g.push(v),createTooltipMarkup("nameValue",{name:g.join(" > "),value:l.value,noValue:l.value==null})}var f=defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:a});return f},t.prototype._updateCategoriesData=function(){var r=map$1(this.option.categories||[],function(o){return o.value!=null?o:extend({value:0},o)}),a=new SeriesData$1(["value"],this);a.initData(r),this._categoriesData=a,this._categoriesModels=a.mapArray(function(o){return a.getItemModel(o)})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(SeriesModel$1);const GraphSeriesModel$1=GraphSeriesModel;var actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(n){n.registerChartView(GraphView$1),n.registerSeriesModel(GraphSeriesModel$1),n.registerProcessor(categoryFilter),n.registerVisual(categoryVisual),n.registerVisual(graphEdgeVisual),n.registerLayout(graphSimpleLayout),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),n.registerLayout(graphForceLayout),n.registerCoordinateSystem("graphView",{dimensions:View$1.dimensions,create:createViewCoordSys}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),n.registerAction(actionInfo$1,function(t,r,a){r.eachComponent({mainType:"series",query:t},function(o){var s=o.coordinateSystem,l=updateCenterAndZoom(s,t,void 0,a);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom)})})}var PointerShape=function(){function n(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return n}(),PointerPath=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="pointer",a}return t.prototype.getDefaultShape=function(){return new PointerShape},t.prototype.buildPath=function(r,a){var o=Math.cos,s=Math.sin,l=a.r,u=a.width,d=a.angle,v=a.x-o(d)*u*(u>=l/3?1:2),g=a.y-s(d)*u*(u>=l/3?1:2);d=a.angle-Math.PI/2,r.moveTo(v,g),r.lineTo(a.x+o(d)*u,a.y+s(d)*u),r.lineTo(a.x+o(a.angle)*l,a.y+s(a.angle)*l),r.lineTo(a.x-o(d)*u,a.y-s(d)*u),r.lineTo(v,g)},t}(Path$1);const PointerPath$1=PointerPath;function parsePosition(n,t){var r=n.get("center"),a=t.getWidth(),o=t.getHeight(),s=Math.min(a,o),l=parsePercent(r[0],t.getWidth()),u=parsePercent(r[1],t.getHeight()),d=parsePercent(n.get("radius"),s/2);return{cx:l,cy:u,r:d}}function formatLabel(n,t){var r=n==null?"":n+"";return t&&(isString(t)?r=t.replace("{value}",r):isFunction(t)&&(r=t(n))),r}var GaugeView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){this.group.removeAll();var s=r.get(["axisLine","lineStyle","color"]),l=parsePosition(r,o);this._renderMain(r,a,o,s,l),this._data=r.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(r,a,o,s,l){var u=this.group,d=r.get("clockwise"),v=-r.get("startAngle")/180*Math.PI,g=-r.get("endAngle")/180*Math.PI,f=r.getModel("axisLine"),c=f.get("roundCap"),y=c?Sausage:Sector$1,_=f.get("show"),b=f.getModel("lineStyle"),S=b.get("width"),x=[v,g];normalizeArcAngles(x,!d),v=x[0],g=x[1];for(var w=g-v,T=v,A=[],E=0;_&&E<s.length;E++){var $=Math.min(Math.max(s[E][0],0),1);g=v+w*$;var P=new y({shape:{startAngle:T,endAngle:g,cx:l.cx,cy:l.cy,clockwise:d,r0:l.r-S,r:l.r},silent:!0});P.setStyle({fill:s[E][1]}),P.setStyle(b.getLineStyle(["color","width"])),A.push(P),T=g}A.reverse(),each$f(A,function(C){return u.add(C)});var I=function(C){if(C<=0)return s[0][1];var M;for(M=0;M<s.length;M++)if(s[M][0]>=C&&(M===0?0:s[M-1][0])<C)return s[M][1];return s[M-1][1]};this._renderTicks(r,a,o,I,l,v,g,d,S),this._renderTitleAndDetail(r,a,o,I,l),this._renderAnchor(r,l),this._renderPointer(r,a,o,I,l,v,g,d,S)},t.prototype._renderTicks=function(r,a,o,s,l,u,d,v,g){for(var f=this.group,c=l.cx,y=l.cy,_=l.r,b=+r.get("min"),S=+r.get("max"),x=r.getModel("splitLine"),w=r.getModel("axisTick"),T=r.getModel("axisLabel"),A=r.get("splitNumber"),E=w.get("splitNumber"),$=parsePercent(x.get("length"),_),P=parsePercent(w.get("length"),_),I=u,C=(d-u)/A,M=C/E,D=x.getModel("lineStyle").getLineStyle(),R=w.getModel("lineStyle").getLineStyle(),N=x.get("distance"),O,F,L=0;L<=A;L++){if(O=Math.cos(I),F=Math.sin(I),x.get("show")){var B=N?N+g:g,V=new Line$3({shape:{x1:O*(_-B)+c,y1:F*(_-B)+y,x2:O*(_-$-B)+c,y2:F*(_-$-B)+y},style:D,silent:!0});D.stroke==="auto"&&V.setStyle({stroke:s(L/A)}),f.add(V)}if(T.get("show")){var B=T.get("distance")+N,H=formatLabel(round$3(L/A*(S-b)+b),T.get("formatter")),X=s(L/A),U=O*(_-$-B)+c,te=F*(_-$-B)+y,ee=T.get("rotate"),q=0;ee==="radial"?(q=-I+2*Math.PI,q>Math.PI/2&&(q+=Math.PI)):ee==="tangential"?q=-I-Math.PI/2:isNumber(ee)&&(q=ee*Math.PI/180),q===0?f.add(new ZRText$1({style:createTextStyle(T,{text:H,x:U,y:te,verticalAlign:F<-.8?"top":F>.8?"bottom":"middle",align:O<-.4?"left":O>.4?"right":"center"},{inheritColor:X}),silent:!0})):f.add(new ZRText$1({style:createTextStyle(T,{text:H,x:U,y:te,verticalAlign:"middle",align:"center"},{inheritColor:X}),silent:!0,originX:U,originY:te,rotation:q}))}if(w.get("show")&&L!==A){var B=w.get("distance");B=B?B+g:g;for(var ie=0;ie<=E;ie++){O=Math.cos(I),F=Math.sin(I);var pe=new Line$3({shape:{x1:O*(_-B)+c,y1:F*(_-B)+y,x2:O*(_-P-B)+c,y2:F*(_-P-B)+y},silent:!0,style:R});R.stroke==="auto"&&pe.setStyle({stroke:s((L+ie/E)/A)}),f.add(pe),I+=M}I-=M}else I+=C}},t.prototype._renderPointer=function(r,a,o,s,l,u,d,v,g){var f=this.group,c=this._data,y=this._progressEls,_=[],b=r.get(["pointer","show"]),S=r.getModel("progress"),x=S.get("show"),w=r.getData(),T=w.mapDimension("value"),A=+r.get("min"),E=+r.get("max"),$=[A,E],P=[u,d];function I(M,D){var R=w.getItemModel(M),N=R.getModel("pointer"),O=parsePercent(N.get("width"),l.r),F=parsePercent(N.get("length"),l.r),L=r.get(["pointer","icon"]),B=N.get("offsetCenter"),V=parsePercent(B[0],l.r),H=parsePercent(B[1],l.r),X=N.get("keepAspect"),U;return L?U=createSymbol$1(L,V-O/2,H-F,O,F,null,X):U=new PointerPath$1({shape:{angle:-Math.PI/2,width:O,r:F,x:V,y:H}}),U.rotation=-(D+Math.PI/2),U.x=l.cx,U.y=l.cy,U}function C(M,D){var R=S.get("roundCap"),N=R?Sausage:Sector$1,O=S.get("overlap"),F=O?S.get("width"):g/w.count(),L=O?l.r-F:l.r-(M+1)*F,B=O?l.r:l.r-M*F,V=new N({shape:{startAngle:u,endAngle:D,cx:l.cx,cy:l.cy,clockwise:v,r0:L,r:B}});return O&&(V.z2=E-w.get(T,M)%E),V}(x||b)&&(w.diff(c).add(function(M){var D=w.get(T,M);if(b){var R=I(M,u);initProps(R,{rotation:-((isNaN(+D)?P[0]:linearMap$2(D,$,P,!0))+Math.PI/2)},r),f.add(R),w.setItemGraphicEl(M,R)}if(x){var N=C(M,u),O=S.get("clip");initProps(N,{shape:{endAngle:linearMap$2(D,$,P,O)}},r),f.add(N),setCommonECData(r.seriesIndex,w.dataType,M,N),_[M]=N}}).update(function(M,D){var R=w.get(T,M);if(b){var N=c.getItemGraphicEl(D),O=N?N.rotation:u,F=I(M,O);F.rotation=O,updateProps$1(F,{rotation:-((isNaN(+R)?P[0]:linearMap$2(R,$,P,!0))+Math.PI/2)},r),f.add(F),w.setItemGraphicEl(M,F)}if(x){var L=y[D],B=L?L.shape.endAngle:u,V=C(M,B),H=S.get("clip");updateProps$1(V,{shape:{endAngle:linearMap$2(R,$,P,H)}},r),f.add(V),setCommonECData(r.seriesIndex,w.dataType,M,V),_[M]=V}}).execute(),w.each(function(M){var D=w.getItemModel(M),R=D.getModel("emphasis"),N=R.get("focus"),O=R.get("blurScope"),F=R.get("disabled");if(b){var L=w.getItemGraphicEl(M),B=w.getItemVisual(M,"style"),V=B.fill;if(L instanceof ZRImage$1){var H=L.style;L.useStyle(extend({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},B))}else L.useStyle(B),L.type!=="pointer"&&L.setColor(V);L.setStyle(D.getModel(["pointer","itemStyle"]).getItemStyle()),L.style.fill==="auto"&&L.setStyle("fill",s(linearMap$2(w.get(T,M),$,[0,1],!0))),L.z2EmphasisLift=0,setStatesStylesFromModel(L,D),toggleHoverEmphasis(L,N,O,F)}if(x){var X=_[M];X.useStyle(w.getItemVisual(M,"style")),X.setStyle(D.getModel(["progress","itemStyle"]).getItemStyle()),X.z2EmphasisLift=0,setStatesStylesFromModel(X,D),toggleHoverEmphasis(X,N,O,F)}}),this._progressEls=_)},t.prototype._renderAnchor=function(r,a){var o=r.getModel("anchor"),s=o.get("show");if(s){var l=o.get("size"),u=o.get("icon"),d=o.get("offsetCenter"),v=o.get("keepAspect"),g=createSymbol$1(u,a.cx-l/2+parsePercent(d[0],a.r),a.cy-l/2+parsePercent(d[1],a.r),l,l,null,v);g.z2=o.get("showAbove")?1:0,g.setStyle(o.getModel("itemStyle").getItemStyle()),this.group.add(g)}},t.prototype._renderTitleAndDetail=function(r,a,o,s,l){var u=this,d=r.getData(),v=d.mapDimension("value"),g=+r.get("min"),f=+r.get("max"),c=new Group$4,y=[],_=[],b=r.isAnimationEnabled(),S=r.get(["pointer","showAbove"]);d.diff(this._data).add(function(x){y[x]=new ZRText$1({silent:!0}),_[x]=new ZRText$1({silent:!0})}).update(function(x,w){y[x]=u._titleEls[w],_[x]=u._detailEls[w]}).execute(),d.each(function(x){var w=d.getItemModel(x),T=d.get(v,x),A=new Group$4,E=s(linearMap$2(T,[g,f],[0,1],!0)),$=w.getModel("title");if($.get("show")){var P=$.get("offsetCenter"),I=l.cx+parsePercent(P[0],l.r),C=l.cy+parsePercent(P[1],l.r),M=y[x];M.attr({z2:S?0:2,style:createTextStyle($,{x:I,y:C,text:d.getName(x),align:"center",verticalAlign:"middle"},{inheritColor:E})}),A.add(M)}var D=w.getModel("detail");if(D.get("show")){var R=D.get("offsetCenter"),N=l.cx+parsePercent(R[0],l.r),O=l.cy+parsePercent(R[1],l.r),F=parsePercent(D.get("width"),l.r),L=parsePercent(D.get("height"),l.r),B=r.get(["progress","show"])?d.getItemVisual(x,"style").fill:E,M=_[x],V=D.get("formatter");M.attr({z2:S?0:2,style:createTextStyle(D,{x:N,y:O,text:formatLabel(T,V),width:isNaN(F)?null:F,height:isNaN(L)?null:L,align:"center",verticalAlign:"middle"},{inheritColor:B})}),setLabelValueAnimation(M,{normal:D},T,function(X){return formatLabel(X,V)}),b&&animateLabelValue(M,x,d,r,{getFormattedLabel:function(X,U,te,ee,q,ie){return formatLabel(ie?ie.interpolatedValue:T,V)}}),A.add(M)}c.add(A)}),this.group.add(c),this._titleEls=y,this._detailEls=_},t.type="gauge",t}(ChartView$1);const GaugeView$1=GaugeView;var GaugeSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="itemStyle",r}return t.prototype.getInitialData=function(r,a){return createSeriesDataSimply(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(SeriesModel$1);const GaugeSeriesModel$1=GaugeSeriesModel;function install$E(n){n.registerChartView(GaugeView$1),n.registerSeriesModel(GaugeSeriesModel$1)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(n){__extends$1(t,n);function t(r,a){var o=n.call(this)||this,s=o,l=new Polyline$3,u=new ZRText$1;return s.setTextContent(u),o.setTextGuideLine(l),o.updateData(r,a,!0),o}return t.prototype.updateData=function(r,a,o){var s=this,l=r.hostModel,u=r.getItemModel(a),d=r.getItemLayout(a),v=u.getModel("emphasis"),g=u.get(opacityAccessPath$1);g=g??1,o||saveOldStyle(s),s.useStyle(r.getItemVisual(a,"style")),s.style.lineJoin="round",o?(s.setShape({points:d.points}),s.style.opacity=0,initProps(s,{style:{opacity:g}},l,a)):updateProps$1(s,{style:{opacity:g},shape:{points:d.points}},l,a),setStatesStylesFromModel(s,u),this._updateLabel(r,a),toggleHoverEmphasis(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},t.prototype._updateLabel=function(r,a){var o=this,s=this.getTextGuideLine(),l=o.getTextContent(),u=r.hostModel,d=r.getItemModel(a),v=r.getItemLayout(a),g=v.label,f=r.getItemVisual(a,"style"),c=f.fill;setLabelStyle(l,getLabelStatesModels(d),{labelFetcher:r.hostModel,labelDataIndex:a,defaultOpacity:f.opacity,defaultText:r.getName(a)},{normal:{align:g.textAlign,verticalAlign:g.verticalAlign}}),o.setTextConfig({local:!0,inside:!!g.inside,insideStroke:c,outsideFill:c});var y=g.linePoints;s.setShape({points:y}),o.textGuideLineConfig={anchor:y?new Point$1(y[0][0],y[0][1]):null},updateProps$1(l,{style:{x:g.x,y:g.y}},u,a),l.attr({rotation:g.rotation,originX:g.x,originY:g.y,z2:10}),setLabelLineStyle(o,getLabelLineStatesModels(d),{stroke:c})},t}(Polygon$1),FunnelView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,a,o){var s=r.getData(),l=this._data,u=this.group;s.diff(l).add(function(d){var v=new FunnelPiece(s,d);s.setItemGraphicEl(d,v),u.add(v)}).update(function(d,v){var g=l.getItemGraphicEl(v);g.updateData(s,d),u.add(g),s.setItemGraphicEl(d,g)}).remove(function(d){var v=l.getItemGraphicEl(d);removeElementWithFadeOut(v,r,d)}).execute(),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(ChartView$1);const FunnelView$1=FunnelView;var FunnelSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.getInitialData=function(r,a){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},t.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var a=r.labelLine,o=r.emphasis.labelLine;a.show=a.show&&r.label.show,o.show=o.show&&r.emphasis.label.show},t.prototype.getDataParams=function(r){var a=this.getData(),o=n.prototype.getDataParams.call(this,r),s=a.mapDimension("value"),l=a.getSum(s);return o.percent=l?+(a.get(s,r)/l*100).toFixed(2):0,o.$vars.push("percent"),o},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(SeriesModel$1);const FunnelSeriesModel$1=FunnelSeriesModel;function getViewRect$2(n,t){return getLayoutRect(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function getSortedIndices(n,t){for(var r=n.mapDimension("value"),a=n.mapArray(r,function(d){return d}),o=[],s=t==="ascending",l=0,u=n.count();l<u;l++)o[l]=l;return isFunction(t)?o.sort(t):t!=="none"&&o.sort(function(d,v){return s?a[d]-a[v]:a[v]-a[d]}),o}function labelLayout(n){var t=n.hostModel,r=t.get("orient");n.each(function(a){var o=n.getItemModel(a),s=o.getModel("label"),l=s.get("position"),u=o.getModel("labelLine"),d=n.getItemLayout(a),v=d.points,g=l==="inner"||l==="inside"||l==="center"||l==="insideLeft"||l==="insideRight",f,c,y,_;if(g)l==="insideLeft"?(c=(v[0][0]+v[3][0])/2+5,y=(v[0][1]+v[3][1])/2,f="left"):l==="insideRight"?(c=(v[1][0]+v[2][0])/2-5,y=(v[1][1]+v[2][1])/2,f="right"):(c=(v[0][0]+v[1][0]+v[2][0]+v[3][0])/4,y=(v[0][1]+v[1][1]+v[2][1]+v[3][1])/4,f="center"),_=[[c,y],[c,y]];else{var b=void 0,S=void 0,x=void 0,w=void 0,T=u.get("length");l==="left"?(b=(v[3][0]+v[0][0])/2,S=(v[3][1]+v[0][1])/2,x=b-T,c=x-5,f="right"):l==="right"?(b=(v[1][0]+v[2][0])/2,S=(v[1][1]+v[2][1])/2,x=b+T,c=x+5,f="left"):l==="top"?(b=(v[3][0]+v[0][0])/2,S=(v[3][1]+v[0][1])/2,w=S-T,y=w-5,f="center"):l==="bottom"?(b=(v[1][0]+v[2][0])/2,S=(v[1][1]+v[2][1])/2,w=S+T,y=w+5,f="center"):l==="rightTop"?(b=r==="horizontal"?v[3][0]:v[1][0],S=r==="horizontal"?v[3][1]:v[1][1],r==="horizontal"?(w=S-T,y=w-5,f="center"):(x=b+T,c=x+5,f="top")):l==="rightBottom"?(b=v[2][0],S=v[2][1],r==="horizontal"?(w=S+T,y=w+5,f="center"):(x=b+T,c=x+5,f="bottom")):l==="leftTop"?(b=v[0][0],S=r==="horizontal"?v[0][1]:v[1][1],r==="horizontal"?(w=S-T,y=w-5,f="center"):(x=b-T,c=x-5,f="right")):l==="leftBottom"?(b=r==="horizontal"?v[1][0]:v[3][0],S=r==="horizontal"?v[1][1]:v[2][1],r==="horizontal"?(w=S+T,y=w+5,f="center"):(x=b-T,c=x-5,f="right")):(b=(v[1][0]+v[2][0])/2,S=(v[1][1]+v[2][1])/2,r==="horizontal"?(w=S+T,y=w+5,f="center"):(x=b+T,c=x+5,f="left")),r==="horizontal"?(x=b,c=x):(w=S,y=w),_=[[b,S],[x,w]]}d.label={linePoints:_,x:c,y,verticalAlign:"middle",textAlign:f,inside:g}})}function funnelLayout(n,t){n.eachSeriesByType("funnel",function(r){var a=r.getData(),o=a.mapDimension("value"),s=r.get("sort"),l=getViewRect$2(r,t),u=r.get("orient"),d=l.width,v=l.height,g=getSortedIndices(a,s),f=l.x,c=l.y,y=u==="horizontal"?[parsePercent(r.get("minSize"),v),parsePercent(r.get("maxSize"),v)]:[parsePercent(r.get("minSize"),d),parsePercent(r.get("maxSize"),d)],_=a.getDataExtent(o),b=r.get("min"),S=r.get("max");b==null&&(b=Math.min(_[0],0)),S==null&&(S=_[1]);var x=r.get("funnelAlign"),w=r.get("gap"),T=u==="horizontal"?d:v,A=(T-w*(a.count()-1))/a.count(),E=function(O,F){if(u==="horizontal"){var L=a.get(o,O)||0,B=linearMap$2(L,[b,S],y,!0),V=void 0;switch(x){case"top":V=c;break;case"center":V=c+(v-B)/2;break;case"bottom":V=c+(v-B);break}return[[F,V],[F,V+B]]}var H=a.get(o,O)||0,X=linearMap$2(H,[b,S],y,!0),U;switch(x){case"left":U=f;break;case"center":U=f+(d-X)/2;break;case"right":U=f+d-X;break}return[[U,F],[U+X,F]]};s==="ascending"&&(A=-A,w=-w,u==="horizontal"?f+=d:c+=v,g=g.reverse());for(var $=0;$<g.length;$++){var P=g[$],I=g[$+1],C=a.getItemModel(P);if(u==="horizontal"){var M=C.get(["itemStyle","width"]);M==null?M=A:(M=parsePercent(M,d),s==="ascending"&&(M=-M));var D=E(P,f),R=E(I,f+M);f+=M+w,a.setItemLayout(P,{points:D.concat(R.slice().reverse())})}else{var N=C.get(["itemStyle","height"]);N==null?N=A:(N=parsePercent(N,v),s==="ascending"&&(N=-N));var D=E(P,c),R=E(I,c+N);c+=N+w,a.setItemLayout(P,{points:D.concat(R.slice().reverse())})}}labelLayout(a)})}function install$D(n){n.registerChartView(FunnelView$1),n.registerSeriesModel(FunnelSeriesModel$1),n.registerLayout(funnelLayout),n.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$2=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r._dataGroup=new Group$4,r._initialized=!1,r}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(r,a,o,s){this._progressiveEls=null;var l=this._dataGroup,u=r.getData(),d=this._data,v=r.coordinateSystem,g=v.dimensions,f=makeSeriesScope(r);u.diff(d).add(c).update(y).remove(_).execute();function c(S){var x=addEl(u,l,S,g,v);updateElCommon(x,u,S,f)}function y(S,x){var w=d.getItemGraphicEl(x),T=createLinePoints(u,S,g,v);u.setItemGraphicEl(S,w),updateProps$1(w,{shape:{points:T}},r,S),saveOldStyle(w),updateElCommon(w,u,S,f)}function _(S){var x=d.getItemGraphicEl(S);l.remove(x)}if(!this._initialized){this._initialized=!0;var b=createGridClipShape$2(v,r,function(){setTimeout(function(){l.removeClipPath()})});l.setClipPath(b)}this._data=u},t.prototype.incrementalPrepareRender=function(r,a,o){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(r,a,o){for(var s=a.getData(),l=a.coordinateSystem,u=l.dimensions,d=makeSeriesScope(a),v=this._progressiveEls=[],g=r.start;g<r.end;g++){var f=addEl(s,this._dataGroup,g,u,l);f.incremental=!0,updateElCommon(f,s,g,d),v.push(f)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(ChartView$1);function createGridClipShape$2(n,t,r){var a=n.model,o=n.getRect(),s=new Rect$3({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),l=a.get("layout")==="horizontal"?"width":"height";return s.setShape(l,0),initProps(s,{shape:{width:o.width,height:o.height}},t,r),s}function createLinePoints(n,t,r,a){for(var o=[],s=0;s<r.length;s++){var l=r[s],u=n.get(n.mapDimension(l),t);isEmptyValue(u,a.getAxis(l).type)||o.push(a.dataToPoint(u,l))}return o}function addEl(n,t,r,a,o){var s=createLinePoints(n,r,a,o),l=new Polyline$3({shape:{points:s},z2:10});return t.add(l),n.setItemGraphicEl(r,l),l}function makeSeriesScope(n){var t=n.get("smooth",!0);return t===!0&&(t=DEFAULT_SMOOTH),t=numericToNumber(t),eqNaN(t)&&(t=0),{smooth:t}}function updateElCommon(n,t,r,a){n.useStyle(t.getItemVisual(r,"style")),n.style.fill=null,n.setShape("smooth",a.smooth);var o=t.getItemModel(r),s=o.getModel("emphasis");setStatesStylesFromModel(n,o,"lineStyle"),toggleHoverEmphasis(n,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function isEmptyValue(n,t){return t==="category"?n==null:n==null||isNaN(n)}const ParallelView$3=ParallelView$2;var ParallelSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.getInitialData=function(r,a){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},t.prototype.getRawIndicesByActiveState=function(r){var a=this.coordinateSystem,o=this.getData(),s=[];return a.eachActiveState(o,function(l,u){r===l&&s.push(o.getRawIndex(u))}),s},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(SeriesModel$1);function makeDefaultEncode(n){var t=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(t){var r={};return each$f(t.dimensions,function(a){var o=convertDimNameToNumber(a);r[a]=o}),r}}function convertDimNameToNumber(n){return+n.replace("dim","")}const ParallelSeriesModel$1=ParallelSeriesModel;var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(n,t){var r=n.coordinateSystem,a={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(o,s){r.eachActiveState(s,function(l,u){var d=a[l];if(l==="normal"&&s.hasItemOption){var v=s.getItemModel(u).get(opacityAccessPath,!0);v!=null&&(d=v)}var g=s.ensureUniqueItemVisual(u,"style");g.opacity=d},o.start,o.end)}}}};const parallelVisual$1=parallelVisual;function parallelPreprocessor(n){createParallelIfNeeded(n),mergeAxisOptionFromParallel(n)}function createParallelIfNeeded(n){if(!n.parallel){var t=!1;each$f(n.series,function(r){r&&r.type==="parallel"&&(t=!0)}),t&&(n.parallel=[{}])}}function mergeAxisOptionFromParallel(n){var t=normalizeToArray(n.parallelAxis);each$f(t,function(r){if(isObject$3(r)){var a=r.parallelIndex||0,o=normalizeToArray(n.parallel)[a];o&&o.parallelAxisDefault&&merge(r,o.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){this._model=r,this._api=o,this._handlers||(this._handlers={},each$f(handlers$1,function(s,l){o.getZr().on(l,this._handlers[l]=bind$1(s,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",r.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(r,a){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(o,s){a.getZr().off(s,o)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(r){this._dispatchExpand(r)},t.prototype._dispatchExpand=function(r){r&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},r))},t.type="parallel",t}(ComponentView$1),handlers$1={mousedown:function(n){checkTrigger(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var t=this._mouseDownPoint;if(checkTrigger(this,"click")&&t){var r=[n.offsetX,n.offsetY],a=Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2);if(a>CLICK_THRESHOLD)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);o.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var t=this._model,r=t.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),a=r.behavior;a==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(a==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:a==="jump"?null:{duration:0}})}}};function checkTrigger(n,t){var r=n._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===t}const ParallelView$1=ParallelView;var ParallelModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(r){var a=this.option;r&&merge(a,r,!0),this._initDimensions()},t.prototype.contains=function(r,a){var o=r.get("parallelIndex");return o!=null&&a.getComponent("parallel",o)===this},t.prototype.setAxisExpand=function(r){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(a){r.hasOwnProperty(a)&&(this.option[a]=r[a])},this)},t.prototype._initDimensions=function(){var r=this.dimensions=[],a=this.parallelAxisIndex=[],o=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(s){return(s.get("parallelIndex")||0)===this.componentIndex},this);each$f(o,function(s){r.push("dim"+s.get("dim")),a.push(s.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(ComponentModel$1);const ParallelModel$1=ParallelModel;var ParallelAxis=function(n){__extends$1(t,n);function t(r,a,o,s,l){var u=n.call(this,r,a,o)||this;return u.type=s||"value",u.axisIndex=l,u}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(Axis$1);const ParallelAxis$1=ParallelAxis;function sliderMove(n,t,r,a,o,s){n=n||0;var l=r[1]-r[0];if(o!=null&&(o=restrict$1(o,[0,l])),s!=null&&(s=Math.max(s,o??0)),a==="all"){var u=Math.abs(t[1]-t[0]);u=restrict$1(u,[0,l]),o=s=restrict$1(u,[o,s]),a=0}t[0]=restrict$1(t[0],r),t[1]=restrict$1(t[1],r);var d=getSpanSign(t,a);t[a]+=n;var v=o||0,g=r.slice();d.sign<0?g[0]+=v:g[1]-=v,t[a]=restrict$1(t[a],g);var f;return f=getSpanSign(t,a),o!=null&&(f.sign!==d.sign||f.span<o)&&(t[1-a]=t[a]+d.sign*o),f=getSpanSign(t,a),s!=null&&f.span>s&&(t[1-a]=t[a]+f.sign*s),t}function getSpanSign(n,t){var r=n[t]-n[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function restrict$1(n,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,n))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function n(t,r,a){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,r,a)}return n.prototype._init=function(t,r,a){var o=t.dimensions,s=t.parallelAxisIndex;each$a(o,function(l,u){var d=s[u],v=r.getComponent("parallelAxis",d),g=this._axesMap.set(l,new ParallelAxis$1(l,createScaleByModel$1(v),[0,0],v.get("type"),d)),f=g.type==="category";g.onBand=f&&v.get("boundaryGap"),g.inverse=v.get("inverse"),v.axis=g,g.model=v,g.coordinateSystem=v.coordinateSystem=this},this)},n.prototype.update=function(t,r){this._updateAxesFromSeries(this._model,t)},n.prototype.containPoint=function(t){var r=this._makeLayoutInfo(),a=r.axisBase,o=r.layoutBase,s=r.pixelDimIndex,l=t[1-s],u=t[s];return l>=a&&l<=a+r.axisLength&&u>=o&&u<=o+r.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(t,r){r.eachSeries(function(a){if(t.contains(a,r)){var o=a.getData();each$a(this.dimensions,function(s){var l=this._axesMap.get(s);l.scale.unionExtentFromData(o,o.mapDimension(s)),niceScaleExtent(l.scale,l.model)},this)}},this)},n.prototype.resize=function(t,r){this._rect=getLayoutRect(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var t=this._model,r=this._rect,a=["x","y"],o=["width","height"],s=t.get("layout"),l=s==="horizontal"?0:1,u=r[o[l]],d=[0,u],v=this.dimensions.length,g=restrict(t.get("axisExpandWidth"),d),f=restrict(t.get("axisExpandCount")||0,[0,v]),c=t.get("axisExpandable")&&v>3&&v>f&&f>1&&g>0&&u>0,y=t.get("axisExpandWindow"),_;if(y)_=restrict(y[1]-y[0],d),y[1]=y[0]+_;else{_=restrict(g*(f-1),d);var b=t.get("axisExpandCenter")||mathFloor(v/2);y=[g*b-_/2],y[1]=y[0]+_}var S=(u-_)/(v-f);S<3&&(S=0);var x=[mathFloor(round(y[0]/g,1))+1,mathCeil(round(y[1]/g,1))-1],w=S/g*y[0];return{layout:s,pixelDimIndex:l,layoutBase:r[a[l]],layoutLength:u,axisBase:r[a[1-l]],axisLength:r[o[1-l]],axisExpandable:c,axisExpandWidth:g,axisCollapseWidth:S,axisExpandWindow:y,axisCount:v,winInnerIndices:x,axisExpandWindow0Pos:w}},n.prototype._layoutAxes=function(){var t=this._rect,r=this._axesMap,a=this.dimensions,o=this._makeLayoutInfo(),s=o.layout;r.each(function(l){var u=[0,o.axisLength],d=l.inverse?1:0;l.setExtent(u[d],u[1-d])}),each$a(a,function(l,u){var d=(o.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(u,o),v={horizontal:{x:d.position,y:o.axisLength},vertical:{x:0,y:d.position}},g={horizontal:PI$1/2,vertical:0},f=[v[s].x+t.x,v[s].y+t.y],c=g[s],y=create$1();rotate(y,y,c),translate(y,y,f),this._axesLayout[l]={position:f,rotation:c,transform:y,axisNameAvailableWidth:d.axisNameAvailableWidth,axisLabelShow:d.axisLabelShow,nameTruncateMaxWidth:d.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(t){return this._axesMap.get(t)},n.prototype.dataToPoint=function(t,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(t),r)},n.prototype.eachActiveState=function(t,r,a,o){a==null&&(a=0),o==null&&(o=t.count());var s=this._axesMap,l=this.dimensions,u=[],d=[];each$f(l,function(S){u.push(t.mapDimension(S)),d.push(s.get(S).model)});for(var v=this.hasAxisBrushed(),g=a;g<o;g++){var f=void 0;if(!v)f="normal";else{f="active";for(var c=t.getValues(u,g),y=0,_=l.length;y<_;y++){var b=d[y].getActiveState(c[y]);if(b==="inactive"){f="inactive";break}}}r(f,g)}},n.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,r=this._axesMap,a=!1,o=0,s=t.length;o<s;o++)r.get(t[o]).model.getActiveState()!=="normal"&&(a=!0);return a},n.prototype.axisCoordToPoint=function(t,r){var a=this._axesLayout[r];return applyTransform([t,0],a.transform)},n.prototype.getAxisLayout=function(t){return clone$4(this._axesLayout[t])},n.prototype.getSlidedAxisExpandWindow=function(t){var r=this._makeLayoutInfo(),a=r.pixelDimIndex,o=r.axisExpandWindow.slice(),s=o[1]-o[0],l=[0,r.axisExpandWidth*(r.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:o};var u=t[a]-r.layoutBase-r.axisExpandWindow0Pos,d,v="slide",g=r.axisCollapseWidth,f=this._model.get("axisExpandSlideTriggerArea"),c=f[0]!=null;if(g)c&&g&&u<s*f[0]?(v="jump",d=u-s*f[2]):c&&g&&u>s*(1-f[0])?(v="jump",d=u-s*(1-f[2])):(d=u-s*f[1])>=0&&(d=u-s*(1-f[1]))<=0&&(d=0),d*=r.axisExpandWidth/g,d?sliderMove(d,o,l,"all"):v="none";else{var y=o[1]-o[0],_=l[1]*u/y;o=[mathMax$2(0,_-y/2)],o[1]=mathMin$2(l[1],o[0]+y),o[0]=o[1]-y}return{axisExpandWindow:o,behavior:v}},n}();function restrict(n,t){return mathMin$2(mathMax$2(n,t[0]),t[1])}function layoutAxisWithoutExpand(n,t){var r=t.layoutLength/(t.axisCount-1);return{position:r*n,axisNameAvailableWidth:r,axisLabelShow:!0}}function layoutAxisWithExpand(n,t){var r=t.layoutLength,a=t.axisExpandWidth,o=t.axisCount,s=t.axisCollapseWidth,l=t.winInnerIndices,u,d=s,v=!1,g;return n<l[0]?(u=n*s,g=s):n<=l[1]?(u=t.axisExpandWindow0Pos+n*a-t.axisExpandWindow[0],d=a,v=!0):(u=r-(o-1-n)*s,g=s),{position:u,axisNameAvailableWidth:d,axisLabelShow:v,nameTruncateMaxWidth:g}}const Parallel$1=Parallel;function createParallelCoordSys(n,t){var r=[];return n.eachComponent("parallel",function(a,o){var s=new Parallel$1(a,n,t);s.name="parallel_"+o,s.resize(a,t),a.coordinateSystem=s,s.model=a,r.push(s)}),n.eachSeries(function(a){if(a.get("coordinateSystem")==="parallel"){var o=a.getReferringComponents("parallel",SINGLE_REFERRING).models[0];a.coordinateSystem=o.coordinateSystem}}),r}var parallelCoordSysCreator={create:createParallelCoordSys};const parallelCoordSysCreator$1=parallelCoordSysCreator;var ParallelAxisModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.activeIntervals=[],r}return t.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(r){var a=this.activeIntervals=clone$4(r);if(a)for(var o=a.length-1;o>=0;o--)asc$2(a[o])},t.prototype.getActiveState=function(r){var a=this.activeIntervals;if(!a.length)return"normal";if(r==null||isNaN(+r))return"inactive";if(a.length===1){var o=a[0];if(o[0]<=r&&r<=o[1])return"active"}else for(var s=0,l=a.length;s<l;s++)if(a[s][0]<=r&&r<=a[s][1])return"active";return"inactive"},t}(ComponentModel$1);mixin(ParallelAxisModel,AxisModelCommonMixin);const ParallelAxisModel$1=ParallelAxisModel;var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(n){__extends$1(t,n);function t(r){var a=n.call(this)||this;return a._track=[],a._covers=[],a._handlers={},a._zr=r,a.group=new Group$4,a._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(o,s){this._handlers[s]=bind$1(o,this)},a),a}return t.prototype.enableBrush=function(r){return this._brushType&&this._doDisableBrush(),r.brushType&&this._doEnableBrush(r),this},t.prototype._doEnableBrush=function(r){var a=this._zr;this._enableGlobalPan||take(a,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(o,s){a.on(s,o)}),this._brushType=r.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),r,!0)},t.prototype._doDisableBrush=function(){var r=this._zr;release(r,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(a,o){r.off(o,a)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(r){if(r&&r.length){var a=this._panels={};each$f(r,function(o){a[o.panelId]=clone$4(o)})}else this._panels=null;return this},t.prototype.mount=function(r){r=r||{},this._enableGlobalPan=r.enableGlobalPan;var a=this.group;return this._zr.add(a),a.attr({x:r.x||0,y:r.y||0,rotation:r.rotation||0,scaleX:r.scaleX||1,scaleY:r.scaleY||1}),this._transform=a.getLocalTransform(),this},t.prototype.updateCovers=function(r){r=map$1(r,function(c){return merge(clone$4(DEFAULT_BRUSH_OPT),c,!0)});var a="\0-brush-index-",o=this._covers,s=this._covers=[],l=this,u=this._creatingCover;return new DataDiffer$1(o,r,v,d).add(g).update(g).remove(f).execute(),this;function d(c,y){return(c.id!=null?c.id:a+y)+"-"+c.brushType}function v(c,y){return d(c.__brushOption,y)}function g(c,y){var _=r[c];if(y!=null&&o[y]===u)s[c]=o[y];else{var b=s[c]=y!=null?(o[y].__brushOption=_,o[y]):endCreating(l,createCover(l,_));updateCoverAfterCreation(l,b)}}function f(c){o[c]!==u&&l.group.remove(o[c])}},t.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Eventful$1);function createCover(n,t){var r=coverRenderers[t.brushType].createCover(n,t);return r.__brushOption=t,updateZ$1(r,t),n.group.add(r),r}function endCreating(n,t){var r=getCoverRenderer(t);return r.endCreating&&(r.endCreating(n,t),updateZ$1(t,t.__brushOption)),t}function updateCoverShape(n,t){var r=t.__brushOption;getCoverRenderer(t).updateCoverShape(n,t,r.range,r)}function updateZ$1(n,t){var r=t.z;r==null&&(r=COVER_Z),n.traverse(function(a){a.z=r,a.z2=r})}function updateCoverAfterCreation(n,t){getCoverRenderer(t).updateCommon(n,t),updateCoverShape(n,t)}function getCoverRenderer(n){return coverRenderers[n.__brushOption.brushType]}function getPanelByPoint(n,t,r){var a=n._panels;if(!a)return BRUSH_PANEL_GLOBAL;var o,s=n._transform;return each$f(a,function(l){l.isTargetByCursor(t,r,s)&&(o=l)}),o}function getPanelByCover(n,t){var r=n._panels;if(!r)return BRUSH_PANEL_GLOBAL;var a=t.__brushOption.panelId;return a!=null?r[a]:BRUSH_PANEL_GLOBAL}function clearCovers(n){var t=n._covers,r=t.length;return each$f(t,function(a){n.group.remove(a)},n),t.length=0,!!r}function trigger(n,t){var r=map$1(n._covers,function(a){var o=a.__brushOption,s=clone$4(o.range);return{brushType:o.brushType,panelId:o.panelId,range:s}});n.trigger("brush",{areas:r,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function shouldShowCover(n){var t=n._track;if(!t.length)return!1;var r=t[t.length-1],a=t[0],o=r[0]-a[0],s=r[1]-a[1],l=mathPow(o*o+s*s,.5);return l>UNSELECT_THRESHOLD}function getTrackEnds(n){var t=n.length-1;return t<0&&(t=0),[n[0],n[t]]}function createBaseRectCover(n,t,r,a){var o=new Group$4;return o.add(new Rect$3({name:"main",style:makeStyle(r),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,n,t,o,["n","s","w","e"]),ondragend:curry$1(trigger,t,{isEnd:!0})})),each$f(a,function(s){o.add(new Rect$3({name:s.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,n,t,o,s),ondragend:curry$1(trigger,t,{isEnd:!0})}))}),o}function updateBaseRect(n,t,r,a){var o=a.brushStyle.lineWidth||0,s=mathMax$1(o,MIN_RESIZE_LINE_WIDTH),l=r[0][0],u=r[1][0],d=l-o/2,v=u-o/2,g=r[0][1],f=r[1][1],c=g-s+o/2,y=f-s+o/2,_=g-l,b=f-u,S=_+o,x=b+o;updateRectShape(n,t,"main",l,u,_,b),a.transformable&&(updateRectShape(n,t,"w",d,v,s,x),updateRectShape(n,t,"e",c,v,s,x),updateRectShape(n,t,"n",d,v,S,s),updateRectShape(n,t,"s",d,y,S,s),updateRectShape(n,t,"nw",d,v,s,s),updateRectShape(n,t,"ne",c,v,s,s),updateRectShape(n,t,"sw",d,y,s,s),updateRectShape(n,t,"se",c,y,s,s))}function updateCommon$1(n,t){var r=t.__brushOption,a=r.transformable,o=t.childAt(0);o.useStyle(makeStyle(r)),o.attr({silent:!a,cursor:a?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(s){var l=t.childOfName(s.join("")),u=s.length===1?getGlobalDirection1(n,s[0]):getGlobalDirection2(n,s);l&&l.attr({silent:!a,invisible:!a,cursor:a?CURSOR_MAP[u]+"-resize":null})})}function updateRectShape(n,t,r,a,o,s,l){var u=t.childOfName(r);u&&u.setShape(pointsToRect(clipByPanel(n,t,[[a,o],[a+s,o+l]])))}function makeStyle(n){return defaults({strokeNoScale:!0},n.brushStyle)}function formatRectRange(n,t,r,a){var o=[mathMin$1(n,r),mathMin$1(t,a)],s=[mathMax$1(n,r),mathMax$1(t,a)];return[[o[0],s[0]],[o[1],s[1]]]}function getTransform(n){return getTransform$1(n.group)}function getGlobalDirection1(n,t){var r={w:"left",e:"right",n:"top",s:"bottom"},a={left:"w",right:"e",top:"n",bottom:"s"},o=transformDirection(r[t],getTransform(n));return a[o]}function getGlobalDirection2(n,t){var r=[getGlobalDirection1(n,t[0]),getGlobalDirection1(n,t[1])];return(r[0]==="e"||r[0]==="w")&&r.reverse(),r.join("")}function driftRect(n,t,r,a,o,s){var l=r.__brushOption,u=n.toRectRange(l.range),d=toLocalDelta(t,o,s);each$f(a,function(v){var g=DIRECTION_MAP[v];u[g[0]][g[1]]+=d[g[0]]}),l.range=n.fromRectRange(formatRectRange(u[0][0],u[1][0],u[0][1],u[1][1])),updateCoverAfterCreation(t,r),trigger(t,{isEnd:!1})}function driftPolygon(n,t,r,a){var o=t.__brushOption.range,s=toLocalDelta(n,r,a);each$f(o,function(l){l[0]+=s[0],l[1]+=s[1]}),updateCoverAfterCreation(n,t),trigger(n,{isEnd:!1})}function toLocalDelta(n,t,r){var a=n.group,o=a.transformCoordToLocal(t,r),s=a.transformCoordToLocal(0,0);return[o[0]-s[0],o[1]-s[1]]}function clipByPanel(n,t,r){var a=getPanelByCover(n,t);return a&&a!==BRUSH_PANEL_GLOBAL?a.clipPath(r,n._transform):clone$4(r)}function pointsToRect(n){var t=mathMin$1(n[0][0],n[1][0]),r=mathMin$1(n[0][1],n[1][1]),a=mathMax$1(n[0][0],n[1][0]),o=mathMax$1(n[0][1],n[1][1]);return{x:t,y:r,width:a-t,height:o-r}}function resetCursor(n,t,r){if(!(!n._brushType||isOutsideZrArea(n,t.offsetX,t.offsetY))){var a=n._zr,o=n._covers,s=getPanelByPoint(n,t,r);if(!n._dragging)for(var l=0;l<o.length;l++){var u=o[l].__brushOption;if(s&&(s===BRUSH_PANEL_GLOBAL||u.panelId===s.panelId)&&coverRenderers[u.brushType].contain(o[l],r[0],r[1]))return}s&&a.setCursorStyle("crosshair")}}function preventDefault(n){var t=n.event;t.preventDefault&&t.preventDefault()}function mainShapeContain(n,t,r){return n.childOfName("main").contain(t,r)}function updateCoverByMouse(n,t,r,a){var o=n._creatingCover,s=n._creatingPanel,l=n._brushOption,u;if(n._track.push(r.slice()),shouldShowCover(n)||o){if(s&&!o){l.brushMode==="single"&&clearCovers(n);var d=clone$4(l);d.brushType=determineBrushType(d.brushType,s),d.panelId=s===BRUSH_PANEL_GLOBAL?null:s.panelId,o=n._creatingCover=createCover(n,d),n._covers.push(o)}if(o){var v=coverRenderers[determineBrushType(n._brushType,s)],g=o.__brushOption;g.range=v.getCreatingRange(clipByPanel(n,o,n._track)),a&&(endCreating(n,o),v.updateCommon(n,o)),updateCoverShape(n,o),u={isEnd:a}}}else a&&l.brushMode==="single"&&l.removeOnClick&&getPanelByPoint(n,t,r)&&clearCovers(n)&&(u={isEnd:a,removeOnClick:!0});return u}function determineBrushType(n,t){return n==="auto"?t.defaultBrushType:n}var pointerHandlers={mousedown:function(n){if(this._dragging)handleDragEnd(this,n);else if(!n.target||!n.target.draggable){preventDefault(n);var t=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var r=this._creatingPanel=getPanelByPoint(this,n,t);r&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(n){var t=n.offsetX,r=n.offsetY,a=this.group.transformCoordToLocal(t,r);if(resetCursor(this,n,a),this._dragging){preventDefault(n);var o=updateCoverByMouse(this,n,a,!1);o&&trigger(this,o)}},mouseup:function(n){handleDragEnd(this,n)}};function handleDragEnd(n,t){if(n._dragging){preventDefault(t);var r=t.offsetX,a=t.offsetY,o=n.group.transformCoordToLocal(r,a),s=updateCoverByMouse(n,t,o,!0);n._dragging=!1,n._track=[],n._creatingCover=null,s&&trigger(n,s)}}function isOutsideZrArea(n,t,r){var a=n._zr;return t<0||t>a.getWidth()||r<0||r>a.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(n,t){function r(a){return a}return createBaseRectCover({toRectRange:r,fromRectRange:r},n,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var t=getTrackEnds(n);return formatRectRange(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(n,t,r,a){updateBaseRect(n,t,r,a)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(n,t){var r=new Group$4;return r.add(new Polyline$3({name:"main",style:makeStyle(t),silent:!0})),r},getCreatingRange:function(n){return n},endCreating:function(n,t){t.remove(t.childAt(0)),t.add(new Polygon$1({name:"main",draggable:!0,drift:curry$1(driftPolygon,n,t),ondragend:curry$1(trigger,n,{isEnd:!0})}))},updateCoverShape:function(n,t,r,a){t.childAt(0).setShape({points:clipByPanel(n,t,r)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(n){return{createCover:function(t,r){return createBaseRectCover({toRectRange:function(a){var o=[a,[0,100]];return n&&o.reverse(),o},fromRectRange:function(a){return a[n]}},t,r,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(t){var r=getTrackEnds(t),a=mathMin$1(r[0][n],r[1][n]),o=mathMax$1(r[0][n],r[1][n]);return[a,o]},updateCoverShape:function(t,r,a,o){var s,l=getPanelByCover(t,r);if(l!==BRUSH_PANEL_GLOBAL&&l.getLinearBrushOtherExtent)s=l.getLinearBrushOtherExtent(n);else{var u=t._zr;s=[0,[u.getWidth(),u.getHeight()][1-n]]}var d=[a,s];n&&d.reverse(),updateBaseRect(t,r,d,o)},updateCommon:updateCommon$1,contain:mainShapeContain}}const BrushController$1=BrushController;function makeRectPanelClipPath(n){return n=normalizeRect(n),function(t){return clipPointsByRect(t,n)}}function makeLinearBrushOtherExtent(n,t){return n=normalizeRect(n),function(r){var a=t??r,o=a?n.width:n.height,s=a?n.x:n.y;return[s,s+(o||0)]}}function makeRectIsTargetByCursor(n,t,r){var a=normalizeRect(n);return function(o,s){return a.contain(s[0],s[1])&&!onIrrelevantElement(o,t,r)}}function normalizeRect(n){return BoundingRect$1.create(n)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,a){n.prototype.init.apply(this,arguments),(this._brushController=new BrushController$1(a.getZr())).on("brush",bind$1(this._onBrush,this))},t.prototype.render=function(r,a,o,s){if(!fromAxisAreaSelect(r,a,s)){this.axisModel=r,this.api=o,this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!r.get("show")){var u=getCoordSysModel(r,a),d=u.coordinateSystem,v=r.getAreaSelectStyle(),g=v.width,f=r.axis.dim,c=d.getAxisLayout(f),y=extend({strokeContainThreshold:g},c),_=new AxisBuilder$1(r,y);each$f(elementList$1,_.add,_),this._axisGroup.add(_.getGroup()),this._refreshBrushController(y,v,r,u,g,o),groupTransition(l,this._axisGroup,r)}}},t.prototype._refreshBrushController=function(r,a,o,s,l,u){var d=o.axis.getExtent(),v=d[1]-d[0],g=Math.min(30,Math.abs(v)*.1),f=BoundingRect$1.create({x:d[0],y:-l/2,width:v,height:l});f.x-=g,f.width+=2*g,this._brushController.mount({enableGlobalPan:!0,rotation:r.rotation,x:r.position[0],y:r.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(f),isTargetByCursor:makeRectIsTargetByCursor(f,u,s),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(f,0)}]).enableBrush({brushType:"lineX",brushStyle:a,removeOnClick:!0}).updateCovers(getCoverInfoList(o))},t.prototype._onBrush=function(r){var a=r.areas,o=this.axisModel,s=o.axis,l=map$1(a,function(u){return[s.coordToData(u.range[0],!0),s.coordToData(u.range[1],!0)]});(!o.option.realtime===r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:o.id,intervals:l})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(ComponentView$1);function fromAxisAreaSelect(n,t,r){return r&&r.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:r})[0]===n}function getCoverInfoList(n){var t=n.axis;return map$1(n.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(r[0],!0),t.dataToCoord(r[1],!0)]}})}function getCoordSysModel(n,t){return t.getComponent("parallel",n.get("parallelIndex"))}const ParallelAxisView$1=ParallelAxisView;var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(n){n.registerAction(actionInfo,function(t,r){r.eachComponent({mainType:"parallelAxis",query:t},function(a){a.axis.model.setActiveIntervals(t.intervals)})}),n.registerAction("parallelAxisExpand",function(t,r){r.eachComponent({mainType:"parallel",query:t},function(a){a.setAxisExpand(t)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(n){n.registerComponentView(ParallelView$1),n.registerComponentModel(ParallelModel$1),n.registerCoordinateSystem("parallel",parallelCoordSysCreator$1),n.registerPreprocessor(parallelPreprocessor),n.registerComponentModel(ParallelAxisModel$1),n.registerComponentView(ParallelAxisView$1),axisModelCreator(n,"parallel",ParallelAxisModel$1,defaultAxisOption),installParallelActions(n)}function install$B(n){use(install$C),n.registerChartView(ParallelView$3),n.registerSeriesModel(ParallelSeriesModel$1),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,parallelVisual$1)}var SankeyPathShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return n}(),SankeyPath=function(n){__extends$1(t,n);function t(r){return n.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new SankeyPathShape},t.prototype.buildPath=function(r,a){var o=a.extent;r.moveTo(a.x1,a.y1),r.bezierCurveTo(a.cpx1,a.cpy1,a.cpx2,a.cpy2,a.x2,a.y2),a.orient==="vertical"?(r.lineTo(a.x2+o,a.y2),r.bezierCurveTo(a.cpx2+o,a.cpy2,a.cpx1+o,a.cpy1,a.x1+o,a.y1)):(r.lineTo(a.x2,a.y2+o),r.bezierCurveTo(a.cpx2,a.cpy2+o,a.cpx1,a.cpy1+o,a.x1,a.y1+o)),r.closePath()},t.prototype.highlight=function(){enterEmphasis(this)},t.prototype.downplay=function(){leaveEmphasis(this)},t}(Path$1),SankeyView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r._focusAdjacencyDisabled=!1,r}return t.prototype.render=function(r,a,o){var s=this,l=r.getGraph(),u=this.group,d=r.layoutInfo,v=d.width,g=d.height,f=r.getData(),c=r.getData("edge"),y=r.get("orient");this._model=r,u.removeAll(),u.x=d.x,u.y=d.y,l.eachEdge(function(_){var b=new SankeyPath,S=getECData(b);S.dataIndex=_.dataIndex,S.seriesIndex=r.seriesIndex,S.dataType="edge";var x=_.getModel(),w=x.getModel("lineStyle"),T=w.get("curveness"),A=_.node1.getLayout(),E=_.node1.getModel(),$=E.get("localX"),P=E.get("localY"),I=_.node2.getLayout(),C=_.node2.getModel(),M=C.get("localX"),D=C.get("localY"),R=_.getLayout(),N,O,F,L,B,V,H,X;switch(b.shape.extent=Math.max(1,R.dy),b.shape.orient=y,y==="vertical"?(N=($!=null?$*v:A.x)+R.sy,O=(P!=null?P*g:A.y)+A.dy,F=(M!=null?M*v:I.x)+R.ty,L=D!=null?D*g:I.y,B=N,V=O*(1-T)+L*T,H=F,X=O*T+L*(1-T)):(N=($!=null?$*v:A.x)+A.dx,O=(P!=null?P*g:A.y)+R.sy,F=M!=null?M*v:I.x,L=(D!=null?D*g:I.y)+R.ty,B=N*(1-T)+F*T,V=O,H=N*T+F*(1-T),X=L),b.setShape({x1:N,y1:O,x2:F,y2:L,cpx1:B,cpy1:V,cpx2:H,cpy2:X}),b.useStyle(w.getItemStyle()),b.style.fill){case"source":b.style.fill=_.node1.getVisual("color"),b.style.decal=_.node1.getVisual("style").decal;break;case"target":b.style.fill=_.node2.getVisual("color"),b.style.decal=_.node2.getVisual("style").decal;break;case"gradient":var U=_.node1.getVisual("color"),te=_.node2.getVisual("color");isString(U)&&isString(te)&&(b.style.fill=new LinearGradient$1(0,0,+(y==="horizontal"),+(y==="vertical"),[{color:U,offset:0},{color:te,offset:1}]))}setLabelStyle(b,getLabelStatesModels(x,"edgeLabel"),{labelFetcher:r,labelDataIndex:_.dataIndex,defaultText:""+x.get("value")}),b.setTextConfig({position:"inside"});var ee=x.getModel("emphasis");setStatesStylesFromModel(b,x,"lineStyle",function(ie){return ie.getItemStyle()}),u.add(b),c.setItemGraphicEl(_.dataIndex,b);var q=ee.get("focus");toggleHoverEmphasis(b,q==="adjacency"?_.getAdjacentDataIndices():q,ee.get("blurScope"),ee.get("disabled")),getECData(b).dataType="edge"}),l.eachNode(function(_){var b=_.getLayout(),S=_.getModel(),x=S.get("localX"),w=S.get("localY"),T=S.getModel("emphasis"),A=new Rect$3({shape:{x:x!=null?x*v:b.x,y:w!=null?w*g:b.y,width:b.dx,height:b.dy},style:S.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(A,getLabelStatesModels(S),{labelFetcher:r,labelDataIndex:_.dataIndex,defaultText:_.id}),A.disableLabelAnimation=!0,A.setStyle("fill",_.getVisual("color")),A.setStyle("decal",_.getVisual("style").decal),setStatesStylesFromModel(A,S),u.add(A),f.setItemGraphicEl(_.dataIndex,A),getECData(A).dataType="node";var E=T.get("focus");toggleHoverEmphasis(A,E==="adjacency"?_.getAdjacentDataIndices():E,T.get("blurScope"),T.get("disabled"))}),f.eachItemGraphicEl(function(_,b){var S=f.getItemModel(b);S.get("draggable")&&(_.drift=function(x,w){s._focusAdjacencyDisabled=!0,this.shape.x+=x,this.shape.y+=w,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:r.id,dataIndex:f.getRawIndex(b),localX:this.shape.x/v,localY:this.shape.y/g})},_.ondragend=function(){s._focusAdjacencyDisabled=!1},_.draggable=!0,_.cursor="move")}),!this._data&&r.isAnimationEnabled()&&u.setClipPath(createGridClipShape$1(u.getBoundingRect(),r,function(){u.removeClipPath()})),this._data=r.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(ChartView$1);function createGridClipShape$1(n,t,r){var a=new Rect$3({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return initProps(a,{shape:{width:n.width+20}},t,r),a}const SankeyView$1=SankeyView;var SankeySeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,a){var o=r.edges||r.links,s=r.data||r.nodes,l=r.levels;this.levelModels=[];for(var u=this.levelModels,d=0;d<l.length;d++)l[d].depth!=null&&l[d].depth>=0&&(u[l[d].depth]=new Model$1(l[d],this,a));if(s&&o){var v=createGraphFromNodeEdge(s,o,this,!0,g);return v.data}function g(f,c){f.wrapMethod("getItemModel",function(y,_){var b=y.parentModel,S=b.getData().getItemLayout(_);if(S){var x=S.depth,w=b.levelModels[x];w&&(y.parentModel=w)}return y}),c.wrapMethod("getItemModel",function(y,_){var b=y.parentModel,S=b.getGraph().getEdgeByIndex(_),x=S.node1.getLayout();if(x){var w=x.depth,T=b.levelModels[w];T&&(y.parentModel=T)}return y})}},t.prototype.setNodePosition=function(r,a){var o=this.option.data||this.option.nodes,s=o[r];s.localX=a[0],s.localY=a[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(r,a,o){function s(y){return isNaN(y)||y==null}if(o==="edge"){var l=this.getDataParams(r,o),u=l.data,d=l.value,v=u.source+" -- "+u.target;return createTooltipMarkup("nameValue",{name:v,value:d,noValue:s(d)})}else{var g=this.getGraph().getNodeByIndex(r),f=g.getLayout().value,c=this.getDataParams(r,o).data.name;return createTooltipMarkup("nameValue",{name:c!=null?c+"":null,value:f,noValue:s(f)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(r,a){var o=n.prototype.getDataParams.call(this,r,a);if(o.value==null&&a==="node"){var s=this.getGraph().getNodeByIndex(r),l=s.getLayout().value;o.value=l}return o},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(SeriesModel$1);const SankeySeriesModel$1=SankeySeriesModel;function sankeyLayout(n,t){n.eachSeriesByType("sankey",function(r){var a=r.get("nodeWidth"),o=r.get("nodeGap"),s=getViewRect$1(r,t);r.layoutInfo=s;var l=s.width,u=s.height,d=r.getGraph(),v=d.nodes,g=d.edges;computeNodeValues(v);var f=filter(v,function(b){return b.getLayout().value===0}),c=f.length!==0?0:r.get("layoutIterations"),y=r.get("orient"),_=r.get("nodeAlign");layoutSankey(v,g,a,o,l,u,c,y,_)})}function getViewRect$1(n,t){return getLayoutRect(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function layoutSankey(n,t,r,a,o,s,l,u,d){computeNodeBreadths(n,t,r,o,s,u,d),computeNodeDepths(n,t,s,o,a,l,u),computeEdgeDepths(n,u)}function computeNodeValues(n){each$f(n,function(t){var r=sum(t.outEdges,getEdgeValue),a=sum(t.inEdges,getEdgeValue),o=t.getValue()||0,s=Math.max(r,a,o);t.setLayout({value:s},!0)})}function computeNodeBreadths(n,t,r,a,o,s,l){for(var u=[],d=[],v=[],g=[],f=0,c=0;c<t.length;c++)u[c]=1;for(var c=0;c<n.length;c++)d[c]=n[c].inEdges.length,d[c]===0&&v.push(n[c]);for(var y=-1;v.length;){for(var _=0;_<v.length;_++){var b=v[_],S=b.hostGraph.data.getRawDataItem(b.dataIndex),x=S.depth!=null&&S.depth>=0;x&&S.depth>y&&(y=S.depth),b.setLayout({depth:x?S.depth:f},!0),s==="vertical"?b.setLayout({dy:r},!0):b.setLayout({dx:r},!0);for(var w=0;w<b.outEdges.length;w++){var T=b.outEdges[w],A=t.indexOf(T);u[A]=0;var E=T.node2,$=n.indexOf(E);--d[$]===0&&g.indexOf(E)<0&&g.push(E)}}++f,v=g,g=[]}for(var c=0;c<u.length;c++)if(u[c]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var P=y>f-1?y:f-1;l&&l!=="left"&&adjustNodeWithNodeAlign(n,l,s,P);var I=s==="vertical"?(o-r)/P:(a-r)/P;scaleNodeBreadths(n,I,s)}function isNodeDepth(n){var t=n.hostGraph.data.getRawDataItem(n.dataIndex);return t.depth!=null&&t.depth>=0}function adjustNodeWithNodeAlign(n,t,r,a){if(t==="right"){for(var o=[],s=n,l=0;s.length;){for(var u=0;u<s.length;u++){var d=s[u];d.setLayout({skNodeHeight:l},!0);for(var v=0;v<d.inEdges.length;v++){var g=d.inEdges[v];o.indexOf(g.node1)<0&&o.push(g.node1)}}s=o,o=[],++l}each$f(n,function(f){isNodeDepth(f)||f.setLayout({depth:Math.max(0,a-f.getLayout().skNodeHeight)},!0)})}else t==="justify"&&moveSinksRight(n,a)}function moveSinksRight(n,t){each$f(n,function(r){!isNodeDepth(r)&&!r.outEdges.length&&r.setLayout({depth:t},!0)})}function scaleNodeBreadths(n,t,r){each$f(n,function(a){var o=a.getLayout().depth*t;r==="vertical"?a.setLayout({y:o},!0):a.setLayout({x:o},!0)})}function computeNodeDepths(n,t,r,a,o,s,l){var u=prepareNodesByBreadth(n,l);initializeNodeDepth(u,t,r,a,o,l),resolveCollisions(u,o,r,a,l);for(var d=1;s>0;s--)d*=.99,relaxRightToLeft(u,d,l),resolveCollisions(u,o,r,a,l),relaxLeftToRight(u,d,l),resolveCollisions(u,o,r,a,l)}function prepareNodesByBreadth(n,t){var r=[],a=t==="vertical"?"y":"x",o=groupData(n,function(s){return s.getLayout()[a]});return o.keys.sort(function(s,l){return s-l}),each$f(o.keys,function(s){r.push(o.buckets.get(s))}),r}function initializeNodeDepth(n,t,r,a,o,s){var l=1/0;each$f(n,function(u){var d=u.length,v=0;each$f(u,function(f){v+=f.getLayout().value});var g=s==="vertical"?(a-(d-1)*o)/v:(r-(d-1)*o)/v;g<l&&(l=g)}),each$f(n,function(u){each$f(u,function(d,v){var g=d.getLayout().value*l;s==="vertical"?(d.setLayout({x:v},!0),d.setLayout({dx:g},!0)):(d.setLayout({y:v},!0),d.setLayout({dy:g},!0))})}),each$f(t,function(u){var d=+u.getValue()*l;u.setLayout({dy:d},!0)})}function resolveCollisions(n,t,r,a,o){var s=o==="vertical"?"x":"y";each$f(n,function(l){l.sort(function(b,S){return b.getLayout()[s]-S.getLayout()[s]});for(var u,d,v,g=0,f=l.length,c=o==="vertical"?"dx":"dy",y=0;y<f;y++)d=l[y],v=g-d.getLayout()[s],v>0&&(u=d.getLayout()[s]+v,o==="vertical"?d.setLayout({x:u},!0):d.setLayout({y:u},!0)),g=d.getLayout()[s]+d.getLayout()[c]+t;var _=o==="vertical"?a:r;if(v=g-t-_,v>0){u=d.getLayout()[s]-v,o==="vertical"?d.setLayout({x:u},!0):d.setLayout({y:u},!0),g=u;for(var y=f-2;y>=0;--y)d=l[y],v=d.getLayout()[s]+d.getLayout()[c]+t-g,v>0&&(u=d.getLayout()[s]-v,o==="vertical"?d.setLayout({x:u},!0):d.setLayout({y:u},!0)),g=d.getLayout()[s]}})}function relaxRightToLeft(n,t,r){each$f(n.slice().reverse(),function(a){each$f(a,function(o){if(o.outEdges.length){var s=sum(o.outEdges,weightedTarget,r)/sum(o.outEdges,getEdgeValue);if(isNaN(s)){var l=o.outEdges.length;s=l?sum(o.outEdges,centerTarget,r)/l:0}if(r==="vertical"){var u=o.getLayout().x+(s-center(o,r))*t;o.setLayout({x:u},!0)}else{var d=o.getLayout().y+(s-center(o,r))*t;o.setLayout({y:d},!0)}}})})}function weightedTarget(n,t){return center(n.node2,t)*n.getValue()}function centerTarget(n,t){return center(n.node2,t)}function weightedSource(n,t){return center(n.node1,t)*n.getValue()}function centerSource(n,t){return center(n.node1,t)}function center(n,t){return t==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function getEdgeValue(n){return n.getValue()}function sum(n,t,r){for(var a=0,o=n.length,s=-1;++s<o;){var l=+t(n[s],r);isNaN(l)||(a+=l)}return a}function relaxLeftToRight(n,t,r){each$f(n,function(a){each$f(a,function(o){if(o.inEdges.length){var s=sum(o.inEdges,weightedSource,r)/sum(o.inEdges,getEdgeValue);if(isNaN(s)){var l=o.inEdges.length;s=l?sum(o.inEdges,centerSource,r)/l:0}if(r==="vertical"){var u=o.getLayout().x+(s-center(o,r))*t;o.setLayout({x:u},!0)}else{var d=o.getLayout().y+(s-center(o,r))*t;o.setLayout({y:d},!0)}}})})}function computeEdgeDepths(n,t){var r=t==="vertical"?"x":"y";each$f(n,function(a){a.outEdges.sort(function(o,s){return o.node2.getLayout()[r]-s.node2.getLayout()[r]}),a.inEdges.sort(function(o,s){return o.node1.getLayout()[r]-s.node1.getLayout()[r]})}),each$f(n,function(a){var o=0,s=0;each$f(a.outEdges,function(l){l.setLayout({sy:o},!0),o+=l.getLayout().dy}),each$f(a.inEdges,function(l){l.setLayout({ty:s},!0),s+=l.getLayout().dy})})}function sankeyVisual(n){n.eachSeriesByType("sankey",function(t){var r=t.getGraph(),a=r.nodes,o=r.edges;if(a.length){var s=1/0,l=-1/0;each$f(a,function(u){var d=u.getLayout().value;d<s&&(s=d),d>l&&(l=d)}),each$f(a,function(u){var d=new VisualMapping$1({type:"color",mappingMethod:"linear",dataExtent:[s,l],visual:t.get("color")}),v=d.mapValueToVisual(u.getLayout().value),g=u.getModel().get(["itemStyle","color"]);g!=null?(u.setVisual("color",g),u.setVisual("style",{fill:g})):(u.setVisual("color",v),u.setVisual("style",{fill:v}))})}o.length&&each$f(o,function(u){var d=u.getModel().get("lineStyle");u.setVisual("style",d)})})}function install$A(n){n.registerChartView(SankeyView$1),n.registerSeriesModel(SankeySeriesModel$1),n.registerLayout(sankeyLayout),n.registerVisual(sankeyVisual),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"sankey",query:t},function(a){a.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var WhiskerBoxCommonMixin=function(){function n(){}return n.prototype.getInitialData=function(t,r){var a,o=r.getComponent("xAxis",this.get("xAxisIndex")),s=r.getComponent("yAxis",this.get("yAxisIndex")),l=o.get("type"),u=s.get("type"),d;l==="category"?(t.layout="horizontal",a=o.getOrdinalMeta(),d=!0):u==="category"?(t.layout="vertical",a=s.getOrdinalMeta(),d=!0):t.layout=t.layout||"horizontal";var v=["x","y"],g=t.layout==="horizontal"?0:1,f=this._baseAxisDim=v[g],c=v[1-g],y=[o,s],_=y[g].get("type"),b=y[1-g].get("type"),S=t.data;if(S&&d){var x=[];each$f(S,function(A,E){var $;isArray$1(A)?($=A.slice(),A.unshift(E)):isArray$1(A.value)?($=extend({},A),$.value=$.value.slice(),A.value.unshift(E)):$=A,x.push($)}),t.data=x}var w=this.defaultValueDimensions,T=[{name:f,type:getDimensionTypeByAxis(_),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:c,type:getDimensionTypeByAxis(b),dimsDef:w.slice()}];return createSeriesDataSimply(this,{coordDimensions:T,dimensionsCount:w.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,T,this)})},n.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},n}(),BoxplotSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(SeriesModel$1);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);const BoxplotSeriesModel$1=BoxplotSeriesModel;var BoxplotView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){var s=r.getData(),l=this.group,u=this._data;this._data||l.removeAll();var d=r.get("layout")==="horizontal"?1:0;s.diff(u).add(function(v){if(s.hasValue(v)){var g=s.getItemLayout(v),f=createNormalBox$1(g,s,v,d,!0);s.setItemGraphicEl(v,f),l.add(f)}}).update(function(v,g){var f=u.getItemGraphicEl(g);if(!s.hasValue(v)){l.remove(f);return}var c=s.getItemLayout(v);f?(saveOldStyle(f),updateNormalBoxData(c,f,s,v)):f=createNormalBox$1(c,s,v,d),l.add(f),s.setItemGraphicEl(v,f)}).remove(function(v){var g=u.getItemGraphicEl(v);g&&l.remove(g)}).execute(),this._data=s},t.prototype.remove=function(r){var a=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(s){s&&a.remove(s)})},t.type="boxplot",t}(ChartView$1),BoxPathShape=function(){function n(){}return n}(),BoxPath=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="boxplotBoxPath",a}return t.prototype.getDefaultShape=function(){return new BoxPathShape},t.prototype.buildPath=function(r,a){var o=a.points,s=0;for(r.moveTo(o[s][0],o[s][1]),s++;s<4;s++)r.lineTo(o[s][0],o[s][1]);for(r.closePath();s<o.length;s++)r.moveTo(o[s][0],o[s][1]),s++,r.lineTo(o[s][0],o[s][1])},t}(Path$1);function createNormalBox$1(n,t,r,a,o){var s=n.ends,l=new BoxPath({shape:{points:o?transInit$1(s,a,n):s}});return updateNormalBoxData(n,l,t,r,o),l}function updateNormalBoxData(n,t,r,a,o){var s=r.hostModel,l=graphic[o?"initProps":"updateProps"];l(t,{shape:{points:n.ends}},s,a),t.useStyle(r.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.z2=100;var u=r.getItemModel(a),d=u.getModel("emphasis");setStatesStylesFromModel(t,u),toggleHoverEmphasis(t,d.get("focus"),d.get("blurScope"),d.get("disabled"))}function transInit$1(n,t,r){return map$1(n,function(a){return a=a.slice(),a[t]=r.initBaseline,a})}const BoxplotView$1=BoxplotView;var each$9=each$f;function boxplotLayout(n){var t=groupSeriesByAxis(n);each$9(t,function(r){var a=r.seriesModels;a.length&&(calculateBase(r),each$9(a,function(o,s){layoutSingleSeries(o,r.boxOffsetList[s],r.boxWidthList[s])}))})}function groupSeriesByAxis(n){var t=[],r=[];return n.eachSeriesByType("boxplot",function(a){var o=a.getBaseAxis(),s=indexOf(r,o);s<0&&(s=r.length,r[s]=o,t[s]={axis:o,seriesModels:[]}),t[s].seriesModels.push(a)}),t}function calculateBase(n){var t=n.axis,r=n.seriesModels,a=r.length,o=n.boxWidthList=[],s=n.boxOffsetList=[],l=[],u;if(t.type==="category")u=t.getBandWidth();else{var d=0;each$9(r,function(_){d=Math.max(d,_.getData().count())});var v=t.getExtent();u=Math.abs(v[1]-v[0])/d}each$9(r,function(_){var b=_.get("boxWidth");isArray$1(b)||(b=[b,b]),l.push([parsePercent(b[0],u)||0,parsePercent(b[1],u)||0])});var g=u*.8-2,f=g/a*.3,c=(g-f*(a-1))/a,y=c/2-g/2;each$9(r,function(_,b){s.push(y),y+=f+c,o.push(Math.min(Math.max(c,l[b][0]),l[b][1]))})}function layoutSingleSeries(n,t,r){var a=n.coordinateSystem,o=n.getData(),s=r/2,l=n.get("layout")==="horizontal"?0:1,u=1-l,d=["x","y"],v=o.mapDimension(d[l]),g=o.mapDimensionsAll(d[u]);if(v==null||g.length<5)return;for(var f=0;f<o.count();f++){var c=o.get(v,f),y=T(c,g[2],f),_=T(c,g[0],f),b=T(c,g[1],f),S=T(c,g[3],f),x=T(c,g[4],f),w=[];A(w,b,!1),A(w,S,!0),w.push(_,b,x,S),E(w,_),E(w,x),E(w,y),o.setItemLayout(f,{initBaseline:y[u],ends:w})}function T($,P,I){var C=o.get(P,I),M=[];M[l]=$,M[u]=C;var D;return isNaN($)||isNaN(C)?D=[NaN,NaN]:(D=a.dataToPoint(M),D[l]+=t),D}function A($,P,I){var C=P.slice(),M=P.slice();C[l]+=s,M[l]-=s,I?$.push(C,M):$.push(M,C)}function E($,P){var I=P.slice(),C=P.slice();I[l]-=s,C[l]+=s,$.push(I,C)}}function prepareBoxplotData(n,t){t=t||{};for(var r=[],a=[],o=t.boundIQR,s=o==="none"||o===0,l=0;l<n.length;l++){var u=asc$2(n[l].slice()),d=quantile(u,.25),v=quantile(u,.5),g=quantile(u,.75),f=u[0],c=u[u.length-1],y=(o??1.5)*(g-d),_=s?f:Math.max(f,d-y),b=s?c:Math.min(c,g+y),S=t.itemNameFormatter,x=isFunction(S)?S({value:l}):isString(S)?S.replace("{value}",l+""):l+"";r.push([x,_,d,v,g,b]);for(var w=0;w<u.length;w++){var T=u[w];if(T<_||T>b){var A=[x,T];a.push(A)}}}return{boxData:r,outliers:a}}var boxplotTransform={type:"echarts:boxplot",transform:function(t){var r=t.upstream;if(r.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var a="";throwError(a)}var o=prepareBoxplotData(r.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:o.boxData},{data:o.outliers}]}};function install$z(n){n.registerSeriesModel(BoxplotSeriesModel$1),n.registerChartView(BoxplotView$1),n.registerLayout(boxplotLayout),n.registerTransform(boxplotTransform)}var SKIP_PROPS=["color","borderColor"],CandlestickView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(r),this._isLargeDraw?this._renderLarge(r):this._renderNormal(r)},t.prototype.incrementalPrepareRender=function(r,a,o){this._clear(),this._updateDrawMode(r)},t.prototype.incrementalRender=function(r,a,o,s){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(r,a):this._incrementalRenderNormal(r,a)},t.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var a=r.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},t.prototype._renderNormal=function(r){var a=r.getData(),o=this._data,s=this.group,l=a.getLayout("isSimpleBox"),u=r.get("clip",!0),d=r.coordinateSystem,v=d.getArea&&d.getArea();this._data||s.removeAll(),a.diff(o).add(function(g){if(a.hasValue(g)){var f=a.getItemLayout(g);if(u&&isNormalBoxClipped(v,f))return;var c=createNormalBox(f,g,!0);initProps(c,{shape:{points:f.ends}},r,g),setBoxCommon(c,a,g,l),s.add(c),a.setItemGraphicEl(g,c)}}).update(function(g,f){var c=o.getItemGraphicEl(f);if(!a.hasValue(g)){s.remove(c);return}var y=a.getItemLayout(g);if(u&&isNormalBoxClipped(v,y)){s.remove(c);return}c?(updateProps$1(c,{shape:{points:y.ends}},r,g),saveOldStyle(c)):c=createNormalBox(y),setBoxCommon(c,a,g,l),s.add(c),a.setItemGraphicEl(g,c)}).remove(function(g){var f=o.getItemGraphicEl(g);f&&s.remove(f)}).execute(),this._data=a},t.prototype._renderLarge=function(r){this._clear(),createLarge(r,this.group);var a=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;a?this.group.setClipPath(a):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(r,a){for(var o=a.getData(),s=o.getLayout("isSimpleBox"),l;(l=r.next())!=null;){var u=o.getItemLayout(l),d=createNormalBox(u);setBoxCommon(d,o,l,s),d.incremental=!0,this.group.add(d),this._progressiveEls.push(d)}},t.prototype._incrementalRenderLarge=function(r,a){createLarge(a,this.group,this._progressiveEls,!0)},t.prototype.remove=function(r){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(ChartView$1),NormalBoxPathShape=function(){function n(){}return n}(),NormalBoxPath=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="normalCandlestickBox",a}return t.prototype.getDefaultShape=function(){return new NormalBoxPathShape},t.prototype.buildPath=function(r,a){var o=a.points;this.__simpleBox?(r.moveTo(o[4][0],o[4][1]),r.lineTo(o[6][0],o[6][1])):(r.moveTo(o[0][0],o[0][1]),r.lineTo(o[1][0],o[1][1]),r.lineTo(o[2][0],o[2][1]),r.lineTo(o[3][0],o[3][1]),r.closePath(),r.moveTo(o[4][0],o[4][1]),r.lineTo(o[5][0],o[5][1]),r.moveTo(o[6][0],o[6][1]),r.lineTo(o[7][0],o[7][1]))},t}(Path$1);function createNormalBox(n,t,r){var a=n.ends;return new NormalBoxPath({shape:{points:r?transInit(a,n):a},z2:100})}function isNormalBoxClipped(n,t){for(var r=!0,a=0;a<t.ends.length;a++)if(n.contain(t.ends[a][0],t.ends[a][1])){r=!1;break}return r}function setBoxCommon(n,t,r,a){var o=t.getItemModel(r);n.useStyle(t.getItemVisual(r,"style")),n.style.strokeNoScale=!0,n.__simpleBox=a,setStatesStylesFromModel(n,o)}function transInit(n,t){return map$1(n,function(r){return r=r.slice(),r[1]=t.initBaseline,r})}var LargeBoxPathShape=function(){function n(){}return n}(),LargeBoxPath=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a.type="largeCandlestickBox",a}return t.prototype.getDefaultShape=function(){return new LargeBoxPathShape},t.prototype.buildPath=function(r,a){for(var o=a.points,s=0;s<o.length;)if(this.__sign===o[s++]){var l=o[s++];r.moveTo(l,o[s++]),r.lineTo(l,o[s++])}else s+=3},t}(Path$1);function createLarge(n,t,r,a){var o=n.getData(),s=o.getLayout("largePoints"),l=new LargeBoxPath({shape:{points:s},__sign:1,ignoreCoarsePointer:!0});t.add(l);var u=new LargeBoxPath({shape:{points:s},__sign:-1,ignoreCoarsePointer:!0});t.add(u);var d=new LargeBoxPath({shape:{points:s},__sign:0,ignoreCoarsePointer:!0});t.add(d),setLargeStyle(1,l,n),setLargeStyle(-1,u,n),setLargeStyle(0,d,n),a&&(l.incremental=!0,u.incremental=!0),r&&r.push(l,u)}function setLargeStyle(n,t,r,a){var o=r.get(["itemStyle",n>0?"borderColor":"borderColor0"])||r.get(["itemStyle",n>0?"color":"color0"]);n===0&&(o=r.get(["itemStyle","borderColorDoji"]));var s=r.getModel("itemStyle").getItemStyle(SKIP_PROPS);t.useStyle(s),t.style.fill=null,t.style.stroke=o}const CandlestickView$1=CandlestickView;var CandlestickSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(r,a,o){var s=a.getItemLayout(r);return s&&o.rect(s.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(SeriesModel$1);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);const CandlestickSeriesModel$1=CandlestickSeriesModel;function candlestickPreprocessor(n){!n||!isArray$1(n.series)||each$f(n.series,function(t){isObject$3(t)&&t.type==="k"&&(t.type="candlestick")})}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"],candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(n,t){function r(s,l){return l.get(s>0?positiveColorQuery:negativeColorQuery)}function a(s,l){return l.get(s===0?dojiBorderColorQuery:s>0?positiveBorderColorQuery:negativeBorderColorQuery)}if(!t.isSeriesFiltered(n)){var o=n.pipelineContext.large;return!o&&{progress:function(s,l){for(var u;(u=s.next())!=null;){var d=l.getItemModel(u),v=l.getItemLayout(u).sign,g=d.getItemStyle();g.fill=r(v,d),g.stroke=a(v,d)||g.fill;var f=l.ensureUniqueItemVisual(u,"style");extend(f,g)}}}}}};const candlestickVisual$1=candlestickVisual;var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(n){var t=n.coordinateSystem,r=n.getData(),a=calculateCandleWidth(n,r),o=0,s=1,l=["x","y"],u=r.getDimensionIndex(r.mapDimension(l[o])),d=map$1(r.mapDimensionsAll(l[s]),r.getDimensionIndex,r),v=d[0],g=d[1],f=d[2],c=d[3];if(r.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),u<0||d.length<4)return;return{progress:n.pipelineContext.large?_:y};function y(b,S){for(var x,w=S.getStore();(x=b.next())!=null;){var T=w.get(u,x),A=w.get(v,x),E=w.get(g,x),$=w.get(f,x),P=w.get(c,x),I=Math.min(A,E),C=Math.max(A,E),M=B(I,T),D=B(C,T),R=B($,T),N=B(P,T),O=[];V(O,D,0),V(O,M,1),O.push(X(N),X(D),X(R),X(M));var F=S.getItemModel(x),L=!!F.get(["itemStyle","borderColorDoji"]);S.setItemLayout(x,{sign:getSign(w,x,A,E,g,L),initBaseline:A>E?D[s]:M[s],ends:O,brushRect:H($,P,T)})}function B(U,te){var ee=[];return ee[o]=te,ee[s]=U,isNaN(te)||isNaN(U)?[NaN,NaN]:t.dataToPoint(ee)}function V(U,te,ee){var q=te.slice(),ie=te.slice();q[o]=subPixelOptimize(q[o]+a/2,1,!1),ie[o]=subPixelOptimize(ie[o]-a/2,1,!0),ee?U.push(q,ie):U.push(ie,q)}function H(U,te,ee){var q=B(U,ee),ie=B(te,ee);return q[o]-=a/2,ie[o]-=a/2,{x:q[0],y:q[1],width:a,height:ie[1]-q[1]}}function X(U){return U[o]=subPixelOptimize(U[o],1),U}}function _(b,S){for(var x=createFloat32Array(b.count*4),w=0,T,A=[],E=[],$,P=S.getStore(),I=!!n.get(["itemStyle","borderColorDoji"]);($=b.next())!=null;){var C=P.get(u,$),M=P.get(v,$),D=P.get(g,$),R=P.get(f,$),N=P.get(c,$);if(isNaN(C)||isNaN(R)||isNaN(N)){x[w++]=NaN,w+=3;continue}x[w++]=getSign(P,$,M,D,g,I),A[o]=C,A[s]=R,T=t.dataToPoint(A,null,E),x[w++]=T?T[0]:NaN,x[w++]=T?T[1]:NaN,A[s]=N,T=t.dataToPoint(A,null,E),x[w++]=T?T[1]:NaN}S.setLayout("largePoints",x)}}};function getSign(n,t,r,a,o,s){var l;return r>a?l=-1:r<a?l=1:l=s?0:t>0?n.get(o,t-1)<=a?1:-1:1,l}function calculateCandleWidth(n,t){var r=n.getBaseAxis(),a,o=r.type==="category"?r.getBandWidth():(a=r.getExtent(),Math.abs(a[1]-a[0])/t.count()),s=parsePercent(retrieve2(n.get("barMaxWidth"),o),o),l=parsePercent(retrieve2(n.get("barMinWidth"),1),o),u=n.get("barWidth");return u!=null?parsePercent(u,o):Math.max(Math.min(o/2,s),l)}const candlestickLayout$1=candlestickLayout;function install$y(n){n.registerChartView(CandlestickView$1),n.registerSeriesModel(CandlestickSeriesModel$1),n.registerPreprocessor(candlestickPreprocessor),n.registerVisual(candlestickVisual$1),n.registerLayout(candlestickLayout$1)}function updateRipplePath(n,t){var r=t.rippleEffectColor||t.color;n.eachChild(function(a){a.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?r:null,fill:t.brushType==="fill"?r:null}})})}var EffectSymbol=function(n){__extends$1(t,n);function t(r,a){var o=n.call(this)||this,s=new SymbolClz(r,a),l=new Group$4;return o.add(s),o.add(l),o.updateData(r,a),o}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(r){for(var a=r.symbolType,o=r.color,s=r.rippleNumber,l=this.childAt(1),u=0;u<s;u++){var d=createSymbol$1(a,-1,-1,2,2,o);d.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var v=-u/s*r.period+r.effectOffset;d.animate("",!0).when(r.period,{scaleX:r.rippleScale/2,scaleY:r.rippleScale/2}).delay(v).start(),d.animateStyle(!0).when(r.period,{opacity:0}).delay(v).start(),l.add(d)}updateRipplePath(l,r)},t.prototype.updateEffectAnimation=function(r){for(var a=this._effectCfg,o=this.childAt(1),s=["symbolType","period","rippleScale","rippleNumber"],l=0;l<s.length;l++){var u=s[l];if(a[u]!==r[u]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}updateRipplePath(o,r)},t.prototype.highlight=function(){enterEmphasis(this)},t.prototype.downplay=function(){leaveEmphasis(this)},t.prototype.getSymbolType=function(){var r=this.childAt(0);return r&&r.getSymbolType()},t.prototype.updateData=function(r,a){var o=this,s=r.hostModel;this.childAt(0).updateData(r,a);var l=this.childAt(1),u=r.getItemModel(a),d=r.getItemVisual(a,"symbol"),v=normalizeSymbolSize(r.getItemVisual(a,"symbolSize")),g=r.getItemVisual(a,"style"),f=g&&g.fill,c=u.getModel("emphasis");l.setScale(v),l.traverse(function(S){S.setStyle("fill",f)});var y=normalizeSymbolOffset(r.getItemVisual(a,"symbolOffset"),v);y&&(l.x=y[0],l.y=y[1]);var _=r.getItemVisual(a,"symbolRotate");l.rotation=(_||0)*Math.PI/180||0;var b={};b.showEffectOn=s.get("showEffectOn"),b.rippleScale=u.get(["rippleEffect","scale"]),b.brushType=u.get(["rippleEffect","brushType"]),b.period=u.get(["rippleEffect","period"])*1e3,b.effectOffset=a/r.count(),b.z=s.getShallow("z")||0,b.zlevel=s.getShallow("zlevel")||0,b.symbolType=d,b.color=f,b.rippleEffectColor=u.get(["rippleEffect","color"]),b.rippleNumber=u.get(["rippleEffect","number"]),b.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(b):this.startEffectAnimation(b),this._effectCfg=b):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(S){S==="emphasis"?b.showEffectOn!=="render"&&o.startEffectAnimation(b):S==="normal"&&b.showEffectOn!=="render"&&o.stopEffectAnimation()}),this._effectCfg=b,toggleHoverEmphasis(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype.fadeOut=function(r){r&&r()},t}(Group$4);const EffectSymbol$1=EffectSymbol;var EffectScatterView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._symbolDraw=new SymbolDraw$1(EffectSymbol$1)},t.prototype.render=function(r,a,o){var s=r.getData(),l=this._symbolDraw;l.updateData(s,{clipShape:this._getClipShape(r)}),this.group.add(l.group)},t.prototype._getClipShape=function(r){var a=r.coordinateSystem,o=a&&a.getArea&&a.getArea();return r.get("clip",!0)?o:null},t.prototype.updateTransform=function(r,a,o){var s=r.getData();this.group.dirty();var l=pointsLayout("").reset(r,a,o);l.progress&&l.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(r){var a=r.coordinateSystem;a&&a.getRoamTransform&&(this.group.transform=clone$2(a.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(r,a){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(ChartView$1);const EffectScatterView$1=EffectScatterView;var EffectScatterSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(r,a,o){return o.point(a.getItemLayout(r))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(SeriesModel$1);const EffectScatterSeriesModel$1=EffectScatterSeriesModel;function install$x(n){n.registerChartView(EffectScatterView$1),n.registerSeriesModel(EffectScatterSeriesModel$1),n.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(n){__extends$1(t,n);function t(r,a,o){var s=n.call(this)||this;return s.add(s.createLine(r,a,o)),s._updateEffectSymbol(r,a),s}return t.prototype.createLine=function(r,a,o){return new Line$1(r,a,o)},t.prototype._updateEffectSymbol=function(r,a){var o=r.getItemModel(a),s=o.getModel("effect"),l=s.get("symbolSize"),u=s.get("symbol");isArray$1(l)||(l=[l,l]);var d=r.getItemVisual(a,"style"),v=s.get("color")||d&&d.stroke,g=this.childAt(1);this._symbolType!==u&&(this.remove(g),g=createSymbol$1(u,-.5,-.5,1,1,v),g.z2=100,g.culling=!0,this.add(g)),g&&(g.setStyle("shadowColor",v),g.setStyle(s.getItemStyle(["color"])),g.scaleX=l[0],g.scaleY=l[1],g.setColor(v),this._symbolType=u,this._symbolScale=l,this._updateEffectAnimation(r,s,a))},t.prototype._updateEffectAnimation=function(r,a,o){var s=this.childAt(1);if(s){var l=r.getItemLayout(o),u=a.get("period")*1e3,d=a.get("loop"),v=a.get("roundTrip"),g=a.get("constantSpeed"),f=retrieve(a.get("delay"),function(y){return y/r.count()*u/3});if(s.ignore=!0,this._updateAnimationPoints(s,l),g>0&&(u=this._getLineLength(s)/g*1e3),u!==this._period||d!==this._loop||v!==this._roundTrip){s.stopAnimation();var c=void 0;isFunction(f)?c=f(o):c=f,s.__t>0&&(c=-u*s.__t),this._animateSymbol(s,u,c,d,v)}this._period=u,this._loop=d,this._roundTrip=v}},t.prototype._animateSymbol=function(r,a,o,s,l){if(a>0){r.__t=0;var u=this,d=r.animate("",s).when(l?a*2:a,{__t:l?2:1}).delay(o).during(function(){u._updateSymbolPosition(r)});s||d.done(function(){u.remove(r)}),d.start()}},t.prototype._getLineLength=function(r){return dist$1(r.__p1,r.__cp1)+dist$1(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,a){r.__p1=a[0],r.__p2=a[1],r.__cp1=a[2]||[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]},t.prototype.updateData=function(r,a,o){this.childAt(0).updateData(r,a,o),this._updateEffectSymbol(r,a)},t.prototype._updateSymbolPosition=function(r){var a=r.__p1,o=r.__p2,s=r.__cp1,l=r.__t<1?r.__t:2-r.__t,u=[r.x,r.y],d=u.slice(),v=quadraticAt$1,g=quadraticDerivativeAt;u[0]=v(a[0],s[0],o[0],l),u[1]=v(a[1],s[1],o[1],l);var f=r.__t<1?g(a[0],s[0],o[0],l):g(o[0],s[0],a[0],1-l),c=r.__t<1?g(a[1],s[1],o[1],l):g(o[1],s[1],a[1],1-l);r.rotation=-Math.atan2(c,f)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=dist$1(d,u)*1.05,l===1&&(u[0]=d[0]+(u[0]-d[0])/2,u[1]=d[1]+(u[1]-d[1])/2)):r.__lastT===1?r.scaleY=2*dist$1(a,u):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=u[0],r.y=u[1]},t.prototype.updateLayout=function(r,a){this.childAt(0).updateLayout(r,a);var o=r.getItemModel(a).getModel("effect");this._updateEffectAnimation(r,o,a)},t}(Group$4);const EffectLine$1=EffectLine;var Polyline=function(n){__extends$1(t,n);function t(r,a,o){var s=n.call(this)||this;return s._createPolyline(r,a,o),s}return t.prototype._createPolyline=function(r,a,o){var s=r.getItemLayout(a),l=new Polyline$3({shape:{points:s}});this.add(l),this._updateCommonStl(r,a,o)},t.prototype.updateData=function(r,a,o){var s=r.hostModel,l=this.childAt(0),u={shape:{points:r.getItemLayout(a)}};updateProps$1(l,u,s,a),this._updateCommonStl(r,a,o)},t.prototype._updateCommonStl=function(r,a,o){var s=this.childAt(0),l=r.getItemModel(a),u=o&&o.emphasisLineStyle,d=o&&o.focus,v=o&&o.blurScope,g=o&&o.emphasisDisabled;if(!o||r.hasItemOption){var f=l.getModel("emphasis");u=f.getModel("lineStyle").getLineStyle(),g=f.get("disabled"),d=f.get("focus"),v=f.get("blurScope")}s.useStyle(r.getItemVisual(a,"style")),s.style.fill=null,s.style.strokeNoScale=!0;var c=s.ensureState("emphasis");c.style=u,toggleHoverEmphasis(this,d,v,g)},t.prototype.updateLayout=function(r,a){var o=this.childAt(0);o.setShape("points",r.getItemLayout(a))},t}(Group$4);const Polyline$1=Polyline;var EffectPolyline=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,a,o){return new Polyline$1(r,a,o)},t.prototype._updateAnimationPoints=function(r,a){this._points=a;for(var o=[0],s=0,l=1;l<a.length;l++){var u=a[l-1],d=a[l];s+=dist$1(u,d),o.push(s)}if(s===0){this._length=0;return}for(var l=0;l<o.length;l++)o[l]/=s;this._offsets=o,this._length=s},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var a=r.__t<1?r.__t:2-r.__t,o=this._points,s=this._offsets,l=o.length;if(s){var u=this._lastFrame,d;if(a<this._lastFramePercent){var v=Math.min(u+1,l-1);for(d=v;d>=0&&!(s[d]<=a);d--);d=Math.min(d,l-2)}else{for(d=u;d<l&&!(s[d]>a);d++);d=Math.min(d-1,l-2)}var g=(a-s[d])/(s[d+1]-s[d]),f=o[d],c=o[d+1];r.x=f[0]*(1-g)+g*c[0],r.y=f[1]*(1-g)+g*c[1];var y=r.__t<1?c[0]-f[0]:f[0]-c[0],_=r.__t<1?c[1]-f[1]:f[1]-c[1];r.rotation=-Math.atan2(_,y)-Math.PI/2,this._lastFrame=d,this._lastFramePercent=a,r.ignore=!1}},t}(EffectLine$1);const EffectPolyline$1=EffectPolyline;var LargeLinesPathShape=function(){function n(){this.polyline=!1,this.curveness=0,this.segs=[]}return n}(),LargeLinesPath=function(n){__extends$1(t,n);function t(r){var a=n.call(this,r)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new LargeLinesPathShape},t.prototype.buildPath=function(r,a){var o=a.segs,s=a.curveness,l;if(a.polyline)for(l=this._off;l<o.length;){var u=o[l++];if(u>0){r.moveTo(o[l++],o[l++]);for(var d=1;d<u;d++)r.lineTo(o[l++],o[l++])}}else for(l=this._off;l<o.length;){var v=o[l++],g=o[l++],f=o[l++],c=o[l++];if(r.moveTo(v,g),s>0){var y=(v+f)/2-(g-c)*s,_=(g+c)/2-(f-v)*s;r.quadraticCurveTo(y,_,f,c)}else r.lineTo(f,c)}this.incremental&&(this._off=l,this.notClear=!0)},t.prototype.findDataIndex=function(r,a){var o=this.shape,s=o.segs,l=o.curveness,u=this.style.lineWidth;if(o.polyline)for(var d=0,v=0;v<s.length;){var g=s[v++];if(g>0)for(var f=s[v++],c=s[v++],y=1;y<g;y++){var _=s[v++],b=s[v++];if(containStroke$4(f,c,_,b,u,r,a))return d}d++}else for(var d=0,v=0;v<s.length;){var f=s[v++],c=s[v++],_=s[v++],b=s[v++];if(l>0){var S=(f+_)/2-(c-b)*l,x=(c+b)/2-(_-f)*l;if(containStroke$2(f,c,S,x,_,b,u,r,a))return d}else if(containStroke$4(f,c,_,b,u,r,a))return d;d++}return-1},t.prototype.contain=function(r,a){var o=this.transformCoordToLocal(r,a),s=this.getBoundingRect();if(r=o[0],a=o[1],s.contain(r,a)){var l=this.hoverDataIdx=this.findDataIndex(r,a);return l>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var a=this.shape,o=a.segs,s=1/0,l=1/0,u=-1/0,d=-1/0,v=0;v<o.length;){var g=o[v++],f=o[v++];s=Math.min(g,s),u=Math.max(g,u),l=Math.min(f,l),d=Math.max(f,d)}r=this._rect=new BoundingRect$1(s,l,u,d)}return r},t}(Path$1),LargeLineDraw=function(){function n(){this.group=new Group$4}return n.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},n.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(t,r){var a=this._newAdded[0],o=r.getLayout("linesPoints"),s=a&&a.shape.segs;if(s&&s.length<2e4){var l=s.length,u=new Float32Array(l+o.length);u.set(s),u.set(o,l),a.setShape({segs:u})}else{this._newAdded=[];var d=this._create();d.incremental=!0,d.setShape({segs:o}),this._setCommon(d,r),d.__startIndex=t.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},n.prototype._create=function(){var t=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},n.prototype._setCommon=function(t,r,a){var o=r.hostModel;t.setShape({polyline:o.get("polyline"),curveness:o.get(["lineStyle","curveness"])}),t.useStyle(o.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var s=r.getVisual("style");s&&s.stroke&&t.setStyle("stroke",s.stroke),t.setStyle("fill",null);var l=getECData(t);l.seriesIndex=o.seriesIndex,t.on("mousemove",function(u){l.dataIndex=null;var d=t.hoverDataIdx;d>0&&(l.dataIndex=d+t.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}();const LargeLineDraw$1=LargeLineDraw;var linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(n){var t=n.coordinateSystem;if(t){var r=n.get("polyline"),a=n.pipelineContext.large;return{progress:function(o,s){var l=[];if(a){var u=void 0,d=o.end-o.start;if(r){for(var v=0,g=o.start;g<o.end;g++)v+=n.getLineCoordsCount(g);u=new Float32Array(d+v*2)}else u=new Float32Array(d*4);for(var f=0,c=[],g=o.start;g<o.end;g++){var y=n.getLineCoords(g,l);r&&(u[f++]=y);for(var _=0;_<y;_++)c=t.dataToPoint(l[_],!1,c),u[f++]=c[0],u[f++]=c[1]}s.setLayout("linesPoints",u)}else for(var g=o.start;g<o.end;g++){var b=s.getItemModel(g),y=n.getLineCoords(g,l),S=[];if(r)for(var x=0;x<y;x++)S.push(t.dataToPoint(l[x]));else{S[0]=t.dataToPoint(l[0]),S[1]=t.dataToPoint(l[1]);var w=b.get(["lineStyle","curveness"]);+w&&(S[2]=[(S[0][0]+S[1][0])/2-(S[0][1]-S[1][1])*w,(S[0][1]+S[1][1])/2-(S[1][0]-S[0][0])*w])}s.setItemLayout(g,S)}}}}}};const linesLayout$1=linesLayout;var LinesView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){var s=r.getData(),l=this._updateLineDraw(s,r),u=r.get("zlevel"),d=r.get(["effect","trailLength"]),v=o.getZr(),g=v.painter.getType()==="svg";g||v.painter.getLayer(u).clear(!0),this._lastZlevel!=null&&!g&&v.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&d>0&&(g||v.configLayer(u,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(d/10+.9,1),0)})),l.updateData(s);var f=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r);f?this.group.setClipPath(f):this.group.removeClipPath(),this._lastZlevel=u,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,a,o){var s=r.getData(),l=this._updateLineDraw(s,r);l.incrementalPrepareUpdate(s),this._clearLayer(o),this._finished=!1},t.prototype.incrementalRender=function(r,a,o){this._lineDraw.incrementalUpdate(r,a.getData()),this._finished=r.end===a.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,a,o){var s=r.getData(),l=r.pipelineContext;if(!this._finished||l.large||l.progressiveRender)return{update:!0};var u=linesLayout$1.reset(r,a,o);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._lineDraw.updateLayout(),this._clearLayer(o)},t.prototype._updateLineDraw=function(r,a){var o=this._lineDraw,s=this._showEffect(a),l=!!a.get("polyline"),u=a.pipelineContext,d=u.large;return(!o||s!==this._hasEffet||l!==this._isPolyline||d!==this._isLargeDraw)&&(o&&o.remove(),o=this._lineDraw=d?new LargeLineDraw$1:new LineDraw$1(l?s?EffectPolyline$1:Polyline$1:s?EffectLine$1:Line$1),this._hasEffet=s,this._isPolyline=l,this._isLargeDraw=d),this.group.add(o.group),o},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var a=r.getZr(),o=a.painter.getType()==="svg";!o&&this._lastZlevel!=null&&a.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,a){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(a)},t.prototype.dispose=function(r,a){this.remove(r,a)},t.type="lines",t}(ChartView$1);const LinesView$1=LinesView;var Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(n){var t=n.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(n.data=map$1(t,function(r){var a=[r[0].coord,r[1].coord],o={coords:a};return r[0].name&&(o.fromName=r[0].name),r[1].name&&(o.toName=r[1].name),mergeAll([o,r[0],r[1]])}))}var LinesSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],compatEc2(r);var a=this._processFlatCoordsArray(r.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(r.data=new Float32Array(a.count)),n.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(compatEc2(r),r.data){var a=this._processFlatCoordsArray(r.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(r.data=new Float32Array(a.count))}n.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var a=this._processFlatCoordsArray(r.data);a.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,a.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,a.flatCoordsOffset)):(this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset),r.data=new Float32Array(a.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var a=this.getData().getItemModel(r),o=a.option instanceof Array?a.option:a.getShallow("coords");return o},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,a){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[r*2],s=this._flatCoordsOffset[r*2+1],l=0;l<s;l++)a[l]=a[l]||[],a[l][0]=this._flatCoords[o+l*2],a[l][1]=this._flatCoords[o+l*2+1];return s}else{for(var u=this._getCoordsFromItemModel(r),l=0;l<u.length;l++)a[l]=a[l]||[],a[l][0]=u[l][0],a[l][1]=u[l][1];return u.length}},t.prototype._processFlatCoordsArray=function(r){var a=0;if(this._flatCoords&&(a=this._flatCoords.length),isNumber(r[0])){for(var o=r.length,s=new Uint32Arr(o),l=new Float64Arr(o),u=0,d=0,v=0,g=0;g<o;){v++;var f=r[g++];s[d++]=u+a,s[d++]=f;for(var c=0;c<f;c++){var y=r[g++],_=r[g++];l[u++]=y,l[u++]=_}}return{flatCoordsOffset:new Uint32Array(s.buffer,0,d),flatCoords:l,count:v}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,a){var o=new SeriesData$1(["value"],this);return o.hasItemOption=!1,o.initData(r.data,[],function(s,l,u,d){if(s instanceof Array)return NaN;o.hasItemOption=!0;var v=s.value;if(v!=null)return v instanceof Array?v[d]:v}),o},t.prototype.formatTooltip=function(r,a,o){var s=this.getData(),l=s.getItemModel(r),u=l.get("name");if(u)return u;var d=l.get("fromName"),v=l.get("toName"),g=[];return d!=null&&g.push(d),v!=null&&g.push(v),createTooltipMarkup("nameValue",{name:g.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),a=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&a>0?a+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(SeriesModel$1);const LinesSeriesModel$1=LinesSeriesModel;function normalize(n){return n instanceof Array||(n=[n,n]),n}var linesVisual={seriesType:"lines",reset:function(n){var t=normalize(n.get("symbol")),r=normalize(n.get("symbolSize")),a=n.getData();a.setVisual("fromSymbol",t&&t[0]),a.setVisual("toSymbol",t&&t[1]),a.setVisual("fromSymbolSize",r&&r[0]),a.setVisual("toSymbolSize",r&&r[1]);function o(s,l){var u=s.getItemModel(l),d=normalize(u.getShallow("symbol",!0)),v=normalize(u.getShallow("symbolSize",!0));d[0]&&s.setItemVisual(l,"fromSymbol",d[0]),d[1]&&s.setItemVisual(l,"toSymbol",d[1]),v[0]&&s.setItemVisual(l,"fromSymbolSize",v[0]),v[1]&&s.setItemVisual(l,"toSymbolSize",v[1])}return{dataEach:a.hasItemOption?o:null}}};const linesVisual$1=linesVisual;function install$w(n){n.registerChartView(LinesView$1),n.registerSeriesModel(LinesSeriesModel$1),n.registerLayout(linesLayout$1),n.registerVisual(linesVisual$1)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=platformApi.createCanvas();this.canvas=t}return n.prototype.update=function(t,r,a,o,s,l){var u=this._getBrush(),d=this._getGradient(s,"inRange"),v=this._getGradient(s,"outOfRange"),g=this.pointSize+this.blurSize,f=this.canvas,c=f.getContext("2d"),y=t.length;f.width=r,f.height=a;for(var _=0;_<y;++_){var b=t[_],S=b[0],x=b[1],w=b[2],T=o(w);c.globalAlpha=T,c.drawImage(u,S-g,x-g)}if(!f.width||!f.height)return f;for(var A=c.getImageData(0,0,f.width,f.height),E=A.data,$=0,P=E.length,I=this.minOpacity,C=this.maxOpacity,M=C-I;$<P;){var T=E[$+3]/256,D=Math.floor(T*(GRADIENT_LEVELS-1))*4;if(T>0){var R=l(T)?d:v;T>0&&(T=T*M+I),E[$++]=R[D],E[$++]=R[D+1],E[$++]=R[D+2],E[$++]=R[D+3]*T*256}else $+=4}return c.putImageData(A,0,0),f},n.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),r=this.pointSize+this.blurSize,a=r*2;t.width=a,t.height=a;var o=t.getContext("2d");return o.clearRect(0,0,a,a),o.shadowOffsetX=a,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-r,r,this.pointSize,0,Math.PI*2,!0),o.closePath(),o.fill(),t},n.prototype._getGradient=function(t,r){for(var a=this._gradientPixels,o=a[r]||(a[r]=new Uint8ClampedArray(256*4)),s=[0,0,0,0],l=0,u=0;u<256;u++)t[r](u/255,!0,s),o[l++]=s[0],o[l++]=s[1],o[l++]=s[2],o[l++]=s[3];return o},n}();const HeatmapLayer$1=HeatmapLayer;function getIsInPiecewiseRange(n,t,r){var a=n[1]-n[0];t=map$1(t,function(l){return{interval:[(l.interval[0]-n[0])/a,(l.interval[1]-n[0])/a]}});var o=t.length,s=0;return function(l){var u;for(u=s;u<o;u++){var d=t[u].interval;if(d[0]<=l&&l<=d[1]){s=u;break}}if(u===o)for(u=s-1;u>=0;u--){var d=t[u].interval;if(d[0]<=l&&l<=d[1]){s=u;break}}return u>=0&&u<o&&r[u]}}function getIsInContinuousRange(n,t){var r=n[1]-n[0];return t=[(t[0]-n[0])/r,(t[1]-n[0])/r],function(a){return a>=t[0]&&a<=t[1]}}function isGeoCoordSys(n){var t=n.dimensions;return t[0]==="lng"&&t[1]==="lat"}var HeatmapView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){var s;a.eachComponent("visualMap",function(u){u.eachTargetSeries(function(d){d===r&&(s=u)})}),this._progressiveEls=null,this.group.removeAll();var l=r.coordinateSystem;l.type==="cartesian2d"||l.type==="calendar"?this._renderOnCartesianAndCalendar(r,o,0,r.getData().count()):isGeoCoordSys(l)&&this._renderOnGeo(l,r,s,o)},t.prototype.incrementalPrepareRender=function(r,a,o){this.group.removeAll()},t.prototype.incrementalRender=function(r,a,o,s){var l=a.coordinateSystem;l&&(isGeoCoordSys(l)?this.render(a,o,s):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(a,s,r.start,r.end,!0)))},t.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},t.prototype._renderOnCartesianAndCalendar=function(r,a,o,s,l){var u=r.coordinateSystem,d=isCoordinateSystemType(u,"cartesian2d"),v,g,f,c;if(d){var y=u.getAxis("x"),_=u.getAxis("y");v=y.getBandWidth()+.5,g=_.getBandWidth()+.5,f=y.scale.getExtent(),c=_.scale.getExtent()}for(var b=this.group,S=r.getData(),x=r.getModel(["emphasis","itemStyle"]).getItemStyle(),w=r.getModel(["blur","itemStyle"]).getItemStyle(),T=r.getModel(["select","itemStyle"]).getItemStyle(),A=r.get(["itemStyle","borderRadius"]),E=getLabelStatesModels(r),$=r.getModel("emphasis"),P=$.get("focus"),I=$.get("blurScope"),C=$.get("disabled"),M=d?[S.mapDimension("x"),S.mapDimension("y"),S.mapDimension("value")]:[S.mapDimension("time"),S.mapDimension("value")],D=o;D<s;D++){var R=void 0,N=S.getItemVisual(D,"style");if(d){var O=S.get(M[0],D),F=S.get(M[1],D);if(isNaN(S.get(M[2],D))||isNaN(O)||isNaN(F)||O<f[0]||O>f[1]||F<c[0]||F>c[1])continue;var L=u.dataToPoint([O,F]);R=new Rect$3({shape:{x:L[0]-v/2,y:L[1]-g/2,width:v,height:g},style:N})}else{if(isNaN(S.get(M[1],D)))continue;R=new Rect$3({z2:1,shape:u.dataToRect([S.get(M[0],D)]).contentShape,style:N})}if(S.hasItemOption){var B=S.getItemModel(D),V=B.getModel("emphasis");x=V.getModel("itemStyle").getItemStyle(),w=B.getModel(["blur","itemStyle"]).getItemStyle(),T=B.getModel(["select","itemStyle"]).getItemStyle(),A=B.get(["itemStyle","borderRadius"]),P=V.get("focus"),I=V.get("blurScope"),C=V.get("disabled"),E=getLabelStatesModels(B)}R.shape.r=A;var H=r.getRawValue(D),X="-";H&&H[2]!=null&&(X=H[2]+""),setLabelStyle(R,E,{labelFetcher:r,labelDataIndex:D,defaultOpacity:N.opacity,defaultText:X}),R.ensureState("emphasis").style=x,R.ensureState("blur").style=w,R.ensureState("select").style=T,toggleHoverEmphasis(R,P,I,C),R.incremental=l,l&&(R.states.emphasis.hoverLayer=!0),b.add(R),S.setItemGraphicEl(D,R),this._progressiveEls&&this._progressiveEls.push(R)}},t.prototype._renderOnGeo=function(r,a,o,s){var l=o.targetVisuals.inRange,u=o.targetVisuals.outOfRange,d=a.getData(),v=this._hmLayer||this._hmLayer||new HeatmapLayer$1;v.blurSize=a.get("blurSize"),v.pointSize=a.get("pointSize"),v.minOpacity=a.get("minOpacity"),v.maxOpacity=a.get("maxOpacity");var g=r.getViewRect().clone(),f=r.getRoamTransform();g.applyTransform(f);var c=Math.max(g.x,0),y=Math.max(g.y,0),_=Math.min(g.width+g.x,s.getWidth()),b=Math.min(g.height+g.y,s.getHeight()),S=_-c,x=b-y,w=[d.mapDimension("lng"),d.mapDimension("lat"),d.mapDimension("value")],T=d.mapArray(w,function(P,I,C){var M=r.dataToPoint([P,I]);return M[0]-=c,M[1]-=y,M.push(C),M}),A=o.getExtent(),E=o.type==="visualMap.continuous"?getIsInContinuousRange(A,o.option.range):getIsInPiecewiseRange(A,o.getPieceList(),o.option.selected);v.update(T,S,x,l.color.getNormalizer(),{inRange:l.color.getColorMapper(),outOfRange:u.color.getColorMapper()},E);var $=new ZRImage$1({style:{width:S,height:x,x:c,y,image:v.canvas},silent:!0});this.group.add($)},t.type="heatmap",t}(ChartView$1);const HeatmapView$1=HeatmapView;var HeatmapSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,a){return createSeriesData(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var r=CoordinateSystem.get(this.get("coordinateSystem"));if(r&&r.dimensions)return r.dimensions[0]==="lng"&&r.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(SeriesModel$1);const HeatmapSeriesModel$1=HeatmapSeriesModel;function install$v(n){n.registerChartView(HeatmapView$1),n.registerSeriesModel(HeatmapSeriesModel$1)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle$1,PictorialBarView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){var s=this.group,l=r.getData(),u=this._data,d=r.coordinateSystem,v=d.getBaseAxis(),g=v.isHorizontal(),f=d.master.getRect(),c={ecSize:{width:o.getWidth(),height:o.getHeight()},seriesModel:r,coordSys:d,coordSysExtent:[[f.x,f.x+f.width],[f.y,f.y+f.height]],isHorizontal:g,valueDim:LAYOUT_ATTRS[+g],categoryDim:LAYOUT_ATTRS[1-+g]};return l.diff(u).add(function(y){if(l.hasValue(y)){var _=getItemModel(l,y),b=getSymbolMeta(l,y,_,c),S=createBar(l,c,b);l.setItemGraphicEl(y,S),s.add(S),updateCommon(S,c,b)}}).update(function(y,_){var b=u.getItemGraphicEl(_);if(!l.hasValue(y)){s.remove(b);return}var S=getItemModel(l,y),x=getSymbolMeta(l,y,S,c),w=getShapeStr(l,x);b&&w!==b.__pictorialShapeStr&&(s.remove(b),l.setItemGraphicEl(y,null),b=null),b?updateBar(b,c,x):b=createBar(l,c,x,!0),l.setItemGraphicEl(y,b),b.__pictorialSymbolMeta=x,s.add(b),updateCommon(b,c,x)}).remove(function(y){var _=u.getItemGraphicEl(y);_&&removeBar(u,y,_.__pictorialSymbolMeta.animationModel,_)}).execute(),this._data=l,this.group},t.prototype.remove=function(r,a){var o=this.group,s=this._data;r.get("animation")?s&&s.eachItemGraphicEl(function(l){removeBar(s,getECData(l).dataIndex,r,l)}):o.removeAll()},t.type="pictorialBar",t}(ChartView$1);function getSymbolMeta(n,t,r,a){var o=n.getItemLayout(t),s=r.get("symbolRepeat"),l=r.get("symbolClip"),u=r.get("symbolPosition")||"start",d=r.get("symbolRotate"),v=(d||0)*Math.PI/180||0,g=r.get("symbolPatternSize")||2,f=r.isAnimationEnabled(),c={dataIndex:t,layout:o,itemModel:r,symbolType:n.getItemVisual(t,"symbol")||"circle",style:n.getItemVisual(t,"style"),symbolClip:l,symbolRepeat:s,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:g,rotation:v,animationModel:f?r:null,hoverScale:f&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};prepareBarLength(r,s,o,a,c),prepareSymbolSize(n,t,o,s,l,c.boundingLength,c.pxSign,g,a,c),prepareLineWidth(r,c.symbolScale,v,a,c);var y=c.symbolSize,_=normalizeSymbolOffset(r.get("symbolOffset"),y);return prepareLayoutInfo(r,y,o,s,l,_,u,c.valueLineWidth,c.boundingLength,c.repeatCutLength,a,c),c}function prepareBarLength(n,t,r,a,o){var s=a.valueDim,l=n.get("symbolBoundingData"),u=a.coordSys.getOtherAxis(a.coordSys.getBaseAxis()),d=u.toGlobalCoord(u.dataToCoord(0)),v=1-+(r[s.wh]<=0),g;if(isArray$1(l)){var f=[convertToCoordOnAxis(u,l[0])-d,convertToCoordOnAxis(u,l[1])-d];f[1]<f[0]&&f.reverse(),g=f[v]}else l!=null?g=convertToCoordOnAxis(u,l)-d:t?g=a.coordSysExtent[s.index][v]-d:g=r[s.wh];o.boundingLength=g,t&&(o.repeatCutLength=r[s.wh]),o.pxSign=g>0?1:-1}function convertToCoordOnAxis(n,t){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(t)))}function prepareSymbolSize(n,t,r,a,o,s,l,u,d,v){var g=d.valueDim,f=d.categoryDim,c=Math.abs(r[f.wh]),y=n.getItemVisual(t,"symbolSize"),_;isArray$1(y)?_=y.slice():y==null?_=["100%","100%"]:_=[y,y],_[f.index]=parsePercent(_[f.index],c),_[g.index]=parsePercent(_[g.index],a?c:Math.abs(s)),v.symbolSize=_;var b=v.symbolScale=[_[0]/u,_[1]/u];b[g.index]*=(d.isHorizontal?-1:1)*l}function prepareLineWidth(n,t,r,a,o){var s=n.get(BAR_BORDER_WIDTH_QUERY)||0;s&&(pathForLineWidth.attr({scaleX:t[0],scaleY:t[1],rotation:r}),pathForLineWidth.updateTransform(),s/=pathForLineWidth.getLineScale(),s*=t[a.valueDim.index]),o.valueLineWidth=s||0}function prepareLayoutInfo(n,t,r,a,o,s,l,u,d,v,g,f){var c=g.categoryDim,y=g.valueDim,_=f.pxSign,b=Math.max(t[y.index]+u,0),S=b;if(a){var x=Math.abs(d),w=retrieve(n.get("symbolMargin"),"15%")+"",T=!1;w.lastIndexOf("!")===w.length-1&&(T=!0,w=w.slice(0,w.length-1));var A=parsePercent(w,t[y.index]),E=Math.max(b+A*2,0),$=T?0:A*2,P=isNumeric(a),I=P?a:toIntTimes((x+$)/E),C=x-I*b;A=C/2/(T?I:Math.max(I-1,1)),E=b+A*2,$=T?0:A*2,!P&&a!=="fixed"&&(I=v?toIntTimes((Math.abs(v)+$)/E):0),S=I*E-$,f.repeatTimes=I,f.symbolMargin=A}var M=_*(S/2),D=f.pathPosition=[];D[c.index]=r[c.wh]/2,D[y.index]=l==="start"?M:l==="end"?d-M:d/2,s&&(D[0]+=s[0],D[1]+=s[1]);var R=f.bundlePosition=[];R[c.index]=r[c.xy],R[y.index]=r[y.xy];var N=f.barRectShape=extend({},r);N[y.wh]=_*Math.max(Math.abs(r[y.wh]),Math.abs(D[y.index]+M)),N[c.wh]=r[c.wh];var O=f.clipShape={};O[c.xy]=-r[c.xy],O[c.wh]=g.ecSize[c.wh],O[y.xy]=0,O[y.wh]=r[y.wh]}function createPath(n){var t=n.symbolPatternSize,r=createSymbol$1(n.symbolType,-t/2,-t/2,t,t);return r.attr({culling:!0}),r.type!=="image"&&r.setStyle({strokeNoScale:!0}),r}function createOrUpdateRepeatSymbols(n,t,r,a){var o=n.__pictorialBundle,s=r.symbolSize,l=r.valueLineWidth,u=r.pathPosition,d=t.valueDim,v=r.repeatTimes||0,g=0,f=s[t.valueDim.index]+l+r.symbolMargin*2;for(eachPath(n,function(b){b.__pictorialAnimationIndex=g,b.__pictorialRepeatTimes=v,g<v?updateAttr(b,null,_(g),r,a):updateAttr(b,null,{scaleX:0,scaleY:0},r,a,function(){o.remove(b)}),g++});g<v;g++){var c=createPath(r);c.__pictorialAnimationIndex=g,c.__pictorialRepeatTimes=v,o.add(c);var y=_(g);updateAttr(c,{x:y.x,y:y.y,scaleX:0,scaleY:0},{scaleX:y.scaleX,scaleY:y.scaleY,rotation:y.rotation},r,a)}function _(b){var S=u.slice(),x=r.pxSign,w=b;return(r.symbolRepeatDirection==="start"?x>0:x<0)&&(w=v-1-b),S[d.index]=f*(w-v/2+.5)+u[d.index],{x:S[0],y:S[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function createOrUpdateSingleSymbol(n,t,r,a){var o=n.__pictorialBundle,s=n.__pictorialMainPath;s?updateAttr(s,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,a):(s=n.__pictorialMainPath=createPath(r),o.add(s),updateAttr(s,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,a))}function createOrUpdateBarRect(n,t,r){var a=extend({},t.barRectShape),o=n.__pictorialBarRect;o?updateAttr(o,null,{shape:a},t,r):(o=n.__pictorialBarRect=new Rect$3({z2:2,shape:a,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),o.disableMorphing=!0,n.add(o))}function createOrUpdateClip(n,t,r,a){if(r.symbolClip){var o=n.__pictorialClipPath,s=extend({},r.clipShape),l=t.valueDim,u=r.animationModel,d=r.dataIndex;if(o)updateProps$1(o,{shape:s},u,d);else{s[l.wh]=0,o=new Rect$3({shape:s}),n.__pictorialBundle.setClipPath(o),n.__pictorialClipPath=o;var v={};v[l.wh]=r.clipShape[l.wh],graphic[a?"updateProps":"initProps"](o,{shape:v},u,d)}}}function getItemModel(n,t){var r=n.getItemModel(t);return r.getAnimationDelayParams=getAnimationDelayParams,r.isAnimationEnabled=isAnimationEnabled,r}function getAnimationDelayParams(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(n,t,r,a){var o=new Group$4,s=new Group$4;return o.add(s),o.__pictorialBundle=s,s.x=r.bundlePosition[0],s.y=r.bundlePosition[1],r.symbolRepeat?createOrUpdateRepeatSymbols(o,t,r):createOrUpdateSingleSymbol(o,t,r),createOrUpdateBarRect(o,r,a),createOrUpdateClip(o,t,r,a),o.__pictorialShapeStr=getShapeStr(n,r),o.__pictorialSymbolMeta=r,o}function updateBar(n,t,r){var a=r.animationModel,o=r.dataIndex,s=n.__pictorialBundle;updateProps$1(s,{x:r.bundlePosition[0],y:r.bundlePosition[1]},a,o),r.symbolRepeat?createOrUpdateRepeatSymbols(n,t,r,!0):createOrUpdateSingleSymbol(n,t,r,!0),createOrUpdateBarRect(n,r,!0),createOrUpdateClip(n,t,r,!0)}function removeBar(n,t,r,a){var o=a.__pictorialBarRect;o&&o.removeTextContent();var s=[];eachPath(a,function(l){s.push(l)}),a.__pictorialMainPath&&s.push(a.__pictorialMainPath),a.__pictorialClipPath&&(r=null),each$f(s,function(l){removeElement(l,{scaleX:0,scaleY:0},r,t,function(){a.parent&&a.parent.remove(a)})}),n.setItemGraphicEl(t,null)}function getShapeStr(n,t){return[n.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function eachPath(n,t,r){each$f(n.__pictorialBundle.children(),function(a){a!==n.__pictorialBarRect&&t.call(r,a)})}function updateAttr(n,t,r,a,o,s){t&&n.attr(t),a.symbolClip&&!o?r&&n.attr(r):r&&graphic[o?"updateProps":"initProps"](n,r,a.animationModel,a.dataIndex,s)}function updateCommon(n,t,r){var a=r.dataIndex,o=r.itemModel,s=o.getModel("emphasis"),l=s.getModel("itemStyle").getItemStyle(),u=o.getModel(["blur","itemStyle"]).getItemStyle(),d=o.getModel(["select","itemStyle"]).getItemStyle(),v=o.getShallow("cursor"),g=s.get("focus"),f=s.get("blurScope"),c=s.get("scale");eachPath(n,function(b){if(b instanceof ZRImage$1){var S=b.style;b.useStyle(extend({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},r.style))}else b.useStyle(r.style);var x=b.ensureState("emphasis");x.style=l,c&&(x.scaleX=b.scaleX*1.1,x.scaleY=b.scaleY*1.1),b.ensureState("blur").style=u,b.ensureState("select").style=d,v&&(b.cursor=v),b.z2=r.z2});var y=t.valueDim.posDesc[+(r.boundingLength>0)],_=n.__pictorialBarRect;setLabelStyle(_,getLabelStatesModels(o),{labelFetcher:t.seriesModel,labelDataIndex:a,defaultText:getDefaultLabel(t.seriesModel.getData(),a),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:y}),toggleHoverEmphasis(n,g,f,s.get("disabled"))}function toIntTimes(n){var t=Math.round(n);return Math.abs(n-t)<1e-4?t:Math.ceil(n)}const PictorialBarView$1=PictorialBarView;var PictorialBarSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return t.prototype.getInitialData=function(r){return r.stack=null,n.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=inheritDefaultOption(BaseBarSeriesModel$1.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(BaseBarSeriesModel$1);const PictorialBarSeriesModel$1=PictorialBarSeriesModel;function install$u(n){n.registerChartView(PictorialBarView$1),n.registerSeriesModel(PictorialBarSeriesModel$1),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r._layers=[],r}return t.prototype.render=function(r,a,o){var s=r.getData(),l=this,u=this.group,d=r.getLayerSeries(),v=s.getLayout("layoutInfo"),g=v.rect,f=v.boundaryGap;u.x=0,u.y=g.y+f[0];function c(S){return S.name}var y=new DataDiffer$1(this._layersSeries||[],d,c,c),_=[];y.add(bind$1(b,this,"add")).update(bind$1(b,this,"update")).remove(bind$1(b,this,"remove")).execute();function b(S,x,w){var T=l._layers;if(S==="remove"){u.remove(T[x]);return}for(var A=[],E=[],$,P=d[x].indices,I=0;I<P.length;I++){var C=s.getItemLayout(P[I]),M=C.x,D=C.y0,R=C.y;A.push(M,D),E.push(M,D+R),$=s.getItemVisual(P[I],"style")}var N,O=s.getItemLayout(P[0]),F=r.getModel("label"),L=F.get("margin"),B=r.getModel("emphasis");if(S==="add"){var V=_[x]=new Group$4;N=new ECPolygon({shape:{points:A,stackedOnPoints:E,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),V.add(N),u.add(V),r.isAnimationEnabled()&&N.setClipPath(createGridClipShape(N.getBoundingRect(),r,function(){N.removeClipPath()}))}else{var V=T[w];N=V.childAt(0),u.add(V),_[x]=V,updateProps$1(N,{shape:{points:A,stackedOnPoints:E}},r),saveOldStyle(N)}setLabelStyle(N,getLabelStatesModels(r),{labelDataIndex:P[I-1],defaultText:s.getName(P[I-1]),inheritColor:$.fill},{normal:{verticalAlign:"middle"}}),N.setTextConfig({position:null,local:!0});var H=N.getTextContent();H&&(H.x=O.x-L,H.y=O.y0+O.y/2),N.useStyle($),s.setItemGraphicEl(x,N),setStatesStylesFromModel(N,r),toggleHoverEmphasis(N,B.get("focus"),B.get("blurScope"),B.get("disabled"))}this._layersSeries=d,this._layers=_},t.type="themeRiver",t}(ChartView$1);function createGridClipShape(n,t,r){var a=new Rect$3({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return initProps(a,{shape:{x:n.x-50,width:n.width+100,height:n.height+20}},t,r),a}const ThemeRiverView$1=ThemeRiverView;var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this))},t.prototype.fixData=function(r){var a=r.length,o={},s=groupData(r,function(c){return o.hasOwnProperty(c[0]+"")||(o[c[0]+""]=-1),c[2]}),l=[];s.buckets.each(function(c,y){l.push({name:y,dataList:c})});for(var u=l.length,d=0;d<u;++d){for(var v=l[d].name,g=0;g<l[d].dataList.length;++g){var f=l[d].dataList[g][0]+"";o[f]=d}for(var f in o)o.hasOwnProperty(f)&&o[f]!==d&&(o[f]=d,r[a]=[f,0,v],a++)}return r},t.prototype.getInitialData=function(r,a){for(var o=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],s=o.get("type"),l=filter(r.data,function(_){return _[2]!==void 0}),u=this.fixData(l||[]),d=[],v=this.nameMap=createHashMap(),g=0,f=0;f<u.length;++f)d.push(u[f][DATA_NAME_INDEX]),v.get(u[f][DATA_NAME_INDEX])||(v.set(u[f][DATA_NAME_INDEX],g),g++);var c=prepareSeriesDataSchema(u,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(s)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,y=new SeriesData$1(c,this);return y.initData(u),y},t.prototype.getLayerSeries=function(){for(var r=this.getData(),a=r.count(),o=[],s=0;s<a;++s)o[s]=s;var l=r.mapDimension("single"),u=groupData(o,function(v){return r.get("name",v)}),d=[];return u.buckets.each(function(v,g){v.sort(function(f,c){return r.get(l,f)-r.get(l,c)}),d.push({name:g,indices:v})}),d},t.prototype.getAxisTooltipData=function(r,a,o){isArray$1(r)||(r=r?[r]:[]);for(var s=this.getData(),l=this.getLayerSeries(),u=[],d=l.length,v,g=0;g<d;++g){for(var f=Number.MAX_VALUE,c=-1,y=l[g].indices.length,_=0;_<y;++_){var b=s.get(r[0],l[g].indices[_]),S=Math.abs(b-a);S<=f&&(v=b,f=S,c=l[g].indices[_])}u.push(c)}return{dataIndices:u,nestestValue:v}},t.prototype.formatTooltip=function(r,a,o){var s=this.getData(),l=s.getName(r),u=s.get(s.mapDimension("value"),r);return createTooltipMarkup("nameValue",{name:l,value:u})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(SeriesModel$1);const ThemeRiverSeriesModel$1=ThemeRiverSeriesModel;function themeRiverLayout(n,t){n.eachSeriesByType("themeRiver",function(r){var a=r.getData(),o=r.coordinateSystem,s={},l=o.getRect();s.rect=l;var u=r.get("boundaryGap"),d=o.getAxis();if(s.boundaryGap=u,d.orient==="horizontal"){u[0]=parsePercent(u[0],l.height),u[1]=parsePercent(u[1],l.height);var v=l.height-u[0]-u[1];doThemeRiverLayout(a,r,v)}else{u[0]=parsePercent(u[0],l.width),u[1]=parsePercent(u[1],l.width);var g=l.width-u[0]-u[1];doThemeRiverLayout(a,r,g)}a.setLayout("layoutInfo",s)})}function doThemeRiverLayout(n,t,r){if(n.count())for(var a=t.coordinateSystem,o=t.getLayerSeries(),s=n.mapDimension("single"),l=n.mapDimension("value"),u=map$1(o,function(S){return map$1(S.indices,function(x){var w=a.dataToPoint(n.get(s,x));return w[1]=n.get(l,x),w})}),d=computeBaseline(u),v=d.y0,g=r/d.max,f=o.length,c=o[0].indices.length,y,_=0;_<c;++_){y=v[_]*g,n.setItemLayout(o[0].indices[_],{layerIndex:0,x:u[0][_][0],y0:y,y:u[0][_][1]*g});for(var b=1;b<f;++b)y+=u[b-1][_][1]*g,n.setItemLayout(o[b].indices[_],{layerIndex:b,x:u[b][_][0],y0:y,y:u[b][_][1]*g})}}function computeBaseline(n){for(var t=n.length,r=n[0].length,a=[],o=[],s=0,l=0;l<r;++l){for(var u=0,d=0;d<t;++d)u+=n[d][l][1];u>s&&(s=u),a.push(u)}for(var v=0;v<r;++v)o[v]=(s-a[v])/2;s=0;for(var g=0;g<r;++g){var f=a[g]+o[g];f>s&&(s=f)}return{y0:o,max:s}}function install$t(n){n.registerChartView(ThemeRiverView$1),n.registerSeriesModel(ThemeRiverSeriesModel$1),n.registerLayout(themeRiverLayout),n.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(n){__extends$1(t,n);function t(r,a,o,s){var l=n.call(this)||this;l.z2=DEFAULT_SECTOR_Z,l.textConfig={inside:!0},getECData(l).seriesIndex=a.seriesIndex;var u=new ZRText$1({z2:DEFAULT_TEXT_Z,silent:r.getModel().get(["label","silent"])});return l.setTextContent(u),l.updateData(!0,r,a,o,s),l}return t.prototype.updateData=function(r,a,o,s,l){this.node=a,a.piece=this,o=o||this._seriesModel,s=s||this._ecModel;var u=this;getECData(u).dataIndex=a.dataIndex;var d=a.getModel(),v=d.getModel("emphasis"),g=a.getLayout(),f=extend({},g);f.label=null;var c=a.getVisual("style");c.lineJoin="bevel";var y=a.getVisual("decal");y&&(c.decal=createOrUpdatePatternFromDecal(y,l));var _=getSectorCornerRadius(d.getModel("itemStyle"),f,!0);extend(f,_),each$f(SPECIAL_STATES,function(w){var T=u.ensureState(w),A=d.getModel([w,"itemStyle"]);T.style=A.getItemStyle();var E=getSectorCornerRadius(A,f);E&&(T.shape=E)}),r?(u.setShape(f),u.shape.r=g.r0,initProps(u,{shape:{r:g.r}},o,a.dataIndex)):(updateProps$1(u,{shape:f},o),saveOldStyle(u)),u.useStyle(c),this._updateLabel(o);var b=d.getShallow("cursor");b&&u.attr("cursor",b),this._seriesModel=o||this._seriesModel,this._ecModel=s||this._ecModel;var S=v.get("focus"),x=S==="ancestor"?a.getAncestorsIndices():S==="descendant"?a.getDescendantIndices():S;toggleHoverEmphasis(this,x,v.get("blurScope"),v.get("disabled"))},t.prototype._updateLabel=function(r){var a=this,o=this.node.getModel(),s=o.getModel("label"),l=this.node.getLayout(),u=l.endAngle-l.startAngle,d=(l.startAngle+l.endAngle)/2,v=Math.cos(d),g=Math.sin(d),f=this,c=f.getTextContent(),y=this.node.dataIndex,_=s.get("minAngle")/180*Math.PI,b=s.get("show")&&!(_!=null&&Math.abs(u)<_);c.ignore=!b,each$f(DISPLAY_STATES,function(x){var w=x==="normal"?o.getModel("label"):o.getModel([x,"label"]),T=x==="normal",A=T?c:c.ensureState(x),E=r.getFormattedLabel(y,x);T&&(E=E||a.node.name),A.style=createTextStyle(w,{},null,x!=="normal",!0),E&&(A.style.text=E);var $=w.get("show");$!=null&&!T&&(A.ignore=!$);var P=S(w,"position"),I=T?f:f.states[x],C=I.style.fill;I.textConfig={outsideFill:w.get("color")==="inherit"?C:null,inside:P!=="outside"};var M,D=S(w,"distance")||0,R=S(w,"align");P==="outside"?(M=l.r+D,R=d>Math.PI/2?"right":"left"):!R||R==="center"?(u===2*Math.PI&&l.r0===0?M=0:M=(l.r+l.r0)/2,R="center"):R==="left"?(M=l.r0+D,d>Math.PI/2&&(R="right")):R==="right"&&(M=l.r-D,d>Math.PI/2&&(R="left")),A.style.align=R,A.style.verticalAlign=S(w,"verticalAlign")||"middle",A.x=M*v+l.cx,A.y=M*g+l.cy;var N=S(w,"rotate"),O=0;N==="radial"?(O=normalizeRadian(-d),O>Math.PI/2&&O<Math.PI*1.5&&(O+=Math.PI)):N==="tangential"?(O=Math.PI/2-d,O>Math.PI/2?O-=Math.PI:O<-Math.PI/2&&(O+=Math.PI)):isNumber(N)&&(O=N*Math.PI/180),A.rotation=O});function S(x,w){var T=x.get(w);return T??s.get(w)}c.dirtyStyle()},t}(Sector$1);const SunburstPiece$1=SunburstPiece;var ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(n){n.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"sunburst",query:t},a);function a(o,s){var l=retrieveTargetInfo(t,[ROOT_TO_NODE_ACTION],o);if(l){var u=o.getViewRoot();u&&(t.direction=aboveViewRoot(u,l.node)?"rollUp":"drillDown"),o.resetViewRoot(l.node)}}}),n.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(t,r,a){t=extend({},t),r.eachComponent({mainType:"series",subType:"sunburst",query:t},o);function o(s){var l=retrieveTargetInfo(t,[HIGHLIGHT_ACTION],s);l&&(t.dataIndex=l.node.dataIndex)}a.dispatchAction(extend(t,{type:"highlight"}))}),n.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(t,r,a){t=extend({},t),a.dispatchAction(extend(t,{type:"downplay"}))})}var SunburstView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o,s){var l=this;this.seriesModel=r,this.api=o,this.ecModel=a;var u=r.getData(),d=u.tree.root,v=r.getViewRoot(),g=this.group,f=r.get("renderLabelForZeroData"),c=[];v.eachNode(function(w){c.push(w)});var y=this._oldChildren||[];_(c,y),x(d,v),this._initEvents(),this._oldChildren=c;function _(w,T){if(w.length===0&&T.length===0)return;new DataDiffer$1(T,w,A,A).add(E).update(E).remove(curry$1(E,null)).execute();function A($){return $.getId()}function E($,P){var I=$==null?null:w[$],C=P==null?null:T[P];b(I,C)}}function b(w,T){if(!f&&w&&!w.getValue()&&(w=null),w!==d&&T!==d){if(T&&T.piece)w?(T.piece.updateData(!1,w,r,a,o),u.setItemGraphicEl(w.dataIndex,T.piece)):S(T);else if(w){var A=new SunburstPiece$1(w,r,a,o);g.add(A),u.setItemGraphicEl(w.dataIndex,A)}}}function S(w){w&&w.piece&&(g.remove(w.piece),w.piece=null)}function x(w,T){T.depth>0?(l.virtualPiece?l.virtualPiece.updateData(!1,w,r,a,o):(l.virtualPiece=new SunburstPiece$1(w,r,a,o),g.add(l.virtualPiece)),T.piece.off("click"),l.virtualPiece.on("click",function(A){l._rootToNode(T.parentNode)})):l.virtualPiece&&(g.remove(l.virtualPiece),l.virtualPiece=null)}},t.prototype._initEvents=function(){var r=this;this.group.off("click"),this.group.on("click",function(a){var o=!1,s=r.seriesModel.getViewRoot();s.eachNode(function(l){if(!o&&l.piece&&l.piece===a.target){var u=l.getModel().get("nodeClick");if(u==="rootToNode")r._rootToNode(l);else if(u==="link"){var d=l.getModel(),v=d.get("link");if(v){var g=d.get("target",!0)||"_blank";windowOpen(v,g)}}o=!0}})})},t.prototype._rootToNode=function(r){r!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:r})},t.prototype.containPoint=function(r,a){var o=a.getData(),s=o.getItemLayout(0);if(s){var l=r[0]-s.cx,u=r[1]-s.cy,d=Math.sqrt(l*l+u*u);return d<=s.r&&d>=s.r0}},t.type="sunburst",t}(ChartView$1);const SunburstView$1=SunburstView;var SunburstSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r,a){var o={name:r.name,children:r.data};completeTreeValue(o);var s=this._levelModels=map$1(r.levels||[],function(d){return new Model$1(d,this,a)},this),l=Tree$1.createTree(o,this,u);function u(d){d.wrapMethod("getItemModel",function(v,g){var f=l.getNodeByDataIndex(g),c=s[f.depth];return c&&(v.parentModel=c),v})}return l.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(r){var a=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(r);return a.treePathInfo=wrapTreePathInfo(o,this),a},t.prototype.getLevelModel=function(r){return this._levelModels&&this._levelModels[r.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var a=this.getRawData().tree.root;(!r||r!==a&&!a.contains(r))&&(this._viewRoot=a)},t.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(SeriesModel$1);function completeTreeValue(n){var t=0;each$f(n.children,function(a){completeTreeValue(a);var o=a.value;isArray$1(o)&&(o=o[0]),t+=o});var r=n.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),isArray$1(n.value)?n.value[0]=r:n.value=r}const SunburstSeriesModel$1=SunburstSeriesModel;var RADIAN=Math.PI/180;function sunburstLayout(n,t,r){t.eachSeriesByType(n,function(a){var o=a.get("center"),s=a.get("radius");isArray$1(s)||(s=[0,s]),isArray$1(o)||(o=[o,o]);var l=r.getWidth(),u=r.getHeight(),d=Math.min(l,u),v=parsePercent(o[0],l),g=parsePercent(o[1],u),f=parsePercent(s[0],d/2),c=parsePercent(s[1],d/2),y=-a.get("startAngle")*RADIAN,_=a.get("minAngle")*RADIAN,b=a.getData().tree.root,S=a.getViewRoot(),x=S.depth,w=a.get("sort");w!=null&&initChildren(S,w);var T=0;each$f(S.children,function(L){!isNaN(L.getValue())&&T++});var A=S.getValue(),E=Math.PI/(A||T)*2,$=S.depth>0,P=S.height-($?-1:1),I=(c-f)/(P||1),C=a.get("clockwise"),M=a.get("stillShowZeroSum"),D=C?1:-1,R=function(L,B){if(L){var V=B;if(L!==b){var H=L.getValue(),X=A===0&&M?E:H*E;X<_&&(X=_),V=B+D*X;var U=L.depth-x-($?-1:1),te=f+I*U,ee=f+I*(U+1),q=a.getLevelModel(L);if(q){var ie=q.get("r0",!0),pe=q.get("r",!0),j=q.get("radius",!0);j!=null&&(ie=j[0],pe=j[1]),ie!=null&&(te=parsePercent(ie,d/2)),pe!=null&&(ee=parsePercent(pe,d/2))}L.setLayout({angle:X,startAngle:B,endAngle:V,clockwise:C,cx:v,cy:g,r0:te,r:ee})}if(L.children&&L.children.length){var Q=0;each$f(L.children,function(J){Q+=R(J,B+Q)})}return V-B}};if($){var N=f,O=f+I,F=Math.PI*2;b.setLayout({angle:F,startAngle:y,endAngle:y+F,clockwise:C,cx:v,cy:g,r0:N,r:O})}R(S,y)})}function initChildren(n,t){var r=n.children||[];n.children=sort(r,t),r.length&&each$f(n.children,function(a){initChildren(a,t)})}function sort(n,t){if(isFunction(t)){var r=map$1(n,function(o,s){var l=o.getValue();return{params:{depth:o.depth,height:o.height,dataIndex:o.dataIndex,getValue:function(){return l}},index:s}});return r.sort(function(o,s){return t(o.params,s.params)}),map$1(r,function(o){return n[o.index]})}else{var a=t==="asc";return n.sort(function(o,s){var l=(o.getValue()-s.getValue())*(a?1:-1);return l===0?(o.dataIndex-s.dataIndex)*(a?-1:1):l})}}function sunburstVisual(n){var t={};function r(a,o,s){for(var l=a;l&&l.depth>1;)l=l.parentNode;var u=o.getColorFromPalette(l.name||l.dataIndex+"",t);return a.depth>1&&isString(u)&&(u=lift(u,(a.depth-1)/(s-1)*.5)),u}n.eachSeriesByType("sunburst",function(a){var o=a.getData(),s=o.tree;s.eachNode(function(l){var u=l.getModel(),d=u.getModel("itemStyle").getItemStyle();d.fill||(d.fill=r(l,a,s.root.height));var v=o.ensureUniqueItemVisual(l.dataIndex,"style");extend(v,d)})})}function install$s(n){n.registerChartView(SunburstView$1),n.registerSeriesModel(SunburstSeriesModel$1),n.registerLayout(curry$1(sunburstLayout,"sunburst")),n.registerProcessor(curry$1(dataFilter$1,"sunburst")),n.registerVisual(sunburstVisual),installSunburstAction(n)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,a){return createSeriesData(null,this)},t.prototype.getDataParams=function(r,a,o){var s=n.prototype.getDataParams.call(this,r,a);return o&&(s.info=customInnerStore(o).info),s},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(SeriesModel$1);const CustomSeriesModel$1=CustomSeriesModel;function dataToCoordSize$3(n,t){return t=t||[0,0],map$1(["x","y"],function(r,a){var o=this.getAxis(r),s=t[a],l=n[a]/2;return o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(s-l)-o.dataToCoord(s+l))},this)}function cartesianPrepareCustom(n){var t=n.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return n.dataToPoint(r)},size:bind$1(dataToCoordSize$3,n)}}}function dataToCoordSize$2(n,t){return t=t||[0,0],map$1([0,1],function(r){var a=t[r],o=n[r]/2,s=[],l=[];return s[r]=a-o,l[r]=a+o,s[1-r]=l[1-r]=t[1-r],Math.abs(this.dataToPoint(s)[r]-this.dataToPoint(l)[r])},this)}function geoPrepareCustom(n){var t=n.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:n.getZoom()},api:{coord:function(r){return n.dataToPoint(r)},size:bind$1(dataToCoordSize$2,n)}}}function dataToCoordSize$1(n,t){var r=this.getAxis(),a=t instanceof Array?t[0]:t,o=(n instanceof Array?n[0]:n)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(a-o)-r.dataToCoord(a+o))}function singlePrepareCustom(n){var t=n.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return n.dataToPoint(r)},size:bind$1(dataToCoordSize$1,n)}}}function dataToCoordSize(n,t){return t=t||[0,0],map$1(["Radius","Angle"],function(r,a){var o="get"+r+"Axis",s=this[o](),l=t[a],u=n[a]/2,d=s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(l-u)-s.dataToCoord(l+u));return r==="Angle"&&(d=d*Math.PI/180),d},this)}function polarPrepareCustom(n){var t=n.getRadiusAxis(),r=n.getAngleAxis(),a=t.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:a[1],r0:a[0]},api:{coord:function(o){var s=t.dataToRadius(o[0]),l=r.dataToAngle(o[1]),u=n.coordToPoint([s,l]);return u.push(s,l*Math.PI/180),u},size:bind$1(dataToCoordSize,n)}}}function calendarPrepareCustom(n){var t=n.getRect(),r=n.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(a,o){return n.dataToPoint(a,o)}}}}function isEC4CompatibleStyle(n,t,r,a){return n&&(n.legacy||n.legacy!==!1&&!r&&!a&&t!=="tspan"&&(t==="text"||hasOwn(n,"text")))}function convertFromEC4CompatibleStyle(n,t,r){var a=n,o,s,l;if(t==="text")l=a;else{l={},hasOwn(a,"text")&&(l.text=a.text),hasOwn(a,"rich")&&(l.rich=a.rich),hasOwn(a,"textFill")&&(l.fill=a.textFill),hasOwn(a,"textStroke")&&(l.stroke=a.textStroke),hasOwn(a,"fontFamily")&&(l.fontFamily=a.fontFamily),hasOwn(a,"fontSize")&&(l.fontSize=a.fontSize),hasOwn(a,"fontStyle")&&(l.fontStyle=a.fontStyle),hasOwn(a,"fontWeight")&&(l.fontWeight=a.fontWeight),s={type:"text",style:l,silent:!0},o={};var u=hasOwn(a,"textPosition");r?o.position=u?a.textPosition:"inside":u&&(o.position=a.textPosition),hasOwn(a,"textPosition")&&(o.position=a.textPosition),hasOwn(a,"textOffset")&&(o.offset=a.textOffset),hasOwn(a,"textRotation")&&(o.rotation=a.textRotation),hasOwn(a,"textDistance")&&(o.distance=a.textDistance)}return convertEC4CompatibleRichItem(l,n),each$f(l.rich,function(d){convertEC4CompatibleRichItem(d,d)}),{textConfig:o,textContent:s}}function convertEC4CompatibleRichItem(n,t){t&&(t.font=t.textFont||t.font,hasOwn(t,"textStrokeWidth")&&(n.lineWidth=t.textStrokeWidth),hasOwn(t,"textAlign")&&(n.align=t.textAlign),hasOwn(t,"textVerticalAlign")&&(n.verticalAlign=t.textVerticalAlign),hasOwn(t,"textLineHeight")&&(n.lineHeight=t.textLineHeight),hasOwn(t,"textWidth")&&(n.width=t.textWidth),hasOwn(t,"textHeight")&&(n.height=t.textHeight),hasOwn(t,"textBackgroundColor")&&(n.backgroundColor=t.textBackgroundColor),hasOwn(t,"textPadding")&&(n.padding=t.textPadding),hasOwn(t,"textBorderColor")&&(n.borderColor=t.textBorderColor),hasOwn(t,"textBorderWidth")&&(n.borderWidth=t.textBorderWidth),hasOwn(t,"textBorderRadius")&&(n.borderRadius=t.textBorderRadius),hasOwn(t,"textBoxShadowColor")&&(n.shadowColor=t.textBoxShadowColor),hasOwn(t,"textBoxShadowBlur")&&(n.shadowBlur=t.textBoxShadowBlur),hasOwn(t,"textBoxShadowOffsetX")&&(n.shadowOffsetX=t.textBoxShadowOffsetX),hasOwn(t,"textBoxShadowOffsetY")&&(n.shadowOffsetY=t.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(n,t,r){var a=n;a.textPosition=a.textPosition||r.position||"inside",r.offset!=null&&(a.textOffset=r.offset),r.rotation!=null&&(a.textRotation=r.rotation),r.distance!=null&&(a.textDistance=r.distance);var o=a.textPosition.indexOf("inside")>=0,s=n.fill||"#000";convertToEC4RichItem(a,t);var l=a.textFill==null;return o?l&&(a.textFill=r.insideFill||"#fff",!a.textStroke&&r.insideStroke&&(a.textStroke=r.insideStroke),!a.textStroke&&(a.textStroke=s),a.textStrokeWidth==null&&(a.textStrokeWidth=2)):(l&&(a.textFill=n.fill||r.outsideFill||"#000"),!a.textStroke&&r.outsideStroke&&(a.textStroke=r.outsideStroke)),a.text=t.text,a.rich=t.rich,each$f(t.rich,function(u){convertToEC4RichItem(u,u)}),a}function convertToEC4RichItem(n,t){t&&(hasOwn(t,"fill")&&(n.textFill=t.fill),hasOwn(t,"stroke")&&(n.textStroke=t.fill),hasOwn(t,"lineWidth")&&(n.textStrokeWidth=t.lineWidth),hasOwn(t,"font")&&(n.font=t.font),hasOwn(t,"fontStyle")&&(n.fontStyle=t.fontStyle),hasOwn(t,"fontWeight")&&(n.fontWeight=t.fontWeight),hasOwn(t,"fontSize")&&(n.fontSize=t.fontSize),hasOwn(t,"fontFamily")&&(n.fontFamily=t.fontFamily),hasOwn(t,"align")&&(n.textAlign=t.align),hasOwn(t,"verticalAlign")&&(n.textVerticalAlign=t.verticalAlign),hasOwn(t,"lineHeight")&&(n.textLineHeight=t.lineHeight),hasOwn(t,"width")&&(n.textWidth=t.width),hasOwn(t,"height")&&(n.textHeight=t.height),hasOwn(t,"backgroundColor")&&(n.textBackgroundColor=t.backgroundColor),hasOwn(t,"padding")&&(n.textPadding=t.padding),hasOwn(t,"borderColor")&&(n.textBorderColor=t.borderColor),hasOwn(t,"borderWidth")&&(n.textBorderWidth=t.borderWidth),hasOwn(t,"borderRadius")&&(n.textBorderRadius=t.borderRadius),hasOwn(t,"shadowColor")&&(n.textBoxShadowColor=t.shadowColor),hasOwn(t,"shadowBlur")&&(n.textBoxShadowBlur=t.shadowBlur),hasOwn(t,"shadowOffsetX")&&(n.textBoxShadowOffsetX=t.shadowOffsetX),hasOwn(t,"shadowOffsetY")&&(n.textBoxShadowOffsetY=t.shadowOffsetY),hasOwn(t,"textShadowColor")&&(n.textShadowColor=t.textShadowColor),hasOwn(t,"textShadowBlur")&&(n.textShadowBlur=t.textShadowBlur),hasOwn(t,"textShadowOffsetX")&&(n.textShadowOffsetX=t.textShadowOffsetX),hasOwn(t,"textShadowOffsetY")&&(n.textShadowOffsetY=t.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(n,t){return n[t]=1,n},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(n,t,r,a,o){var s=n+"Animation",l=getAnimationConfig(n,a,o)||{},u=transitionInnerStore(t).userDuring;return l.duration>0&&(l.during=u?bind$1(duringCall,{el:t,userDuring:u}):null,l.setToFinal=!0,l.scope=n),extend(l,r[s]),l}function applyUpdateTransition(n,t,r,a){a=a||{};var o=a.dataIndex,s=a.isInit,l=a.clearStyle,u=r.isAnimationEnabled(),d=transitionInnerStore(n),v=t.style;d.userDuring=t.during;var g={},f={};if(prepareTransformAllPropsFinal(n,t,f),prepareShapeOrExtraAllPropsFinal("shape",t,f),prepareShapeOrExtraAllPropsFinal("extra",t,f),!s&&u&&(prepareTransformTransitionFrom(n,t,g),prepareShapeOrExtraTransitionFrom("shape",n,t,g),prepareShapeOrExtraTransitionFrom("extra",n,t,g),prepareStyleTransitionFrom(n,t,v,g)),f.style=v,applyPropsDirectly(n,f,l),applyMiscProps(n,t),u)if(s){var c={};each$f(ELEMENT_ANIMATABLE_PROPS,function(_){var b=_?t[_]:t;b&&b.enterFrom&&(_&&(c[_]=c[_]||{}),extend(_?c[_]:c,b.enterFrom))});var y=getElementAnimationConfig("enter",n,t,r,o);y.duration>0&&n.animateFrom(c,y)}else applyPropsTransition(n,t,o||0,r,g);updateLeaveTo(n,t),v?n.dirty():n.markRedraw()}function updateLeaveTo(n,t){for(var r=transitionInnerStore(n).leaveToProps,a=0;a<ELEMENT_ANIMATABLE_PROPS.length;a++){var o=ELEMENT_ANIMATABLE_PROPS[a],s=o?t[o]:t;s&&s.leaveTo&&(r||(r=transitionInnerStore(n).leaveToProps={}),o&&(r[o]=r[o]||{}),extend(o?r[o]:r,s.leaveTo))}}function applyLeaveTransition(n,t,r,a){if(n){var o=n.parent,s=transitionInnerStore(n).leaveToProps;if(s){var l=getElementAnimationConfig("update",n,t,r,0);l.done=function(){o.remove(n),a&&a()},n.animateTo(s,l)}else o.remove(n),a&&a()}}function isTransitionAll(n){return n==="all"}function applyPropsDirectly(n,t,r){var a=t.style;if(!n.isGroup&&a){if(r){n.useStyle({});for(var o=n.animators,s=0;s<o.length;s++){var l=o[s];l.targetName==="style"&&l.changeTarget(n.style)}}n.setStyle(a)}t&&(t.style=null,t&&n.attr(t),t.style=a)}function applyPropsTransition(n,t,r,a,o){if(o){var s=getElementAnimationConfig("update",n,t,a,r);s.duration>0&&n.animateFrom(o,s)}}function applyMiscProps(n,t){hasOwn(t,"silent")&&(n.silent=t.silent),hasOwn(t,"ignore")&&(n.ignore=t.ignore),n instanceof Displayable$1&&hasOwn(t,"invisible")&&(n.invisible=t.invisible),n instanceof Path$1&&hasOwn(t,"autoBatch")&&(n.autoBatch=t.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(n,t){return tmpDuringScope.el[n]=t,this},getTransform:function(n){return tmpDuringScope.el[n]},setShape:function(n,t){var r=tmpDuringScope.el,a=r.shape||(r.shape={});return a[n]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(n){var t=tmpDuringScope.el.shape;if(t)return t[n]},setStyle:function(n,t){var r=tmpDuringScope.el,a=r.style;return a&&(a[n]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(n){var t=tmpDuringScope.el.style;if(t)return t[n]},setExtra:function(n,t){var r=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return r[n]=t,this},getExtra:function(n){var t=tmpDuringScope.el.extra;if(t)return t[n]}};function duringCall(){var n=this,t=n.el;if(t){var r=transitionInnerStore(t).userDuring,a=n.userDuring;if(r!==a){n.el=n.userDuring=null;return}tmpDuringScope.el=t,a(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(n,t,r,a){var o=r[n];if(o){var s=t[n],l;if(s){var u=r.transition,d=o.transition;if(d)if(!l&&(l=a[n]={}),isTransitionAll(d))extend(l,s);else for(var v=normalizeToArray(d),g=0;g<v.length;g++){var f=v[g],c=s[f];l[f]=c}else if(isTransitionAll(u)||indexOf(u,n)>=0){!l&&(l=a[n]={});for(var y=keys(s),g=0;g<y.length;g++){var f=y[g],c=s[f];isNonStyleTransitionEnabled(o[f],c)&&(l[f]=c)}}}}}function prepareShapeOrExtraAllPropsFinal(n,t,r){var a=t[n];if(a)for(var o=r[n]={},s=keys(a),l=0;l<s.length;l++){var u=s[l];o[u]=cloneValue(a[u])}}function prepareTransformTransitionFrom(n,t,r){for(var a=t.transition,o=isTransitionAll(a)?TRANSFORMABLE_PROPS:normalizeToArray(a||[]),s=0;s<o.length;s++){var l=o[s];if(!(l==="style"||l==="shape"||l==="extra")){var u=n[l];r[l]=u}}}function prepareTransformAllPropsFinal(n,t,r){for(var a=0;a<LEGACY_TRANSFORM_PROPS.length;a++){var o=LEGACY_TRANSFORM_PROPS[a],s=LEGACY_TRANSFORM_PROPS_MAP[o],l=t[o];l&&(r[s[0]]=l[0],r[s[1]]=l[1])}for(var a=0;a<TRANSFORMABLE_PROPS.length;a++){var u=TRANSFORMABLE_PROPS[a];t[u]!=null&&(r[u]=t[u])}}function prepareStyleTransitionFrom(n,t,r,a){if(r){var o=n.style,s;if(o){var l=r.transition,u=t.transition;if(l&&!isTransitionAll(l)){var d=normalizeToArray(l);!s&&(s=a.style={});for(var v=0;v<d.length;v++){var g=d[v],f=o[g];s[g]=f}}else if(n.getAnimationStyleProps&&(isTransitionAll(u)||isTransitionAll(l)||indexOf(u,"style")>=0)){var c=n.getAnimationStyleProps(),y=c?c.style:null;if(y){!s&&(s=a.style={});for(var _=keys(r),v=0;v<_.length;v++){var g=_[v];if(y[g]){var f=o[g];s[g]=f}}}}}}}function isNonStyleTransitionEnabled(n,t){return isArrayLike(n)?n!==t:n!=null&&isFinite(n)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(n){n.stopAnimation("keyframe"),n.attr(getStateToRestore(n))}function applyKeyframeAnimation(n,t,r){if(!(!r.isAnimationEnabled()||!t)){if(isArray$1(t)){each$f(t,function(u){applyKeyframeAnimation(n,u,r)});return}var a=t.keyframes,o=t.duration;if(r&&o==null){var s=getAnimationConfig("enter",r,0);o=s&&s.duration}if(!(!a||!o)){var l=getStateToRestore(n);each$f(ELEMENT_ANIMATABLE_PROPS,function(u){if(!(u&&!n[u])){var d;a.sort(function(v,g){return v.percent-g.percent}),each$f(a,function(v){var g=n.animators,f=u?v[u]:v;if(f){var c=keys(f);if(u||(c=filter(c,function(b){return indexOf(KEYFRAME_EXCLUDE_KEYS,b)<0})),!!c.length){d||(d=n.animate(u,t.loop,!0),d.scope="keyframe");for(var y=0;y<g.length;y++)g[y]!==d&&g[y].targetName===d.targetName&&g[y].stopTracks(c);u&&(l[u]=l[u]||{});var _=u?l[u]:l;each$f(c,function(b){_[b]=((u?n[u]:n)||{})[b]}),d.whenWithKeys(o*v.percent,f,c,v.easing)}}}),d&&d.delay(t.delay||0).duration(o).start(t.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(n){return n instanceof Path$1}function isDisplayable(n){return n instanceof Displayable$1}function copyElement(n,t){t.copyTransform(n),isDisplayable(t)&&isDisplayable(n)&&(t.setStyle(n.style),t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel,t.invisible=n.invisible,t.ignore=n.ignore,isPath(t)&&isPath(n)&&t.setShape(n.shape))}var CustomChartView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o,s){this._progressiveEls=null;var l=this._data,u=r.getData(),d=this.group,v=makeRenderItem(r,u,a,o);l||d.removeAll(),u.diff(l).add(function(f){createOrUpdateItem(o,null,f,v(f,s),r,d,u)}).remove(function(f){var c=l.getItemGraphicEl(f);c&&applyLeaveTransition(c,customInnerStore(c).option,r)}).update(function(f,c){var y=l.getItemGraphicEl(c);createOrUpdateItem(o,y,f,v(f,s),r,d,u)}).execute();var g=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;g?d.setClipPath(g):d.removeClipPath(),this._data=u},t.prototype.incrementalPrepareRender=function(r,a,o){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,a,o,s,l){var u=a.getData(),d=makeRenderItem(a,u,o,s),v=this._progressiveEls=[];function g(y){y.isGroup||(y.incremental=!0,y.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var c=createOrUpdateItem(null,null,f,d(f,l),a,this.group,u);c&&(c.traverse(g),v.push(c))}},t.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,a,o,s){var l=a.element;if(l==null||o.name===l)return!0;for(;(o=o.__hostTarget||o.parent)&&o!==this.group;)if(o.name===l)return!0;return!1},t.type="custom",t}(ChartView$1);const CustomChartView$1=CustomChartView;function createEl$1(n){var t=n.type,r;if(t==="path"){var a=n.shape,o=a.width!=null&&a.height!=null?{x:a.x||0,y:a.y||0,width:a.width,height:a.height}:null,s=getPathData(a);r=makePath(s,null,o,a.layout||"center"),customInnerStore(r).customPathData=s}else if(t==="image")r=new ZRImage$1({}),customInnerStore(r).customImagePath=n.style.image;else if(t==="text")r=new ZRText$1({});else if(t==="group")r=new Group$4;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var l=getShapeClass(t);if(!l){var u="";throwError(u)}r=new l}return customInnerStore(r).customGraphicType=t,r.name=n.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function updateElNormal(n,t,r,a,o,s,l){stopPreviousKeyframeAnimationAndRestore(t);var u=o&&o.normal.cfg;u&&t.setTextConfig(u),a&&a.transition==null&&(a.transition=DEFAULT_TRANSITION);var d=a&&a.style;if(d){if(t.type==="text"){var v=d;hasOwn(v,"textFill")&&(v.fill=v.textFill),hasOwn(v,"textStroke")&&(v.stroke=v.textStroke)}var g=void 0,f=isPath(t)?d.decal:null;n&&f&&(f.dirty=!0,g=createOrUpdatePatternFromDecal(f,n)),d.__decalPattern=g}if(isDisplayable(t)&&d){var g=d.__decalPattern;g&&(d.decal=g)}applyUpdateTransition(t,a,s,{dataIndex:r,isInit:l,clearStyle:!0}),applyKeyframeAnimation(t,a.keyframeAnimation,s)}function updateElOnState(n,t,r,a,o){var s=t.isGroup?null:t,l=o&&o[n].cfg;if(s){var u=s.ensureState(n);if(a===!1){var d=s.getState(n);d&&(d.style=null)}else u.style=a||null;l&&(u.textConfig=l),setDefaultStateProxy(s)}}function updateZ(n,t,r){if(!n.isGroup){var a=n,o=r.currentZ,s=r.currentZLevel;a.z=o,a.zlevel=s;var l=t.z2;l!=null&&(a.z2=l||0);for(var u=0;u<STATES.length;u++)updateZForEachState(a,t,STATES[u])}}function updateZForEachState(n,t,r){var a=r===NORMAL,o=a?t:retrieveStateOption(t,r),s=o?o.z2:null,l;s!=null&&(l=a?n:n.ensureState(r),l.z2=s||0)}function makeRenderItem(n,t,r,a){var o=n.get("renderItem"),s=n.coordinateSystem,l={};s&&(l=s.prepareCustoms?s.prepareCustoms(s):prepareCustoms[s.type](s));for(var u=defaults({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:A,style:$,ordinalRawValue:E,styleEmphasis:P,visual:M,barLayout:D,currentSeriesIndices:R,font:N},l.api||{}),d={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:l.coordSys,dataInsideLength:t.count(),encode:wrapEncodeDef(n.getData())},v,g,f={},c={},y={},_={},b=0;b<STATES.length;b++){var S=STATES[b];y[S]=n.getModel(PATH_ITEM_STYLE[S]),_[S]=n.getModel(PATH_LABEL[S])}function x(O){return O===v?g||(g=t.getItemModel(O)):t.getItemModel(O)}function w(O,F){return t.hasItemOption?O===v?f[F]||(f[F]=x(O).getModel(PATH_ITEM_STYLE[F])):x(O).getModel(PATH_ITEM_STYLE[F]):y[F]}function T(O,F){return t.hasItemOption?O===v?c[F]||(c[F]=x(O).getModel(PATH_LABEL[F])):x(O).getModel(PATH_LABEL[F]):_[F]}return function(O,F){return v=O,g=null,f={},c={},o&&o(defaults({dataIndexInside:O,dataIndex:t.getRawIndex(O),actionType:F?F.type:null},d),u)};function A(O,F){return F==null&&(F=v),t.getStore().get(t.getDimensionIndex(O||0),F)}function E(O,F){F==null&&(F=v),O=O||0;var L=t.getDimensionInfo(O);if(!L){var B=t.getDimensionIndex(O);return B>=0?t.getStore().get(B,F):void 0}var V=t.get(L.name,F),H=L&&L.ordinalMeta;return H?H.categories[V]:V}function $(O,F){F==null&&(F=v);var L=t.getItemVisual(F,"style"),B=L&&L.fill,V=L&&L.opacity,H=w(F,NORMAL).getItemStyle();B!=null&&(H.fill=B),V!=null&&(H.opacity=V);var X={inheritColor:isString(B)?B:"#000"},U=T(F,NORMAL),te=createTextStyle(U,null,X,!1,!0);te.text=U.getShallow("show")?retrieve2(n.getFormattedLabel(F,NORMAL),getDefaultLabel(t,F)):null;var ee=createTextConfig(U,X,!1);return C(O,H),H=convertToEC4StyleForCustomSerise(H,te,ee),O&&I(H,O),H.legacy=!0,H}function P(O,F){F==null&&(F=v);var L=w(F,EMPHASIS).getItemStyle(),B=T(F,EMPHASIS),V=createTextStyle(B,null,null,!0,!0);V.text=B.getShallow("show")?retrieve3(n.getFormattedLabel(F,EMPHASIS),n.getFormattedLabel(F,NORMAL),getDefaultLabel(t,F)):null;var H=createTextConfig(B,null,!0);return C(O,L),L=convertToEC4StyleForCustomSerise(L,V,H),O&&I(L,O),L.legacy=!0,L}function I(O,F){for(var L in F)hasOwn(F,L)&&(O[L]=F[L])}function C(O,F){O&&(O.textFill&&(F.textFill=O.textFill),O.textPosition&&(F.textPosition=O.textPosition))}function M(O,F){if(F==null&&(F=v),hasOwn(STYLE_VISUAL_TYPE,O)){var L=t.getItemVisual(F,"style");return L?L[STYLE_VISUAL_TYPE[O]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,O))return t.getItemVisual(F,O)}function D(O){if(s.type==="cartesian2d"){var F=s.getBaseAxis();return getLayoutOnAxis(defaults({axis:F},O))}}function R(){return r.getCurrentSeriesIndices()}function N(O){return getFont(O,r)}}function wrapEncodeDef(n){var t={};return each$f(n.dimensions,function(r){var a=n.getDimensionInfo(r);if(!a.isExtraCoord){var o=a.coordDim,s=t[o]=t[o]||[];s[a.coordDimIndex]=n.getDimensionIndex(r)}}),t}function createOrUpdateItem(n,t,r,a,o,s,l){if(!a){s.remove(t);return}var u=doCreateOrUpdateEl(n,t,r,a,o,s);return u&&l.setItemGraphicEl(r,u),u&&toggleHoverEmphasis(u,a.focus,a.blurScope,a.emphasisDisabled),u}function doCreateOrUpdateEl(n,t,r,a,o,s){var l=-1,u=t;t&&doesElNeedRecreate(t,a,o)&&(l=indexOf(s.childrenRef(),t),t=null);var d=!t,v=t;v?v.clearStates():(v=createEl$1(a),u&&copyElement(u,v)),a.morph===!1?v.disableMorphing=!0:v.disableMorphing&&(v.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(v,r,a,o,d,attachedTxInfoTmp),doCreateOrUpdateClipPath(v,r,a,o,d),updateElNormal(n,v,r,a,attachedTxInfoTmp,o,d),hasOwn(a,"info")&&(customInnerStore(v).info=a.info);for(var g=0;g<STATES.length;g++){var f=STATES[g];if(f!==NORMAL){var c=retrieveStateOption(a,f),y=retrieveStyleOptionOnState(a,c,f);updateElOnState(f,v,c,y,attachedTxInfoTmp)}}return updateZ(v,a,o),a.type==="group"&&mergeChildren(n,v,r,a,o),l>=0?s.replaceAt(v,l):s.add(v),v}function doesElNeedRecreate(n,t,r){var a=customInnerStore(n),o=t.type,s=t.shape,l=t.style;return r.isUniversalTransitionEnabled()||o!=null&&o!==a.customGraphicType||o==="path"&&hasOwnPathData(s)&&getPathData(s)!==a.customPathData||o==="image"&&hasOwn(l,"image")&&l.image!==a.customImagePath}function doCreateOrUpdateClipPath(n,t,r,a,o){var s=r.clipPath;if(s===!1)n&&n.getClipPath()&&n.removeClipPath();else if(s){var l=n.getClipPath();l&&doesElNeedRecreate(l,s,a)&&(l=null),l||(l=createEl$1(s),n.setClipPath(l)),updateElNormal(null,l,t,s,null,a,o)}}function doCreateOrUpdateAttachedTx(n,t,r,a,o,s){if(!n.isGroup){processTxInfo(r,null,s),processTxInfo(r,EMPHASIS,s);var l=s.normal.conOpt,u=s.emphasis.conOpt,d=s.blur.conOpt,v=s.select.conOpt;if(l!=null||u!=null||v!=null||d!=null){var g=n.getTextContent();if(l===!1)g&&n.removeTextContent();else{l=s.normal.conOpt=l||{type:"text"},g?g.clearStates():(g=createEl$1(l),n.setTextContent(g)),updateElNormal(null,g,t,l,null,a,o);for(var f=l&&l.style,c=0;c<STATES.length;c++){var y=STATES[c];if(y!==NORMAL){var _=s[y].conOpt;updateElOnState(y,g,_,retrieveStyleOptionOnState(l,_,y),null)}}f?g.dirty():g.markRedraw()}}}}function processTxInfo(n,t,r){var a=t?retrieveStateOption(n,t):n,o=t?retrieveStyleOptionOnState(n,a,EMPHASIS):n.style,s=n.type,l=a?a.textConfig:null,u=n.textContent,d=u?t?retrieveStateOption(u,t):u:null;if(o&&(r.isLegacy||isEC4CompatibleStyle(o,s,!!l,!!d))){r.isLegacy=!0;var v=convertFromEC4CompatibleStyle(o,s,!t);!l&&v.textConfig&&(l=v.textConfig),!d&&v.textContent&&(d=v.textContent)}if(!t&&d){var g=d;!g.type&&(g.type="text")}var f=t?r[t]:r.normal;f.cfg=l,f.conOpt=d}function retrieveStateOption(n,t){return t?n?n[t]:null:n}function retrieveStyleOptionOnState(n,t,r){var a=t&&t.style;return a==null&&r===EMPHASIS&&n&&(a=n.styleEmphasis),a}function mergeChildren(n,t,r,a,o){var s=a.children,l=s?s.length:0,u=a.$mergeChildren,d=u==="byName"||a.diffChildrenByName,v=u===!1;if(!(!l&&!d&&!v)){if(d){diffGroupChildren({api:n,oldChildren:t.children()||[],newChildren:s||[],dataIndex:r,seriesModel:o,group:t});return}v&&t.removeAll();for(var g=0;g<l;g++){var f=s[g],c=t.childAt(g);f?(f.ignore==null&&(f.ignore=!1),doCreateOrUpdateEl(n,c,r,f,o,t)):c.ignore=!0}for(var y=t.childCount()-1;y>=g;y--){var _=t.childAt(y);removeChildFromGroup(t,_,o)}}}function removeChildFromGroup(n,t,r){t&&applyLeaveTransition(t,customInnerStore(n).option,r)}function diffGroupChildren(n){new DataDiffer$1(n.oldChildren,n.newChildren,getKey,getKey,n).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(n,t){var r=n&&n.name;return r??GROUP_DIFF_PREFIX+t}function processAddUpdate(n,t){var r=this.context,a=n!=null?r.newChildren[n]:null,o=t!=null?r.oldChildren[t]:null;doCreateOrUpdateEl(r.api,o,r.dataIndex,a,r.seriesModel,r.group)}function processRemove(n){var t=this.context,r=t.oldChildren[n];r&&applyLeaveTransition(r,customInnerStore(r).option,t.seriesModel)}function getPathData(n){return n&&(n.pathData||n.d)}function hasOwnPathData(n){return n&&(hasOwn(n,"pathData")||hasOwn(n,"d"))}function install$r(n){n.registerChartView(CustomChartView$1),n.registerSeriesModel(CustomSeriesModel$1)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(t,r,a,o){var s=r.get("value"),l=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=a,!(!o&&this._lastValue===s&&this._lastStatus===l)){this._lastValue=s,this._lastStatus=l;var u=this._group,d=this._handle;if(!l||l==="hide"){u&&u.hide(),d&&d.hide();return}u&&u.show(),d&&d.show();var v={};this.makeElOption(v,s,t,r,a);var g=v.graphicKey;g!==this._lastGraphicKey&&this.clear(a),this._lastGraphicKey=g;var f=this._moveAnimation=this.determineAnimation(t,r);if(!u)u=this._group=new Group$4,this.createPointerEl(u,v,t,r),this.createLabelEl(u,v,t,r),a.getZr().add(u);else{var c=curry$1(updateProps,r,f);this.updatePointerEl(u,v,c),this.updateLabelEl(u,v,c,r)}updateMandatoryProps(u,r,!0),this._renderHandle(s)}},n.prototype.remove=function(t){this.clear(t)},n.prototype.dispose=function(t){this.clear(t)},n.prototype.determineAnimation=function(t,r){var a=r.get("animation"),o=t.axis,s=o.type==="category",l=r.get("snap");if(!l&&!s)return!1;if(a==="auto"||a==null){var u=this.animationThreshold;if(s&&o.getBandWidth()>u)return!0;if(l){var d=getAxisInfo$1(t).seriesDataCount,v=o.getExtent();return Math.abs(v[0]-v[1])/d>u}return!1}return a===!0},n.prototype.makeElOption=function(t,r,a,o,s){},n.prototype.createPointerEl=function(t,r,a,o){var s=r.pointer;if(s){var l=inner$b(t).pointerEl=new graphic[s.type](clone$1(r.pointer));t.add(l)}},n.prototype.createLabelEl=function(t,r,a,o){if(r.label){var s=inner$b(t).labelEl=new ZRText$1(clone$1(r.label));t.add(s),updateLabelShowHide(s,o)}},n.prototype.updatePointerEl=function(t,r,a){var o=inner$b(t).pointerEl;o&&r.pointer&&(o.setStyle(r.pointer.style),a(o,{shape:r.pointer.shape}))},n.prototype.updateLabelEl=function(t,r,a,o){var s=inner$b(t).labelEl;s&&(s.setStyle(r.label.style),a(s,{x:r.label.x,y:r.label.y}),updateLabelShowHide(s,o))},n.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,a=this._api.getZr(),o=this._handle,s=r.getModel("handle"),l=r.get("status");if(!s.get("show")||!l||l==="hide"){o&&a.remove(o),this._handle=null;return}var u;this._handle||(u=!0,o=this._handle=createIcon(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(v){stop(v.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),a.add(o)),updateMandatoryProps(o,r,!1),o.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var d=s.get("size");isArray$1(d)||(d=[d,d]),o.scaleX=d[0]/2,o.scaleY=d[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,u)}},n.prototype._moveHandleToValue=function(t,r){updateProps(this._axisPointerModel,!r&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(t,r){var a=this._handle;if(a){this._dragging=!0;var o=this.updateHandleTransform(getHandleTransProps(a),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=o,a.stopAnimation(),a.attr(getHandleTransProps(o)),inner$b(a).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var r=this._payloadInfo,a=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:a.axis.dim,axisIndex:a.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),a=this._group,o=this._handle;r&&a&&(this._lastGraphicKey=null,a&&r.remove(a),o&&r.remove(o),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(t,r,a){return a=a||0,{x:t[a],y:t[1-a],width:r[a],height:r[1-a]}},n}();function updateProps(n,t,r,a){propsEqual(inner$b(r).lastProp,a)||(inner$b(r).lastProp=a,t?updateProps$1(r,a,n):(r.stopAnimation(),r.attr(a)))}function propsEqual(n,t){if(isObject$3(n)&&isObject$3(t)){var r=!0;return each$f(t,function(a,o){r=r&&propsEqual(n[o],a)}),!!r}else return n===t}function updateLabelShowHide(n,t){n[t.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function updateMandatoryProps(n,t,r){var a=t.get("z"),o=t.get("zlevel");n&&n.traverse(function(s){s.type!=="group"&&(a!=null&&(s.z=a),o!=null&&(s.zlevel=o),s.silent=r)})}const BaseAxisPointer$1=BaseAxisPointer;function buildElStyle(n){var t=n.get("type"),r=n.getModel(t+"Style"),a;return t==="line"?(a=r.getLineStyle(),a.fill=null):t==="shadow"&&(a=r.getAreaStyle(),a.stroke=null),a}function buildLabelElOption(n,t,r,a,o){var s=r.get("value"),l=getValueLabel(s,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),u=r.getModel("label"),d=normalizeCssArray(u.get("padding")||0),v=u.getFont(),g=getBoundingRect(l,v),f=o.position,c=g.width+d[1]+d[3],y=g.height+d[0]+d[2],_=o.align;_==="right"&&(f[0]-=c),_==="center"&&(f[0]-=c/2);var b=o.verticalAlign;b==="bottom"&&(f[1]-=y),b==="middle"&&(f[1]-=y/2),confineInContainer(f,c,y,a);var S=u.get("backgroundColor");(!S||S==="auto")&&(S=t.get(["axisLine","lineStyle","color"])),n.label={x:f[0],y:f[1],style:createTextStyle(u,{text:l,font:v,fill:u.getTextColor(),padding:d,backgroundColor:S}),z2:10}}function confineInContainer(n,t,r,a){var o=a.getWidth(),s=a.getHeight();n[0]=Math.min(n[0]+t,o)-t,n[1]=Math.min(n[1]+r,s)-r,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function getValueLabel(n,t,r,a,o){n=t.scale.parse(n);var s=t.scale.getLabel({value:n},{precision:o.precision}),l=o.formatter;if(l){var u={value:getAxisRawValue(t,{value:n}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};each$f(a,function(d){var v=r.getSeriesByIndex(d.seriesIndex),g=d.dataIndexInside,f=v&&v.getDataParams(g);f&&u.seriesData.push(f)}),isString(l)?s=l.replace("{value}",s):isFunction(l)&&(s=l(u))}return s}function getTransformedPosition(n,t,r){var a=create$1();return rotate(a,a,r.rotation),translate(a,a,r.position),applyTransform([n.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],a)}function buildCartesianSingleLabelElOption(n,t,r,a,o,s){var l=AxisBuilder$1.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=o.get(["label","margin"]),buildLabelElOption(t,a,o,s,{position:getTransformedPosition(a.axis,n,r),align:l.textAlign,verticalAlign:l.textVerticalAlign})}function makeLineShape(n,t,r){return r=r||0,{x1:n[r],y1:n[1-r],x2:t[r],y2:t[1-r]}}function makeRectShape(n,t,r){return r=r||0,{x:n[r],y:n[1-r],width:t[r],height:t[1-r]}}function makeSectorShape(n,t,r,a,o,s){return{cx:n,cy:t,r0:r,r:a,startAngle:o,endAngle:s,clockwise:!0}}var CartesianAxisPointer=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,a,o,s,l){var u=o.axis,d=u.grid,v=s.get("type"),g=getCartesian(d,u).getOtherAxis(u).getGlobalExtent(),f=u.toGlobalCoord(u.dataToCoord(a,!0));if(v&&v!=="none"){var c=buildElStyle(s),y=pointerShapeBuilder$2[v](u,f,g);y.style=c,r.graphicKey=y.type,r.pointer=y}var _=layout$2(d.model,o);buildCartesianSingleLabelElOption(a,r,_,o,s,l)},t.prototype.getHandleTransform=function(r,a,o){var s=layout$2(a.axis.grid.model,a,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var l=getTransformedPosition(a.axis,r,s);return{x:l[0],y:l[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,a,o,s){var l=o.axis,u=l.grid,d=l.getGlobalExtent(!0),v=getCartesian(u,l).getOtherAxis(l).getGlobalExtent(),g=l.dim==="x"?0:1,f=[r.x,r.y];f[g]+=a[g],f[g]=Math.min(d[1],f[g]),f[g]=Math.max(d[0],f[g]);var c=(v[1]+v[0])/2,y=[c,c];y[g]=f[g];var _=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:y,tooltipOption:_[g]}},t}(BaseAxisPointer$1);function getCartesian(n,t){var r={};return r[t.dim+"AxisIndex"]=t.index,n.getCartesian(r)}var pointerShapeBuilder$2={line:function(n,t,r){var a=makeLineShape([t,r[0]],[t,r[1]],getAxisDimIndex(n));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(n,t,r){var a=Math.max(1,n.getBandWidth()),o=r[1]-r[0];return{type:"Rect",shape:makeRectShape([t-a/2,r[0]],[a,o],getAxisDimIndex(n))}}};function getAxisDimIndex(n){return n.dim==="x"?0:1}const CartesianAxisPointer$1=CartesianAxisPointer;var AxisPointerModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(ComponentModel$1);const AxisPointerModel$1=AxisPointerModel;var inner$a=makeInner(),each$8=each$f;function register(n,t,r){if(!env$1.node){var a=t.getZr();inner$a(a).records||(inner$a(a).records={}),initGlobalListeners(a,t);var o=inner$a(a).records[n]||(inner$a(a).records[n]={});o.handler=r}}function initGlobalListeners(n,t){if(inner$a(n).initialized)return;inner$a(n).initialized=!0,r("click",curry$1(doEnter,"click")),r("mousemove",curry$1(doEnter,"mousemove")),r("globalout",onLeave);function r(a,o){n.on(a,function(s){var l=makeDispatchAction$1(t);each$8(inner$a(n).records,function(u){u&&o(u,s,l.dispatchAction)}),dispatchTooltipFinally(l.pendings,t)})}}function dispatchTooltipFinally(n,t){var r=n.showTip.length,a=n.hideTip.length,o;r?o=n.showTip[r-1]:a&&(o=n.hideTip[a-1]),o&&(o.dispatchAction=null,t.dispatchAction(o))}function onLeave(n,t,r){n.handler("leave",null,r)}function doEnter(n,t,r,a){t.handler(n,r,a)}function makeDispatchAction$1(n){var t={showTip:[],hideTip:[]},r=function(a){var o=t[a.type];o?o.push(a):(a.dispatchAction=r,n.dispatchAction(a))};return{dispatchAction:r,pendings:t}}function unregister(n,t){if(!env$1.node){var r=t.getZr(),a=(inner$a(r).records||{})[n];a&&(inner$a(r).records[n]=null)}}var AxisPointerView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){var s=a.getComponent("tooltip"),l=r.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";register("axisPointer",o,function(u,d,v){l!=="none"&&(u==="leave"||l.indexOf(u)>=0)&&v({type:"updateAxisPointer",currTrigger:u,x:d&&d.offsetX,y:d&&d.offsetY})})},t.prototype.remove=function(r,a){unregister("axisPointer",a)},t.prototype.dispose=function(r,a){unregister("axisPointer",a)},t.type="axisPointer",t}(ComponentView$1);const AxisPointerView$1=AxisPointerView;function findPointFromSeries(n,t){var r=[],a=n.seriesIndex,o;if(a==null||!(o=t.getSeriesByIndex(a)))return{point:[]};var s=o.getData(),l=queryDataIndex(s,n);if(l==null||l<0||isArray$1(l))return{point:[]};var u=s.getItemGraphicEl(l),d=o.coordinateSystem;if(o.getTooltipPosition)r=o.getTooltipPosition(l)||[];else if(d&&d.dataToPoint)if(n.isStacked){var v=d.getBaseAxis(),g=d.getOtherAxis(v),f=g.dim,c=v.dim,y=f==="x"||f==="radius"?1:0,_=s.mapDimension(c),b=[];b[y]=s.get(_,l),b[1-y]=s.get(s.getCalculationInfo("stackResultDimension"),l),r=d.dataToPoint(b)||[]}else r=d.dataToPoint(s.getValues(map$1(d.dimensions,function(x){return s.mapDimension(x)}),l))||[];else if(u){var S=u.getBoundingRect().clone();S.applyTransform(u.transform),r=[S.x+S.width/2,S.y+S.height/2]}return{point:r,el:u}}var inner$9=makeInner();function axisTrigger(n,t,r){var a=n.currTrigger,o=[n.x,n.y],s=n,l=n.dispatchAction||bind$1(r.dispatchAction,r),u=t.getComponent("axisPointer").coordSysAxesInfo;if(u){illegalPoint(o)&&(o=findPointFromSeries({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},t).point);var d=illegalPoint(o),v=s.axesInfo,g=u.axesInfo,f=a==="leave"||illegalPoint(o),c={},y={},_={list:[],map:{}},b={showPointer:curry$1(showPointer,y),showTooltip:curry$1(showTooltip,_)};each$f(u.coordSysMap,function(x,w){var T=d||x.containPoint(o);each$f(u.coordSysAxesInfo[w],function(A,E){var $=A.axis,P=findInputAxisInfo(v,A);if(!f&&T&&(!v||P)){var I=P&&P.value;I==null&&!d&&(I=$.pointToData(o)),I!=null&&processOnAxis(A,I,b,!1,c)}})});var S={};return each$f(g,function(x,w){var T=x.linkGroup;T&&!y[w]&&each$f(T.axesInfo,function(A,E){var $=y[E];if(A!==x&&$){var P=$.value;T.mapper&&(P=x.axis.scale.parse(T.mapper(P,makeMapperParam(A),makeMapperParam(x)))),S[x.key]=P}})}),each$f(S,function(x,w){processOnAxis(g[w],x,b,!0,c)}),updateModelActually(y,g,c),dispatchTooltipActually(_,o,n,l),dispatchHighDownActually(g,l,r),c}}function processOnAxis(n,t,r,a,o){var s=n.axis;if(!(s.scale.isBlank()||!s.containData(t))){if(!n.involveSeries){r.showPointer(n,t);return}var l=buildPayloadsBySeries(t,n),u=l.payloadBatch,d=l.snapToValue;u[0]&&o.seriesIndex==null&&extend(o,u[0]),!a&&n.snap&&s.containData(d)&&d!=null&&(t=d),r.showPointer(n,t,u),r.showTooltip(n,l,d)}}function buildPayloadsBySeries(n,t){var r=t.axis,a=r.dim,o=n,s=[],l=Number.MAX_VALUE,u=-1;return each$f(t.seriesModels,function(d,v){var g=d.getData().mapDimensionsAll(a),f,c;if(d.getAxisTooltipData){var y=d.getAxisTooltipData(g,n,r);c=y.dataIndices,f=y.nestestValue}else{if(c=d.getData().indicesOfNearest(g[0],n,r.type==="category"?.5:null),!c.length)return;f=d.getData().get(g[0],c[0])}if(!(f==null||!isFinite(f))){var _=n-f,b=Math.abs(_);b<=l&&((b<l||_>=0&&u<0)&&(l=b,u=_,o=f,s.length=0),each$f(c,function(S){s.push({seriesIndex:d.seriesIndex,dataIndexInside:S,dataIndex:d.getData().getRawIndex(S)})}))}}),{payloadBatch:s,snapToValue:o}}function showPointer(n,t,r,a){n[t.key]={value:r,payloadBatch:a}}function showTooltip(n,t,r,a){var o=r.payloadBatch,s=t.axis,l=s.model,u=t.axisPointerModel;if(!(!t.triggerTooltip||!o.length)){var d=t.coordSys.model,v=makeKey(d),g=n.map[v];g||(g=n.map[v]={coordSysId:d.id,coordSysIndex:d.componentIndex,coordSysType:d.type,coordSysMainType:d.mainType,dataByAxis:[]},n.list.push(g)),g.dataByAxis.push({axisDim:s.dim,axisIndex:l.componentIndex,axisType:l.type,axisId:l.id,value:a,valueLabelOpt:{precision:u.get(["label","precision"]),formatter:u.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function updateModelActually(n,t,r){var a=r.axesInfo=[];each$f(t,function(o,s){var l=o.axisPointerModel.option,u=n[s];u?(!o.useHandle&&(l.status="show"),l.value=u.value,l.seriesDataIndices=(u.payloadBatch||[]).slice()):!o.useHandle&&(l.status="hide"),l.status==="show"&&a.push({axisDim:o.axis.dim,axisIndex:o.axis.model.componentIndex,value:l.value})})}function dispatchTooltipActually(n,t,r,a){if(illegalPoint(t)||!n.list.length){a({type:"hideTip"});return}var o=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};a({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:n.list})}function dispatchHighDownActually(n,t,r){var a=r.getZr(),o="axisPointerLastHighlights",s=inner$9(a)[o]||{},l=inner$9(a)[o]={};each$f(n,function(v,g){var f=v.axisPointerModel.option;f.status==="show"&&each$f(f.seriesDataIndices,function(c){var y=c.seriesIndex+" | "+c.dataIndex;l[y]=c})});var u=[],d=[];each$f(s,function(v,g){!l[g]&&d.push(v)}),each$f(l,function(v,g){!s[g]&&u.push(v)}),d.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:d}),u.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:u})}function findInputAxisInfo(n,t){for(var r=0;r<(n||[]).length;r++){var a=n[r];if(t.axis.dim===a.axisDim&&t.axis.model.componentIndex===a.axisIndex)return a}}function makeMapperParam(n){var t=n.axis.model,r={},a=r.axisDim=n.axis.dim;return r.axisIndex=r[a+"AxisIndex"]=t.componentIndex,r.axisName=r[a+"AxisName"]=t.name,r.axisId=r[a+"AxisId"]=t.id,r}function illegalPoint(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function install$q(n){AxisView$1.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer$1),n.registerComponentModel(AxisPointerModel$1),n.registerComponentView(AxisPointerView$1),n.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!isArray$1(r)&&(t.axisPointer.link=[r])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=collect(t,r)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(n){use(install$N),use(install$q)}var PolarAxisPointer=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,a,o,s,l){var u=o.axis;u.dim==="angle"&&(this.animationThreshold=Math.PI/18);var d=u.polar,v=d.getOtherAxis(u),g=v.getExtent(),f=u.dataToCoord(a),c=s.get("type");if(c&&c!=="none"){var y=buildElStyle(s),_=pointerShapeBuilder$1[c](u,d,f,g);_.style=y,r.graphicKey=_.type,r.pointer=_}var b=s.get(["label","margin"]),S=getLabelPosition(a,o,s,d,b);buildLabelElOption(r,o,s,l,S)},t}(BaseAxisPointer$1);function getLabelPosition(n,t,r,a,o){var s=t.axis,l=s.dataToCoord(n),u=a.getAngleAxis().getExtent()[0];u=u/180*Math.PI;var d=a.getRadiusAxis().getExtent(),v,g,f;if(s.dim==="radius"){var c=create$1();rotate(c,c,u),translate(c,c,[a.cx,a.cy]),v=applyTransform([l,-o],c);var y=t.getModel("axisLabel").get("rotate")||0,_=AxisBuilder$1.innerTextLayout(u,y*Math.PI/180,-1);g=_.textAlign,f=_.textVerticalAlign}else{var b=d[1];v=a.coordToPoint([b+o,l]);var S=a.cx,x=a.cy;g=Math.abs(v[0]-S)/b<.3?"center":v[0]>S?"left":"right",f=Math.abs(v[1]-x)/b<.3?"middle":v[1]>x?"top":"bottom"}return{position:v,align:g,verticalAlign:f}}var pointerShapeBuilder$1={line:function(n,t,r,a){return n.dim==="angle"?{type:"Line",shape:makeLineShape(t.coordToPoint([a[0],r]),t.coordToPoint([a[1],r]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r}}},shadow:function(n,t,r,a){var o=Math.max(1,n.getBandWidth()),s=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:makeSectorShape(t.cx,t.cy,a[0],a[1],(-r-o/2)*s,(-r+o/2)*s)}:{type:"Sector",shape:makeSectorShape(t.cx,t.cy,r-o/2,r+o/2,0,Math.PI*2)}}};const PolarAxisPointer$1=PolarAxisPointer;var PolarModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.findAxisModel=function(r){var a,o=this.ecModel;return o.eachComponent(r,function(s){s.getCoordSysModel()===this&&(a=s)},this),a},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(ComponentModel$1);const PolarModel$1=PolarModel;var PolarAxisModel=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},t.type="polarAxis",t}(ComponentModel$1);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="angleAxis",t}(PolarAxisModel),RadiusAxisModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="radiusAxis",t}(PolarAxisModel),RadiusAxis=function(n){__extends$1(t,n);function t(r,a){return n.call(this,"radius",r,a)||this}return t.prototype.pointToData=function(r,a){return this.polar.pointToData(r,a)[this.dim==="radius"?0:1]},t}(Axis$1);RadiusAxis.prototype.dataToRadius=Axis$1.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis$1.prototype.coordToData;const RadiusAxis$1=RadiusAxis;var inner$8=makeInner(),AngleAxis=function(n){__extends$1(t,n);function t(r,a){return n.call(this,"angle",r,a||[0,360])||this}return t.prototype.pointToData=function(r,a){return this.polar.pointToData(r,a)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var r=this,a=r.getLabelModel(),o=r.scale,s=o.getExtent(),l=o.count();if(s[1]-s[0]<1)return 0;var u=s[0],d=r.dataToCoord(u+1)-r.dataToCoord(u),v=Math.abs(d),g=getBoundingRect(u==null?"":u+"",a.getFont(),"center","top"),f=Math.max(g.height,7),c=f/v;isNaN(c)&&(c=1/0);var y=Math.max(0,Math.floor(c)),_=inner$8(r.model),b=_.lastAutoInterval,S=_.lastTickCount;return b!=null&&S!=null&&Math.abs(b-y)<=1&&Math.abs(S-l)<=1&&b>y?y=b:(_.lastTickCount=l,_.lastAutoInterval=y),y},t}(Axis$1);AngleAxis.prototype.dataToAngle=Axis$1.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis$1.prototype.coordToData;const AngleAxis$1=AngleAxis;var polarDimensions=["radius","angle"],Polar=function(){function n(t){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis$1,this._angleAxis=new AngleAxis$1,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(t){var r=this.pointToCoord(t);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},n.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},n.prototype.getAxis=function(t){var r="_"+t+"Axis";return this[r]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(t){var r=[],a=this._angleAxis,o=this._radiusAxis;return a.scale.type===t&&r.push(a),o.scale.type===t&&r.push(o),r},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(t){var r=this._angleAxis;return t===r?this._radiusAxis:r},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(t){var r=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},n.prototype.dataToPoint=function(t,r){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],r),this._angleAxis.dataToAngle(t[1],r)])},n.prototype.pointToData=function(t,r){var a=this.pointToCoord(t);return[this._radiusAxis.radiusToData(a[0],r),this._angleAxis.angleToData(a[1],r)]},n.prototype.pointToCoord=function(t){var r=t[0]-this.cx,a=t[1]-this.cy,o=this.getAngleAxis(),s=o.getExtent(),l=Math.min(s[0],s[1]),u=Math.max(s[0],s[1]);o.inverse?l=u-360:u=l+360;var d=Math.sqrt(r*r+a*a);r/=d,a/=d;for(var v=Math.atan2(-a,r)/Math.PI*180,g=v<l?1:-1;v<l||v>u;)v+=g*360;return[d,v]},n.prototype.coordToPoint=function(t){var r=t[0],a=t[1]/180*Math.PI,o=Math.cos(a)*r+this.cx,s=-Math.sin(a)*r+this.cy;return[o,s]},n.prototype.getArea=function(){var t=this.getAngleAxis(),r=this.getRadiusAxis(),a=r.getExtent().slice();a[0]>a[1]&&a.reverse();var o=t.getExtent(),s=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:a[0],r:a[1],startAngle:-o[0]*s,endAngle:-o[1]*s,clockwise:t.inverse,contain:function(l,u){var d=l-this.cx,v=u-this.cy,g=d*d+v*v-1e-4,f=this.r,c=this.r0;return g<=f*f&&g>=c*c}}},n.prototype.convertToPixel=function(t,r,a){var o=getCoordSys$2(r);return o===this?this.dataToPoint(a):null},n.prototype.convertFromPixel=function(t,r,a){var o=getCoordSys$2(r);return o===this?this.pointToData(a):null},n}();function getCoordSys$2(n){var t=n.seriesModel,r=n.polarModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}const Polar$1=Polar;function resizePolar(n,t,r){var a=t.get("center"),o=r.getWidth(),s=r.getHeight();n.cx=parsePercent(a[0],o),n.cy=parsePercent(a[1],s);var l=n.getRadiusAxis(),u=Math.min(o,s)/2,d=t.get("radius");d==null?d=[0,"100%"]:isArray$1(d)||(d=[0,d]);var v=[parsePercent(d[0],u),parsePercent(d[1],u)];l.inverse?l.setExtent(v[1],v[0]):l.setExtent(v[0],v[1])}function updatePolarScale(n,t){var r=this,a=r.getAngleAxis(),o=r.getRadiusAxis();if(a.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),n.eachSeries(function(u){if(u.coordinateSystem===r){var d=u.getData();each$f(getDataDimensionsOnAxis(d,"radius"),function(v){o.scale.unionExtentFromData(d,v)}),each$f(getDataDimensionsOnAxis(d,"angle"),function(v){a.scale.unionExtentFromData(d,v)})}}),niceScaleExtent(a.scale,a.model),niceScaleExtent(o.scale,o.model),a.type==="category"&&!a.onBand){var s=a.getExtent(),l=360/a.scale.count();a.inverse?s[1]+=l:s[1]-=l,a.setExtent(s[0],s[1])}}function isAngleAxisModel(n){return n.mainType==="angleAxis"}function setAxis(n,t){if(n.type=t.get("type"),n.scale=createScaleByModel$1(t),n.onBand=t.get("boundaryGap")&&n.type==="category",n.inverse=t.get("inverse"),isAngleAxisModel(t)){n.inverse=n.inverse!==t.get("clockwise");var r=t.get("startAngle");n.setExtent(r,r+(n.inverse?-360:360))}t.axis=n,n.model=t}var polarCreator={dimensions:polarDimensions,create:function(n,t){var r=[];return n.eachComponent("polar",function(a,o){var s=new Polar$1(o+"");s.update=updatePolarScale;var l=s.getRadiusAxis(),u=s.getAngleAxis(),d=a.findAxisModel("radiusAxis"),v=a.findAxisModel("angleAxis");setAxis(l,d),setAxis(u,v),resizePolar(s,a,t),r.push(s),a.coordinateSystem=s,s.model=a}),n.eachSeries(function(a){if(a.get("coordinateSystem")==="polar"){var o=a.getReferringComponents("polar",SINGLE_REFERRING).models[0];a.coordinateSystem=o.coordinateSystem}}),r}};const polarCreator$1=polarCreator;var elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(n,t,r){t[1]>t[0]&&(t=t.slice().reverse());var a=n.coordToPoint([t[0],r]),o=n.coordToPoint([t[1],r]);return{x1:a[0],y1:a[1],x2:o[0],y2:o[1]}}function getRadiusIdx(n){var t=n.getRadiusAxis();return t.inverse?0:1}function fixAngleOverlap(n){var t=n[0],r=n[n.length-1];t&&r&&Math.abs(Math.abs(t.coord-r.coord)-360)<1e-4&&n.pop()}var AngleAxisView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,a){if(this.group.removeAll(),!!r.get("show")){var o=r.axis,s=o.polar,l=s.getRadiusAxis().getExtent(),u=o.getTicksCoords(),d=o.getMinorTicksCoords(),v=map$1(o.getViewLabels(),function(g){g=clone$4(g);var f=o.scale,c=f.type==="ordinal"?f.getRawOrdinalNumber(g.tickValue):g.tickValue;return g.coord=o.dataToCoord(c),g});fixAngleOverlap(v),fixAngleOverlap(u),each$f(elementList,function(g){r.get([g,"show"])&&(!o.scale.isBlank()||g==="axisLine")&&angelAxisElementsBuilders[g](this.group,r,s,u,d,l,v)},this)}},t.type="angleAxis",t}(AxisView$1),angelAxisElementsBuilders={axisLine:function(n,t,r,a,o,s){var l=t.getModel(["axisLine","lineStyle"]),u=getRadiusIdx(r),d=u?0:1,v;s[d]===0?v=new Circle$1({shape:{cx:r.cx,cy:r.cy,r:s[u]},style:l.getLineStyle(),z2:1,silent:!0}):v=new Ring$1({shape:{cx:r.cx,cy:r.cy,r:s[u],r0:s[d]},style:l.getLineStyle(),z2:1,silent:!0}),v.style.fill=null,n.add(v)},axisTick:function(n,t,r,a,o,s){var l=t.getModel("axisTick"),u=(l.get("inside")?-1:1)*l.get("length"),d=s[getRadiusIdx(r)],v=map$1(a,function(g){return new Line$3({shape:getAxisLineShape(r,[d,d+u],g.coord)})});n.add(mergePath(v,{style:defaults(l.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,t,r,a,o,s){if(o.length){for(var l=t.getModel("axisTick"),u=t.getModel("minorTick"),d=(l.get("inside")?-1:1)*u.get("length"),v=s[getRadiusIdx(r)],g=[],f=0;f<o.length;f++)for(var c=0;c<o[f].length;c++)g.push(new Line$3({shape:getAxisLineShape(r,[v,v+d],o[f][c].coord)}));n.add(mergePath(g,{style:defaults(u.getModel("lineStyle").getLineStyle(),defaults(l.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,t,r,a,o,s,l){var u=t.getCategories(!0),d=t.getModel("axisLabel"),v=d.get("margin"),g=t.get("triggerEvent");each$f(l,function(f,c){var y=d,_=f.tickValue,b=s[getRadiusIdx(r)],S=r.coordToPoint([b+v,f.coord]),x=r.cx,w=r.cy,T=Math.abs(S[0]-x)/b<.3?"center":S[0]>x?"left":"right",A=Math.abs(S[1]-w)/b<.3?"middle":S[1]>w?"top":"bottom";if(u&&u[_]){var E=u[_];isObject$3(E)&&E.textStyle&&(y=new Model$1(E.textStyle,d,d.ecModel))}var $=new ZRText$1({silent:AxisBuilder$1.isLabelSilent(t),style:createTextStyle(y,{x:S[0],y:S[1],fill:y.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:f.formattedLabel,align:T,verticalAlign:A})});if(n.add($),g){var P=AxisBuilder$1.makeAxisEventDataBase(t);P.targetType="axisLabel",P.value=f.rawLabel,getECData($).eventData=P}},this)},splitLine:function(n,t,r,a,o,s){var l=t.getModel("splitLine"),u=l.getModel("lineStyle"),d=u.get("color"),v=0;d=d instanceof Array?d:[d];for(var g=[],f=0;f<a.length;f++){var c=v++%d.length;g[c]=g[c]||[],g[c].push(new Line$3({shape:getAxisLineShape(r,s,a[f].coord)}))}for(var f=0;f<g.length;f++)n.add(mergePath(g[f],{style:defaults({stroke:d[f%d.length]},u.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(n,t,r,a,o,s){if(o.length){for(var l=t.getModel("minorSplitLine"),u=l.getModel("lineStyle"),d=[],v=0;v<o.length;v++)for(var g=0;g<o[v].length;g++)d.push(new Line$3({shape:getAxisLineShape(r,s,o[v][g].coord)}));n.add(mergePath(d,{style:u.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(n,t,r,a,o,s){if(a.length){var l=t.getModel("splitArea"),u=l.getModel("areaStyle"),d=u.get("color"),v=0;d=d instanceof Array?d:[d];for(var g=[],f=Math.PI/180,c=-a[0].coord*f,y=Math.min(s[0],s[1]),_=Math.max(s[0],s[1]),b=t.get("clockwise"),S=1,x=a.length;S<=x;S++){var w=S===x?a[0].coord:a[S].coord,T=v++%d.length;g[T]=g[T]||[],g[T].push(new Sector$1({shape:{cx:r.cx,cy:r.cy,r0:y,r:_,startAngle:c,endAngle:-w*f,clockwise:b},silent:!0})),c=-w*f}for(var S=0;S<g.length;S++)n.add(mergePath(g[S],{style:defaults({fill:d[S%d.length]},u.getAreaStyle()),silent:!0}))}}};const AngleAxisView$1=AngleAxisView;var axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,a){if(this.group.removeAll(),!!r.get("show")){var o=this._axisGroup,s=this._axisGroup=new Group$4;this.group.add(s);var l=r.axis,u=l.polar,d=u.getAngleAxis(),v=l.getTicksCoords(),g=l.getMinorTicksCoords(),f=d.getExtent()[0],c=l.getExtent(),y=layoutAxis(u,r,f),_=new AxisBuilder$1(r,y);each$f(axisBuilderAttrs$1,_.add,_),s.add(_.getGroup()),groupTransition(o,s,r),each$f(selfBuilderAttrs$1,function(b){r.get([b,"show"])&&!l.scale.isBlank()&&axisElementBuilders$1[b](this.group,r,u,f,c,v,g)},this)}},t.type="radiusAxis",t}(AxisView$1),axisElementBuilders$1={splitLine:function(n,t,r,a,o,s){var l=t.getModel("splitLine"),u=l.getModel("lineStyle"),d=u.get("color"),v=0;d=d instanceof Array?d:[d];for(var g=[],f=0;f<s.length;f++){var c=v++%d.length;g[c]=g[c]||[],g[c].push(new Circle$1({shape:{cx:r.cx,cy:r.cy,r:Math.max(s[f].coord,0)}}))}for(var f=0;f<g.length;f++)n.add(mergePath(g[f],{style:defaults({stroke:d[f%d.length],fill:null},u.getLineStyle()),silent:!0}))},minorSplitLine:function(n,t,r,a,o,s,l){if(l.length){for(var u=t.getModel("minorSplitLine"),d=u.getModel("lineStyle"),v=[],g=0;g<l.length;g++)for(var f=0;f<l[g].length;f++)v.push(new Circle$1({shape:{cx:r.cx,cy:r.cy,r:l[g][f].coord}}));n.add(mergePath(v,{style:defaults({fill:null},d.getLineStyle()),silent:!0}))}},splitArea:function(n,t,r,a,o,s){if(s.length){var l=t.getModel("splitArea"),u=l.getModel("areaStyle"),d=u.get("color"),v=0;d=d instanceof Array?d:[d];for(var g=[],f=s[0].coord,c=1;c<s.length;c++){var y=v++%d.length;g[y]=g[y]||[],g[y].push(new Sector$1({shape:{cx:r.cx,cy:r.cy,r0:f,r:s[c].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),f=s[c].coord}for(var c=0;c<g.length;c++)n.add(mergePath(g[c],{style:defaults({fill:d[c%d.length]},u.getAreaStyle()),silent:!0}))}}};function layoutAxis(n,t,r){return{position:[n.cx,n.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}const RadiusAxisView$1=RadiusAxisView;function getSeriesStackId(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function getAxisKey(n,t){return t.dim+n.model.componentIndex}function barLayoutPolar(n,t,r){var a={},o=calRadialBar(filter(t.getSeriesByType(n),function(s){return!t.isSeriesFiltered(s)&&s.coordinateSystem&&s.coordinateSystem.type==="polar"}));t.eachSeriesByType(n,function(s){if(s.coordinateSystem.type==="polar"){var l=s.getData(),u=s.coordinateSystem,d=u.getBaseAxis(),v=getAxisKey(u,d),g=getSeriesStackId(s),f=o[v][g],c=f.offset,y=f.width,_=u.getOtherAxis(d),b=s.coordinateSystem.cx,S=s.coordinateSystem.cy,x=s.get("barMinHeight")||0,w=s.get("barMinAngle")||0;a[g]=a[g]||[];for(var T=l.mapDimension(_.dim),A=l.mapDimension(d.dim),E=isDimensionStacked(l,T),$=d.dim!=="radius"||!s.get("roundCap",!0),P=_.dataToCoord(0),I=0,C=l.count();I<C;I++){var M=l.get(T,I),D=l.get(A,I),R=M>=0?"p":"n",N=P;E&&(a[g][D]||(a[g][D]={p:P,n:P}),N=a[g][D][R]);var O=void 0,F=void 0,L=void 0,B=void 0;if(_.dim==="radius"){var V=_.dataToCoord(M)-P,H=d.dataToCoord(D);Math.abs(V)<x&&(V=(V<0?-1:1)*x),O=N,F=N+V,L=H-c,B=L-y,E&&(a[g][D][R]=F)}else{var X=_.dataToCoord(M,$)-P,U=d.dataToCoord(D);Math.abs(X)<w&&(X=(X<0?-1:1)*w),O=U+c,F=O+y,L=N,B=N+X,E&&(a[g][D][R]=B)}l.setItemLayout(I,{cx:b,cy:S,r0:O,r:F,startAngle:-L*Math.PI/180,endAngle:-B*Math.PI/180,clockwise:L>=B})}}})}function calRadialBar(n){var t={};each$f(n,function(a,o){var s=a.getData(),l=a.coordinateSystem,u=l.getBaseAxis(),d=getAxisKey(l,u),v=u.getExtent(),g=u.type==="category"?u.getBandWidth():Math.abs(v[1]-v[0])/s.count(),f=t[d]||{bandWidth:g,remainedWidth:g,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=f.stacks;t[d]=f;var y=getSeriesStackId(a);c[y]||f.autoWidthCount++,c[y]=c[y]||{width:0,maxWidth:0};var _=parsePercent(a.get("barWidth"),g),b=parsePercent(a.get("barMaxWidth"),g),S=a.get("barGap"),x=a.get("barCategoryGap");_&&!c[y].width&&(_=Math.min(f.remainedWidth,_),c[y].width=_,f.remainedWidth-=_),b&&(c[y].maxWidth=b),S!=null&&(f.gap=S),x!=null&&(f.categoryGap=x)});var r={};return each$f(t,function(a,o){r[o]={};var s=a.stacks,l=a.bandWidth,u=parsePercent(a.categoryGap,l),d=parsePercent(a.gap,1),v=a.remainedWidth,g=a.autoWidthCount,f=(v-u)/(g+(g-1)*d);f=Math.max(f,0),each$f(s,function(b,S){var x=b.maxWidth;x&&x<f&&(x=Math.min(x,v),b.width&&(x=Math.min(x,b.width)),v-=x,b.width=x,g--)}),f=(v-u)/(g+(g-1)*d),f=Math.max(f,0);var c=0,y;each$f(s,function(b,S){b.width||(b.width=f),y=b,c+=b.width*(1+d)}),y&&(c-=y.width*d);var _=-c/2;each$f(s,function(b,S){r[o][S]=r[o][S]||{offset:_,width:b.width},_+=b.width*(1+d)})}),r}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="polar",t}(ComponentView$1);function install$o(n){use(install$q),AxisView$1.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer$1),n.registerCoordinateSystem("polar",polarCreator$1),n.registerComponentModel(PolarModel$1),n.registerComponentView(PolarView),axisModelCreator(n,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(n,"radius",RadiusAxisModel,radiusAxisExtraOption),n.registerComponentView(AngleAxisView$1),n.registerComponentView(RadiusAxisView$1),n.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(n,t){t=t||{};var r=n.coordinateSystem,a=n.axis,o={},s=a.position,l=a.orient,u=r.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],v={horizontal:{top:d[2],bottom:d[3]},vertical:{left:d[0],right:d[1]}};o.position=[l==="vertical"?v.vertical[s]:d[0],l==="horizontal"?v.horizontal[s]:d[3]];var g={horizontal:0,vertical:1};o.rotation=Math.PI/2*g[l];var f={top:-1,bottom:1,right:1,left:-1};o.labelDirection=o.tickDirection=o.nameDirection=f[s],n.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),retrieve(t.labelInside,n.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var c=t.rotate;return c==null&&(c=n.get(["axisLabel","rotate"])),o.labelRotation=s==="top"?-c:c,o.z2=1,o}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="SingleAxisPointer",r}return t.prototype.render=function(r,a,o,s){var l=this.group;l.removeAll();var u=this._axisGroup;this._axisGroup=new Group$4;var d=layout$1(r),v=new AxisBuilder$1(r,d);each$f(axisBuilderAttrs,v.add,v),l.add(this._axisGroup),l.add(v.getGroup()),each$f(selfBuilderAttrs,function(g){r.get([g,"show"])&&axisElementBuilders[g](this,this.group,this._axisGroup,r)},this),groupTransition(u,this._axisGroup,r),n.prototype.render.call(this,r,a,o,s)},t.prototype.remove=function(){rectCoordAxisHandleRemove(this)},t.type="singleAxis",t}(AxisView$1),axisElementBuilders={splitLine:function(n,t,r,a){var o=a.axis;if(!o.scale.isBlank()){var s=a.getModel("splitLine"),l=s.getModel("lineStyle"),u=l.get("color");u=u instanceof Array?u:[u];for(var d=l.get("width"),v=a.coordinateSystem.getRect(),g=o.isHorizontal(),f=[],c=0,y=o.getTicksCoords({tickModel:s}),_=[],b=[],S=0;S<y.length;++S){var x=o.toGlobalCoord(y[S].coord);g?(_[0]=x,_[1]=v.y,b[0]=x,b[1]=v.y+v.height):(_[0]=v.x,_[1]=x,b[0]=v.x+v.width,b[1]=x);var w=new Line$3({shape:{x1:_[0],y1:_[1],x2:b[0],y2:b[1]},silent:!0});subPixelOptimizeLine(w.shape,d);var T=c++%u.length;f[T]=f[T]||[],f[T].push(w)}for(var A=l.getLineStyle(["color"]),S=0;S<f.length;++S)t.add(mergePath(f[S],{style:defaults({stroke:u[S%u.length]},A),silent:!0}))}},splitArea:function(n,t,r,a){rectCoordAxisBuildSplitArea(n,r,a,a)}};const SingleAxisView$1=SingleAxisView;var SingleAxisModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(ComponentModel$1);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);const SingleAxisModel$1=SingleAxisModel;var SingleAxis=function(n){__extends$1(t,n);function t(r,a,o,s,l){var u=n.call(this,r,a,o)||this;return u.type=s||"value",u.position=l||"bottom",u}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.pointToData=function(r,a){return this.coordinateSystem.pointToData(r)[0]},t}(Axis$1);const SingleAxis$1=SingleAxis;var singleDimensions=["single"],Single=function(){function n(t,r,a){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=t,this._init(t,r,a)}return n.prototype._init=function(t,r,a){var o=this.dimension,s=new SingleAxis$1(o,createScaleByModel$1(t),[0,0],t.get("type"),t.get("position")),l=s.type==="category";s.onBand=l&&t.get("boundaryGap"),s.inverse=t.get("inverse"),s.orient=t.get("orient"),t.axis=s,s.model=t,s.coordinateSystem=this,this._axis=s},n.prototype.update=function(t,r){t.eachSeries(function(a){if(a.coordinateSystem===this){var o=a.getData();each$f(o.mapDimensionsAll(this.dimension),function(s){this._axis.scale.unionExtentFromData(o,s)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(t,r){this._rect=getLayoutRect({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:r.getWidth(),height:r.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var t=this._rect,r=this._axis,a=r.isHorizontal(),o=a?[0,t.width]:[0,t.height],s=r.inverse?1:0;r.setExtent(o[s],o[1-s]),this._updateAxisTransform(r,a?t.x:t.y)},n.prototype._updateAxisTransform=function(t,r){var a=t.getExtent(),o=a[0]+a[1],s=t.isHorizontal();t.toGlobalCoord=s?function(l){return l+r}:function(l){return o-l+r},t.toLocalCoord=s?function(l){return l-r}:function(l){return o-l+r}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(t){var r=this.getRect(),a=this.getAxis(),o=a.orient;return o==="horizontal"?a.contain(a.toLocalCoord(t[0]))&&t[1]>=r.y&&t[1]<=r.y+r.height:a.contain(a.toLocalCoord(t[1]))&&t[0]>=r.y&&t[0]<=r.y+r.height},n.prototype.pointToData=function(t){var r=this.getAxis();return[r.coordToData(r.toLocalCoord(t[r.orient==="horizontal"?0:1]))]},n.prototype.dataToPoint=function(t){var r=this.getAxis(),a=this.getRect(),o=[],s=r.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),o[s]=r.toGlobalCoord(r.dataToCoord(+t)),o[1-s]=s===0?a.y+a.height/2:a.x+a.width/2,o},n.prototype.convertToPixel=function(t,r,a){var o=getCoordSys$1(r);return o===this?this.dataToPoint(a):null},n.prototype.convertFromPixel=function(t,r,a){var o=getCoordSys$1(r);return o===this?this.pointToData(a):null},n}();function getCoordSys$1(n){var t=n.seriesModel,r=n.singleAxisModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}function create(n,t){var r=[];return n.eachComponent("singleAxis",function(a,o){var s=new Single(a,n,t);s.name="single_"+o,s.resize(a,t),a.coordinateSystem=s,r.push(s)}),n.eachSeries(function(a){if(a.get("coordinateSystem")==="singleAxis"){var o=a.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];a.coordinateSystem=o&&o.coordinateSystem}}),r}var singleCreator={create,dimensions:singleDimensions};const singleCreator$1=singleCreator;var XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,a,o,s,l){var u=o.axis,d=u.coordinateSystem,v=getGlobalExtent(d,1-getPointDimIndex(u)),g=d.dataToPoint(a)[0],f=s.get("type");if(f&&f!=="none"){var c=buildElStyle(s),y=pointerShapeBuilder[f](u,g,v);y.style=c,r.graphicKey=y.type,r.pointer=y}var _=layout$1(o);buildCartesianSingleLabelElOption(a,r,_,o,s,l)},t.prototype.getHandleTransform=function(r,a,o){var s=layout$1(a,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var l=getTransformedPosition(a.axis,r,s);return{x:l[0],y:l[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,a,o,s){var l=o.axis,u=l.coordinateSystem,d=getPointDimIndex(l),v=getGlobalExtent(u,d),g=[r.x,r.y];g[d]+=a[d],g[d]=Math.min(v[1],g[d]),g[d]=Math.max(v[0],g[d]);var f=getGlobalExtent(u,1-d),c=(f[1]+f[0])/2,y=[c,c];return y[d]=g[d],{x:g[0],y:g[1],rotation:r.rotation,cursorPoint:y,tooltipOption:{verticalAlign:"middle"}}},t}(BaseAxisPointer$1),pointerShapeBuilder={line:function(n,t,r){var a=makeLineShape([t,r[0]],[t,r[1]],getPointDimIndex(n));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(n,t,r){var a=n.getBandWidth(),o=r[1]-r[0];return{type:"Rect",shape:makeRectShape([t-a/2,r[0]],[a,o],getPointDimIndex(n))}}};function getPointDimIndex(n){return n.isHorizontal()?0:1}function getGlobalExtent(n,t){var r=n.getRect();return[r[XY$1[t]],r[XY$1[t]]+r[WH$1[t]]]}const SingleAxisPointer$1=SingleAxisPointer;var SingleView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="single",t}(ComponentView$1);function install$n(n){use(install$q),AxisView$1.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer$1),n.registerComponentView(SingleView),n.registerComponentView(SingleAxisView$1),n.registerComponentModel(SingleAxisModel$1),axisModelCreator(n,"single",SingleAxisModel$1,SingleAxisModel$1.defaultOption),n.registerCoordinateSystem("single",singleCreator$1)}var CalendarModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,a,o){var s=getLayoutParams(r);n.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(r,s)},t.prototype.mergeOption=function(r){n.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,r)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(ComponentModel$1);function mergeAndNormalizeLayoutParams$1(n,t){var r=n.cellSize,a;isArray$1(r)?a=r:a=n.cellSize=[r,r],a.length===1&&(a[1]=a[0]);var o=map$1([0,1],function(s){return sizeCalculable(t,s)&&(a[s]="auto"),a[s]!=null&&a[s]!=="auto"});mergeLayoutParam(n,t,{type:"box",ignoreSize:o})}const CalendarModel$1=CalendarModel;var CalendarView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){var s=this.group;s.removeAll();var l=r.coordinateSystem,u=l.getRangeInfo(),d=l.getOrient(),v=a.getLocaleModel();this._renderDayRect(r,u,s),this._renderLines(r,u,d,s),this._renderYearText(r,u,d,s),this._renderMonthText(r,v,d,s),this._renderWeekText(r,v,u,d,s)},t.prototype._renderDayRect=function(r,a,o){for(var s=r.coordinateSystem,l=r.getModel("itemStyle").getItemStyle(),u=s.getCellWidth(),d=s.getCellHeight(),v=a.start.time;v<=a.end.time;v=s.getNextNDay(v,1).time){var g=s.dataToRect([v],!1).tl,f=new Rect$3({shape:{x:g[0],y:g[1],width:u,height:d},cursor:"default",style:l});o.add(f)}},t.prototype._renderLines=function(r,a,o,s){var l=this,u=r.coordinateSystem,d=r.getModel(["splitLine","lineStyle"]).getLineStyle(),v=r.get(["splitLine","show"]),g=d.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var f=a.start,c=0;f.time<=a.end.time;c++){_(f.formatedDate),c===0&&(f=u.getDateInfo(a.start.y+"-"+a.start.m));var y=f.date;y.setMonth(y.getMonth()+1),f=u.getDateInfo(y)}_(u.getNextNDay(a.end.time,1).formatedDate);function _(b){l._firstDayOfMonth.push(u.getDateInfo(b)),l._firstDayPoints.push(u.dataToRect([b],!1).tl);var S=l._getLinePointsOfOneWeek(r,b,o);l._tlpoints.push(S[0]),l._blpoints.push(S[S.length-1]),v&&l._drawSplitline(S,d,s)}v&&this._drawSplitline(l._getEdgesPoints(l._tlpoints,g,o),d,s),v&&this._drawSplitline(l._getEdgesPoints(l._blpoints,g,o),d,s)},t.prototype._getEdgesPoints=function(r,a,o){var s=[r[0].slice(),r[r.length-1].slice()],l=o==="horizontal"?0:1;return s[0][l]=s[0][l]-a/2,s[1][l]=s[1][l]+a/2,s},t.prototype._drawSplitline=function(r,a,o){var s=new Polyline$3({z2:20,shape:{points:r},style:a});o.add(s)},t.prototype._getLinePointsOfOneWeek=function(r,a,o){for(var s=r.coordinateSystem,l=s.getDateInfo(a),u=[],d=0;d<7;d++){var v=s.getNextNDay(l.time,d),g=s.dataToRect([v.time],!1);u[2*v.day]=g.tl,u[2*v.day+1]=g[o==="horizontal"?"bl":"tr"]}return u},t.prototype._formatterLabel=function(r,a){return isString(r)&&r?formatTplSimple(r,a):isFunction(r)?r(a):a.nameMap},t.prototype._yearTextPositionControl=function(r,a,o,s,l){var u=a[0],d=a[1],v=["center","bottom"];s==="bottom"?(d+=l,v=["center","top"]):s==="left"?u-=l:s==="right"?(u+=l,v=["center","top"]):d-=l;var g=0;return(s==="left"||s==="right")&&(g=Math.PI/2),{rotation:g,x:u,y:d,style:{align:v[0],verticalAlign:v[1]}}},t.prototype._renderYearText=function(r,a,o,s){var l=r.getModel("yearLabel");if(l.get("show")){var u=l.get("margin"),d=l.get("position");d||(d=o!=="horizontal"?"top":"left");var v=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],g=(v[0][0]+v[1][0])/2,f=(v[0][1]+v[1][1])/2,c=o==="horizontal"?0:1,y={top:[g,v[c][1]],bottom:[g,v[1-c][1]],left:[v[1-c][0],f],right:[v[c][0],f]},_=a.start.y;+a.end.y>+a.start.y&&(_=_+"-"+a.end.y);var b=l.get("formatter"),S={start:a.start.y,end:a.end.y,nameMap:_},x=this._formatterLabel(b,S),w=new ZRText$1({z2:30,style:createTextStyle(l,{text:x})});w.attr(this._yearTextPositionControl(w,y[d],o,d,u)),s.add(w)}},t.prototype._monthTextPositionControl=function(r,a,o,s,l){var u="left",d="top",v=r[0],g=r[1];return o==="horizontal"?(g=g+l,a&&(u="center"),s==="start"&&(d="bottom")):(v=v+l,a&&(d="middle"),s==="start"&&(u="right")),{x:v,y:g,align:u,verticalAlign:d}},t.prototype._renderMonthText=function(r,a,o,s){var l=r.getModel("monthLabel");if(l.get("show")){var u=l.get("nameMap"),d=l.get("margin"),v=l.get("position"),g=l.get("align"),f=[this._tlpoints,this._blpoints];(!u||isString(u))&&(u&&(a=getLocaleModel(u)||a),u=a.get(["time","monthAbbr"])||[]);var c=v==="start"?0:1,y=o==="horizontal"?0:1;d=v==="start"?-d:d;for(var _=g==="center",b=0;b<f[c].length-1;b++){var S=f[c][b].slice(),x=this._firstDayOfMonth[b];if(_){var w=this._firstDayPoints[b];S[y]=(w[y]+f[0][b+1][y])/2}var T=l.get("formatter"),A=u[+x.m-1],E={yyyy:x.y,yy:(x.y+"").slice(2),MM:x.m,M:+x.m,nameMap:A},$=this._formatterLabel(T,E),P=new ZRText$1({z2:30,style:extend(createTextStyle(l,{text:$}),this._monthTextPositionControl(S,_,o,v,d))});s.add(P)}}},t.prototype._weekTextPositionControl=function(r,a,o,s,l){var u="center",d="middle",v=r[0],g=r[1],f=o==="start";return a==="horizontal"?(v=v+s+(f?1:-1)*l[0]/2,u=f?"right":"left"):(g=g+s+(f?1:-1)*l[1]/2,d=f?"bottom":"top"),{x:v,y:g,align:u,verticalAlign:d}},t.prototype._renderWeekText=function(r,a,o,s,l){var u=r.getModel("dayLabel");if(u.get("show")){var d=r.coordinateSystem,v=u.get("position"),g=u.get("nameMap"),f=u.get("margin"),c=d.getFirstDayOfWeek();if(!g||isString(g)){g&&(a=getLocaleModel(g)||a);var y=a.get(["time","dayOfWeekShort"]);g=y||map$1(a.get(["time","dayOfWeekAbbr"]),function(E){return E[0]})}var _=d.getNextNDay(o.end.time,7-o.lweek).time,b=[d.getCellWidth(),d.getCellHeight()];f=parsePercent(f,Math.min(b[1],b[0])),v==="start"&&(_=d.getNextNDay(o.start.time,-(7+o.fweek)).time,f=-f);for(var S=0;S<7;S++){var x=d.getNextNDay(_,S),w=d.dataToRect([x.time],!1).center,T=S;T=Math.abs((S+c)%7);var A=new ZRText$1({z2:30,style:extend(createTextStyle(u,{text:g[T]}),this._weekTextPositionControl(w,s,v,f,b))});l.add(A)}}},t.type="calendar",t}(ComponentView$1);const CalendarView$1=CalendarView;var PROXIMATE_ONE_DAY=864e5,Calendar=function(){function n(t,r,a){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=t}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(t){t=parseDate(t);var r=t.getFullYear(),a=t.getMonth()+1,o=a<10?"0"+a:""+a,s=t.getDate(),l=s<10?"0"+s:""+s,u=t.getDay();return u=Math.abs((u+7-this.getFirstDayOfWeek())%7),{y:r+"",m:o,d:l,day:u,time:t.getTime(),formatedDate:r+"-"+o+"-"+l,date:t}},n.prototype.getNextNDay=function(t,r){return r=r||0,r===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+r),this.getDateInfo(t))},n.prototype.update=function(t,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var a=this._rangeInfo.weeks||1,o=["width","height"],s=this._model.getCellSize().slice(),l=this._model.getBoxLayoutParams(),u=this._orient==="horizontal"?[a,7]:[7,a];each$f([0,1],function(f){g(s,f)&&(l[o[f]]=s[f]*u[f])});var d={width:r.getWidth(),height:r.getHeight()},v=this._rect=getLayoutRect(l,d);each$f([0,1],function(f){g(s,f)||(s[f]=v[o[f]]/u[f])});function g(f,c){return f[c]!=null&&f[c]!=="auto"}this._sw=s[0],this._sh=s[1]},n.prototype.dataToPoint=function(t,r){isArray$1(t)&&(t=t[0]),r==null&&(r=!0);var a=this.getDateInfo(t),o=this._rangeInfo,s=a.formatedDate;if(r&&!(a.time>=o.start.time&&a.time<o.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var l=a.day,u=this._getRangeInfo([o.start.time,s]).nthWeek;return this._orient==="vertical"?[this._rect.x+l*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]:[this._rect.x+u*this._sw+this._sw/2,this._rect.y+l*this._sh+this._sh/2]},n.prototype.pointToData=function(t){var r=this.pointToDate(t);return r&&r.time},n.prototype.dataToRect=function(t,r){var a=this.dataToPoint(t,r);return{contentShape:{x:a[0]-(this._sw-this._lineWidth)/2,y:a[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:a,tl:[a[0]-this._sw/2,a[1]-this._sh/2],tr:[a[0]+this._sw/2,a[1]-this._sh/2],br:[a[0]+this._sw/2,a[1]+this._sh/2],bl:[a[0]-this._sw/2,a[1]+this._sh/2]}},n.prototype.pointToDate=function(t){var r=Math.floor((t[0]-this._rect.x)/this._sw)+1,a=Math.floor((t[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(a,r-1,o):this._getDateByWeeksAndDay(r,a-1,o)},n.prototype.convertToPixel=function(t,r,a){var o=getCoordSys(r);return o===this?o.dataToPoint(a):null},n.prototype.convertFromPixel=function(t,r,a){var o=getCoordSys(r);return o===this?o.pointToData(a):null},n.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var t=this._model.get("range"),r;if(isArray$1(t)&&t.length===1&&(t=t[0]),isArray$1(t))r=t;else{var a=t.toString();if(/^\d{4}$/.test(a)&&(r=[a+"-01-01",a+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(a)){var o=this.getDateInfo(a),s=o.date;s.setMonth(s.getMonth()+1);var l=this.getNextNDay(s,-1);r=[o.formatedDate,l.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(a)&&(r=[a,a])}if(!r)return t;var u=this._getRangeInfo(r);return u.start.time>u.end.time&&r.reverse(),r},n.prototype._getRangeInfo=function(t){var r=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],a;r[0].time>r[1].time&&(a=!0,r.reverse());var o=Math.floor(r[1].time/PROXIMATE_ONE_DAY)-Math.floor(r[0].time/PROXIMATE_ONE_DAY)+1,s=new Date(r[0].time),l=s.getDate(),u=r[1].date.getDate();s.setDate(l+o-1);var d=s.getDate();if(d!==u)for(var v=s.getTime()-r[1].time>0?1:-1;(d=s.getDate())!==u&&(s.getTime()-r[1].time)*v>0;)o-=v,s.setDate(d-v);var g=Math.floor((o+r[0].day+6)/7),f=a?-g+1:g-1;return a&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:o,weeks:g,nthWeek:f,fweek:r[0].day,lweek:r[1].day}},n.prototype._getDateByWeeksAndDay=function(t,r,a){var o=this._getRangeInfo(a);if(t>o.weeks||t===0&&r<o.fweek||t===o.weeks&&r>o.lweek)return null;var s=(t-1)*7-o.fweek+r,l=new Date(o.start.time);return l.setDate(+o.start.d+s),this.getDateInfo(l)},n.create=function(t,r){var a=[];return t.eachComponent("calendar",function(o){var s=new n(o);a.push(s),o.coordinateSystem=s}),t.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=a[o.get("calendarIndex")||0])}),a},n.dimensions=["time","value"],n}();function getCoordSys(n){var t=n.calendarModel,r=n.seriesModel,a=t?t.coordinateSystem:r?r.coordinateSystem:null;return a}const Calendar$1=Calendar;function install$m(n){n.registerComponentModel(CalendarModel$1),n.registerComponentView(CalendarView$1),n.registerCoordinateSystem("calendar",Calendar$1)}function setKeyInfoToNewElOption(n,t){var r=n.existing;if(t.id=n.keyInfo.id,!t.type&&r&&(t.type=r.type),t.parentId==null){var a=t.parentOption;a?t.parentId=a.id:r&&(t.parentId=r.parentId)}t.parentOption=null}function isSetLoc(n,t){var r;return each$f(t,function(a){n[a]!=null&&n[a]!=="auto"&&(r=!0)}),r}function mergeNewElOptionToExist(n,t,r){var a=extend({},r),o=n[t],s=r.$action||"merge";s==="merge"?o?(merge(o,a,!0),mergeLayoutParam(o,a,{ignoreSize:!0}),copyLayoutParams(r,o),copyTransitionInfo(r,o),copyTransitionInfo(r,o,"shape"),copyTransitionInfo(r,o,"style"),copyTransitionInfo(r,o,"extra"),r.clipPath=o.clipPath):n[t]=a:s==="replace"?n[t]=a:s==="remove"&&o&&(n[t]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(n,t,r){if(r&&(!n[r]&&t[r]&&(n[r]={}),n=n[r],t=t[r]),!(!n||!t))for(var a=r?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,o=0;o<a.length;o++){var s=a[o];n[s]==null&&t[s]!=null&&(n[s]=t[s])}}function setLayoutInfoToExist(n,t){if(n&&(n.hv=t.hv=[isSetLoc(t,["left","right"]),isSetLoc(t,["top","bottom"])],n.type==="group")){var r=n,a=t;r.width==null&&(r.width=a.width=0),r.height==null&&(r.height=a.height=0)}}var GraphicComponentModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.preventAutoZ=!0,r}return t.prototype.mergeOption=function(r,a){var o=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,r,a),this.option.elements=o},t.prototype.optionUpdated=function(r,a){var o=this.option,s=(a?o:r).elements,l=o.elements=a?[]:o.elements,u=[];this._flatten(s,u,null);var d=mappingToExists(l,u,"normalMerge"),v=this._elOptionsToUpdate=[];each$f(d,function(g,f){var c=g.newOption;c&&(v.push(c),setKeyInfoToNewElOption(g,c),mergeNewElOptionToExist(l,f,c),setLayoutInfoToExist(l[f],c))},this),o.elements=filter(l,function(g){return g&&delete g.$action,g!=null})},t.prototype._flatten=function(r,a,o){each$f(r,function(s){if(s){o&&(s.parentOption=o),a.push(s);var l=s.children;l&&l.length&&this._flatten(l,a,s),delete s.children}},this)},t.prototype.useElOptionsToUpdate=function(){var r=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,r},t.type="graphic",t.defaultOption={elements:[]},t}(ComponentModel$1),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$4,image:ZRImage$1,text:ZRText$1},inner$7=makeInner(),GraphicComponentView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._elMap=createHashMap()},t.prototype.render=function(r,a,o){r!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=r,this._updateElements(r),this._relocate(r,o)},t.prototype._updateElements=function(r){var a=r.useElOptionsToUpdate();if(a){var o=this._elMap,s=this.group,l=r.get("z"),u=r.get("zlevel");each$f(a,function(d){var v=convertOptionIdName(d.id,null),g=v!=null?o.get(v):null,f=convertOptionIdName(d.parentId,null),c=f!=null?o.get(f):s,y=d.type,_=d.style;y==="text"&&_&&d.hv&&d.hv[1]&&(_.textVerticalAlign=_.textBaseline=_.verticalAlign=_.align=null);var b=d.textContent,S=d.textConfig;if(_&&isEC4CompatibleStyle(_,y,!!S,!!b)){var x=convertFromEC4CompatibleStyle(_,y,!0);!S&&x.textConfig&&(S=d.textConfig=x.textConfig),!b&&x.textContent&&(b=x.textContent)}var w=getCleanedElOption(d),T=d.$action||"merge",A=T==="merge",E=T==="replace";if(A){var $=!g,P=g;$?P=createEl(v,c,d.type,o):(P&&(inner$7(P).isNew=!1),stopPreviousKeyframeAnimationAndRestore(P)),P&&(applyUpdateTransition(P,w,r,{isInit:$}),updateCommonAttrs(P,d,l,u))}else if(E){removeEl$1(g,d,o,r);var I=createEl(v,c,d.type,o);I&&(applyUpdateTransition(I,w,r,{isInit:!0}),updateCommonAttrs(I,d,l,u))}else T==="remove"&&(updateLeaveTo(g,d),removeEl$1(g,d,o,r));var C=o.get(v);if(C&&b)if(A){var M=C.getTextContent();M?M.attr(b):C.setTextContent(new ZRText$1(b))}else E&&C.setTextContent(new ZRText$1(b));if(C){var D=d.clipPath;if(D){var R=D.type,N=void 0,$=!1;if(A){var O=C.getClipPath();$=!O||inner$7(O).type!==R,N=$?newEl(R):O}else E&&($=!0,N=newEl(R));C.setClipPath(N),applyUpdateTransition(N,D,r,{isInit:$}),applyKeyframeAnimation(N,D.keyframeAnimation,r)}var F=inner$7(C);C.setTextConfig(S),F.option=d,setEventData(C,r,d),setTooltipConfig({el:C,componentModel:r,itemName:C.name,itemTooltipOption:d.tooltip}),applyKeyframeAnimation(C,d.keyframeAnimation,r)}})}},t.prototype._relocate=function(r,a){for(var o=r.option.elements,s=this.group,l=this._elMap,u=a.getWidth(),d=a.getHeight(),v=["x","y"],g=0;g<o.length;g++){var f=o[g],c=convertOptionIdName(f.id,null),y=c!=null?l.get(c):null;if(!(!y||!y.isGroup)){var _=y.parent,b=_===s,S=inner$7(y),x=inner$7(_);S.width=parsePercent(S.option.width,b?u:x.width)||0,S.height=parsePercent(S.option.height,b?d:x.height)||0}}for(var g=o.length-1;g>=0;g--){var f=o[g],c=convertOptionIdName(f.id,null),y=c!=null?l.get(c):null;if(y){var _=y.parent,x=inner$7(_),w=_===s?{width:u,height:d}:{width:x.width,height:x.height},T={},A=positionElement(y,f,w,null,{hv:f.hv,boundingMode:f.bounding},T);if(!inner$7(y).isNew&&A){for(var E=f.transition,$={},P=0;P<v.length;P++){var I=v[P],C=T[I];E&&(isTransitionAll(E)||indexOf(E,I)>=0)?$[I]=C:y[I]=C}updateProps$1(y,$,r,0)}else y.attr(T)}}},t.prototype._clear=function(){var r=this,a=this._elMap;a.each(function(o){removeEl$1(o,inner$7(o).option,a,r._lastGraphicModel)}),this._elMap=createHashMap()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(ComponentView$1);function newEl(n){var t=hasOwn(nonShapeGraphicElements,n)?nonShapeGraphicElements[n]:getShapeClass(n),r=new t({});return inner$7(r).type=n,r}function createEl(n,t,r,a){var o=newEl(r);return t.add(o),a.set(n,o),inner$7(o).id=n,inner$7(o).isNew=!0,o}function removeEl$1(n,t,r,a){var o=n&&n.parent;o&&(n.type==="group"&&n.traverse(function(s){removeEl$1(s,t,r,a)}),applyLeaveTransition(n,t,a),r.removeKey(inner$7(n).id))}function updateCommonAttrs(n,t,r,a){n.isGroup||each$f([["cursor",Displayable$1.prototype.cursor],["zlevel",a||0],["z",r||0],["z2",0]],function(o){var s=o[0];hasOwn(t,s)?n[s]=retrieve2(t[s],o[1]):n[s]==null&&(n[s]=o[1])}),each$f(keys(t),function(o){if(o.indexOf("on")===0){var s=t[o];n[o]=isFunction(s)?s:null}}),hasOwn(t,"draggable")&&(n.draggable=t.draggable),t.name!=null&&(n.name=t.name),t.id!=null&&(n.id=t.id)}function getCleanedElOption(n){return n=extend({},n),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(t){delete n[t]}),n}function setEventData(n,t,r){var a=getECData(n).eventData;!n.silent&&!n.ignore&&!a&&(a=getECData(n).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:n.name}),a&&(a.info=r.info)}function install$l(n){n.registerComponentModel(GraphicComponentModel),n.registerComponentView(GraphicComponentView),n.registerPreprocessor(function(t){var r=t.graphic;isArray$1(r)?!r[0]||!r[0].elements?t.graphic=[{elements:r}]:t.graphic=[t.graphic[0]]:r&&!r.elements&&(t.graphic=[{elements:[r]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(n){var t=n.get("coordinateSystem");return indexOf(SERIES_COORDS,t)>=0}function getAxisMainType(n){return n+"Axis"}function findEffectedDataZooms(n,t){var r=createHashMap(),a=[],o=createHashMap();n.eachComponent({mainType:"dataZoom",query:t},function(g){o.get(g.uid)||u(g)});var s;do s=!1,n.eachComponent("dataZoom",l);while(s);function l(g){!o.get(g.uid)&&d(g)&&(u(g),s=!0)}function u(g){o.set(g.uid,!0),a.push(g),v(g)}function d(g){var f=!1;return g.eachTargetAxis(function(c,y){var _=r.get(c);_&&_[y]&&(f=!0)}),f}function v(g){g.eachTargetAxis(function(f,c){(r.get(f)||r.set(f,[]))[c]=!0})}return a}function collectReferCoordSysModelInfo(n){var t=n.ecModel,r={infoList:[],infoMap:createHashMap()};return n.eachTargetAxis(function(a,o){var s=t.getComponent(getAxisMainType(a),o);if(s){var l=s.getCoordSysModel();if(l){var u=l.uid,d=r.infoMap.get(u);d||(d={model:l,axisModels:[]},r.infoList.push(d),r.infoMap.set(u,d)),d.axisModels.push(s)}}}),r}var DataZoomAxisInfo=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},n}(),DataZoomModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return t.prototype.init=function(r,a,o){var s=retrieveRawOption(r);this.settledOption=s,this.mergeDefaultAndTheme(r,o),this._doInit(s)},t.prototype.mergeOption=function(r){var a=retrieveRawOption(r);merge(this.option,r,!0),merge(this.settledOption,a,!0),this._doInit(a)},t.prototype._doInit=function(r){var a=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var o=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(s,l){this._rangePropMode[l]==="value"&&(a[s[0]]=o[s[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var r=this.get("orient",!0),a=this._targetAxisInfoMap=createHashMap(),o=this._fillSpecifiedTargetAxis(a);o?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(a,this._orient)),this._noTarget=!0,a.each(function(s){s.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(r){var a=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(o){var s=this.getReferringComponents(getAxisMainType(o),MULTIPLE_REFERRING);if(s.specified){a=!0;var l=new DataZoomAxisInfo;each$f(s.models,function(u){l.add(u.componentIndex)}),r.set(o,l)}},this),a},t.prototype._fillAutoTargetAxisByOrient=function(r,a){var o=this.ecModel,s=!0;if(s){var l=a==="vertical"?"y":"x",u=o.findComponents({mainType:l+"Axis"});d(u,l)}if(s){var u=o.findComponents({mainType:"singleAxis",filter:function(g){return g.get("orient",!0)===a}});d(u,"single")}function d(v,g){var f=v[0];if(f){var c=new DataZoomAxisInfo;if(c.add(f.componentIndex),r.set(g,c),s=!1,g==="x"||g==="y"){var y=f.getReferringComponents("grid",SINGLE_REFERRING).models[0];y&&each$f(v,function(_){f.componentIndex!==_.componentIndex&&y===_.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&c.add(_.componentIndex)})}}}s&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(v){if(s){var g=o.findComponents({mainType:getAxisMainType(v),filter:function(c){return c.get("type",!0)==="category"}});if(g[0]){var f=new DataZoomAxisInfo;f.add(g[0].componentIndex),r.set(v,f),s=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(a){!r&&(r=a)},this),r==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var a=this.ecModel.option;this.option.throttle=a.animation&&a.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(r){var a=this._rangePropMode,o=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(s,l){var u=r[s[0]]!=null,d=r[s[1]]!=null;u&&!d?a[l]="percent":!u&&d?a[l]="value":o?a[l]=o[l]:u&&(a[l]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(a,o){r==null&&(r=this.ecModel.getComponent(getAxisMainType(a),o))},this),r},t.prototype.eachTargetAxis=function(r,a){this._targetAxisInfoMap.each(function(o,s){each$f(o.indexList,function(l){r.call(a,s,l)})})},t.prototype.getAxisProxy=function(r,a){var o=this.getAxisModel(r,a);if(o)return o.__dzAxisProxy},t.prototype.getAxisModel=function(r,a){var o=this._targetAxisInfoMap.get(r);if(o&&o.indexMap[a])return this.ecModel.getComponent(getAxisMainType(r),a)},t.prototype.setRawRange=function(r){var a=this.option,o=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(s){(r[s[0]]!=null||r[s[1]]!=null)&&(a[s[0]]=o[s[0]]=r[s[0]],a[s[1]]=o[s[1]]=r[s[1]])},this),this._updateRangeUse(r)},t.prototype.setCalculatedRange=function(r){var a=this.option;each$f(["start","startValue","end","endValue"],function(o){a[o]=r[o]})},t.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},t.prototype.getValueRange=function(r,a){if(r==null&&a==null){var o=this.findRepresentativeAxisProxy();if(o)return o.getDataValueWindow()}else return this.getAxisProxy(r,a).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var a,o=this._targetAxisInfoMap.keys(),s=0;s<o.length;s++)for(var l=o[s],u=this._targetAxisInfoMap.get(l),d=0;d<u.indexList.length;d++){var v=this.getAxisProxy(l,u.indexList[d]);if(v.hostedBy(this))return v;a||(a=v)}return a},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(ComponentModel$1);function retrieveRawOption(n){var t={};return each$f(["start","end","startValue","endValue","throttle"],function(r){n.hasOwnProperty(r)&&(t[r]=n[r])}),t}const DataZoomModel$1=DataZoomModel;var SelectDataZoomModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(DataZoomModel$1);const SelectZoomModel=SelectDataZoomModel;var DataZoomView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o,s){this.dataZoomModel=r,this.ecModel=a,this.api=o},t.type="dataZoom",t}(ComponentView$1);const DataZoomView$1=DataZoomView;var SelectDataZoomView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(DataZoomView$1);const SelectZoomView=SelectDataZoomView;var each$7=each$f,asc$1=asc$2,AxisProxy=function(){function n(t,r,a,o){this._dimName=t,this._axisIndex=r,this.ecModel=o,this._dataZoomModel=a}return n.prototype.hostedBy=function(t){return this._dataZoomModel===t},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(r){if(isCoordSupported(r)){var a=getAxisMainType(this._dimName),o=r.getReferringComponents(a,SINGLE_REFERRING).models[0];o&&this._axisIndex===o.componentIndex&&t.push(r)}},this),t},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},n.prototype.calculateDataWindow=function(t){var r=this._dataExtent,a=this.getAxisModel(),o=a.axis.scale,s=this._dataZoomModel.getRangePropMode(),l=[0,100],u=[],d=[],v;each$7(["start","end"],function(c,y){var _=t[c],b=t[c+"Value"];s[y]==="percent"?(_==null&&(_=l[y]),b=o.parse(linearMap$2(_,l,r))):(v=!0,b=b==null?r[y]:o.parse(b),_=linearMap$2(b,r,l)),d[y]=b==null||isNaN(b)?r[y]:b,u[y]=_==null||isNaN(_)?l[y]:_}),asc$1(d),asc$1(u);var g=this._minMaxSpan;v?f(d,u,r,l,!1):f(u,d,l,r,!0);function f(c,y,_,b,S){var x=S?"Span":"ValueSpan";sliderMove(0,c,_,"all",g["min"+x],g["max"+x]);for(var w=0;w<2;w++)y[w]=linearMap$2(c[w],_,b,!0),S&&(y[w]=o.parse(y[w]))}return{valueWindow:d,percentWindow:u}},n.prototype.reset=function(t){if(t===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,r),this._updateMinMaxSpan();var a=this.calculateDataWindow(t.settledOption);this._valueWindow=a.valueWindow,this._percentWindow=a.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(t,r){if(t!==this._dataZoomModel)return;var a=this._dimName,o=this.getTargetSeriesModels(),s=t.get("filterMode"),l=this._valueWindow;if(s==="none")return;each$7(o,function(d){var v=d.getData(),g=v.mapDimensionsAll(a);if(g.length){if(s==="weakFilter"){var f=v.getStore(),c=map$1(g,function(y){return v.getDimensionIndex(y)},v);v.filterSelf(function(y){for(var _,b,S,x=0;x<g.length;x++){var w=f.get(c[x],y),T=!isNaN(w),A=w<l[0],E=w>l[1];if(T&&!A&&!E)return!0;T&&(S=!0),A&&(_=!0),E&&(b=!0)}return S&&_&&b})}else each$7(g,function(y){if(s==="empty")d.setData(v=v.map(y,function(b){return u(b)?b:NaN}));else{var _={};_[y]=l,v.selectRange(_)}});each$7(g,function(y){v.setApproximateExtent(l,y)})}});function u(d){return d>=l[0]&&d<=l[1]}},n.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},r=this._dataZoomModel,a=this._dataExtent;each$7(["min","max"],function(o){var s=r.get(o+"Span"),l=r.get(o+"ValueSpan");l!=null&&(l=this.getAxisModel().axis.scale.parse(l)),l!=null?s=linearMap$2(a[0]+l,a,[0,100],!0):s!=null&&(l=linearMap$2(s,[0,100],a,!0)-a[0]),t[o+"Span"]=s,t[o+"ValueSpan"]=l},this)},n.prototype._setAxisModel=function(){var t=this.getAxisModel(),r=this._percentWindow,a=this._valueWindow;if(r){var o=getPixelPrecision(a,[0,500]);o=Math.min(o,20);var s=t.axis.scale.rawExtentInfo;r[0]!==0&&s.setDeterminedMinMax("min",+a[0].toFixed(o)),r[1]!==100&&s.setDeterminedMinMax("max",+a[1].toFixed(o)),s.freeze()}},n}();function calculateDataExtent(n,t,r){var a=[1/0,-1/0];each$7(r,function(l){unionAxisExtentFromData(a,l.getData(),t)});var o=n.getAxisModel(),s=ensureScaleRawExtentInfo(o.axis.scale,o,a).calculate();return[s.min,s.max]}const AxisProxy$1=AxisProxy;var dataZoomProcessor={getTargetSeries:function(n){function t(o){n.eachComponent("dataZoom",function(s){s.eachTargetAxis(function(l,u){var d=n.getComponent(getAxisMainType(l),u);o(l,u,d,s)})})}t(function(o,s,l,u){l.__dzAxisProxy=null});var r=[];t(function(o,s,l,u){l.__dzAxisProxy||(l.__dzAxisProxy=new AxisProxy$1(o,s,u,n),r.push(l.__dzAxisProxy))});var a=createHashMap();return each$f(r,function(o){each$f(o.getTargetSeriesModels(),function(s){a.set(s.uid,s)})}),a},overallReset:function(n,t){n.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(a,o){r.getAxisProxy(a,o).reset(r)}),r.eachTargetAxis(function(a,o){r.getAxisProxy(a,o).filterData(r,t)})}),n.eachComponent("dataZoom",function(r){var a=r.findRepresentativeAxisProxy();if(a){var o=a.getDataPercentWindow(),s=a.getDataValueWindow();r.setCalculatedRange({start:o[0],end:o[1],startValue:s[0],endValue:s[1]})}})}};const dataZoomProcessor$1=dataZoomProcessor;function installDataZoomAction(n){n.registerAction("dataZoom",function(t,r){var a=findEffectedDataZooms(r,t);each$f(a,function(o){o.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var installed$1=!1;function installCommon$1(n){installed$1||(installed$1=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor$1),installDataZoomAction(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(n){n.registerComponentModel(SelectZoomModel),n.registerComponentView(SelectZoomView),installCommon$1(n)}var ToolboxFeature=function(){function n(){}return n}(),features={};function registerFeature(n,t){features[n]=t}function getFeature(n){return features[n]}var ToolboxModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;each$f(this.option.feature,function(a,o){var s=getFeature(o);s&&(s.getDefaultOption&&(s.defaultOption=s.getDefaultOption(r)),merge(a,s.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(ComponentModel$1);const ToolboxModel$1=ToolboxModel;function layout(n,t,r){var a=t.getBoxLayoutParams(),o=t.get("padding"),s={width:r.getWidth(),height:r.getHeight()},l=getLayoutRect(a,s,o);box(t.get("orient"),n,t.get("itemGap"),l.width,l.height),positionElement(n,a,s,o)}function makeBackground(n,t){var r=normalizeCssArray(t.get("padding")),a=t.getItemStyle(["color","opacity"]);return a.fill=t.get("backgroundColor"),n=new Rect$3({shape:{x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2],r:t.get("borderRadius")},style:a,silent:!0,z2:-1}),n}var ToolboxView=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(r,a,o,s){var l=this.group;if(l.removeAll(),!r.get("show"))return;var u=+r.get("itemSize"),d=r.get("orient")==="vertical",v=r.get("feature")||{},g=this._features||(this._features={}),f=[];each$f(v,function(_,b){f.push(b)}),new DataDiffer$1(this._featureNames||[],f).add(c).update(c).remove(curry$1(c,null)).execute(),this._featureNames=f;function c(_,b){var S=f[_],x=f[b],w=v[S],T=new Model$1(w,r,r.ecModel),A;if(s&&s.newTitle!=null&&s.featureName===S&&(w.title=s.newTitle),S&&!x){if(isUserFeatureName(S))A={onclick:T.option.onclick,featureName:S};else{var E=getFeature(S);if(!E)return;A=new E}g[S]=A}else if(A=g[x],!A)return;A.uid=getUID("toolbox-feature"),A.model=T,A.ecModel=a,A.api=o;var $=A instanceof ToolboxFeature;if(!S&&x){$&&A.dispose&&A.dispose(a,o);return}if(!T.get("show")||$&&A.unusable){$&&A.remove&&A.remove(a,o);return}y(T,A,S),T.setIconStatus=function(P,I){var C=this.option,M=this.iconPaths;C.iconStatus=C.iconStatus||{},C.iconStatus[P]=I,M[P]&&(I==="emphasis"?enterEmphasis:leaveEmphasis)(M[P])},A instanceof ToolboxFeature&&A.render&&A.render(T,a,o,s)}function y(_,b,S){var x=_.getModel("iconStyle"),w=_.getModel(["emphasis","iconStyle"]),T=b instanceof ToolboxFeature&&b.getIcons?b.getIcons():_.get("icon"),A=_.get("title")||{},E,$;isString(T)?(E={},E[S]=T):E=T,isString(A)?($={},$[S]=A):$=A;var P=_.iconPaths={};each$f(E,function(I,C){var M=createIcon(I,{},{x:-u/2,y:-u/2,width:u,height:u});M.setStyle(x.getItemStyle());var D=M.ensureState("emphasis");D.style=w.getItemStyle();var R=new ZRText$1({style:{text:$[C],align:w.get("textAlign"),borderRadius:w.get("textBorderRadius"),padding:w.get("textPadding"),fill:null},ignore:!0});M.setTextContent(R),setTooltipConfig({el:M,componentModel:r,itemName:C,formatterParamsExtra:{title:$[C]}}),M.__title=$[C],M.on("mouseover",function(){var N=w.getItemStyle(),O=d?r.get("right")==null&&r.get("left")!=="right"?"right":"left":r.get("bottom")==null&&r.get("top")!=="bottom"?"bottom":"top";R.setStyle({fill:w.get("textFill")||N.fill||N.stroke||"#000",backgroundColor:w.get("textBackgroundColor")}),M.setTextConfig({position:w.get("textPosition")||O}),R.ignore=!r.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){_.get(["iconStatus",C])!=="emphasis"&&o.leaveEmphasis(this),R.hide()}),(_.get(["iconStatus",C])==="emphasis"?enterEmphasis:leaveEmphasis)(M),l.add(M),M.on("click",bind$1(b.onclick,b,a,o,C)),P[C]=M})}layout(l,r,o),l.add(makeBackground(l.getBoundingRect(),r)),d||l.eachChild(function(_){var b=_.__title,S=_.ensureState("emphasis"),x=S.textConfig||(S.textConfig={}),w=_.getTextContent(),T=w&&w.ensureState("emphasis");if(T&&!isFunction(T)&&b){var A=T.style||(T.style={}),E=getBoundingRect(b,ZRText$1.makeFont(A)),$=_.x+l.x,P=_.y+l.y+u,I=!1;P+E.height>o.getHeight()&&(x.position="top",I=!0);var C=I?-5-E.height:u+10;$+E.width/2>o.getWidth()?(x.position=["100%",C],A.align="right"):$-E.width/2<0&&(x.position=[0,C],A.align="left")}})},t.prototype.updateView=function(r,a,o,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.updateView&&l.updateView(l.model,a,o,s)})},t.prototype.remove=function(r,a){each$f(this._features,function(o){o instanceof ToolboxFeature&&o.remove&&o.remove(r,a)}),this.group.removeAll()},t.prototype.dispose=function(r,a){each$f(this._features,function(o){o instanceof ToolboxFeature&&o.dispose&&o.dispose(r,a)})},t.type="toolbox",t}(ComponentView$1);function isUserFeatureName(n){return n.indexOf("my")===0}const ToolboxView$1=ToolboxView;var SaveAsImage=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(r,a){var o=this.model,s=o.get("name")||r.get("title.0.text")||"echarts",l=a.getZr().painter.getType()==="svg",u=l?"svg":o.get("type",!0)||"png",d=a.getConnectedDataURL({type:u,backgroundColor:o.get("backgroundColor",!0)||r.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),v=env$1.browser;if(isFunction(MouseEvent)&&(v.newEdge||!v.ie&&!v.edge)){var g=document.createElement("a");g.download=s+"."+u,g.target="_blank",g.href=d;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});g.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||l){var c=d.split(","),y=c[0].indexOf("base64")>-1,_=l?decodeURIComponent(c[1]):c[1];y&&(_=window.atob(_));var b=s+"."+u;if(window.navigator.msSaveOrOpenBlob){for(var S=_.length,x=new Uint8Array(S);S--;)x[S]=_.charCodeAt(S);var w=new Blob([x]);window.navigator.msSaveOrOpenBlob(w,b)}else{var T=document.createElement("iframe");document.body.appendChild(T);var A=T.contentWindow,E=A.document;E.open("image/svg+xml","replace"),E.write(_),E.close(),A.focus(),E.execCommand("SaveAs",!0,b),document.body.removeChild(T)}}else{var $=o.get("lang"),P='<body style="margin:0;"><img src="'+d+'" style="max-width:100%;" title="'+($&&$[0]||"")+'" /></body>',I=window.open();I.document.write(P),I.document.title=s}},t.getDefaultOption=function(r){var a={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:r.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:r.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return a},t}(ToolboxFeature);const SaveAsImage$1=SaveAsImage;var INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getIcons=function(){var r=this.model,a=r.get("icon"),o={};return each$f(r.get("type"),function(s){a[s]&&(o[s]=a[s])}),o},t.getDefaultOption=function(r){var a={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:r.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return a},t.prototype.onclick=function(r,a,o){var s=this.model,l=s.get(["seriesIndex",o]);if(seriesOptGenreator[o]){var u={series:[]},d=function(f){var c=f.subType,y=f.id,_=seriesOptGenreator[o](c,y,f,s);_&&(defaults(_,f.option),u.series.push(_));var b=f.coordinateSystem;if(b&&b.type==="cartesian2d"&&(o==="line"||o==="bar")){var S=b.getAxesByScale("ordinal")[0];if(S){var x=S.dim,w=x+"Axis",T=f.getReferringComponents(w,SINGLE_REFERRING).models[0],A=T.componentIndex;u[w]=u[w]||[];for(var E=0;E<=A;E++)u[w][A]=u[w][A]||{};u[w][A].boundaryGap=o==="bar"}}};each$f(radioTypes,function(f){indexOf(f,o)>=0&&each$f(f,function(c){s.setIconStatus(c,"normal")})}),s.setIconStatus(o,"emphasis"),r.eachComponent({mainType:"series",query:l==null?null:{seriesIndex:l}},d);var v,g=o;o==="stack"&&(v=merge({stack:s.option.title.tiled,tiled:s.option.title.stack},s.option.title),s.get(["iconStatus",o])!=="emphasis"&&(g="tiled")),a.dispatchAction({type:"changeMagicType",currentType:g,newOption:u,newTitle:v,featureName:"magicType"})}},t}(ToolboxFeature),seriesOptGenreator={line:function(n,t,r,a){if(n==="bar")return merge({id:t,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},a.get(["option","line"])||{},!0)},bar:function(n,t,r,a){if(n==="line")return merge({id:t,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},a.get(["option","bar"])||{},!0)},stack:function(n,t,r,a){var o=r.get("stack")===INNER_STACK_KEYWORD;if(n==="line"||n==="bar")return a.setIconStatus("stack",o?"normal":"emphasis"),merge({id:t,stack:o?"":INNER_STACK_KEYWORD},a.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,t){t.mergeOption(n.newOption)});const MagicType$1=MagicType;var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(n){var t={},r=[],a=[];return n.eachRawSeries(function(o){var s=o.coordinateSystem;if(s&&(s.type==="cartesian2d"||s.type==="polar")){var l=s.getBaseAxis();if(l.type==="category"){var u=l.dim+"_"+l.index;t[u]||(t[u]={categoryAxis:l,valueAxis:s.getOtherAxis(l),series:[]},a.push({axisDim:l.dim,axisIndex:l.index})),t[u].series.push(o)}else r.push(o)}else r.push(o)}),{seriesGroupByCategoryAxis:t,other:r,meta:a}}function assembleSeriesWithCategoryAxis(n){var t=[];return each$f(n,function(r,a){var o=r.categoryAxis,s=r.valueAxis,l=s.dim,u=[" "].concat(map$1(r.series,function(y){return y.name})),d=[o.model.getCategories()];each$f(r.series,function(y){var _=y.getRawData();d.push(y.getRawData().mapArray(_.mapDimension(l),function(b){return b}))});for(var v=[u.join(ITEM_SPLITER)],g=0;g<d[0].length;g++){for(var f=[],c=0;c<d.length;c++)f.push(d[c][g]);v.push(f.join(ITEM_SPLITER))}t.push(v.join(`
`))}),t.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(n){return map$1(n,function(t){var r=t.getRawData(),a=[t.name],o=[];return r.each(r.dimensions,function(){for(var s=arguments.length,l=arguments[s-1],u=r.getName(l),d=0;d<s-1;d++)o[d]=arguments[d];a.push((u?u+ITEM_SPLITER:"")+o.join(ITEM_SPLITER))}),a.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(n){var t=groupSeries(n);return{value:filter([assembleSeriesWithCategoryAxis(t.seriesGroupByCategoryAxis),assembleOtherSeries(t.other)],function(r){return!!r.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:t.meta}}function trim(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(n){var t=n.slice(0,n.indexOf(`
`));if(t.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(n){for(var t=n.split(/\n+/g),r=trim(t.shift()).split(itemSplitRegex),a=[],o=map$1(r,function(d){return{name:d,data:[]}}),s=0;s<t.length;s++){var l=trim(t[s]).split(itemSplitRegex);a.push(l.shift());for(var u=0;u<l.length;u++)o[u]&&(o[u].data[s]=l[u])}return{series:o,categories:a}}function parseListContents(n){for(var t=n.split(/\n+/g),r=trim(t.shift()),a=[],o=0;o<t.length;o++){var s=trim(t[o]);if(s){var l=s.split(itemSplitRegex),u="",d=void 0,v=!1;isNaN(l[0])?(v=!0,u=l[0],l=l.slice(1),a[o]={name:u,value:[]},d=a[o].value):d=a[o]=[];for(var g=0;g<l.length;g++)d.push(+l[g]);d.length===1&&(v?a[o].value=d[0]:a[o]=d[0])}}return{name:r,data:a}}function parseContents(n,t){var r=n.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),a={series:[]};return each$f(r,function(o,s){if(isTSVFormat(o)){var l=parseTSVContents(o),u=t[s],d=u.axisDim+"Axis";u&&(a[d]=a[d]||[],a[d][u.axisIndex]={data:l.categories},a.series=a.series.concat(l.series))}else{var l=parseListContents(o);a.series.push(l)}}),a}var DataView$1=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(r,a){setTimeout(function(){a.dispatchAction({type:"hideTip"})});var o=a.getDom(),s=this.model;this._dom&&o.removeChild(this._dom);var l=document.createElement("div");l.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",l.style.backgroundColor=s.get("backgroundColor")||"#fff";var u=document.createElement("h4"),d=s.get("lang")||[];u.innerHTML=d[0]||s.get("title"),u.style.cssText="margin:10px 20px",u.style.color=s.get("textColor");var v=document.createElement("div"),g=document.createElement("textarea");v.style.cssText="overflow:auto";var f=s.get("optionToContent"),c=s.get("contentToOption"),y=getContentFromModel(r);if(isFunction(f)){var _=f(a.getOption());isString(_)?v.innerHTML=_:isDom(_)&&v.appendChild(_)}else{g.readOnly=s.get("readOnly");var b=g.style;b.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",b.color=s.get("textColor"),b.borderColor=s.get("textareaBorderColor"),b.backgroundColor=s.get("textareaColor"),g.value=y.value,v.appendChild(g)}var S=y.meta,x=document.createElement("div");x.style.cssText="position:absolute;bottom:5px;left:0;right:0";var w="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",T=document.createElement("div"),A=document.createElement("div");w+=";background-color:"+s.get("buttonColor"),w+=";color:"+s.get("buttonTextColor");var E=this;function $(){o.removeChild(l),E._dom=null}addEventListener(T,"click",$),addEventListener(A,"click",function(){if(c==null&&f!=null||c!=null&&f==null){$();return}var P;try{isFunction(c)?P=c(v,a.getOption()):P=parseContents(g.value,S)}catch(I){throw $(),new Error("Data view format error "+I)}P&&a.dispatchAction({type:"changeDataView",newOption:P}),$()}),T.innerHTML=d[1],A.innerHTML=d[2],A.style.cssText=T.style.cssText=w,!s.get("readOnly")&&x.appendChild(A),x.appendChild(T),l.appendChild(u),l.appendChild(v),l.appendChild(x),v.style.height=o.clientHeight-80+"px",o.appendChild(l),this._dom=l},t.prototype.remove=function(r,a){this._dom&&a.getDom().removeChild(this._dom)},t.prototype.dispose=function(r,a){this.remove(r,a)},t.getDefaultOption=function(r){var a={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:r.getLocaleModel().get(["toolbox","dataView","title"]),lang:r.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return a},t}(ToolboxFeature);function tryMergeDataOption(n,t){return map$1(n,function(r,a){var o=t&&t[a];if(isObject$3(o)&&!isArray$1(o)){var s=isObject$3(r)&&!isArray$1(r);s||(r={value:r});var l=o.name!=null&&r.name==null;return r=defaults(r,o),l&&delete r.name,r}else return r})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,t){var r=[];each$f(n.newOption.series,function(a){var o=t.getSeriesByName(a.name)[0];if(!o)r.push(extend({type:"scatter"},a));else{var s=o.get("data");r.push({name:a.name,data:tryMergeDataOption(a.data,s)})}}),t.mergeOption(defaults({series:r},n.newOption))});const DataView$2=DataView$1;var each$6=each$f,inner$6=makeInner();function push(n,t){var r=getStoreSnapshots(n);each$6(t,function(a,o){for(var s=r.length-1;s>=0;s--){var l=r[s];if(l[o])break}if(s<0){var u=n.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(u){var d=u.getPercentRange();r[0][o]={dataZoomId:o,start:d[0],end:d[1]}}}}),r.push(t)}function pop(n){var t=getStoreSnapshots(n),r=t[t.length-1];t.length>1&&t.pop();var a={};return each$6(r,function(o,s){for(var l=t.length-1;l>=0;l--)if(o=t[l][s],o){a[s]=o;break}}),a}function clear(n){inner$6(n).snapshots=null}function count(n){return getStoreSnapshots(n).length}function getStoreSnapshots(n){var t=inner$6(n);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var RestoreOption=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(r,a){clear(r),a.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(r){var a={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:r.getLocaleModel().get(["toolbox","restore","title"])};return a},t}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,t){t.resetOption("recreate")});const Restore=RestoreOption;var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function n(t,r,a){var o=this;this._targetInfoList=[];var s=parseFinder(r,t);each$f(targetInfoBuilders,function(l,u){(!a||!a.include||indexOf(a.include,u)>=0)&&l(s,o._targetInfoList)})}return n.prototype.setOutputRanges=function(t,r){return this.matchOutputRanges(t,r,function(a,o,s){if((a.coordRanges||(a.coordRanges=[])).push(o),!a.coordRange){a.coordRange=o;var l=coordConvert[a.brushType](0,s,o);a.__rangeOffset={offset:diffProcessor[a.brushType](l.values,a.range,[1,1]),xyMinMax:l.xyMinMax}}}),t},n.prototype.matchOutputRanges=function(t,r,a){each$f(t,function(o){var s=this.findTargetInfo(o,r);s&&s!==!0&&each$f(s.coordSyses,function(l){var u=coordConvert[o.brushType](1,l,o.range,!0);a(o,u.values,l,r)})},this)},n.prototype.setInputRanges=function(t,r){each$f(t,function(a){var o=this.findTargetInfo(a,r);if(a.range=a.range||[],o&&o!==!0){a.panelId=o.panelId;var s=coordConvert[a.brushType](0,o.coordSys,a.coordRange),l=a.__rangeOffset;a.range=l?diffProcessor[a.brushType](s.values,l.offset,getScales(s.xyMinMax,l.xyMinMax)):s.values}},this)},n.prototype.makePanelOpts=function(t,r){return map$1(this._targetInfoList,function(a){var o=a.getPanelRect();return{panelId:a.panelId,defaultBrushType:r?r(a):null,clipPath:makeRectPanelClipPath(o),isTargetByCursor:makeRectIsTargetByCursor(o,t,a.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(o)}})},n.prototype.controlSeries=function(t,r,a){var o=this.findTargetInfo(t,a);return o===!0||o&&indexOf(o.coordSyses,r.coordinateSystem)>=0},n.prototype.findTargetInfo=function(t,r){for(var a=this._targetInfoList,o=parseFinder(r,t),s=0;s<a.length;s++){var l=a[s],u=t.panelId;if(u){if(l.panelId===u)return l}else for(var d=0;d<targetInfoMatchers.length;d++)if(targetInfoMatchers[d](o,l))return l}return!0},n}();function formatMinMax(n){return n[0]>n[1]&&n.reverse(),n}function parseFinder(n,t){return parseFinder$1(n,t,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(n,t){var r=n.xAxisModels,a=n.yAxisModels,o=n.gridModels,s=createHashMap(),l={},u={};!r&&!a&&!o||(each$f(r,function(d){var v=d.axis.grid.model;s.set(v.id,v),l[v.id]=!0}),each$f(a,function(d){var v=d.axis.grid.model;s.set(v.id,v),u[v.id]=!0}),each$f(o,function(d){s.set(d.id,d),l[d.id]=!0,u[d.id]=!0}),s.each(function(d){var v=d.coordinateSystem,g=[];each$f(v.getCartesians(),function(f,c){(indexOf(r,f.getAxis("x").model)>=0||indexOf(a,f.getAxis("y").model)>=0)&&g.push(f)}),t.push({panelId:"grid--"+d.id,gridModel:d,coordSysModel:d,coordSys:g[0],coordSyses:g,getPanelRect:panelRectBuilders.grid,xAxisDeclared:l[d.id],yAxisDeclared:u[d.id]})}))},geo:function(n,t){each$f(n.geoModels,function(r){var a=r.coordinateSystem;t.push({panelId:"geo--"+r.id,geoModel:r,coordSysModel:r,coordSys:a,coordSyses:[a],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(n,t){var r=n.xAxisModel,a=n.yAxisModel,o=n.gridModel;return!o&&r&&(o=r.axis.grid.model),!o&&a&&(o=a.axis.grid.model),o&&o===t.gridModel},function(n,t){var r=n.geoModel;return r&&r===t.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,t=n.getBoundingRect().clone();return t.applyTransform(getTransform$1(n)),t}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(n,t,r,a){var o=n?t.pointToData([r[0][0],r[1][0]],a):t.dataToPoint([r[0][0],r[1][0]],a),s=n?t.pointToData([r[0][1],r[1][1]],a):t.dataToPoint([r[0][1],r[1][1]],a),l=[formatMinMax([o[0],s[0]]),formatMinMax([o[1],s[1]])];return{values:l,xyMinMax:l}},polygon:function(n,t,r,a){var o=[[1/0,-1/0],[1/0,-1/0]],s=map$1(r,function(l){var u=n?t.pointToData(l,a):t.dataToPoint(l,a);return o[0][0]=Math.min(o[0][0],u[0]),o[1][0]=Math.min(o[1][0],u[1]),o[0][1]=Math.max(o[0][1],u[0]),o[1][1]=Math.max(o[1][1],u[1]),u});return{values:s,xyMinMax:o}}};function axisConvert(n,t,r,a){var o=r.getAxis(["x","y"][n]),s=formatMinMax(map$1([0,1],function(u){return t?o.coordToData(o.toLocalCoord(a[u]),!0):o.toGlobalCoord(o.dataToCoord(a[u]))})),l=[];return l[n]=s,l[1-n]=[NaN,NaN],{values:s,xyMinMax:l}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(n,t,r){return[[n[0][0]-r[0]*t[0][0],n[0][1]-r[0]*t[0][1]],[n[1][0]-r[1]*t[1][0],n[1][1]-r[1]*t[1][1]]]},polygon:function(n,t,r){return map$1(n,function(a,o){return[a[0]-r[0]*t[o][0],a[1]-r[1]*t[o][1]]})}};function axisDiffProcessor(n,t,r,a){return[t[0]-a[n]*r[0],t[1]-a[n]*r[1]]}function getScales(n,t){var r=getSize(n),a=getSize(t),o=[r[0]/a[0],r[1]/a[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function getSize(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}const BrushTargetManager$1=BrushTargetManager;var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(r,a,o,s){this._brushController||(this._brushController=new BrushController$1(o.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(r,a,this,s,o),updateBackBtnStatus(r,a)},t.prototype.onclick=function(r,a,o){handlers[o].call(this)},t.prototype.remove=function(r,a){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(r,a){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(r){var a=r.areas;if(!r.isEnd||!a.length)return;var o={},s=this.ecModel;this._brushController.updateCovers([]);var l=new BrushTargetManager$1(makeAxisFinder(this.model),s,{include:["grid"]});l.matchOutputRanges(a,s,function(v,g,f){if(f.type==="cartesian2d"){var c=v.brushType;c==="rect"?(u("x",f,g[0]),u("y",f,g[1])):u({lineX:"x",lineY:"y"}[c],f,g)}}),push(s,o),this._dispatchZoomAction(o);function u(v,g,f){var c=g.getAxis(v),y=c.model,_=d(v,y,s),b=_.findRepresentativeAxisProxy(y).getMinMaxSpan();(b.minValueSpan!=null||b.maxValueSpan!=null)&&(f=sliderMove(0,f.slice(),c.scale.getExtent(),0,b.minValueSpan,b.maxValueSpan)),_&&(o[_.id]={dataZoomId:_.id,startValue:f[0],endValue:f[1]})}function d(v,g,f){var c;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(y){var _=y.getAxisModel(v,g.componentIndex);_&&(c=y)}),c}},t.prototype._dispatchZoomAction=function(r){var a=[];each$5(r,function(o,s){a.push(clone$4(o))}),a.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:a})},t.getDefaultOption=function(r){var a={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:r.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return a},t}(ToolboxFeature),handlers={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(n){var t={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function updateBackBtnStatus(n,t){n.setIconStatus("back",count(t)>1?"emphasis":"normal")}function updateZoomBtnStatus(n,t,r,a,o){var s=r._isZoomActive;a&&a.type==="takeGlobalCursor"&&(s=a.key==="dataZoomSelect"?a.dataZoomSelectActive:!1),r._isZoomActive=s,n.setIconStatus("zoom",s?"emphasis":"normal");var l=new BrushTargetManager$1(makeAxisFinder(n),t,{include:["grid"]}),u=l.makePanelOpts(o,function(d){return d.xAxisDeclared&&!d.yAxisDeclared?"lineX":!d.xAxisDeclared&&d.yAxisDeclared?"lineY":"rect"});r._brushController.setPanels(u).enableBrush(s&&u.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(n){var t=n.getComponent("toolbox",0),r=["feature","dataZoom"];if(!t||t.get(r)==null)return;var a=t.getModel(r),o=[],s=makeAxisFinder(a),l=parseFinder$1(n,s);each$5(l.xAxisModels,function(d){return u(d,"xAxis","xAxisIndex")}),each$5(l.yAxisModels,function(d){return u(d,"yAxis","yAxisIndex")});function u(d,v,g){var f=d.componentIndex,c={type:"select",$fromToolbox:!0,filterMode:a.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+v+f};c[g]=f,o.push(c)}return o});const DataZoom=DataZoomFeature;function install$j(n){n.registerComponentModel(ToolboxModel$1),n.registerComponentView(ToolboxView$1),registerFeature("saveAsImage",SaveAsImage$1),registerFeature("magicType",MagicType$1),registerFeature("dataView",DataView$2),registerFeature("dataZoom",DataZoom),registerFeature("restore",Restore),use(install$k)}var TooltipModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(ComponentModel$1);const TooltipModel$1=TooltipModel;function shouldTooltipConfine(n){var t=n.get("confine");return t!=null?!!t:n.get("renderMode")==="richText"}function testStyle(n){if(env$1.domSupported){for(var t=document.documentElement.style,r=0,a=n.length;r<a;r++)if(n[r]in t)return n[r]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(n,t){if(!n)return t;t=toCamelCase(t,!0);var r=n.indexOf(t);return n=r===-1?t:"-"+n.slice(0,r)+"-"+t,n.toLowerCase()}function getComputedStyle$1(n,t){var r=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return r?t?r[t]:r:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env$1.transform3dSupported?"will-change:transform;":"");function mirrorPos(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function assembleArrow(n,t,r){if(!isString(r)||r==="inside")return"";var a=n.get("backgroundColor"),o=n.get("borderWidth");t=convertToColorString(t);var s=mirrorPos(r),l=Math.max(Math.round(o)*1.5,6),u="",d=CSS_TRANSFORM_VENDOR+":",v;indexOf(["left","right"],s)>-1?(u+="top:50%",d+="translateY(-50%) rotate("+(v=s==="left"?-225:-45)+"deg)"):(u+="left:50%",d+="translateX(-50%) rotate("+(v=s==="top"?225:45)+"deg)");var g=v*Math.PI/180,f=l+o,c=f*Math.abs(Math.cos(g))+f*Math.abs(Math.sin(g)),y=Math.round(((c-Math.SQRT2*o)/2+Math.SQRT2*o-(c-f)/2)*100)/100;u+=";"+s+":-"+y+"px";var _=t+" solid "+o+"px;",b=["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",u+";"+d+";","border-bottom:"+_,"border-right:"+_,"background-color:"+a+";"];return'<div style="'+b.join("")+'"></div>'}function assembleTransition(n,t){var r="cubic-bezier(0.23,1,0.32,1)",a=" "+n/2+"s "+r,o="opacity"+a+",visibility"+a;return t||(a=" "+n+"s "+r,o+=env$1.transformSupported?","+CSS_TRANSFORM_VENDOR+a:",left"+a+",top"+a),CSS_TRANSITION_VENDOR+":"+o}function assembleTransform(n,t,r){var a=n.toFixed(0)+"px",o=t.toFixed(0)+"px";if(!env$1.transformSupported)return r?"top:"+o+";left:"+a+";":[["top",o],["left",a]];var s=env$1.transform3dSupported,l="translate"+(s?"3d":"")+"("+a+","+o+(s?",0":"")+")";return r?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+l+";":[["top",0],["left",0],[TRANSFORM_VENDOR,l]]}function assembleFont(n){var t=[],r=n.get("fontSize"),a=n.getTextColor();a&&t.push("color:"+a),t.push("font:"+n.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var o=n.get("textShadowColor"),s=n.get("textShadowBlur")||0,l=n.get("textShadowOffsetX")||0,u=n.get("textShadowOffsetY")||0;return o&&s&&t.push("text-shadow:"+l+"px "+u+"px "+s+"px "+o),each$f(["decoration","align"],function(d){var v=n.get(d);v&&t.push("text-"+d+":"+v)}),t.join(";")}function assembleCssText(n,t,r){var a=[],o=n.get("transitionDuration"),s=n.get("backgroundColor"),l=n.get("shadowBlur"),u=n.get("shadowColor"),d=n.get("shadowOffsetX"),v=n.get("shadowOffsetY"),g=n.getModel("textStyle"),f=getPaddingFromTooltipModel(n,"html"),c=d+"px "+v+"px "+l+"px "+u;return a.push("box-shadow:"+c),t&&o&&a.push(assembleTransition(o,r)),s&&a.push("background-color:"+s),each$f(["width","color","radius"],function(y){var _="border-"+y,b=toCamelCase(_),S=n.get(b);S!=null&&a.push(_+":"+S+(y==="color"?"":"px"))}),a.push(assembleFont(g)),f!=null&&a.push("padding:"+normalizeCssArray(f).join("px ")+"px"),a.join(";")+";"}function makeStyleCoord$1(n,t,r,a,o){var s=t&&t.painter;if(r){var l=s&&s.getViewportRoot();l&&transformLocalCoord(n,l,document.body,a,o)}else{n[0]=a,n[1]=o;var u=s&&s.getViewportRootOffset();u&&(n[0]+=u.offsetLeft,n[1]+=u.offsetTop)}n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var TooltipHTMLContent=function(){function n(t,r,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env$1.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var s=this._zr=r.getZr(),l=this._appendToBody=a&&a.appendToBody;makeStyleCoord$1(this._styleCoord,s,l,r.getWidth()/2,r.getHeight()/2),l?document.body.appendChild(o):t.appendChild(o),this._container=t;var u=this;o.onmouseenter=function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0},o.onmousemove=function(d){if(d=d||window.event,!u._enterable){var v=s.handler,g=s.painter.getViewportRoot();normalizeEvent(g,d,!0),v.dispatch("mousemove",d)}},o.onmouseleave=function(){u._inContent=!1,u._enterable&&u._show&&u.hideLater(u._hideDelay)}}return n.prototype.update=function(t){var r=this._container,a=getComputedStyle$1(r,"position"),o=r.style;o.position!=="absolute"&&a!=="absolute"&&(o.position="relative");var s=t.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=t.get("className")||""},n.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var a=this.el,o=a.style,s=this._styleCoord;a.innerHTML?o.cssText=gCssText+assembleCssText(t,!this._firstShow,this._longHide)+assembleTransform(s[0],s[1],!0)+("border-color:"+convertToColorString(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):o.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(t,r,a,o,s){var l=this.el;if(t==null){l.innerHTML="";return}var u="";if(isString(s)&&a.get("trigger")==="item"&&!shouldTooltipConfine(a)&&(u=assembleArrow(a,o,s)),isString(t))l.innerHTML=t+u;else if(t){l.innerHTML="",isArray$1(t)||(t=[t]);for(var d=0;d<t.length;d++)isDom(t[d])&&t[d].parentNode!==l&&l.appendChild(t[d]);if(u&&l.childNodes.length){var v=document.createElement("div");v.innerHTML=u,l.appendChild(v)}}},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},n.prototype.moveTo=function(t,r){var a=this._styleCoord;if(makeStyleCoord$1(a,this._zr,this._appendToBody,t,r),a[0]!=null&&a[1]!=null){var o=this.el.style,s=assembleTransform(a[0],a[1]);each$f(s,function(l){o[l[0]]=l[1]})}},n.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},n.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",env$1.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},n.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},n}();const TooltipHTMLContent$1=TooltipHTMLContent;var TooltipRichContent=function(){function n(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),makeStyleCoord(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return n.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(t,r,a,o,s){var l=this;isObject$3(t)&&throwError(""),this.el&&this._zr.remove(this.el);var u=a.getModel("textStyle");this.el=new ZRText$1({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:u.get("textShadowColor"),fill:a.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(a,"richText"),verticalAlign:"top",align:"left"},z:a.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(v){l.el.style[v]=a.get(v)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(v){l.el.style[v]=u.get(v)||0}),this._zr.add(this.el);var d=this;this.el.on("mouseover",function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0}),this.el.on("mouseout",function(){d._enterable&&d._show&&d.hideLater(d._hideDelay),d._inContent=!1})},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),a=calcShadowOuterSize(t.style);return[r.width+a.left+a.right,r.height+a.top+a.bottom]},n.prototype.moveTo=function(t,r){var a=this.el;if(a){var o=this._styleCoord;makeStyleCoord(o,this._zr,t,r),t=o[0],r=o[1];var s=a.style,l=mathMaxWith0(s.borderWidth||0),u=calcShadowOuterSize(s);a.x=t+l+u.left,a.y=r+l+u.top,a.markRedraw()}},n.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function mathMaxWith0(n){return Math.max(0,n)}function calcShadowOuterSize(n){var t=mathMaxWith0(n.shadowBlur||0),r=mathMaxWith0(n.shadowOffsetX||0),a=mathMaxWith0(n.shadowOffsetY||0);return{left:mathMaxWith0(t-r),right:mathMaxWith0(t+r),top:mathMaxWith0(t-a),bottom:mathMaxWith0(t+a)}}function makeStyleCoord(n,t,r,a){n[0]=r,n[1]=a,n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}const TooltipRichContent$1=TooltipRichContent;var proxyRect=new Rect$3({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,a){if(!(env$1.node||!a.getDom())){var o=r.getComponent("tooltip"),s=this._renderMode=getTooltipRenderMode(o.get("renderMode"));this._tooltipContent=s==="richText"?new TooltipRichContent$1(a):new TooltipHTMLContent$1(a.getDom(),a,{appendToBody:o.get("appendToBody",!0)})}},t.prototype.render=function(r,a,o){if(!(env$1.node||!o.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=a,this._api=o;var s=this._tooltipContent;s.update(r),s.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,a=r.get("triggerOn");register("itemTooltip",this._api,bind$1(function(o,s,l){a!=="none"&&(a.indexOf(o)>=0?this._tryShow(s,l):o==="leave"&&this._hide(l))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,a=this._ecModel,o=this._api,s=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var l=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!o.isDisposed()&&l.manuallyShowTip(r,a,o,{x:l._lastX,y:l._lastY,dataByCoordSys:l._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,a,o,s){if(!(s.from===this.uid||env$1.node||!o.getDom())){var l=makeDispatchAction(s,o);this._ticket="";var u=s.dataByCoordSys,d=findComponentReference(s,a,o);if(d){var v=d.el.getBoundingRect().clone();v.applyTransform(d.el.transform),this._tryShow({offsetX:v.x+v.width/2,offsetY:v.y+v.height/2,target:d.el,position:s.position,positionDefault:"bottom"},l)}else if(s.tooltip&&s.x!=null&&s.y!=null){var g=proxyRect;g.x=s.x,g.y=s.y,g.update(),getECData(g).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:g},l)}else if(u)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:u,tooltipOption:s.tooltipOption},l);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(r,a,o,s))return;var f=findPointFromSeries(s,a),c=f.point[0],y=f.point[1];c!=null&&y!=null&&this._tryShow({offsetX:c,offsetY:y,target:f.el,position:s.position,positionDefault:"bottom"},l)}else s.x!=null&&s.y!=null&&(o.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:o.getZr().findHover(s.x,s.y).target},l))}},t.prototype.manuallyHideTip=function(r,a,o,s){var l=this._tooltipContent;this._tooltipModel&&l.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(makeDispatchAction(s,o))},t.prototype._manuallyAxisShowTip=function(r,a,o,s){var l=s.seriesIndex,u=s.dataIndex,d=a.getComponent("axisPointer").coordSysAxesInfo;if(!(l==null||u==null||d==null)){var v=a.getSeriesByIndex(l);if(v){var g=v.getData(),f=buildTooltipModel([g.getItemModel(u),v,(v.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return o.dispatchAction({type:"updateAxisPointer",seriesIndex:l,dataIndex:u,position:s.position}),!0}}},t.prototype._tryShow=function(r,a){var o=r.target,s=this._tooltipModel;if(s){this._lastX=r.offsetX,this._lastY=r.offsetY;var l=r.dataByCoordSys;if(l&&l.length)this._showAxisTooltip(l,r);else if(o){this._lastDataByCoordSys=null;var u,d;findEventDispatcher(o,function(v){if(getECData(v).dataIndex!=null)return u=v,!0;if(getECData(v).tooltipConfig!=null)return d=v,!0},!0),u?this._showSeriesItemTooltip(r,u,a):d?this._showComponentItemTooltip(r,d,a):this._hide(a)}else this._lastDataByCoordSys=null,this._hide(a)}},t.prototype._showOrMove=function(r,a){var o=r.get("showDelay");a=bind$1(a,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(a,o):a()},t.prototype._showAxisTooltip=function(r,a){var o=this._ecModel,s=this._tooltipModel,l=[a.offsetX,a.offsetY],u=buildTooltipModel([a.tooltipOption],s),d=this._renderMode,v=[],g=createTooltipMarkup("section",{blocks:[],noHeader:!0}),f=[],c=new TooltipMarkupStyleCreator;each$f(r,function(w){each$f(w.dataByAxis,function(T){var A=o.getComponent(T.axisDim+"Axis",T.axisIndex),E=T.value;if(!(!A||E==null)){var $=getValueLabel(E,A.axis,o,T.seriesDataIndices,T.valueLabelOpt),P=createTooltipMarkup("section",{header:$,noHeader:!trim$1($),sortBlocks:!0,blocks:[]});g.blocks.push(P),each$f(T.seriesDataIndices,function(I){var C=o.getSeriesByIndex(I.seriesIndex),M=I.dataIndexInside,D=C.getDataParams(M);if(!(D.dataIndex<0)){D.axisDim=T.axisDim,D.axisIndex=T.axisIndex,D.axisType=T.axisType,D.axisId=T.axisId,D.axisValue=getAxisRawValue(A.axis,{value:E}),D.axisValueLabel=$,D.marker=c.makeTooltipMarker("item",convertToColorString(D.color),d);var R=normalizeTooltipFormatResult(C.formatTooltip(M,!0,null)),N=R.frag;if(N){var O=buildTooltipModel([C],s).get("valueFormatter");P.blocks.push(O?extend({valueFormatter:O},N):N)}R.text&&f.push(R.text),v.push(D)}})}})}),g.blocks.reverse(),f.reverse();var y=a.position,_=u.get("order"),b=buildTooltipMarkup(g,c,d,_,o.get("useUTC"),u.get("textStyle"));b&&f.unshift(b);var S=d==="richText"?`

`:"<br/>",x=f.join(S);this._showOrMove(u,function(){this._updateContentNotChangedOnAxis(r,v)?this._updatePosition(u,y,l[0],l[1],this._tooltipContent,v):this._showTooltipContent(u,x,v,Math.random()+"",l[0],l[1],y,null,c)})},t.prototype._showSeriesItemTooltip=function(r,a,o){var s=this._ecModel,l=getECData(a),u=l.seriesIndex,d=s.getSeriesByIndex(u),v=l.dataModel||d,g=l.dataIndex,f=l.dataType,c=v.getData(f),y=this._renderMode,_=r.positionDefault,b=buildTooltipModel([c.getItemModel(g),v,d&&(d.coordinateSystem||{}).model],this._tooltipModel,_?{position:_}:null),S=b.get("trigger");if(!(S!=null&&S!=="item")){var x=v.getDataParams(g,f),w=new TooltipMarkupStyleCreator;x.marker=w.makeTooltipMarker("item",convertToColorString(x.color),y);var T=normalizeTooltipFormatResult(v.formatTooltip(g,!1,f)),A=b.get("order"),E=b.get("valueFormatter"),$=T.frag,P=$?buildTooltipMarkup(E?extend({valueFormatter:E},$):$,w,y,A,s.get("useUTC"),b.get("textStyle")):T.text,I="item_"+v.name+"_"+g;this._showOrMove(b,function(){this._showTooltipContent(b,P,x,I,r.offsetX,r.offsetY,r.position,r.target,w)}),o({type:"showTip",dataIndexInside:g,dataIndex:c.getRawIndex(g),seriesIndex:u,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,a,o){var s=getECData(a),l=s.tooltipConfig,u=l.option||{};if(isString(u)){var d=u;u={content:d,formatter:d}}var v=[u],g=this._ecModel.getComponent(s.componentMainType,s.componentIndex);g&&v.push(g),v.push({formatter:u.content});var f=r.positionDefault,c=buildTooltipModel(v,this._tooltipModel,f?{position:f}:null),y=c.get("content"),_=Math.random()+"",b=new TooltipMarkupStyleCreator;this._showOrMove(c,function(){var S=clone$4(c.get("formatterParams")||{});this._showTooltipContent(c,y,S,_,r.offsetX,r.offsetY,r.position,a,b)}),o({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,a,o,s,l,u,d,v,g){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var c=r.get("formatter");d=d||r.get("position");var y=a,_=this._getNearestPoint([l,u],o,r.get("trigger"),r.get("borderColor")),b=_.color;if(c)if(isString(c)){var S=r.ecModel.get("useUTC"),x=isArray$1(o)?o[0]:o,w=x&&x.axisType&&x.axisType.indexOf("time")>=0;y=c,w&&(y=format(x.axisValue,y,S)),y=formatTpl(y,o,!0)}else if(isFunction(c)){var T=bind$1(function(A,E){A===this._ticket&&(f.setContent(E,g,r,b,d),this._updatePosition(r,d,l,u,f,o,v))},this);this._ticket=s,y=c(o,s,T)}else y=c;f.setContent(y,g,r,b,d),f.show(r,b),this._updatePosition(r,d,l,u,f,o,v)}},t.prototype._getNearestPoint=function(r,a,o,s){if(o==="axis"||isArray$1(a))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(a))return{color:s||a.color||a.borderColor}},t.prototype._updatePosition=function(r,a,o,s,l,u,d){var v=this._api.getWidth(),g=this._api.getHeight();a=a||r.get("position");var f=l.getSize(),c=r.get("align"),y=r.get("verticalAlign"),_=d&&d.getBoundingRect().clone();if(d&&_.applyTransform(d.transform),isFunction(a)&&(a=a([o,s],u,l.el,_,{viewSize:[v,g],contentSize:f.slice()})),isArray$1(a))o=parsePercent(a[0],v),s=parsePercent(a[1],g);else if(isObject$3(a)){var b=a;b.width=f[0],b.height=f[1];var S=getLayoutRect(b,{width:v,height:g});o=S.x,s=S.y,c=null,y=null}else if(isString(a)&&d){var x=calcTooltipPosition(a,_,f,r.get("borderWidth"));o=x[0],s=x[1]}else{var x=refixTooltipPosition(o,s,l,v,g,c?null:20,y?null:20);o=x[0],s=x[1]}if(c&&(o-=isCenterAlign(c)?f[0]/2:c==="right"?f[0]:0),y&&(s-=isCenterAlign(y)?f[1]/2:y==="bottom"?f[1]:0),shouldTooltipConfine(r)){var x=confineTooltipPosition(o,s,l,v,g);o=x[0],s=x[1]}l.moveTo(o,s)},t.prototype._updateContentNotChangedOnAxis=function(r,a){var o=this._lastDataByCoordSys,s=this._cbParamsList,l=!!o&&o.length===r.length;return l&&each$f(o,function(u,d){var v=u.dataByAxis||[],g=r[d]||{},f=g.dataByAxis||[];l=l&&v.length===f.length,l&&each$f(v,function(c,y){var _=f[y]||{},b=c.seriesDataIndices||[],S=_.seriesDataIndices||[];l=l&&c.value===_.value&&c.axisType===_.axisType&&c.axisId===_.axisId&&b.length===S.length,l&&each$f(b,function(x,w){var T=S[w];l=l&&x.seriesIndex===T.seriesIndex&&x.dataIndex===T.dataIndex}),s&&each$f(c.seriesDataIndices,function(x){var w=x.seriesIndex,T=a[w],A=s[w];T&&A&&A.data!==T.data&&(l=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=a,!!l},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,a){env$1.node||!a.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",a))},t.type="tooltip",t}(ComponentView$1);function buildTooltipModel(n,t,r){var a=t.ecModel,o;r?(o=new Model$1(r,a,a),o=new Model$1(t.option,o,a)):o=t;for(var s=n.length-1;s>=0;s--){var l=n[s];l&&(l instanceof Model$1&&(l=l.get("tooltip",!0)),isString(l)&&(l={formatter:l}),l&&(o=new Model$1(l,o,a)))}return o}function makeDispatchAction(n,t){return n.dispatchAction||bind$1(t.dispatchAction,t)}function refixTooltipPosition(n,t,r,a,o,s,l){var u=r.getSize(),d=u[0],v=u[1];return s!=null&&(n+d+s+2>a?n-=d+s:n+=s),l!=null&&(t+v+l>o?t-=v+l:t+=l),[n,t]}function confineTooltipPosition(n,t,r,a,o){var s=r.getSize(),l=s[0],u=s[1];return n=Math.min(n+l,a)-l,t=Math.min(t+u,o)-u,n=Math.max(n,0),t=Math.max(t,0),[n,t]}function calcTooltipPosition(n,t,r,a){var o=r[0],s=r[1],l=Math.ceil(Math.SQRT2*a)+8,u=0,d=0,v=t.width,g=t.height;switch(n){case"inside":u=t.x+v/2-o/2,d=t.y+g/2-s/2;break;case"top":u=t.x+v/2-o/2,d=t.y-s-l;break;case"bottom":u=t.x+v/2-o/2,d=t.y+g+l;break;case"left":u=t.x-o-l,d=t.y+g/2-s/2;break;case"right":u=t.x+v+l,d=t.y+g/2-s/2}return[u,d]}function isCenterAlign(n){return n==="center"||n==="middle"}function findComponentReference(n,t,r){var a=preParseFinder(n).queryOptionMap,o=a.keys()[0];if(!(!o||o==="series")){var s=queryReferringComponents(t,o,a.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),l=s.models[0];if(l){var u=r.getViewOfComponentModel(l),d;if(u.group.traverse(function(v){var g=getECData(v).tooltipConfig;if(g&&g.name===n.name)return d=v,!0}),d)return{componentMainType:o,componentIndex:l.componentIndex,el:d}}}}const TooltipView$1=TooltipView;function install$i(n){use(install$q),n.registerComponentModel(TooltipModel$1),n.registerComponentView(TooltipView$1),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(n,t){var r=normalizeToArray(n?n.brush:[]);if(r.length){var a=[];each$f(r,function(d){var v=d.hasOwnProperty("toolbox")?d.toolbox:[];v instanceof Array&&(a=a.concat(v))});var o=n&&n.toolbox;isArray$1(o)&&(o=o[0]),o||(o={feature:{}},n.toolbox=[o]);var s=o.feature||(o.feature={}),l=s.brush||(s.brush={}),u=l.type||(l.type=[]);u.push.apply(u,a),removeDuplicate(u),t&&!u.length&&u.push.apply(u,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(n){var t={};each$f(n,function(r){t[r]=1}),n.length=0,each$f(t,function(r,a){n.push(a)})}var each$4=each$f;function hasKeys(n){if(n){for(var t in n)if(n.hasOwnProperty(t))return!0}}function createVisualMappings(n,t,r){var a={};return each$4(t,function(s){var l=a[s]=o();each$4(n[s],function(u,d){if(VisualMapping$1.isValidType(d)){var v={type:d,visual:u};r&&r(v,s),l[d]=new VisualMapping$1(v),d==="opacity"&&(v=clone$4(v),v.type="colorAlpha",l.__hidden.__alphaForOpacity=new VisualMapping$1(v))}})}),a;function o(){var s=function(){};s.prototype.__hidden=s.prototype;var l=new s;return l}}function replaceVisualOption(n,t,r){var a;each$f(r,function(o){t.hasOwnProperty(o)&&hasKeys(t[o])&&(a=!0)}),a&&each$f(r,function(o){t.hasOwnProperty(o)&&hasKeys(t[o])?n[o]=clone$4(t[o]):delete n[o]})}function applyVisual(n,t,r,a,o,s){var l={};each$f(n,function(f){var c=VisualMapping$1.prepareVisualTypes(t[f]);l[f]=c});var u;function d(f){return getItemVisualFromData(r,u,f)}function v(f,c){setItemVisualFromData(r,u,f,c)}s==null?r.each(g):r.each([s],g);function g(f,c){u=s==null?f:c;var y=r.getRawDataItem(u);if(!(y&&y.visualMap===!1))for(var _=a.call(o,f),b=t[_],S=l[_],x=0,w=S.length;x<w;x++){var T=S[x];b[T]&&b[T].applyVisual(f,d,v)}}}function incrementalApplyVisual(n,t,r,a){var o={};return each$f(n,function(s){var l=VisualMapping$1.prepareVisualTypes(t[s]);o[s]=l}),{progress:function(l,u){var d;a!=null&&(d=u.getDimensionIndex(a));function v(E){return getItemVisualFromData(u,f,E)}function g(E,$){setItemVisualFromData(u,f,E,$)}for(var f,c=u.getStore();(f=l.next())!=null;){var y=u.getRawDataItem(f);if(!(y&&y.visualMap===!1))for(var _=a!=null?c.get(d,f):f,b=r(_),S=t[b],x=o[b],w=0,T=x.length;w<T;w++){var A=x[w];S[A]&&S[A].applyVisual(_,v,g)}}}}}function makeBrushCommonSelectorForSeries(n){var t=n.brushType,r={point:function(a){return selector[t].point(a,r,n)},rect:function(a){return selector[t].rect(a,r,n)}};return r}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(n,t,r){return n&&r.boundingRect.contain(n[0],n[1])},rect:function(n,t,r){return n&&r.boundingRect.intersect(n)}},polygon:{point:function(n,t,r){return n&&r.boundingRect.contain(n[0],n[1])&&contain(r.range,n[0],n[1])},rect:function(n,t,r){var a=r.range;if(!n||a.length<=1)return!1;var o=n.x,s=n.y,l=n.width,u=n.height,d=a[0];if(contain(a,o,s)||contain(a,o+l,s)||contain(a,o,s+u)||contain(a,o+l,s+u)||BoundingRect$1.create(n).contain(d[0],d[1])||linePolygonIntersect(o,s,o+l,s,a)||linePolygonIntersect(o,s,o,s+u,a)||linePolygonIntersect(o+l,s,o+l,s+u,a)||linePolygonIntersect(o,s+u,o+l,s+u,a))return!0}}};function getLineSelectors(n){var t=["x","y"],r=["width","height"];return{point:function(a,o,s){if(a){var l=s.range,u=a[n];return inLineRange(u,l)}},rect:function(a,o,s){if(a){var l=s.range,u=[a[t[n]],a[t[n]]+a[r[n]]];return u[1]<u[0]&&u.reverse(),inLineRange(u[0],l)||inLineRange(u[1],l)||inLineRange(l[0],u)||inLineRange(l[1],u)}}}}function inLineRange(n,t){return t[0]<=n&&n<=t[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(n){n.eachComponent({mainType:"brush"},function(t){var r=t.brushTargetManager=new BrushTargetManager$1(t.option,n);r.setInputRanges(t.areas,n)})}function brushVisual(n,t,r){var a=[],o,s;n.eachComponent({mainType:"brush"},function(l){r&&r.type==="takeGlobalCursor"&&l.setBrushOption(r.key==="brush"?r.brushOption:{brushType:!1})}),layoutCovers(n),n.eachComponent({mainType:"brush"},function(l,u){var d={brushId:l.id,brushIndex:u,brushName:l.name,areas:clone$4(l.areas),selected:[]};a.push(d);var v=l.option,g=v.brushLink,f=[],c=[],y=[],_=!1;u||(o=v.throttleType,s=v.throttleDelay);var b=map$1(l.areas,function(E){var $=boundingRectBuilders[E.brushType],P=defaults({boundingRect:$?$(E):void 0},E);return P.selectors=makeBrushCommonSelectorForSeries(P),P}),S=createVisualMappings(l.option,STATE_LIST,function(E){E.mappingMethod="fixed"});isArray$1(g)&&each$f(g,function(E){f[E]=1});function x(E){return g==="all"||!!f[E]}function w(E){return!!E.length}n.eachSeries(function(E,$){var P=y[$]=[];E.subType==="parallel"?T(E,$):A(E,$,P)});function T(E,$){var P=E.coordinateSystem;_=_||P.hasAxisBrushed(),x($)&&P.eachActiveState(E.getData(),function(I,C){I==="active"&&(c[C]=1)})}function A(E,$,P){if(!(!E.brushSelector||brushModelNotControll(l,$))&&(each$f(b,function(C){l.brushTargetManager.controlSeries(C,E,n)&&P.push(C),_=_||w(P)}),x($)&&w(P))){var I=E.getData();I.each(function(C){checkInRange(E,P,I,C)&&(c[C]=1)})}}n.eachSeries(function(E,$){var P={seriesId:E.id,seriesIndex:$,seriesName:E.name,dataIndex:[]};d.selected.push(P);var I=y[$],C=E.getData(),M=x($)?function(D){return c[D]?(P.dataIndex.push(C.getRawIndex(D)),"inBrush"):"outOfBrush"}:function(D){return checkInRange(E,I,C,D)?(P.dataIndex.push(C.getRawIndex(D)),"inBrush"):"outOfBrush"};(x($)?_:w(I))&&applyVisual(STATE_LIST,S,C,M)})}),dispatchAction$1(t,o,s,a,r)}function dispatchAction$1(n,t,r,a,o){if(o){var s=n.getZr();if(!s[DISPATCH_FLAG]){s[DISPATCH_METHOD]||(s[DISPATCH_METHOD]=doDispatch);var l=createOrUpdate(s,DISPATCH_METHOD,r,t);l(n,a)}}}function doDispatch(n,t){if(!n.isDisposed()){var r=n.getZr();r[DISPATCH_FLAG]=!0,n.dispatchAction({type:"brushSelect",batch:t}),r[DISPATCH_FLAG]=!1}}function checkInRange(n,t,r,a){for(var o=0,s=t.length;o<s;o++){var l=t[o];if(n.brushSelector(a,r,l.selectors,l))return!0}}function brushModelNotControll(n,t){var r=n.option.seriesIndex;return r!=null&&r!=="all"&&(isArray$1(r)?indexOf(r,t)<0:t!==r)}var boundingRectBuilders={rect:function(n){return getBoundingRectFromMinMax(n.range)},polygon:function(n){for(var t,r=n.range,a=0,o=r.length;a<o;a++){t=t||[[1/0,-1/0],[1/0,-1/0]];var s=r[a];s[0]<t[0][0]&&(t[0][0]=s[0]),s[0]>t[0][1]&&(t[0][1]=s[0]),s[1]<t[1][0]&&(t[1][0]=s[1]),s[1]>t[1][1]&&(t[1][1]=s[1])}return t&&getBoundingRectFromMinMax(t)}};function getBoundingRectFromMinMax(n){return new BoundingRect$1(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var BrushView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,a){this.ecModel=r,this.api=a,this.model,(this._brushController=new BrushController$1(a.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},t.prototype.render=function(r,a,o,s){this.model=r,this._updateController(r,a,o,s)},t.prototype.updateTransform=function(r,a,o,s){layoutCovers(a),this._updateController(r,a,o,s)},t.prototype.updateVisual=function(r,a,o,s){this.updateTransform(r,a,o,s)},t.prototype.updateView=function(r,a,o,s){this._updateController(r,a,o,s)},t.prototype._updateController=function(r,a,o,s){(!s||s.$from!==r.id)&&this._brushController.setPanels(r.brushTargetManager.makePanelOpts(o)).enableBrush(r.brushOption).updateCovers(r.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(r){var a=this.model.id,o=this.model.brushTargetManager.setOutputRanges(r.areas,this.ecModel);(!r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:a,areas:clone$4(o),$from:a}),r.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:a,areas:clone$4(o),$from:a})},t.type="brush",t}(ComponentView$1);const BrushView$1=BrushView;var DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.areas=[],r.brushOption={},r}return t.prototype.optionUpdated=function(r,a){var o=this.option;!a&&replaceVisualOption(o,r,["inBrush","outOfBrush"]);var s=o.inBrush=o.inBrush||{};o.outOfBrush=o.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},s.hasOwnProperty("liftZ")||(s.liftZ=5)},t.prototype.setAreas=function(r){r&&(this.areas=map$1(r,function(a){return generateBrushOption(this.option,a)},this))},t.prototype.setBrushOption=function(r){this.brushOption=generateBrushOption(this.option,r),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(ComponentModel$1);function generateBrushOption(n,t){return merge({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new Model$1(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},t,!0)}const BrushModel$1=BrushModel;var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(n){__extends$1(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(r,a,o){var s,l,u;a.eachComponent({mainType:"brush"},function(d){s=d.brushType,l=d.brushOption.brushMode||"single",u=u||!!d.areas.length}),this._brushType=s,this._brushMode=l,each$f(r.get("type",!0),function(d){r.setIconStatus(d,(d==="keep"?l==="multiple":d==="clear"?u:d===s)?"emphasis":"normal")})},t.prototype.updateView=function(r,a,o){this.render(r,a,o)},t.prototype.getIcons=function(){var r=this.model,a=r.get("icon",!0),o={};return each$f(r.get("type",!0),function(s){a[s]&&(o[s]=a[s])}),o},t.prototype.onclick=function(r,a,o){var s=this._brushType,l=this._brushMode;o==="clear"?(a.dispatchAction({type:"axisAreaSelect",intervals:[]}),a.dispatchAction({type:"brush",command:"clear",areas:[]})):a.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:o==="keep"?s:s===o?!1:o,brushMode:o==="keep"?l==="multiple"?"single":"multiple":l}})},t.getDefaultOption=function(r){var a={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.getLocaleModel().get(["toolbox","brush","title"])};return a},t}(ToolboxFeature);const BrushFeature$1=BrushFeature;function install$h(n){n.registerComponentView(BrushView$1),n.registerComponentModel(BrushModel$1),n.registerPreprocessor(brushPreprocessor),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,brushVisual),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,r){r.eachComponent({mainType:"brush",query:t},function(a){a.setAreas(t.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature$1)}var TitleModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(ComponentModel$1),TitleView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,a,o){if(this.group.removeAll(),!!r.get("show")){var s=this.group,l=r.getModel("textStyle"),u=r.getModel("subtextStyle"),d=r.get("textAlign"),v=retrieve2(r.get("textBaseline"),r.get("textVerticalAlign")),g=new ZRText$1({style:createTextStyle(l,{text:r.get("text"),fill:l.getTextColor()},{disableBox:!0}),z2:10}),f=g.getBoundingRect(),c=r.get("subtext"),y=new ZRText$1({style:createTextStyle(u,{text:c,fill:u.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),_=r.get("link"),b=r.get("sublink"),S=r.get("triggerEvent",!0);g.silent=!_&&!S,y.silent=!b&&!S,_&&g.on("click",function(){windowOpen(_,"_"+r.get("target"))}),b&&y.on("click",function(){windowOpen(b,"_"+r.get("subtarget"))}),getECData(g).eventData=getECData(y).eventData=S?{componentType:"title",componentIndex:r.componentIndex}:null,s.add(g),c&&s.add(y);var x=s.getBoundingRect(),w=r.getBoxLayoutParams();w.width=x.width,w.height=x.height;var T=getLayoutRect(w,{width:o.getWidth(),height:o.getHeight()},r.get("padding"));d||(d=r.get("left")||r.get("right"),d==="middle"&&(d="center"),d==="right"?T.x+=T.width:d==="center"&&(T.x+=T.width/2)),v||(v=r.get("top")||r.get("bottom"),v==="center"&&(v="middle"),v==="bottom"?T.y+=T.height:v==="middle"&&(T.y+=T.height/2),v=v||"top"),s.x=T.x,s.y=T.y,s.markRedraw();var A={align:d,verticalAlign:v};g.setStyle(A),y.setStyle(A),x=s.getBoundingRect();var E=T.margin,$=r.getItemStyle(["color","opacity"]);$.fill=r.get("backgroundColor");var P=new Rect$3({shape:{x:x.x-E[3],y:x.y-E[0],width:x.width+E[1]+E[3],height:x.height+E[0]+E[2],r:r.get("borderRadius")},style:$,subPixelOptimize:!0,silent:!0});s.add(P)}},t.type="title",t}(ComponentView$1);function install$g(n){n.registerComponentModel(TitleModel),n.registerComponentView(TitleView)}var TimelineModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.layoutMode="box",r}return t.prototype.init=function(r,a,o){this.mergeDefaultAndTheme(r,o),this._initData()},t.prototype.mergeOption=function(r){n.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(r){r==null&&(r=this.option.currentIndex);var a=this._data.count();this.option.loop?r=(r%a+a)%a:(r>=a&&(r=a-1),r<0&&(r=0)),this.option.currentIndex=r},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(r){this.option.autoPlay=!!r},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var r=this.option,a=r.data||[],o=r.axisType,s=this._names=[],l;o==="category"?(l=[],each$f(a,function(v,g){var f=convertOptionIdName(getDataItemValue(v),""),c;isObject$3(v)?(c=clone$4(v),c.value=g):c=g,l.push(c),s.push(f)})):l=a;var u={category:"ordinal",time:"time",value:"number"}[o]||"number",d=this._data=new SeriesData$1([{name:"value",type:u}],this);d.initData(l,s)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(ComponentModel$1);const TimelineModel$1=TimelineModel;var SliderTimelineModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline.slider",t.defaultOption=inheritDefaultOption(TimelineModel$1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(TimelineModel$1);mixin(SliderTimelineModel,DataFormatMixin.prototype);const SliderTimelineModel$1=SliderTimelineModel;var TimelineView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline",t}(ComponentView$1);const TimelineView$1=TimelineView;var TimelineAxis=function(n){__extends$1(t,n);function t(r,a,o,s){var l=n.call(this,r,a,o)||this;return l.type=s||"value",l}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(Axis$1);const TimelineAxis$1=TimelineAxis;var PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,a){this.api=a},t.prototype.render=function(r,a,o){if(this.model=r,this.api=o,this.ecModel=a,this.group.removeAll(),r.get("show",!0)){var s=this._layout(r,o),l=this._createGroup("_mainGroup"),u=this._createGroup("_labelGroup"),d=this._axis=this._createAxis(s,r);r.formatTooltip=function(v){var g=d.scale.getLabel({value:v});return createTooltipMarkup("nameValue",{noName:!0,value:g})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(v){this["_render"+v](s,l,d,r)},this),this._renderAxisLabel(s,u,d,r),this._position(s,r)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(r,a){var o=r.get(["label","position"]),s=r.get("orient"),l=getViewRect(r,a),u;o==null||o==="auto"?u=s==="horizontal"?l.y+l.height/2<a.getHeight()/2?"-":"+":l.x+l.width/2<a.getWidth()/2?"+":"-":isString(o)?u={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][o]:u=o;var d={horizontal:"center",vertical:u>=0||u==="+"?"left":"right"},v={horizontal:u>=0||u==="+"?"top":"bottom",vertical:"middle"},g={horizontal:0,vertical:PI/2},f=s==="vertical"?l.height:l.width,c=r.getModel("controlStyle"),y=c.get("show",!0),_=y?c.get("itemSize"):0,b=y?c.get("itemGap"):0,S=_+b,x=r.get(["label","rotate"])||0;x=x*PI/180;var w,T,A,E=c.get("position",!0),$=y&&c.get("showPlayBtn",!0),P=y&&c.get("showPrevBtn",!0),I=y&&c.get("showNextBtn",!0),C=0,M=f;E==="left"||E==="bottom"?($&&(w=[0,0],C+=S),P&&(T=[C,0],C+=S),I&&(A=[M-_,0],M-=S)):($&&(w=[M-_,0],M-=S),P&&(T=[0,0],C+=S),I&&(A=[M-_,0],M-=S));var D=[C,M];return r.get("inverse")&&D.reverse(),{viewRect:l,mainLength:f,orient:s,rotation:g[s],labelRotation:x,labelPosOpt:u,labelAlign:r.get(["label","align"])||d[s],labelBaseline:r.get(["label","verticalAlign"])||r.get(["label","baseline"])||v[s],playPosition:w,prevBtnPosition:T,nextBtnPosition:A,axisExtent:D,controlSize:_,controlGap:b}},t.prototype._position=function(r,a){var o=this._mainGroup,s=this._labelGroup,l=r.viewRect;if(r.orient==="vertical"){var u=create$1(),d=l.x,v=l.y+l.height;translate(u,u,[-d,-v]),rotate(u,u,-PI/2),translate(u,u,[d,v]),l=l.clone(),l.applyTransform(u)}var g=w(l),f=w(o.getBoundingRect()),c=w(s.getBoundingRect()),y=[o.x,o.y],_=[s.x,s.y];_[0]=y[0]=g[0][0];var b=r.labelPosOpt;if(b==null||isString(b)){var S=b==="+"?0:1;T(y,f,g,1,S),T(_,c,g,1,1-S)}else{var S=b>=0?0:1;T(y,f,g,1,S),_[1]=y[1]+b}o.setPosition(y),s.setPosition(_),o.rotation=s.rotation=r.rotation,x(o),x(s);function x(A){A.originX=g[0][0]-A.x,A.originY=g[1][0]-A.y}function w(A){return[[A.x,A.x+A.width],[A.y,A.y+A.height]]}function T(A,E,$,P,I){A[P]+=$[P][I]-E[P][I]}},t.prototype._createAxis=function(r,a){var o=a.getData(),s=a.get("axisType"),l=createScaleByModel(a,s);l.getTicks=function(){return o.mapArray(["value"],function(v){return{value:v}})};var u=o.getDataExtent("value");l.setExtent(u[0],u[1]),l.calcNiceTicks();var d=new TimelineAxis$1("value",l,r.axisExtent,s);return d.model=a,d},t.prototype._createGroup=function(r){var a=this[r]=new Group$4;return this.group.add(a),a},t.prototype._renderAxisLine=function(r,a,o,s){var l=o.getExtent();if(s.get(["lineStyle","show"])){var u=new Line$3({shape:{x1:l[0],y1:0,x2:l[1],y2:0},style:extend({lineCap:"round"},s.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});a.add(u);var d=this._progressLine=new Line$3({shape:{x1:l[0],x2:this._currentPointer?this._currentPointer.x:l[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:u.style.lineWidth},s.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});a.add(d)}},t.prototype._renderAxisTick=function(r,a,o,s){var l=this,u=s.getData(),d=o.scale.getTicks();this._tickSymbols=[],each$f(d,function(v){var g=o.dataToCoord(v.value),f=u.getItemModel(v.value),c=f.getModel("itemStyle"),y=f.getModel(["emphasis","itemStyle"]),_=f.getModel(["progress","itemStyle"]),b={x:g,y:0,onclick:bind$1(l._changeTimeline,l,v.value)},S=giveSymbol(f,c,a,b);S.ensureState("emphasis").style=y.getItemStyle(),S.ensureState("progress").style=_.getItemStyle(),enableHoverEmphasis(S);var x=getECData(S);f.get("tooltip")?(x.dataIndex=v.value,x.dataModel=s):x.dataIndex=x.dataModel=null,l._tickSymbols.push(S)})},t.prototype._renderAxisLabel=function(r,a,o,s){var l=this,u=o.getLabelModel();if(u.get("show")){var d=s.getData(),v=o.getViewLabels();this._tickLabels=[],each$f(v,function(g){var f=g.tickValue,c=d.getItemModel(f),y=c.getModel("label"),_=c.getModel(["emphasis","label"]),b=c.getModel(["progress","label"]),S=o.dataToCoord(g.tickValue),x=new ZRText$1({x:S,y:0,rotation:r.labelRotation-r.rotation,onclick:bind$1(l._changeTimeline,l,f),silent:!1,style:createTextStyle(y,{text:g.formattedLabel,align:r.labelAlign,verticalAlign:r.labelBaseline})});x.ensureState("emphasis").style=createTextStyle(_),x.ensureState("progress").style=createTextStyle(b),a.add(x),enableHoverEmphasis(x),labelDataIndexStore(x).dataIndex=f,l._tickLabels.push(x)})}},t.prototype._renderControl=function(r,a,o,s){var l=r.controlSize,u=r.rotation,d=s.getModel("controlStyle").getItemStyle(),v=s.getModel(["emphasis","controlStyle"]).getItemStyle(),g=s.getPlayState(),f=s.get("inverse",!0);c(r.nextBtnPosition,"next",bind$1(this._changeTimeline,this,f?"-":"+")),c(r.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,f?"+":"-")),c(r.playPosition,g?"stop":"play",bind$1(this._handlePlayClick,this,!g),!0);function c(y,_,b,S){if(y){var x=parsePercent$1(retrieve2(s.get(["controlStyle",_+"BtnSize"]),l),l),w=[0,-x/2,x,x],T=makeControlIcon(s,_+"Icon",w,{x:y[0],y:y[1],originX:l/2,originY:0,rotation:S?-u:0,rectHover:!0,style:d,onclick:b});T.ensureState("emphasis").style=v,a.add(T),enableHoverEmphasis(T)}}},t.prototype._renderCurrentPointer=function(r,a,o,s){var l=s.getData(),u=s.getCurrentIndex(),d=l.getItemModel(u).getModel("checkpointStyle"),v=this,g={onCreate:function(f){f.draggable=!0,f.drift=bind$1(v._handlePointerDrag,v),f.ondragend=bind$1(v._handlePointerDragend,v),pointerMoveTo(f,v._progressLine,u,o,s,!0)},onUpdate:function(f){pointerMoveTo(f,v._progressLine,u,o,s)}};this._currentPointer=giveSymbol(d,d,this._mainGroup,{},this._currentPointer,g)},t.prototype._handlePlayClick=function(r){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:r,from:this.uid})},t.prototype._handlePointerDrag=function(r,a,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},t.prototype._handlePointerDragend=function(r){this._pointerChangeTimeline([r.offsetX,r.offsetY],!0)},t.prototype._pointerChangeTimeline=function(r,a){var o=this._toAxisCoord(r)[0],s=this._axis,l=asc$2(s.getExtent().slice());o>l[1]&&(o=l[1]),o<l[0]&&(o=l[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var u=this._progressLine;u&&(u.shape.x2=o,u.dirty());var d=this._findNearestTick(o),v=this.model;(a||d!==v.getCurrentIndex()&&v.get("realtime"))&&this._changeTimeline(d)},t.prototype._doPlayStop=function(){var r=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var a=r.model;r._changeTimeline(a.getCurrentIndex()+(a.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(r){var a=this._mainGroup.getLocalTransform();return applyTransform(r,a,!0)},t.prototype._findNearestTick=function(r){var a=this.model.getData(),o=1/0,s,l=this._axis;return a.each(["value"],function(u,d){var v=l.dataToCoord(u),g=Math.abs(v-r);g<o&&(o=g,s=d)}),s},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(r){var a=this.model.getCurrentIndex();r==="+"?r=a+1:r==="-"&&(r=a-1),this.api.dispatchAction({type:"timelineChange",currentIndex:r,from:this.uid})},t.prototype._updateTicksStatus=function(){var r=this.model.getCurrentIndex(),a=this._tickSymbols,o=this._tickLabels;if(a)for(var s=0;s<a.length;s++)a&&a[s]&&a[s].toggleState("progress",s<r);if(o)for(var s=0;s<o.length;s++)o&&o[s]&&o[s].toggleState("progress",labelDataIndexStore(o[s]).dataIndex<=r)},t.type="timeline.slider",t}(TimelineView$1);function createScaleByModel(n,t){if(t=t||n.get("type"),t)switch(t){case"category":return new OrdinalScale$1({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale$1({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new IntervalScale$1}}function getViewRect(n,t){return getLayoutRect(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},n.get("padding"))}function makeControlIcon(n,t,r,a){var o=a.style,s=createIcon(n.get(["controlStyle",t]),a||{},new BoundingRect$1(r[0],r[1],r[2],r[3]));return o&&s.setStyle(o),s}function giveSymbol(n,t,r,a,o,s){var l=t.get("color");if(o)o.setColor(l),r.add(o),s&&s.onUpdate(o);else{var u=n.get("symbol");o=createSymbol$1(u,-1,-1,2,2,l),o.setStyle("strokeNoScale",!0),r.add(o),s&&s.onCreate(o)}var d=t.getItemStyle(["color"]);o.setStyle(d),a=merge({rectHover:!0,z2:100},a,!0);var v=normalizeSymbolSize(n.get("symbolSize"));a.scaleX=v[0]/2,a.scaleY=v[1]/2;var g=normalizeSymbolOffset(n.get("symbolOffset"),v);g&&(a.x=(a.x||0)+g[0],a.y=(a.y||0)+g[1]);var f=n.get("symbolRotate");return a.rotation=(f||0)*Math.PI/180||0,o.attr(a),o.updateTransform(),o}function pointerMoveTo(n,t,r,a,o,s){if(!n.dragging){var l=o.getModel("checkpointStyle"),u=a.dataToCoord(o.getData().get("value",r));if(s||!l.get("animation",!0))n.attr({x:u,y:0}),t&&t.attr({shape:{x2:u}});else{var d={duration:l.get("animationDuration",!0),easing:l.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:u,y:0},d),t&&t.animateTo({shape:{x2:u}},d)}}}const SliderTimelineView$1=SliderTimelineView;function installTimelineAction(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,r,a){var o=r.getComponent("timeline");return o&&t.currentIndex!=null&&(o.setCurrentIndex(t.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),a.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),r.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),defaults({currentIndex:o.option.currentIndex},t)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,r){var a=r.getComponent("timeline");a&&t.playState!=null&&a.setPlayState(t.playState)})}function timelinePreprocessor(n){var t=n&&n.timeline;isArray$1(t)||(t=t?[t]:[]),each$f(t,function(r){r&&compatibleEC2(r)})}function compatibleEC2(n){var t=n.type,r={number:"value",time:"time"};if(r[t]&&(n.axisType=r[t],delete n.type),transferItem(n),has$1(n,"controlPosition")){var a=n.controlStyle||(n.controlStyle={});has$1(a,"position")||(a.position=n.controlPosition),a.position==="none"&&!has$1(a,"show")&&(a.show=!1,delete a.position),delete n.controlPosition}each$f(n.data||[],function(o){isObject$3(o)&&!isArray$1(o)&&(!has$1(o,"value")&&has$1(o,"name")&&(o.value=o.name),transferItem(o))})}function transferItem(n){var t=n.itemStyle||(n.itemStyle={}),r=t.emphasis||(t.emphasis={}),a=n.label||n.label||{},o=a.normal||(a.normal={}),s={normal:1,emphasis:1};each$f(a,function(l,u){!s[u]&&!has$1(o,u)&&(o[u]=l)}),r.label&&!has$1(a,"emphasis")&&(a.emphasis=r.label,delete r.label)}function has$1(n,t){return n.hasOwnProperty(t)}function install$f(n){n.registerComponentModel(SliderTimelineModel$1),n.registerComponentView(SliderTimelineView$1),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(n),n.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(n,t){if(!n)return!1;for(var r=isArray$1(n)?n:[n],a=0;a<r.length;a++)if(r[a]&&r[a][t])return!0;return!1}function fillLabel(n){defaultEmphasis(n,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,a,o){this.mergeDefaultAndTheme(r,o),this._mergeOption(r,o,!1,!0)},t.prototype.isAnimationEnabled=function(){if(env$1.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,a){this._mergeOption(r,a,!1,!1)},t.prototype._mergeOption=function(r,a,o,s){var l=this.mainType;o||a.eachSeries(function(u){var d=u.get(this.mainType,!0),v=inner$5(u)[l];if(!d||!d.data){inner$5(u)[l]=null;return}v?v._mergeOption(d,a,!0):(s&&fillLabel(d),each$f(d.data,function(g){g instanceof Array?(fillLabel(g[0]),fillLabel(g[1])):fillLabel(g)}),v=this.createMarkerModelFromSeries(d,this,a),extend(v,{mainType:this.mainType,seriesIndex:u.seriesIndex,name:u.name,createdBySelf:!0}),v.__hostSeries=u),inner$5(u)[l]=v},this)},t.prototype.formatTooltip=function(r,a,o){var s=this.getData(),l=this.getRawValue(r),u=s.getName(r);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:u,value:l,noName:!u,noValue:l==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,a){return inner$5(r)[a]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(ComponentModel$1);mixin(MarkerModel,DataFormatMixin.prototype);const MarkerModel$1=MarkerModel;var MarkPointModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,a,o){return new t(r,a,o)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(MarkerModel$1);const MarkPointModel$1=MarkPointModel;function hasXOrY(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function hasXAndY(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function markerTypeCalculatorWithExtent(n,t,r,a,o,s){var l=[],u=isDimensionStacked(t,a),d=u?t.getCalculationInfo("stackResultDimension"):a,v=numCalculate(t,d,n),g=t.indicesOfNearest(d,v)[0];l[o]=t.get(r,g),l[s]=t.get(d,g);var f=t.get(a,g),c=getPrecision(t.get(a,g));return c=Math.min(c,20),c>=0&&(l[s]=+l[s].toFixed(c)),[l,f]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(n,t){if(t){var r=n.getData(),a=n.coordinateSystem,o=a&&a.dimensions;if(!hasXAndY(t)&&!isArray$1(t.coord)&&isArray$1(o)){var s=getAxisInfo(t,r,a,n);if(t=clone$4(t),t.type&&markerTypeCalculator[t.type]&&s.baseAxis&&s.valueAxis){var l=indexOf(o,s.baseAxis.dim),u=indexOf(o,s.valueAxis.dim),d=markerTypeCalculator[t.type](r,s.baseDataDim,s.valueDataDim,l,u);t.coord=d[0],t.value=d[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!isArray$1(o))t.coord=[];else for(var v=t.coord,g=0;g<2;g++)markerTypeCalculator[v[g]]&&(v[g]=numCalculate(r,r.mapDimension(o[g]),v[g]));return t}}function getAxisInfo(n,t,r,a){var o={};return n.valueIndex!=null||n.valueDim!=null?(o.valueDataDim=n.valueIndex!=null?t.getDimension(n.valueIndex):n.valueDim,o.valueAxis=r.getAxis(dataDimToCoordDim(a,o.valueDataDim)),o.baseAxis=r.getOtherAxis(o.valueAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim)):(o.baseAxis=a.getBaseAxis(),o.valueAxis=r.getOtherAxis(o.baseAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim),o.valueDataDim=t.mapDimension(o.valueAxis.dim)),o}function dataDimToCoordDim(n,t){var r=n.getData().getDimensionInfo(t);return r&&r.coordDim}function dataFilter(n,t){return n&&n.containData&&t.coord&&!hasXOrY(t)?n.containData(t.coord):!0}function zoneFilter(n,t,r){return n&&n.containZone&&t.coord&&r.coord&&!hasXOrY(t)&&!hasXOrY(r)?n.containZone(t.coord,r.coord):!0}function createMarkerDimValueGetter(n,t){return n?function(r,a,o,s){var l=s<2?r.coord&&r.coord[s]:r.value;return parseDataValue(l,t[s])}:function(r,a,o,s){return parseDataValue(r.value,t[s])}}function numCalculate(n,t,r){if(r==="average"){var a=0,o=0;return n.each(t,function(s,l){isNaN(s)||(a+=s,o++)}),a/o}else return r==="median"?n.getMedian(t):n.getDataExtent(t)[r==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=createHashMap()},t.prototype.render=function(r,a,o){var s=this,l=this.markerGroupMap;l.each(function(u){inner$4(u).keep=!1}),a.eachSeries(function(u){var d=MarkerModel$1.getMarkerModelFromSeries(u,s.type);d&&s.renderSeries(u,d,a,o)}),l.each(function(u){!inner$4(u).keep&&s.group.remove(u.group)})},t.prototype.markKeep=function(r){inner$4(r).keep=!0},t.prototype.toggleBlurSeries=function(r,a){var o=this;each$f(r,function(s){var l=MarkerModel$1.getMarkerModelFromSeries(s,o.type);if(l){var u=l.getData();u.eachItemGraphicEl(function(d){d&&(a?enterBlur(d):leaveBlur(d))})}})},t.type="marker",t}(ComponentView$1);const MarkerView$1=MarkerView;function updateMarkerLayout(n,t,r){var a=t.coordinateSystem;n.each(function(o){var s=n.getItemModel(o),l,u=parsePercent(s.get("x"),r.getWidth()),d=parsePercent(s.get("y"),r.getHeight());if(!isNaN(u)&&!isNaN(d))l=[u,d];else if(t.getMarkerPosition)l=t.getMarkerPosition(n.getValues(n.dimensions,o));else if(a){var v=n.get(a.dimensions[0],o),g=n.get(a.dimensions[1],o);l=a.dataToPoint([v,g])}isNaN(u)||(l[0]=u),isNaN(d)||(l[1]=d),n.setItemLayout(o,l)})}var MarkPointView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,a,o){a.eachSeries(function(s){var l=MarkerModel$1.getMarkerModelFromSeries(s,"markPoint");l&&(updateMarkerLayout(l.getData(),s,o),this.markerGroupMap.get(s.id).updateLayout())},this)},t.prototype.renderSeries=function(r,a,o,s){var l=r.coordinateSystem,u=r.id,d=r.getData(),v=this.markerGroupMap,g=v.get(u)||v.set(u,new SymbolDraw$1),f=createData(l,r,a);a.setData(f),updateMarkerLayout(a.getData(),r,s),f.each(function(c){var y=f.getItemModel(c),_=y.getShallow("symbol"),b=y.getShallow("symbolSize"),S=y.getShallow("symbolRotate"),x=y.getShallow("symbolOffset"),w=y.getShallow("symbolKeepAspect");if(isFunction(_)||isFunction(b)||isFunction(S)||isFunction(x)){var T=a.getRawValue(c),A=a.getDataParams(c);isFunction(_)&&(_=_(T,A)),isFunction(b)&&(b=b(T,A)),isFunction(S)&&(S=S(T,A)),isFunction(x)&&(x=x(T,A))}var E=y.getModel("itemStyle").getItemStyle(),$=getVisualFromData(d,"color");E.fill||(E.fill=$),f.setItemVisual(c,{symbol:_,symbolSize:b,symbolRotate:S,symbolOffset:x,symbolKeepAspect:w,style:E})}),g.updateData(f),this.group.add(g.group),f.eachItemGraphicEl(function(c){c.traverse(function(y){getECData(y).dataModel=a})}),this.markKeep(g),g.group.silent=a.get("silent")||r.get("silent")},t.type="markPoint",t}(MarkerView$1);function createData(n,t,r){var a;n?a=map$1(n&&n.dimensions,function(u){var d=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return extend(extend({},d),{name:u,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var o=new SeriesData$1(a,r),s=map$1(r.get("data"),curry$1(dataTransform,t));n&&(s=filter(s,curry$1(dataFilter,n)));var l=createMarkerDimValueGetter(!!n,a);return o.initData(s,null,l),o}const MarkPointView$1=MarkPointView;function install$e(n){n.registerComponentModel(MarkPointModel$1),n.registerComponentView(MarkPointView$1),n.registerPreprocessor(function(t){checkMarkerInSeries(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var MarkLineModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,a,o){return new t(r,a,o)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(MarkerModel$1);const MarkLineModel$1=MarkLineModel;var inner$3=makeInner(),markLineTransform=function(n,t,r,a){var o=n.getData(),s;if(isArray$1(a))s=a;else{var l=a.type;if(l==="min"||l==="max"||l==="average"||l==="median"||a.xAxis!=null||a.yAxis!=null){var u=void 0,d=void 0;if(a.yAxis!=null||a.xAxis!=null)u=t.getAxis(a.yAxis!=null?"y":"x"),d=retrieve(a.yAxis,a.xAxis);else{var v=getAxisInfo(a,o,t,n);u=v.valueAxis;var g=getStackedDimension(o,v.valueDataDim);d=numCalculate(o,g,l)}var f=u.dim==="x"?0:1,c=1-f,y=clone$4(a),_={coord:[]};y.type=null,y.coord=[],y.coord[c]=-1/0,_.coord[c]=1/0;var b=r.get("precision");b>=0&&isNumber(d)&&(d=+d.toFixed(Math.min(b,20))),y.coord[f]=_.coord[f]=d,s=[y,_,{type:l,valueIndex:a.valueIndex,value:d}]}else s=[]}var S=[dataTransform(n,s[0]),dataTransform(n,s[1]),extend({},s[2])];return S[2].type=S[2].type||null,merge(S[2],S[0]),merge(S[2],S[1]),S};function isInfinity$1(n){return!isNaN(n)&&!isFinite(n)}function ifMarkLineHasOnlyDim(n,t,r,a){var o=1-n,s=a.dimensions[n];return isInfinity$1(t[o])&&isInfinity$1(r[o])&&t[n]===r[n]&&a.getAxis(s).containData(t[n])}function markLineFilter(n,t){if(n.type==="cartesian2d"){var r=t[0].coord,a=t[1].coord;if(r&&a&&(ifMarkLineHasOnlyDim(1,r,a,n)||ifMarkLineHasOnlyDim(0,r,a,n)))return!0}return dataFilter(n,t[0])&&dataFilter(n,t[1])}function updateSingleMarkerEndLayout(n,t,r,a,o){var s=a.coordinateSystem,l=n.getItemModel(t),u,d=parsePercent(l.get("x"),o.getWidth()),v=parsePercent(l.get("y"),o.getHeight());if(!isNaN(d)&&!isNaN(v))u=[d,v];else{if(a.getMarkerPosition)u=a.getMarkerPosition(n.getValues(n.dimensions,t));else{var g=s.dimensions,f=n.get(g[0],t),c=n.get(g[1],t);u=s.dataToPoint([f,c])}if(isCoordinateSystemType(s,"cartesian2d")){var y=s.getAxis("x"),_=s.getAxis("y"),g=s.dimensions;isInfinity$1(n.get(g[0],t))?u[0]=y.toGlobalCoord(y.getExtent()[r?0:1]):isInfinity$1(n.get(g[1],t))&&(u[1]=_.toGlobalCoord(_.getExtent()[r?0:1]))}isNaN(d)||(u[0]=d),isNaN(v)||(u[1]=v)}n.setItemLayout(t,u)}var MarkLineView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,a,o){a.eachSeries(function(s){var l=MarkerModel$1.getMarkerModelFromSeries(s,"markLine");if(l){var u=l.getData(),d=inner$3(l).from,v=inner$3(l).to;d.each(function(g){updateSingleMarkerEndLayout(d,g,!0,s,o),updateSingleMarkerEndLayout(v,g,!1,s,o)}),u.each(function(g){u.setItemLayout(g,[d.getItemLayout(g),v.getItemLayout(g)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,a,o,s){var l=r.coordinateSystem,u=r.id,d=r.getData(),v=this.markerGroupMap,g=v.get(u)||v.set(u,new LineDraw$1);this.group.add(g.group);var f=createList$1(l,r,a),c=f.from,y=f.to,_=f.line;inner$3(a).from=c,inner$3(a).to=y,a.setData(_);var b=a.get("symbol"),S=a.get("symbolSize"),x=a.get("symbolRotate"),w=a.get("symbolOffset");isArray$1(b)||(b=[b,b]),isArray$1(S)||(S=[S,S]),isArray$1(x)||(x=[x,x]),isArray$1(w)||(w=[w,w]),f.from.each(function(A){T(c,A,!0),T(y,A,!1)}),_.each(function(A){var E=_.getItemModel(A).getModel("lineStyle").getLineStyle();_.setItemLayout(A,[c.getItemLayout(A),y.getItemLayout(A)]),E.stroke==null&&(E.stroke=c.getItemVisual(A,"style").fill),_.setItemVisual(A,{fromSymbolKeepAspect:c.getItemVisual(A,"symbolKeepAspect"),fromSymbolOffset:c.getItemVisual(A,"symbolOffset"),fromSymbolRotate:c.getItemVisual(A,"symbolRotate"),fromSymbolSize:c.getItemVisual(A,"symbolSize"),fromSymbol:c.getItemVisual(A,"symbol"),toSymbolKeepAspect:y.getItemVisual(A,"symbolKeepAspect"),toSymbolOffset:y.getItemVisual(A,"symbolOffset"),toSymbolRotate:y.getItemVisual(A,"symbolRotate"),toSymbolSize:y.getItemVisual(A,"symbolSize"),toSymbol:y.getItemVisual(A,"symbol"),style:E})}),g.updateData(_),f.line.eachItemGraphicEl(function(A){getECData(A).dataModel=a,A.traverse(function(E){getECData(E).dataModel=a})});function T(A,E,$){var P=A.getItemModel(E);updateSingleMarkerEndLayout(A,E,$,r,s);var I=P.getModel("itemStyle").getItemStyle();I.fill==null&&(I.fill=getVisualFromData(d,"color")),A.setItemVisual(E,{symbolKeepAspect:P.get("symbolKeepAspect"),symbolOffset:retrieve2(P.get("symbolOffset",!0),w[$?0:1]),symbolRotate:retrieve2(P.get("symbolRotate",!0),x[$?0:1]),symbolSize:retrieve2(P.get("symbolSize"),S[$?0:1]),symbol:retrieve2(P.get("symbol",!0),b[$?0:1]),style:I})}this.markKeep(g),g.group.silent=a.get("silent")||r.get("silent")},t.type="markLine",t}(MarkerView$1);function createList$1(n,t,r){var a;n?a=map$1(n&&n.dimensions,function(v){var g=t.getData().getDimensionInfo(t.getData().mapDimension(v))||{};return extend(extend({},g),{name:v,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var o=new SeriesData$1(a,r),s=new SeriesData$1(a,r),l=new SeriesData$1([],r),u=map$1(r.get("data"),curry$1(markLineTransform,t,n,r));n&&(u=filter(u,curry$1(markLineFilter,n)));var d=createMarkerDimValueGetter(!!n,a);return o.initData(map$1(u,function(v){return v[0]}),null,d),s.initData(map$1(u,function(v){return v[1]}),null,d),l.initData(map$1(u,function(v){return v[2]})),l.hasItemOption=!0,{from:o,to:s,line:l}}const MarkLineView$1=MarkLineView;function install$d(n){n.registerComponentModel(MarkLineModel$1),n.registerComponentView(MarkLineView$1),n.registerPreprocessor(function(t){checkMarkerInSeries(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var MarkAreaModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,a,o){return new t(r,a,o)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(MarkerModel$1);const MarkAreaModel$1=MarkAreaModel;var inner$2=makeInner(),markAreaTransform=function(n,t,r,a){var o=a[0],s=a[1];if(!(!o||!s)){var l=dataTransform(n,o),u=dataTransform(n,s),d=l.coord,v=u.coord;d[0]=retrieve(d[0],-1/0),d[1]=retrieve(d[1],-1/0),v[0]=retrieve(v[0],1/0),v[1]=retrieve(v[1],1/0);var g=mergeAll([{},l,u]);return g.coord=[l.coord,u.coord],g.x0=l.x,g.y0=l.y,g.x1=u.x,g.y1=u.y,g}};function isInfinity(n){return!isNaN(n)&&!isFinite(n)}function ifMarkAreaHasOnlyDim(n,t,r,a){var o=1-n;return isInfinity(t[o])&&isInfinity(r[o])}function markAreaFilter(n,t){var r=t.coord[0],a=t.coord[1],o={coord:r,x:t.x0,y:t.y0},s={coord:a,x:t.x1,y:t.y1};return isCoordinateSystemType(n,"cartesian2d")?r&&a&&(ifMarkAreaHasOnlyDim(1,r,a)||ifMarkAreaHasOnlyDim(0,r,a))?!0:zoneFilter(n,o,s):dataFilter(n,o)||dataFilter(n,s)}function getSingleMarkerEndPoint(n,t,r,a,o){var s=a.coordinateSystem,l=n.getItemModel(t),u,d=parsePercent(l.get(r[0]),o.getWidth()),v=parsePercent(l.get(r[1]),o.getHeight());if(!isNaN(d)&&!isNaN(v))u=[d,v];else{if(a.getMarkerPosition){var g=n.getValues(["x0","y0"],t),f=n.getValues(["x1","y1"],t),c=s.clampData(g),y=s.clampData(f),_=[];r[0]==="x0"?_[0]=c[0]>y[0]?f[0]:g[0]:_[0]=c[0]>y[0]?g[0]:f[0],r[1]==="y0"?_[1]=c[1]>y[1]?f[1]:g[1]:_[1]=c[1]>y[1]?g[1]:f[1],u=a.getMarkerPosition(_,r,!0)}else{var b=n.get(r[0],t),S=n.get(r[1],t),x=[b,S];s.clampData&&s.clampData(x,x),u=s.dataToPoint(x,!0)}if(isCoordinateSystemType(s,"cartesian2d")){var w=s.getAxis("x"),T=s.getAxis("y"),b=n.get(r[0],t),S=n.get(r[1],t);isInfinity(b)?u[0]=w.toGlobalCoord(w.getExtent()[r[0]==="x0"?0:1]):isInfinity(S)&&(u[1]=T.toGlobalCoord(T.getExtent()[r[1]==="y0"?0:1]))}isNaN(d)||(u[0]=d),isNaN(v)||(u[1]=v)}return u}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,a,o){a.eachSeries(function(s){var l=MarkerModel$1.getMarkerModelFromSeries(s,"markArea");if(l){var u=l.getData();u.each(function(d){var v=map$1(dimPermutations,function(f){return getSingleMarkerEndPoint(u,d,f,s,o)});u.setItemLayout(d,v);var g=u.getItemGraphicEl(d);g.setShape("points",v)})}},this)},t.prototype.renderSeries=function(r,a,o,s){var l=r.coordinateSystem,u=r.id,d=r.getData(),v=this.markerGroupMap,g=v.get(u)||v.set(u,{group:new Group$4});this.group.add(g.group),this.markKeep(g);var f=createList(l,r,a);a.setData(f),f.each(function(c){var y=map$1(dimPermutations,function(I){return getSingleMarkerEndPoint(f,c,I,r,s)}),_=l.getAxis("x").scale,b=l.getAxis("y").scale,S=_.getExtent(),x=b.getExtent(),w=[_.parse(f.get("x0",c)),_.parse(f.get("x1",c))],T=[b.parse(f.get("y0",c)),b.parse(f.get("y1",c))];asc$2(w),asc$2(T);var A=!(S[0]>w[1]||S[1]<w[0]||x[0]>T[1]||x[1]<T[0]),E=!A;f.setItemLayout(c,{points:y,allClipped:E});var $=f.getItemModel(c).getModel("itemStyle").getItemStyle(),P=getVisualFromData(d,"color");$.fill||($.fill=P,isString($.fill)&&($.fill=modifyAlpha($.fill,.4))),$.stroke||($.stroke=P),f.setItemVisual(c,"style",$)}),f.diff(inner$2(g).data).add(function(c){var y=f.getItemLayout(c);if(!y.allClipped){var _=new Polygon$1({shape:{points:y.points}});f.setItemGraphicEl(c,_),g.group.add(_)}}).update(function(c,y){var _=inner$2(g).data.getItemGraphicEl(y),b=f.getItemLayout(c);b.allClipped?_&&g.group.remove(_):(_?updateProps$1(_,{shape:{points:b.points}},a,c):_=new Polygon$1({shape:{points:b.points}}),f.setItemGraphicEl(c,_),g.group.add(_))}).remove(function(c){var y=inner$2(g).data.getItemGraphicEl(c);g.group.remove(y)}).execute(),f.eachItemGraphicEl(function(c,y){var _=f.getItemModel(y),b=f.getItemVisual(y,"style");c.useStyle(f.getItemVisual(y,"style")),setLabelStyle(c,getLabelStatesModels(_),{labelFetcher:a,labelDataIndex:y,defaultText:f.getName(y)||"",inheritColor:isString(b.fill)?modifyAlpha(b.fill,1):"#000"}),setStatesStylesFromModel(c,_),toggleHoverEmphasis(c,null,null,_.get(["emphasis","disabled"])),getECData(c).dataModel=a}),inner$2(g).data=f,g.group.silent=a.get("silent")||r.get("silent")},t.type="markArea",t}(MarkerView$1);function createList(n,t,r){var a,o,s=["x0","y0","x1","y1"];if(n){var l=map$1(n&&n.dimensions,function(v){var g=t.getData(),f=g.getDimensionInfo(g.mapDimension(v))||{};return extend(extend({},f),{name:v,ordinalMeta:null})});o=map$1(s,function(v,g){return{name:v,type:l[g%2].type}}),a=new SeriesData$1(o,r)}else o=[{name:"value",type:"float"}],a=new SeriesData$1(o,r);var u=map$1(r.get("data"),curry$1(markAreaTransform,t,n,r));n&&(u=filter(u,curry$1(markAreaFilter,n)));var d=n?function(v,g,f,c){var y=v.coord[Math.floor(c/2)][c%2];return parseDataValue(y,o[c])}:function(v,g,f,c){return parseDataValue(v.value,o[c])};return a.initData(u,null,d),a.hasItemOption=!0,a}const MarkAreaView$1=MarkAreaView;function install$c(n){n.registerComponentModel(MarkAreaModel$1),n.registerComponentView(MarkAreaView$1),n.registerPreprocessor(function(t){checkMarkerInSeries(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var getDefaultSelectorOptions=function(n,t){if(t==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,a,o){this.mergeDefaultAndTheme(r,o),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,a){n.prototype.mergeOption.call(this,r,a),this._updateSelector(r)},t.prototype._updateSelector=function(r){var a=r.selector,o=this.ecModel;a===!0&&(a=r.selector=["all","inverse"]),isArray$1(a)&&each$f(a,function(s,l){isString(s)&&(s={type:s}),a[l]=merge(s,getDefaultSelectorOptions(o,s.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var a=!1,o=0;o<r.length;o++){var s=r[o].get("name");if(this.isSelected(s)){this.select(s),a=!0;break}}!a&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var a=[],o=[];r.eachRawSeries(function(d){var v=d.name;o.push(v);var g;if(d.legendVisualProvider){var f=d.legendVisualProvider,c=f.getAllNames();r.isSeriesFiltered(d)||(o=o.concat(c)),c.length?a=a.concat(c):g=!0}else g=!0;g&&isNameSpecified(d)&&a.push(d.name)}),this._availableNames=o;var s=this.get("data")||a,l=createHashMap(),u=map$1(s,function(d){return(isString(d)||isNumber(d))&&(d={name:d}),l.get(d.name)?null:(l.set(d.name,!0),new Model$1(d,this,this.ecModel))},this);this._data=filter(u,function(d){return!!d})},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var a=this.option.selected,o=this.get("selectedMode");if(o==="single"){var s=this._data;each$f(s,function(l){a[l.get("name")]=!1})}a[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var a=this.option.selected;a.hasOwnProperty(r)||(a[r]=!0),this[a[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,a=this.option.selected;each$f(r,function(o){a[o.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,a=this.option.selected;each$f(r,function(o){var s=o.get("name",!0);a.hasOwnProperty(s)||(a[s]=!0),a[s]=!a[s]})},t.prototype.isSelected=function(r){var a=this.option.selected;return!(a.hasOwnProperty(r)&&!a[r])&&indexOf(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(ComponentModel$1);const LegendModel$1=LegendModel;var curry=curry$1,each$3=each$f,Group$1=Group$4,LegendView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,a,o){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var l=r.get("align"),u=r.get("orient");(!l||l==="auto")&&(l=r.get("left")==="right"&&u==="vertical"?"right":"left");var d=r.get("selector",!0),v=r.get("selectorPosition",!0);d&&(!v||v==="auto")&&(v=u==="horizontal"?"end":"start"),this.renderInner(l,r,a,o,d,u,v);var g=r.getBoxLayoutParams(),f={width:o.getWidth(),height:o.getHeight()},c=r.get("padding"),y=getLayoutRect(g,f,c),_=this.layoutInner(r,l,y,s,d,v),b=getLayoutRect(defaults({width:_.width,height:_.height},g),f,c);this.group.x=b.x-_.x,this.group.y=b.y-_.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(_,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,a,o,s,l,u,d){var v=this.getContentGroup(),g=createHashMap(),f=a.get("selectedMode"),c=[];o.eachRawSeries(function(y){!y.get("legendHoverLink")&&c.push(y.id)}),each$3(a.getData(),function(y,_){var b=y.get("name");if(!this.newlineDisabled&&(b===""||b===`
`)){var S=new Group$1;S.newline=!0,v.add(S);return}var x=o.getSeriesByName(b)[0];if(!g.get(b))if(x){var w=x.getData(),T=w.getVisual("legendLineStyle")||{},A=w.getVisual("legendIcon"),E=w.getVisual("style"),$=this._createItem(x,b,_,y,a,r,T,E,A,f,s);$.on("click",curry(dispatchSelectAction,b,null,s,c)).on("mouseover",curry(dispatchHighlightAction,x.name,null,s,c)).on("mouseout",curry(dispatchDownplayAction,x.name,null,s,c)),g.set(b,!0)}else o.eachRawSeries(function(P){if(!g.get(b)&&P.legendVisualProvider){var I=P.legendVisualProvider;if(!I.containName(b))return;var C=I.indexOfName(b),M=I.getItemVisual(C,"style"),D=I.getItemVisual(C,"legendIcon"),R=parse(M.fill);R&&R[3]===0&&(R[3]=.2,M=extend(extend({},M),{fill:stringify(R,"rgba")}));var N=this._createItem(P,b,_,y,a,r,{},M,D,f,s);N.on("click",curry(dispatchSelectAction,null,b,s,c)).on("mouseover",curry(dispatchHighlightAction,null,b,s,c)).on("mouseout",curry(dispatchDownplayAction,null,b,s,c)),g.set(b,!0)}},this)},this),l&&this._createSelector(l,a,s,u,d)},t.prototype._createSelector=function(r,a,o,s,l){var u=this.getSelectorGroup();each$3(r,function(v){var g=v.type,f=new ZRText$1({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:g==="all"?"legendAllSelect":"legendInverseSelect"})}});u.add(f);var c=a.getModel("selectorLabel"),y=a.getModel(["emphasis","selectorLabel"]);setLabelStyle(f,{normal:c,emphasis:y},{defaultText:v.title}),enableHoverEmphasis(f)})},t.prototype._createItem=function(r,a,o,s,l,u,d,v,g,f,c){var y=r.visualDrawType,_=l.get("itemWidth"),b=l.get("itemHeight"),S=l.isSelected(a),x=s.get("symbolRotate"),w=s.get("symbolKeepAspect"),T=s.get("icon");g=T||g||"roundRect";var A=getLegendStyle(g,s,d,v,y,S,c),E=new Group$1,$=s.getModel("textStyle");if(isFunction(r.getLegendIcon)&&(!T||T==="inherit"))E.add(r.getLegendIcon({itemWidth:_,itemHeight:b,icon:g,iconRotate:x,itemStyle:A.itemStyle,lineStyle:A.lineStyle,symbolKeepAspect:w}));else{var P=T==="inherit"&&r.getData().getVisual("symbol")?x==="inherit"?r.getData().getVisual("symbolRotate"):x:0;E.add(getDefaultLegendIcon({itemWidth:_,itemHeight:b,icon:g,iconRotate:P,itemStyle:A.itemStyle,lineStyle:A.lineStyle,symbolKeepAspect:w}))}var I=u==="left"?_+5:-5,C=u,M=l.get("formatter"),D=a;isString(M)&&M?D=M.replace("{name}",a??""):isFunction(M)&&(D=M(a));var R=s.get("inactiveColor");E.add(new ZRText$1({style:createTextStyle($,{text:D,x:I,y:b/2,fill:S?$.getTextColor():R,align:C,verticalAlign:"middle"})}));var N=new Rect$3({shape:E.getBoundingRect(),invisible:!0}),O=s.getModel("tooltip");return O.get("show")&&setTooltipConfig({el:N,componentModel:l,itemName:a,itemTooltipOption:O.option}),E.add(N),E.eachChild(function(F){F.silent=!0}),N.silent=!f,this.getContentGroup().add(E),enableHoverEmphasis(E),E.__legendDataIndex=o,E},t.prototype.layoutInner=function(r,a,o,s,l,u){var d=this.getContentGroup(),v=this.getSelectorGroup();box(r.get("orient"),d,r.get("itemGap"),o.width,o.height);var g=d.getBoundingRect(),f=[-g.x,-g.y];if(v.markRedraw(),d.markRedraw(),l){box("horizontal",v,r.get("selectorItemGap",!0));var c=v.getBoundingRect(),y=[-c.x,-c.y],_=r.get("selectorButtonGap",!0),b=r.getOrient().index,S=b===0?"width":"height",x=b===0?"height":"width",w=b===0?"y":"x";u==="end"?y[b]+=g[S]+_:f[b]+=c[S]+_,y[1-b]+=g[x]/2-c[x]/2,v.x=y[0],v.y=y[1],d.x=f[0],d.y=f[1];var T={x:0,y:0};return T[S]=g[S]+_+c[S],T[x]=Math.max(g[x],c[x]),T[w]=Math.min(0,c[w]+y[1-b]),T}else return d.x=f[0],d.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ComponentView$1);function getLegendStyle(n,t,r,a,o,s,l){function u(S,x){S.lineWidth==="auto"&&(S.lineWidth=x.lineWidth>0?2:0),each$3(S,function(w,T){S[T]==="inherit"&&(S[T]=x[T])})}var d=t.getModel("itemStyle"),v=d.getItemStyle(),g=n.lastIndexOf("empty",0)===0?"fill":"stroke",f=d.getShallow("decal");v.decal=!f||f==="inherit"?a.decal:createOrUpdatePatternFromDecal(f,l),v.fill==="inherit"&&(v.fill=a[o]),v.stroke==="inherit"&&(v.stroke=a[g]),v.opacity==="inherit"&&(v.opacity=(o==="fill"?a:r).opacity),u(v,a);var c=t.getModel("lineStyle"),y=c.getLineStyle();if(u(y,r),v.fill==="auto"&&(v.fill=a.fill),v.stroke==="auto"&&(v.stroke=a.fill),y.stroke==="auto"&&(y.stroke=a.fill),!s){var _=t.get("inactiveBorderWidth"),b=v[g];v.lineWidth=_==="auto"?a.lineWidth>0&&b?2:0:v.lineWidth,v.fill=t.get("inactiveColor"),v.stroke=t.get("inactiveBorderColor"),y.stroke=c.get("inactiveColor"),y.lineWidth=c.get("inactiveWidth")}return{itemStyle:v,lineStyle:y}}function getDefaultLegendIcon(n){var t=n.icon||"roundRect",r=createSymbol$1(t,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return r.setStyle(n.itemStyle),r.rotation=(n.iconRotate||0)*Math.PI/180,r.setOrigin([n.itemWidth/2,n.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function dispatchSelectAction(n,t,r,a){dispatchDownplayAction(n,t,r,a),r.dispatchAction({type:"legendToggleSelect",name:n??t}),dispatchHighlightAction(n,t,r,a)}function isUseHoverLayer(n){for(var t=n.getZr().storage.getDisplayList(),r,a=0,o=t.length;a<o&&!(r=t[a].states.emphasis);)a++;return r&&r.hoverLayer}function dispatchHighlightAction(n,t,r,a){isUseHoverLayer(r)||r.dispatchAction({type:"highlight",seriesName:n,name:t,excludeSeriesId:a})}function dispatchDownplayAction(n,t,r,a){isUseHoverLayer(r)||r.dispatchAction({type:"downplay",seriesName:n,name:t,excludeSeriesId:a})}const LegendView$1=LegendView;function legendFilter(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.filterSeries(function(r){for(var a=0;a<t.length;a++)if(!t[a].isSelected(r.name))return!1;return!0})}function legendSelectActionHandler(n,t,r){var a={},o=n==="toggleSelected",s;return r.eachComponent("legend",function(l){o&&s!=null?l[s?"select":"unSelect"](t.name):n==="allSelect"||n==="inverseSelect"?l[n]():(l[n](t.name),s=l.isSelected(t.name));var u=l.getData();each$f(u,function(d){var v=d.get("name");if(!(v===`
`||v==="")){var g=l.isSelected(v);a.hasOwnProperty(v)?a[v]=a[v]&&g:a[v]=g}})}),n==="allSelect"||n==="inverseSelect"?{selected:a}:{name:t.name,selected:a}}function installLegendAction(n){n.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),n.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),n.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(n){n.registerComponentModel(LegendModel$1),n.registerComponentView(LegendView$1),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),n.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(n)}var ScrollableLegendModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,a,o){var s=getLayoutParams(r);n.prototype.init.call(this,r,a,o),mergeAndNormalizeLayoutParams(this,r,s)},t.prototype.mergeOption=function(r,a){n.prototype.mergeOption.call(this,r,a),mergeAndNormalizeLayoutParams(this,this.option,r)},t.type="legend.scroll",t.defaultOption=inheritDefaultOption(LegendModel$1.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(LegendModel$1);function mergeAndNormalizeLayoutParams(n,t,r){var a=n.getOrient(),o=[1,1];o[a.index]=0,mergeLayoutParam(t,r,{type:"box",ignoreSize:!!o})}const ScrollableLegendModel$1=ScrollableLegendModel;var Group=Group$4,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},t.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,a,o,s,l,u,d){var v=this;n.prototype.renderInner.call(this,r,a,o,s,l,u,d);var g=this._controllerGroup,f=a.get("pageIconSize",!0),c=isArray$1(f)?f:[f,f];_("pagePrev",0);var y=a.getModel("pageTextStyle");g.add(new ZRText$1({name:"pageText",style:{text:"xx/xx",fill:y.getTextColor(),font:y.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),_("pageNext",1);function _(b,S){var x=b+"DataIndex",w=createIcon(a.get("pageIcons",!0)[a.getOrient().name][S],{onclick:bind$1(v._pageGo,v,x,a,s)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});w.name=b,g.add(w)}},t.prototype.layoutInner=function(r,a,o,s,l,u){var d=this.getSelectorGroup(),v=r.getOrient().index,g=WH[v],f=XY[v],c=WH[1-v],y=XY[1-v];l&&box("horizontal",d,r.get("selectorItemGap",!0));var _=r.get("selectorButtonGap",!0),b=d.getBoundingRect(),S=[-b.x,-b.y],x=clone$4(o);l&&(x[g]=o[g]-b[g]-_);var w=this._layoutContentAndController(r,s,x,v,g,c,y,f);if(l){if(u==="end")S[v]+=w[g]+_;else{var T=b[g]+_;S[v]-=T,w[f]-=T}w[g]+=b[g]+_,S[1-v]+=w[y]+w[c]/2-b[c]/2,w[c]=Math.max(w[c],b[c]),w[y]=Math.min(w[y],b[y]+S[1-v]),d.x=S[0],d.y=S[1],d.markRedraw()}return w},t.prototype._layoutContentAndController=function(r,a,o,s,l,u,d,v){var g=this.getContentGroup(),f=this._containerGroup,c=this._controllerGroup;box(r.get("orient"),g,r.get("itemGap"),s?o.width:null,s?null:o.height),box("horizontal",c,r.get("pageButtonItemGap",!0));var y=g.getBoundingRect(),_=c.getBoundingRect(),b=this._showController=y[l]>o[l],S=[-y.x,-y.y];a||(S[s]=g[v]);var x=[0,0],w=[-_.x,-_.y],T=retrieve2(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(b){var A=r.get("pageButtonPosition",!0);A==="end"?w[s]+=o[l]-_[l]:x[s]+=_[l]+T}w[1-s]+=y[u]/2-_[u]/2,g.setPosition(S),f.setPosition(x),c.setPosition(w);var E={x:0,y:0};if(E[l]=b?o[l]:y[l],E[u]=Math.max(y[u],_[u]),E[d]=Math.min(0,_[d]+w[1-s]),f.__rectSize=o[l],b){var $={x:0,y:0};$[l]=Math.max(o[l]-_[l]-T,0),$[u]=E[u],f.setClipPath(new Rect$3({shape:$})),f.__rectSize=$[l]}else c.eachChild(function(I){I.attr({invisible:!0,silent:!0})});var P=this._getPageInfo(r);return P.pageIndex!=null&&updateProps$1(g,{x:P.contentPosition[0],y:P.contentPosition[1]},b?r:null),this._updatePageInfoView(r,P),E},t.prototype._pageGo=function(r,a,o){var s=this._getPageInfo(a)[r];s!=null&&o.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:a.id})},t.prototype._updatePageInfoView=function(r,a){var o=this._controllerGroup;each$f(["pagePrev","pageNext"],function(g){var f=g+"DataIndex",c=a[f]!=null,y=o.childOfName(g);y&&(y.setStyle("fill",c?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),y.cursor=c?"pointer":"default")});var s=o.childOfName("pageText"),l=r.get("pageFormatter"),u=a.pageIndex,d=u!=null?u+1:0,v=a.pageCount;s&&l&&s.setStyle("text",isString(l)?l.replace("{current}",d==null?"":d+"").replace("{total}",v==null?"":v+""):l({current:d,total:v}))},t.prototype._getPageInfo=function(r){var a=r.get("scrollDataIndex",!0),o=this.getContentGroup(),s=this._containerGroup.__rectSize,l=r.getOrient().index,u=WH[l],d=XY[l],v=this._findTargetItemIndex(a),g=o.children(),f=g[v],c=g.length,y=c?1:0,_={contentPosition:[o.x,o.y],pageCount:y,pageIndex:y-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return _;var b=A(f);_.contentPosition[l]=-b.s;for(var S=v+1,x=b,w=b,T=null;S<=c;++S)T=A(g[S]),(!T&&w.e>x.s+s||T&&!E(T,x.s))&&(w.i>x.i?x=w:x=T,x&&(_.pageNextDataIndex==null&&(_.pageNextDataIndex=x.i),++_.pageCount)),w=T;for(var S=v-1,x=b,w=b,T=null;S>=-1;--S)T=A(g[S]),(!T||!E(w,T.s))&&x.i<w.i&&(w=x,_.pagePrevDataIndex==null&&(_.pagePrevDataIndex=x.i),++_.pageCount,++_.pageIndex),x=T;return _;function A($){if($){var P=$.getBoundingRect(),I=P[d]+$[d];return{s:I,e:I+P[u],i:$.__legendDataIndex}}}function E($,P){return $.e>=P&&$.s<=P+s}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var a,o=this.getContentGroup(),s;return o.eachChild(function(l,u){var d=l.__legendDataIndex;s==null&&d!=null&&(s=u),d===r&&(a=u)}),a??s},t.type="legend.scroll",t}(LegendView$1);const ScrollableLegendView$1=ScrollableLegendView;function installScrollableLegendAction(n){n.registerAction("legendScroll","legendscroll",function(t,r){var a=t.scrollDataIndex;a!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(o){o.setScrollDataIndex(a)})})}function install$a(n){use(install$b),n.registerComponentModel(ScrollableLegendModel$1),n.registerComponentView(ScrollableLegendView$1),installScrollableLegendAction(n)}function install$9(n){use(install$b),use(install$a)}var InsideZoomModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.inside",t.defaultOption=inheritDefaultOption(DataZoomModel$1.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(DataZoomModel$1);const InsideZoomModel$1=InsideZoomModel;var inner$1=makeInner();function setViewInfoToCoordSysRecord(n,t,r){inner$1(n).coordSysRecordMap.each(function(a){var o=a.dataZoomInfoMap.get(t.uid);o&&(o.getRange=r)})}function disposeCoordSysRecordIfNeeded(n,t){for(var r=inner$1(n).coordSysRecordMap,a=r.keys(),o=0;o<a.length;o++){var s=a[o],l=r.get(s),u=l.dataZoomInfoMap;if(u){var d=t.uid,v=u.get(d);v&&(u.removeKey(d),u.keys().length||disposeCoordSysRecord(r,l))}}}function disposeCoordSysRecord(n,t){if(t){n.removeKey(t.model.uid);var r=t.controller;r&&r.dispose()}}function createCoordSysRecord(n,t){var r={model:t,containsPoint:curry$1(containsPoint,t),dispatchAction:curry$1(dispatchAction,n),dataZoomInfoMap:null,controller:null},a=r.controller=new RoamController$1(n.getZr());return each$f(["pan","zoom","scrollMove"],function(o){a.on(o,function(s){var l=[];r.dataZoomInfoMap.each(function(u){if(s.isAvailableBehavior(u.model.option)){var d=(u.getRange||{})[o],v=d&&d(u.dzReferCoordSysInfo,r.model.mainType,r.controller,s);!u.model.get("disabled",!0)&&v&&l.push({dataZoomId:u.model.id,start:v[0],end:v[1]})}}),l.length&&r.dispatchAction(l)})}),r}function dispatchAction(n,t){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function containsPoint(n,t,r,a){return n.coordinateSystem.containPoint([r,a])}function mergeControllerParams(n){var t,r="type_",a={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return n.each(function(s){var l=s.model,u=l.get("disabled",!0)?!1:l.get("zoomLock",!0)?"move":!0;a[r+u]>a[r+t]&&(t=u),o=o&&l.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}function installDataZoomRoamProcessor(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(t,r){var a=inner$1(r),o=a.coordSysRecordMap||(a.coordSysRecordMap=createHashMap());o.each(function(s){s.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(s){var l=collectReferCoordSysModelInfo(s);each$f(l.infoList,function(u){var d=u.model.uid,v=o.get(d)||o.set(d,createCoordSysRecord(r,u.model)),g=v.dataZoomInfoMap||(v.dataZoomInfoMap=createHashMap());g.set(s.uid,{dzReferCoordSysInfo:u,model:s,getRange:null})})}),o.each(function(s){var l=s.controller,u,d=s.dataZoomInfoMap;if(d){var v=d.keys()[0];v!=null&&(u=d.get(v))}if(!u){disposeCoordSysRecord(o,s);return}var g=mergeControllerParams(d);l.enable(g.controlType,g.opt),l.setPointerChecker(s.containsPoint),createOrUpdate(s,"dispatchAction",u.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return t.prototype.render=function(r,a,o){if(n.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),setViewInfoToCoordSysRecord(o,r,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(DataZoomView$1),getRangeHandlers={zoom:function(n,t,r,a){var o=this.range,s=o.slice(),l=n.axisModels[0];if(l){var u=getDirectionInfo[t](null,[a.originX,a.originY],l,r,n),d=(u.signal>0?u.pixelStart+u.pixelLength-u.pixel:u.pixel-u.pixelStart)/u.pixelLength*(s[1]-s[0])+s[0],v=Math.max(1/a.scale,0);s[0]=(s[0]-d)*v+d,s[1]=(s[1]-d)*v+d;var g=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,s,[0,100],0,g.minSpan,g.maxSpan),this.range=s,o[0]!==s[0]||o[1]!==s[1])return s}},pan:makeMover(function(n,t,r,a,o,s){var l=getDirectionInfo[a]([s.oldX,s.oldY],[s.newX,s.newY],t,o,r);return l.signal*(n[1]-n[0])*l.pixel/l.pixelLength}),scrollMove:makeMover(function(n,t,r,a,o,s){var l=getDirectionInfo[a]([0,0],[s.scrollDelta,s.scrollDelta],t,o,r);return l.signal*(n[1]-n[0])*s.scrollDelta})};function makeMover(n){return function(t,r,a,o){var s=this.range,l=s.slice(),u=t.axisModels[0];if(u){var d=n(l,u,t,r,a,o);if(sliderMove(d,l,[0,100],"all"),this.range=l,s[0]!==l[0]||s[1]!==l[1])return l}}}var getDirectionInfo={grid:function(n,t,r,a,o){var s=r.axis,l={},u=o.model.coordinateSystem.getRect();return n=n||[0,0],s.dim==="x"?(l.pixel=t[0]-n[0],l.pixelLength=u.width,l.pixelStart=u.x,l.signal=s.inverse?1:-1):(l.pixel=t[1]-n[1],l.pixelLength=u.height,l.pixelStart=u.y,l.signal=s.inverse?-1:1),l},polar:function(n,t,r,a,o){var s=r.axis,l={},u=o.model.coordinateSystem,d=u.getRadiusAxis().getExtent(),v=u.getAngleAxis().getExtent();return n=n?u.pointToCoord(n):[0,0],t=u.pointToCoord(t),r.mainType==="radiusAxis"?(l.pixel=t[0]-n[0],l.pixelLength=d[1]-d[0],l.pixelStart=d[0],l.signal=s.inverse?1:-1):(l.pixel=t[1]-n[1],l.pixelLength=v[1]-v[0],l.pixelStart=v[0],l.signal=s.inverse?-1:1),l},singleAxis:function(n,t,r,a,o){var s=r.axis,l=o.model.coordinateSystem.getRect(),u={};return n=n||[0,0],s.orient==="horizontal"?(u.pixel=t[0]-n[0],u.pixelLength=l.width,u.pixelStart=l.x,u.signal=s.inverse?1:-1):(u.pixel=t[1]-n[1],u.pixelLength=l.height,u.pixelStart=l.y,u.signal=s.inverse?-1:1),u}};const InsideZoomView$1=InsideZoomView;function install$8(n){installCommon$1(n),n.registerComponentModel(InsideZoomModel$1),n.registerComponentView(InsideZoomView$1),installDataZoomRoamProcessor(n)}var SliderZoomModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=inheritDefaultOption(DataZoomModel$1.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(DataZoomModel$1);const SliderZoomModel$1=SliderZoomModel;var Rect=Rect$3,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r._displayables={},r}return t.prototype.init=function(r,a){this.api=a,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},t.prototype.render=function(r,a,o,s){if(n.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!s||s.type!=="dataZoom"||s.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var a=this._displayables.sliderGroup=new Group$4;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(a),this._positionGroup()},t.prototype._resetLocation=function(){var r=this.dataZoomModel,a=this.api,o=r.get("brushSelect"),s=o?DEFAULT_MOVE_HANDLE_SIZE:0,l=this._findCoordRect(),u={width:a.getWidth(),height:a.getHeight()},d=this._orient===HORIZONTAL?{right:u.width-l.x-l.width,top:u.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-s,width:l.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:l.y,width:DEFAULT_FILLER_SIZE,height:l.height},v=getLayoutParams(r.option);each$f(["right","top","width","height"],function(f){v[f]==="ph"&&(v[f]=d[f])});var g=getLayoutRect(v,u);this._location={x:g.x,y:g.y},this._size=[g.width,g.height],this._orient===VERTICAL&&this._size.reverse()},t.prototype._positionGroup=function(){var r=this.group,a=this._location,o=this._orient,s=this.dataZoomModel.getFirstTargetAxisModel(),l=s&&s.get("inverse"),u=this._displayables.sliderGroup,d=(this._dataShadowInfo||{}).otherAxisInverse;u.attr(o===HORIZONTAL&&!l?{scaleY:d?1:-1,scaleX:1}:o===HORIZONTAL&&l?{scaleY:d?1:-1,scaleX:-1}:o===VERTICAL&&!l?{scaleY:d?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:d?-1:1,scaleX:-1,rotation:Math.PI/2});var v=r.getBoundingRect([u]);r.x=a.x-v.x,r.y=a.y-v.y,r.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var r=this.dataZoomModel,a=this._size,o=this._displayables.sliderGroup,s=r.get("brushSelect");o.add(new Rect({silent:!0,shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var l=new Rect({shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),u=this.api.getZr();s?(l.on("mousedown",this._onBrushStart,this),l.cursor="crosshair",u.on("mousemove",this._onBrush),u.on("mouseup",this._onBrushEnd)):(u.off("mousemove",this._onBrush),u.off("mouseup",this._onBrushEnd)),o.add(l)},t.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var a=this._size,o=this._shadowSize||[],s=r.series,l=s.getRawData(),u=s.getShadowDim&&s.getShadowDim(),d=u&&l.getDimensionInfo(u)?s.getShadowDim():r.otherDim;if(d==null)return;var v=this._shadowPolygonPts,g=this._shadowPolylinePts;if(l!==this._shadowData||d!==this._shadowDim||a[0]!==o[0]||a[1]!==o[1]){var f=l.getDataExtent(d),c=(f[1]-f[0])*.3;f=[f[0]-c,f[1]+c];var y=[0,a[1]],_=[0,a[0]],b=[[a[0],0],[0,0]],S=[],x=_[1]/(l.count()-1),w=0,T=Math.round(l.count()/a[0]),A;l.each([d],function(C,M){if(T>0&&M%T){w+=x;return}var D=C==null||isNaN(C)||C==="",R=D?0:linearMap$2(C,f,y,!0);D&&!A&&M?(b.push([b[b.length-1][0],0]),S.push([S[S.length-1][0],0])):!D&&A&&(b.push([w,0]),S.push([w,0])),b.push([w,R]),S.push([w,R]),w+=x,A=D}),v=this._shadowPolygonPts=b,g=this._shadowPolylinePts=S}this._shadowData=l,this._shadowDim=d,this._shadowSize=[a[0],a[1]];var E=this.dataZoomModel;function $(C){var M=E.getModel(C?"selectedDataBackground":"dataBackground"),D=new Group$4,R=new Polygon$1({shape:{points:v},segmentIgnoreThreshold:1,style:M.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),N=new Polyline$3({shape:{points:g},segmentIgnoreThreshold:1,style:M.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return D.add(R),D.add(N),D}for(var P=0;P<3;P++){var I=$(P===1);this._displayables.sliderGroup.add(I),this._displayables.dataShadowSegs.push(I)}},t.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,a=r.get("showDataShadow");if(a!==!1){var o,s=this.ecModel;return r.eachTargetAxis(function(l,u){var d=r.getAxisProxy(l,u).getTargetSeriesModels();each$f(d,function(v){if(!o&&!(a!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,v.get("type"))<0)){var g=s.getComponent(getAxisMainType(l),u).axis,f=getOtherDim(l),c,y=v.coordinateSystem;f!=null&&y.getOtherAxis&&(c=y.getOtherAxis(g).inverse),f=v.getData().mapDimension(f),o={thisAxis:g,series:v,thisDim:l,otherDim:f,otherAxisInverse:c}}},this)},this),o}},t.prototype._renderHandle=function(){var r=this.group,a=this._displayables,o=a.handles=[null,null],s=a.handleLabels=[null,null],l=this._displayables.sliderGroup,u=this._size,d=this.dataZoomModel,v=this.api,g=d.get("borderRadius")||0,f=d.get("brushSelect"),c=a.filler=new Rect({silent:f,style:{fill:d.get("fillerColor")},textConfig:{position:"inside"}});l.add(c),l.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:u[0],height:u[1],r:g},style:{stroke:d.get("dataBackgroundColor")||d.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(T){var A=d.get("handleIcon");!symbolBuildProxies[A]&&A.indexOf("path://")<0&&A.indexOf("image://")<0&&(A="path://"+A);var E=createSymbol$1(A,-1,0,2,2,null,!0);E.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,T),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var $=E.getBoundingRect(),P=d.get("handleSize");this._handleHeight=parsePercent(P,this._size[1]),this._handleWidth=$.width/$.height*this._handleHeight,E.setStyle(d.getModel("handleStyle").getItemStyle()),E.style.strokeNoScale=!0,E.rectHover=!0,E.ensureState("emphasis").style=d.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(E);var I=d.get("handleColor");I!=null&&(E.style.fill=I),l.add(o[T]=E);var C=d.getModel("textStyle");r.add(s[T]=new ZRText$1({silent:!0,invisible:!0,style:createTextStyle(C,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:C.getTextColor(),font:C.getFont()}),z2:10}))},this);var y=c;if(f){var _=parsePercent(d.get("moveHandleSize"),u[1]),b=a.moveHandle=new Rect$3({style:d.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:u[1]-.5,height:_}}),S=_*.8,x=a.moveHandleIcon=createSymbol$1(d.get("moveHandleIcon"),-S/2,-S/2,S,S,"#fff",!0);x.silent=!0,x.y=u[1]+_/2-.5,b.ensureState("emphasis").style=d.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var w=Math.min(u[1]/2,Math.max(_,10));y=a.moveZone=new Rect$3({invisible:!0,shape:{y:u[1]-w,height:_+w}}),y.on("mouseover",function(){v.enterEmphasis(b)}).on("mouseout",function(){v.leaveEmphasis(b)}),l.add(b),l.add(x),l.add(y)}y.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),a=this._getViewExtent();this._handleEnds=[linearMap$2(r[0],[0,100],a,!0),linearMap$2(r[1],[0,100],a,!0)]},t.prototype._updateInterval=function(r,a){var o=this.dataZoomModel,s=this._handleEnds,l=this._getViewExtent(),u=o.findRepresentativeAxisProxy().getMinMaxSpan(),d=[0,100];sliderMove(a,s,l,o.get("zoomLock")?"all":r,u.minSpan!=null?linearMap$2(u.minSpan,d,l,!0):null,u.maxSpan!=null?linearMap$2(u.maxSpan,d,l,!0):null);var v=this._range,g=this._range=asc$2([linearMap$2(s[0],l,d,!0),linearMap$2(s[1],l,d,!0)]);return!v||v[0]!==g[0]||v[1]!==g[1]},t.prototype._updateView=function(r){var a=this._displayables,o=this._handleEnds,s=asc$2(o.slice()),l=this._size;each$f([0,1],function(y){var _=a.handles[y],b=this._handleHeight;_.attr({scaleX:b/2,scaleY:b/2,x:o[y]+(y?-1:1),y:l[1]/2-b/2})},this),a.filler.setShape({x:s[0],y:0,width:s[1]-s[0],height:l[1]});var u={x:s[0],width:s[1]-s[0]};a.moveHandle&&(a.moveHandle.setShape(u),a.moveZone.setShape(u),a.moveZone.getBoundingRect(),a.moveHandleIcon&&a.moveHandleIcon.attr("x",u.x+u.width/2));for(var d=a.dataShadowSegs,v=[0,s[0],s[1],l[0]],g=0;g<d.length;g++){var f=d[g],c=f.getClipPath();c||(c=new Rect$3,f.setClipPath(c)),c.setShape({x:v[g],y:0,width:v[g+1]-v[g],height:l[1]})}this._updateDataInfo(r)},t.prototype._updateDataInfo=function(r){var a=this.dataZoomModel,o=this._displayables,s=o.handleLabels,l=this._orient,u=["",""];if(a.get("showDetail")){var d=a.findRepresentativeAxisProxy();if(d){var v=d.getAxisModel().axis,g=this._range,f=r?d.calculateDataWindow({start:g[0],end:g[1]}).valueWindow:d.getDataValueWindow();u=[this._formatLabel(f[0],v),this._formatLabel(f[1],v)]}}var c=asc$2(this._handleEnds.slice());y.call(this,0),y.call(this,1);function y(_){var b=getTransform$1(o.handles[_].parent,this.group),S=transformDirection(_===0?"right":"left",b),x=this._handleWidth/2+LABEL_GAP,w=applyTransform([c[_]+(_===0?-x:x),this._size[1]/2],b);s[_].setStyle({x:w[0],y:w[1],verticalAlign:l===HORIZONTAL?"middle":S,align:l===HORIZONTAL?S:"center",text:u[_]})}},t.prototype._formatLabel=function(r,a){var o=this.dataZoomModel,s=o.get("labelFormatter"),l=o.get("labelPrecision");(l==null||l==="auto")&&(l=a.getPixelPrecision());var u=r==null||isNaN(r)?"":a.type==="category"||a.type==="time"?a.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(l,20));return isFunction(s)?s(r,u):isString(s)?s.replace("{value}",u):u},t.prototype._showDataInfo=function(r){r=this._dragging||r;var a=this._displayables,o=a.handleLabels;o[0].attr("invisible",!r),o[1].attr("invisible",!r),a.moveHandle&&this.api[r?"enterEmphasis":"leaveEmphasis"](a.moveHandle,1)},t.prototype._onDragMove=function(r,a,o,s){this._dragging=!0,stop(s.event);var l=this._displayables.sliderGroup.getLocalTransform(),u=applyTransform([a,o],l,!0),d=this._updateInterval(r,u[0]),v=this.dataZoomModel.get("realtime");this._updateView(!v),d&&v&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(r){var a=this._size,o=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(o[0]<0||o[0]>a[0]||o[1]<0||o[1]>a[1])){var s=this._handleEnds,l=(s[0]+s[1])/2,u=this._updateInterval("all",o[0]-l);this._updateView(),u&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(r){var a=r.offsetX,o=r.offsetY;this._brushStart=new Point$1(a,o),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(r){if(this._brushing){var a=this._displayables.brushRect;if(this._brushing=!1,!!a){a.attr("ignore",!0);var o=a.shape,s=+new Date;if(!(s-this._brushStartTime<200&&Math.abs(o.width)<5)){var l=this._getViewExtent(),u=[0,100];this._range=asc$2([linearMap$2(o.x,l,u,!0),linearMap$2(o.x+o.width,l,u,!0)]),this._handleEnds=[o.x,o.x+o.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(r){this._brushing&&(stop(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},t.prototype._updateBrushRect=function(r,a){var o=this._displayables,s=this.dataZoomModel,l=o.brushRect;l||(l=o.brushRect=new Rect({silent:!0,style:s.getModel("brushStyle").getItemStyle()}),o.sliderGroup.add(l)),l.attr("ignore",!1);var u=this._brushStart,d=this._displayables.sliderGroup,v=d.transformCoordToLocal(r,a),g=d.transformCoordToLocal(u.x,u.y),f=this._size;v[0]=Math.max(Math.min(f[0],v[0]),0),l.setShape({x:g[0],y:0,width:v[0]-g[0],height:f[1]})},t.prototype._dispatchZoomAction=function(r){var a=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?REALTIME_ANIMATION_CONFIG:null,start:a[0],end:a[1]})},t.prototype._findCoordRect=function(){var r,a=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!r&&a.length){var o=a[0].model.coordinateSystem;r=o.getRect&&o.getRect()}if(!r){var s=this.api.getWidth(),l=this.api.getHeight();r={x:s*.2,y:l*.2,width:s*.6,height:l*.6}}return r},t.type="dataZoom.slider",t}(DataZoomView$1);function getOtherDim(n){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[n]}function getCursor$1(n){return n==="vertical"?"ns-resize":"ew-resize"}const SliderZoomView$1=SliderZoomView;function install$7(n){n.registerComponentModel(SliderZoomModel$1),n.registerComponentView(SliderZoomView$1),installCommon$1(n)}function install$6(n){use(install$8),use(install$7)}var visualDefault={get:function(n,t,r){var a=clone$4((defaultOption[n]||{})[t]);return r&&isArray$1(a)?a[a.length-1]:a}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const visualDefault$1=visualDefault;var mapVisual=VisualMapping$1.mapVisual,eachVisual=VisualMapping$1.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,a,o){this.mergeDefaultAndTheme(r,o)},t.prototype.optionUpdated=function(r,a){var o=this.option;!a&&replaceVisualOption(o,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var a=this.stateList;r=bind$1(r,this),this.controllerVisuals=createVisualMappings(this.option.controller,a,r),this.targetVisuals=createVisualMappings(this.option.target,a,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,a=[];return r==null||r==="all"?this.ecModel.eachSeries(function(o,s){a.push(s)}):a=normalizeToArray(r),a},t.prototype.eachTargetSeries=function(r,a){each$f(this.getTargetSeriesIndices(),function(o){var s=this.ecModel.getSeriesByIndex(o);s&&r.call(a,s)},this)},t.prototype.isTargetSeries=function(r){var a=!1;return this.eachTargetSeries(function(o){o===r&&(a=!0)}),a},t.prototype.formatValueText=function(r,a,o){var s=this.option,l=s.precision,u=this.dataBound,d=s.formatter,v;o=o||["<",">"],isArray$1(r)&&(r=r.slice(),v=!0);var g=a?r:v?[f(r[0]),f(r[1])]:f(r);if(isString(d))return d.replace("{value}",v?g[0]:g).replace("{value2}",v?g[1]:g);if(isFunction(d))return v?d(r[0],r[1]):d(r);if(v)return r[0]===u[0]?o[0]+" "+g[1]:r[1]===u[1]?o[1]+" "+g[0]:g[0]+" - "+g[1];return g;function f(c){return c===u[0]?"min":c===u[1]?"max":(+c).toFixed(Math.min(l,20))}},t.prototype.resetExtent=function(){var r=this.option,a=asc([r.min,r.max]);this._dataExtent=a},t.prototype.getDataDimensionIndex=function(r){var a=this.option.dimension;if(a!=null)return r.getDimensionIndex(a);for(var o=r.dimensions,s=o.length-1;s>=0;s--){var l=o[s],u=r.getDimensionInfo(l);if(!u.isCalculationCoord)return u.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,a=this.option,o={inRange:a.inRange,outOfRange:a.outOfRange},s=a.target||(a.target={}),l=a.controller||(a.controller={});merge(s,o),merge(l,o);var u=this.isCategory();d.call(this,s),d.call(this,l),v.call(this,s,"inRange","outOfRange"),g.call(this,l);function d(f){isArray(a.color)&&!f.inRange&&(f.inRange={color:a.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function v(f,c,y){var _=f[c],b=f[y];_&&!b&&(b=f[y]={},each$2(_,function(S,x){if(VisualMapping$1.isValidType(x)){var w=visualDefault$1.get(x,"inactive",u);w!=null&&(b[x]=w,x==="color"&&!b.hasOwnProperty("opacity")&&!b.hasOwnProperty("colorAlpha")&&(b.opacity=[0,0]))}}))}function g(f){var c=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,y=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,_=this.get("inactiveColor"),b=this.getItemSymbol(),S=b||"roundRect";each$2(this.stateList,function(x){var w=this.itemSize,T=f[x];T||(T=f[x]={color:u?_:[_]}),T.symbol==null&&(T.symbol=c&&clone$4(c)||(u?S:[S])),T.symbolSize==null&&(T.symbolSize=y&&clone$4(y)||(u?w[0]:[w[0],w[0]])),T.symbol=mapVisual(T.symbol,function($){return $==="none"?S:$});var A=T.symbolSize;if(A!=null){var E=-1/0;eachVisual(A,function($){$>E&&(E=$)}),T.symbolSize=mapVisual(A,function($){return linearMap$1($,[0,E],[0,w[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(ComponentModel$1);const VisualMapModel$1=VisualMapModel;var DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,a){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=DEFAULT_BAR_BOUND[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=DEFAULT_BAR_BOUND[1])},t.prototype._resetRange=function(){var r=this.getExtent(),a=this.option.range;!a||a.auto?(r.auto=1,this.option.range=r):isArray$1(a)&&(a[0]>a[1]&&a.reverse(),a[0]=Math.max(a[0],r[0]),a[1]=Math.min(a[1],r[1]))},t.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(r){var a=this.option.controller[r].symbolSize;a&&a[0]!==a[1]&&(a[0]=a[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),a=asc$2((this.get("range")||[]).slice());return a[0]>r[1]&&(a[0]=r[1]),a[1]>r[1]&&(a[1]=r[1]),a[0]<r[0]&&(a[0]=r[0]),a[1]<r[0]&&(a[1]=r[0]),a},t.prototype.getValueState=function(r){var a=this.option.range,o=this.getExtent();return(a[0]<=o[0]||a[0]<=r)&&(a[1]>=o[1]||r<=a[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var a=[];return this.eachTargetSeries(function(o){var s=[],l=o.getData();l.each(this.getDataDimensionIndex(l),function(u,d){r[0]<=u&&u<=r[1]&&s.push(d)},this),a.push({seriesId:o.id,dataIndex:s})},this),a},t.prototype.getVisualMeta=function(r){var a=getColorStopValues(this,"outOfRange",this.getExtent()),o=getColorStopValues(this,"inRange",this.option.range.slice()),s=[];function l(y,_){s.push({value:y,color:r(y,_)})}for(var u=0,d=0,v=o.length,g=a.length;d<g&&(!o.length||a[d]<=o[0]);d++)a[d]<o[u]&&l(a[d],"outOfRange");for(var f=1;u<v;u++,f=0)f&&s.length&&l(o[u],"outOfRange"),l(o[u],"inRange");for(var f=1;d<g;d++)(!o.length||o[o.length-1]<a[d])&&(f&&(s.length&&l(s[s.length-1].value,"outOfRange"),f=0),l(a[d],"outOfRange"));var c=s.length;return{stops:s,outerColors:[c?s[0].color:"transparent",c?s[c-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=inheritDefaultOption(VisualMapModel$1.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(VisualMapModel$1);function getColorStopValues(n,t,r){if(r[0]===r[1])return r.slice();for(var a=200,o=(r[1]-r[0])/a,s=r[0],l=[],u=0;u<=a&&s<r[1];u++)l.push(s),s+=o;return l.push(r[1]),l}const ContinuousModel$1=ContinuousModel;var VisualMapView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,a){this.ecModel=r,this.api=a},t.prototype.render=function(r,a,o,s){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,a,o,s)},t.prototype.renderBackground=function(r){var a=this.visualMapModel,o=normalizeCssArray(a.get("padding")||0),s=r.getBoundingRect();r.add(new Rect$3({z2:-1,silent:!0,shape:{x:s.x-o[3],y:s.y-o[0],width:s.width+o[3]+o[1],height:s.height+o[0]+o[2]},style:{fill:a.get("backgroundColor"),stroke:a.get("borderColor"),lineWidth:a.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,a,o){o=o||{};var s=o.forceState,l=this.visualMapModel,u={};if(a==="color"){var d=l.get("contentColor");u.color=d}function v(y){return u[y]}function g(y,_){u[y]=_}var f=l.controllerVisuals[s||l.getValueState(r)],c=VisualMapping$1.prepareVisualTypes(f);return each$f(c,function(y){var _=f[y];o.convertOpacityToAlpha&&y==="opacity"&&(y="colorAlpha",_=f.__alphaForOpacity),VisualMapping$1.dependsOn(y,a)&&_&&_.applyVisual(r,v,g)}),u[a]},t.prototype.positionGroup=function(r){var a=this.visualMapModel,o=this.api;positionElement(r,a.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})},t.prototype.doRender=function(r,a,o,s){},t.type="visualMap",t}(ComponentView$1);const VisualMapView$1=VisualMapView;var paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(n,t,r){var a=n.option,o=a.align;if(o!=null&&o!=="auto")return o;for(var s={width:t.getWidth(),height:t.getHeight()},l=a.orient==="horizontal"?1:0,u=paramsSet[l],d=[0,null,10],v={},g=0;g<3;g++)v[paramsSet[1-l][g]]=d[g],v[u[g]]=g===2?r[0]:a[u[g]];var f=[["x","width",3],["y","height",0]][l],c=getLayoutRect(v,s,a.padding);return u[(c.margin[f[2]]||0)+c[f[0]]+c[f[1]]*.5<s[f[1]]*.5?0:1]}function makeHighDownBatch(n,t){return each$f(n||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),n}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,a,o,s){this._api=o,(!s||s.type!=="selectDataRange"||s.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,a=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(a);var o=r.get("text");this._renderEndsText(a,o,0),this._renderEndsText(a,o,1),this._updateView(!0),this.renderBackground(a),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(a)},t.prototype._renderEndsText=function(r,a,o){if(a){var s=a[1-o];s=s!=null?s+"":"";var l=this.visualMapModel,u=l.get("textGap"),d=l.itemSize,v=this._shapes.mainGroup,g=this._applyTransform([d[0]/2,o===0?-u:d[1]+u],v),f=this._applyTransform(o===0?"bottom":"top",v),c=this._orient,y=this.visualMapModel.textStyleModel;this.group.add(new ZRText$1({style:createTextStyle(y,{x:g[0],y:g[1],verticalAlign:c==="horizontal"?"middle":f,align:c==="horizontal"?f:"center",text:s})}))}},t.prototype._renderBar=function(r){var a=this.visualMapModel,o=this._shapes,s=a.itemSize,l=this._orient,u=this._useHandle,d=getItemAlign(a,this.api,s),v=o.mainGroup=this._createBarGroup(d),g=new Group$4;v.add(g),g.add(o.outOfRange=createPolygon()),g.add(o.inRange=createPolygon(null,u?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),g.setClipPath(new Rect$3({shape:{x:0,y:0,width:s[0],height:s[1],r:3}}));var f=a.textStyleModel.getTextRect("国"),c=mathMax(f.width,f.height);u&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(a,v,0,s,c,l),this._createHandle(a,v,1,s,c,l)),this._createIndicator(a,v,s,c,l),r.add(v)},t.prototype._createHandle=function(r,a,o,s,l,u){var d=bind$1(this._dragHandle,this,o,!1),v=bind$1(this._dragHandle,this,o,!0),g=parsePercent$1(r.get("handleSize"),s[0]),f=createSymbol$1(r.get("handleIcon"),-g/2,-g/2,g,g,null,!0),c=getCursor(this._orient);f.attr({cursor:c,draggable:!0,drift:d,ondragend:v,onmousemove:function(x){stop(x.event)}}),f.x=s[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(f,!0),a.add(f);var y=this.visualMapModel.textStyleModel,_=new ZRText$1({cursor:c,draggable:!0,drift:d,onmousemove:function(x){stop(x.event)},ondragend:v,style:createTextStyle(y,{x:0,y:0,text:""})});_.ensureState("blur").style={opacity:.1},_.stateTransition={duration:200},this.group.add(_);var b=[g,0],S=this._shapes;S.handleThumbs[o]=f,S.handleLabelPoints[o]=b,S.handleLabels[o]=_},t.prototype._createIndicator=function(r,a,o,s,l){var u=parsePercent$1(r.get("indicatorSize"),o[0]),d=createSymbol$1(r.get("indicatorIcon"),-u/2,-u/2,u,u,null,!0);d.attr({cursor:"move",invisible:!0,silent:!0,x:o[0]/2});var v=r.getModel("indicatorStyle").getItemStyle();if(d instanceof ZRImage$1){var g=d.style;d.useStyle(extend({image:g.image,x:g.x,y:g.y,width:g.width,height:g.height},v))}else d.useStyle(v);a.add(d);var f=this.visualMapModel.textStyleModel,c=new ZRText$1({silent:!0,invisible:!0,style:createTextStyle(f,{x:0,y:0,text:""})});this.group.add(c);var y=[(l==="horizontal"?s/2:HOVER_LINK_OUT)+o[0]/2,0],_=this._shapes;_.indicator=d,_.indicatorLabel=c,_.indicatorLabelPoint=y,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,a,o,s){if(this._useHandle){if(this._dragging=!a,!a){var l=this._applyTransform([o,s],this._shapes.mainGroup,!0);this._updateInterval(r,l[1]),this._hideIndicator(),this._updateView()}a===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),a?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,a=this._dataInterval=r.getSelected(),o=r.getExtent(),s=[0,r.itemSize[1]];this._handleEnds=[linearMap(a[0],o,s,!0),linearMap(a[1],o,s,!0)]},t.prototype._updateInterval=function(r,a){a=a||0;var o=this.visualMapModel,s=this._handleEnds,l=[0,o.itemSize[1]];sliderMove(a,s,l,r,0);var u=o.getExtent();this._dataInterval=[linearMap(s[0],l,u,!0),linearMap(s[1],l,u,!0)]},t.prototype._updateView=function(r){var a=this.visualMapModel,o=a.getExtent(),s=this._shapes,l=[0,a.itemSize[1]],u=r?l:this._handleEnds,d=this._createBarVisual(this._dataInterval,o,u,"inRange"),v=this._createBarVisual(o,o,l,"outOfRange");s.inRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),s.outOfRange.setStyle({fill:v.barColor}).setShape("points",v.barPoints),this._updateHandle(u,d)},t.prototype._createBarVisual=function(r,a,o,s){var l={forceState:s,convertOpacityToAlpha:!0},u=this._makeColorGradient(r,l),d=[this.getControllerVisual(r[0],"symbolSize",l),this.getControllerVisual(r[1],"symbolSize",l)],v=this._createBarPoints(o,d);return{barColor:new LinearGradient$1(0,0,0,1,u),barPoints:v,handlesColor:[u[0].color,u[u.length-1].color]}},t.prototype._makeColorGradient=function(r,a){var o=100,s=[],l=(r[1]-r[0])/o;s.push({color:this.getControllerVisual(r[0],"color",a),offset:0});for(var u=1;u<o;u++){var d=r[0]+l*u;if(d>r[1])break;s.push({color:this.getControllerVisual(d,"color",a),offset:u/o})}return s.push({color:this.getControllerVisual(r[1],"color",a),offset:1}),s},t.prototype._createBarPoints=function(r,a){var o=this.visualMapModel.itemSize;return[[o[0]-a[0],r[0]],[o[0],r[0]],[o[0],r[1]],[o[0]-a[1],r[1]]]},t.prototype._createBarGroup=function(r){var a=this._orient,o=this.visualMapModel.get("inverse");return new Group$4(a==="horizontal"&&!o?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:a==="horizontal"&&o?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:a==="vertical"&&!o?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,a){if(this._useHandle){var o=this._shapes,s=this.visualMapModel,l=o.handleThumbs,u=o.handleLabels,d=s.itemSize,v=s.getExtent();each$1([0,1],function(g){var f=l[g];f.setStyle("fill",a.handlesColor[g]),f.y=r[g];var c=linearMap(r[g],[0,d[1]],v,!0),y=this.getControllerVisual(c,"symbolSize");f.scaleX=f.scaleY=y/d[0],f.x=d[0]-y/2;var _=applyTransform(o.handleLabelPoints[g],getTransform$1(f,this.group));u[g].setStyle({x:_[0],y:_[1],text:s.formatValueText(this._dataInterval[g]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",o.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,a,o,s){var l=this.visualMapModel,u=l.getExtent(),d=l.itemSize,v=[0,d[1]],g=this._shapes,f=g.indicator;if(f){f.attr("invisible",!1);var c={convertOpacityToAlpha:!0},y=this.getControllerVisual(r,"color",c),_=this.getControllerVisual(r,"symbolSize"),b=linearMap(r,u,v,!0),S=d[0]-_/2,x={x:f.x,y:f.y};f.y=b,f.x=S;var w=applyTransform(g.indicatorLabelPoint,getTransform$1(f,this.group)),T=g.indicatorLabel;T.attr("invisible",!1);var A=this._applyTransform("left",g.mainGroup),E=this._orient,$=E==="horizontal";T.setStyle({text:(o||"")+l.formatValueText(a),verticalAlign:$?A:"middle",align:$?"center":A});var P={x:S,y:b,style:{fill:y}},I={style:{x:w[0],y:w[1]}};if(l.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var C={duration:100,easing:"cubicInOut",additive:!0};f.x=x.x,f.y=x.y,f.animateTo(P,C),T.animateTo(I,C)}else f.attr(P),T.attr(I);this._firstShowIndicator=!1;var M=this._shapes.handleLabels;if(M)for(var D=0;D<M.length;D++)this._api.enterBlur(M[D])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(a){if(r._hovering=!0,!r._dragging){var o=r.visualMapModel.itemSize,s=r._applyTransform([a.offsetX,a.offsetY],r._shapes.mainGroup,!0,!0);s[1]=mathMin(mathMax(0,s[1]),o[1]),r._doHoverLinkToSeries(s[1],0<=s[0]&&s[0]<=o[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,a){var o=this.visualMapModel,s=o.itemSize;if(o.option.hoverLink){var l=[0,s[1]],u=o.getExtent();r=mathMin(mathMax(l[0],r),l[1]);var d=getHalfHoverLinkSize(o,u,l),v=[r-d,r+d],g=linearMap(r,l,u,!0),f=[linearMap(v[0],l,u,!0),linearMap(v[1],l,u,!0)];v[0]<l[0]&&(f[0]=-1/0),v[1]>l[1]&&(f[1]=1/0),a&&(f[0]===-1/0?this._showIndicator(g,f[1],"< ",d):f[1]===1/0?this._showIndicator(g,f[0],"> ",d):this._showIndicator(g,g,"≈ ",d));var c=this._hoverLinkDataIndices,y=[];(a||useHoverLinkOnHandle(o))&&(y=this._hoverLinkDataIndices=o.findTargetDataIndices(f));var _=compressBatches(c,y);this._dispatchHighDown("downplay",makeHighDownBatch(_[0],o)),this._dispatchHighDown("highlight",makeHighDownBatch(_[1],o))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var a;if(findEventDispatcher(r.target,function(d){var v=getECData(d);if(v.dataIndex!=null)return a=v,!0},!0),!!a){var o=this.ecModel.getSeriesByIndex(a.seriesIndex),s=this.visualMapModel;if(s.isTargetSeries(o)){var l=o.getData(a.dataType),u=l.getStore().get(s.getDataDimensionIndex(l),a.dataIndex);isNaN(u)||this._showIndicator(u,u)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var a=this._shapes.handleLabels;if(a)for(var o=0;o<a.length;o++)this._api.leaveBlur(a[o])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,a,o,s){var l=getTransform$1(a,s?null:this.group);return isArray$1(r)?applyTransform(r,l,o):transformDirection(r,l,o)},t.prototype._dispatchHighDown=function(r,a){a&&a.length&&this.api.dispatchAction({type:r,batch:a})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(VisualMapView$1);function createPolygon(n,t,r,a){return new Polygon$1({shape:{points:n},draggable:!!r,cursor:t,drift:r,onmousemove:function(o){stop(o.event)},ondragend:a})}function getHalfHoverLinkSize(n,t,r){var a=HOVER_LINK_SIZE/2,o=n.get("hoverLinkDataSize");return o&&(a=linearMap(o,t,r,!0)/2),a}function useHoverLinkOnHandle(n){var t=n.get("hoverLinkOnHandle");return!!(t??n.get("realtime"))}function getCursor(n){return n==="vertical"?"ns-resize":"ew-resize"}const ContinuousView$1=ContinuousView;var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(n,t){t.eachComponent({mainType:"visualMap",query:n},function(r){r.setSelected(n.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(n,t){var r=[];return t.eachComponent("visualMap",function(a){var o=n.pipelineContext;!a.isTargetSeries(n)||o&&o.large||r.push(incrementalApplyVisual(a.stateList,a.targetVisuals,bind$1(a.getValueState,a),a.getDataDimensionIndex(n.getData())))}),r}},{createOnAllSeries:!0,reset:function(n,t){var r=n.getData(),a=[];t.eachComponent("visualMap",function(o){if(o.isTargetSeries(n)){var s=o.getVisualMeta(bind$1(getColorVisual,null,n,o))||{stops:[],outerColors:[]},l=o.getDataDimensionIndex(r);l>=0&&(s.dimension=l,a.push(s))}}),n.getData().setVisual("visualMeta",a)}}];function getColorVisual(n,t,r,a){for(var o=t.targetVisuals[a],s=VisualMapping$1.prepareVisualTypes(o),l={color:getVisualFromData(n.getData(),"color")},u=0,d=s.length;u<d;u++){var v=s[u],g=o[v==="opacity"?"__alphaForOpacity":v];g&&g.applyVisual(r,f,c)}return l.color;function f(y){return l[y]}function c(y,_){l[y]=_}}var each=each$f;function visualMapPreprocessor(n){var t=n&&n.visualMap;isArray$1(t)||(t=t?[t]:[]),each(t,function(r){if(r){has(r,"splitList")&&!has(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var a=r.pieces;a&&isArray$1(a)&&each(a,function(o){isObject$3(o)&&(has(o,"start")&&!has(o,"min")&&(o.min=o.start),has(o,"end")&&!has(o,"max")&&(o.max=o.end))})}})}function has(n,t){return n&&n.hasOwnProperty&&n.hasOwnProperty(t)}var installed=!1;function installCommon(n){installed||(installed=!0,n.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),n.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(t){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,t)}),n.registerPreprocessor(visualMapPreprocessor))}function install$5(n){n.registerComponentModel(ContinuousModel$1),n.registerComponentView(ContinuousView$1),installCommon(n)}var PiecewiseModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,a){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(r,a);var s=this.option.categories;this.resetVisual(function(l,u){o==="categories"?(l.mappingMethod="category",l.categories=clone$4(s)):(l.dataExtent=this.getExtent(),l.mappingMethod="piecewise",l.pieceList=map$1(this._pieceList,function(d){return d=clone$4(d),u!=="inRange"&&(d.visual=null),d}))})},t.prototype.completeVisualOption=function(){var r=this.option,a={},o=VisualMapping$1.listVisualTypes(),s=this.isCategory();each$f(r.pieces,function(u){each$f(o,function(d){u.hasOwnProperty(d)&&(a[d]=1)})}),each$f(a,function(u,d){var v=!1;each$f(this.stateList,function(g){v=v||l(r,g,d)||l(r.target,g,d)},this),!v&&each$f(this.stateList,function(g){(r[g]||(r[g]={}))[d]=visualDefault$1.get(d,g==="inRange"?"active":"inactive",s)})},this);function l(u,d,v){return u&&u[d]&&u[d].hasOwnProperty(v)}n.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,a){var o=this.option,s=this._pieceList,l=(a?o:r).selected||{};if(o.selected=l,each$f(s,function(d,v){var g=this.getSelectedMapKey(d);l.hasOwnProperty(g)||(l[g]=!0)},this),o.selectedMode==="single"){var u=!1;each$f(s,function(d,v){var g=this.getSelectedMapKey(d);l[g]&&(u?l[g]=!1:u=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=clone$4(r)},t.prototype.getValueState=function(r){var a=VisualMapping$1.findPieceIndex(r,this._pieceList);return a!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[a])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var a=[],o=this._pieceList;return this.eachTargetSeries(function(s){var l=[],u=s.getData();u.each(this.getDataDimensionIndex(u),function(d,v){var g=VisualMapping$1.findPieceIndex(d,o);g===r&&l.push(v)},this),a.push({seriesId:s.id,dataIndex:l})},this),a},t.prototype.getRepresentValue=function(r){var a;if(this.isCategory())a=r.value;else if(r.value!=null)a=r.value;else{var o=r.interval||[];a=o[0]===-1/0&&o[1]===1/0?0:(o[0]+o[1])/2}return a},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var a=[],o=["",""],s=this;function l(g,f){var c=s.getRepresentValue({interval:g});f||(f=s.getValueState(c));var y=r(c,f);g[0]===-1/0?o[0]=y:g[1]===1/0?o[1]=y:a.push({value:g[0],color:y},{value:g[1],color:y})}var u=this._pieceList.slice();if(!u.length)u.push({interval:[-1/0,1/0]});else{var d=u[0].interval[0];d!==-1/0&&u.unshift({interval:[-1/0,d]}),d=u[u.length-1].interval[1],d!==1/0&&u.push({interval:[d,1/0]})}var v=-1/0;return each$f(u,function(g){var f=g.interval;f&&(f[0]>v&&l([v,f[0]],"outOfRange"),l(f.slice()),v=f[1])},this),{stops:a,outerColors:o}},t.type="visualMap.piecewise",t.defaultOption=inheritDefaultOption(VisualMapModel$1.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(VisualMapModel$1),resetMethods={splitNumber:function(n){var t=this.option,r=Math.min(t.precision,20),a=this.getExtent(),o=t.splitNumber;o=Math.max(parseInt(o,10),1),t.splitNumber=o;for(var s=(a[1]-a[0])/o;+s.toFixed(r)!==s&&r<5;)r++;t.precision=r,s=+s.toFixed(r),t.minOpen&&n.push({interval:[-1/0,a[0]],close:[0,0]});for(var l=0,u=a[0];l<o;u+=s,l++){var d=l===o-1?a[1]:u+s;n.push({interval:[u,d],close:[1,1]})}t.maxOpen&&n.push({interval:[a[1],1/0],close:[0,0]}),reformIntervals(n),each$f(n,function(v,g){v.index=g,v.text=this.formatValueText(v.interval)},this)},categories:function(n){var t=this.option;each$f(t.categories,function(r){n.push({text:this.formatValueText(r,!0),value:r})},this),normalizeReverse(t,n)},pieces:function(n){var t=this.option;each$f(t.pieces,function(r,a){isObject$3(r)||(r={value:r});var o={text:"",index:a};if(r.label!=null&&(o.text=r.label),r.hasOwnProperty("value")){var s=o.value=r.value;o.interval=[s,s],o.close=[1,1]}else{for(var l=o.interval=[],u=o.close=[0,0],d=[1,0,1],v=[-1/0,1/0],g=[],f=0;f<2;f++){for(var c=[["gte","gt","min"],["lte","lt","max"]][f],y=0;y<3&&l[f]==null;y++)l[f]=r[c[y]],u[f]=d[y],g[f]=y===2;l[f]==null&&(l[f]=v[f])}g[0]&&l[1]===1/0&&(u[0]=0),g[1]&&l[0]===-1/0&&(u[1]=0),l[0]===l[1]&&u[0]&&u[1]&&(o.value=l[0])}o.visual=VisualMapping$1.retrieveVisuals(r),n.push(o)},this),normalizeReverse(t,n),reformIntervals(n),each$f(n,function(r){var a=r.close,o=[["<","≤"][a[1]],[">","≥"][a[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,o)},this)}};function normalizeReverse(n,t){var r=n.inverse;(n.orient==="vertical"?!r:r)&&t.reverse()}const PiecewiseModel$1=PiecewiseModel;var PiecewiseVisualMapView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var a=this.visualMapModel,o=a.get("textGap"),s=a.textStyleModel,l=s.getFont(),u=s.getTextColor(),d=this._getItemAlign(),v=a.itemSize,g=this._getViewData(),f=g.endsText,c=retrieve(a.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],v,c,d),each$f(g.viewPieceList,function(y){var _=y.piece,b=new Group$4;b.onclick=bind$1(this._onItemClick,this,_),this._enableHoverLink(b,y.indexInModelPieceList);var S=a.getRepresentValue(_);if(this._createItemSymbol(b,S,[0,0,v[0],v[1]]),c){var x=this.visualMapModel.getValueState(S);b.add(new ZRText$1({style:{x:d==="right"?-o:v[0]+o,y:v[1]/2,text:_.text,verticalAlign:"middle",align:d,font:l,fill:u,opacity:x==="outOfRange"?.5:1}}))}r.add(b)},this),f&&this._renderEndsText(r,f[1],v,c,d),box(a.get("orient"),r,a.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,a){var o=this;r.on("mouseover",function(){return s("highlight")}).on("mouseout",function(){return s("downplay")});var s=function(l){var u=o.visualMapModel;u.option.hoverLink&&o.api.dispatchAction({type:l,batch:makeHighDownBatch(u.findTargetDataIndices(a),u)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,a=r.option;if(a.orient==="vertical")return getItemAlign(r,this.api,r.itemSize);var o=a.align;return(!o||o==="auto")&&(o="left"),o},t.prototype._renderEndsText=function(r,a,o,s,l){if(a){var u=new Group$4,d=this.visualMapModel.textStyleModel;u.add(new ZRText$1({style:createTextStyle(d,{x:s?l==="right"?o[0]:0:o[0]/2,y:o[1]/2,verticalAlign:"middle",align:s?l:"center",text:a})})),r.add(u)}},t.prototype._getViewData=function(){var r=this.visualMapModel,a=map$1(r.getPieceList(),function(u,d){return{piece:u,indexInModelPieceList:d}}),o=r.get("text"),s=r.get("orient"),l=r.get("inverse");return(s==="horizontal"?l:!l)?a.reverse():o&&(o=o.slice().reverse()),{viewPieceList:a,endsText:o}},t.prototype._createItemSymbol=function(r,a,o){r.add(createSymbol$1(this.getControllerVisual(a,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(a,"color")))},t.prototype._onItemClick=function(r){var a=this.visualMapModel,o=a.option,s=o.selectedMode;if(s){var l=clone$4(o.selected),u=a.getSelectedMapKey(r);s==="single"||s===!0?(l[u]=!0,each$f(l,function(d,v){l[v]=v===u})):l[u]=!l[u],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:l})}},t.type="visualMap.piecewise",t}(VisualMapView$1);const PiecewiseView=PiecewiseVisualMapView;function install$4(n){n.registerComponentModel(PiecewiseModel$1),n.registerComponentView(PiecewiseView),installCommon(n)}function install$3(n){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(n,t){var r=n.getModel("aria");if(!r.get("enabled"))return;var a=clone$4(DEFAULT_OPTION);merge(a.label,n.getLocaleModel().get("aria"),!1),merge(r.option,a,!1),o(),s();function o(){var v=r.getModel("decal"),g=v.get("show");if(g){var f=createHashMap();n.eachSeries(function(c){if(!c.isColorBySeries()){var y=f.get(c.type);y||(y={},f.set(c.type,y)),inner(c).scope=y}}),n.eachRawSeries(function(c){if(n.isSeriesFiltered(c))return;if(isFunction(c.enableAriaDecal)){c.enableAriaDecal();return}var y=c.getData();if(c.isColorBySeries()){var w=getDecalFromPalette(c.ecModel,c.name,decalPaletteScope,n.getSeriesCount()),T=y.getVisual("decal");y.setVisual("decal",A(T,w))}else{var _=c.getRawData(),b={},S=inner(c).scope;y.each(function(E){var $=y.getRawIndex(E);b[$]=E});var x=_.count();_.each(function(E){var $=b[E],P=_.getName(E)||E+"",I=getDecalFromPalette(c.ecModel,P,S,x),C=y.getItemVisual($,"decal");y.setItemVisual($,"decal",A(C,I))})}function A(E,$){var P=E?extend(extend({},$),E):$;return P.dirty=!0,P}})}}function s(){var v=n.getLocaleModel().get("aria"),g=r.getModel("label");if(g.option=defaults(g.option,v),!!g.get("enabled")){var f=t.getZr().dom;if(g.get("description")){f.setAttribute("aria-label",g.get("description"));return}var c=n.getSeriesCount(),y=g.get(["data","maxCount"])||10,_=g.get(["series","maxCount"])||10,b=Math.min(c,_),S;if(!(c<1)){var x=u();if(x){var w=g.get(["general","withTitle"]);S=l(w,{title:x})}else S=g.get(["general","withoutTitle"]);var T=[],A=c>1?g.get(["series","multiple","prefix"]):g.get(["series","single","prefix"]);S+=l(A,{seriesCount:c}),n.eachSeries(function(I,C){if(C<b){var M=void 0,D=I.get("name"),R=D?"withName":"withoutName";M=c>1?g.get(["series","multiple",R]):g.get(["series","single",R]),M=l(M,{seriesId:I.seriesIndex,seriesName:I.get("name"),seriesType:d(I.subType)});var N=I.getData();if(N.count()>y){var O=g.get(["data","partialData"]);M+=l(O,{displayCnt:y})}else M+=g.get(["data","allData"]);for(var F=g.get(["data","separator","middle"]),L=g.get(["data","separator","end"]),B=[],V=0;V<N.count();V++)if(V<y){var H=N.getName(V),X=N.getValues(V),U=g.get(["data",H?"withName":"withoutName"]);B.push(l(U,{name:H,value:X.join(F)}))}M+=B.join(F)+L,T.push(M)}});var E=g.getModel(["series","multiple","separator"]),$=E.get("middle"),P=E.get("end");S+=T.join($)+P,f.setAttribute("aria-label",S)}}}function l(v,g){if(!isString(v))return v;var f=v;return each$f(g,function(c,y){f=f.replace(new RegExp("\\{\\s*"+y+"\\s*\\}","g"),c)}),f}function u(){var v=n.get("title");return v&&v.length&&(v=v[0]),v&&v.text}function d(v){return n.getLocaleModel().get(["series","typeNames"])[v]||"自定义图"}}function ariaPreprocessor(n){if(!(!n||!n.aria)){var t=n.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},each$f(["description","general","series","data"],function(r){t[r]!=null&&(t.label[r]=t[r])})}}function install$2(n){n.registerPreprocessor(ariaPreprocessor),n.registerVisual(n.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function n(t){var r=this._condVal=isString(t)?new RegExp(t):isRegExp(t)?t:null;if(r==null){var a="";throwError(a)}}return n.prototype.evaluate=function(t){var r=typeof t;return isString(r)?this._condVal.test(t):isNumber(r)?this._condVal.test(t+""):!1},n}(),ConstConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),AndConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},n}(),OrConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},n}(),NotConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),RelationalConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,a=r(this.valueGetterParam),o=t?this.valueParser(a):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(t?o:a))return!1;return!0},n}();function parseOption(n,t){if(n===!0||n===!1){var r=new ConstConditionInternal;return r.value=n,r}var a="";return isObjectNotArray(n)||throwError(a),n.and?parseAndOrOption("and",n,t):n.or?parseAndOrOption("or",n,t):n.not?parseNotOption(n,t):parseRelationalOption(n,t)}function parseAndOrOption(n,t,r){var a=t[n],o="";isArray$1(a)||throwError(o),a.length||throwError(o);var s=n==="and"?new AndConditionInternal:new OrConditionInternal;return s.children=map$1(a,function(l){return parseOption(l,r)}),s.children.length||throwError(o),s}function parseNotOption(n,t){var r=n.not,a="";isObjectNotArray(r)||throwError(a);var o=new NotConditionInternal;return o.child=parseOption(r,t),o.child||throwError(a),o}function parseRelationalOption(n,t){for(var r="",a=t.prepareGetValue(n),o=[],s=keys(n),l=n.parser,u=l?getRawValueParser(l):null,d=0;d<s.length;d++){var v=s[d];if(!(v==="parser"||t.valueGetterAttrMap.get(v))){var g=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,v)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[v]:v,f=n[v],c=u?u(f):f,y=createFilterComparator(g,c)||g==="reg"&&new RegExpEvaluator(c);y||throwError(r),o.push(y)}}o.length||throwError(r);var _=new RelationalConditionInternal;return _.valueGetterParam=a,_.valueParser=u,_.getValue=t.getValue,_.subCondList=o,_}function isObjectNotArray(n){return isObject$3(n)&&!isArrayLike(n)}var ConditionalExpressionParsed=function(){function n(t,r){this._cond=parseOption(t,r)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}();function parseConditionalExpression(n,t){return new ConditionalExpressionParsed(n,t)}var filterTransform={type:"echarts:filter",transform:function(n){for(var t=n.upstream,r,a=parseConditionalExpression(n.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(u){var d="",v=u.dimension;hasOwn(u,"dimension")||throwError(d);var g=t.getDimensionInfo(v);return g||throwError(d),{dimIdx:g.index}},getValue:function(u){return t.retrieveValueFromItem(r,u.dimIdx)}}),o=[],s=0,l=t.count();s<l;s++)r=t.getRawDataItem(s),a.evaluate()&&o.push(r);return{data:o}}},sortTransform={type:"echarts:sort",transform:function(n){var t=n.upstream,r=n.config,a="",o=normalizeToArray(r);o.length||throwError(a);var s=[];each$f(o,function(g){var f=g.dimension,c=g.order,y=g.parser,_=g.incomparable;if(f==null&&throwError(a),c!=="asc"&&c!=="desc"&&throwError(a),_&&_!=="min"&&_!=="max"){var b="";throwError(b)}if(c!=="asc"&&c!=="desc"){var S="";throwError(S)}var x=t.getDimensionInfo(f);x||throwError(a);var w=y?getRawValueParser(y):null;y&&!w&&throwError(a),s.push({dimIdx:x.index,parser:w,comparator:new SortOrderComparator(c,_)})});var l=t.sourceFormat;l!==SOURCE_FORMAT_ARRAY_ROWS&&l!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(a);for(var u=[],d=0,v=t.count();d<v;d++)u.push(t.getRawDataItem(d));return u.sort(function(g,f){for(var c=0;c<s.length;c++){var y=s[c],_=t.retrieveValueFromItem(g,y.dimIdx),b=t.retrieveValueFromItem(f,y.dimIdx);y.parser&&(_=y.parser(_),b=y.parser(b));var S=y.comparator.evaluate(_,b);if(S!==0)return S}return 0}),{data:u}}};function install$1(n){n.registerTransform(filterTransform),n.registerTransform(sortTransform)}var DatasetModel=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,a,o){n.prototype.init.call(this,r,a,o),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},t.prototype.mergeOption=function(r,a){n.prototype.mergeOption.call(this,r,a),disableTransformOptionMerge(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},t}(ComponentModel$1),DatasetView=function(n){__extends$1(t,n);function t(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(ComponentView$1);function install(n){n.registerComponentModel(DatasetModel),n.registerComponentView(DatasetView)}var CMD=PathProxy$1.CMD;function aroundEqual(n,t){return Math.abs(n-t)<1e-5}function pathToBezierCurves(n){var t=n.data,r=n.len(),a=[],o,s=0,l=0,u=0,d=0;function v(N,O){o&&o.length>2&&a.push(o),o=[N,O]}function g(N,O,F,L){aroundEqual(N,F)&&aroundEqual(O,L)||o.push(N,O,F,L,F,L)}function f(N,O,F,L,B,V){var H=Math.abs(O-N),X=Math.tan(H/4)*4/3,U=O<N?-1:1,te=Math.cos(N),ee=Math.sin(N),q=Math.cos(O),ie=Math.sin(O),pe=te*B+F,j=ee*V+L,Q=q*B+F,J=ie*V+L,oe=B*X*U,ne=V*X*U;o.push(pe-oe*ee,j+ne*te,Q+oe*ie,J-ne*q,Q,J)}for(var c,y,_,b,S=0;S<r;){var x=t[S++],w=S===1;switch(w&&(s=t[S],l=t[S+1],u=s,d=l,(x===CMD.L||x===CMD.C||x===CMD.Q)&&(o=[u,d])),x){case CMD.M:s=u=t[S++],l=d=t[S++],v(u,d);break;case CMD.L:c=t[S++],y=t[S++],g(s,l,c,y),s=c,l=y;break;case CMD.C:o.push(t[S++],t[S++],t[S++],t[S++],s=t[S++],l=t[S++]);break;case CMD.Q:c=t[S++],y=t[S++],_=t[S++],b=t[S++],o.push(s+2/3*(c-s),l+2/3*(y-l),_+2/3*(c-_),b+2/3*(y-b),_,b),s=_,l=b;break;case CMD.A:var T=t[S++],A=t[S++],E=t[S++],$=t[S++],P=t[S++],I=t[S++]+P;S+=1;var C=!t[S++];c=Math.cos(P)*E+T,y=Math.sin(P)*$+A,w?(u=c,d=y,v(u,d)):g(s,l,c,y),s=Math.cos(I)*E+T,l=Math.sin(I)*$+A;for(var M=(C?-1:1)*Math.PI/2,D=P;C?D>I:D<I;D+=M){var R=C?Math.max(D+M,I):Math.min(D+M,I);f(D,R,T,A,E,$)}break;case CMD.R:u=s=t[S++],d=l=t[S++],c=u+t[S++],y=d+t[S++],v(c,d),g(c,d,c,y),g(c,y,u,y),g(u,y,u,d),g(u,d,c,d);break;case CMD.Z:o&&g(s,l,u,d),s=u,l=d;break}}return o&&o.length>2&&a.push(o),a}function adpativeBezier(n,t,r,a,o,s,l,u,d,v){if(aroundEqual(n,r)&&aroundEqual(t,a)&&aroundEqual(o,l)&&aroundEqual(s,u)){d.push(l,u);return}var g=2/v,f=g*g,c=l-n,y=u-t,_=Math.sqrt(c*c+y*y);c/=_,y/=_;var b=r-n,S=a-t,x=o-l,w=s-u,T=b*b+S*S,A=x*x+w*w;if(T<f&&A<f){d.push(l,u);return}var E=c*b+y*S,$=-c*x-y*w,P=T-E*E,I=A-$*$;if(P<f&&E>=0&&I<f&&$>=0){d.push(l,u);return}var C=[],M=[];cubicSubdivide(n,r,o,l,.5,C),cubicSubdivide(t,a,s,u,.5,M),adpativeBezier(C[0],M[0],C[1],M[1],C[2],M[2],C[3],M[3],d,v),adpativeBezier(C[4],M[4],C[5],M[5],C[6],M[6],C[7],M[7],d,v)}function pathToPolygons(n,t){var r=pathToBezierCurves(n),a=[];t=t||1;for(var o=0;o<r.length;o++){var s=r[o],l=[],u=s[0],d=s[1];l.push(u,d);for(var v=2;v<s.length;){var g=s[v++],f=s[v++],c=s[v++],y=s[v++],_=s[v++],b=s[v++];adpativeBezier(u,d,g,f,c,y,_,b,l,t),u=_,d=b}a.push(l)}return a}function getDividingGrids(n,t,r){var a=n[t],o=n[1-t],s=Math.abs(a/o),l=Math.ceil(Math.sqrt(s*r)),u=Math.floor(r/l);u===0&&(u=1,l=r);for(var d=[],v=0;v<l;v++)d.push(u);var g=l*u,f=r-g;if(f>0)for(var v=0;v<f;v++)d[v%l]+=1;return d}function divideSector(n,t,r){for(var a=n.r0,o=n.r,s=n.startAngle,l=n.endAngle,u=Math.abs(l-s),d=u*o,v=o-a,g=d>Math.abs(v),f=getDividingGrids([d,v],g?0:1,t),c=(g?u:v)/f.length,y=0;y<f.length;y++)for(var _=(g?v:u)/f[y],b=0;b<f[y];b++){var S={};g?(S.startAngle=s+c*y,S.endAngle=s+c*(y+1),S.r0=a+_*b,S.r=a+_*(b+1)):(S.startAngle=s+_*b,S.endAngle=s+_*(b+1),S.r0=a+c*y,S.r=a+c*(y+1)),S.clockwise=n.clockwise,S.cx=n.cx,S.cy=n.cy,r.push(S)}}function divideRect(n,t,r){for(var a=n.width,o=n.height,s=a>o,l=getDividingGrids([a,o],s?0:1,t),u=s?"width":"height",d=s?"height":"width",v=s?"x":"y",g=s?"y":"x",f=n[u]/l.length,c=0;c<l.length;c++)for(var y=n[d]/l[c],_=0;_<l[c];_++){var b={};b[v]=c*f,b[g]=_*y,b[u]=f,b[d]=y,b.x+=n.x,b.y+=n.y,r.push(b)}}function crossProduct2d(n,t,r,a){return n*a-r*t}function lineLineIntersect(n,t,r,a,o,s,l,u){var d=r-n,v=a-t,g=l-o,f=u-s,c=crossProduct2d(g,f,d,v);if(Math.abs(c)<1e-6)return null;var y=n-o,_=t-s,b=crossProduct2d(y,_,g,f)/c;return b<0||b>1?null:new Point$1(b*d+n,b*v+t)}function projPtOnLine(n,t,r){var a=new Point$1;Point$1.sub(a,r,t),a.normalize();var o=new Point$1;Point$1.sub(o,n,t);var s=o.dot(a);return s}function addToPoly(n,t){var r=n[n.length-1];r&&r[0]===t[0]&&r[1]===t[1]||n.push(t)}function splitPolygonByLine(n,t,r){for(var a=n.length,o=[],s=0;s<a;s++){var l=n[s],u=n[(s+1)%a],d=lineLineIntersect(l[0],l[1],u[0],u[1],t.x,t.y,r.x,r.y);d&&o.push({projPt:projPtOnLine(d,t,r),pt:d,idx:s})}if(o.length<2)return[{points:n},{points:n}];o.sort(function(S,x){return S.projPt-x.projPt});var v=o[0],g=o[o.length-1];if(g.idx<v.idx){var f=v;v=g,g=f}for(var c=[v.pt.x,v.pt.y],y=[g.pt.x,g.pt.y],_=[c],b=[y],s=v.idx+1;s<=g.idx;s++)addToPoly(_,n[s].slice());addToPoly(_,y),addToPoly(_,c);for(var s=g.idx+1;s<=v.idx+a;s++)addToPoly(b,n[s%a].slice());return addToPoly(b,c),addToPoly(b,y),[{points:_},{points:b}]}function binaryDividePolygon(n){var t=n.points,r=[],a=[];fromPoints(t,r,a);var o=new BoundingRect$1(r[0],r[1],a[0]-r[0],a[1]-r[1]),s=o.width,l=o.height,u=o.x,d=o.y,v=new Point$1,g=new Point$1;return s>l?(v.x=g.x=u+s/2,v.y=d,g.y=d+l):(v.y=g.y=d+l/2,v.x=u,g.x=u+s),splitPolygonByLine(t,v,g)}function binaryDivideRecursive(n,t,r,a){if(r===1)a.push(t);else{var o=Math.floor(r/2),s=n(t);binaryDivideRecursive(n,s[0],o,a),binaryDivideRecursive(n,s[1],r-o,a)}return a}function clone(n,t){for(var r=[],a=0;a<t;a++)r.push(clonePath(n));return r}function copyPathProps(n,t){t.setStyle(n.style),t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel}function polygonConvert(n){for(var t=[],r=0;r<n.length;)t.push([n[r++],n[r++]]);return t}function split(n,t){var r=[],a=n.shape,o;switch(n.type){case"rect":divideRect(a,t,r),o=Rect$3;break;case"sector":divideSector(a,t,r),o=Sector$1;break;case"circle":divideSector({r0:0,r:a.r,startAngle:0,endAngle:Math.PI*2,cx:a.cx,cy:a.cy},t,r),o=Sector$1;break;default:var s=n.getComputedTransform(),l=s?Math.sqrt(Math.max(s[0]*s[0]+s[1]*s[1],s[2]*s[2]+s[3]*s[3])):1,u=map$1(pathToPolygons(n.getUpdatedPathProxy(),l),function(x){return polygonConvert(x)}),d=u.length;if(d===0)binaryDivideRecursive(binaryDividePolygon,{points:u[0]},t,r);else if(d===t)for(var v=0;v<d;v++)r.push({points:u[v]});else{var g=0,f=map$1(u,function(x){var w=[],T=[];fromPoints(x,w,T);var A=(T[1]-w[1])*(T[0]-w[0]);return g+=A,{poly:x,area:A}});f.sort(function(x,w){return w.area-x.area});for(var c=t,v=0;v<d;v++){var y=f[v];if(c<=0)break;var _=v===d-1?c:Math.ceil(y.area/g*t);_<0||(binaryDivideRecursive(binaryDividePolygon,{points:y.poly},_,r),c-=_)}}o=Polygon$1;break}if(!o)return clone(n,t);for(var b=[],v=0;v<r.length;v++){var S=new o;S.setShape(r[v]),copyPathProps(n,S),b.push(S)}return b}function alignSubpath(n,t){var r=n.length,a=t.length;if(r===a)return[n,t];for(var o=[],s=[],l=r<a?n:t,u=Math.min(r,a),d=Math.abs(a-r)/6,v=(u-2)/6,g=Math.ceil(d/v)+1,f=[l[0],l[1]],c=d,y=2;y<u;){var _=l[y-2],b=l[y-1],S=l[y++],x=l[y++],w=l[y++],T=l[y++],A=l[y++],E=l[y++];if(c<=0){f.push(S,x,w,T,A,E);continue}for(var $=Math.min(c,g-1)+1,P=1;P<=$;P++){var I=P/$;cubicSubdivide(_,S,w,A,I,o),cubicSubdivide(b,x,T,E,I,s),_=o[3],b=s[3],f.push(o[1],s[1],o[2],s[2],_,b),S=o[5],x=s[5],w=o[6],T=s[6]}c-=$-1}return l===n?[f,t]:[n,f]}function createSubpath(n,t){for(var r=n.length,a=n[r-2],o=n[r-1],s=[],l=0;l<t.length;)s[l++]=a,s[l++]=o;return s}function alignBezierCurves(n,t){for(var r,a,o,s=[],l=[],u=0;u<Math.max(n.length,t.length);u++){var d=n[u],v=t[u],g=void 0,f=void 0;d?v?(r=alignSubpath(d,v),g=r[0],f=r[1],a=g,o=f):(f=createSubpath(o||d,d),g=d):(g=createSubpath(a||v,v),f=v),s.push(g),l.push(f)}return[s,l]}function centroid(n){for(var t=0,r=0,a=0,o=n.length,s=0,l=o-2;s<o;l=s,s+=2){var u=n[l],d=n[l+1],v=n[s],g=n[s+1],f=u*g-v*d;t+=f,r+=(u+v)*f,a+=(d+g)*f}return t===0?[n[0]||0,n[1]||0]:[r/t/3,a/t/3,t]}function findBestRingOffset(n,t,r,a){for(var o=(n.length-2)/6,s=1/0,l=0,u=n.length,d=u-2,v=0;v<o;v++){for(var g=v*6,f=0,c=0;c<u;c+=2){var y=c===0?g:(g+c-2)%d+2,_=n[y]-r[0],b=n[y+1]-r[1],S=t[c]-a[0],x=t[c+1]-a[1],w=S-_,T=x-b;f+=w*w+T*T}f<s&&(s=f,l=v)}return l}function reverse(n){for(var t=[],r=n.length,a=0;a<r;a+=2)t[a]=n[r-a-2],t[a+1]=n[r-a-1];return t}function findBestMorphingRotation(n,t,r,a){for(var o=[],s,l=0;l<n.length;l++){var u=n[l],d=t[l],v=centroid(u),g=centroid(d);s==null&&(s=v[2]<0!=g[2]<0);var f=[],c=[],y=0,_=1/0,b=[],S=u.length;s&&(u=reverse(u));for(var x=findBestRingOffset(u,d,v,g)*6,w=S-2,T=0;T<w;T+=2){var A=(x+T)%w+2;f[T+2]=u[A]-v[0],f[T+3]=u[A+1]-v[1]}if(f[0]=u[x]-v[0],f[1]=u[x+1]-v[1],r>0)for(var E=a/r,$=-a/2;$<=a/2;$+=E){for(var P=Math.sin($),I=Math.cos($),C=0,T=0;T<u.length;T+=2){var M=f[T],D=f[T+1],R=d[T]-g[0],N=d[T+1]-g[1],O=R*I-N*P,F=R*P+N*I;b[T]=O,b[T+1]=F;var L=O-M,B=F-D;C+=L*L+B*B}if(C<_){_=C,y=$;for(var V=0;V<b.length;V++)c[V]=b[V]}}else for(var H=0;H<S;H+=2)c[H]=d[H]-g[0],c[H+1]=d[H+1]-g[1];o.push({from:f,to:c,fromCp:v,toCp:g,rotation:-y})}return o}function isCombineMorphing(n){return n.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(n,t,r){var a=SAVED_METHOD_PREFIX+t,o=n[a]||n[t];n[a]||(n[a]=n[t]);var s=r.replace,l=r.after,u=r.before;n[t]=function(){var d=arguments,v;return u&&u.apply(this,d),s?v=s.apply(this,d):v=o.apply(this,d),l&&l.apply(this,d),v}}function restoreMethod(n,t){var r=SAVED_METHOD_PREFIX+t;n[r]&&(n[t]=n[r],n[r]=null)}function applyTransformOnBeziers(n,t){for(var r=0;r<n.length;r++)for(var a=n[r],o=0;o<a.length;){var s=a[o],l=a[o+1];a[o++]=t[0]*s+t[2]*l+t[4],a[o++]=t[1]*s+t[3]*l+t[5]}}function prepareMorphPath(n,t){var r=n.getUpdatedPathProxy(),a=t.getUpdatedPathProxy(),o=alignBezierCurves(pathToBezierCurves(r),pathToBezierCurves(a)),s=o[0],l=o[1],u=n.getComputedTransform(),d=t.getComputedTransform();function v(){this.transform=null}u&&applyTransformOnBeziers(s,u),d&&applyTransformOnBeziers(l,d),saveAndModifyMethod(t,"updateTransform",{replace:v}),t.transform=null;var g=findBestMorphingRotation(s,l,10,Math.PI),f=[];saveAndModifyMethod(t,"buildPath",{replace:function(c){for(var y=t.__morphT,_=1-y,b=[],S=0;S<g.length;S++){var x=g[S],w=x.from,T=x.to,A=x.rotation*y,E=x.fromCp,$=x.toCp,P=Math.sin(A),I=Math.cos(A);lerp$1(b,E,$,y);for(var C=0;C<w.length;C+=2){var M=w[C],D=w[C+1],R=T[C],N=T[C+1],O=M*_+R*y,F=D*_+N*y;f[C]=O*I-F*P+b[0],f[C+1]=O*P+F*I+b[1]}var L=f[0],B=f[1];c.moveTo(L,B);for(var C=2;C<w.length;){var R=f[C++],N=f[C++],V=f[C++],H=f[C++],X=f[C++],U=f[C++];L===R&&B===N&&V===X&&H===U?c.lineTo(X,U):c.bezierCurveTo(R,N,V,H,X,U),L=X,B=U}}}})}function morphPath(n,t,r){if(!n||!t)return t;var a=r.done,o=r.during;prepareMorphPath(n,t),t.__morphT=0;function s(){restoreMethod(t,"buildPath"),restoreMethod(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},defaults({during:function(l){t.dirtyShape(),o&&o(l)},done:function(){s(),a&&a()}},r)),t}function hilbert(n,t,r,a,o,s){var l=16;n=o===r?0:Math.round(32767*(n-r)/(o-r)),t=s===a?0:Math.round(32767*(t-a)/(s-a));for(var u=0,d,v=(1<<l)/2;v>0;v/=2){var g=0,f=0;(n&v)>0&&(g=1),(t&v)>0&&(f=1),u+=v*v*(3*g^f),f===0&&(g===1&&(n=v-1-n,t=v-1-t),d=n,n=t,t=d)}return u}function sortPaths(n){var t=1/0,r=1/0,a=-1/0,o=-1/0,s=map$1(n,function(u){var d=u.getBoundingRect(),v=u.getComputedTransform(),g=d.x+d.width/2+(v?v[4]:0),f=d.y+d.height/2+(v?v[5]:0);return t=Math.min(g,t),r=Math.min(f,r),a=Math.max(g,a),o=Math.max(f,o),[g,f]}),l=map$1(s,function(u,d){return{cp:u,z:hilbert(u[0],u[1],t,r,a,o),path:n[d]}});return l.sort(function(u,d){return u.z-d.z}).map(function(u){return u.path})}function defaultDividePath(n){return split(n.path,n.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(n,t,r){var a=[];function o(E){for(var $=0;$<E.length;$++){var P=E[$];isCombineMorphing(P)?o(P.childrenRef()):P instanceof Path$1&&a.push(P)}}o(n);var s=a.length;if(!s)return createEmptyReturn();var l=r.dividePath||defaultDividePath,u=l({path:t,count:s});if(u.length!==s)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();a=sortPaths(a),u=sortPaths(u);for(var d=r.done,v=r.during,g=r.individualDelay,f=new Transformable$1,c=0;c<s;c++){var y=a[c],_=u[c];_.parent=t,_.copyTransform(f),g||prepareMorphPath(y,_)}t.__isCombineMorphing=!0,t.childrenRef=function(){return u};function b(E){for(var $=0;$<u.length;$++)u[$].addSelfToZr(E)}saveAndModifyMethod(t,"addSelfToZr",{after:function(E){b(E)}}),saveAndModifyMethod(t,"removeSelfFromZr",{after:function(E){for(var $=0;$<u.length;$++)u[$].removeSelfFromZr(E)}});function S(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,restoreMethod(t,"addSelfToZr"),restoreMethod(t,"removeSelfFromZr")}var x=u.length;if(g)for(var w=x,T=function(){w--,w===0&&(S(),d&&d())},c=0;c<x;c++){var A=g?defaults({delay:(r.delay||0)+g(c,x,a[c],u[c]),done:T},r):r;morphPath(a[c],u[c],A)}else t.__morphT=0,t.animateTo({__morphT:1},defaults({during:function(E){for(var $=0;$<x;$++){var P=u[$];P.__morphT=t.__morphT,P.dirtyShape()}v&&v(E)},done:function(){S();for(var E=0;E<n.length;E++)restoreMethod(n[E],"updateTransform");d&&d()}},r));return t.__zr&&b(t.__zr),{fromIndividuals:a,toIndividuals:u,count:x}}function separateMorph(n,t,r){var a=t.length,o=[],s=r.dividePath||defaultDividePath;function l(y){for(var _=0;_<y.length;_++){var b=y[_];isCombineMorphing(b)?l(b.childrenRef()):b instanceof Path$1&&o.push(b)}}if(isCombineMorphing(n)){l(n.childrenRef());var u=o.length;if(u<a)for(var d=0,v=u;v<a;v++)o.push(clonePath(o[d++%u]));o.length=a}else{o=s({path:n,count:a});for(var g=n.getComputedTransform(),v=0;v<o.length;v++)o[v].setLocalTransform(g);if(o.length!==a)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}o=sortPaths(o),t=sortPaths(t);for(var f=r.individualDelay,v=0;v<a;v++){var c=f?defaults({delay:(r.delay||0)+f(v,a,o[v],t[v])},r):r;morphPath(o[v],t[v],c)}return{fromIndividuals:o,toIndividuals:t,count:t.length}}function isMultiple(n){return isArray$1(n[0])}function prepareMorphBatches(n,t){for(var r=[],a=n.length,o=0;o<a;o++)r.push({one:n[o],many:[]});for(var o=0;o<t.length;o++){var s=t[o].length,l=void 0;for(l=0;l<s;l++)r[l%a].many.push(t[o][l])}for(var u=0,o=a-1;o>=0;o--)if(!r[o].many.length){var d=r[u].many;if(d.length<=1)if(u)u=0;else return r;var s=d.length,v=Math.ceil(s/2);r[o].many=d.slice(v,s),r[u].many=d.slice(0,v),u++}return r}var pathDividers={clone:function(n){for(var t=[],r=1-Math.pow(1-n.path.style.opacity,1/n.count),a=0;a<n.count;a++){var o=clonePath(n.path);o.setStyle("opacity",r),t.push(o)}return t},split:null};function applyMorphAnimation(n,t,r,a,o,s){if(!n.length||!t.length)return;var l=getAnimationConfig("update",a,o);if(!(l&&l.duration>0))return;var u=a.getModel("universalTransition").get("delay"),d=Object.assign({setToFinal:!0},l),v,g;isMultiple(n)&&(v=n,g=t),isMultiple(t)&&(v=t,g=n);function f(x,w,T,A,E){var $=x.many,P=x.one;if($.length===1&&!E){var I=w?$[0]:P,C=w?P:$[0];if(isCombineMorphing(I))f({many:[I],one:C},!0,T,A,!0);else{var M=u?defaults({delay:u(T,A)},d):d;morphPath(I,C,M),s(I,C,I,C,M)}}else for(var D=defaults({dividePath:pathDividers[r],individualDelay:u&&function(B,V,H,X){return u(B+T,A)}},d),R=w?combineMorph($,P,D):separateMorph(P,$,D),N=R.fromIndividuals,O=R.toIndividuals,F=N.length,L=0;L<F;L++){var M=u?defaults({delay:u(L,F)},d):d;s(N[L],O[L],w?$[L]:x.one,w?x.one:$[L],M)}}for(var c=v?v===n:n.length>t.length,y=v?prepareMorphBatches(g,v):prepareMorphBatches(c?t:n,[c?n:t]),_=0,b=0;b<y.length;b++)_+=y[b].many.length;for(var S=0,b=0;b<y.length;b++)f(y[b],c,S,_),S+=y[b].many.length}function getPathList(n){if(!n)return[];if(isArray$1(n)){for(var t=[],r=0;r<n.length;r++)t.push(getPathList(n[r]));return t}var a=[];return n.traverse(function(o){o instanceof Path$1&&!o.disableMorphing&&!o.invisible&&!o.ignore&&a.push(o)}),a}var DATA_COUNT_THRESHOLD=1e4,getUniversalTransitionGlobalStore=makeInner();function getGroupIdDimension(n){for(var t=n.dimensions,r=0;r<t.length;r++){var a=n.getDimensionInfo(t[r]);if(a&&a.otherDims.itemGroupId===0)return t[r]}}function flattenDataDiffItems(n){var t=[];return each$f(n,function(r){var a=r.data;if(!(a.count()>DATA_COUNT_THRESHOLD))for(var o=a.getIndices(),s=getGroupIdDimension(a),l=0;l<o.length;l++)t.push({dataGroupId:r.dataGroupId,data:a,dim:r.dim||s,divide:r.divide,dataIndex:l})}),t}function fadeInElement(n,t,r){n.traverse(function(a){a instanceof Path$1&&initProps(a,{style:{opacity:0}},t,{dataIndex:r,isFrom:!0})})}function removeEl(n){if(n.parent){var t=n.getComputedTransform();n.setLocalTransform(t),n.parent.remove(n)}}function stopAnimation(n){n.stopAnimation(),n.isGroup&&n.traverse(function(t){t.stopAnimation()})}function animateElementStyles(n,t,r){var a=getAnimationConfig("update",r,t);a&&n.traverse(function(o){if(o instanceof Displayable$1){var s=getOldStyle(o);s&&o.animateFrom({style:s},a)}})}function isAllIdSame(n,t){var r=n.length;if(r!==t.length)return!1;for(var a=0;a<r;a++){var o=n[a],s=t[a];if(o.data.getId(o.dataIndex)!==s.data.getId(s.dataIndex))return!1}return!0}function transitionBetween(n,t,r){var a=flattenDataDiffItems(n),o=flattenDataDiffItems(t);function s(x,w,T,A,E){(T||x)&&w.animateFrom({style:T&&T!==x?extend(extend({},T.style),x.style):x.style},E)}function l(x){for(var w=0;w<x.length;w++)if(x[w].dim)return x[w].dim}var u=l(a),d=l(o),v=!1;function g(x,w){return function(T){var A=T.data,E=T.dataIndex;if(w)return A.getId(E);var $=T.dataGroupId,P=x?u||d:d||u,I=P&&A.getDimensionInfo(P),C=I&&I.ordinalMeta;if(I){var M=A.get(I.name,E);return C&&C.categories[M]||M+""}var D=A.getRawDataItem(E);return D&&D.groupId?D.groupId+"":$||A.getId(E)}}var f=isAllIdSame(a,o),c={};if(!f)for(var y=0;y<o.length;y++){var _=o[y],b=_.data.getItemGraphicEl(_.dataIndex);b&&(c[b.id]=!0)}function S(x,w){var T=a[w],A=o[x],E=A.data.hostModel,$=T.data.getItemGraphicEl(T.dataIndex),P=A.data.getItemGraphicEl(A.dataIndex);if($===P){P&&animateElementStyles(P,A.dataIndex,E);return}$&&c[$.id]||P&&(stopAnimation(P),$?(stopAnimation($),removeEl($),v=!0,applyMorphAnimation(getPathList($),getPathList(P),A.divide,E,x,s)):fadeInElement(P,E,x))}new DataDiffer$1(a,o,g(!0,f),g(!1,f),null,"multiple").update(S).updateManyToOne(function(x,w){var T=o[x],A=T.data,E=A.hostModel,$=A.getItemGraphicEl(T.dataIndex),P=filter(map$1(w,function(I){return a[I].data.getItemGraphicEl(a[I].dataIndex)}),function(I){return I&&I!==$&&!c[I.id]});$&&(stopAnimation($),P.length?(each$f(P,function(I){stopAnimation(I),removeEl(I)}),v=!0,applyMorphAnimation(getPathList(P),getPathList($),T.divide,E,x,s)):fadeInElement($,E,T.dataIndex))}).updateOneToMany(function(x,w){var T=a[w],A=T.data.getItemGraphicEl(T.dataIndex);if(!(A&&c[A.id])){var E=filter(map$1(x,function(P){return o[P].data.getItemGraphicEl(o[P].dataIndex)}),function(P){return P&&P!==A}),$=o[x[0]].data.hostModel;E.length&&(each$f(E,function(P){return stopAnimation(P)}),A?(stopAnimation(A),removeEl(A),v=!0,applyMorphAnimation(getPathList(A),getPathList(E),T.divide,$,x[0],s)):each$f(E,function(P){return fadeInElement(P,$,x[0])}))}}).updateManyToMany(function(x,w){new DataDiffer$1(w,x,function(T){return a[T].data.getId(a[T].dataIndex)},function(T){return o[T].data.getId(o[T].dataIndex)}).update(function(T,A){S(x[T],w[A])}).execute()}).execute(),v&&each$f(t,function(x){var w=x.data,T=w.hostModel,A=T&&r.getViewOfSeriesModel(T),E=getAnimationConfig("update",T,0);A&&T.isAnimationEnabled()&&E&&E.duration>0&&A.group.traverse(function($){$ instanceof Path$1&&!$.animators.length&&$.animateFrom({style:{opacity:0}},E)})})}function getSeriesTransitionKey(n){var t=n.getModel("universalTransition").get("seriesKey");return t||n.id}function convertArraySeriesKeyToString(n){return isArray$1(n)?n.sort().join(","):n}function getDivideShapeFromData(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(n,t){var r=createHashMap(),a=createHashMap(),o=createHashMap();return each$f(n.oldSeries,function(s,l){var u=n.oldDataGroupIds[l],d=n.oldData[l],v=getSeriesTransitionKey(s),g=convertArraySeriesKeyToString(v);a.set(g,{dataGroupId:u,data:d}),isArray$1(v)&&each$f(v,function(f){o.set(f,{key:g,dataGroupId:u,data:d})})}),each$f(t.updatedSeries,function(s){if(s.isUniversalTransitionEnabled()&&s.isAnimationEnabled()){var l=s.get("dataGroupId"),u=s.getData(),d=getSeriesTransitionKey(s),v=convertArraySeriesKeyToString(d),g=a.get(v);if(g)r.set(v,{oldSeries:[{dataGroupId:g.dataGroupId,divide:getDivideShapeFromData(g.data),data:g.data}],newSeries:[{dataGroupId:l,divide:getDivideShapeFromData(u),data:u}]});else if(isArray$1(d)){var f=[];each$f(d,function(_){var b=a.get(_);b.data&&f.push({dataGroupId:b.dataGroupId,divide:getDivideShapeFromData(b.data),data:b.data})}),f.length&&r.set(v,{oldSeries:f,newSeries:[{dataGroupId:l,data:u,divide:getDivideShapeFromData(u)}]})}else{var c=o.get(d);if(c){var y=r.get(c.key);y||(y={oldSeries:[{dataGroupId:c.dataGroupId,data:c.data,divide:getDivideShapeFromData(c.data)}],newSeries:[]},r.set(c.key,y)),y.newSeries.push({dataGroupId:l,data:u,divide:getDivideShapeFromData(u)})}}}}),r}function querySeries(n,t){for(var r=0;r<n.length;r++){var a=t.seriesIndex!=null&&t.seriesIndex===n[r].seriesIndex||t.seriesId!=null&&t.seriesId===n[r].id;if(a)return r}}function transitionSeriesFromOpt(n,t,r,a){var o=[],s=[];each$f(normalizeToArray(n.from),function(l){var u=querySeries(t.oldSeries,l);u>=0&&o.push({dataGroupId:t.oldDataGroupIds[u],data:t.oldData[u],divide:getDivideShapeFromData(t.oldData[u]),dim:l.dimension})}),each$f(normalizeToArray(n.to),function(l){var u=querySeries(r.updatedSeries,l);if(u>=0){var d=r.updatedSeries[u].getData();s.push({dataGroupId:t.oldDataGroupIds[u],data:d,divide:getDivideShapeFromData(d),dim:l.dimension})}}),o.length>0&&s.length>0&&transitionBetween(o,s,a)}function installUniversalTransition(n){n.registerUpdateLifecycle("series:beforeupdate",function(t,r,a){each$f(normalizeToArray(a.seriesTransition),function(o){each$f(normalizeToArray(o.to),function(s){for(var l=a.updatedSeries,u=0;u<l.length;u++)(s.seriesIndex!=null&&s.seriesIndex===l[u].seriesIndex||s.seriesId!=null&&s.seriesId===l[u].id)&&(l[u][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(t,r,a){var o=getUniversalTransitionGlobalStore(r);if(o.oldSeries&&a.updatedSeries&&a.optionChanged){var s=a.seriesTransition;if(s)each$f(normalizeToArray(s),function(y){transitionSeriesFromOpt(y,o,a,r)});else{var l=findTransitionSeriesBatches(o,a);each$f(l.keys(),function(y){var _=l.get(y);transitionBetween(_.oldSeries,_.newSeries,r)})}each$f(a.updatedSeries,function(y){y[SERIES_UNIVERSAL_TRANSITION_PROP]&&(y[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var u=t.getSeries(),d=o.oldSeries=[],v=o.oldDataGroupIds=[],g=o.oldData=[],f=0;f<u.length;f++){var c=u[f].getData();c.count()<DATA_COUNT_THRESHOLD&&(d.push(u[f]),v.push(u[f].get("dataGroupId")),g.push(c))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var method_min={exports:{}};(function(n,t){(function(r,a){n.exports=a()})(commonjsGlobal,function(){return(()=>{var r={54:(l,u,d)=>{d.d(u,{g:()=>v});var v=function(){function g(){}return g.ZWSP="​",g.DROP_EDITOR="application/editor",g.MOBILE_WIDTH=520,g.CLASS_MENU_DISABLED="vditor-menu--disabled",g.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],g.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],g.CODE_LANGUAGES=["mermaid","echarts","mindmap","plantuml","abc","graphviz","flowchart","apache","js","ts","html","markmap","properties","apache","bash","c","csharp","cpp","css","coffeescript","diff","go","xml","http","json","java","javascript","kotlin","less","lua","makefile","markdown","nginx","objectivec","php","php-template","perl","plaintext","python","python-repl","r","ruby","rust","scss","sql","shell","swift","ini","typescript","vbnet","yaml","ada","clojure","dart","erb","fortran","gradle","haskell","julia","julia-repl","lisp","matlab","pgsql","powershell","sql_more","stata","cmake","mathematica","solidity","yul"],g.CDN="https://unpkg.com/vditor@3.9.3",g.MARKDOWN_OPTIONS={autoSpace:!1,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},g.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},g.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},g.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:g.CDN+"/dist/css/content-theme"},g}()},478:(l,u,d)=>{d.d(u,{Q:()=>c});var v=d(54),g=d(526),f=d(156),c=function(y,_){y===void 0&&(y=document),_===void 0&&(_=v.g.CDN);var b=f.abcRenderAdapter.getElements(y);b.length>0&&(0,g.G)(_+"/dist/js/abcjs/abcjs_basic.min.js","vditorAbcjsScript").then(function(){b.forEach(function(S){S.parentElement.classList.contains("vditor-wysiwyg__pre")||S.parentElement.classList.contains("vditor-ir__marker--pre")||S.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(S,f.abcRenderAdapter.getCode(S).trim()),S.style.overflowX="auto",S.setAttribute("data-processed","true"))})})}},156:(l,u,d)=>{d.r(u),d.d(u,{mathRenderAdapter:()=>v,mermaidRenderAdapter:()=>g,markmapRenderAdapter:()=>f,mindmapRenderAdapter:()=>c,chartRenderAdapter:()=>y,abcRenderAdapter:()=>_,graphvizRenderAdapter:()=>b,flowchartRenderAdapter:()=>S,plantumlRenderAdapter:()=>x});var v={getCode:function(w){return w.textContent},getElements:function(w){return w.querySelectorAll(".language-math")}},g={getCode:function(w){return w.textContent},getElements:function(w){return w.querySelectorAll(".language-mermaid")}},f={getCode:function(w){return w.textContent},getElements:function(w){return w.querySelectorAll(".language-markmap")}},c={getCode:function(w){return w.getAttribute("data-code")},getElements:function(w){return w.querySelectorAll(".language-mindmap")}},y={getCode:function(w){return w.innerText},getElements:function(w){return w.querySelectorAll(".language-echarts")}},_={getCode:function(w){return w.textContent},getElements:function(w){return w.querySelectorAll(".language-abc")}},b={getCode:function(w){return w.textContent},getElements:function(w){return w.querySelectorAll(".language-graphviz")}},S={getCode:function(w){return w.textContent},getElements:function(w){return w.querySelectorAll(".language-flowchart")}},x={getCode:function(w){return w.textContent},getElements:function(w){return w.querySelectorAll(".language-plantuml")}}},314:(l,u,d)=>{d.d(u,{p:()=>c});var v=d(54),g=d(526),f=d(156),c=function(y,_,b){y===void 0&&(y=document),_===void 0&&(_=v.g.CDN);var S=f.chartRenderAdapter.getElements(y);S.length>0&&(0,g.G)(_+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){S.forEach(function(x){if(!x.parentElement.classList.contains("vditor-wysiwyg__pre")&&!x.parentElement.classList.contains("vditor-ir__marker--pre")){var w=f.chartRenderAdapter.getCode(x).trim();if(w)try{if(x.getAttribute("data-processed")==="true")return;var T=JSON.parse(w);echarts.init(x,b==="dark"?"dark":void 0).setOption(T),x.setAttribute("data-processed","true")}catch(A){x.className="vditor-reset--error",x.innerHTML="echarts render error: <br>"+A}}})})}},730:(l,u,d)=>{d.d(u,{O:()=>f});var v=d(51),g=d(54),f=function(c){c.querySelectorAll("pre > code").forEach(function(y,_){var b,S,x;if(!y.parentElement.classList.contains("vditor-wysiwyg__pre")&&!y.parentElement.classList.contains("vditor-ir__marker--pre")&&!(y.classList.contains("language-mermaid")||y.classList.contains("language-flowchart")||y.classList.contains("language-echarts")||y.classList.contains("language-mindmap")||y.classList.contains("language-plantuml")||y.classList.contains("language-markmap")||y.classList.contains("language-abc")||y.classList.contains("language-graphviz")||y.classList.contains("language-math")||y.style.maxHeight.indexOf("px")>-1||c.classList.contains("vditor-preview")&&_>5)){var w=y.innerText;if(y.classList.contains("highlight-chroma")){var T=document.createElement("code");T.innerHTML=y.innerHTML,T.querySelectorAll(".highlight-ln").forEach(function(P){P.remove()}),w=T.innerText}else w.endsWith(`
`)&&(w=w.substr(0,w.length-1));var A='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(A='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var E=document.createElement("div");E.className="vditor-copy",E.innerHTML='<span aria-label="'+(((b=window.VditorI18n)===null||b===void 0?void 0:b.copy)||"复制")+`"
onmouseover="this.setAttribute('aria-label', '`+(((S=window.VditorI18n)===null||S===void 0?void 0:S.copy)||"复制")+`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`+(((x=window.VditorI18n)===null||x===void 0?void 0:x.copied)||"已复制")+`')">`+A+"</span>";var $=document.createElement("textarea");$.value=(0,v.X)(w),E.insertAdjacentElement("afterbegin",$),y.before(E),y.style.maxHeight=window.outerHeight-40+"px",y.insertAdjacentHTML("afterend",'<span style="position: absolute">'+g.g.ZWSP+"</span>")}})}},66:(l,u,d)=>{d.d(u,{P:()=>c});var v=d(54),g=d(526),f=d(156),c=function(y,_){_===void 0&&(_=v.g.CDN);var b=f.flowchartRenderAdapter.getElements(y);b.length!==0&&(0,g.G)(_+"/dist/js/flowchart.js/flowchart.min.js","vditorFlowchartScript").then(function(){b.forEach(function(S){if(S.getAttribute("data-processed")!=="true"){var x=flowchart.parse(f.flowchartRenderAdapter.getCode(S));S.innerHTML="",x.drawSVG(S),S.setAttribute("data-processed","true")}})})}},218:(l,u,d)=>{d.d(u,{v:()=>c});var v=d(54),g=d(526),f=d(156),c=function(y,_){_===void 0&&(_=v.g.CDN);var b=f.graphvizRenderAdapter.getElements(y);b.length!==0&&(0,g.G)(_+"/dist/js/graphviz/viz.js","vditorGraphVizScript").then(function(){b.forEach(function(S){var x=f.graphvizRenderAdapter.getCode(S);if(!S.parentElement.classList.contains("vditor-wysiwyg__pre")&&!S.parentElement.classList.contains("vditor-ir__marker--pre")&&S.getAttribute("data-processed")!=="true"&&x.trim()!==""){try{var w=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),T=(window.URL||window.webkitURL).createObjectURL(w),A=new Worker(T);new Viz({worker:A}).renderSVGElement(x).then(function(E){S.innerHTML=E.outerHTML}).catch(function(E){S.innerHTML="graphviz render error: <br>"+E,S.className="vditor-reset--error"})}catch(E){console.error("graphviz error",E)}S.setAttribute("data-processed","true")}})})}},702:(l,u,d)=>{d.d(u,{s:()=>c});var v=d(54),g=d(526),f=d(578),c=function(y,_,b){_===void 0&&(_=document),b===void 0&&(b=v.g.CDN);var S=y.style;v.g.CODE_THEME.includes(S)||(S="github");var x=document.getElementById("vditorHljsStyle"),w=b+"/dist/js/highlight.js/styles/"+S+".css";x&&x.href!==w&&x.remove(),(0,f.c)(b+"/dist/js/highlight.js/styles/"+S+".css","vditorHljsStyle"),y.enable!==!1&&_.querySelectorAll("pre > code").length!==0&&(0,g.G)(b+"/dist/js/highlight.js/highlight.pack.js","vditorHljsScript").then(function(){(0,g.G)(b+"/dist/js/highlight.js/solidity.min.js","vditorHljsSolidityScript").then(function(){(0,g.G)(b+"/dist/js/highlight.js/yul.min.js","vditorHljsYulScript").then(function(){_.querySelectorAll("pre > code").forEach(function(T){if(!T.parentElement.classList.contains("vditor-ir__marker--pre")&&!T.parentElement.classList.contains("vditor-wysiwyg__pre")&&!(T.classList.contains("language-mermaid")||T.classList.contains("language-flowchart")||T.classList.contains("language-echarts")||T.classList.contains("language-mindmap")||T.classList.contains("language-plantuml")||T.classList.contains("language-abc")||T.classList.contains("language-graphviz")||T.classList.contains("language-math"))&&(y.defaultLang!==""&&T.className.indexOf("language-")===-1&&T.classList.add("language-"+y.defaultLang),hljs.highlightElement(T),y.lineNumber)){T.classList.add("vditor-linenumber");var A=T.querySelector(".vditor-linenumber__temp");A||((A=document.createElement("div")).className="vditor-linenumber__temp",T.insertAdjacentElement("beforeend",A));var E=getComputedStyle(T).whiteSpace,$=!1;E!=="pre-wrap"&&E!=="pre-line"||($=!0);var P="",I=T.textContent.split(/\r\n|\r|\n/g);I.pop(),I.map(function(C){var M="";$&&(A.textContent=C||`
`,M=' style="height:'+A.getBoundingClientRect().height+'px"'),P+="<span"+M+"></span>"}),A.style.display="none",P='<span class="vditor-linenumber__rows">'+P+"</span>",T.insertAdjacentHTML("beforeend",P)}})})})})}},563:(l,u,d)=>{d.d(u,{K:()=>_});var v=d(54),g=d(526),f=d(156),c={},y=function(b,S){var x=window.markmap,w=x.Transformer,T=x.Markmap,A=x.deriveOptions,E=(x.globalCSS,new w);b.innerHTML='<svg style="width:100%"></svg>';var $=b.firstChild,P=T.create($,null),I=function(R,N){var O=R.transform(N),F=Object.keys(O.features).filter(function(X){return!c[X]});F.forEach(function(X){c[X]=!0});var L=R.getAssets(F),B=L.styles,V=L.scripts,H=window.markmap;return B&&H.loadCSS(B),V&&H.loadJS(V),O}(E,S),C=I.root,M=I.frontmatter,D=A(M==null?void 0:M.markmap);P.setData(C,D),P.fit()},_=function(b,S,x){S===void 0&&(S=v.g.CDN);var w=f.markmapRenderAdapter.getElements(b);w.length!==0&&(0,g.G)(S+"/src/js/markmap/markmap.min.js","vditorMermaidScript").then(function(){w.forEach(function(T){var A=f.markmapRenderAdapter.getCode(T);if(T.getAttribute("data-processed")!=="true"&&A.trim()!==""){var E=document.createElement("div");E.className="language-markmap",T.parentNode.appendChild(E),y(E,A),T.parentNode.childNodes[0].nodeName=="CODE"&&T.parentNode.removeChild(T.parentNode.childNodes[0])}})})}},466:(l,u,d)=>{d.d(u,{H:()=>_});var v=d(54),g=d(526),f=d(578),c=d(51),y=d(156),_=function(b,S){var x=y.mathRenderAdapter.getElements(b);if(x.length!==0){var w={cdn:v.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(S&&S.math&&(S.math=Object.assign({},w.math,S.math)),(S=Object.assign({},w,S)).math.engine==="KaTeX")(0,f.c)(S.cdn+"/dist/js/katex/katex.min.css","vditorKatexStyle"),(0,g.G)(S.cdn+"/dist/js/katex/katex.min.js","vditorKatexScript").then(function(){(0,g.G)(S.cdn+"/dist/js/katex/mhchem.min.js","vditorKatexChemScript").then(function(){x.forEach(function(A){if(!A.parentElement.classList.contains("vditor-wysiwyg__pre")&&!A.parentElement.classList.contains("vditor-ir__marker--pre")&&!A.getAttribute("data-math")){var E=(0,c.X)(y.mathRenderAdapter.getCode(A));A.setAttribute("data-math",E);try{A.innerHTML=katex.renderToString(E,{displayMode:A.tagName==="DIV",output:"html"})}catch($){A.innerHTML=$.message,A.className="language-math vditor-reset--error"}A.addEventListener("copy",function($){$.stopPropagation(),$.preventDefault();var P=$.currentTarget.closest(".language-math");$.clipboardData.setData("text/html",P.innerHTML),$.clipboardData.setData("text/plain",P.getAttribute("data-math"))})}})})});else if(S.math.engine==="MathJax"){window.MathJax||(window.MathJax={loader:{paths:{mathjax:S.cdn+"/dist/js/mathjax"}},startup:{typeset:!1},tex:{macros:S.math.macros}}),(0,g.J)(S.cdn+"/dist/js/mathjax/tex-svg-full.js","protyleMathJaxScript");var T=function(A,E){var $=(0,c.X)(A.textContent).trim(),P=window.MathJax.getMetricsFor(A);P.display=A.tagName==="DIV",window.MathJax.tex2svgPromise($,P).then(function(I){A.innerHTML="",A.setAttribute("data-math",$),A.append(I),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var C=I.querySelector('[data-mml-node="merror"]');C&&C.textContent.trim()!==""&&(A.innerHTML=C.textContent.trim(),A.className="vditor-reset--error"),E&&E()})};window.MathJax.startup.promise.then(function(){for(var A=[],E=function(P){var I=x[P];I.parentElement.classList.contains("vditor-wysiwyg__pre")||I.parentElement.classList.contains("vditor-ir__marker--pre")||I.getAttribute("data-math")||!(0,c.X)(I.textContent).trim()||A.push(function(C){P===x.length-1?T(I):T(I,C)})},$=0;$<x.length;$++)E($);(function(P){if(P.length!==0){var I=0,C=P[P.length-1],M=function(){var D=P[I++];D===C?D():D(M)};M()}})(A)})}}}},554:(l,u,d)=>{d.d(u,{Y:()=>v});var v=function(g){g&&g.querySelectorAll("a").forEach(function(f){var c=f.getAttribute("href");c&&(c.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?function(y,_){y.insertAdjacentHTML("afterend",'<video controls="controls" src="'+_+'"></video>'),y.remove()}(f,c):c.match(/^.+.(mp3|wav|flac)$/)?function(y,_){y.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+_+'"></audio>'),y.remove()}(f,c):function(y,_){var b=_.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),S=_.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),x=_.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),w=_.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),T=_.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),A=_.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),E=_.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),$=_.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);b&&b[1].length===11?(y.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+b[1]+(b[2]?"?start="+b[2]:"")+'"></iframe>'),y.remove()):S&&S[1]?(y.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+S[1]+'"></iframe>'),y.remove()):x&&x[1]?(y.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+x[1]+'"></iframe>'),y.remove()):w&&w[1]?(y.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`+w[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),y.remove()):T&&T[0]?(y.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`+encodeURIComponent(T[0])+'"></iframe>'),y.remove()):A&&A[2]?(y.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`+A[2]+'"></iframe>'),y.remove()):E&&E[1]?(y.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//player.bilibili.com/player.html?bvid=`+E[1]+'"></iframe>'),y.remove()):$&&$[1]&&(y.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+$[1]+'"></iframe>'),y.remove())}(f,c))})}},40:(l,u,d)=>{d.d(u,{i:()=>c});var v=d(54),g=d(526),f=d(156),c=function(y,_,b){_===void 0&&(_=v.g.CDN);var S=f.mermaidRenderAdapter.getElements(y);S.length!==0&&(0,g.G)(_+"/dist/js/mermaid/mermaid.min.js","vditorMermaidScript").then(function(){var x={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8},gantt:{leftPadding:75,rightPadding:20}};b==="dark"&&(x.theme="dark"),mermaid.initialize(x),S.forEach(function(w){var T=f.mermaidRenderAdapter.getCode(w);w.getAttribute("data-processed")!=="true"&&T.trim()!==""&&(mermaid.init(void 0,w),w.setAttribute("data-processed","true"))})})}},749:(l,u,d)=>{d.d(u,{P:()=>c});var v=d(54),g=d(526),f=d(156),c=function(y,_,b){y===void 0&&(y=document),_===void 0&&(_=v.g.CDN);var S=f.mindmapRenderAdapter.getElements(y);S.length>0&&(0,g.G)(_+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){S.forEach(function(x){if(!x.parentElement.classList.contains("vditor-wysiwyg__pre")&&!x.parentElement.classList.contains("vditor-ir__marker--pre")){var w=f.mindmapRenderAdapter.getCode(x);if(w)try{if(x.getAttribute("data-processed")==="true")return;echarts.init(x,b==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(w))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(T,A){var E;return!((E=A==null?void 0:A.data)===null||E===void 0)&&E.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),x.setAttribute("data-processed","true")}catch(T){x.className="vditor-reset--error",x.innerHTML="mindmap render error: <br>"+T}}})})}},818:(l,u,d)=>{d.d(u,{k:()=>f});var v=d(64),g=d(466),f=function(c,y,_){var b="",S=[];if(Array.from(c.children).forEach(function(A,E){if((0,v.W)(A)){if(_){var $=A.id.lastIndexOf("_");A.id=A.id.substring(0,$===-1?void 0:$)+"_"+E}S.push(A.id),b+=A.outerHTML.replace("<wbr>","")}}),b==="")return y.innerHTML="","";var x=document.createElement("div");if(_)_.lute.SetToC(!0),_.currentMode!=="wysiwyg"||_.preview.element.contains(c)?_.currentMode!=="ir"||_.preview.element.contains(c)?x.innerHTML=_.lute.HTML2VditorDOM("<p>[ToC]</p>"+b):x.innerHTML=_.lute.SpinVditorIRDOM("<p>[ToC]</p>"+b):x.innerHTML=_.lute.SpinVditorDOM("<p>[ToC]</p>"+b),_.lute.SetToC(_.options.preview.markdown.toc);else{y.classList.add("vditor-outline");var w=Lute.New();w.SetToC(!0),x.innerHTML=w.HTML2VditorDOM("<p>[ToC]</p>"+b)}var T=x.firstElementChild.querySelectorAll("li > span[data-target-id]");return T.forEach(function(A,E){if(A.nextElementSibling&&A.nextElementSibling.tagName==="UL"){var $="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||($='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),A.innerHTML=$+"<span>"+A.innerHTML+"</span>"}else A.innerHTML="<svg></svg><span>"+A.innerHTML+"</span>";A.setAttribute("data-target-id",S[E])}),b=x.firstElementChild.innerHTML,T.length===0?(y.innerHTML="",b):(y.innerHTML=b,_&&(0,g.H)(y,{cdn:_.options.cdn,math:_.options.preview.math}),y.firstElementChild.addEventListener("click",function(A){for(var E=A.target;E&&!E.isEqualNode(y);){if(E.classList.contains("vditor-outline__action")){E.classList.contains("vditor-outline__action--close")?(E.classList.remove("vditor-outline__action--close"),E.parentElement.nextElementSibling.setAttribute("style","display:block")):(E.classList.add("vditor-outline__action--close"),E.parentElement.nextElementSibling.setAttribute("style","display:none")),A.preventDefault(),A.stopPropagation();break}if(E.getAttribute("data-target-id")){A.preventDefault(),A.stopPropagation();var $=document.getElementById(E.getAttribute("data-target-id"));if(!$)return;if(_)if(_.options.height==="auto"){var P=$.offsetTop+_.element.offsetTop;_.options.toolbarConfig.pin||(P+=_.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,P)}else _.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,_.element.offsetTop),_.preview.element.contains(c)?c.parentElement.scrollTop=$.offsetTop:c.scrollTop=$.offsetTop;else window.scrollTo(window.scrollX,$.offsetTop);break}E=E.parentElement}}),b)}},408:(l,u,d)=>{d.d(u,{B:()=>c});var v=d(54),g=d(526),f=d(156),c=function(y,_){y===void 0&&(y=document),_===void 0&&(_=v.g.CDN);var b=f.plantumlRenderAdapter.getElements(y);b.length!==0&&(0,g.G)(_+"/dist/js/plantuml/plantuml-encoder.min.js","vditorPlantumlScript").then(function(){b.forEach(function(S){if(!S.parentElement.classList.contains("vditor-wysiwyg__pre")&&!S.parentElement.classList.contains("vditor-ir__marker--pre")){var x=f.plantumlRenderAdapter.getCode(S).trim();if(x)try{S.innerHTML='<img src="http://www.plantuml.com/plantuml/svg/~1'+plantumlEncoder.encode(x)+'">'}catch(w){S.className="vditor-reset--error",S.innerHTML="plantuml render error: <br>"+w}}})})}},895:(l,u,d)=>{d.d(u,{X:()=>v});var v=function(g){var f=Lute.New();return f.PutEmojis(g.emojis),f.SetEmojiSite(g.emojiSite),f.SetHeadingAnchor(g.headingAnchor),f.SetInlineMathAllowDigitAfterOpenMarker(g.inlineMathDigit),f.SetAutoSpace(g.autoSpace),f.SetToC(g.toc),f.SetFootnotes(g.footnotes),f.SetFixTermTypo(g.fixTermTypo),f.SetVditorCodeBlockPreview(g.codeBlockPreview),f.SetVditorMathBlockPreview(g.mathBlockPreview),f.SetSanitize(g.sanitize),f.SetChineseParagraphBeginningSpace(g.paragraphBeginningSpace),f.SetRenderListStyle(g.listStyle),f.SetLinkBase(g.linkBase),f.SetLinkPrefix(g.linkPrefix),f.SetMark(g.mark),g.lazyLoadImage&&f.SetImageLazyLoading(g.lazyLoadImage),f}},863:(l,u,d)=>{d.d(u,{E:()=>v});var v=function(g,f,c){c===void 0&&(c="classic");var y=g.getBoundingClientRect();document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+(c==="dark"?" vditor--dark":"")+`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `+window.VditorI18n.spin+`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`+window.VditorI18n.close+`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `+g.width+"px;height:"+g.height+"px;transform: translate3d("+y.left+"px, "+(y.top-36)+'px, 0)" src="'+g.getAttribute("src")+`">
    </div>
</div>`),document.body.style.overflow="hidden";var _=document.querySelector(".vditor-img img"),b="translate3d("+Math.max(0,window.innerWidth-g.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-36-g.naturalHeight)/2+"px, 0)";setTimeout(function(){_.setAttribute("style","transition: transform .3s ease-in-out;transform: "+b),setTimeout(function(){_.parentElement.scrollTo((_.parentElement.scrollWidth-_.parentElement.clientWidth)/2,(_.parentElement.scrollHeight-_.parentElement.clientHeight)/2)},400)});var S=document.querySelector(".vditor-img__btn");S.addEventListener("click",function(){var x=parseInt(S.getAttribute("data-deg"),10)+90;x/90%2==1&&g.naturalWidth>_.parentElement.clientHeight?_.style.transform="translate3d("+Math.max(0,window.innerWidth-g.naturalWidth)/2+"px, "+(g.naturalWidth/2-g.naturalHeight/2)+"px, 0) rotateZ("+x+"deg)":_.style.transform=b+" rotateZ("+x+"deg)",S.setAttribute("data-deg",x.toString()),setTimeout(function(){_.parentElement.scrollTo((_.parentElement.scrollWidth-_.parentElement.clientWidth)/2,(_.parentElement.scrollHeight-_.parentElement.clientHeight)/2)},400)})}},312:(l,u,d)=>{d.d(u,{Y:()=>f});var v=d(54),g=d(578),f=function(c,y){y===void 0&&(y=v.g.CDN),v.g.CODE_THEME.includes(c)||(c="github");var _=document.getElementById("vditorHljsStyle"),b=y+"/dist/js/highlight.js/styles/"+c+".css";_?_.href!==b&&(_.remove(),(0,g.c)(b,"vditorHljsStyle")):(0,g.c)(b,"vditorHljsStyle")}},227:(l,u,d)=>{d.d(u,{Z:()=>g});var v=d(578),g=function(f,c){if(f&&c){var y=document.getElementById("vditorContentTheme"),_=c+"/"+f+".css";y?y.getAttribute("href")!==_&&(y.remove(),(0,v.c)(_,"vditorContentTheme")):(0,v.c)(_,"vditorContentTheme")}}},526:(l,u,d)=>{d.d(u,{J:()=>v,G:()=>g});var v=function(f,c){if(document.getElementById(c))return!1;var y=new XMLHttpRequest;y.open("GET",f,!1),y.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),y.send("");var _=document.createElement("script");_.type="text/javascript",_.text=y.responseText,_.id=c,document.head.appendChild(_)},g=function(f,c){return new Promise(function(y,_){if(document.getElementById(c))return y(),!1;var b=document.createElement("script");b.src=f,b.async=!0,document.head.appendChild(b),b.onload=function(){if(document.getElementById(c))return b.remove(),y(),!1;b.id=c,y()}})}},578:(l,u,d)=>{d.d(u,{c:()=>v});var v=function(g,f){if(!document.getElementById(f)){var c=document.createElement("link");c.id=f,c.rel="stylesheet",c.type="text/css",c.href=g,document.getElementsByTagName("head")[0].appendChild(c)}}},51:(l,u,d)=>{d.d(u,{X:()=>v});var v=function(g){return g.replace(/\u00a0/g," ")}},827:(l,u,d)=>{d.d(u,{lG:()=>v,fb:()=>g});var v=function(f,c){if(!f)return!1;f.nodeType===3&&(f=f.parentElement);for(var y=f,_=!1;y&&!_&&!y.classList.contains("vditor-reset");)y.nodeName===c?_=!0:y=y.parentElement;return _&&y},g=function(f,c){if(!f)return!1;f.nodeType===3&&(f=f.parentElement);for(var y=f,_=!1;y&&!_&&!y.classList.contains("vditor-reset");)y.classList.contains(c)?_=!0:y=y.parentElement;return _&&y}},64:(l,u,d)=>{d.d(u,{W:()=>v});var v=function(g){var f=function(c,y){if(!c)return!1;c.nodeType===3&&(c=c.parentElement);for(var _=c,b=!1;_&&!b&&!_.classList.contains("vditor-reset");)_.nodeName.indexOf(y)===0?b=!0:_=_.parentElement;return b&&_}(g,"H");return!(!f||f.tagName.length!==2||f.tagName==="HR")&&f}},640:(l,u,d)=>{d.d(u,{T:()=>v});var v=function(){for(var g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];for(var c={},y=function(b){for(var S in b)b.hasOwnProperty(S)&&(Object.prototype.toString.call(b[S])==="[object Object]"?c[S]=v(c[S],b[S]):c[S]=b[S])},_=0;_<g.length;_++)y(g[_]);return c}},393:(l,u,d)=>{d.d(u,{Hc:()=>v}),d(54);var v=function(g){var f=window.getSelection();f.removeAllRanges(),f.addRange(g)}}},a={};function o(l){var u=a[l];if(u!==void 0)return u.exports;var d=a[l]={exports:{}};return r[l](d,d.exports,o),d.exports}o.d=(l,u)=>{for(var d in u)o.o(u,d)&&!o.o(l,d)&&Object.defineProperty(l,d,{enumerable:!0,get:u[d]})},o.o=(l,u)=>Object.prototype.hasOwnProperty.call(l,u),o.r=l=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var s={};return(()=>{o.d(s,{default:()=>X});var l=o(478),u=o(156),d=o(314),v=o(730),g=o(66),f=o(218),c=o(702),y=function(U){U===void 0&&(U=document);var te=function(ee){var q=document.createElement("img");q.src=ee.getAttribute("data-src"),q.addEventListener("load",function(){ee.getAttribute("style")||ee.getAttribute("class")||ee.getAttribute("width")||ee.getAttribute("height")||q.naturalHeight>q.naturalWidth&&q.naturalWidth/q.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&q.naturalHeight>window.innerHeight-40&&(ee.style.height=window.innerHeight-40+"px"),ee.src=q.src}),ee.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return U.querySelectorAll("img").forEach(function(ee){ee.getAttribute("data-src")&&te(ee)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),U.querySelectorAll("img").forEach(function(ee){window.vditorImageIntersectionObserver.observe(ee)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(ee){ee.forEach(function(q){(q.isIntersecting===void 0?q.intersectionRatio!==0:q.isIntersecting)&&q.target.getAttribute("data-src")&&te(q.target)})}),U.querySelectorAll("img").forEach(function(ee){window.vditorImageIntersectionObserver.observe(ee)}))},_=o(466),b=o(554),S=o(40),x=o(563),w=o(749),T=o(818),A=o(408),E=o(54),$=o(227),P=o(526),I=o(827),C=o(640),M=o(895),D=o(393),R=function(U,te){if(te===void 0&&(te="zh_CN"),typeof speechSynthesis<"u"&&typeof SpeechSynthesisUtterance<"u"){var ee='<svg><use xlink:href="#vditor-icon-play"></use></svg>',q='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(ee='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',q='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var ie=document.querySelector(".vditor-speech");if(!ie){(ie=document.createElement("div")).className="vditor-speech",document.body.insertAdjacentElement("beforeend",ie);var pe=function(){var Q,J;return speechSynthesis.getVoices().forEach(function(oe){oe.lang===te.replace("_","-")&&(Q=oe),oe.default&&(J=oe)}),Q||(Q=J),Q};speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=pe);var j=pe();ie.onclick=function(){if(ie.className==="vditor-speech"){var Q=new SpeechSynthesisUtterance(ie.getAttribute("data-text"));Q.voice=j,Q.onend=function(){ie.className="vditor-speech",speechSynthesis.cancel(),ie.innerHTML=ee},speechSynthesis.speak(Q),ie.className="vditor-speech vditor-speech--current",ie.innerHTML=q}else speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),ie.innerHTML=q):(speechSynthesis.pause(),ie.innerHTML=ee));(0,D.Hc)(window.vditorSpeechRange)},document.body.addEventListener("click",function(){getSelection().toString().trim()===""&&ie.style.display==="block"&&(ie.className="vditor-speech",speechSynthesis.cancel(),ie.style.display="none")})}U.addEventListener("mouseup",function(Q){var J=getSelection().toString().trim();if(speechSynthesis.cancel(),getSelection().toString().trim()!==""){window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var oe=getSelection().getRangeAt(0).getBoundingClientRect();ie.innerHTML=ee,ie.style.display="block",ie.style.top=oe.top+oe.height+document.querySelector("html").scrollTop-20+"px",ie.style.left=Q.clientX+2+"px",ie.setAttribute("data-text",J)}else ie.style.display==="block"&&(ie.className="vditor-speech",ie.style.display="none")})}},N=function(U,te,ee,q){return new(ee||(ee=Promise))(function(ie,pe){function j(oe){try{J(q.next(oe))}catch(ne){pe(ne)}}function Q(oe){try{J(q.throw(oe))}catch(ne){pe(ne)}}function J(oe){var ne;oe.done?ie(oe.value):(ne=oe.value,ne instanceof ee?ne:new ee(function(z){z(ne)})).then(j,Q)}J((q=q.apply(U,te||[])).next())})},O=function(U,te){var ee,q,ie,pe,j={label:0,sent:function(){if(1&ie[0])throw ie[1];return ie[1]},trys:[],ops:[]};return pe={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(pe[Symbol.iterator]=function(){return this}),pe;function Q(J){return function(oe){return function(ne){if(ee)throw new TypeError("Generator is already executing.");for(;j;)try{if(ee=1,q&&(ie=2&ne[0]?q.return:ne[0]?q.throw||((ie=q.return)&&ie.call(q),0):q.next)&&!(ie=ie.call(q,ne[1])).done)return ie;switch(q=0,ie&&(ne=[2&ne[0],ie.value]),ne[0]){case 0:case 1:ie=ne;break;case 4:return j.label++,{value:ne[1],done:!1};case 5:j.label++,q=ne[1],ne=[0];continue;case 7:ne=j.ops.pop(),j.trys.pop();continue;default:if(ie=j.trys,!((ie=ie.length>0&&ie[ie.length-1])||ne[0]!==6&&ne[0]!==2)){j=0;continue}if(ne[0]===3&&(!ie||ne[1]>ie[0]&&ne[1]<ie[3])){j.label=ne[1];break}if(ne[0]===6&&j.label<ie[1]){j.label=ie[1],ie=ne;break}if(ie&&j.label<ie[2]){j.label=ie[2],j.ops.push(ne);break}ie[2]&&j.ops.pop(),j.trys.pop();continue}ne=te.call(U,j)}catch(z){ne=[6,z],q=0}finally{ee=ie=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([J,oe])}}},F=function(U){var te={anchor:0,cdn:E.g.CDN,customEmoji:{},emojiPath:(U&&U.emojiPath||E.g.CDN)+"/dist/images/emoji",hljs:E.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:E.g.MARKDOWN_OPTIONS,math:E.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},theme:E.g.THEME_OPTIONS};return(0,C.T)(te,U)},L=function(U,te){var ee=F(te);return(0,P.G)(ee.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){var q=(0,M.X)({autoSpace:ee.markdown.autoSpace,codeBlockPreview:ee.markdown.codeBlockPreview,emojiSite:ee.emojiPath,emojis:ee.customEmoji,fixTermTypo:ee.markdown.fixTermTypo,footnotes:ee.markdown.footnotes,headingAnchor:ee.anchor!==0,inlineMathDigit:ee.math.inlineDigit,lazyLoadImage:ee.lazyLoadImage,linkBase:ee.markdown.linkBase,linkPrefix:ee.markdown.linkPrefix,listStyle:ee.markdown.listStyle,mark:ee.markdown.mark,mathBlockPreview:ee.markdown.mathBlockPreview,paragraphBeginningSpace:ee.markdown.paragraphBeginningSpace,sanitize:ee.markdown.sanitize,toc:ee.markdown.toc});return te!=null&&te.renderers&&q.SetJSRenderers({renderers:{Md2HTML:te.renderers}}),q.SetHeadingID(!0),q.Md2HTML(U)})},B=function(U,te,ee){return N(void 0,void 0,void 0,function(){var q,ie,pe;return O(this,function(j){switch(j.label){case 0:return q=F(ee),[4,L(te,q)];case 1:if(ie=j.sent(),q.transform&&(ie=q.transform(ie)),U.innerHTML=ie,U.classList.add("vditor-reset"),q.i18n)return[3,5];if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(q.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return pe="vditorI18nScript"+q.lang,document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(J){J.id!==pe&&document.head.removeChild(J)}),[4,(0,P.G)(q.cdn+"/dist/js/i18n/"+q.lang+".js",pe)];case 3:j.sent(),j.label=4;case 4:return[3,6];case 5:window.VditorI18n=q.i18n,j.label=6;case 6:return q.icon?[4,(0,P.G)(q.cdn+"/dist/js/icons/"+q.icon+".js","vditorIconScript")]:[3,8];case 7:j.sent(),j.label=8;case 8:return(0,$.Z)(q.theme.current,q.theme.path),q.anchor===1&&U.classList.add("vditor-reset--anchor"),(0,v.O)(U),(0,c.s)(q.hljs,U,q.cdn),(0,_.H)(U,{cdn:q.cdn,math:q.math}),(0,S.i)(U,q.cdn,q.mode),(0,x.K)(U,q.cdn,q.mode),(0,g.P)(U,q.cdn),(0,f.v)(U,q.cdn),(0,d.p)(U,q.cdn,q.mode),(0,w.P)(U,q.cdn,q.mode),(0,A.B)(U,q.cdn),(0,l.Q)(U,q.cdn),(0,b.Y)(U),q.speech.enable&&R(U),q.anchor!==0&&(Q=q.anchor,document.querySelectorAll(".vditor-anchor").forEach(function(J){Q===1&&J.classList.add("vditor-anchor--left"),J.onclick=function(){var oe=J.getAttribute("href").substr(1),ne=document.getElementById("vditorAnchor-"+oe).offsetTop;document.querySelector("html").scrollTop=ne}}),window.onhashchange=function(){var J=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));J&&(document.querySelector("html").scrollTop=J.offsetTop)}),q.after&&q.after(),q.lazyLoadImage&&y(U),U.addEventListener("click",function(J){var oe=(0,I.lG)(J.target,"SPAN");if(oe&&(0,I.fb)(oe,"vditor-toc")){var ne=U.querySelector("#"+oe.getAttribute("data-target-id"));ne&&window.scrollTo(window.scrollX,ne.offsetTop)}}),[2]}var Q})})},V=o(863),H=o(312);const X=function(){function U(){}return U.adapterRender=u,U.previewImage=V.E,U.codeRender=v.O,U.graphvizRender=f.v,U.highlightRender=c.s,U.mathRender=_.H,U.mermaidRender=S.i,U.markmapRender=x.K,U.flowchartRender=g.P,U.chartRender=d.p,U.abcRender=l.Q,U.mindmapRender=w.P,U.plantumlRender=A.B,U.outlineRender=T.k,U.mediaRender=b.Y,U.speechRender=R,U.lazyLoadImageRender=y,U.md2html=L,U.preview=B,U.setCodeTheme=H.Y,U.setContentTheme=$.Z,U}()})(),s=s.default})()})})(method_min);var method_minExports=method_min.exports;const VditorPreview=getDefaultExportFromCjs(method_minExports),index="";var ort_min={exports:{}};/*!
* ONNX Runtime Web v1.15.1
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(n,t){module.exports=t()})(self,()=>(()=>{var __webpack_modules__={8453:(n,t,r)=>{r.r(t),r.d(t,{InferenceSession:()=>y,Tensor:()=>f,env:()=>l,registerBackend:()=>s});const a={},o=[],s=(_,b,S)=>{if(!b||typeof b.init!="function"||typeof b.createSessionHandler!="function")throw new TypeError("not a valid backend");{const x=a[_];if(x===void 0)a[_]={backend:b,priority:S};else{if(x.priority>S)return;if(x.priority===S&&x.backend!==b)throw new Error(`cannot register backend "${_}" using priority ${S}`)}if(S>=0){const w=o.indexOf(_);w!==-1&&o.splice(w,1);for(let T=0;T<o.length;T++)if(a[o[T]].priority<=S)return void o.splice(T,0,_);o.push(_)}}},l=new class{constructor(){this.wasm={},this.webgl={},this.webgpu={},this.logLevelInternal="warning"}set logLevel(_){if(_!==void 0){if(typeof _!="string"||["verbose","info","warning","error","fatal"].indexOf(_)===-1)throw new Error(`Unsupported logging level: ${_}`);this.logLevelInternal=_}}get logLevel(){return this.logLevelInternal}},u=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),d=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let v=!1;class g{constructor(b,S,x){let w,T,A;if((()=>{if(!v){v=!0;const $=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",P=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";$&&(u.set("int64",BigInt64Array),d.set(BigInt64Array,"int64")),P&&(u.set("uint64",BigUint64Array),d.set(BigUint64Array,"uint64"))}})(),typeof b=="string")if(w=b,A=x,b==="string"){if(!Array.isArray(S))throw new TypeError("A string tensor's data must be a string array.");T=S}else{const $=u.get(b);if($===void 0)throw new TypeError(`Unsupported tensor type: ${b}.`);if(Array.isArray(S))T=$.from(S);else{if(!(S instanceof $))throw new TypeError(`A ${w} tensor's data must be type of ${$}`);T=S}}else if(A=S,Array.isArray(b)){if(b.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const $=typeof b[0];if($==="string")w="string",T=b;else{if($!=="boolean")throw new TypeError(`Invalid element type of data array: ${$}.`);w="bool",T=Uint8Array.from(b)}}else{const $=d.get(b.constructor);if($===void 0)throw new TypeError(`Unsupported type for tensor data: ${b.constructor}.`);w=$,T=b}if(A===void 0)A=[T.length];else if(!Array.isArray(A))throw new TypeError("A tensor's dims must be a number array");const E=($=>{let P=1;for(let I=0;I<$.length;I++){const C=$[I];if(typeof C!="number"||!Number.isSafeInteger(C))throw new TypeError(`dims[${I}] must be an integer, got: ${C}`);if(C<0)throw new RangeError(`dims[${I}] must be a non-negative integer, got: ${C}`);P*=C}return P})(A);if(E!==T.length)throw new Error(`Tensor's size(${E}) does not match data length(${T.length}).`);this.dims=A,this.type=w,this.data=T,this.size=E}static bufferToTensor(b,S){if(b===void 0)throw new Error("Image buffer must be defined");if(S.height===void 0||S.width===void 0)throw new Error("Image height and width must be defined");if(S.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:x,width:w}=S,T=S.norm??{mean:255,bias:0};let A,E;A=typeof T.mean=="number"?[T.mean,T.mean,T.mean,T.mean]:[T.mean[0],T.mean[1],T.mean[2],T.mean[3]??255],E=typeof T.bias=="number"?[T.bias,T.bias,T.bias,T.bias]:[T.bias[0],T.bias[1],T.bias[2],T.bias[3]??0];const $=S.bitmapFormat!==void 0?S.bitmapFormat:"RGBA",P=S.tensorFormat!==void 0&&S.tensorFormat!==void 0?S.tensorFormat:"RGB",I=x*w,C=P==="RGBA"?new Float32Array(4*I):new Float32Array(3*I);let M=4,D=0,R=1,N=2,O=3,F=0,L=I,B=2*I,V=-1;$==="RGB"&&(M=3,D=0,R=1,N=2,O=-1),P==="RGBA"?V=3*I:P==="RBG"?(F=0,B=I,L=2*I):P==="BGR"&&(B=0,L=I,F=2*I);for(let H=0;H<I;H++,D+=M,N+=M,R+=M,O+=M)C[F++]=(b[D]+E[0])/A[0],C[L++]=(b[R]+E[1])/A[1],C[B++]=(b[N]+E[2])/A[2],V!==-1&&O!==-1&&(C[V++]=(b[O]+E[3])/A[3]);return new g("float32",C,P==="RGBA"?[1,4,x,w]:[1,3,x,w])}static async fromImage(b,S){const x=typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement,w=typeof ImageData<"u"&&b instanceof ImageData,T=typeof ImageBitmap<"u"&&b instanceof ImageBitmap,A=typeof b=="string";let E,$=S??{};if(x){const P=document.createElement("canvas");P.width=b.width,P.height=b.height;const I=P.getContext("2d");if(I==null)throw new Error("Can not access image data");{let C=b.height,M=b.width;if(S!==void 0&&S.resizedHeight!==void 0&&S.resizedWidth!==void 0&&(C=S.resizedHeight,M=S.resizedWidth),S!==void 0){if($=S,S.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if($.tensorFormat="RGBA",S.height!==void 0&&S.height!==C)throw new Error("Image input config height doesn't match HTMLImageElement height");if($.height=C,S.width!==void 0&&S.width!==M)throw new Error("Image input config width doesn't match HTMLImageElement width");$.width=M}else $.tensorFormat="RGBA",$.height=C,$.width=M;I.drawImage(b,0,0),E=I.getImageData(0,0,M,C).data}}else{if(!w){if(T){if(S===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(S.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const P=document.createElement("canvas").getContext("2d");if(P!=null){const I=b.height,C=b.width;if(P.drawImage(b,0,0,C,I),E=P.getImageData(0,0,C,I).data,S!==void 0){if(S.height!==void 0&&S.height!==I)throw new Error("Image input config height doesn't match ImageBitmap height");if($.height=I,S.width!==void 0&&S.width!==C)throw new Error("Image input config width doesn't match ImageBitmap width");$.width=C}else $.height=I,$.width=C;return g.bufferToTensor(E,$)}throw new Error("Can not access image data")}if(A)return new Promise((P,I)=>{const C=document.createElement("canvas"),M=C.getContext("2d");if(!b||!M)return I();const D=new Image;D.crossOrigin="Anonymous",D.src=b,D.onload=()=>{C.width=D.width,C.height=D.height,M.drawImage(D,0,0,C.width,C.height);const R=M.getImageData(0,0,C.width,C.height);if(S!==void 0){if(S.height!==void 0&&S.height!==C.height)throw new Error("Image input config height doesn't match height");if($.height=C.height,S.width!==void 0&&S.width!==C.width)throw new Error("Image input config width doesn't match width");$.width=C.width}else $.height=C.height,$.width=C.width;P(g.bufferToTensor(R.data,$))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{const P="RGBA";let I,C;if(S!==void 0&&S.resizedWidth!==void 0&&S.resizedHeight!==void 0?(I=S.resizedHeight,C=S.resizedWidth):(I=b.height,C=b.width),S!==void 0){if($=S,S.bitmapFormat!==void 0&&S.bitmapFormat!==P)throw new Error("Image input config format must be RGBA for ImageData");$.bitmapFormat="RGBA"}else $.bitmapFormat="RGBA";if($.height=I,$.width=C,S!==void 0){const M=document.createElement("canvas");M.width=C,M.height=I;const D=M.getContext("2d");if(D==null)throw new Error("Can not access image data");D.putImageData(b,0,0),E=D.getImageData(0,0,C,I).data}else E=b.data}}if(E!==void 0)return g.bufferToTensor(E,$);throw new Error("Input data provided is not supported - aborted tensor creation")}toDataURL(b){const S=document.createElement("canvas");S.width=this.dims[3],S.height=this.dims[2];const x=S.getContext("2d");if(x!=null){let w,T;(b==null?void 0:b.tensorLayout)!==void 0&&b.tensorLayout==="NHWC"?(w=this.dims[2],T=this.dims[3]):(w=this.dims[3],T=this.dims[2]);const A=(b==null?void 0:b.format)!==void 0?b.format:"RGB",E=b==null?void 0:b.norm;let $,P;E===void 0||E.mean===void 0?$=[255,255,255,255]:typeof E.mean=="number"?$=[E.mean,E.mean,E.mean,E.mean]:($=[E.mean[0],E.mean[1],E.mean[2],0],E.mean[3]!==void 0&&($[3]=E.mean[3])),E===void 0||E.bias===void 0?P=[0,0,0,0]:typeof E.bias=="number"?P=[E.bias,E.bias,E.bias,E.bias]:(P=[E.bias[0],E.bias[1],E.bias[2],0],E.bias[3]!==void 0&&(P[3]=E.bias[3]));const I=T*w;let C=0,M=I,D=2*I,R=-1;A==="RGBA"?(C=0,M=I,D=2*I,R=3*I):A==="RGB"?(C=0,M=I,D=2*I):A==="RBG"&&(C=0,D=I,M=2*I);for(let N=0;N<T;N++)for(let O=0;O<w;O++){const F=(this.data[C++]-P[0])*$[0],L=(this.data[M++]-P[1])*$[1],B=(this.data[D++]-P[2])*$[2],V=R===-1?255:(this.data[R++]-P[3])*$[3];x.fillStyle="rgba("+F+","+L+","+B+","+V+")",x.fillRect(O,N,1,1)}return S.toDataURL()}throw new Error("Can not access image data")}toImageData(b){const S=document.createElement("canvas").getContext("2d");let x;if(S==null)throw new Error("Can not access image data");{let w,T,A;(b==null?void 0:b.tensorLayout)!==void 0&&b.tensorLayout==="NHWC"?(w=this.dims[2],T=this.dims[1],A=this.dims[3]):(w=this.dims[3],T=this.dims[2],A=this.dims[1]);const E=b!==void 0&&b.format!==void 0?b.format:"RGB",$=b==null?void 0:b.norm;let P,I;$===void 0||$.mean===void 0?P=[255,255,255,255]:typeof $.mean=="number"?P=[$.mean,$.mean,$.mean,$.mean]:(P=[$.mean[0],$.mean[1],$.mean[2],255],$.mean[3]!==void 0&&(P[3]=$.mean[3])),$===void 0||$.bias===void 0?I=[0,0,0,0]:typeof $.bias=="number"?I=[$.bias,$.bias,$.bias,$.bias]:(I=[$.bias[0],$.bias[1],$.bias[2],0],$.bias[3]!==void 0&&(I[3]=$.bias[3]));const C=T*w;if(b!==void 0){if(b.height!==void 0&&b.height!==T)throw new Error("Image output config height doesn't match tensor height");if(b.width!==void 0&&b.width!==w)throw new Error("Image output config width doesn't match tensor width");if(b.format!==void 0&&A===4&&b.format!=="RGBA"||A===3&&b.format!=="RGB"&&b.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const M=4;let D=0,R=1,N=2,O=3,F=0,L=C,B=2*C,V=-1;E==="RGBA"?(F=0,L=C,B=2*C,V=3*C):E==="RGB"?(F=0,L=C,B=2*C):E==="RBG"&&(F=0,B=C,L=2*C),x=S.createImageData(w,T);for(let H=0;H<T*w;D+=M,R+=M,N+=M,O+=M,H++)x.data[D]=(this.data[F++]-I[0])*P[0],x.data[R]=(this.data[L++]-I[1])*P[1],x.data[N]=(this.data[B++]-I[2])*P[2],x.data[O]=V===-1?255:(this.data[V++]-I[3])*P[3]}return x}reshape(b){return new g(this.type,this.data,b)}}const f=g;class c{constructor(b){this.handler=b}async run(b,S,x){const w={};let T={};if(typeof b!="object"||b===null||b instanceof f||Array.isArray(b))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let A=!0;if(typeof S=="object"){if(S===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(S instanceof f)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(S)){if(S.length===0)throw new TypeError("'fetches' cannot be an empty array.");A=!1;for(const P of S){if(typeof P!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(P)===-1)throw new RangeError(`'fetches' contains invalid output name: ${P}.`);w[P]=null}if(typeof x=="object"&&x!==null)T=x;else if(x!==void 0)throw new TypeError("'options' must be an object.")}else{let P=!1;const I=Object.getOwnPropertyNames(S);for(const C of this.outputNames)if(I.indexOf(C)!==-1){const M=S[C];(M===null||M instanceof f)&&(P=!0,A=!1,w[C]=M)}if(P){if(typeof x=="object"&&x!==null)T=x;else if(x!==void 0)throw new TypeError("'options' must be an object.")}else T=S}}else if(S!==void 0)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const P of this.inputNames)if(b[P]===void 0)throw new Error(`input '${P}' is missing in 'feeds'.`);if(A)for(const P of this.outputNames)w[P]=null;const E=await this.handler.run(b,w,T),$={};for(const P in E)Object.hasOwnProperty.call(E,P)&&($[P]=new f(E[P].type,E[P].data,E[P].dims));return $}static async create(b,S,x,w){let T,A={};if(typeof b=="string"){if(T=b,typeof S=="object"&&S!==null)A=S;else if(S!==void 0)throw new TypeError("'options' must be an object.")}else if(b instanceof Uint8Array){if(T=b,typeof S=="object"&&S!==null)A=S;else if(S!==void 0)throw new TypeError("'options' must be an object.")}else{if(!(b instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&b instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const I=b;let C=0,M=b.byteLength;if(typeof S=="object"&&S!==null)A=S;else if(typeof S=="number"){if(C=S,!Number.isSafeInteger(C))throw new RangeError("'byteOffset' must be an integer.");if(C<0||C>=I.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${I.byteLength}).`);if(M=b.byteLength-C,typeof x=="number"){if(M=x,!Number.isSafeInteger(M))throw new RangeError("'byteLength' must be an integer.");if(M<=0||C+M>I.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${I.byteLength-C}].`);if(typeof w=="object"&&w!==null)A=w;else if(w!==void 0)throw new TypeError("'options' must be an object.")}else if(x!==void 0)throw new TypeError("'byteLength' must be a number.")}else if(S!==void 0)throw new TypeError("'options' must be an object.");T=new Uint8Array(I,C,M)}}const E=(A.executionProviders||[]).map(I=>typeof I=="string"?I:I.name),$=await(async I=>{const C=I.length===0?o:I,M=[];for(const D of C){const R=a[D];if(R){if(R.initialized)return R.backend;if(R.aborted)continue;const N=!!R.initPromise;try{return N||(R.initPromise=R.backend.init()),await R.initPromise,R.initialized=!0,R.backend}catch(O){N||M.push({name:D,err:O}),R.aborted=!0}finally{delete R.initPromise}}}throw new Error(`no available backend found. ERR: ${M.map(D=>`[${D.name}] ${D.err}`).join(", ")}`)})(E),P=await $.createSessionHandler(T,A);return new c(P)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}const y=c},5716:(n,t,r)=>{t.R=void 0;const a=r(6027),o=r(1723);t.R=new class{async init(){}async createSessionHandler(s,l){const u=new a.Session(l);return await u.loadModel(s),new o.OnnxjsSessionHandler(u)}}},2818:(n,t,r)=>{t.c8=t.rX=void 0;const a=r(8453),o=r(5381),s=r(9544),l=r(6640);t.rX=()=>{if((typeof a.env.wasm.initTimeout!="number"||a.env.wasm.initTimeout<0)&&(a.env.wasm.initTimeout=0),typeof a.env.wasm.simd!="boolean"&&(a.env.wasm.simd=!0),typeof a.env.wasm.proxy!="boolean"&&(a.env.wasm.proxy=!1),typeof a.env.wasm.numThreads!="number"||!Number.isInteger(a.env.wasm.numThreads)||a.env.wasm.numThreads<=0){const u=typeof navigator>"u"?(0,o.cpus)().length:navigator.hardwareConcurrency;a.env.wasm.numThreads=Math.min(4,Math.ceil((u||1)/2))}},t.c8=new class{async init(){(0,t.rX)(),await(0,s.initWasm)()}async createSessionHandler(u,d){const v=new l.OnnxruntimeWebAssemblySessionHandler;return await v.loadModel(u,d),Promise.resolve(v)}}},1057:function(n,t,r){var a=this&&this.__createBinding||(Object.create?function(l,u,d,v){v===void 0&&(v=d);var g=Object.getOwnPropertyDescriptor(u,d);g&&!("get"in g?!u.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,v,g)}:function(l,u,d,v){v===void 0&&(v=d),l[v]=u[d]}),o=this&&this.__exportStar||function(l,u){for(var d in l)d==="default"||Object.prototype.hasOwnProperty.call(u,d)||a(u,l,d)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(8453),t);const s=r(8453);{const l=r(5716).R;(0,s.registerBackend)("webgl",l,-10)}{const l=r(2818).c8;(0,s.registerBackend)("cpu",l,10),(0,s.registerBackend)("wasm",l,10),(0,s.registerBackend)("xnnpack",l,9)}},4910:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAttributeWithCacheKey=void 0;class r{constructor(o){Object.assign(this,o)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(o=>`${this[o]}`).join(";")),this._cacheKey}}t.createAttributeWithCacheKey=a=>new r(a)},6874:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0;const a=r(1446),o=r(1287),s=r(9240),l=r(7273);var u=o.onnxruntime.experimental.fbs;class d{constructor(g){if(this._attributes=new Map,g!=null){for(const f of g)f instanceof a.onnx.AttributeProto?this._attributes.set(f.name,[d.getValue(f),d.getType(f)]):f instanceof u.Attribute&&this._attributes.set(f.name(),[d.getValue(f),d.getType(f)]);if(this._attributes.size<g.length)throw new Error("duplicated attribute names")}}set(g,f,c){this._attributes.set(g,[c,f])}delete(g){this._attributes.delete(g)}getFloat(g,f){return this.get(g,"float",f)}getInt(g,f){return this.get(g,"int",f)}getString(g,f){return this.get(g,"string",f)}getTensor(g,f){return this.get(g,"tensor",f)}getFloats(g,f){return this.get(g,"floats",f)}getInts(g,f){return this.get(g,"ints",f)}getStrings(g,f){return this.get(g,"strings",f)}getTensors(g,f){return this.get(g,"tensors",f)}get(g,f,c){const y=this._attributes.get(g);if(y===void 0){if(c!==void 0)return c;throw new Error(`required attribute not found: ${g}`)}if(y[1]!==f)throw new Error(`type mismatch: expected ${f} but got ${y[1]}`);return y[0]}static getType(g){const f=g instanceof a.onnx.AttributeProto?g.type:g.type();switch(f){case a.onnx.AttributeProto.AttributeType.FLOAT:return"float";case a.onnx.AttributeProto.AttributeType.INT:return"int";case a.onnx.AttributeProto.AttributeType.STRING:return"string";case a.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case a.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case a.onnx.AttributeProto.AttributeType.INTS:return"ints";case a.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case a.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${a.onnx.AttributeProto.AttributeType[f]}`)}}static getValue(g){const f=g instanceof a.onnx.AttributeProto?g.type:g.type();if(f===a.onnx.AttributeProto.AttributeType.GRAPH||f===a.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const c=this.getValueNoCheck(g);if(f===a.onnx.AttributeProto.AttributeType.INT&&l.LongUtil.isLong(c))return l.LongUtil.longToNumber(c);if(f===a.onnx.AttributeProto.AttributeType.INTS){const y=c,_=new Array(y.length);for(let b=0;b<y.length;b++){const S=y[b];_[b]=l.LongUtil.longToNumber(S)}return _}if(f===a.onnx.AttributeProto.AttributeType.TENSOR)return g instanceof a.onnx.AttributeProto?s.Tensor.fromProto(c):s.Tensor.fromOrtTensor(c);if(f===a.onnx.AttributeProto.AttributeType.TENSORS){if(g instanceof a.onnx.AttributeProto)return c.map(y=>s.Tensor.fromProto(y));if(g instanceof u.Attribute)return c.map(y=>s.Tensor.fromOrtTensor(y))}if(f===a.onnx.AttributeProto.AttributeType.STRING&&g instanceof a.onnx.AttributeProto){const y=c;return(0,l.decodeUtf8String)(y)}return f===a.onnx.AttributeProto.AttributeType.STRINGS&&g instanceof a.onnx.AttributeProto?c.map(l.decodeUtf8String):c}static getValueNoCheck(g){return g instanceof a.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(g):this.getValueNoCheckFromOrtFormat(g)}static getValueNoCheckFromOnnxFormat(g){switch(g.type){case a.onnx.AttributeProto.AttributeType.FLOAT:return g.f;case a.onnx.AttributeProto.AttributeType.INT:return g.i;case a.onnx.AttributeProto.AttributeType.STRING:return g.s;case a.onnx.AttributeProto.AttributeType.TENSOR:return g.t;case a.onnx.AttributeProto.AttributeType.GRAPH:return g.g;case a.onnx.AttributeProto.AttributeType.FLOATS:return g.floats;case a.onnx.AttributeProto.AttributeType.INTS:return g.ints;case a.onnx.AttributeProto.AttributeType.STRINGS:return g.strings;case a.onnx.AttributeProto.AttributeType.TENSORS:return g.tensors;case a.onnx.AttributeProto.AttributeType.GRAPHS:return g.graphs;default:throw new Error(`unsupported attribute type: ${a.onnx.AttributeProto.AttributeType[g.type]}`)}}static getValueNoCheckFromOrtFormat(g){switch(g.type()){case u.AttributeType.FLOAT:return g.f();case u.AttributeType.INT:return g.i();case u.AttributeType.STRING:return g.s();case u.AttributeType.TENSOR:return g.t();case u.AttributeType.GRAPH:return g.g();case u.AttributeType.FLOATS:return g.floatsArray();case u.AttributeType.INTS:{const f=[];for(let c=0;c<g.intsLength();c++)f.push(g.ints(c));return f}case u.AttributeType.STRINGS:{const f=[];for(let c=0;c<g.stringsLength();c++)f.push(g.strings(c));return f}case u.AttributeType.TENSORS:{const f=[];for(let c=0;c<g.tensorsLength();c++)f.push(g.tensors(c));return f}default:throw new Error(`unsupported attribute type: ${u.AttributeType[g.type()]}`)}}}t.Attribute=d},1975:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resolveBackend=t.backend=void 0;const a=r(4418),o=new Map;async function s(l){const u=t.backend;if(u[l]!==void 0&&function(d){const v=d;return"initialize"in v&&typeof v.initialize=="function"&&"createSessionHandler"in v&&typeof v.createSessionHandler=="function"&&"dispose"in v&&typeof v.dispose=="function"}(u[l])){const d=u[l];let v=d.initialize();if(typeof v=="object"&&"then"in v&&(v=await v),v)return o.set(l,d),d}}t.backend={webgl:new a.WebGLBackend},t.resolveBackend=async function l(u){if(!u)return l(["webgl"]);{const d=typeof u=="string"?[u]:u;for(const v of d){const g=o.get(v);if(g)return g;const f=await s(v);if(f)return f}}throw new Error("no available backend to use")}},4418:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLBackend=void 0;const a=r(8453),o=r(1315),s=r(2171),l=r(3389);t.WebGLBackend=class{get contextId(){return a.env.webgl.contextId}set contextId(u){a.env.webgl.contextId=u}get matmulMaxBatchSize(){return a.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(u){a.env.webgl.matmulMaxBatchSize=u}get textureCacheMode(){return a.env.webgl.textureCacheMode}set textureCacheMode(u){a.env.webgl.textureCacheMode=u}get pack(){return a.env.webgl.pack}set pack(u){a.env.webgl.pack=u}get async(){return a.env.webgl.async}set async(u){a.env.webgl.async=u}initialize(){try{return this.glContext=(0,l.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),o.Logger.setWithEnv(a.env),o.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(u){return o.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${u}`),!1}}createSessionHandler(u){return new s.WebGLSessionHandler(this,u)}dispose(){this.glContext.dispose()}}},6859:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoordsGlslLib=void 0;const a=r(7273),o=r(1997),s=r(6757),l=r(7618),u=r(432);class d extends o.GlslLib{constructor(g){super(g)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new o.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new o.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const g=this.context.outputTextureLayout;return g.isPacked?this.getPackedOutputSamplingSnippet(g):this.getUnpackedOutputSamplingSnippet(g)}getPackedOutputSamplingSnippet(g){const f=g.unpackedShape,c=[g.width,g.height],y={},_="getOutputCoords";switch(f.length){case 0:y[_]=this.getOutputScalarCoords();break;case 1:y[_]=this.getOutputPacked1DCoords(f,c);break;case 2:y[_]=this.getOutputPacked2DCoords(f,c);break;case 3:y[_]=this.getOutputPacked3DCoords(f,c);break;default:y[_]=this.getOutputPackedNDCoords(f,c)}const b=`
      void setOutput(vec4 val) {
        ${(0,s.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return y.floatTextureSetRGBA=new o.GlslLibRoutine(b),y}getUnpackedOutputSamplingSnippet(g){const f=g.unpackedShape,c=[g.width,g.height],y={},_="getOutputCoords";switch(f.length){case 0:y[_]=this.getOutputScalarCoords();break;case 1:y[_]=this.getOutputUnpacked1DCoords(f,c);break;case 2:y[_]=this.getOutputUnpacked2DCoords(f,c);break;case 3:y[_]=this.getOutputUnpacked3DCoords(f,c);break;case 4:y[_]=this.getOutputUnpacked4DCoords(f,c);break;case 5:y[_]=this.getOutputUnpacked5DCoords(f,c);break;case 6:y[_]=this.getOutputUnpacked6DCoords(f,c);break;default:throw new Error(`Unsupported output dimensionality: ${f.length}`)}const b=`
        void setOutput(float val) {
          ${(0,s.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return y.floatTextureSetR=new o.GlslLibRoutine(b),y}getOutputScalarCoords(){return new o.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(g,f){const c=f;let y="";return c[0]===1?(y=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${c[1]}.0);
          }
        `,new o.GlslLibRoutine(y)):c[1]===1?(y=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${c[0]}.0);
          }
        `,new o.GlslLibRoutine(y)):(y=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${c[0]}, ${c[1]}));
          return 2 * (resTexRC.y * ${c[0]} + resTexRC.x);
        }
      `,new o.GlslLibRoutine(y))}getOutputPacked2DCoords(g,f){let c="";if(a.ArrayUtil.arraysEqual(g,f))return c=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${f[0]}, ${f[1]}));
        }
      `,new o.GlslLibRoutine(c);const y=f,_=Math.ceil(g[1]/2);return c=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${y[0]}, ${y[1]}));

          int index = resTexRC.y * ${y[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${_}) * 2;
          int c = 2 * (index / ${_});

          return ivec2(r, c);
        }
      `,new o.GlslLibRoutine(c)}getOutputPacked3DCoords(g,f){const c=[f[0],f[1]],y=Math.ceil(g[2]/2),_=y*Math.ceil(g[1]/2),b=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${c[0]}, ${c[1]}));
          int index = resTexRC.y * ${c[0]} + resTexRC.x;

          int b = index / ${_};
          index -= b * ${_};

          // reverse r and c order for packed texture
          int r = imod(index, ${y}) * 2;
          int c = 2 * (index / ${y});

          return ivec3(b, r, c);
        }
      `;return new o.GlslLibRoutine(b)}getOutputPackedNDCoords(g,f){const c=[f[0],f[1]],y=Math.ceil(g[g.length-1]/2),_=y*Math.ceil(g[g.length-2]/2);let b=_,S="",x="b, r, c";for(let T=2;T<g.length-1;T++)b*=g[g.length-T-1],S=`
      int b${T} = index / ${b};
      index -= b${T} * ${b};
    `+S,x=`b${T}, `+x;const w=`
      ivec${g.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${c[0]}, ${c[1]}));
        int index = resTexRC.y * ${c[0]} + resTexRC.x;

        ${S}

        int b = index / ${_};
        index -= b * ${_};

        // reverse r and c order for packed texture
        int r = imod(index, ${y}) * 2;
        int c = 2 * (index / ${y});

        return ivec${g.length}(${x});
      }
    `;return new o.GlslLibRoutine(w)}getOutputUnpacked1DCoords(g,f){const c=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          return resTexRC.y * ${f[0]} + resTexRC.x;
        }
      `;return new o.GlslLibRoutine(c)}getOutputUnpacked2DCoords(g,f){const c=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          int index = resTexRC.y * ${f[0]} + resTexRC.x;
          int r = index / ${g[1]};
          int c = index - r * ${g[1]};
          return ivec2(r, c);
        }
      `;return new o.GlslLibRoutine(c)}getOutputUnpacked3DCoords(g,f){let c="";const y=g.length;let _=null;y<2&&(_=[]),_=new Array(y-1),_[y-2]=g[y-1];for(let x=y-3;x>=0;--x)_[x]=_[x+1]*g[x+1];const b=["r","c","d"],S=_.map((x,w)=>`int ${b[w]} = index / ${x}; ${w===_.length-1?`int ${b[w+1]} = index - ${b[w]} * ${x}`:`index -= ${b[w]} * ${x}`};`).join("");return c=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          int index = resTexRC.y * ${f[0]} + resTexRC.x;
          ${S}
          return ivec3(r, c, d);
        }
      `,new o.GlslLibRoutine(c)}getOutputUnpacked4DCoords(g,f){let c="";const y=g.length;let _=null;y<2&&(_=[]),_=new Array(y-1),_[y-2]=g[y-1];for(let x=y-3;x>=0;--x)_[x]=_[x+1]*g[x+1];const b=["r","c","d","d2"],S=_.map((x,w)=>`int ${b[w]} = index / ${x}; ${w===_.length-1?`int ${b[w+1]} = index - ${b[w]} * ${x}`:`index -= ${b[w]} * ${x}`};`).join("");return c=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          int index = resTexRC.y * ${f[0]} + resTexRC.x;
          ${S}
          return ivec4(r, c, d, d2);
        }
      `,new o.GlslLibRoutine(c)}getOutputUnpacked5DCoords(g,f){let c="";const y=g.length;let _=null;y<2&&(_=[]),_=new Array(y-1),_[y-2]=g[y-1];for(let x=y-3;x>=0;--x)_[x]=_[x+1]*g[x+1];const b=["r","c","d","d2","d3"],S=_.map((x,w)=>`int ${b[w]} = index / ${x}; ${w===_.length-1?`int ${b[w+1]} = index - ${b[w]} * ${x}`:`index -= ${b[w]} * ${x}`};`).join("");return c=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          int index = resTexRC.y * ${f[0]} + resTexRC.x;
          ${S}
          return ivec5(r, c, d, d2, d3);
        }
      `,new o.GlslLibRoutine(c)}getOutputUnpacked6DCoords(g,f){let c="";const y=g.length;let _=null;y<2&&(_=[]),_=new Array(y-1),_[y-2]=g[y-1];for(let x=y-3;x>=0;--x)_[x]=_[x+1]*g[x+1];const b=["r","c","d","d2","d3","d4"],S=_.map((x,w)=>`int ${b[w]} = index / ${x}; ${w===_.length-1?`int ${b[w+1]} = index - ${b[w]} * ${x}`:`index -= ${b[w]} * ${x}`};`).join("");return c=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${f[0]}, ${f[1]}));
         int index = resTexRC.y * ${f[0]} + resTexRC.x;
         ${S}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new o.GlslLibRoutine(c)}getCommonUtilFuncs(){const g={};let f="uvFromFlat";g[f]=new o.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),f="packedUVfrom1D",g[f]=new o.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),f="packedUVfrom2D",g[f]=new o.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),f="packedUVfrom3D",g[f]=new o.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),f="sampleTexture";const c=(0,s.getGlsl)(this.context.glContext.version);return g[f]=new o.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${c.texture2D}(textureSampler, uv).r;
        }`),g}getInputsSamplingSnippets(){const g={},f=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((c,y)=>{const _=this.context.inputTextureLayouts[y],b=(0,u.generateShaderFuncNameFromInputSamplerName)(c);_.isPacked?g[b]=this.getPackedSamplerFromInput(b,c,_):g[b]=this.getUnpackedSamplerFromInput(b,c,_);const S=(0,u.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(c);_.unpackedShape.length<=f.unpackedShape.length&&(_.isPacked?g[S]=this.getPackedSamplerAtOutputCoords(S,_,f,c):g[S]=this.getUnpackedSamplerAtOutputCoords(S,_,f,c))}),g}getPackedSamplerAtOutputCoords(g,f,c,y){const _=f.unpackedShape,b=c.unpackedShape,S=y,x=(0,u.generateShaderFuncNameFromInputSamplerName)(S),w=_.length,T=b.length,A=a.BroadcastUtil.getBroadcastDims(_,b),E=(0,u.getCoordsDataType)(T),$=T-w;let P;const I=(0,u.getGlChannels)();P=w===0?"":T<2&&A.length>=1?"coords = 0;":A.map(O=>`coords.${I[O+$]} = 0;`).join(`
`);let C="";C=T<2&&w>0?"coords":_.map((O,F)=>`coords.${I[F+$]}`).join(", ");let M="return outputValue;";const D=a.ShapeUtil.size(_)===1,R=a.ShapeUtil.size(b)===1;if(w!==1||D||R){if(D&&!R)M=T===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(A.length){const O=w-2,F=w-1;A.indexOf(O)>-1&&A.indexOf(F)>-1?M="return vec4(outputValue.x);":A.indexOf(O)>-1?M="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":A.indexOf(F)>-1&&(M="return vec4(outputValue.xx, outputValue.zz);")}}else M=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const N=`
      vec4 ${g}() {
        ${E} coords = getOutputCoords();
        
        int lastDim = coords.${I[T-1]};
        coords.${I[T-1]} = coords.${I[T-2]};
        coords.${I[T-2]} = lastDim;
      
        ${P}
        vec4 outputValue = ${x}(${C});
        ${M}
      }
    `;return new o.GlslLibRoutine(N,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(g,f,c,y){const _=[c.width,c.height],b=[f.width,f.height],S=f.unpackedShape.length,x=c.unpackedShape.length,w=f.unpackedShape,T=c.unpackedShape,A=(0,u.generateShaderFuncNameFromInputSamplerName)(y);if(S===x&&a.ArrayUtil.arraysEqual(b,_)){const R=`
          float ${g}() {
            return sampleTexture(${y}, TexCoords);
          }
        `;return new o.GlslLibRoutine(R,["coordinates.sampleTexture"])}const E=(0,u.getCoordsDataType)(x),$=a.BroadcastUtil.getBroadcastDims(w,T),P=x-S;let I;const C=(0,u.getGlChannels)();I=S===0?"":x<2&&$.length>=1?"coords = 0;":$.map(R=>`coords.${C[R+P]} = 0;`).join(`
`);let M="";M=x<2&&S>0?"coords":f.unpackedShape.map((R,N)=>`coords.${C[N+P]}`).join(", ");const D=`
        float ${g}() {
          ${E} coords = getOutputCoords();
          ${I}
          return ${A}(${M});
        }
      `;return new o.GlslLibRoutine(D,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(g,f,c){switch(c.unpackedShape.length){case 0:return this.getPackedSamplerScalar(g,f);case 1:return this.getPackedSampler1D(g,f,c);case 2:return this.getPackedSampler2D(g,f,c);case 3:return this.getPackedSampler3D(g,f,c);default:return this.getPackedSamplerND(g,f,c)}}getUnpackedSamplerFromInput(g,f,c){const y=c.unpackedShape;switch(y.length){case 0:return this.getUnpackedSamplerScalar(g,f,c);case 1:return this.getUnpackedSampler1D(g,f,c);case 2:return this.getUnpackedSampler2D(g,f,c);case 3:return this.getUnpackedSampler3D(g,f,c);case 4:return this.getUnpackedSampler4D(g,f,c);case 5:return this.getUnpackedSampler5D(g,f,c);case 6:return this.getUnpackedSampler6D(g,f,c);default:throw new Error(`Unsupported dimension ${y.length}-D`)}}getPackedSamplerScalar(g,f){const c=`
          vec4 ${g}() {
            return ${(0,s.getGlsl)(this.context.glContext.version).texture2D}(${f}, halfCR);
          }
        `;return new o.GlslLibRoutine(c)}getPackedSampler1D(g,f,c){const y=[c.width,c.height],_=[y[1],y[0]],b=(0,s.getGlsl)(this.context.glContext.version),S=`vec4 ${g}(int index) {
      vec2 uv = packedUVfrom1D(
      ${_[0]}, ${_[1]}, index);
      return ${b.texture2D}(${f}, uv);
    }`;return new o.GlslLibRoutine(S,["coordinates.packedUVfrom1D"])}getPackedSampler2D(g,f,c){const y=c.unpackedShape,_=[c.width,c.height],b=(0,s.getGlsl)(this.context.glContext.version),S=_[0],x=_[1];if(_!=null&&a.ArrayUtil.arraysEqual(y,_)){const E=`vec4 ${g}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${x}.0, ${S}.0);
        return ${b.texture2D}(${f}, uv);
      }`;return new o.GlslLibRoutine(E)}const w=_,T=Math.ceil(y[1]/2),A=`vec4 ${g}(int row, int col) {
      vec2 uv = packedUVfrom2D(${w[1]}, ${w[0]}, ${T}, row, col);
      return ${b.texture2D}(${f}, uv);
    }`;return new o.GlslLibRoutine(A,["coordinates.packedUVfrom2D"])}getPackedSampler3D(g,f,c){const y=c.unpackedShape,_=[c.width,c.height],b=[_[0],_[1]],S=(0,s.getGlsl)(this.context.glContext.version);if(y[0]===1){const E=y.slice(1),$=[1,2],P=(0,u.squeezeInputShape)(y,E),I=["b","row","col"],C=JSON.parse(JSON.stringify(c));C.unpackedShape=P;const M=this.getPackedSamplerFromInput(g,f,C),D=`${M.routineBody}
      vec4 ${g}(int b, int row, int col) {
        return ${g}(${(0,u.getSqueezedParams)(I,$)});
      } `;return new o.GlslLibRoutine(D,M.dependencies)}const x=b[0],w=b[1],T=Math.ceil(y[2]/2),A=`vec4 ${g}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${w}, ${x}, ${T*Math.ceil(y[1]/2)}, ${T}, b, row, col);
      return ${S.texture2D}(${f}, uv);}`;return new o.GlslLibRoutine(A,["coordinates.packedUVfrom3D"])}getPackedSamplerND(g,f,c){const y=c.unpackedShape,_=y.length,b=[c.width,c.height],S=(0,s.getGlsl)(this.context.glContext.version),x=[b[0],b[1]],w=x[1],T=x[0],A=Math.ceil(y[_-1]/2);let E=A*Math.ceil(y[_-2]/2),$="int b, int row, int col",P=`b * ${E} + (row / 2) * ${A} + (col / 2)`;for(let C=2;C<_-1;C++)$=`int b${C}, `+$,E*=y[_-C-1],P=`b${C} * ${E} + `+P;const I=`vec4 ${g}(${$}) {
      int index = ${P};
      int texR = index / ${T};
      int texC = index - texR * ${T};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${T}, ${w});
      return ${S.texture2D}(${f}, uv);
    }`;return new o.GlslLibRoutine(I)}getUnpackedSamplerScalar(g,f,c){const[y,_]=[c.width,c.height];if(y===1&&_===1){const S=`
          float ${g}() {
            return sampleTexture(${f}, halfCR);
          }
        `;return new o.GlslLibRoutine(S,["coordinates.sampleTexture"])}const b=`
        float ${g}() {
          int offset_${f} = coordsToOffset(TexCoords, ${y}, ${_});
          vec2 uv = uvFromFlat(${y}, ${_}, offset_${f});
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(b,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(g,f,c){const y=c.width,_=c.height;if(_===1&&y===1){const S=`
        float ${g}(int index) {
          return sampleTexture(${f}, halfCR);
        }
      `;return new o.GlslLibRoutine(S,["coordinates.sampleTexture"])}if(_===1){const S=`
          float ${g}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${y}.0, 0.5);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(S,["coordinates.sampleTexture"])}if(y===1){const S=`
          float ${g}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${_}.0);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(S,["coordinates.sampleTexture"])}const b=`
        float ${g}(int index) {
          vec2 uv = uvFromFlat(${y}, ${_}, index);
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(b,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(g,f,c){const y=c.unpackedShape,_=[c.height,c.width];if(_!=null&&a.ArrayUtil.arraysEqual(y,_)){const E=`
          float ${g}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${_[1]}.0, ${_[0]}.0);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(E,["coordinates.sampleTexture"])}const{newShape:b,keptDims:S}=(0,l.squeezeShape)(y),x=b;if(x.length<y.length){const E=(0,u.squeezeInputShape)(y,x),$=JSON.parse(JSON.stringify(c));$.unpackedShape=E;const P=["col","row"],I=`
          ${this.getUnpackedSamplerFromInput(g,f,$).routineBody}
          float ${g}(int row, int col) {
            return ${g}(${(0,u.getSqueezedParams)(P,S)});
          }
        `;return new o.GlslLibRoutine(I,["coordinates.sampleTexture"])}const w=_[1],T=_[0];if(T===1){const E=`
          float ${g}(int row, int col) {
            int offset_${f} = coordsToOffset(TexCoords, ${w}, ${T});
            float index = dot(vec3(row, col, offset_${f}), vec3(${y[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${w}.0);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(E,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(w===1){const E=`
          float ${g}(int row, int col) {
            int offset_${f} = coordsToOffset(TexCoords, ${w}, ${T});
            float index = dot(vec3(row, col, offset_${f}), vec3(${y[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${T}.0, 0.5);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(E,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const A=`
        float ${g}(int row, int col) {
          int index = col * ${y[1]} + row;
          vec2 uv = uvFromFlat(${w}, ${T}, index);
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(A,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(g,f,c){const y=c.unpackedShape,_=y[1]*y[2],b=y[2],{newShape:S,keptDims:x}=(0,l.squeezeShape)(y),w=S;if(w.length<y.length){const A=(0,u.squeezeInputShape)(y,w),E=["batch","col","row"],$=JSON.parse(JSON.stringify(c));$.unpackedShape=A;const P=this.getUnpackedSamplerFromInput(g,f,$),I=x.reverse(),C=`
          ${P.routineBody}
          float ${g}(int batch, int row, int col) {
            return ${g}(${(0,u.getSqueezedParams)(E,I)});
          }
        `;return new o.GlslLibRoutine(C,P.dependencies)}const T=`
          float ${g}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${_} + col * ${b} + row;
            vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);
            return sampleTexture(${f}, uv);
          }
      `;return new o.GlslLibRoutine(T,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(g,f,c){const y=c.unpackedShape,_=y[3],b=y[2]*_,S=`
        float ${g}(int row, int col, int depth, int depth2) {
          int index = row * ${y[1]*b} + col * ${b} +
              depth2 * ${_} + depth;
          vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(S,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(g,f,c){const y=c.unpackedShape,_=y[4],b=y[3]*_,S=y[2]*b,x=y[1]*S,{newShape:w,keptDims:T}=(0,l.squeezeShape)(y);if(w.length<y.length){const E=(0,u.squeezeInputShape)(y,w),$=["row","col","depth","depth2","depth3"],P=JSON.parse(JSON.stringify(c));P.unpackedShape=E;const I=`
          ${this.getUnpackedSamplerFromInput(g,f,P).routineBody}
          float ${g}(int row, int col, int depth, int depth2, int depth3) {
            return ${g}(${(0,u.getSqueezedParams)($,T)});
          }
        `;return new o.GlslLibRoutine(I,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const A=`
        float ${g}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${x} + col * ${S} + depth * ${b} +
          depth3 * ${_} + depth2;
          vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(A,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(g,f,c){const y=c.unpackedShape,_=y[5],b=y[4]*_,S=y[3]*b,x=y[2]*S,w=y[1]*x,{newShape:T,keptDims:A}=(0,l.squeezeShape)(y);if(T.length<y.length){const $=(0,u.squeezeInputShape)(y,T),P=["row","col","depth","depth2","depth3","depth4"],I=JSON.parse(JSON.stringify(c));I.unpackedShape=$;const C=`
            ${this.getUnpackedSamplerFromInput(g,f,I).routineBody}
            float ${g}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${g}(${(0,u.getSqueezedParams)(P,A)});
            }
          `;return new o.GlslLibRoutine(C,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const E=`
          float ${g}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${w} + col * ${x} + depth * ${S} +
            depth2 * ${b} + depth3 * ${_} + depth4;
            vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(E,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const g=this.context.outputTextureLayout,f=g.shape.length,c=g.strides,y=g.width,_=g.height,b=[];for(let x=0;x<f-1;++x)b.push(`
        c[${x}] = offset / ${c[x]};`),b.push(`
        offset -= c[${x}] * ${c[x]};`);b.push(`
        c[${f-1}] = offset;`);const S=`
      void toVec(vec2 texCoords, out int c[${f}]) {
        int offset = coordsToOffset(texCoords, ${y}, ${_});
        ${b.join("")}
      }
      void toVec(int offset, out int c[${f}]) {
        ${b.join("")}
      }
    `;return{toVec:new o.GlslLibRoutine(S,["coordinates.coordsToOffset"])}}valueFrom(){const g={};return this.context.programInfo.inputNames.forEach((f,c)=>{const y=this.context.inputTextureLayouts[c],_=(y.unpackedShape.length>0?y.unpackedShape:y.shape).length;let b=`_${f}`;g[b]=new o.GlslLibRoutine(this.getValueFromSingle(f,_,y.width,y.height,!1),[`shapeUtils.indicesToOffset${b}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),b+="_T",g[b]=new o.GlslLibRoutine(this.getValueFromSingle(f,_,y.width,y.height,!0),[`shapeUtils.indicesToOffset${b}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),g}getValueFromSingle(g,f,c,y,_){let b=`_${g}`;return _&&(b+="_T"),`
        float ${b}(int m[${f}]) {
          int offset = indicesToOffset${b}(m);
          vec2 coords = offsetToCoords(offset, ${c}, ${y});
          float value = getColorAsFloat(${(0,s.getGlsl)(this.context.glContext.version).texture2D}(${g}, coords));
          return value;
        }
        `}getPackedValueFrom(g,f,c,y,_){let b=`_${g}_Pack`;return _&&(b+="_T"),`
        vec4 ${b}(int m[${f}]) {
          int offset = indicesToOffset_${g}(m);
          vec2 coords = offsetToCoords(offset, ${c}, ${y});
          return ${(0,s.getGlsl)(this.context.glContext.version).texture2D}(${g}, coords);
        }
        `}}t.CoordsGlslLib=d},1997:(n,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TopologicalSortGlslRoutines=t.GlslLibRoutineNode=t.GlslLibRoutine=t.GlslLib=t.GlslContext=t.FunctionType=void 0,(r=t.FunctionType||(t.FunctionType={}))[r.ValueBased=0]="ValueBased",r[r.Positional=1]="Positional",t.GlslContext=class{constructor(a,o,s,l){this.glContext=a,this.programInfo=o,this.inputTextureLayouts=s,this.outputTextureLayout=l}},t.GlslLib=class{constructor(a){this.context=a}},t.GlslLibRoutine=class{constructor(a,o){this.routineBody=a,this.dependencies=o}},t.GlslLibRoutineNode=class{constructor(a,o,s){this.name=a,this.dependencies=s||[],o&&(this.routineBody=o)}addDependency(a){a&&this.dependencies.push(a)}},t.TopologicalSortGlslRoutines=class{static returnOrderedNodes(a){if(!a||a.length===0)return[];if(a.length===1)return a;const o=new Set,s=new Set,l=new Array;return this.createOrderedNodes(a,o,s,l),l}static createOrderedNodes(a,o,s,l){for(let u=0;u<a.length;++u)this.dfsTraverse(a[u],o,s,l)}static dfsTraverse(a,o,s,l){if(!a||s.has(a.name))return;if(o.has(a.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");o.add(a.name);const u=a.dependencies;if(u&&u.length>0)for(let d=0;d<u.length;++d)this.dfsTraverse(u[d],o,s,l);l.push(a),s.add(a.name),o.delete(a.name)}}},1371:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncodingGlslLib=void 0;const a=r(1997);class o extends a.GlslLib{constructor(l){super(l)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new a.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new a.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const l=o.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new a.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${l}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const l=o.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new a.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${l}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const l=new ArrayBuffer(4),u=new Uint32Array(l),d=new Uint8Array(l);if(u[0]=3735928559,d[0]===239)return!0;if(d[0]===222)return!1;throw new Error("unknown endianness")}}t.EncodingGlslLib=o},2691:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FragColorGlslLib=void 0;const a=r(1997),o=r(6757);class s extends a.GlslLib{constructor(u){super(u)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const u=(0,o.getGlsl)(this.context.glContext.version);return{setFragColor:new a.GlslLibRoutine(`
        void setFragColor(float value) {
            ${u.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new a.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}t.FragColorGlslLib=s},3878:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.replaceInlines=void 0;const r=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;t.replaceInlines=function(a){const o={};let s;for(;(s=r.exec(a))!==null;){const l=s[3].split(",").map(u=>{const d=u.trim().split(" ");return d&&d.length===2?{type:d[0],name:d[1]}:null}).filter(u=>u!==null);o[s[2]]={params:l,body:s[4]}}for(const l in o){const u="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",l),d=new RegExp(u,"gm");for(;(s=d.exec(a))!==null;){const v=s[1],g=s[2],f=s[3].split(","),c=v?`${v} ${g};`:"";let y=o[l].body,_="";o[l].params.forEach((S,x)=>{S&&(_+=`${S.type} ${S.name} = ${f[x]};
`)}),y=`${_}
 ${y}`,y=y.replace("return",`${g} = `);const b=`
      ${c}
      {
        ${y}
      }
      `;a=a.replace(s[0],b)}}return a.replace(r,"")}},8897:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlslPreprocessor=void 0;const a=r(1997),o=r(3878),s=r(1248),l=r(6757);t.GlslPreprocessor=class{constructor(u,d,v,g){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new a.GlslContext(u,d,v,g),Object.keys(s.glslRegistry).forEach(c=>{const y=new s.glslRegistry[c](this.context);this.libs[c]=y});const f=this.glslLibRoutineDependencyGraph;for(const c in this.libs){const y=this.libs[c].getFunctions();for(const _ in y){const b=c+"."+_;let S;f[b]?(S=f[b],S.routineBody=y[_].routineBody):(S=new a.GlslLibRoutineNode(b,y[_].routineBody),f[b]=S);const x=y[_].dependencies;if(x)for(let w=0;w<x.length;++w)if(f[x[w]])S.addDependency(f[x[w]]);else{const T=new a.GlslLibRoutineNode(x[w]);f[x[w]]=T,S.addDependency(T)}}}}preprocess(){const u=this.context.programInfo;let d=u.shaderSource;return this.context.programInfo.hasMain||(d=`${d}
      ${(0,l.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),d=(0,o.replaceInlines)(d),`${(0,l.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(u.inputNames,u.variables)}
    ${this.getImports(d)}
    ${d}`}getImports(u){const d=this.selectGlslLibRoutinesToBeIncluded(u);if(d.length===0)return"";let v="";for(let g=0;g<d.length;++g){if(!d[g].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${d[g].name}`);v+=d[g].routineBody+`
`}return v}selectGlslLibRoutinesToBeIncluded(u){const d=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(v=>{const g=v.split(".")[1];u.indexOf(g)!==-1&&d.push(this.glslLibRoutineDependencyGraph[v])}),a.TopologicalSortGlslRoutines.returnOrderedNodes(d)}getUniforms(u,d){const v=[];if(u)for(const g of u)v.push(`uniform sampler2D ${g};`);if(d)for(const g of d)v.push(`uniform ${g.type} ${g.name}${g.arrayLength?`[${g.arrayLength}]`:""};`);return v.join(`
`)}}},1248:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.glslRegistry=void 0;const a=r(6859),o=r(1371),s=r(2691),l=r(9183),u=r(9314);t.glslRegistry={encoding:o.EncodingGlslLib,fragcolor:s.FragColorGlslLib,vec:u.VecGlslLib,shapeUtils:l.ShapeUtilsGlslLib,coordinates:a.CoordsGlslLib}},9183:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeUtilsGlslLib=void 0;const a=r(1997);class o extends a.GlslLib{constructor(l){super(l)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const l=this.context.outputTextureLayout.shape.length,u={};return this.context.programInfo.inputNames.forEach((d,v)=>{const g=this.context.inputTextureLayouts[v].unpackedShape;if(g.length<=l){const f=g.length,c=l-f,y=`bcastIndices_${d}`;let _="";for(let S=0;S<f;++S)_+=`
          realIndices[${S}] = int( mod(float(bcastedIndices[${c+S}]), ${g[S]}.0) );
          `;const b=`
        void ${y} (int bcastedIndices[${l}], out int realIndices[${f}]) {
          ${_}
        }
        `;u[y]=new a.GlslLibRoutine(b)}}),u}bcastMatmulIndex(){const l=this.context.outputTextureLayout.shape.length,u={};return this.context.programInfo.inputNames.forEach((d,v)=>{const g=this.context.inputTextureLayouts[v].shape;if(!(g.length<2||g.length>l)){const f=g.length,c=l-f,y=`bcastMatmulIndices_${d}`;let _="";for(let S=0;S<f-2;++S)_+=`
          realIndices[${S}] = int( mod(float(bcastedIndices[${c+S}]), ${g[S]}.0) );
          `;const b=`
        void ${y}(int bcastedIndices[${l}], out int realIndices[${f}]) {
          ${_}
          realIndices[${f-1}] = bcastedIndices[${l-1}];
          realIndices[${f-2}] = bcastedIndices[${l-2}];
        }
        `;u[y]=new a.GlslLibRoutine(b)}}),u}indicesToOffset(){const l={};return this.context.programInfo.inputNames.forEach((u,d)=>{const v=this.context.inputTextureLayouts[d].shape,g=this.context.inputTextureLayouts[d].strides,f=v.length;let c=`indicesToOffset_${u}`;l[c]=new a.GlslLibRoutine(o.indexToOffsetSingle(c,f,g)),c=`indicesToOffset_${u}_T`,l[c]=new a.GlslLibRoutine(o.indexToOffsetSingle(c,f,g.slice().reverse()))}),l}static indexToOffsetSingle(l,u,d){let v="";for(let g=u-1;g>=0;--g)v+=`
        offset += indices[${g}] * ${d[g]};
        `;return`
      int ${l}(int indices[${u}]) {
        int offset = 0;
        ${v}
        return offset;
      }
      `}offsetToIndices(){const l={};return this.context.programInfo.inputNames.forEach((u,d)=>{const v=this.context.inputTextureLayouts[d].shape,g=this.context.inputTextureLayouts[d].strides,f=v.length;let c=`offsetToIndices_${u}`;l[c]=new a.GlslLibRoutine(o.offsetToIndicesSingle(c,f,g)),c=`offsetToIndices_${u}_T`,l[c]=new a.GlslLibRoutine(o.offsetToIndicesSingle(c,f,g.slice().reverse()))}),l}static offsetToIndicesSingle(l,u,d){const v=[];for(let g=0;g<u-1;++g)v.push(`
      indices[${g}] = offset / ${d[g]};`),v.push(`
        offset -= indices[${g}] * ${d[g]};`);return v.push(`
      indices[${u-1}] = offset;`),`
      void ${l}(int offset, out int indices[${u}]) {
        ${v.join("")}
      }
      `}incrementIndices(){const l={};return this.context.programInfo.inputNames.forEach((u,d)=>{const v=this.context.inputTextureLayouts[d].shape,g=v.length,f=`incrementIndices_${u}`;let c="";for(let _=0;_<g;++_)c+=`
        shape[${_}] = ${v[_]};`;const y=`
        void ${f}(int axis, out int indices[${g}]) {
          int shape[${g}];
          ${c};
          for(int i = ${g} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;l[f]=new a.GlslLibRoutine(y)}),l}}t.ShapeUtilsGlslLib=o},6757:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFragShaderMain=t.getFragShaderPreamble=t.getVertexShaderSource=t.getGlsl=void 0;const r={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},a={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function o(s){return s===1?r:a}t.getGlsl=o,t.getVertexShaderSource=function(s){const l=o(s);return`${l.version}
      precision highp float;
      ${l.attribute} vec3 position;
      ${l.attribute} vec2 textureCoord;

      ${l.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},t.getFragShaderPreamble=function(s){const l=o(s);return`${l.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${l.varyingFrag} vec2 TexCoords;
    ${l.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},t.getDefaultFragShaderMain=function(s,l){return`
  void main() {
    int indices[${l}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${o(s).output} = result;
  }
  `}},9314:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VecGlslLib=void 0;const a=r(1997);class o extends a.GlslLib{constructor(l){super(l)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const l=this.context.outputTextureLayout.shape.length,u={add:"+=",sub:"-=",mul:"*=",div:"/="},d={};for(const v in u){const g=`${v}Vec`;let f="";for(let y=0;y<l;++y)f+=`
          dest[${y}] ${u[v]} src[${y}];
          `;const c=`
        void ${g}(int src[${l}], out int dest[${l}]) {
          ${f}
        }
        `;d[g]=new a.GlslLibRoutine(c)}return d}copyVec(){const l=this.context.outputTextureLayout.shape.length;let u="";for(let v=0;v<l;++v)u+=`
        dest[${v}] = src[${v}];
        `;const d=`
      void copyVec(int src[${l}], out int dest[${l}]) {
        ${u}
      }
      `;return{copyVec:new a.GlslLibRoutine(d)}}setVecItem(){const l=this.context.outputTextureLayout.shape.length;let u=`
        if(index < 0)
            index =${l} + index;
        if (index == 0)
            m[0] = value;
        `;for(let v=1;v<l-1;++v)u+=`
        else if (index == ${v})
            m[${v}] = value;
            `;u+=`
        else
            m[${l-1}] = value;
        `;const d=`
      void setVecItem(out int m[${l}], int index, int value) {
        ${u}
      }
        `;return{setVecItem:new a.GlslLibRoutine(d)}}getVecItem(){const l=this.context.outputTextureLayout.shape.length;let u=`
        if(index < 0)
            index = ${l} + index;
        if (index == 0)
            return m[0];
      `;for(let v=1;v<l-1;++v)u+=`
        else if (index == ${v})
            return m[${v}];
      `;u+=`
        else
            return m[${l-1}];
        `;const d=`
      int getVecItem(int m[${l}], int index) {
        ${u}
      }
    `;return{getVecItem:new a.GlslLibRoutine(d)}}}t.VecGlslLib=o},7860:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLInferenceHandler=void 0;const a=r(1315),o=r(9240),s=r(7273),l=r(9),u=r(7379),d=r(2488),v=r(540),g=r(3314),f=r(5639);t.WebGLInferenceHandler=class{constructor(c){this.session=c,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(c,y){return(0,g.calculateTextureWidthAndHeight)(this.session.layoutStrategy,c,y)}executeProgram(c,y){if(y.length<c.inputNames.length)throw new Error(`Input size mustn't be less than ${c.inputNames.length}.`);if(c.inputNames.length!==c.inputTypes.length)throw new Error("input names size does not match input types");const _=[];for(let A=0;A<c.inputNames.length;++A)_[A]=this.getOrCreateTextureData(y[A],c.inputTypes[A]);const b=((A,E)=>{const $=E.map(I=>`${I.unpackedShape.join(",")};${I.width}x${I.height}`).join("_");let P=A.name;return A.cacheHint&&(P+="["+A.cacheHint+"]"),P+=":"+$,P})(c,_);let S=this.session.programManager.getArtifact(b);const x=S?S.programInfo:typeof c.get=="function"?c.get():c,w=(0,g.createTextureLayoutFromTextureType)(this.session.layoutStrategy,x.output.dims,x.output.textureType),T=this.createTextureData(w,x.output.type);return S||(S=this.session.programManager.build(x,_,T),this.session.programManager.setArtifact(b,S)),this.runProgram(S,_,T),T}run(c,y){return this.executeProgram(c,y).tensor}runProgram(c,y,_){for(let b=0;b<y.length;++b)if(!!y[b].isPacked!=(c.programInfo.inputTypes[b]===f.TextureType.packed))throw new Error(`input[${b}] property packed inconsistent`);if(!!_.isPacked!=(c.programInfo.output.textureType===f.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(c,y,_)}getOrCreateTextureData(c,y){let _=this.getTextureData(c.dataId,y===f.TextureType.packed);if(!_&&(_=this.getTextureData(c.dataId,y!==f.TextureType.packed),_))return y===f.TextureType.packed?this.pack(_):this.unpack(_);if(!_){const b=(0,g.createTextureLayoutFromTextureType)(this.session.layoutStrategy,c.dims,y);if(y===f.TextureType.packedLastDimension){const w=c.dims;if(w.length===4){const T=[w[0],Math.ceil(w[1]*w[2]*w[3]/4)],A=(0,g.createTextureLayoutFromTextureType)(this.session.layoutStrategy,T,y);let E=c.numberData;if(w[1]*w[2]*w[3]%4!=0){const $=w[0],P=w[1]*w[2]*w[3],I=Math.ceil(P*1/4)*4;E=new Float32Array($*I);for(let C=0;C<$;++C){const M=C*P,D=C*I+C%1*P;E.set(c.numberData.subarray(M,M+P),D)}}return this.createTextureData(A,c.type,E,c,1)}}if(y===f.TextureType.packed){const S=(0,g.createTextureLayoutFromShape)(this.session.layoutStrategy,c.dims,1,[],{reverseWH:!0}),x=this.createTextureData(S,c.type,c.numberData,c,1);_=this.pack(x)}else _=this.createTextureData(b,c.type,c.numberData,c,1)}return _}createTextureDataFromLayoutBindTensor(c,y,_,b){return this.createTextureData(c,y,_,b,1)}createTextureData(c,y,_,b,S){a.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(c)}]`);const x=this.session.textureManager.createTextureFromLayout(y,c,_,S);return this.createTextureDataFromTexture(c,y,x,b)}reshapeUnpacked(c,y){const _=this.getOrCreateTextureData(c,f.TextureType.unpacked),b={channels:_.channels,height:_.height,width:_.width,shape:y.length!==0?y:[1],strides:s.ShapeUtil.computeStrides(y),unpackedShape:y};return this.createTextureDataFromTexture(b,c.type,_.texture).tensor}reshapePacked(c,y){const _=this.getOrCreateTextureData(c,f.TextureType.packed);if((0,u.isReshapeCheap)(c.dims,y)){const T={channels:_.channels,height:_.height,width:_.width,shape:y.length!==0?y:[1],strides:s.ShapeUtil.computeStrides(y),unpackedShape:y,isPacked:!0};return this.createTextureDataFromTexture(T,c.type,_.texture).tensor}const b=(0,u.processDims3D)(c.dims),S=(0,u.processDims3D)(y),x=this.reshapePacked(c,b),w=this.run((0,u.createPackedReshape3DProgramInfoLoader)(this,x,S),[x]);return this.reshapePacked(w,y)}cast(c,y){const _=this.getOrCreateTextureData(c,f.TextureType.unpacked);return this.createTextureDataFromTexture(_,y,_.texture).tensor}createTextureDataFromTexture(c,y,_,b,S){const x=Object.assign(Object.assign({},c),{tensor:b||new o.Tensor(c.unpackedShape,y,w=>this.readTexture(x),async w=>this.readTextureAsync(x),void 0,S),texture:_});return this.setTextureData(x.tensor.dataId,x,c.isPacked),x}getTextureData(c,y=!1){return this.session.isInitializer(c)?this.session.getTextureData(c,y):y?this.packedTextureDataCache.get(c):this.unpackedTextureDataCache.get(c)}setTextureData(c,y,_=!1){this.session.isInitializer(c)?this.session.setTextureData(c,y,_):(_?this.packedTextureDataCache:this.unpackedTextureDataCache).set(c,y)}isTextureLayoutCached(c,y=!1){return!!this.getTextureData(c.dataId,y)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(c=>this.session.textureManager.releaseTexture(c)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(c=>this.session.textureManager.releaseTexture(c)),this.unpackedTextureDataCache=new Map}readTexture(c){return c.isPacked?this.readTexture(this.unpack(c)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(c,c.tensor.type,c.channels):this.session.textureManager.readUint8TextureAsFloat((0,d.encodeAsUint8)(this,c))}async readTextureAsync(c){return c.isPacked?this.readTextureAsync(this.unpack(c)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(c,c.tensor.type,c.channels):this.session.textureManager.readUint8TextureAsFloat((0,d.encodeAsUint8)(this,c))}pack(c){return this.executeProgram((0,l.createPackProgramInfoLoader)(this,c.tensor),[c.tensor])}unpack(c){return this.executeProgram((0,v.createUnpackProgramInfoLoader)(this,c.tensor),[c.tensor])}}},4110:function(n,t,r){var a=this&&this.__createBinding||(Object.create?function(X,U,te,ee){ee===void 0&&(ee=te);var q=Object.getOwnPropertyDescriptor(U,te);q&&!("get"in q?!U.__esModule:q.writable||q.configurable)||(q={enumerable:!0,get:function(){return U[te]}}),Object.defineProperty(X,ee,q)}:function(X,U,te,ee){ee===void 0&&(ee=te),X[ee]=U[te]}),o=this&&this.__setModuleDefault||(Object.create?function(X,U){Object.defineProperty(X,"default",{enumerable:!0,value:U})}:function(X,U){X.default=U}),s=this&&this.__importStar||function(X){if(X&&X.__esModule)return X;var U={};if(X!=null)for(var te in X)te!=="default"&&Object.prototype.hasOwnProperty.call(X,te)&&a(U,X,te);return o(U,X),U};Object.defineProperty(t,"__esModule",{value:!0}),t.WEBGL_OP_RESOLVE_RULES=void 0;const l=r(8817),u=s(r(5194)),d=r(4752),v=r(6668),g=r(9754),f=r(5042),c=r(6742),y=r(4125),_=r(6149),b=r(5378),S=r(6981),x=r(7413),w=r(7006),T=r(8276),A=r(5565),E=r(2834),$=r(1010),P=r(8126),I=r(2801),C=r(565),M=r(2444),D=r(815),R=r(564),N=r(5416),O=r(1240),F=r(5944),L=r(5707),B=s(r(9087)),V=r(7862),H=r(3980);t.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",B.abs],["Acos","","7+",B.acos],["Add","","7+",u.add],["And","","7+",u.and],["Asin","","7+",B.asin],["Atan","","7+",B.atan],["AveragePool","","7+",E.averagePool,E.parseAveragePoolAttributes],["BatchNormalization","","7+",l.batchNormalization,l.parseBatchNormalizationAttributes],["Cast","","6+",d.cast,d.parseCastAttributes],["Ceil","","6+",B.ceil],["Clip","","6-10",B.clip,B.parseClipAttributes],["Clip","","11+",B.clipV11],["Concat","","4+",v.concat,v.parseConcatAttributes],["Conv","","1+",g.conv,g.parseConvAttributes],["ConvTranspose","","1+",f.convTranspose,f.parseConvTransposeAttributes],["Cos","","7+",B.cos],["Div","","7+",u.div],["Dropout","","7+",B.identity],["DepthToSpace","","1+",c.depthToSpace,c.parseDepthToSpaceAttributes],["Equal","","7+",u.equal],["Elu","","6+",B.elu,B.parseEluAttributes],["Exp","","6+",B.exp],["Flatten","","1+",y.flatten,y.parseFlattenAttributes],["Floor","","6+",B.floor],["FusedConv","com.microsoft","1+",g.conv,g.parseConvAttributes],["Gather","","1+",_.gather,_.parseGatherAttributes],["Gemm","","7-10",b.gemm,b.parseGemmAttributesV7],["Gemm","","11+",b.gemm,b.parseGemmAttributesV11],["GlobalAveragePool","","1+",E.globalAveragePool,E.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",E.globalMaxPool],["Greater","","7+",u.greater],["Identity","","1+",B.identity],["ImageScaler","","1+",S.imageScaler,S.parseImageScalerAttributes],["InstanceNormalization","","6+",x.instanceNormalization,x.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",B.leakyRelu,B.parseLeakyReluAttributes],["Less","","7+",u.less],["LRN","","1+",w.lrn,w.parseLrnAttributes],["Log","","6+",B.log],["MatMul","","1+",T.matMul,T.parseMatMulAttributes],["MaxPool","","1+",E.maxPool,E.parseMaxPoolAttributes],["Mul","","7+",u.mul],["Neg","","6+",B.neg],["Not","","1+",B.not],["Or","","7+",u.or],["Pad","","2-10",A.padV2,A.parsePadAttributesV2],["Pad","","11+",A.padV11,A.parsePadAttributesV11],["Pow","","7+",u.pow],["PRelu","","7+",u.pRelu],["ReduceLogSum","","1+",$.reduceLogSum,$.parseReduceAttributes],["ReduceMax","","1+",$.reduceMax,$.parseReduceAttributes],["ReduceMean","","1+",$.reduceMean,$.parseReduceAttributes],["ReduceMin","","1+",$.reduceMin,$.parseReduceAttributes],["ReduceProd","","1+",$.reduceProd,$.parseReduceAttributes],["ReduceSum","","1-12",$.reduceSum,$.parseReduceAttributes],["ReduceSumSquare","","1+",$.reduceLogSumSquare,$.parseReduceAttributes],["Relu","","6+",B.relu],["Reshape","","5+",P.reshape],["Resize","","10",I.resize,I.parseResizeAttributesV10],["Resize","","11+",I.resize,I.parseResizeAttributesV11],["Shape","","1+",C.shape],["Sigmoid","","6+",B.sigmoid],["Sin","","7+",B.sin],["Slice","","10+",M.sliceV10],["Slice","","1-9",M.slice,M.parseSliceAttributes],["Softmax","","1-12",D.softmax,D.parseSoftmaxAttributes],["Softmax","","13+",D.softmaxV13,D.parseSoftmaxAttributesV13],["Split","","2-12",R.split,R.parseSplitAttributes],["Sqrt","","6+",B.sqrt],["Squeeze","","1-12",N.squeeze,N.parseSqueezeAttributes],["Squeeze","","13+",N.squeezeV13],["Sub","","7+",u.sub],["Sum","","6+",O.sum],["Tan","","7+",B.tan],["Tanh","","6+",B.tanh],["Tile","","6+",F.tile],["Transpose","","1+",L.transpose,L.parseTransposeAttributes],["Upsample","","7-8",H.upsample,H.parseUpsampleAttributesV7],["Upsample","","9",H.upsample,H.parseUpsampleAttributesV9],["Unsqueeze","","1-12",V.unsqueeze,V.parseUnsqueezeAttributes],["Unsqueeze","","13+",V.unsqueezeV13],["Xor","","7+",u.xor]]},8817:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseBatchNormalizationAttributes=t.batchNormalization=void 0;const a=r(4910),o=r(6757),s=r(5639),l={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]};t.batchNormalization=(v,g,f)=>(d(g),[v.run(Object.assign(Object.assign({},l),{cacheHint:f.cacheKey,get:()=>u(v,g,f)}),g)]),t.parseBatchNormalizationAttributes=v=>{const g=v.attributes.getFloat("epsilon",1e-5),f=v.attributes.getFloat("momentum",.9),c=v.attributes.getInt("spatial",1);return(0,a.createAttributeWithCacheKey)({epsilon:g,momentum:f,spatial:c})};const u=(v,g,f)=>{const c=(0,o.getGlsl)(v.session.backend.glContext.version),y=g[0].dims.length,[_,b]=v.calculateTextureWidthAndHeight(g[1].dims,s.TextureType.unpacked),S=`
  float process(int[${y}] indices) {
    vec2 position = offsetToCoords(indices[1], ${_}, ${b});
    float scale = getColorAsFloat(${c.texture2D}(Scale, position));
    float mean = getColorAsFloat(${c.texture2D}(Mean, position));
    float variance = getColorAsFloat(${c.texture2D}(Variance, position));
    float b = getColorAsFloat(${c.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${f.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},l),{output:{dims:g[0].dims,type:g[0].type,textureType:s.TextureType.unpacked},shaderSource:S})},d=v=>{if(!v||v.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const g=v[0],f=v[1],c=v[2],y=v[3],_=v[4];if(g.dims.length<3||f.dims.length!==1||c.dims.length!==1||y.dims.length!==1||_.dims.length!==1)throw new Error("invalid input shape.");if(f.dims[0]!==g.dims[1]||c.dims[0]!==g.dims[1]||y.dims[0]!==g.dims[1]||_.dims[0]!==g.dims[1])throw new Error("invalid input shape.");if(g.type!=="float32"&&g.type!=="float64"||f.type!=="float32"&&f.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||y.type!=="float32"&&y.type!=="float64"||_.type!=="float32"&&_.type!=="float64")throw new Error("invalid input tensor types.")}},5194:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.xor=t.sub=t.pRelu=t.pow=t.or=t.mul=t.less=t.greater=t.equal=t.div=t.and=t.add=t.glslPRelu=t.glslPow=t.glslXor=t.glslOr=t.glslAnd=t.glslLess=t.glslGreater=t.glslEqual=t.glslSub=t.glslMul=t.glslDiv=t.glslAdd=void 0;const a=r(7273),o=r(1997),s=r(6757),l=r(5639);function u(){const E="add_";return{body:`
  float ${E}(float a, float b) {
    return a + b;
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:E,type:o.FunctionType.ValueBased}}function d(){const E="div_";return{body:`
  float ${E}(float a, float b) {
    return a / b;
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:E,type:o.FunctionType.ValueBased}}function v(){const E="mul_";return{body:`
  float ${E}(float a, float b) {
    return a * b;
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:E,type:o.FunctionType.ValueBased}}function g(){const E="sub_";return{body:`
  float ${E}(float a, float b) {
    return a - b;
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:E,type:o.FunctionType.ValueBased}}function f(){const E="equal_";return{body:`
  float ${E}(float a, float b) {
    return float(a == b);
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:E,type:o.FunctionType.ValueBased}}function c(){const E="greater_";return{body:`
  float ${E}(float a, float b) {
    return float(a > b);
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:E,type:o.FunctionType.ValueBased}}function y(){const E="less_";return{body:`
  float ${E}(float a, float b) {
    return float(a < b);
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:E,type:o.FunctionType.ValueBased}}function _(){const E="and_";return{body:`
  float ${E}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:E,type:o.FunctionType.ValueBased}}function b(){const E="or_";return{body:`
  float ${E}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:E,type:o.FunctionType.ValueBased}}function S(){const E="xor_";return{body:`
  float ${E}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:E,type:o.FunctionType.ValueBased}}function x(){return function(E){const $=`${E}_`;return{body:`
  float ${$}(float a, float b) {
    return ${E}(a, b);
  }
  vec4 ${$}(vec4 v1, vec4 v2) {
    return ${E}(v1, v2);
  }
  `,name:$,type:o.FunctionType.ValueBased}}("pow")}function w(){const E="prelu_";return{body:`
  float ${E}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${E}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:E,type:o.FunctionType.ValueBased}}t.glslAdd=u,t.glslDiv=d,t.glslMul=v,t.glslSub=g,t.glslEqual=f,t.glslGreater=c,t.glslLess=y,t.glslAnd=_,t.glslOr=b,t.glslXor=S,t.glslPow=x,t.glslPRelu=w;const T=(E,$,P,I=$[0].type,C)=>{const M=E.session.pack?l.TextureType.packed:l.TextureType.unpacked;return{name:P.name,inputNames:["A","B"],inputTypes:[M,M],cacheHint:C,get:()=>A(E,$,P,I)}},A=(E,$,P,I=$[0].type)=>{const C=E.session.pack?l.TextureType.packed:l.TextureType.unpacked,M=!a.ShapeUtil.areEqual($[0].dims,$[1].dims);let D=$[0].dims;const R=E.session.pack;if(M){const F=a.BroadcastUtil.calcShape($[0].dims,$[1].dims,!1);if(!F)throw new Error("Can't perform binary op on the given tensors");D=F;const L=D.length,B=$[0].dims.length!==0?$[0].dims.length:1,V=$[1].dims.length!==0?$[1].dims.length:1,H=$[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",X=$[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",U=(0,s.getGlsl)(E.session.backend.glContext.version),te=R?`
      ${P.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${P.name}(a, b);
        ${U.output} = result;
      }`:`
      ${P.body}
      float process(int indices[${L}]) {
        int aindices[${B}];
        int bindices[${V}];
        ${H}
        ${X}
        return ${P.name}(_A(aindices), _B(bindices));
      }`;return{name:P.name,inputNames:["A","B"],inputTypes:[C,C],output:{dims:D,type:I,textureType:C},shaderSource:te,hasMain:R}}const N=(0,s.getGlsl)(E.session.backend.glContext.version),O=`
    ${P.body}
    void main() {
      vec4 v1 = ${N.texture2D}(A, TexCoords);
      vec4 v2 = ${N.texture2D}(B, TexCoords);
      vec4 result = ${P.name}(v1, v2);
      ${N.output} = result;
    }
    `;return{name:P.name,inputNames:["A","B"],inputTypes:[C,C],output:{dims:$[0].dims,type:I,textureType:C},shaderSource:O,hasMain:!0}};t.add=(E,$)=>[E.run(T(E,$,u()),$)],t.and=(E,$)=>[E.run(T(E,$,_(),"bool"),$)],t.div=(E,$)=>[E.run(T(E,$,d()),$)],t.equal=(E,$)=>[E.run(T(E,$,f(),"bool"),$)],t.greater=(E,$)=>[E.run(T(E,$,c(),"bool"),$)],t.less=(E,$)=>[E.run(T(E,$,y(),"bool"),$)],t.mul=(E,$)=>[E.run(T(E,$,v()),$)],t.or=(E,$)=>[E.run(T(E,$,b(),"bool"),$)],t.pow=(E,$)=>[E.run(T(E,$,x()),$)],t.pRelu=(E,$)=>[E.run(T(E,$,w()),$)],t.sub=(E,$)=>[E.run(T(E,$,g()),$)],t.xor=(E,$)=>[E.run(T(E,$,S(),"bool"),$)]},4752:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCastAttributes=t.cast=void 0;const a=r(7273);t.cast=(s,l,u)=>(o(l),[s.cast(l[0],u)]),t.parseCastAttributes=s=>a.ProtoUtil.tensorDataTypeFromProto(s.attributes.getInt("to"));const o=s=>{if(!s||s.length!==1)throw new Error("Cast requires 1 input.");if(s[0].type==="string")throw new Error("Invalid input type.")}},4595:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPackedConcatProgramInfoLoader=void 0;const a=r(6757),o=r(5639),s=r(432),l=r(5614);t.createPackedConcatProgramInfoLoader=(d,v,g)=>{const f=(c=v.length,y=g.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:c},(_,b)=>`X${b}`),inputTypes:Array(c).fill(o.TextureType.packed),cacheHint:y});var c,y;return Object.assign(Object.assign({},f),{get:()=>((_,b,S,x)=>{const w=S[0].dims.slice();if(x>=w.length||x<-1*w.length)throw new Error("axis specified for concat doesn't match input dimensionality");x<0&&(x=w.length+x);const T=w.slice(0);for(let H=1;H<S.length;H++){const X=S[H].dims.slice();for(let U=0;U<w.length;U++)if(U===x)T[x]+=X[U];else if(w[U]!==X[U])throw new Error("non concat dimensions must match")}const A=T.length,E=(0,l.getChannels)("coords",A),$=(0,s.getCoordsDataType)(A),P=(0,l.unpackFromChannel)(),I=S.map(H=>H.dims),C=(0,s.getGlChannels)(A),M=new Array(I.length-1);M[0]=I[0][x];for(let H=1;H<M.length;H++)M[H]=M[H-1]+I[H][x];const D=C[x],R=C.slice(-2),N=C.join();let O=`if (${D} < ${M[0]}) {
        return getChannel(
            getX0(${N}), vec2(${R.join()}));
        }`;for(let H=1;H<M.length;H++){const X=M[H-1];O+=`
            if (${D} < ${M[H]}  && ${D} >= ${M[H-1]}) {
              return getChannel(
                getX${H}(${u(C,D,X)}),
                vec2(${u(R,D,X)}));
            }`}const F=M.length,L=M[M.length-1];O+=`
            return getChannel(
              getX${F}(${u(C,D,L)}),
              vec2(${u(R,D,L)}));`;const B=(0,a.getGlsl)(_.session.backend.glContext.version),V=`
          ${P}
          float getValue(${C.map(H=>"int "+H)}) {
            ${O}
          }

          void main() {
            ${$} coords = getOutputCoords();
            int lastDim = coords.${C[A-1]};
            coords.${C[A-1]} = coords.${C[A-2]};
            coords.${C[A-2]} = lastDim;

            vec4 result = vec4(getValue(${E}), 0., 0., 0.);

            ${E[A-1]} = ${E[A-1]} + 1;
            if (${E[A-1]} < ${T[A-1]}) {
              result.g = getValue(${E});
            }

            ${E[A-2]} = ${E[A-2]} + 1;
            if (${E[A-2]} < ${T[A-2]}) {
              result.a = getValue(${E});
            }

            ${E[A-1]} = ${E[A-1]} - 1;
            if (${E[A-2]} < ${T[A-2]} &&
                ${E[A-1]} < ${T[A-1]}) {
              result.b = getValue(${E});
            }
            ${B.output} = result;
          }
        `;return Object.assign(Object.assign({},b),{output:{dims:T,type:S[0].type,textureType:o.TextureType.packed},shaderSource:V,hasMain:!0})})(d,f,v,g.axis)})};const u=(d,v,g)=>{const f=d.indexOf(v);return d.map((c,y)=>y===f?`${c} - ${g}`:c).join()}},6668:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseConcatAttributes=t.concat=void 0;const a=r(4910),o=r(5639),s=r(4595);t.concat=(c,y,_)=>(f(y),c.session.pack&&y[0].dims.length>1?[c.run((0,s.createPackedConcatProgramInfoLoader)(c,y,_),y)]:[c.run(l(c,y,_),y)]);const l=(c,y,_)=>{const b=(S=y.length,x=_.cacheKey,{name:"Concat",inputNames:Array.from({length:S},(w,T)=>`X${T}`),inputTypes:Array(S).fill(o.TextureType.unpacked),cacheHint:x});var S,x;return Object.assign(Object.assign({},b),{get:()=>((w,T,A,E)=>{const $=A[0].dims.slice();if(E>=$.length||E<-1*$.length)throw new Error("axis specified for concat doesn't match input dimensionality");E<0&&(E=$.length+E);const P=$.slice(0);for(let N=1;N<A.length;N++){const O=A[N].dims.slice();for(let F=0;F<$.length;F++)if(F===E)P[E]+=O[F];else if($[F]!==O[F])throw new Error("non concat dimensions must match")}const I=P.length,C=new Array(A.length);let M=0;for(let N=0;N<C.length;++N)M+=A[N].dims[E],C[N]=M;let D="";D=A.length<5?u(C):d(C);const R=`
        ${v(A.length,I)}
        ${g(C)}
        ${D}
        float process(int indices[${I}]) {
          int textureIndex = getTextureWhereDataResides (indices[${E}]);

          if(textureIndex != 0) {
            indices[${E}] = indices[${E}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},T),{output:{dims:P,type:A[0].type,textureType:o.TextureType.unpacked},shaderSource:R})})(0,b,y,_.axis)})},u=c=>`int getTextureWhereDataResides(int index) {
      ${c.map((y,_)=>`if(index<${y}) {return ${_};}
`).join("")}
    }`,d=c=>u(c),v=(c,y)=>{const _=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${y}]) {`];for(let b=0;b<c;++b)b===0?_.push(`	if (textureIndex == ${b}) { return _X${b}(indices); }`):b===c-1?_.push(`	else { return _X${b}(indices); }`):_.push(`	else if (textureIndex == ${b}) { return _X${b}(indices); }`);return _.push("	}"),_.join(`
`)},g=c=>{const y=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let _=0;_<c.length;++_)_===0?y.push(`	if (index == ${_}) { return ${c[_]}; }`):_===c.length-1?y.push(`	else { return ${c[_]}; }`):y.push(`	else if (index == ${_}) { return ${c[_]}; }`);return y.push("	}"),y.join(`
`)};t.parseConcatAttributes=c=>(0,a.createAttributeWithCacheKey)({axis:c.attributes.getInt("axis")});const f=c=>{if(!c||c.length<1)throw new Error("too few inputs");const y=c[0].type,_=c[0].dims.length;if(y==="string")throw new Error("string tensor is not supported yet");for(const b of c){if(b.type!==y)throw new Error("input tensors should be one type");if(b.dims.length!==_)throw new Error("input tensors should have the same shape")}}},7825:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUnpackedGroupedConvProgramInfoLoader=void 0;const a=r(1315),o=r(6757),s=r(5639),l=r(9754),u=r(2150);t.createUnpackedGroupedConvProgramInfoLoader=(d,v,g)=>{const f=(c=v.length>2,y=g.cacheKey,{name:"GroupedConv",inputNames:c?["X","W","Bias"]:["X","W"],inputTypes:c?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],cacheHint:y});var c,y;return Object.assign(Object.assign({},f),{get:()=>((_,b,S,x)=>{const w=b.length>2?"value += getBias(output_channel);":"",T=b[0].dims.slice(),A=b[1].dims.slice(),E=A[0]/x.group;a.Logger.verbose("GroupedConv",`autpPad:${x.autoPad}, dilations:${x.dilations}, group:${x.group}, kernelShape:${x.kernelShape}, pads:${x.pads}, strides:${x.strides}`);const $=(0,l.calculateOutputShape)(T,A,x.dilations,x.pads,x.strides),P=(0,o.getGlsl)(_.session.backend.glContext.version),{activationFunction:I,applyActivation:C}=(0,u.getActivationSnippet)(x),M=`
  const ivec2 strides = ivec2(${x.strides[0]}, ${x.strides[1]});
  const ivec2 pads = ivec2(${x.pads[0]}, ${x.pads[1]});
  ${I}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${E};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${A[1]}; wInChannel++) {
      int input_channel = group_id * ${A[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${A[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${x.dilations[0]};

        if (xHeight < 0 || xHeight >= ${T[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${A[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${x.dilations[1]};
          if (xWidth < 0 || xWidth >= ${T[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${w}
    ${C}
    ${P.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},S),{output:{dims:$,type:b[0].type,textureType:s.TextureType.unpacked},shaderSource:M,hasMain:!0})})(d,v,f,g)})}},7708:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.conv2DPacked=t.conv2DPackedPointwise=void 0;const a=r(9754),o=r(5950),s=r(5632);t.conv2DPackedPointwise=(l,u,d)=>{const v=u[0].dims,g=u[1].dims,f=(0,a.calculateOutputShape)(v,g,d.dilations,d.pads,d.strides),c=l.reshapePacked(u[0],[v[1],v[2]*v[3]]),y=l.reshapePacked(u[1],[g[0],g[1]]),_=u.length>2?[y,c,u[2]]:[y,c],b=l.run((0,s.createPackedMatmulProgramInfoLoader)(l,_,d),_);return l.reshapePacked(b,f)},t.conv2DPacked=(l,u,d)=>{const v=u[0].dims,g=u[1].dims,f=(0,a.calculateOutputShape)(v,g,d.dilations,d.pads,d.strides),c=l.run((0,o.createPackedIm2ColProgramInfoLoader)(l,u[0],u[1],f,d),[u[0]]),y=l.reshapePacked(u[1],[g[0],g[1]*g[2]*g[3]]),_=u.length===3?[y,c,u[2]]:[y,c],b=l.run((0,s.createPackedMatmulProgramInfoLoader)(l,_,d),_);return l.reshapePacked(b,f)}},5042:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseConvTransposeAttributes=t.convTranspose=void 0;const a=r(4910),o=r(6757),s=r(5639),l=r(2150),u=(y,_,b,S,x,w)=>(y-1)*_+b+(S-1)*x+1-w,d=(y,_,b,S,x)=>{const w=Math.floor(y/2);_==="SAME_UPPER"?(b[S]=w,b[x]=y-w):_==="SAME_LOWER"&&(b[S]=y-w,b[x]=w)};t.convTranspose=(y,_,b)=>(c(_,b),v(y,_,b));const v=(y,_,b)=>{const S=f(b,_);return[g(y,_,S)]},g=(y,_,b)=>y.run(((S,x,w)=>{const T=(A=x.length>2,E=w.cacheKey,{name:"ConvTranspose",inputNames:A?["X","W","B"]:["X","W"],inputTypes:A?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],cacheHint:E});var A,E;return Object.assign(Object.assign({},T),{get:()=>(($,P,I,C)=>{const M=P.length>2?"getB(output_channel)":"0.0",D=P[0].dims,R=P[1].dims,N=R[1],O=R[0]/C.group,F=[P[0].dims[0],P[1].dims[1]*C.group,...C.outputShape],L=(0,o.getGlsl)($.session.backend.glContext.version),{activationFunction:B,applyActivation:V}=(0,l.getActivationSnippet)(C),H=`
  const ivec2 strides = ivec2(${C.strides[0]}, ${C.strides[1]});
  const ivec2 pads = ivec2(${C.pads[0]}, ${C.pads[1]});
  ${B}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${N};
    int wOutChannel = output_channel - group_id * ${N};

    float value = ${M};
    for (int inChannelOffset = 0; inChannelOffset < ${O}; inChannelOffset++) {
      int input_channel = group_id * ${O} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${R[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${R[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${C.dilations[0]}, wHOff * ${C.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${D[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${D[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${V}
    ${L.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},I),{output:{dims:F,type:P[0].type,textureType:s.TextureType.unpacked},shaderSource:H,hasMain:!0})})(S,x,T,w)})})(y,_,b),_),f=(y,_)=>{const b=y.kernelShape.slice();if(y.kernelShape.length===0)for(let T=2;T<_[1].dims.length;++T)b.push(_[1].dims[T]);const S=y.pads.slice(),x=y.outputShape.slice();((T,A,E,$,P,I,C,M)=>{const D=T.length-2,R=M.length===0;for(let N=0;N<D;++N){const O=R?T[N+2]*I[N]:M[N],F=u(T[N+2],I[N],P[N],A[N],E[N],O);d(F,$,P,N,N+D),R&&M.push(I[N]*(T[N+2]-1)+C[N]+(A[N]-1)*E[N]+1-P[N]-P[N+D])}})(_[0].dims,b,y.dilations,y.autoPad,S,y.strides,y.outputPadding,x);const w=Object.assign({},y);return Object.assign(w,{kernelShape:b,pads:S,outputShape:x,cacheKey:y.cacheKey}),w};t.parseConvTransposeAttributes=y=>{const _=y.attributes,b=(0,l.parseInternalActivationAttributes)(_),S=_.getString("auto_pad","NOTSET"),x=_.getInts("dilations",[1,1]),w=_.getInt("group",1),T=_.getInts("kernel_shape",[]),A=_.getInts("output_padding",[0,0]),E=_.getInts("output_shape",[]),$=_.getInts("pads",[0,0,0,0]),P=_.getInts("strides",[1,1]);return(0,a.createAttributeWithCacheKey)(Object.assign({autoPad:S,dilations:x,group:w,kernelShape:T,outputPadding:A,outputShape:E,pads:$,strides:P},b))};const c=(y,_)=>{if(!y||y.length!==2&&y.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(y[0].dims.length!==4||y[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(y[0].dims[1]!==y[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const b=y[1].dims[1]*_.group;if(y.length===3&&(y[2].dims.length!==1||y[2].dims[0]!==b))throw new Error("invalid bias");const S=y[0].dims.length-2;if(_.dilations.length!==S)throw new Error(`dilations should be ${S}D`);if(_.strides.length!==S)throw new Error(`strides should be ${S}D`);if(_.pads.length!==2*S)throw new Error(`pads should be ${2*S}D`);if(_.outputPadding.length!==S)throw new Error(`output_padding should be ${S}D`);if(_.kernelShape.length!==0&&_.kernelShape.length!==y[1].dims.length-2)throw new Error("invalid kernel shape");if(_.outputShape.length!==0&&_.outputShape.length!==y[0].dims.length-2)throw new Error("invalid output shape");if(y[0].type!=="float32"||y[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(y.length===3&&y[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseConvAttributes=t.conv=t.calculateOutputShape=void 0;const a=r(4910),o=r(7273),s=r(7825),l=r(7708),u=r(3281),d=r(2150),v=r(1625),g=r(8276);t.calculateOutputShape=(S,x,w,T,A)=>{const E=S[0],$=S.slice(2),P=$.length,I=x[0],C=x.slice(2).map((D,R)=>D+(D-1)*(w[R]-1)),M=$.map((D,R)=>D+T[R]+T[R+P]).map((D,R)=>Math.floor((D-C[R]+A[R])/A[R]));return[E,I].concat(...M)},t.conv=(S,x,w)=>(b(x,w),f(S,x,w));const f=(S,x,w)=>{const T=_(w,x),A=S.session.pack,E=T.kernelShape[0]===1&&T.kernelShape[1]===1;return T.group>1?[S.run((0,s.createUnpackedGroupedConvProgramInfoLoader)(S,x,T),x)]:E&&A?[c(S,x,T)]:A&&x[0].dims.length===4&&x[0].dims[0]===1&&!E?[(0,l.conv2DPacked)(S,x,T)]:[y(S,x,T)]},c=(S,x,w)=>{const T=x[0].dims,A=x[1].dims,E=(0,t.calculateOutputShape)(T,A,w.dilations,w.pads,w.strides),$=S.reshapeUnpacked(x[0],[T[1],T[2]*T[3]]),P=S.reshapeUnpacked(x[1],[A[0],A[1]]),I=x.length>2?[P,$,x[2]]:[P,$],C=S.run((0,g.createMatmulProgramInfoLoader)(I,w),I);return S.reshapeUnpacked(C,E)},y=(S,x,w)=>{const T=x[0].dims,A=x[1].dims,E=(0,t.calculateOutputShape)(T,A,w.dilations,w.pads,w.strides),$=S.run((0,v.createIm2ColProgramInfoLoader)(S,x[0],x[1],E,w),[x[0]]),P=x.length===3?[$,x[1],x[2]]:[$,x[1]];return S.run((0,u.createDotProductProgramInfoLoader)(S,x,E,w),P)},_=(S,x)=>{const w=S.kernelShape.slice();if(S.kernelShape.length===0)for(let E=2;E<x[1].dims.length;++E)w.push(x[1].dims[E]);const T=S.pads.slice();o.PoolConvUtil.adjustPadsBasedOnAutoPad(x[0].dims,S.strides,S.dilations,w,T,S.autoPad);const A=Object.assign({},S);return Object.assign(A,{kernelShape:w,pads:T,cacheKey:S.cacheKey}),A};t.parseConvAttributes=S=>{const x=S.attributes,w=(0,d.parseInternalActivationAttributes)(x),T=x.getString("auto_pad","NOTSET"),A=x.getInts("dilations",[1,1]),E=x.getInt("group",1),$=x.getInts("kernel_shape",[]),P=x.getInts("pads",[0,0,0,0]),I=x.getInts("strides",[1,1]);return(0,a.createAttributeWithCacheKey)(Object.assign({autoPad:T,dilations:A,group:E,kernelShape:$,pads:P,strides:I},w))};const b=(S,x)=>{if(!S||S.length!==2&&S.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(S[0].dims.length!==4||S[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(S[0].dims[1]!==S[1].dims[1]*x.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(S.length===3&&(S[2].dims.length!==1||S[1].dims[0]!==S[2].dims[0]))throw new Error("invalid bias");const w=S[0].dims.length-2;if(x.dilations.length!==w)throw new Error(`dilations should be ${w}D`);if(x.strides.length!==w)throw new Error(`strides should be ${w}D`);if(x.pads.length!==2*w)throw new Error(`pads should be ${2*w}D`);if(x.kernelShape.length!==0&&x.kernelShape.length!==S[1].dims.length-2)throw new Error("invalid kernel shape");if(S[0].type!=="float32"||S[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(S.length===3&&S[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},6742:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseDepthToSpaceAttributes=t.depthToSpace=void 0;const a=r(5707);t.depthToSpace=(s,l,u)=>{o(l);const d=u.blocksize,v=d*d,g=u.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],f=u.mode==="DCR"?[l[0].dims[0],d,d,l[0].dims[1]/v,l[0].dims[2],l[0].dims[3]]:[l[0].dims[0],l[0].dims[1]/v,d,d,l[0].dims[2],l[0].dims[3]],c=s.reshapeUnpacked(l[0],f),y={perm:g,cacheKey:`${g}`},[_]=(0,a.transpose)(s,[c],y),b=[l[0].dims[0],l[0].dims[1]/v,l[0].dims[2]*d,l[0].dims[3]*d];return[s.reshapeUnpacked(_,b)]},t.parseDepthToSpaceAttributes=s=>{const l=s.attributes.getInt("blocksize");if(l<1)throw new Error(`blocksize must be >= 1, but got : ${l} for DepthToSpace`);const u=s.attributes.getString("mode","DCR");if(u!=="DCR"&&u!=="CRD")throw new Error(`unrecognized mode: ${u} for DepthToSpace`);return{mode:u,blocksize:l}};const o=s=>{if(s.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${s.length}`);if(s[0].type==="string"||s[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDotProductProgramInfoLoader=void 0;const a=r(7273),o=r(6757),s=r(5639),l=r(2150),u=r(1625);t.createDotProductProgramInfoLoader=(d,v,g,f)=>{const c=((y,_)=>({name:"ConvDotProduct",inputNames:y?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:y?[s.TextureType.unpacked,s.TextureType.packedLastDimension,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.packedLastDimension],cacheKey:_.activationCacheKey}))(v.length>2,f);return Object.assign(Object.assign({},c),{get:()=>((y,_,b,S,x)=>{const w=b[0].dims,T=b[1].dims,A=[T[0],Math.ceil(w[1]*T[2]*T[3]/4)],E=(0,u.calculateIm2ColDims)(w,T,S),[$,P]=y.calculateTextureWidthAndHeight(A,s.TextureType.packedLastDimension),I=a.ShapeUtil.computeStrides(E),[C,M]=y.calculateTextureWidthAndHeight(E,s.TextureType.packedLastDimension),D=S.length,R=b.length<3?"0.0":"_B(b)",N=Math.ceil(w[1]*T[2]*T[3]/4),{activationFunction:O,applyActivation:F}=(0,l.getActivationSnippet)(x),L=(0,o.getGlsl)(y.session.backend.glContext.version),B=`
${O}
float process(int indices[${D}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${I[0]} + im2col[1] * ${I[1]} + im2col[2] * ${I[2]};
  int kernelOffset = indices[1] * ${A[1]};
  float value = ${R};
  for (int i = 0; i < ${N}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${C}, ${M});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${$}, ${P});
    value += dot(${L.texture2D}(Im2Col, im2colCoords), ${L.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${F}
  return value;
}`;return Object.assign(Object.assign({},_),{output:{dims:S,type:b[0].type,textureType:s.TextureType.unpacked},shaderSource:B})})(d,c,v,g,f)})}},4125:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseFlattenAttributes=t.flatten=void 0;const a=r(7273);t.flatten=(s,l,u)=>{o(l,u);const d=a.ShapeUtil.flattenShape(l[0].dims,u);return[s.reshapeUnpacked(l[0],d)]},t.parseFlattenAttributes=s=>s.attributes.getInt("axis",1);const o=(s,l)=>{if(!s||s.length!==1)throw new Error("Flatten requires 1 input.");const u=s[0].dims.length;if(u===0)throw new Error("scalar tensor is not supported.");if(l<-u||l>u)throw new Error("Invalid axis");if(s[0].type==="string")throw new Error("string tensor is not supported.")}},2150:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseInternalActivationAttributes=t.getActivationSnippet=void 0;const a=r(7273),o=r(9087);t.getActivationSnippet=function(s){let l;switch(s.activation){case"Relu":l=(0,o.glslRelu)();break;case"Sigmoid":l=(0,o.glslSigmoid)();break;case"Clip":l=(0,o.glslClip)(s.clipMin,s.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const u=l.name;return{activationFunction:l.body,applyActivation:`value = ${u}_(value);`}},t.parseInternalActivationAttributes=s=>{const l=s.getString("activation","");if(l==="Clip"){const[u,d]=s.getFloats("activation_params",[a.MIN_CLIP,a.MAX_CLIP]);return{activation:l,clipMax:d,clipMin:u,activationCacheKey:`${l}:${u},${d}`}}return{activation:l,activationCacheKey:l}}},6149:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseGatherAttributes=t.gather=void 0;const a=r(4910),o=r(6145),s=r(7273),l=r(5639);t.gather=(g,f,c)=>(v(f,c.axis),[g.run(d(g,f,c),f)]),t.parseGatherAttributes=g=>(0,a.createAttributeWithCacheKey)({axis:g.attributes.getInt("axis",0)});const u={name:"Gather",inputNames:["A","B"],inputTypes:[l.TextureType.unpacked,l.TextureType.unpacked]},d=(g,f,c)=>{const y=Object.assign(Object.assign({},u),{cacheHint:c.cacheKey});return Object.assign(Object.assign({},y),{get:()=>((_,b,S,x)=>{const w=S[0].dims.slice(),T=S[1].dims.slice(),A=new Array(w.length+T.length-1);x=s.ShapeUtil.normalizeAxis(x,w.length);const E=[];for(let P=0;P<A.length;P++)P<x?(A[P]=w[P],E.push(`inputIdx[${P}] = outputIdx[${P}];`)):P<x+T.length?(A[P]=T[P-x],E.push(`indexDataIdx[${P-x}] = outputIdx[${P}];`)):(A[P]=w[P-T.length+1],E.push(`inputIdx[${P-T.length+1}] = outputIdx[${P}];`));const $=`
      float process(int outputIdx[${A.length||1}]) {
        int inputIdx[${w.length}];
        int indexDataIdx[${T.length||1}];
        indexDataIdx[0] = 0;
        ${E.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${x}] = idx < 0 ? idx + ${w[x]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},b),{output:{dims:A,type:S[0].type,textureType:l.TextureType.unpacked},shaderSource:$})})(0,y,f,c.axis)})},v=(g,f)=>{if(!g||g.length!==2)throw new Error("Gather requires 2 inputs.");const c=g[0].dims.length;if(c<1)throw new Error("Invalid input shape.");if(f<-c||f>c-1)throw new Error("Invalid axis.");if(o.NUMBER_TYPES.indexOf(g[0].type)===-1)throw new Error("Invaid input type.");if(g[1].type!=="int32"&&g[1].type!=="int16")throw new Error("Invaid input type.")}},5378:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseGemmAttributesV11=t.parseGemmAttributesV7=t.gemm=void 0;const a=r(4910),o=r(7273),s=r(5639);t.gemm=(g,f,c)=>(v(f,c),[g.run(u(f,c),f)]);const l=(g,f)=>{const c=g.attributes.getInt("transA",0)!==0,y=g.attributes.getInt("transB",0)!==0,_=g.attributes.getFloat("alpha",1),b=g.attributes.getFloat("beta",1);return(0,a.createAttributeWithCacheKey)({transA:c,transB:y,alpha:_,beta:b,isOptionalC:f})};t.parseGemmAttributesV7=g=>l(g,!1),t.parseGemmAttributesV11=g=>l(g,!0);const u=(g,f)=>{const c={name:"Gemm",inputNames:g.length===3?["A","B","C"]:["A","B"],inputTypes:g.length===3?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],key:f.cacheKey};return Object.assign(Object.assign({},c),{get:()=>d(c,g,f)})},d=(g,f,c)=>{const y=f[0].dims.slice(),_=f[1].dims.slice(),[b,S]=o.GemmUtil.getShapeOfGemmResult(y,c.transA,_,c.transB,f.length===3?f[2].dims:void 0),x=[b,S];if(!x)throw new Error("Can't use gemm on the given tensors");let w=y[y.length-1],T="";c.transA&&(w=y[0]),c.transA&&c.transB?T="value += _A_T(a) * _B_T(b);":c.transA&&!c.transB?T="value += _A_T(a) * _B(b);":!c.transA&&c.transB?T="value += _A(a) * _B_T(b);":c.transA||c.transB||(T="value += _A(a) * _B(b);");const A=x.length,E=`
      float process(int indices[${A}]) {
          int a[${A}];
          int b[${A}];
          ${f.length===3?`int c[${f[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${f.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${w}; ++k) {
              a[${A-1}] = k;
              b[${A-2}] = k;
              ${T}
          }

          value = value * alpha;
          ${f.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},g),{output:{dims:x,type:f[0].type,textureType:s.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:c.alpha},{name:"beta",type:"float",data:c.beta}],shaderSource:E})},v=(g,f)=>{if(!g)throw new Error("Input is missing");if(f.isOptionalC&&(g.length<2||g.length>3))throw new Error("Invaid input shape.");if(!f.isOptionalC&&g.length!==3)throw new Error("Gemm requires 3 inputs");if(g.length===3&&g[2].dims.length!==1&&g[2].dims.length!==2)throw new Error("Invalid input shape of C");if(g[0].type!=="float32"&&g[0].type!=="float64"||g[1].type!=="float32"&&g[1].type!=="float64"||g.length===3&&g[2].type!=="float32"&&g[2].type!=="float64")throw new Error("Invalid input type.");if(g[0].type!==g[1].type||g.length===3&&g[0].type!==g[2].type)throw new Error("Input types are mismatched")}},5950:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPackedIm2ColProgramInfoLoader=void 0;const a=r(6757),o=r(5639),s=r(5614);t.createPackedIm2ColProgramInfoLoader=(l,u,d,v,g)=>{const f=(c=g.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[o.TextureType.packed],cacheHint:c});var c;return Object.assign(Object.assign({},f),{get:()=>((y,_,b,S,x,w)=>{const T=b.dims,A=S.dims,E=x.length,$=[A[1]*A[2]*A[3],x[2]*x[3]],P=A[2]*A[3],I=(0,s.unpackFromChannel)(),C=(0,a.getGlsl)(y.session.backend.glContext.version);let M="";for(let R=0;R<=1;R++)for(let N=0;N<=1;N++)M+=`
            blockIndex = rc.x + ${N};
            pos = rc.y + ${R};

            if(blockIndex < ${$[1]} && pos < ${$[0]}) {
              offsetY = int(blockIndex / (${x[E-1]})) * ${w.strides[0]} -
                ${w.pads[0]};
              d0 = offsetY + ${w.dilations[0]} * (imod(pos, ${P}) / ${A[2]});

              if(d0 < ${T[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${x[E-1]}) * ${w.strides[1]} -
                  ${w.pads[1]};
                d1 = offsetX + ${w.dilations[1]} * imod(imod(pos, ${P}), ${A[2]});

                if(d1 < ${T[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${P}.);
                    innerDims = vec2(d0, d1);
                    result[${2*R+N}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const D=`
      ${I}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${M}
          ${C.output} = result;
      }
            `;return Object.assign(Object.assign({},_),{output:{dims:$,type:b.type,textureType:o.TextureType.packed},shaderSource:D,hasMain:!0})})(l,f,u,d,v,g)})}},1625:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateIm2ColDims=t.createIm2ColProgramInfoLoader=void 0;const a=r(5639);t.createIm2ColProgramInfoLoader=(o,s,l,u,d)=>{const v=(g=d.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[a.TextureType.unpacked],cacheHint:g});var g;return Object.assign(Object.assign({},v),{get:()=>((f,c,y,_,b,S)=>{const x=y.dims,w=_.dims,T=b.length,A=(0,t.calculateIm2ColDims)(x,w,b,4),E=`
        const int XC = ${x[1]};
        const int XH = ${x[2]};
        const int XW = ${x[3]};
        const int KH = ${S.kernelShape[0]};
        const int KW = ${S.kernelShape[1]};
        const int dilationH = ${S.dilations[0]};
        const int dilationW = ${S.dilations[1]};
        const int strideH = ${S.strides[0]};
        const int strideW = ${S.strides[1]};
        const int padH = ${S.pads[0]};
        const int padW = ${S.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${T}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${x.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},c),{output:{dims:A,type:y.type,textureType:a.TextureType.packedLastDimension},shaderSource:E})})(0,v,s,l,u,d)})},t.calculateIm2ColDims=(o,s,l,u=4)=>[l[0],l[2],l[3],Math.ceil(o[1]*s[2]*s[3]/u)]},6981:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseImageScalerAttributes=t.imageScaler=void 0;const a=r(4910),o=r(5639);t.imageScaler=(v,g,f)=>(d(g),[v.run(l(v,g,f),g)]),t.parseImageScalerAttributes=v=>{const g=v.attributes.getFloat("scale"),f=v.attributes.getFloats("bias");return(0,a.createAttributeWithCacheKey)({scale:g,bias:f})};const s={name:"ImageScaler",inputNames:["X"],inputTypes:[o.TextureType.unpacked]},l=(v,g,f)=>{const c=Object.assign(Object.assign({},s),{cacheHint:f.cacheKey});return Object.assign(Object.assign({},c),{get:()=>((y,_,b,S)=>{const x=b[0].dims.slice(),w=x.length,T=`
      ${u(S.bias.length)}
      float process(int indices[${w}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},_),{output:{dims:x,type:b[0].type,textureType:o.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:S.bias.length,data:S.bias},{name:"scale",type:"float",data:S.scale}],shaderSource:T})})(0,c,g,f)})},u=v=>{const g=[`float getBias(float bias[${v}], int channel) {`];for(let f=0;f<v;++f)f===0?g.push(`	if (channel == ${f}) { return bias[${f}]; }`):f===v-1?g.push(`	else { return bias[${f}]; }`):g.push(`	else if (channel == ${f}) { return bias[${f}]; }`);return g.push("	}"),g.join(`
`)},d=v=>{if(!v||v.length!==1)throw new Error("ImageScaler requires 1 input.");if(v[0].dims.length!==4)throw new Error("Invalid input shape.");if(v[0].type!=="float32"&&v[0].type!=="float64")throw new Error("Invalid input type.")}},7413:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseInstanceNormalizationAttributes=t.instanceNormalization=void 0;const a=r(6757),o=r(5639);t.instanceNormalization=(g,f,c)=>{v(f);const y=g.run(l(f[0]),f);return[g.run(d(g,f[0],c,y.dims),[f[0],y,f[1],f[2]])]},t.parseInstanceNormalizationAttributes=g=>g.attributes.getFloat("epsilon",1e-5);const s={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[o.TextureType.unpacked]},l=g=>Object.assign(Object.assign({},s),{get:()=>((f,c)=>{const y=c.dims.slice(),_=y[1],b=y[2]*y[3],S=[y[0],_],x=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${y[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${y[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${b});
        temp = 0.0;
        for(int a2=0; a2<${y[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${y[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${b});

        return v;
      }`;return Object.assign(Object.assign({},f),{output:{dims:S,type:c.type,textureType:o.TextureType.packedLastDimension},shaderSource:x})})(s,g)}),u={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[o.TextureType.unpacked,o.TextureType.packedLastDimension,o.TextureType.unpacked,o.TextureType.unpacked]},d=(g,f,c,y)=>{const _=Object.assign(Object.assign({},u),{cacheHint:`${c}`});return Object.assign(Object.assign({},_),{get:()=>((b,S,x,w,T)=>{const A=(0,a.getGlsl)(b.session.backend.glContext.version),[E,$]=b.calculateTextureWidthAndHeight(T,o.TextureType.packedLastDimension),[P,I]=[E/4,$],C=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${P}, ${I});
        return ${A.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},S),{output:{dims:x.dims,type:x.type,textureType:o.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:w}],shaderSource:C})})(g,_,f,c,y)})},v=g=>{if(!g||g.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const f=g[0],c=g[1],y=g[2];if(f.dims.length<3||c.dims.length!==1||y.dims.length!==1)throw new Error("Invalid input shape.");if(c.dims[0]!==f.dims[1]||y.dims[0]!==f.dims[1])throw new Error("Input shapes are mismatched.");if(f.type!=="float32"&&f.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||y.type!=="float32"&&y.type!=="float64")throw new Error("Invalid input type.");if(g[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},7006:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLrnProgramInfoLoader=t.parseLrnAttributes=t.lrn=void 0;const a=r(4910),o=r(5639);t.lrn=(d,v,g)=>(u(v),[d.run(l(v,g),v)]),t.parseLrnAttributes=d=>{const v=d.attributes.getFloat("alpha",1e-4),g=d.attributes.getFloat("beta",.75),f=d.attributes.getFloat("bias",1),c=d.attributes.getInt("size");return(0,a.createAttributeWithCacheKey)({alpha:v,beta:g,bias:f,size:c})};const s={name:"LRN",inputNames:["X"],inputTypes:[o.TextureType.unpacked]};function l(d,v){return Object.assign(Object.assign({},s),{cacheHint:v.cacheKey,get:()=>function(g,f){const c=g[0].dims[1],y=g[0].dims.length,_=-Math.floor((f.size-1)/2),b=Math.ceil((f.size-1)/2),S=`float(${f.alpha}) / float(${f.size})`,x=`
    float process(int indices[${y}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${_}; i <= ${b}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${c}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(float(${f.bias}) + ${S} * square_sum, float(${f.beta}));
    }`;return Object.assign(Object.assign({},s),{cacheHint:f.cacheKey,output:{dims:g[0].dims,type:g[0].type,textureType:o.TextureType.unpacked},shaderSource:x})}(d,v)})}t.createLrnProgramInfoLoader=l;const u=d=>{if(!d||d.length!==1)throw new Error("LRN requires 1 input.");if(d[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(d[0].type!=="float32")throw new Error("input should be float type")}},5632:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPackedMatmulProgramInfoLoader=void 0;const a=r(7273),o=r(6757),s=r(5639),l=r(432),u=r(2150),d=r(8276);t.createPackedMatmulProgramInfoLoader=(v,g,f)=>{const c=(y=g.length>2,_=f.activationCacheKey,{name:"MatMul (packed)",inputNames:y?["A","B","Bias"]:["A","B"],inputTypes:y?[s.TextureType.packed,s.TextureType.packed,s.TextureType.packed]:[s.TextureType.packed,s.TextureType.packed],cacheHint:_});var y,_;return Object.assign(Object.assign({},c),{get:()=>((b,S,x,w)=>{const T=x.length>2,A=T?"value += getBiasForMatmul();":"",E=x[0].dims,$=x[1].dims,P=a.BroadcastUtil.calcShape(E,$,!0),I=!a.ShapeUtil.areEqual(x[0].dims,x[1].dims);if(!P)throw new Error("Can't use matmul on the given tensors");const C=E[E.length-1],M=Math.ceil(C/2),D=E.length,R=$.length,N=(0,o.getGlsl)(b.session.backend.glContext.version),O=(0,l.getCoordsDataType)(P.length),F=P.length,L=(0,l.getGlChannels)(),{activationFunction:B,applyActivation:V}=(0,u.getActivationSnippet)(w),H=T?`${(0,d.getBiasForMatmul)(O,L,x[2].dims,P,!0)}`:"",X=I?`${function(q,ie,pe,j){let Q=[],J=[];const oe=pe[0].dims,ne=pe[1].dims,z=oe.length,W=ne.length,Z=j.length,ae=Z-z,se=Z-W;Q=oe.map((xe,be)=>`coords.${ie[be+ae]}`),Q[z-1]="i*2",Q.join(", "),J=ne.map((xe,be)=>`coords.${ie[be+se]}`),J[W-2]="i*2",J.join(", ");const ce=a.BroadcastUtil.getBroadcastDims(oe,j),_e=a.BroadcastUtil.getBroadcastDims(ne,j),ge=ce.map(xe=>`coords.${ie[xe+ae]} = 0;`).join(`
`),me=_e.map(xe=>`coords.${ie[xe+se]} = 0;`).join(`
`),de=`int lastDim = coords.${ie[Z-1]};
  coords.${ie[Z-1]} = coords.${ie[Z-2]};
  coords.${ie[Z-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${q} coords = getOutputCoords();
  ${de}
  ${ge}
  vec4 outputValue = getA(${Q});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${q} coords = getOutputCoords();
  ${de}
  ${me}
  vec4 outputValue = getB(${J});
  return outputValue;
}`}(O,L,x,P)}`:"",U=I?"getAAtOutCoordsMatmul(i)":`getA(${function(q,ie){let pe="";for(let j=0;j<ie-2;j++)pe+=`rc.${q[j]}, `;return pe+=`rc.${q[ie-2]}, i*2`,pe}(L,D)})`,te=I?"getBAtOutCoordsMatmul(i)":`getB(${function(q,ie){let pe="";for(let j=0;j<ie-2;j++)pe+=`rc.${q[j]}, `;return pe+=`i*2, rc.${q[ie-1]}`,pe}(L,R)})`,ee=`
            ${X}
            ${H}
            ${B}
            void main() {
              ${I?"":`${O} rc =
          getOutputCoords(); int lastDim = rc.${L[F-1]}; rc.${L[F-1]} =
          rc.${L[F-2]}; rc.${L[F-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${M}; i++) {
                vec4 a = ${U};
                vec4 b = ${te};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${A}
              ${V}
              ${N.output} = value;
            }`;return Object.assign(Object.assign({},S),{output:{dims:P,type:x[0].type,textureType:s.TextureType.packed},shaderSource:ee,hasMain:!0})})(v,c,g,f)})}},8276:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBiasForMatmul=t.createMatmulProgramInfoLoader=t.parseMatMulAttributes=t.matMul=void 0;const a=r(7273),o=r(5639),s=r(432),l=r(2150),u=r(5632);t.matMul=(c,y,_)=>(g(y),c.session.pack?[c.run((0,u.createPackedMatmulProgramInfoLoader)(c,y,_),y)]:[c.run(v(y,_),y)]),t.parseMatMulAttributes=c=>(0,l.parseInternalActivationAttributes)(c.attributes);const d=(c,y)=>({name:"MatMul",inputNames:c?["A","B","Bias"]:["A","B"],inputTypes:c?[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.unpacked],cacheHint:y});function v(c,y){const _=d(c.length>2,y.activationCacheKey);return Object.assign(Object.assign({},_),{get:()=>function(b,S,x){const w=S[0].dims,T=S[1].dims,A=a.BroadcastUtil.calcShape(w,T,!0);if(!A)throw new Error("Can't use matmul on the given tensors");const E=(0,s.getCoordsDataType)(A.length),$=(0,s.getGlChannels)(),{activationFunction:P,applyActivation:I}=(0,l.getActivationSnippet)(x),C=S.length>2,M=C?"value += getBiasForMatmul();":"",D=C?`${f(E,$,S[2].dims,A,!1)}`:"",R=A.length,N=w.length,O=T.length,F=`
    ${P}
    ${D}
    float process(int indices[${R}]) {
        int a[${N}];
        int b[${O}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${w[w.length-1]}; ++k) {
            a[${N-1}] = k;
            b[${O-2}] = k;
            value += _A(a) * _B(b);
        }
        ${M}
        ${I}
        return value;
    }`;return Object.assign(Object.assign({},b),{output:{dims:A,type:S[0].type,textureType:o.TextureType.unpacked},shaderSource:F})}(_,c,y)})}t.createMatmulProgramInfoLoader=v;const g=c=>{if(!c||c.length!==2)throw new Error("MatMul requires 2 inputs.");if(c[0].dims[c[0].dims.length-1]!==c[1].dims[c[1].dims.length-2])throw new Error("shared dimension does not match.");if(c[0].type!=="float32"&&c[0].type!=="float64"||c[1].type!=="float32"&&c[1].type!=="float64")throw new Error("inputs should be float type");if(c[0].type!==c[1].type)throw new Error("inputs types should match")};function f(c,y,_,b,S){let x="";const w=_.length,T=b.length,A=T-w;x=T<2&&w>0?"coords":_.map((P,I)=>`coords.${y[I+A]}`).join(", ");const E=a.BroadcastUtil.getBroadcastDims(_,b).map(P=>`coords.${y[P+A]} = 0;`).join(`
`);let $="vec4(outputValue.xx, outputValue.yy)";return a.ShapeUtil.size(_)===1&&($="vec4(outputValue.x)"),S?`
vec4 getBiasForMatmul() {
  ${c} coords = getOutputCoords();
  ${E}
  vec4 outputValue = getBias(${x});
  return ${$};
}`:`
float getBiasForMatmul() {
  ${c} coords = getOutputCoords();
  ${E}
  return getBias(coords.x);
}`}t.getBiasForMatmul=f},9:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPackProgramInfoLoader=void 0;const a=r(6757),o=r(5639),s=r(432),l=r(5614),u={name:"pack",inputNames:["A"],inputTypes:[o.TextureType.unpackedReversed]};t.createPackProgramInfoLoader=(d,v)=>Object.assign(Object.assign({},u),{get:()=>((g,f)=>{const c=(0,a.getGlsl)(g.session.backend.glContext.version),y=f.dims,_=y.length,b=f.dims.length,S=(0,s.getCoordsDataType)(b),x=(0,l.getChannels)("rc",b),w=(T=b,A=x,E=y[y.length-2],$=y[y.length-1],T===0||T===1?"":`
    int r = ${A[T-2]};
    int c = ${A[T-1]};
    int rp1 = ${A[T-2]} + 1;
    int cp1 = ${A[T-1]} + 1;
    bool rEdge = rp1 >= ${$};
    bool cEdge = cp1 >= ${E};
    `);var T,A,E,$;let P;P=_===0?[1,1]:_===1?[y[0],1]:[y[b-1],y[b-2]];const I=function(D,R,N){if(D===0)return"false";if(D===1)return`rc > ${R[0]}`;let O="";for(let F=D-2;F<D;F++)O+=`${N[F]} >= ${R[F-D+2]}`,F<D-1&&(O+="||");return O}(b,P,x),C=function(D,R){const N=D.length;if(N===0)return"getA(), 0, 0, 0";if(N===1)return`getA(rc),
            rc + 1 >= ${D[0]} ? 0. : getA(rc + 1),
            0, 0`;let O="";if(N>2)for(let F=0;F<N-2;++F)O+=`${R[F]},`;return`getA(${O}r, c),
          rEdge ? 0. : getA(${O}rp1, c),
          cEdge ? 0. : getA(${O}r, cp1),
          rEdge || cEdge ? 0. : getA(${O}rp1, cp1)`}(y,x),M=`
        void main() {
          ${S} rc = getOutputCoords();

          if(${I}) {
            ${c.output} = vec4(0);
          } else {
            ${w}

            ${c.output} = vec4(${C});
          }
        }
      `;return Object.assign(Object.assign({},u),{hasMain:!0,output:{dims:f.dims,type:f.type,textureType:o.TextureType.packed},shaderSource:M})})(d,v)})},5614:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unpackFromChannel=t.getChannels=t.getVecChannels=void 0;const a=r(432);function o(s,l){return(0,a.getGlChannels)(l).map(u=>`${s}.${u}`)}t.getVecChannels=o,t.getChannels=function(s,l){return l===1?[s]:o(s,l)},t.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},5565:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parsePadAttributesV11=t.padV11=t.parsePadAttributesV2=t.padV2=void 0;const a=r(4910),o=r(7273),s=r(6757),l=r(5639),u={name:"Pad",inputNames:["A"],inputTypes:[l.TextureType.unpacked]};t.padV2=(S,x,w)=>(g(x),[S.run(Object.assign(Object.assign({},u),{cacheHint:w.cacheKey,get:()=>v(S,x[0],w)}),x)]),t.parsePadAttributesV2=S=>{const x=S.attributes.getString("mode","constant"),w=S.attributes.getFloat("value",0),T=S.attributes.getInts("pads");return(0,a.createAttributeWithCacheKey)({mode:x,value:w,pads:T})},t.padV11=(S,x,w)=>{f(x);const T=d(S,x,w);return(0,t.padV2)(S,[x[0]],T)},t.parsePadAttributesV11=S=>S.attributes.getString("mode","constant");const d=(S,x,w)=>{if(!S.session.isInitializer(x[1].dataId)||x.length>=3&&!S.session.isInitializer(x[2].dataId))throw new Error("dynamic pad attributes are not allowed");const T=Array.from(x[1].integerData),A=x.length>=3?x[2].floatData[0]:0;return(0,a.createAttributeWithCacheKey)({mode:w,pads:T,value:A})},v=(S,x,w)=>{const T=o.ShapeUtil.padShape(x.dims.slice(),w.pads),A=T.length,E=`
      ${c(S,x,w)}
      float process(int[${A}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[l.TextureType.unpacked],output:{dims:T,type:x.type,textureType:l.TextureType.unpacked},shaderSource:E}},g=S=>{if(!S||S.length!==1)throw new Error("Pad requires 1 input");if(S[0].type!=="float32"&&S[0].type!=="float64")throw new Error("Invalid input type.")},f=S=>{if(!S||S.length!==2&&S.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(S[1].type!=="int32")throw new Error("Invalid input type.");if(S.length>=3&&S[2].type==="string")throw new Error("Invalid input type.")},c=(S,x,w)=>{const T=(0,s.getGlsl)(S.session.backend.glContext.version),[A,E]=S.calculateTextureWidthAndHeight(x.dims,l.TextureType.unpacked),$=o.ShapeUtil.computeStrides(x.dims);switch(w.mode){case"constant":return y(T,x.dims,$,A,E,w.pads,w.value);case"reflect":return _(T,x.dims,$,A,E,w.pads);case"edge":return b(T,x.dims,$,A,E,w.pads);default:throw new Error("Invalid mode")}},y=(S,x,w,T,A,E,$)=>{const P=x.length;let I="";for(let C=P-1;C>=0;--C)I+=`
        k = m[${C}] - ${E[C]};
        if (k < 0)  return constant;
        if (k >= ${x[C]}) return constant;
        offset += k * ${w[C]};
        `;return`
      float padA(int m[${P}]) {
        const float constant = float(${$});
        int offset = 0;
        int k = 0;
        ${I}
        vec2 coords = offsetToCoords(offset, ${T}, ${A});
        float value = getColorAsFloat(${S.texture2D}(A, coords));
        return value;
      }
      `},_=(S,x,w,T,A,E)=>{const $=x.length;let P="";for(let I=$-1;I>=0;--I)P+=`
        k = m[${I}] - ${E[I]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(x[I]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${x[I]}) { k = _2n_1 - k; }
        }
        offset += k * ${w[I]};
        `;return`
      float padA(int m[${$}]) {
        int offset = 0;
        int k = 0;
        ${P}
        vec2 coords = offsetToCoords(offset, ${T}, ${A});
        float value = getColorAsFloat(${S.texture2D}(A, coords));
        return value;
      }
      `},b=(S,x,w,T,A,E)=>{const $=x.length;let P="";for(let I=$-1;I>=0;--I)P+=`
        k = m[${I}] - ${E[I]};
        if (k < 0)  k = 0;
        if (k >= ${x[I]}) k = ${x[I]-1};
        offset += k * ${w[I]};
      `;return`
      float padA(int m[${$}]) {
        int offset = 0;
        int k = 0;
        ${P}
        vec2 coords = offsetToCoords(offset, ${T}, ${A});
        float value = getColorAsFloat(${S.texture2D}(A, coords));
        return value;
      }
      `}},2834:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalMaxPool=t.parseMaxPoolAttributes=t.maxPool=t.parseGlobalAveragePoolAttributes=t.globalAveragePool=t.parseAveragePoolAttributes=t.averagePool=void 0;const a=r(4910),o=r(7273),s=r(5639);t.averagePool=(b,S,x)=>{f(S);const w={name:"AveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:x.cacheKey};return[b.run(Object.assign(Object.assign({},w),{get:()=>l(S,w,!1,x)}),S)]},t.parseAveragePoolAttributes=b=>{const S=b.attributes.getString("auto_pad","NOTSET"),x=b.attributes.getInt("ceil_mode",0),w=b.attributes.getInt("count_include_pad",0)!==0,T=b.attributes.getInts("kernel_shape"),A=b.attributes.getInts("strides",[]),E=b.attributes.getInts("pads",[]);if(x!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,a.createAttributeWithCacheKey)({autoPad:S,ceilMode:x,countIncludePad:w,kernelShape:T,strides:A,pads:E})};const l=(b,S,x,w)=>{const[T,A]=d(b,w,x),E=o.ShapeUtil.size(T.kernelShape);let $="";T.countIncludePad?$+=`value /= float(${E});`:$+=`value /= float(${E} - pad);`;const P=`
        ${c(b[0].dims,T,"value += _X(x);",$,"0.0")}
      `;return Object.assign(Object.assign({},S),{output:{dims:A,type:b[0].type,textureType:s.TextureType.unpacked},shaderSource:P})};t.globalAveragePool=(b,S,x)=>{f(S);const w={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:`${x.countIncludePad}`};return[b.run(Object.assign(Object.assign({},w),{get:()=>l(S,w,!0,x)}),S)]},t.parseGlobalAveragePoolAttributes=b=>{const S=b.attributes.getInt("count_include_pad",0)!==0;return(0,a.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:S,kernelShape:[],strides:[],pads:[]})},t.maxPool=(b,S,x)=>{f(S);const w={name:"MaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:x.cacheKey};return[b.run(Object.assign(Object.assign({},w),{get:()=>u(S,w,!1,x)}),S)]},t.parseMaxPoolAttributes=b=>{const S=b.attributes.getString("auto_pad","NOTSET"),x=b.attributes.getInt("ceil_mode",0),w=b.attributes.getInts("kernel_shape"),T=b.attributes.getInts("strides",[]),A=b.attributes.getInts("pads",[]),E=b.attributes.getInt("storage_order",0),$=b.attributes.getInts("dilations",[]);if(E!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(x!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,a.createAttributeWithCacheKey)({autoPad:S,ceilMode:x,countIncludePad:!1,kernelShape:w,strides:T,pads:A,storageOrder:E,dilations:$})};const u=(b,S,x,w)=>{const[T,A]=d(b,w,x),E=`
      ${c(b[0].dims,T,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},S),{output:{dims:A,type:b[0].type,textureType:s.TextureType.unpacked},shaderSource:E})},d=(b,S,x)=>{const w=b[0].dims.slice(),T=Object.hasOwnProperty.call(S,"dilations"),A=S.kernelShape.slice(),E=S.strides.slice(),$=T?S.dilations.slice():[],P=S.pads.slice();o.PoolConvUtil.adjustPoolAttributes(x,w,A,E,$,P);const I=o.PoolConvUtil.computePoolOutputShape(x,w,E,$,A,P,S.autoPad),C=Object.assign({},S);return T?Object.assign(C,{kernelShape:A,strides:E,pads:P,dilations:$,cacheKey:S.cacheKey}):Object.assign(C,{kernelShape:A,strides:E,pads:P,cacheKey:S.cacheKey}),[C,I]},v={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},g={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};t.globalMaxPool=(b,S)=>(f(S),[b.run(Object.assign(Object.assign({},g),{get:()=>u(S,g,!0,v)}),S)]);const f=b=>{if(!b||b.length!==1)throw new Error("Pool ops requires 1 input.");if(b[0].type!=="float32"&&b[0].type!=="float64")throw new Error("Invalid input type.")},c=(b,S,x,w,T)=>{const A=b.length;if(S.kernelShape.length<=2){const E=S.kernelShape[S.kernelShape.length-1],$=S.strides[S.strides.length-1],P=S.pads[S.pads.length/2-1],I=S.pads[S.pads.length-1],C=b[A-1];let M="",D="",R="";if(M=P+I!==0?`
          for (int i = 0; i < ${E}; i++) {
            x[${A} - 1] = indices[${A} - 1] * ${$} - ${P} + i;
            if (x[${A} - 1] < 0 || x[${A} - 1] >= ${C}) {
              pad++;
              continue;
            }
            ${x}
          }`:`
          for (int i = 0; i < ${E}; i++) {
            x[${A} - 1] = indices[${A} - 1] * ${$} - ${P} + i;
            ${x}
          }`,S.kernelShape.length===2){const N=S.kernelShape[S.kernelShape.length-2],O=S.strides[S.strides.length-2],F=S.pads[S.pads.length/2-2],L=S.pads[S.pads.length-2],B=b[A-2];D=F+L!==0?`
            for (int j = 0; j < ${N}; j++) {
              x[${A} - 2] = indices[${A} - 2] * ${O} - ${F} + j;
              if (x[${A} - 2] < 0 || x[${A} - 2] >= ${B}) {
                pad+= ${E};
                continue;
              }
          `:`
            for (int j = 0; j < ${N}; j++) {
              x[${A} - 2] = indices[${A} - 2] * ${O} - ${F} + j;
            `,R=`
          }
        `}return`
        float process(int indices[${A}]) {
          int x[${A}];
          copyVec(indices, x);

          float value = ${T};
          int pad = 0;
          ${D}
          ${M}
          ${R}
          ${w}
          return value;
        }
      `}{const E=o.ShapeUtil.size(S.kernelShape),$=o.ShapeUtil.computeStrides(S.kernelShape),P=$.length,I=S.pads.length,C=_(P),M=y(b,"inputDims"),D=y(S.pads,"pads"),R=y($,"kernelStrides"),N=y(S.strides,"strides");let O="";return O=S.pads.reduce((F,L)=>F+L)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${x}
          }`:`
          }
          ${x}
        `,`
        ${C}
        float process(int indices[${A}]) {
          int x[${A}];
          copyVec(indices, x);
          int offset[${P}];
          int pads[${I}];
          int inputDims[${A}];
          int kernelStrides[${P}];
          int strides[${P}];
          ${D}
          ${M}
          ${N}
          ${R}

          float value = ${T};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${E}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${A} - ${P}; j < ${A}; j++) {
              x[j] = indices[j] * strides[j - ${A} + ${P}]
                + offset[j - ${A} + ${P}] - pads[j - 2];
              ${O}
          }
          ${w}

          return value;
        }
      `}},y=(b,S)=>{let x="";for(let w=0;w<b.length;w++)x+=`
      ${S}[${w}] = ${b[w]};
    `;return x},_=b=>`
  void offsetToIndices(int offset, int[${b}] strides, out int[${b}] indices) {
    if (${b} == 0) {
      return;
    }
    for (int i = 0; i < ${b} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${b} - 1] = offset;
  }`},1010:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reduceLogSumSquare=t.reduceLogSum=t.reduceProd=t.reduceMin=t.reduceMax=t.reduceMean=t.reduceSum=t.parseReduceAttributes=void 0;const a=r(4910),o=r(6145),s=r(7273),l=r(5639),u=(g,f,c,y,_)=>{v(f);const b={name:y,inputNames:["A"],inputTypes:[l.TextureType.unpacked]};return[g.run(Object.assign(Object.assign({},b),{cacheHint:c.cacheKey,get:()=>d(g,f,c,y,_,b)}),f)]};t.parseReduceAttributes=g=>{const f=g.attributes.getInts("axes",[]),c=g.attributes.getInt("keepdims",1)===1;return(0,a.createAttributeWithCacheKey)({axes:f,keepDims:c})};const d=(g,f,c,y,_,b)=>{const S=[],x=f[0].dims.length||1,w=[],T=s.ShapeUtil.normalizeAxes(c.axes,f[0].dims.length),A=_(f,T);let E=A[1];for(let P=0;P<f[0].dims.length;P++)T.indexOf(P)>=0||T.length===0?(c.keepDims&&S.push(1),E=`
          for(int j${P} = 0; j${P} < ${f[0].dims[P]}; j${P}++) {
            inputIdx[${P}] = j${P};
            ${E}
          }`):(w.push(`inputIdx[${P}] = outputIdx[${S.length}];`),S.push(f[0].dims[P]));const $=`
      float process(int outputIdx[${S.length||1}]) {
        float value;                 // final result
        int inputIdx[${x}];      // addressing input data
        ${w.join(`
`)}
        ${A[0]}       // init ops for reduce max/min
        ${E}
        ${A[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},b),{output:{dims:S,type:f[0].type,textureType:l.TextureType.unpacked},shaderSource:$})},v=g=>{if(!g||g.length!==1)throw new Error("Reduce op requires 1 input.");if(o.NUMBER_TYPES.indexOf(g[0].type)===-1)throw new Error("Invalid input type.")};t.reduceSum=(g,f,c)=>u(g,f,c,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),t.reduceMean=(g,f,c)=>u(g,f,c,"ReduceMean",(y,_)=>{let b=1;for(let S=0;S<y[0].dims.length;S++)(_.indexOf(S)>=0||_.length===0)&&(b*=y[0].dims[S]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${b}.;`]}),t.reduceMax=(g,f,c)=>u(g,f,c,"ReduceMax",(y,_)=>{const b=[];for(let S=0;S<y[0].dims.length;S++)(_.indexOf(S)>=0||_.length===0)&&b.push(`inputIdx[${S}] = 0;`);return[`${b.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),t.reduceMin=(g,f,c)=>u(g,f,c,"ReduceMin",(y,_)=>{const b=[];for(let S=0;S<y[0].dims.length;S++)(_.indexOf(S)>=0||_.length===0)&&b.push(`inputIdx[${S}] = 0;`);return[`${b.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),t.reduceProd=(g,f,c)=>u(g,f,c,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),t.reduceLogSum=(g,f,c)=>u(g,f,c,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),t.reduceLogSumSquare=(g,f,c)=>u(g,f,c,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7379:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isReshapeCheap=t.processDims3D=t.createPackedReshape3DProgramInfoLoader=void 0;const a=r(7273),o=r(6757),s=r(5639),l=r(5614);t.createPackedReshape3DProgramInfoLoader=(u,d,v)=>{const g=(f=>({name:"Reshape (packed)",inputTypes:[s.TextureType.packed],inputNames:["A"],cacheHint:`${f}`}))(v);return Object.assign(Object.assign({},g),{get:()=>((f,c,y,_)=>{const b=c.dims,S=_;let x="";for(let A=0;A<4;A++){let E="";switch(A){case 0:E="outputCoords = rc;";break;case 1:E="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:E="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:E="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}x+=`
        ${E}
        ${A>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${A}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${A>0?"}":""}
      `}const w=(0,o.getGlsl)(f.session.backend.glContext.version),T=`
      ${function(A){const E=a.ShapeUtil.computeStrides(A),$=["b","r","c"],P="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${E.map((I,C)=>`int ${$[C]} = ${P} / ${I}; ${C===E.length-1?`int ${$[C+1]} = ${P} - ${$[C]} * ${I}`:`index -= ${$[C]} * ${I}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(b)}
      ${function(A){const E=a.ShapeUtil.computeStrides(A);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${E[0]} + coords.z * ${E[1]} + coords.y;
  }
`}(S)}
      ${(0,l.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${S[2]};
        int cols = ${S[1]};

        ${x}
        ${w.output} = result;
      }
    `;return Object.assign(Object.assign({},y),{output:{dims:S,type:c.type,textureType:s.TextureType.packed},shaderSource:T,hasMain:!0})})(u,d,g,v)})},t.processDims3D=function(u){if(u.length===0)return[1,1,1];let d=1;for(let v=0;v<u.length-2;++v)d*=u[v];return[d,u.length>1?u[u.length-2]:1,u[u.length-1]]},t.isReshapeCheap=function(u,d){let v=!1;return v=u.length===0||d.length===0||(u.length<2||d.length<2?u[u.length-1]===d[d.length-1]:u[u.length-1]===d[d.length-1]&&u[u.length-2]===d[d.length-2]),v}},8126:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reshape=void 0;const a=r(7273);t.reshape=(o,s)=>{const l=a.ShapeUtil.calculateReshapedDims(s[0].dims,s[1].integerData);return o.session.pack?[o.reshapePacked(s[0],l)]:[o.reshapeUnpacked(s[0],l)]}},2801:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseResizeAttributesV11=t.parseResizeAttributesV10=t.resize=void 0;const a=r(6757),o=r(5639),s=r(432),l=r(5614),u=r(3980),d={name:"Resize",inputNames:["A"],inputTypes:[o.TextureType.packed]};t.resize=(y,_,b)=>((0,u.validateInputs)(_,b),[y.run(Object.assign(Object.assign({},d),{cacheHint:b.cacheKey,get:()=>v(y,_,b)}),_)]),t.parseResizeAttributesV10=y=>(0,u.parseUpsampleAttributes)(y,10),t.parseResizeAttributesV11=y=>(0,u.parseUpsampleAttributes)(y,11);const v=(y,_,b)=>{const S=(0,a.getGlsl)(y.session.backend.glContext.version),[x,w]=g(_,b);if(x.every(O=>O===1)&&b.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},d),{output:{dims:w,type:_[0].type,textureType:o.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${S.texture2D}(X, TexCoords);
                    ${S.output} = v;
                }`});const T=w.length;if(T<2)throw new Error(`output dimension should be at least 2, but got ${T}`);const A=w[T-2],E=w[T-1],$=_[0].dims;if(T!==$.length)throw new Error(`output dimension should match input ${$.length}, but got ${T}`);const P=$[T-2],I=$[T-1],C=x[T-2],M=x[T-1];let D="";if(b.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${b.mode}'`);switch(b.coordinateTransformMode){case"asymmetric":D=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":D=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":D=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${E}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${A}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${E}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${A}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":D=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${E}.0 - 1.0, ${A}.0 - 1.0, ${E}.0 - 1.0,
                            ${A}.0 - 1.0);
                        vec4 original = vec4(${I}.0 - 1.0, ${P}.0 - 1.0, ${I}.0 - 1.0,
                            ${P}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${b.coordinateTransformMode}'`)}const R=(0,s.getCoordsDataType)(T),N=`
            const vec2 inputWH = vec2(${P}.0, ${I}.0);
            const vec4 scaleWHWH = vec4(float(${C}), float(${M}), float(${C}), float(${M}));
            ${(0,l.unpackFromChannel)()}
            ${D}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${R} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${A-1};
                bool hasNextCol = rc.z < ${E-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${S.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},d),{output:{dims:w,type:_[0].type,textureType:o.TextureType.packed},hasMain:!0,shaderSource:N})},g=(y,_)=>{const b=y[0].dims;let S,x=_.scales;if(x.length===0){const T=y[_.scalesInputIdx];if(T&&T.size!==0){if(y[_.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");x=f(T,_.mode,_.isResize)}else{const A=y[_.sizesInputIdx];if(!A||A.size===0)throw new Error("Either scales or sizes MUST be provided as input.");S=Array.from(A.integerData),x=c(S,b,_.mode,_.isResize)}}else if(y[_.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const w=S||b.map((T,A)=>Math.floor(T*x[A]));return[x,w]},f=(y,_,b)=>{const S=Array.from(y.floatData);return(0,u.scalesValidation)(S,_,b),S},c=(y,_,b,S)=>{const x=_.length,w=new Array(x);for(let T=0,A=x;T<A;T++)if(_[T]===0){if(y[T]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");w[T]=1}else w[T]=y[T]/_[T];return(0,u.scalesValidation)(w,b,S),w}},565:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shape=void 0;const a=r(9240);t.shape=(s,l)=>(o(l),[new a.Tensor([l[0].dims.length],"int32",void 0,void 0,new Int32Array(l[0].dims))]);const o=s=>{if(!s||s.length!==1)throw new Error("Shape requires 1 input.")}},2444:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sliceV10=t.parseSliceAttributes=t.slice=void 0;const a=r(4910),o=r(6145),s=r(7273),l=r(5639),u={name:"Slice",inputNames:["A"],inputTypes:[l.TextureType.unpacked]};t.slice=(c,y,_)=>(v(y),[c.run(Object.assign(Object.assign({},u),{cacheHint:_.cacheKey,get:()=>d(c,y[0],_)}),y)]),t.parseSliceAttributes=c=>{const y=c.attributes.getInts("starts"),_=c.attributes.getInts("ends"),b=c.attributes.getInts("axes",[]);return(0,a.createAttributeWithCacheKey)({starts:y,ends:_,axes:b})};const d=(c,y,_)=>{const b=_.axes.length===0?y.dims.slice(0).map(($,P)=>P):_.axes,S=s.ShapeUtil.normalizeAxes(b,y.dims.length),x=_.starts.map(($,P)=>$>y.dims[S[P]]-1?y.dims[S[P]]:s.ShapeUtil.normalizeAxis($,y.dims[S[P]])),w=_.ends.map(($,P)=>$>y.dims[S[P]]-1?y.dims[S[P]]:s.ShapeUtil.normalizeAxis($,y.dims[S[P]])),T=y.dims.slice(),A=[];for(let $=0;$<S.length;$++)T[S[$]]=w[$]-x[$],x[$]>0&&A.push(`outputIdx[${S[$]}] += ${x[$]};`);const E=`
      float process(int outputIdx[${T.length}]) {
        ${A.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},u),{output:{dims:T,type:y.type,textureType:l.TextureType.unpacked},shaderSource:E})},v=c=>{if(!c||c.length!==1)throw new Error("Slice requires 1 input.");if(o.NUMBER_TYPES.indexOf(c[0].type)===-1)throw new Error("Invalid input type.")};t.sliceV10=(c,y)=>{f(y);const _=g(c,y);return[c.run(Object.assign(Object.assign({},u),{cacheHint:_.cacheKey,get:()=>d(c,y[0],_)}),[y[0]])]};const g=(c,y)=>{if(!c.session.isInitializer(y[1].dataId)||!c.session.isInitializer(y[2].dataId)||y.length>=4&&!c.session.isInitializer(y[3].dataId)||y.length>=5&&!c.session.isInitializer(y[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(y.length>=5&&y[4].integerData.some(x=>x!==1))throw new Error("currently non-1 steps is not supported for Slice");const _=Array.from(y[1].integerData),b=Array.from(y[2].integerData),S=y.length>=4?Array.from(y[3].integerData):[];return{starts:_,ends:b,axes:S,cacheKey:`${S};${_};${b}`}},f=c=>{if(!c||c.length<3||c.length>5)throw new Error("Invalid input number.");if(c[1].type!=="int32"||c[1].dims.length!==1)throw new Error("Invalid input type.");if(c[2].type!=="int32"||c[2].dims.length!==1)throw new Error("Invalid input type.");if(c.length>=4&&(c[3].type!=="int32"||c[3].dims.length!==1))throw new Error("Invalid input type.");if(c.length>=5&&(c[4].type!=="int32"||c[4].dims.length!==1))throw new Error("Invalid input type.")}},815:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.softmaxV13=t.parseSoftmaxAttributesV13=t.parseSoftmaxAttributes=t.softmax=void 0;const a=r(4910),o=r(7273),s=r(6757),l=r(5639),u=r(5707),d={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[l.TextureType.unpacked]},v={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[l.TextureType.unpacked,l.TextureType.unpacked]},g={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[l.TextureType.unpacked,l.TextureType.unpacked,l.TextureType.unpacked]};t.softmax=(S,x,w)=>{b(x);const T=x[0].dims.slice(),A=o.ShapeUtil.normalizeAxis(w.axis,T.length),E=o.ShapeUtil.sizeToDimension(T,A),$=o.ShapeUtil.sizeFromDimension(T,A);return f(S,x,w,E,$)},t.parseSoftmaxAttributes=S=>(0,a.createAttributeWithCacheKey)({axis:S.attributes.getInt("axis",1)}),t.parseSoftmaxAttributesV13=S=>(0,a.createAttributeWithCacheKey)({axis:S.attributes.getInt("axis",-1)}),t.softmaxV13=(S,x,w)=>{b(x);const T=x[0].dims.slice(),A=o.ShapeUtil.normalizeAxis(w.axis,T.length),E=T.length,$=A!==E-1,P=[];let I,C=[],M=[];$&&(C=Array.from({length:E}).map((O,F)=>F),C[A]=E-1,C[E-1]=A,C.map(O=>P.push(T[O])),I=(0,a.createAttributeWithCacheKey)({perm:C}),M=(0,u.transpose)(S,x,I));const D=$?o.ShapeUtil.sizeToDimension(P,E-1):o.ShapeUtil.sizeToDimension(T,E-1),R=$?o.ShapeUtil.sizeFromDimension(P,E-1):o.ShapeUtil.sizeFromDimension(T,E-1),N=f(S,$?M:x,w,D,R);return $?(0,u.transpose)(S,N,I):N};const f=(S,x,w,T,A)=>{const E=c(S,x[0],T,A,[T]),$=S.run(Object.assign(Object.assign({},d),{cacheHint:w.cacheKey,get:()=>E}),x),P=y(S,x[0],T,A,E.output.dims,[T]),I=S.run(Object.assign(Object.assign({},v),{cacheHint:w.cacheKey,get:()=>P}),[x[0],$]),C=_(S,x[0],T,A,E.output.dims,P.output.dims);return[S.run(Object.assign(Object.assign({},g),{cacheHint:w.cacheKey,get:()=>C}),[x[0],$,I])]},c=(S,x,w,T,A)=>{const[E,$]=S.calculateTextureWidthAndHeight(x.dims,l.TextureType.unpacked),P=A.length;if(w<1||T<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(A.length!==1)throw new Error("Dimensionality of the output should be 1");if(A[0]!==w)throw new Error("Shape of the output should be equal to logical row count");const I=(0,s.getGlsl)(S.session.backend.glContext.version),C=`
      float process(int[${P}] indices) {
        int logical_row_start_offset = indices[0] * ${T};

        float max = getColorAsFloat(${I.texture2D}(A, offsetToCoords(logical_row_start_offset, ${E},
        ${$} )));
        for(int i=1; i<${T}; ++i)
        {
          float current = getColorAsFloat(${I.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${E}, ${$})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},d),{output:{dims:A,type:x.type,textureType:l.TextureType.unpacked},shaderSource:C})},y=(S,x,w,T,A,E)=>{const[$,P]=S.calculateTextureWidthAndHeight(x.dims,l.TextureType.unpacked),I=E.length;if(w<1||T<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(E.length!==1)throw new Error("Dimensionality of the output should be 1");if(E[0]!==w)throw new Error("Shape of the output should be equal to logical row count");if(A.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(A[0]!==w)throw new Error("Shape of the intermediate results should be equal to logical row count");const C=`
      float process(int[${I}] indices) {
        int logical_row_start_offset = indices[0] * ${T};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${T}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,s.getGlsl)(S.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${$}, ${P}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},v),{output:{dims:E,type:x.type,textureType:l.TextureType.unpacked},shaderSource:C})},_=(S,x,w,T,A,E)=>{const[$,P]=S.calculateTextureWidthAndHeight(x.dims,l.TextureType.unpacked),I=x.dims.length;if(w<1||T<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(A.length!==1||E.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(A[0]!==w||E[0]!==w)throw new Error("Shape of the intermediate results should be equal to logical row count");const C=`
      float process(int[${I}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${$}, ${P});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${T};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},g),{output:{dims:x.dims,type:x.type,textureType:l.TextureType.unpacked},shaderSource:C})},b=S=>{if(!S||S.length!==1)throw new Error("Softmax requires 1 input.");if(S[0].type!=="float32"&&S[0].type!=="float64")throw new Error("Invalid input type")}},564:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseSplitAttributes=t.split=void 0;const a=r(4910),o=r(7273),s=r(5639),l={name:"Split",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};t.split=(g,f,c)=>{v(f);const y=o.ShapeUtil.normalizeAxis(c.axis,f[0].dims.length),_=u(g,f,y,c),b=[];for(let S=0;S<_;++S)b.push(g.run(Object.assign(Object.assign({},l),{cacheHint:`${c.cacheKey};${S}`,get:()=>d(g,f[0],c,y,S)}),f));return b},t.parseSplitAttributes=g=>{const f=g.attributes.getInt("axis",0),c=g.attributes.getInts("split",[]),y=g.outputs.length;return(0,a.createAttributeWithCacheKey)({axis:f,split:c,numOutputs:y})};const u=(g,f,c,y)=>{const[,_]=o.SplitUtil.splitShape(f[0].dims,c,y.split,y.numOutputs);return _.length},d=(g,f,c,y,_)=>{const[b,S]=o.SplitUtil.splitShape(f.dims,y,c.split,c.numOutputs),x=S[_],w=b[_],T=`
      float process(int indices[${w.length}]) {
        indices[${y}] += ${x};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},l),{cacheHint:`${c.cacheKey}:${_}`,output:{dims:w,type:f.type,textureType:s.TextureType.unpacked},shaderSource:T})},v=g=>{if(!g||g.length!==1)throw new Error("Split requires one input.");if(g[0].type!=="int8"&&g[0].type!=="uint8"&&g[0].type!=="int16"&&g[0].type!=="uint16"&&g[0].type!=="int32"&&g[0].type!=="uint32"&&g[0].type!=="float32"&&g[0].type!=="float64"&&g[0].type!=="bool")throw new Error("Invalid input type.")}},5416:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseSqueezeAttributes=t.squeezeV13=t.squeeze=void 0;const a=r(7273);t.squeeze=(l,u,d)=>{o(u);const v=a.ShapeUtil.squeezeShape(u[0].dims,d);return[l.reshapeUnpacked(u[0],v)]},t.squeezeV13=(l,u)=>(s(u),(0,t.squeeze)(l,[u[0]],Array.from(u[1].integerData))),t.parseSqueezeAttributes=l=>l.attributes.getInts("axes");const o=l=>{if(!l||l.length!==1)throw new Error("Squeeze requires 1 input.");if(l[0].type==="string")throw new Error("invalid input tensor types.")},s=l=>{if(!l||l.length!==2)throw new Error("Squeeze requires 2 inputs.");if(l[1].type!=="int32")throw new Error("Invalid input type.")}},1240:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sum=void 0;const a=r(6757),o=r(5639);t.sum=(u,d)=>{l(d);const v={name:"Sum",inputNames:d.map((g,f)=>`X${f}`),inputTypes:new Array(d.length).fill(o.TextureType.unpacked)};return[u.run(Object.assign(Object.assign({},v),{get:()=>s(u,d,v)}),d)]};const s=(u,d,v)=>{const g=(0,a.getGlsl)(u.session.backend.glContext.version),f=d[0].dims.slice(),c=`
      void main() {
        vec4 result = ${d.map((y,_)=>`${g.texture2D}(X${_},TexCoords)`).join(" + ")};
        ${g.output} = result;
      }
    `;return Object.assign(Object.assign({},v),{output:{dims:f,type:d[0].type,textureType:o.TextureType.unpacked},hasMain:!0,shaderSource:c})},l=u=>{if(!u||u.length===0)throw new Error("Sum requires inputs.");const d=u[0].dims.length;for(let v=1;v<u.length;v++){if(d!==u[v].dims.length)throw new Error("Input shapes are mismatched.");for(let g=0;g<d;g++)if(u[0].dims[g]!==u[v].dims[g])throw new Error("Input shapes are not matched.")}if(u[0].type!=="float32"&&u[0].type!=="float64")throw new Error("Invalid input type.");for(let v=1;v<u.length;v++)if(u[0].type!==u[v].type)throw new Error("Input types are not matched.")}},5944:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tile=void 0;const a=r(6145),o=r(5639);t.tile=(u,d)=>{l(d);const v={name:"Tile",inputNames:["A"],inputTypes:[o.TextureType.unpacked]};return[u.run(Object.assign(Object.assign({},v),{get:()=>s(u,d,v)}),d)]};const s=(u,d,v)=>{const g=d[0].dims.slice(),f=new Array(g.length),c=[];for(let b=0;b<g.length;b++)f[b]=g[b]*d[1].numberData[b],c.push(`inputIdx[${b}] = int(mod(float(outputIdx[${b}]), ${g[b]}.));`);const y=f.length,_=`
      float process(int outputIdx[${y}]) {
        int inputIdx[${y}];
        ${c.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},v),{output:{dims:f,type:d[0].type,textureType:o.TextureType.unpacked},shaderSource:_})},l=u=>{if(!u||u.length!==2)throw new Error("Tile requires 2 input.");if(u[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(u[1].dims[0]!==u[0].dims.length)throw new Error("Invalid input shape.");if(a.NUMBER_TYPES.indexOf(u[0].type)===-1)throw new Error("Invalid input type.");if(u[1].type!=="int32"&&u[1].type!=="int16")throw new Error("Invalid repeat type.")}},5707:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransposeAttributes=t.transpose=void 0;const a=r(4910),o=r(7273),s=r(5639),l={name:"Transpose",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};t.transpose=(c,y,_)=>(f(y),[c.run(Object.assign(Object.assign({},l),{cacheHint:_.cacheKey,get:()=>u(c,y[0],_.perm)}),y)]),t.parseTransposeAttributes=c=>(0,a.createAttributeWithCacheKey)({perm:c.attributes.getInts("perm",[])});const u=(c,y,_)=>{const b=y.dims;_=d(b,_);const S=v(b,_),x=b.length,w=`
      ${g("perm",_,x)}
      float process(int indices[${x}]) {
        int a[${x}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},l),{output:{dims:S,type:y.type,textureType:s.TextureType.unpacked},shaderSource:w})},d=(c,y)=>(y&&y.length!==c.length&&(y=[...c.keys()].reverse()),y),v=(c,y)=>(y=d(c,y),o.ShapeUtil.sortBasedOnPerm(c,y)),g=(c,y,_)=>{const b=[];b.push(`void ${c}(out int a[${_}], int src[${_}]) {`);for(let S=0;S<_;++S)b.push(`	a[${y[S]}]=src[${S}];`);return b.push("	}"),b.join(`
`)},f=c=>{if(!c||c.length!==1)throw new Error("Transpose requires 1 input.");if(c[0].type!=="float32"&&c[0].type!=="float64")throw new Error("input should be float tensor")}},2488:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeAsUint8=void 0;const a=r(6757),o=r(5639);t.encodeAsUint8=(s,l)=>{const u=l.shape,d=(0,a.getGlsl)(s.session.backend.glContext.version),v=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${d.texture2D}(X,TexCoords).r;
      ${d.output} = encodeAsUint8(value);
    }`,g={name:"Uint8Encode",inputTypes:[o.TextureType.unpacked],inputNames:["X"],output:{dims:u,type:l.tensor.type,textureType:o.TextureType.downloadUint8AsFloat},shaderSource:v,hasMain:!0};return s.executeProgram(g,[l.tensor])}},9087:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tanh=t.tan=t.sqrt=t.sin=t.sigmoid=t.relu=t.not=t.neg=t.log=t.parseLeakyReluAttributes=t.leakyRelu=t.identity=t.floor=t.exp=t.parseEluAttributes=t.elu=t.cos=t.ceil=t.clipV11=t.parseClipAttributes=t.clip=t.atan=t.asin=t.acos=t.abs=t.glslTanh=t.glslTan=t.glslSqrt=t.glslSigmoid=t.glslRelu=t.glslSin=t.glslNot=t.glslNeg=t.glslLog=t.glslLeakyRelu=t.glslIdentity=t.glslClip=t.glslFloor=t.glslExp=t.glslElu=t.glslCos=t.glslCeil=t.glslAtan=t.glslAsin=t.glslAcos=t.glslAbs=void 0;const a=r(4910),o=r(7273),s=r(1997),l=r(6757),u=r(5639);function d(){return N("abs")}function v(){return N("acos")}function g(){return N("asin")}function f(){return N("atan")}function c(){return N("ceil")}function y(){return N("cos")}function _(L){const B="elu";return{body:`
  const float alpha = float(${L});

  float ${B}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${B}_(vec4 v) {
    return vec4(${B}_(v.x), ${B}_(v.y), ${B}_(v.z), ${B}_(v.w));
  }
  `,name:B,type:s.FunctionType.ValueBased}}function b(){return N("exp")}function S(){return N("floor")}function x(L,B){const V="clip";return{body:`
  const float min = float(${L});
  const float max = float(${B});

  float ${V}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${V}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:V,type:s.FunctionType.ValueBased}}function w(){const L="indentity";return{body:`
  float ${L}_(float a) {
    return a;
  }
  vec4 ${L}_(vec4 v) {
    return v;
  }
  `,name:L,type:s.FunctionType.ValueBased}}function T(L){const B="leakyRelu";return{body:`
  const float alpha = float(${L});

  float ${B}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${B}_(vec4 v) {
    return vec4(${B}_(v.x), ${B}_(v.y), ${B}_(v.z), ${B}_(v.w));
  }
  `,name:B,type:s.FunctionType.ValueBased}}function A(){return N("log")}function E(){const L="neg";return{body:`
  float ${L}_(float a) {
    return -a;
  }
  vec4 ${L}_(vec4 v) {
    return -v;
  }
  `,name:L,type:s.FunctionType.ValueBased}}function $(){const L="not";return{body:`
  float ${L}_(float a) {
    return float( ! bool(a) );
  }
  bool ${L}_(bool a) {
    return !a;
  }
  vec4 ${L}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${L}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:L,type:s.FunctionType.ValueBased}}function P(){return N("sin")}function I(){const L="relu";return{body:`
  float ${L}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${L}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:L,type:s.FunctionType.ValueBased}}function C(){const L="sigmoid";return{body:`
  float ${L}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${L}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:L,type:s.FunctionType.ValueBased}}function M(){return N("sqrt")}function D(){return N("tan")}function R(){const L="tanh";return{body:`
  float ${L}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${L}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:L,type:s.FunctionType.ValueBased}}function N(L){return{body:`
  float ${L}_(float a) {
    return ${L}(a);
  }
  vec4 ${L}_(vec4 v) {
    return ${L}(v);
  }
  `,name:L,type:s.FunctionType.ValueBased}}t.glslAbs=d,t.glslAcos=v,t.glslAsin=g,t.glslAtan=f,t.glslCeil=c,t.glslCos=y,t.glslElu=_,t.glslExp=b,t.glslFloor=S,t.glslClip=x,t.glslIdentity=w,t.glslLeakyRelu=T,t.glslLog=A,t.glslNeg=E,t.glslNot=$,t.glslSin=P,t.glslRelu=I,t.glslSigmoid=C,t.glslSqrt=M,t.glslTan=D,t.glslTanh=R;const O=(L,B,V,H)=>{const X=L.session.pack?u.TextureType.packed:u.TextureType.unpacked,U={name:V.name,inputTypes:[X],inputNames:["A"],cacheHint:H};return Object.assign(Object.assign({},U),{get:()=>((te,ee,q,ie)=>{const pe=te.session.pack?u.TextureType.packed:u.TextureType.unpacked,j=(0,l.getGlsl)(te.session.backend.glContext.version);return Object.assign(Object.assign({},ee),{output:{dims:q.dims,type:q.type,textureType:pe},shaderSource:`
     ${ie.body}
     void main() {
       vec4 v = ${j.texture2D}(A, TexCoords);
       v = ${ie.name}_(v);
       ${j.output} = v;
     }
     `,hasMain:!0})})(L,U,B,V)})};t.abs=(L,B)=>[L.run(O(L,B[0],d()),B)],t.acos=(L,B)=>[L.run(O(L,B[0],v()),B)],t.asin=(L,B)=>[L.run(O(L,B[0],g()),B)],t.atan=(L,B)=>[L.run(O(L,B[0],f()),B)],t.clip=(L,B,V)=>[L.run(O(L,B[0],x(V.min,V.max),V.cacheKey),B)],t.parseClipAttributes=L=>(0,a.createAttributeWithCacheKey)({min:L.attributes.getFloat("min",o.MIN_CLIP),max:L.attributes.getFloat("max",o.MAX_CLIP)}),t.clipV11=(L,B)=>{const V=F(L,B);return(0,t.clip)(L,[B[0]],V)};const F=(L,B)=>{if(B.length>=3&&(!L.session.isInitializer(B[1].dataId)||!L.session.isInitializer(B[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const V=B.length>=3?B[1].numberData[0]:o.MIN_CLIP,H=B.length>=3?B[2].numberData[0]:o.MAX_CLIP;return(0,a.createAttributeWithCacheKey)({min:V,max:H})};t.ceil=(L,B)=>[L.run(O(L,B[0],c()),B)],t.cos=(L,B)=>[L.run(O(L,B[0],y()),B)],t.elu=(L,B,V)=>[L.run(O(L,B[0],_(V.alpha),V.cacheKey),B)],t.parseEluAttributes=L=>(0,a.createAttributeWithCacheKey)({alpha:L.attributes.getFloat("alpha",1)}),t.exp=(L,B)=>[L.run(O(L,B[0],b()),B)],t.floor=(L,B)=>[L.run(O(L,B[0],S()),B)],t.identity=(L,B)=>[L.run(O(L,B[0],w()),B)],t.leakyRelu=(L,B,V)=>[L.run(O(L,B[0],T(V.alpha),V.cacheKey),B)],t.parseLeakyReluAttributes=L=>(0,a.createAttributeWithCacheKey)({alpha:L.attributes.getFloat("alpha",.01)}),t.log=(L,B)=>[L.run(O(L,B[0],A()),B)],t.neg=(L,B)=>[L.run(O(L,B[0],E()),B)],t.not=(L,B)=>[L.run(O(L,B[0],$()),B)],t.relu=(L,B)=>[L.run(O(L,B[0],I()),B)],t.sigmoid=(L,B)=>[L.run(O(L,B[0],C()),B)],t.sin=(L,B)=>[L.run(O(L,B[0],P()),B)],t.sqrt=(L,B)=>[L.run(O(L,B[0],M()),B)],t.tan=(L,B)=>[L.run(O(L,B[0],D()),B)],t.tanh=(L,B)=>[L.run(O(L,B[0],R()),B)]},540:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUnpackProgramInfoLoader=t.createUnpackProgramInfo=void 0;const a=r(6757),o=r(5639),s=r(432),l=r(5614),u={name:"unpack",inputNames:["A"],inputTypes:[o.TextureType.packed]};t.createUnpackProgramInfo=(d,v)=>{const g=v.dims.length,f=(0,l.getChannels)("rc",g),c=f.slice(-2),y=(0,s.getCoordsDataType)(g),_=(0,l.unpackFromChannel)(),b=v.dims.length===0?"":function(w,T){if(w===1)return"rc";let A="";for(let E=0;E<w;E++)A+=T[E],E<w-1&&(A+=",");return A}(g,f),S=g<=1?"rc":`vec2(${c.join(",")})`,x=`
    ${_}
    void main() {
      ${y} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${b});

       ${(0,a.getGlsl)(d.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${S}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},u),{hasMain:!0,output:{dims:v.dims,type:v.type,textureType:o.TextureType.unpacked},shaderSource:x})},t.createUnpackProgramInfoLoader=(d,v)=>Object.assign(Object.assign({},u),{get:()=>(0,t.createUnpackProgramInfo)(d,v)})},7862:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnsqueezeAttributes=t.unsqueezeV13=t.unsqueeze=void 0;const a=r(7273);t.unsqueeze=(l,u,d)=>{o(u);const v=a.ShapeUtil.unsqueezeShape(u[0].dims,d);return[l.reshapeUnpacked(u[0],v)]},t.unsqueezeV13=(l,u)=>(s(u),(0,t.unsqueeze)(l,[u[0]],Array.from(u[1].integerData))),t.parseUnsqueezeAttributes=l=>l.attributes.getInts("axes");const o=l=>{if(!l||l.length!==1)throw new Error("Unsqueeze requires 1 input.");if(l[0].type==="string")throw new Error("invalid input tensor types.")},s=l=>{if(!l||l.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(l[1].type!=="int32")throw new Error("Invalid input type.")}},3980:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.scalesValidation=t.validateInputs=t.parseUpsampleAttributes=t.parseUpsampleAttributesV9=t.parseUpsampleAttributesV7=t.upsample=void 0;const a=r(4910),o=r(6757),s=r(5639),l={name:"Upsample",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};t.upsample=(d,v,g)=>((0,t.validateInputs)(v,g),[d.run(Object.assign(Object.assign({},l),{cacheHint:g.cacheKey,get:()=>u(d,v,g)}),v)]),t.parseUpsampleAttributesV7=d=>(0,t.parseUpsampleAttributes)(d,7),t.parseUpsampleAttributesV9=d=>(0,t.parseUpsampleAttributes)(d,9),t.parseUpsampleAttributes=(d,v)=>{const g=v>=10,f=d.attributes.getString("mode","nearest");if(f!=="nearest"&&f!=="linear"&&(v<11||f!=="cubic"))throw new Error(`unrecognized mode: ${f}`);let c=[];v<9&&(c=d.attributes.getFloats("scales"),(0,t.scalesValidation)(c,f,g));const y=d.attributes.getFloat("extrapolation_value",0),_=v>10?d.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(_)===-1)throw new Error(`coordinate_transform_mode '${_}' is not supported`);const b=_==="tf_crop_and_resize",S=b,x=f==="nearest"&&v>=11?d.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(x)===-1)throw new Error(`nearest_mode '${x}' is not supported`);const w=d.attributes.getFloat("cubic_coeff_a",-.75),T=d.attributes.getInt("exclude_outside",0)!==0;if(T&&f!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const A=v<11||f==="nearest"&&_==="asymmetric"&&x==="floor";let E=0,$=0,P=0;return v>10?d.inputs.length>2?(E=1,$=2,P=3):($=1,P=2):v===9&&($=1),(0,a.createAttributeWithCacheKey)({opset:v,isResize:g,mode:f,scales:c,extrapolationValue:y,coordinateTransformMode:_,useExtrapolation:S,needRoiInput:b,nearestMode:x,cubicCoefficientA:w,excludeOutside:T,useNearest2xOptimization:A,roiInputIdx:E,scalesInputIdx:$,sizesInputIdx:P})};const u=(d,v,g)=>{const f=(0,o.getGlsl)(d.session.backend.glContext.version),[c,y]=d.calculateTextureWidthAndHeight(v[0].dims,s.TextureType.unpacked),_=v[0].dims.map((P,I)=>Math.floor(P*g.scales[I])),[b,S]=d.calculateTextureWidthAndHeight(_,s.TextureType.unpacked),x=_.length,w=new Array(x),T=new Array(x);let A=`
      int output_pitches[${x}];
      int input_pitches[${x}];
      `;for(let P=x-1;P>=0;P--)w[P]=P===x-1?1:w[P+1]*_[P+1],T[P]=P===x-1?1:T[P+1]*v[0].dims[P+1],A+=`
        output_pitches[${P}] = ${w[P]};
        input_pitches[${P}] = ${T[P]};
        `;const E=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${c}, ${y});
        float value = getColorAsFloat(${f.texture2D}(X, coords));
        return value;
      }
      `,$=g.mode==="nearest"?`
    ${E}
    float process(int indices[${x}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${b}, ${S});

      ${A}

      int d, m;
      for (int dim = 0; dim < ${x}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:x===4?`
    ${E}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${b}, ${S});

      ${A}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${v[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${E}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${b}, ${S});

      ${A}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${v[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},l),{output:{dims:_,type:v[0].type,textureType:s.TextureType.unpacked},shaderSource:$,variables:[{name:"scales",type:"int",arrayLength:g.scales.length,data:g.scales.map(P=>Math.ceil(P))}]})};t.validateInputs=(d,v)=>{if(!d||v.opset<9&&d.length!==1||v.opset>=9&&v.opset<11&&d.length!==2||v.opset>=11&&d.length<2)throw new Error("invalid inputs.");if(v.scales.length>0&&d[0].dims.length!==v.scales.length)throw new Error("Invalid input shape.");if(d[0].type==="string")throw new Error("Invalid input tensor types.")},t.scalesValidation=(d,v,g)=>{if(g){for(const f of d)if(f<=0)throw new Error("Scale value should be greater than 0.")}else for(const f of d)if(f<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(v!=="linear"&&v!=="cubic"||d.length===2||d.length===4&&d[0]===1&&d[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${g?"Resize":"Upsample"} opeartor.`)}},2757:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramManager=void 0;const a=r(8453),o=r(1315),s=r(8897),l=r(6757);t.ProgramManager=class{constructor(u,d,v){this.profiler=u,this.glContext=d,this.textureLayoutStrategy=v,this.repo=new Map,this.attributesBound=!1}getArtifact(u){return this.repo.get(u)}setArtifact(u,d){this.repo.set(u,d)}run(u,d,v){var g;this.profiler.event("op",`ProgramManager.run ${(g=u.programInfo.name)!==null&&g!==void 0?g:"unknown kernel"}`,()=>{var f;const c=this.glContext.gl,y=u.program;c.useProgram(y);try{this.bindOutput(v),this.attributesBound||this.bindAttributes(u.attribLocations),this.bindUniforms(u.uniformLocations,(f=u.programInfo.variables)!==null&&f!==void 0?f:[],d)}catch(_){throw o.Logger.error("ProgramManager",u.programInfo.shaderSource),_}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(u=>this.glContext.deleteProgram(u.program))}build(u,d,v){return this.profiler.event("backend","ProgramManager.build",()=>{const g=new s.GlslPreprocessor(this.glContext,u,d,v),f=g.preprocess(),c=this.compile(f);return{programInfo:u,program:c,uniformLocations:this.getUniformLocations(c,g.context.programInfo.inputNames,g.context.programInfo.variables),attribLocations:this.getAttribLocations(c)}})}compile(u){if(!this.vertexShader){o.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const g=(0,l.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(g,this.glContext.gl.VERTEX_SHADER)}a.env.debug&&o.Logger.verbose("ProrgramManager",`FragShader:
${u}
`);const d=this.glContext.compileShader(u,this.glContext.gl.FRAGMENT_SHADER),v=this.glContext.createProgram(this.vertexShader,d);return this.glContext.deleteShader(d),v}bindOutput(u){const d=u.width,v=u.height;o.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${d}/${v}, shape=${u.shape}, type=${u.tensor.type}`),this.glContext.attachFramebuffer(u.texture,d,v)}bindAttributes(u){const d=u.position,v=u.textureCoord;this.glContext.setVertexAttributes(d,v),this.attributesBound=!0}bindUniforms(u,d,v){var g;const f=this.glContext.gl;let c=0;for(const{name:y,type:_,location:b,arrayLength:S}of u){const x=(g=d.find(w=>w.name===y))===null||g===void 0?void 0:g.data;if(_!=="sampler2D"&&!x)throw new Error(`variable '${y}' does not have data defined in program info`);switch(_){case"sampler2D":this.bindTexture(v[c],b,c),c++;break;case"float":S?f.uniform1fv(b,x):f.uniform1f(b,x);break;case"int":S?f.uniform1iv(b,x):f.uniform1i(b,x);break;default:throw new Error(`Uniform not implemented: ${_}`)}}}bindTexture(u,d,v){this.glContext.bindTextureToUniform(u.texture,v,d)}getAttribLocations(u){return{position:this.getAttribLocation(u,"position"),textureCoord:this.getAttribLocation(u,"textureCoord")}}getUniformLocations(u,d,v){const g=[];if(d)for(const f of d)g.push({name:f,type:"sampler2D",location:this.getUniformLocation(u,f)});if(v)for(const f of v)g.push(Object.assign(Object.assign({},f),{location:this.getUniformLocation(u,f.name)}));return g}getUniformLocation(u,d){const v=this.glContext.gl.getUniformLocation(u,d);if(v===null)throw new Error(`Uniform ${d} not found.`);return v}getAttribLocation(u,d){return this.glContext.gl.getAttribLocation(u,d)}}},2171:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSessionHandler=void 0;const a=r(1315),o=r(5881),s=r(7860),l=r(4110),u=r(2757),d=r(7618),v=r(5243);t.WebGLSessionHandler=class{constructor(g,f){this.backend=g,this.context=f,this.layoutStrategy=new d.PreferLogicalStrategy(g.glContext.maxTextureSize),this.programManager=new u.ProgramManager(this.context.profiler,g.glContext,this.layoutStrategy),this.textureManager=new v.TextureManager(g.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:g.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=g.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new s.WebGLInferenceHandler(this)}onGraphInitialized(g){const f=g.getValues().filter(c=>c.from===-1&&c.tensor).map(c=>c.tensor.dataId);this.initializers=new Set(f)}isInitializer(g){return!!this.initializers&&this.initializers.has(g)}addInitializer(g){this.initializers.add(g)}getTextureData(g,f){return f?this.packedTextureDataCache.get(g):this.unpackedTextureDataCache.get(g)}setTextureData(g,f,c=!1){a.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),c?this.packedTextureDataCache.set(g,f):this.unpackedTextureDataCache.set(g,f)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(g=>this.textureManager.releaseTexture(g,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(g=>this.textureManager.releaseTexture(g,!0)),this.unpackedTextureDataCache=new Map}resolve(g,f,c){const y=(0,o.resolveOperator)(g,f,l.WEBGL_OP_RESOLVE_RULES);return{impl:y.opImpl,context:y.opInit?y.opInit(g,c):g}}}},9622:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Uint8DataEncoder=t.RGBAFloatDataEncoder=t.RedFloat32DataEncoder=void 0;const a=r(1315);t.RedFloat32DataEncoder=class{constructor(o,s=1){if(s===1)this.internalFormat=o.R32F,this.format=o.RED,this.textureType=o.FLOAT,this.channelSize=s;else{if(s!==4)throw new Error(`Invalid number of channels: ${s}`);this.internalFormat=o.RGBA32F,this.format=o.RGBA,this.textureType=o.FLOAT,this.channelSize=s}}encode(o,s){let l,u;return o.constructor!==Float32Array&&(a.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),u=new Float32Array(o)),s*this.channelSize>o.length?(a.Logger.warning("Encoder","Source data too small. Allocating larger array"),u=o,l=this.allocate(s*this.channelSize),u.forEach((d,v)=>l[v]=d)):(u=o,l=u),l}allocate(o){return new Float32Array(4*o)}decode(o,s){return this.channelSize===1?o.filter((l,u)=>u%4==0).subarray(0,s):o.subarray(0,s)}},t.RGBAFloatDataEncoder=class{constructor(o,s=1,l){if(s!==1&&s!==4)throw new Error(`Invalid number of channels: ${s}`);this.internalFormat=o.RGBA,this.format=o.RGBA,this.channelSize=s,this.textureType=l||o.FLOAT}encode(o,s){let l=o;return this.channelSize===1&&(a.Logger.verbose("Encoder","Exploding into a larger array"),l=this.allocate(s),o.forEach((u,d)=>l[4*d]=u)),l}allocate(o){return new Float32Array(4*o)}decode(o,s){return this.channelSize===1?o.filter((l,u)=>u%4==0).subarray(0,s):o.subarray(0,s)}},t.Uint8DataEncoder=class{constructor(o,s=1){if(this.channelSize=4,s===1)this.internalFormat=o.ALPHA,this.format=o.ALPHA,this.textureType=o.UNSIGNED_BYTE,this.channelSize=s;else{if(s!==4)throw new Error(`Invalid number of channels: ${s}`);this.internalFormat=o.RGBA,this.format=o.RGBA,this.textureType=o.UNSIGNED_BYTE,this.channelSize=s}}encode(o,s){return new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}allocate(o){return new Uint8Array(o*this.channelSize)}decode(o,s){if(o instanceof Uint8Array)return o.subarray(0,s);throw new Error(`Invalid array type: ${o.constructor}`)}}},7618:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBatchDim=t.sizeToSquarishShape=t.getRowsCols=t.sizeFromShape=t.isInt=t.parseAxisParam=t.squeezeShape=t.PreferLogicalStrategy=t.AlwaysKeepOriginalSizeStrategy=void 0;const a=r(1315),o=r(7273);function s(g,f){const c=[],y=[],_=f!=null&&Array.isArray(f)&&f.length===0,b=f==null||_?null:l(f,g).sort();let S=0;for(let x=0;x<g.length;++x){if(b!=null){if(b[S]===x&&g[x]!==1)throw new Error(`Can't squeeze axis ${x} since its dim '${g[x]}' is not 1`);(b[S]==null||b[S]>x)&&g[x]===1&&(c.push(g[x]),y.push(x)),b[S]<=x&&S++}g[x]!==1&&(c.push(g[x]),y.push(x))}return{newShape:c,keptDims:y}}function l(g,f){const c=f.length;return g=g==null?f.map((y,_)=>_):[].concat(g),(0,o.assert)(g.every(y=>y>=-c&&y<c),()=>`All values in axis param must be in range [-${c}, ${c}) but got axis ${g}`),(0,o.assert)(g.every(u),()=>`All values in axis param must be integers but got axis ${g}`),g.map(y=>y<0?c+y:y)}function u(g){return g%1==0}function d(g){if(g.length===0)return 1;let f=g[0];for(let c=1;c<g.length;c++)f*=g[c];return f}function v(g){const f=Math.ceil(Math.sqrt(g));return[f,Math.ceil(g/f)]}t.AlwaysKeepOriginalSizeStrategy=class{constructor(g){this.maxTextureSize=g}computeTextureWH(g,f){if(g.length===0)return[1,1];const c=this.maxTextureSize;if(f&&f.breakAxis!==void 0){const b=f.breakAxis>=g.length?1:g.slice(f.breakAxis).reduce((x,w)=>x*w),S=f.breakAxis<=0?1:g.slice(0,f.breakAxis).reduce((x,w)=>x*w);if(!(b>c||S>c))return[b,S];a.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${g}, breakAxis:${f.breakAxis}`)}const y=g.reduce((b,S)=>b*S);let _=Math.floor(Math.sqrt(y));for(;_<c&&_<y&&y%_!=0;_++);if(_>=c||y%_!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${g}`);return[_,y/_]}},t.PreferLogicalStrategy=class{constructor(g){this.maxTextureSize=g}computeTextureWH(g,f){const c=this.computeTexture(g,f);return f&&f.isPacked&&(c[0]/=2,c[1]/=2),f&&f.reverseWH?[c[1],c[0]]:c}computeTexture(g,f){const c=f&&f.isPacked;if(g.length===0)return c?[2,2]:[1,1];let y=this.maxTextureSize;if(f&&f.breakAxis!==void 0){const S=f.breakAxis>=g.length?1:g.slice(f.breakAxis).reduce((w,T)=>w*T),x=f.breakAxis<=0?1:g.slice(0,f.breakAxis).reduce((w,T)=>w*T);if(!(S>y||x>y))return[S,x];a.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${g}, breakAxis:${f.breakAxis}`)}let _=g.slice(0);c&&(y*=2,_=_.map((S,x)=>x>=_.length-2?_[x]%2==0?_[x]:_[x]+1:_[x]),_.length===1&&(_=[2,_[0]])),_.length!==2&&(_=s(_).newShape);const b=d(_);return _.length<=1&&b<=y?[1,b]:_.length===2&&_[0]<=y&&_[1]<=y?_:_.length===3&&_[0]*_[1]<=y&&_[2]<=y?[_[0]*_[1],_[2]]:_.length===3&&_[0]<=y&&_[1]*_[2]<=y?[_[0],_[1]*_[2]]:_.length===4&&_[0]*_[1]*_[2]<=y&&_[3]<=y?[_[0]*_[1]*_[2],_[3]]:_.length===4&&_[0]<=y&&_[1]*_[2]*_[3]<=y?[_[0],_[1]*_[2]*_[3]]:c?v(b/4).map(S=>2*S):v(b)}},t.squeezeShape=s,t.parseAxisParam=l,t.isInt=u,t.sizeFromShape=d,t.getRowsCols=function(g){if(g.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[g.length>1?g[g.length-2]:1,g[g.length-1]]},t.sizeToSquarishShape=v,t.getBatchDim=function(g,f=2){return d(g.slice(0,g.length-f))}},3314:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTextureLayoutFromShape=t.calculateTextureWidthAndHeight=t.createTextureLayoutFromTextureType=void 0;const a=r(7273),o=r(5639);t.createTextureLayoutFromTextureType=(s,l,u)=>{const d=u===o.TextureType.unpacked||u===o.TextureType.unpackedReversed?1:4,v=u===o.TextureType.packed,g=u===o.TextureType.unpackedReversed||u===o.TextureType.packed,f=u===o.TextureType.packedLastDimension?l.length-1:void 0,c=u===o.TextureType.packedLastDimension?l.map((y,_)=>_===l.length-1?4*y:y):void 0;return(0,t.createTextureLayoutFromShape)(s,l,d,c,{isPacked:v,reverseWH:g,breakAxis:f})},t.calculateTextureWidthAndHeight=(s,l,u)=>{const d=(0,t.createTextureLayoutFromTextureType)(s,l,u);return[d.width,d.height]},t.createTextureLayoutFromShape=(s,l,u=1,d,v)=>{const g=!(!v||!v.isPacked),[f,c]=s.computeTextureWH(g&&d||l,v),y=l.length;let _=l.slice(0);if(y===0&&(_=[1]),u===1)d=l;else if(g){if(u!==4)throw new Error("a packed texture must be 4-channel");d=l,y>0&&(_[y-1]=Math.ceil(_[y-1]/2)),y>1&&(_[y-2]=Math.ceil(_[y-2]/2))}else if(!d)throw new Error("Unpacked shape is needed when using channels > 1");return{width:f,height:c,channels:u,isPacked:g,shape:_,strides:a.ShapeUtil.computeStrides(_),unpackedShape:d,reversedWH:v&&v.reverseWH}}},5243:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextureManager=void 0;const a=r(1315);t.TextureManager=class{constructor(o,s,l,u){this.glContext=o,this.layoutStrategy=s,this.profiler=l,this.config=u,this.pendingRead=new Map,u.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(o,s,l,u){const d=this.toEncoderType(o),v=this.glContext.getEncoder(d,s.channels||1,u);if(s.isPacked&&u===1)throw new Error("not implemented");const g=s.width,f=s.height;let c,y;if(this.config.reuseTextures){c=`${g}x${f}_${v.format}_${v.internalFormat}_${v.textureType}`,y=this.inUseTextures.get(c),y||(y=[],this.inUseTextures.set(c,y));const b=this.idleTextures.get(c);if(b&&b.length>0){const S=b.pop();return y.push(S),u===1&&this.glContext.updateTexture(S,g,f,v,this.toTextureData(o,l)),S}}a.Logger.verbose("TextureManager",`Creating new texture of size ${s.width}x${s.height}`);const _=this.glContext.allocateTexture(g,f,v,this.toTextureData(o,l));return this.config.reuseTextures&&(y.push(_),this.textureLookup.set(_,c)),_}readTexture(o,s,l){return l||(l=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const u=o.shape.reduce((v,g)=>v*g)*l,d=this.glContext.readTexture(o.texture,o.width,o.height,u,this.toEncoderType(s),l);return this.toTensorData(s,d)})}async readTextureAsync(o,s,l){const u=o.tensor.dataId;if(l||(l=1),this.pendingRead.has(u)){const d=this.pendingRead.get(u);return new Promise(v=>d==null?void 0:d.push(v))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(u,[]);const d=o.shape.reduce((c,y)=>c*y)*l;await this.glContext.createAndWaitForFence();const v=this.glContext.readTexture(o.texture,o.width,o.height,d,this.toEncoderType(s),l),g=this.toTensorData(s,v),f=this.pendingRead.get(u);return this.pendingRead.delete(u),f==null||f.forEach(c=>c(g)),g})}readUint8TextureAsFloat(o){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const s=o.shape.reduce((u,d)=>u*d),l=this.glContext.readTexture(o.texture,o.width,o.height,4*s,"byte",4);return new Float32Array(l.buffer,l.byteOffset,s)})}releaseTexture(o,s){let l;if(this.config.reuseTextures&&(l=this.textureLookup.get(o.texture),l)){s&&this.textureLookup.delete(l);const u=this.inUseTextures.get(l);if(u){const d=u.indexOf(o.texture);if(d!==-1){u.splice(d,1);let v=this.idleTextures.get(l);v||(v=[],this.idleTextures.set(l,v)),v.push(o.texture)}}}l&&!s||(a.Logger.verbose("TextureManager",`Deleting texture of size ${o.width}x${o.height}`),this.glContext.deleteTexture(o.texture))}toTensorData(o,s){switch(o){case"int16":return s instanceof Int16Array?s:Int16Array.from(s);case"int32":return s instanceof Int32Array?s:Int32Array.from(s);case"int8":return s instanceof Int8Array?s:Int8Array.from(s);case"uint16":return s instanceof Uint16Array?s:Uint16Array.from(s);case"uint32":return s instanceof Uint32Array?s:Uint32Array.from(s);case"uint8":case"bool":return s instanceof Uint8Array?s:Uint8Array.from(s);case"float32":return s instanceof Float32Array?s:Float32Array.from(s);case"float64":return s instanceof Float64Array?s:Float64Array.from(s);default:throw new Error(`TensorData type ${o} is not supported`)}}toTextureData(o,s){if(s)return s instanceof Float32Array?s:new Float32Array(s)}toEncoderType(o){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},5639:(n,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TextureType=void 0,(r=t.TextureType||(t.TextureType={}))[r.unpacked=0]="unpacked",r[r.unpackedReversed=1]="unpackedReversed",r[r.packed=2]="packed",r[r.downloadUint8AsFloat=3]="downloadUint8AsFloat",r[r.packedLastDimension=4]="packedLastDimension"},432:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGlChannels=t.getCoordsDataType=t.getSqueezedParams=t.squeezeInputShape=t.generateShaderFuncNameFromInputSamplerNameAtOutCoords=t.generateShaderFuncNameFromInputSamplerName=t.repeatedTry=t.getPackedShape=void 0;const a=r(7273);t.getPackedShape=function(o){const s=o.length;return o.slice(0,s-1).concat(o[s-1]/4)},t.repeatedTry=async function(o,s=u=>0,l){return new Promise((u,d)=>{let v=0;const g=()=>{if(o())return void u();v++;const f=s(v);l!=null&&v>=l?d():setTimeout(g,f)};g()})},t.generateShaderFuncNameFromInputSamplerName=function(o){return(0,a.assert)(o!==void 0&&o.length!==0,()=>"empty string found for sampler name"),"get"+o.charAt(0).toUpperCase()+o.slice(1)},t.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(o){return(0,a.assert)(o!==void 0&&o.length!==0,()=>"empty string found for sampler name"),"get"+o.charAt(0).toUpperCase()+o.slice(1)+"AtOutCoords"},t.squeezeInputShape=function(o,s){let l=JSON.parse(JSON.stringify(o));return l=s,l},t.getSqueezedParams=function(o,s){return s.map(l=>o[l]).join(", ")},t.getCoordsDataType=function(o){if(o<=1)return"int";if(o===2)return"ivec2";if(o===3)return"ivec3";if(o===4)return"ivec4";if(o===5)return"ivec5";if(o===6)return"ivec6";throw Error(`GPU for rank ${o} is not yet supported`)},t.getGlChannels=function(o=6){return["x","y","z","w","u","v"].slice(0,o)}},3389:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNewWebGLContext=t.createWebGLContext=void 0;const a=r(1315),o=r(3524),s={};function l(u){const d=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const f=document.createElement("canvas");return f.width=1,f.height=1,f}();let v;const g={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!u||u==="webgl2")&&(v=d.getContext("webgl2",g),v))try{return new o.WebGLContext(v,2)}catch(f){a.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${f}`)}if((!u||u==="webgl")&&(v=d.getContext("webgl",g)||d.getContext("experimental-webgl",g),v))try{return new o.WebGLContext(v,1)}catch(f){a.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${f}`)}throw new Error("WebGL is not supported")}t.createWebGLContext=function u(d){let v;d&&d!=="webgl2"||!("webgl2"in s)?d&&d!=="webgl"||!("webgl"in s)||(v=s.webgl):v=s.webgl2,v=v||l(d),d=d||v.version===1?"webgl":"webgl2";const g=v.gl;return s[d]=v,g.isContextLost()?(delete s[d],u(d)):(g.disable(g.DEPTH_TEST),g.disable(g.STENCIL_TEST),g.disable(g.BLEND),g.disable(g.DITHER),g.disable(g.POLYGON_OFFSET_FILL),g.disable(g.SAMPLE_COVERAGE),g.enable(g.SCISSOR_TEST),g.enable(g.CULL_FACE),g.cullFace(g.BACK),v)},t.createNewWebGLContext=l},3524:function(n,t,r){var a=this&&this.__createBinding||(Object.create?function(g,f,c,y){y===void 0&&(y=c);var _=Object.getOwnPropertyDescriptor(f,c);_&&!("get"in _?!f.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return f[c]}}),Object.defineProperty(g,y,_)}:function(g,f,c,y){y===void 0&&(y=c),g[y]=f[c]}),o=this&&this.__setModuleDefault||(Object.create?function(g,f){Object.defineProperty(g,"default",{enumerable:!0,value:f})}:function(g,f){g.default=f}),s=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var f={};if(g!=null)for(var c in g)c!=="default"&&Object.prototype.hasOwnProperty.call(g,c)&&a(f,g,c);return o(f,g),f};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=t.linearSearchLastTrue=void 0;const l=r(8453),u=s(r(9622)),d=r(432);function v(g){let f=0;for(;f<g.length&&g[f]();++f);return f-1}t.linearSearchLastTrue=v,t.WebGLContext=class{constructor(g,f){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=g,this.version=f,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(g,f,c,y){const _=this.gl,b=_.createTexture();_.bindTexture(_.TEXTURE_2D,b),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE);const S=y?c.encode(y,g*f):null;return _.texImage2D(_.TEXTURE_2D,0,c.internalFormat,g,f,0,c.format,c.textureType,S),this.checkError(),b}updateTexture(g,f,c,y,_){const b=this.gl;b.bindTexture(b.TEXTURE_2D,g);const S=y.encode(_,f*c);b.texSubImage2D(b.TEXTURE_2D,0,0,0,f,c,y.format,y.textureType,S),this.checkError()}attachFramebuffer(g,f,c){const y=this.gl;y.bindTexture(y.TEXTURE_2D,g),y.bindFramebuffer(y.FRAMEBUFFER,this.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,g,0),this.checkError(),y.viewport(0,0,f,c),y.scissor(0,0,f,c)}readTexture(g,f,c,y,_,b){const S=this.gl;b||(b=1),this.frameBufferBound||this.attachFramebuffer(g,f,c);const x=this.getEncoder(_,b),w=x.allocate(f*c);return S.bindTexture(S.TEXTURE_2D,g),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,g,0),S.readPixels(0,0,f,c,S.RGBA,x.textureType,w),this.checkError(),x.decode(w,y)}isFramebufferReady(){return!0}getActiveTexture(){const g=this.gl;return"TEXTURE"+(g.getParameter(this.gl.ACTIVE_TEXTURE)-g.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(g,f){const c=this.gl;c.vertexAttribPointer(g,3,c.FLOAT,!1,20,0),c.enableVertexAttribArray(g),f!==-1&&(c.vertexAttribPointer(f,2,c.FLOAT,!1,20,12),c.enableVertexAttribArray(f)),this.checkError()}createProgram(g,f){const c=this.gl,y=c.createProgram();return c.attachShader(y,g),c.attachShader(y,f),c.linkProgram(y),y}compileShader(g,f){const c=this.gl,y=c.createShader(f);if(!y)throw new Error(`createShader() returned null with type ${f}`);if(c.shaderSource(y,g),c.compileShader(y),c.getShaderParameter(y,c.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${c.getShaderInfoLog(y)}
Shader source:
${g}`);return y}deleteShader(g){this.gl.deleteShader(g)}bindTextureToUniform(g,f,c){const y=this.gl;y.activeTexture(y.TEXTURE0+f),this.checkError(),y.bindTexture(y.TEXTURE_2D,g),this.checkError(),y.uniform1i(c,f),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(l.env.debug){const g=this.gl,f=g.getError();let c="";switch(f){case g.NO_ERROR:return;case g.INVALID_ENUM:c="INVALID_ENUM";break;case g.INVALID_VALUE:c="INVALID_VALUE";break;case g.INVALID_OPERATION:c="INVALID_OPERATION";break;case g.INVALID_FRAMEBUFFER_OPERATION:c="INVALID_FRAMEBUFFER_OPERATION";break;case g.OUT_OF_MEMORY:c="OUT_OF_MEMORY";break;case g.CONTEXT_LOST_WEBGL:c="CONTEXT_LOST_WEBGL";break;default:c=`Unknown WebGL Error: ${f.toString(16)}`}throw new Error(c)}}deleteTexture(g){this.gl.deleteTexture(g)}deleteProgram(g){this.gl.deleteProgram(g)}getEncoder(g,f,c=0){if(this.version===2)return new u.RedFloat32DataEncoder(this.gl,f);switch(g){case"float":return c===1||this.isRenderFloat32Supported?new u.RGBAFloatDataEncoder(this.gl,f):new u.RGBAFloatDataEncoder(this.gl,f,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new u.Uint8DataEncoder(this.gl,f);default:throw new Error(`Invalid dataType: ${g}`)}}clearActiveTextures(){const g=this.gl;for(let f=0;f<this.maxTextureImageUnits;++f)g.activeTexture(g.TEXTURE0+f),g.bindTexture(g.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,null),g.deleteFramebuffer(this.framebuffer),g.bindBuffer(g.ARRAY_BUFFER,null),g.deleteBuffer(this.vertexbuffer),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,null),g.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const g=this.gl,f=g.createBuffer();if(!f)throw new Error("createBuffer() returned null");const c=this.createDefaultGeometry();return g.bindBuffer(g.ARRAY_BUFFER,f),g.bufferData(g.ARRAY_BUFFER,c,g.STATIC_DRAW),this.checkError(),f}createFramebuffer(){const g=this.gl.createFramebuffer();if(!g)throw new Error("createFramebuffer returned null");return g}queryVitalParameters(){const g=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=g.getParameter(g.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=g.getParameter(g.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const g=this.gl,f=g.createTexture();g.bindTexture(g.TEXTURE_2D,f);const c=this.version===2?g.RGBA32F:g.RGBA;g.texImage2D(g.TEXTURE_2D,0,c,1,1,0,g.RGBA,g.FLOAT,null);const y=g.createFramebuffer();g.bindFramebuffer(g.FRAMEBUFFER,y),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,f,0);const _=g.checkFramebufferStatus(g.FRAMEBUFFER)===g.FRAMEBUFFER_COMPLETE;return g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,null),g.deleteTexture(f),g.deleteFramebuffer(y),_}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const g=this.gl;let f,c,y,_,b;try{f=g.createTexture(),c=g.createFramebuffer(),g.bindTexture(g.TEXTURE_2D,f);const S=this.version===2?g.RGBA32F:g.RGBA;return g.texImage2D(g.TEXTURE_2D,0,S,1,1,0,g.RGBA,g.FLOAT,null),g.bindFramebuffer(g.FRAMEBUFFER,c),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,f,0),g.enable(g.BLEND),y=g.createShader(g.VERTEX_SHADER),!!y&&(g.shaderSource(y,"void main(){}"),g.compileShader(y),_=g.createShader(g.FRAGMENT_SHADER),!!_&&(g.shaderSource(_,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),g.compileShader(_),b=g.createProgram(),!!b&&(g.attachShader(b,y),g.attachShader(b,_),g.linkProgram(b),g.useProgram(b),g.drawArrays(g.POINTS,0,1),g.getError()===g.NO_ERROR)))}finally{g.disable(g.BLEND),b&&g.deleteProgram(b),y&&g.deleteShader(y),_&&g.deleteShader(_),c&&(g.bindFramebuffer(g.FRAMEBUFFER,null),g.deleteFramebuffer(c)),f&&(g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(f))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const g=this.gl,f=this.disjointTimerQueryWebgl2Extension,c=g.createQuery();return g.beginQuery(f.TIME_ELAPSED_EXT,c),c}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const g=this.gl,f=this.disjointTimerQueryWebgl2Extension;g.endQuery(f.TIME_ELAPSED_EXT)}}isTimerResultAvailable(g){let f=!1,c=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const y=this.gl,_=this.disjointTimerQueryWebgl2Extension;f=y.getQueryParameter(g,y.QUERY_RESULT_AVAILABLE),c=y.getParameter(_.GPU_DISJOINT_EXT)}return f&&!c}getTimerResult(g){let f=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const c=this.gl;f=c.getQueryParameter(g,c.QUERY_RESULT),c.deleteQuery(g)}return f/1e6}async waitForQueryAndGetTime(g){return await(0,d.repeatedTry)(()=>this.isTimerResultAvailable(g)),this.getTimerResult(g)}async createAndWaitForFence(){const g=this.createFence(this.gl);return this.pollFence(g)}createFence(g){let f;const c=g,y=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);return g.flush(),f=y===null?()=>!0:()=>{const _=c.clientWaitSync(y,0,0);return _===c.ALREADY_SIGNALED||_===c.CONDITION_SATISFIED},{query:y,isFencePassed:f}}async pollFence(g){return new Promise(f=>{this.addItemToPoll(()=>g.isFencePassed(),()=>f())})}pollItems(){const g=v(this.itemsToPoll.map(f=>f.isDoneFn));for(let f=0;f<=g;++f){const{resolveFn:c}=this.itemsToPoll[f];c()}this.itemsToPoll=this.itemsToPoll.slice(g+1)}async addItemToPoll(g,f){this.itemsToPoll.push({isDoneFn:g,resolveFn:f}),this.itemsToPoll.length>1||await(0,d.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},6496:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionPlan=void 0;const a=r(1315);class o{constructor(l,u){this.op=l,this.node=u}}t.ExecutionPlan=class{constructor(s,l,u){this.graph=s,this.profiler=u,this.initialize(l)}initialize(s){this.profiler.event("session","ExecutionPlan.initialize",()=>{const l=this.graph.getNodes();if(l.length!==s.length)throw new Error("The size of nodes and OPs do not match.");this._ops=s.map((u,d)=>new o(u,l[d])),this.reset(),this._starter=[],this._ops.forEach((u,d)=>{let v=!0;for(const g of u.node.inputs)if(!this._values[g]&&this.graph.getInputIndices().indexOf(g)===-1){v=!1;break}v&&this._starter.push(d)})})}reset(){this._values=this.graph.getValues().map(s=>s.tensor)}async execute(s,l){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const u=s.createInferenceHandler(),d=this.graph.getInputIndices();if(l.length!==d.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${l.length} expected: ${d.length}`);l.forEach((_,b)=>{const S=d[b];this._values[S]=_});const v=this._starter.slice(0),g=this.graph.getValues(),f=this.graph.getNodes();let c=0;for(;c<v.length;){const _=v[c++],b=this._ops[_],S=b.node.inputs.map(A=>this._values[A]);if(S.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${b.node}`);const x=S;a.Logger.verbose("ExecPlan",`Runing op:${b.node.name} (${x.map((A,E)=>`'${b.node.inputs[E]}': ${A.type}[${A.dims.join(",")}]`).join(", ")})`);const w=await this.profiler.event("node",b.node.name,async()=>b.op.impl(u,x,b.op.context));if(w.length!==b.node.outputs.length)throw new Error("the size of output does not match model definition.");w.forEach((A,E)=>{const $=b.node.outputs[E];if(this._values[$])throw new Error(`output [${$}] already has value: op:${b.node.name}`);this._values[$]=A});const T=new Set;w.forEach((A,E)=>{const $=b.node.outputs[E];for(const P of g[$].to){const I=f[P];let C=!0;for(const M of I.inputs)if(!this._values[M]){C=!1;break}C&&T.add(P)}}),v.push(...T)}const y=[];for(let _=0;_<this.graph.getOutputIndices().length;_++){const b=this.graph.getOutputIndices()[_],S=this._values[b];if(S===void 0)throw new Error(`required output [${b}] does not have value`);b===0?await S.getData():S.data,y.push(S)}return a.Logger.verbose("ExecPlan","disposing of inferenceHandler"),u.dispose(),y})}}},4662:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;const a=r(1446),o=r(6874),s=r(1287),l=r(9240),u=r(7273);var d=s.onnxruntime.experimental.fbs;t.Graph={from:(c,y)=>new f(c,y)};class v{constructor(y){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,y&&(this.type=u.ProtoUtil.tensorValueTypeFromProto(y.type.tensorType))}get from(){return this._from}get to(){return this._to}}class g{constructor(y,_){y instanceof a.onnx.NodeProto?(this.name=y.name,this.opType=y.opType,this.attributes=new o.Attribute(y.attribute)):y instanceof d.Node&&(this.name=_??y.name(),this.opType=y.opType(),this.attributes=new o.Attribute(u.ProtoUtil.tensorAttributesFromORTFormat(y))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class f{constructor(y,_){if(!y)throw new TypeError("graph is empty");this.buildGraph(y),this.transformGraph(_),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(y){if(y instanceof a.onnx.GraphProto)this.buildGraphFromOnnxFormat(y);else{if(!(y instanceof d.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(y)}}buildGraphFromOnnxFormat(y){const _=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const b=new Map;if(!y.input)throw new Error("missing information in graph: input");const S=[];for(const x of y.input){if(_.has(x.name))throw new Error(`duplicated input name: ${x.name}`);const w=this._allData.push(new v(x))-1;_.set(x.name,w),S.push(x.name)}if(!y.initializer)throw new Error("missing information in graph: initializer");for(const x of y.initializer){let w=_.get(x.name);if(w===void 0){const T=new v;T.type={shape:{dims:u.ProtoUtil.tensorDimsFromProto(x.dims)},tensorType:u.ProtoUtil.tensorDataTypeFromProto(x.dataType)},w=this._allData.push(T)-1,_.set(x.name,w)}this._allData[w]._from=-1,this._allData[w].tensor=l.Tensor.fromProto(x)}for(let x=0;x<this._allData.length;x++)this._allData[x].tensor||(this._allInputIndices.push(x),this._allInputNames.push(S[x]));if(!y.output)throw new Error("missing information in graph: output");for(const x of y.output){if(_.has(x.name))throw new Error(`duplicated output name: ${x.name}`);const w=this._allData.push(new v(x))-1;_.set(x.name,w),this._allOutputIndices.push(w),this._allOutputNames.push(x.name)}if(!y.node)throw new Error("missing information in graph: node");for(const x of y.node){if(!x.name)for(let T=0;;T++){const A=`unnamed_${x.opType}_${T}`;if(!b.has(A)){x.name=A;break}}if(b.has(x.name))throw new Error(`duplicated node name: ${x.name}`);const w=this._nodes.push(new g(x))-1;b.set(x.name,w)}for(let x=0;x<this._nodes.length;x++){const w=this._nodes[x],T=y.node[x];if(!T.output)throw new Error(`missing output for node: ${T.name}`);for(const A of T.output){let E=_.get(A);if(E===void 0&&(E=this._allData.push(new v)-1,_.set(A,E)),w.outputs.push(E),this._allData[E]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${E}`);if(this._allData[E]._from=x,T.opType==="Constant"){if(!T.attribute||T.attribute.length!==1||!T.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!T.output||T.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");w.outputs.pop(),w.executeNode=!1,this._allData[E]._from=-1,this._allData[E].tensor=l.Tensor.fromProto(T.attribute[0].t)}}}for(let x=0;x<this._nodes.length;x++){const w=this._nodes[x],T=y.node[x];if(!T.input)throw new Error(`missing input for node: ${T.name}`);for(const A of T.input){const E=_.get(A);if(E===void 0){if(A===""&&T.input.length===3&&T.opType==="Resize")continue;throw new Error(`unrecognized input '${A}' for node: ${T.name}`)}w.inputs.push(E),this._allData[E]._to.push(x)}}return!0}buildGraphFromOrtFormat(y){var _,b,S;const x=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const w=new Map,T=[];for(let A=0;A<y.inputsLength();A++){const E=y.inputs(A);if(x.has(E))throw new Error(`duplicated input name: ${E}`);for(let $=0;$<y.nodeArgsLength();$++)if(((_=y.nodeArgs($))===null||_===void 0?void 0:_.name())===E){const P=new v;if(((S=(b=y.nodeArgs($))===null||b===void 0?void 0:b.type())===null||S===void 0?void 0:S.valueType())!==d.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const I=y.nodeArgs($).type().value(new d.TensorTypeAndShape),C=u.ProtoUtil.tensorDataTypeFromProto(I.elemType()),M=I.shape(),D=[];for(let N=0;N<M.dimLength();N++)D.push(u.LongUtil.longToNumber(M.dim(N).value().dimValue()));P.type={shape:{dims:D},tensorType:C};const R=this._allData.push(P)-1;x.set(E,R),T.push(E)}}for(let A=0;A<y.initializersLength();A++){const E=y.initializers(A);let $=x.get(E.name());if($===void 0){const P=new v,I=u.ProtoUtil.tensorDimsFromORTFormat(E),C=u.ProtoUtil.tensorDataTypeFromProto(E.dataType());P.type={shape:{dims:I},tensorType:C},$=this._allData.push(P)-1,x.set(E.name(),$)}this._allData[$]._from=-1,this._allData[$].tensor=l.Tensor.fromOrtTensor(E)}for(let A=0;A<this._allData.length;A++)this._allData[A].tensor||(this._allInputIndices.push(A),this._allInputNames.push(T[A]));for(let A=0;A<y.outputsLength();A++){const E=y.outputs(A);if(x.has(E))throw new Error(`duplicated output name: ${E}`);const $=this._allData.push(new v)-1;x.set(E,$),this._allOutputIndices.push($),this._allOutputNames.push(E)}if(!y.nodes)throw new Error("missing information in graph: node");for(let A=0;A<y.nodesLength();A++){const E=y.nodes(A);let $=E.name();if(!$)for(let I=0;$=`unnamed_${E.opType()}_${I}`,w.has($);I++);if(w.has($))throw new Error(`duplicated node name: ${$}`);const P=this._nodes.push(new g(E,$))-1;w.set($,P)}for(let A=0;A<this._nodes.length;A++){const E=this._nodes[A],$=y.nodes(A);if($==null)throw new Error(`No node exists at index ${A}`);if(($==null?void 0:$.outputsLength())===0)throw new Error(`missing output for node: ${$.name}`);for(let P=0;P<($==null?void 0:$.outputsLength());P++){const I=$==null?void 0:$.outputs(P);let C=x.get(I);if(C===void 0&&(C=this._allData.push(new v)-1,x.set(I,C)),E.outputs.push(C),this._allData[C]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${C}`);if(this._allData[C]._from=A,$.opType()==="Constant"){if($.attributesLength()!==1||!$.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if($.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");E.outputs.pop(),E.executeNode=!1,this._allData[C]._from=-1,this._allData[C].tensor=l.Tensor.fromOrtTensor($.attributes(0).t())}}}for(let A=0;A<this._nodes.length;A++){const E=this._nodes[A],$=y.nodes(A);if($.inputsLength()===0)throw new Error(`missing input for node: ${$.name}`);for(let P=0;P<$.inputsLength();P++){const I=$.inputs(P),C=x.get(I);if(C===void 0)throw new Error(`unrecognized input '${I}' for node: ${$.name()}`);E.inputs.push(C),this._allData[C]._to.push(A)}}}checkIsAcyclic(){const y=new Set;this._allInputIndices.forEach(S=>{this._allData[S]._to.forEach(x=>{y.add(x)})});const _=Array.from(y),b=new Array(this._nodes.length).fill("white");for(;_.length>0;){const S=_.pop();b[S]==="gray"?b[S]="black":(_.push(S),b[S]="gray",this._nodes[S].outputs.forEach(x=>{const w=this._allData[x];if(w.tensor!==void 0)throw new Error("node outputs should not be initialized");if(w._from!==S)throw new Error("from property of the Value object doesn't match index of Node being processed");w._to.forEach(T=>{if(b[T]==="gray")throw new Error("model graph is cyclic");b[T]==="white"&&_.push(T)})}))}}transformGraph(y){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),y&&y.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let y=0;const _=new Array(this._nodes.length,0);let b=0;for(let S=0;S<this._nodes.length;S++)_[S]=b,this._nodes[S].executeNode?(b!==S&&(this._nodes[b]=this._nodes[S]),b++):this._nodes[S].outputs.forEach(x=>{this._allData[x]._from=-2});this._nodes.splice(b,this._nodes.length-b);for(let S=0;S<this._allData.length;S++){const x=this._allData[S];x._from!==void 0&&x._from!==-1&&x._from!==-2&&(x._from=_[x._from]);for(let w=0;w<x._to.length;w++){if(!(x._to[w]>=0))throw new Error("Trying to update a removed node");x._to[w]=_[x._to[w]]}}y=0;for(let S=0;S<this._allData.length;S++)if(this._allData[S].from!==-2||this._allOutputIndices.indexOf(S+y)!==-1){if(y>0){let x=-1;this._allData[S].from!==void 0&&this._allData[S].from!==-1?(x=this._nodes[this._allData[S].from].outputs.indexOf(S+y),x!==-1&&(this._nodes[this._allData[S].from].outputs[x]=S)):(x=this._allInputIndices.indexOf(S+y),x!==-1&&(this._allInputIndices[x]=S)),this._allData[S].to.forEach(w=>{x=this._nodes[w].inputs.indexOf(S+y),x!==-1&&(this._nodes[w].inputs[x]=S)}),this._allData[S].to.length===0&&(x=this._allOutputIndices.indexOf(S+y),x!==-1&&(this._allOutputIndices[x]=S))}}else y++,this._allData.splice(S,1),S--}deleteNode(y){const _=this._nodes[y];if(_.outputs.length>1){for(let T=1;T<_.outputs.length;T++)if(this._allData[_.outputs[T]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}_.executeNode=!1;const b=_.inputs[0],S=_.outputs[0],x=this._allData[S].to;for(let T=0;T<_.inputs.length;T++){const A=this._allData[_.inputs[T]].to.indexOf(y);if(A===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[_.inputs[T]].to.splice(A,1)}this._allData[S]._to=[];const w=this._allOutputIndices.indexOf(S);if(w!==-1&&(this._allOutputIndices[w]=b),x&&x.length>0)for(const T of x){const A=this._nodes[T].inputs.indexOf(S);if(A===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[T].inputs[A]=b,this._allData[b].to.push(T)}}removeAllDropoutNodes(){let y=0;for(const _ of this._nodes){if(_.opType==="Dropout"){if(_.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(_.outputs.length!==1&&_.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(_.outputs.length===2&&this._allData[_.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(y)}y++}}removeAllIdentityNodes(){let y=0;for(const _ of this._nodes)_.opType==="Identity"&&this.deleteNode(y),y++}isActivation(y){switch(y.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const y of this._nodes)if(y.opType==="Conv"){const _=this._allData[y.outputs[0]]._to;if(_.length===1&&this.isActivation(this._nodes[_[0]])){const b=this._nodes[_[0]];if(b.opType==="Clip")if(b.inputs.length===1)try{y.attributes.set("activation_params","floats",[b.attributes.getFloat("min"),b.attributes.getFloat("max")])}catch{y.attributes.set("activation_params","floats",[u.MIN_CLIP,u.MAX_CLIP])}else{if(!(b.inputs.length>=3&&this._allData[b.inputs[1]].tensor!==void 0&&this._allData[b.inputs[2]].tensor!==void 0))continue;y.attributes.set("activation_params","floats",[this._allData[b.inputs[1]].tensor.floatData[0],this._allData[b.inputs[2]].tensor.floatData[0]])}y.attributes.set("activation","string",b.opType),this.deleteNode(_[0])}}}}},1315:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.now=t.Profiler=t.Logger=void 0;const r={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},a={none:new class{log(g,f,c){}},console:new class{log(g,f,c){console.log(`${this.color(g)} ${c?"\x1B[35m"+c+"\x1B[0m ":""}${f}`)}color(g){switch(g){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${g}`)}}}},o={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let s={"":o};function l(g,f,c,y){if(f===void 0)return _=g,{verbose:l.verbose.bind(null,_),info:l.info.bind(null,_),warning:l.warning.bind(null,_),error:l.error.bind(null,_),fatal:l.fatal.bind(null,_)};if(c===void 0)u(g,f);else if(typeof c=="number"&&y===void 0)u(g,f);else if(typeof c=="string"&&y===void 0)u(g,c,0,f);else{if(typeof c!="string"||typeof y!="number")throw new TypeError("input is valid");u(g,c,0,f)}var _}function u(g,f,c,y){const _=s[y||""]||s[""];r[g]<r[_.minimalSeverity]||(_.logDateTime&&(f=`${new Date().toISOString()}|${f}`),_.logSourceLocation,a[_.provider].log(g,f,y))}(function(g){function f(y){s={},c("",y||{})}function c(y,_){if(y==="*")f(_);else{const b=s[y]||o;s[y]={provider:_.provider||b.provider,minimalSeverity:_.minimalSeverity||b.minimalSeverity,logDateTime:_.logDateTime===void 0?b.logDateTime:_.logDateTime,logSourceLocation:_.logSourceLocation===void 0?b.logSourceLocation:_.logSourceLocation}}}g.verbose=function(y,_){g("verbose",y,_)},g.info=function(y,_){g("info",y,_)},g.warning=function(y,_){g("warning",y,_)},g.error=function(y,_){g("error",y,_)},g.fatal=function(y,_){g("fatal",y,_)},g.reset=f,g.set=c,g.setWithEnv=function(y){const _={};y.logLevel&&(_.minimalSeverity=y.logLevel),c("",_)}})(l||(l={})),t.Logger=l;class d{constructor(f,c,y,_,b,S){this.category=f,this.name=c,this.startTime=y,this.endCallback=_,this.timer=b,this.ctx=S}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class v{constructor(f,c,y,_){this.category=f,this.name=c,this.startTime=y,this.endTime=_}}t.Profiler=class{static create(g){return g===void 0?new this:new this(g.maxNumberEvents,g.flushBatchSize,g.flushIntervalInMilliseconds)}constructor(g,f,c){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=g===void 0?1e4:g,this._flushBatchSize=f===void 0?10:f,this._flushIntervalInMilliseconds=c===void 0?5e3:c}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,t.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(g,f,c,y){const _=this._started?this.begin(g,f,y):void 0;let b=!1;const S=c();if(S&&typeof S.then=="function")return b=!0,new Promise((x,w)=>{S.then(async T=>{_&&await _.end(),x(T)},async T=>{_&&await _.end(),w(T)})});if(!b&&_){const x=_.end();if(x&&typeof x.then=="function")return new Promise((w,T)=>{x.then(()=>{w(S)},A=>{T(A)})})}return S}begin(g,f,c){if(!this._started)throw new Error("profiler is not started yet");if(c===void 0){const y=(0,t.now)();return this.flush(y),new d(g,f,y,_=>this.endSync(_))}{const y=c.beginTimer();return new d(g,f,0,async _=>this.end(_),y,c)}}async end(g){const f=await g.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new v(g.category,g.name,g.startTime,f)),this.flush(f))}endSync(g){const f=(0,t.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new v(g.category,g.name,g.startTime,f)),this.flush(f))}logOneEvent(g){t.Logger.verbose(`Profiler.${g.category}`,`${(g.endTime-g.startTime).toFixed(2)}ms on event '${g.name}' at ${g.endTime.toFixed(2)}`)}flush(g){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||g-this._flushTime>=this._flushIntervalInMilliseconds){for(const f=this._flushPointer;this._flushPointer<f+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,t.now)()}}get started(){return this._started}},t.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},1745:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;const a=r(5686),o=r(1446),s=r(4662),l=r(1287),u=r(7273);var d=l.onnxruntime.experimental.fbs;t.Model=class{constructor(){}load(v,g,f){if(!f)try{return void this.loadFromOnnxFormat(v,g)}catch(c){if(f!==void 0)throw c}this.loadFromOrtFormat(v,g)}loadFromOnnxFormat(v,g){const f=o.onnx.ModelProto.decode(v);if(u.LongUtil.longToNumber(f.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=f.opsetImport.map(c=>({domain:c.domain,version:u.LongUtil.longToNumber(c.version)})),this._graph=s.Graph.from(f.graph,g)}loadFromOrtFormat(v,g){const f=new a.flatbuffers.ByteBuffer(v),c=d.InferenceSession.getRootAsInferenceSession(f).model();if(u.LongUtil.longToNumber(c.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let y=0;y<c.opsetImportLength();y++){const _=c.opsetImport(y);this._opsets.push({domain:_==null?void 0:_.domain(),version:u.LongUtil.longToNumber(_.version())})}this._graph=s.Graph.from(c.graph(),g)}get graph(){return this._graph}get opsets(){return this._opsets}}},6145:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FLOAT_TYPES=t.INT_TYPES=t.NUMBER_TYPES=void 0,t.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],t.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],t.FLOAT_TYPES=["float32","float64"]},5881:(n,t)=>{function r(a,o){if(o.endsWith("+")){const s=Number.parseInt(o.substring(0,o.length-1),10);return!isNaN(s)&&s<=a}if(o.split("-").length===2){const s=o.split("-"),l=Number.parseInt(s[0],10),u=Number.parseInt(s[1],10);return!isNaN(l)&&!isNaN(u)&&l<=a&&a<=u}return Number.parseInt(o,10)===a}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveOperator=void 0,t.resolveOperator=function(a,o,s){for(const l of s){const u=l[0],d=l[1],v=l[2],g=l[3],f=l[4];if(a.opType===u){for(const c of o)if((c.domain===d||c.domain==="ai.onnx"&&d==="")&&r(c.version,v))return{opImpl:g,opInit:f}}}throw new TypeError(`cannot resolve operator '${a.opType}' with opsets: ${o.map(l=>`${l.domain||"ai.onnx"} v${l.version}`).join(", ")}`)}},1287:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.onnxruntime=void 0;const a=r(5686);var o,s;o=t.onnxruntime||(t.onnxruntime={}),function(l){(function(u){u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.INT=2]="INT",u[u.STRING=3]="STRING",u[u.TENSOR=4]="TENSOR",u[u.GRAPH=5]="GRAPH",u[u.FLOATS=6]="FLOATS",u[u.INTS=7]="INTS",u[u.STRINGS=8]="STRINGS",u[u.TENSORS=9]="TENSORS",u[u.GRAPHS=10]="GRAPHS",u[u.SPARSE_TENSOR=11]="SPARSE_TENSOR",u[u.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(l.AttributeType||(l.AttributeType={}))}((s=o.experimental||(o.experimental={})).fbs||(s.fbs={})),function(l){(function(u){(function(d){(function(v){v[v.UNKNOWN=0]="UNKNOWN",v[v.VALUE=1]="VALUE",v[v.PARAM=2]="PARAM"})(d.DimensionValueType||(d.DimensionValueType={}))})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){(function(v){v[v.UNDEFINED=0]="UNDEFINED",v[v.FLOAT=1]="FLOAT",v[v.UINT8=2]="UINT8",v[v.INT8=3]="INT8",v[v.UINT16=4]="UINT16",v[v.INT16=5]="INT16",v[v.INT32=6]="INT32",v[v.INT64=7]="INT64",v[v.STRING=8]="STRING",v[v.BOOL=9]="BOOL",v[v.FLOAT16=10]="FLOAT16",v[v.DOUBLE=11]="DOUBLE",v[v.UINT32=12]="UINT32",v[v.UINT64=13]="UINT64",v[v.COMPLEX64=14]="COMPLEX64",v[v.COMPLEX128=15]="COMPLEX128",v[v.BFLOAT16=16]="BFLOAT16"})(d.TensorDataType||(d.TensorDataType={}))})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){(function(v){v[v.Primitive=0]="Primitive",v[v.Fused=1]="Fused"})(d.NodeType||(d.NodeType={}))})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){(function(v){v[v.NONE=0]="NONE",v[v.tensor_type=1]="tensor_type",v[v.sequence_type=2]="sequence_type",v[v.map_type=3]="map_type"})(d.TypeInfoValue||(d.TypeInfoValue={}))})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsShape(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsShape(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}dim(f,c){let y=this.bb.__offset(this.bb_pos,4);return y?(c||new l.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}dimLength(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.__vector_len(this.bb_pos+f):0}static startShape(f){f.startObject(1)}static addDim(f,c){f.addFieldOffset(0,c,0)}static createDimVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startDimVector(f,c){f.startVector(4,c,4)}static endShape(f){return f.endObject()}static createShape(f,c){return v.startShape(f),v.addDim(f,c),v.endShape(f)}}d.Shape=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsDimension(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsDimension(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}value(f){let c=this.bb.__offset(this.bb_pos,4);return c?(f||new l.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}denotation(f){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,f):null}static startDimension(f){f.startObject(2)}static addValue(f,c){f.addFieldOffset(0,c,0)}static addDenotation(f,c){f.addFieldOffset(1,c,0)}static endDimension(f){return f.endObject()}static createDimension(f,c,y){return v.startDimension(f),v.addValue(f,c),v.addDenotation(f,y),v.endDimension(f)}}d.Dimension=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsDimensionValue(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsDimensionValue(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}dimType(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readInt8(this.bb_pos+f):l.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}dimParam(f){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__string(this.bb_pos+c,f):null}static startDimensionValue(f){f.startObject(3)}static addDimType(f,c){f.addFieldInt8(0,c,l.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(f,c){f.addFieldInt64(1,c,f.createLong(0,0))}static addDimParam(f,c){f.addFieldOffset(2,c,0)}static endDimensionValue(f){return f.endObject()}static createDimensionValue(f,c,y,_){return v.startDimensionValue(f),v.addDimType(f,c),v.addDimValue(f,y),v.addDimParam(f,_),v.endDimensionValue(f)}}d.DimensionValue=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsTensorTypeAndShape(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsTensorTypeAndShape(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}elemType(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readInt32(this.bb_pos+f):l.experimental.fbs.TensorDataType.UNDEFINED}shape(f){let c=this.bb.__offset(this.bb_pos,6);return c?(f||new l.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startTensorTypeAndShape(f){f.startObject(2)}static addElemType(f,c){f.addFieldInt32(0,c,l.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(f,c){f.addFieldOffset(1,c,0)}static endTensorTypeAndShape(f){return f.endObject()}static createTensorTypeAndShape(f,c,y){return v.startTensorTypeAndShape(f),v.addElemType(f,c),v.addShape(f,y),v.endTensorTypeAndShape(f)}}d.TensorTypeAndShape=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsMapType(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsMapType(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}keyType(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readInt32(this.bb_pos+f):l.experimental.fbs.TensorDataType.UNDEFINED}valueType(f){let c=this.bb.__offset(this.bb_pos,6);return c?(f||new l.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startMapType(f){f.startObject(2)}static addKeyType(f,c){f.addFieldInt32(0,c,l.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(f,c){f.addFieldOffset(1,c,0)}static endMapType(f){return f.endObject()}static createMapType(f,c,y){return v.startMapType(f),v.addKeyType(f,c),v.addValueType(f,y),v.endMapType(f)}}d.MapType=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsSequenceType(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsSequenceType(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}elemType(f){let c=this.bb.__offset(this.bb_pos,4);return c?(f||new l.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startSequenceType(f){f.startObject(1)}static addElemType(f,c){f.addFieldOffset(0,c,0)}static endSequenceType(f){return f.endObject()}static createSequenceType(f,c){return v.startSequenceType(f),v.addElemType(f,c),v.endSequenceType(f)}}d.SequenceType=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(u.fbs||(u.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(d,v){return this.bb_pos=d,this.bb=v,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(d,v,g,f){return d.prep(4,12),d.writeInt32(f),d.writeInt32(g),d.writeInt32(v),d.offset()}}})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsNodeEdge(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsNodeEdge(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}nodeIndex(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readUint32(this.bb_pos+f):0}inputEdges(f,c){let y=this.bb.__offset(this.bb_pos,6);return y?(c||new l.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+y)+12*f,this.bb):null}inputEdgesLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}outputEdges(f,c){let y=this.bb.__offset(this.bb_pos,8);return y?(c||new l.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+y)+12*f,this.bb):null}outputEdgesLength(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}static startNodeEdge(f){f.startObject(3)}static addNodeIndex(f,c){f.addFieldInt32(0,c,0)}static addInputEdges(f,c){f.addFieldOffset(1,c,0)}static startInputEdgesVector(f,c){f.startVector(12,c,4)}static addOutputEdges(f,c){f.addFieldOffset(2,c,0)}static startOutputEdgesVector(f,c){f.startVector(12,c,4)}static endNodeEdge(f){return f.endObject()}static createNodeEdge(f,c,y,_){return v.startNodeEdge(f),v.addNodeIndex(f,c),v.addInputEdges(f,y),v.addOutputEdges(f,_),v.endNodeEdge(f)}}d.NodeEdge=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsNode(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsNode(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}name(f){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,f):null}docString(f){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,f):null}domain(f){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__string(this.bb_pos+c,f):null}sinceVersion(){let f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readInt32(this.bb_pos+f):0}index(){let f=this.bb.__offset(this.bb_pos,12);return f?this.bb.readUint32(this.bb_pos+f):0}opType(f){let c=this.bb.__offset(this.bb_pos,14);return c?this.bb.__string(this.bb_pos+c,f):null}type(){let f=this.bb.__offset(this.bb_pos,16);return f?this.bb.readInt32(this.bb_pos+f):l.experimental.fbs.NodeType.Primitive}executionProviderType(f){let c=this.bb.__offset(this.bb_pos,18);return c?this.bb.__string(this.bb_pos+c,f):null}inputs(f,c){let y=this.bb.__offset(this.bb_pos,20);return y?this.bb.__string(this.bb.__vector(this.bb_pos+y)+4*f,c):null}inputsLength(){let f=this.bb.__offset(this.bb_pos,20);return f?this.bb.__vector_len(this.bb_pos+f):0}outputs(f,c){let y=this.bb.__offset(this.bb_pos,22);return y?this.bb.__string(this.bb.__vector(this.bb_pos+y)+4*f,c):null}outputsLength(){let f=this.bb.__offset(this.bb_pos,22);return f?this.bb.__vector_len(this.bb_pos+f):0}attributes(f,c){let y=this.bb.__offset(this.bb_pos,24);return y?(c||new l.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}attributesLength(){let f=this.bb.__offset(this.bb_pos,24);return f?this.bb.__vector_len(this.bb_pos+f):0}inputArgCounts(f){let c=this.bb.__offset(this.bb_pos,26);return c?this.bb.readInt32(this.bb.__vector(this.bb_pos+c)+4*f):0}inputArgCountsLength(){let f=this.bb.__offset(this.bb_pos,26);return f?this.bb.__vector_len(this.bb_pos+f):0}inputArgCountsArray(){let f=this.bb.__offset(this.bb_pos,26);return f?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+f),this.bb.__vector_len(this.bb_pos+f)):null}implicitInputs(f,c){let y=this.bb.__offset(this.bb_pos,28);return y?this.bb.__string(this.bb.__vector(this.bb_pos+y)+4*f,c):null}implicitInputsLength(){let f=this.bb.__offset(this.bb_pos,28);return f?this.bb.__vector_len(this.bb_pos+f):0}static startNode(f){f.startObject(13)}static addName(f,c){f.addFieldOffset(0,c,0)}static addDocString(f,c){f.addFieldOffset(1,c,0)}static addDomain(f,c){f.addFieldOffset(2,c,0)}static addSinceVersion(f,c){f.addFieldInt32(3,c,0)}static addIndex(f,c){f.addFieldInt32(4,c,0)}static addOpType(f,c){f.addFieldOffset(5,c,0)}static addType(f,c){f.addFieldInt32(6,c,l.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(f,c){f.addFieldOffset(7,c,0)}static addInputs(f,c){f.addFieldOffset(8,c,0)}static createInputsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startInputsVector(f,c){f.startVector(4,c,4)}static addOutputs(f,c){f.addFieldOffset(9,c,0)}static createOutputsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startOutputsVector(f,c){f.startVector(4,c,4)}static addAttributes(f,c){f.addFieldOffset(10,c,0)}static createAttributesVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startAttributesVector(f,c){f.startVector(4,c,4)}static addInputArgCounts(f,c){f.addFieldOffset(11,c,0)}static createInputArgCountsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addInt32(c[y]);return f.endVector()}static startInputArgCountsVector(f,c){f.startVector(4,c,4)}static addImplicitInputs(f,c){f.addFieldOffset(12,c,0)}static createImplicitInputsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startImplicitInputsVector(f,c){f.startVector(4,c,4)}static endNode(f){return f.endObject()}static createNode(f,c,y,_,b,S,x,w,T,A,E,$,P,I){return v.startNode(f),v.addName(f,c),v.addDocString(f,y),v.addDomain(f,_),v.addSinceVersion(f,b),v.addIndex(f,S),v.addOpType(f,x),v.addType(f,w),v.addExecutionProviderType(f,T),v.addInputs(f,A),v.addOutputs(f,E),v.addAttributes(f,$),v.addInputArgCounts(f,P),v.addImplicitInputs(f,I),v.endNode(f)}}d.Node=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsValueInfo(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsValueInfo(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}name(f){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,f):null}docString(f){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,f):null}type(f){let c=this.bb.__offset(this.bb_pos,8);return c?(f||new l.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startValueInfo(f){f.startObject(3)}static addName(f,c){f.addFieldOffset(0,c,0)}static addDocString(f,c){f.addFieldOffset(1,c,0)}static addType(f,c){f.addFieldOffset(2,c,0)}static endValueInfo(f){return f.endObject()}static createValueInfo(f,c,y,_){return v.startValueInfo(f),v.addName(f,c),v.addDocString(f,y),v.addType(f,_),v.endValueInfo(f)}}d.ValueInfo=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsTypeInfo(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsTypeInfo(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}denotation(f){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,f):null}valueType(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.readUint8(this.bb_pos+f):l.experimental.fbs.TypeInfoValue.NONE}value(f){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__union(f,this.bb_pos+c):null}static startTypeInfo(f){f.startObject(3)}static addDenotation(f,c){f.addFieldOffset(0,c,0)}static addValueType(f,c){f.addFieldInt8(1,c,l.experimental.fbs.TypeInfoValue.NONE)}static addValue(f,c){f.addFieldOffset(2,c,0)}static endTypeInfo(f){return f.endObject()}static createTypeInfo(f,c,y,_){return v.startTypeInfo(f),v.addDenotation(f,c),v.addValueType(f,y),v.addValue(f,_),v.endTypeInfo(f)}}d.TypeInfo=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsOperatorSetId(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsOperatorSetId(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}domain(f){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,f):null}version(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}static startOperatorSetId(f){f.startObject(2)}static addDomain(f,c){f.addFieldOffset(0,c,0)}static addVersion(f,c){f.addFieldInt64(1,c,f.createLong(0,0))}static endOperatorSetId(f){return f.endObject()}static createOperatorSetId(f,c,y){return v.startOperatorSetId(f),v.addDomain(f,c),v.addVersion(f,y),v.endOperatorSetId(f)}}d.OperatorSetId=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsTensor(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsTensor(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}name(f){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,f):null}docString(f){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,f):null}dims(f){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.readInt64(this.bb.__vector(this.bb_pos+c)+8*f):this.bb.createLong(0,0)}dimsLength(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}dataType(){let f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readInt32(this.bb_pos+f):l.experimental.fbs.TensorDataType.UNDEFINED}rawData(f){let c=this.bb.__offset(this.bb_pos,12);return c?this.bb.readUint8(this.bb.__vector(this.bb_pos+c)+f):0}rawDataLength(){let f=this.bb.__offset(this.bb_pos,12);return f?this.bb.__vector_len(this.bb_pos+f):0}rawDataArray(){let f=this.bb.__offset(this.bb_pos,12);return f?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+f),this.bb.__vector_len(this.bb_pos+f)):null}stringData(f,c){let y=this.bb.__offset(this.bb_pos,14);return y?this.bb.__string(this.bb.__vector(this.bb_pos+y)+4*f,c):null}stringDataLength(){let f=this.bb.__offset(this.bb_pos,14);return f?this.bb.__vector_len(this.bb_pos+f):0}static startTensor(f){f.startObject(6)}static addName(f,c){f.addFieldOffset(0,c,0)}static addDocString(f,c){f.addFieldOffset(1,c,0)}static addDims(f,c){f.addFieldOffset(2,c,0)}static createDimsVector(f,c){f.startVector(8,c.length,8);for(let y=c.length-1;y>=0;y--)f.addInt64(c[y]);return f.endVector()}static startDimsVector(f,c){f.startVector(8,c,8)}static addDataType(f,c){f.addFieldInt32(3,c,l.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(f,c){f.addFieldOffset(4,c,0)}static createRawDataVector(f,c){f.startVector(1,c.length,1);for(let y=c.length-1;y>=0;y--)f.addInt8(c[y]);return f.endVector()}static startRawDataVector(f,c){f.startVector(1,c,1)}static addStringData(f,c){f.addFieldOffset(5,c,0)}static createStringDataVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startStringDataVector(f,c){f.startVector(4,c,4)}static endTensor(f){return f.endObject()}static createTensor(f,c,y,_,b,S,x){return v.startTensor(f),v.addName(f,c),v.addDocString(f,y),v.addDims(f,_),v.addDataType(f,b),v.addRawData(f,S),v.addStringData(f,x),v.endTensor(f)}}d.Tensor=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsSparseTensor(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsSparseTensor(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}values(f){let c=this.bb.__offset(this.bb_pos,4);return c?(f||new l.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}indices(f){let c=this.bb.__offset(this.bb_pos,6);return c?(f||new l.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}dims(f){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.readInt64(this.bb.__vector(this.bb_pos+c)+8*f):this.bb.createLong(0,0)}dimsLength(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}static startSparseTensor(f){f.startObject(3)}static addValues(f,c){f.addFieldOffset(0,c,0)}static addIndices(f,c){f.addFieldOffset(1,c,0)}static addDims(f,c){f.addFieldOffset(2,c,0)}static createDimsVector(f,c){f.startVector(8,c.length,8);for(let y=c.length-1;y>=0;y--)f.addInt64(c[y]);return f.endVector()}static startDimsVector(f,c){f.startVector(8,c,8)}static endSparseTensor(f){return f.endObject()}static createSparseTensor(f,c,y,_){return v.startSparseTensor(f),v.addValues(f,c),v.addIndices(f,y),v.addDims(f,_),v.endSparseTensor(f)}}d.SparseTensor=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsAttribute(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsAttribute(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}name(f){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,f):null}docString(f){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,f):null}type(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.readInt32(this.bb_pos+f):l.experimental.fbs.AttributeType.UNDEFINED}f(){let f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readFloat32(this.bb_pos+f):0}i(){let f=this.bb.__offset(this.bb_pos,12);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}s(f){let c=this.bb.__offset(this.bb_pos,14);return c?this.bb.__string(this.bb_pos+c,f):null}t(f){let c=this.bb.__offset(this.bb_pos,16);return c?(f||new l.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}g(f){let c=this.bb.__offset(this.bb_pos,18);return c?(f||new l.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}floats(f){let c=this.bb.__offset(this.bb_pos,20);return c?this.bb.readFloat32(this.bb.__vector(this.bb_pos+c)+4*f):0}floatsLength(){let f=this.bb.__offset(this.bb_pos,20);return f?this.bb.__vector_len(this.bb_pos+f):0}floatsArray(){let f=this.bb.__offset(this.bb_pos,20);return f?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+f),this.bb.__vector_len(this.bb_pos+f)):null}ints(f){let c=this.bb.__offset(this.bb_pos,22);return c?this.bb.readInt64(this.bb.__vector(this.bb_pos+c)+8*f):this.bb.createLong(0,0)}intsLength(){let f=this.bb.__offset(this.bb_pos,22);return f?this.bb.__vector_len(this.bb_pos+f):0}strings(f,c){let y=this.bb.__offset(this.bb_pos,24);return y?this.bb.__string(this.bb.__vector(this.bb_pos+y)+4*f,c):null}stringsLength(){let f=this.bb.__offset(this.bb_pos,24);return f?this.bb.__vector_len(this.bb_pos+f):0}tensors(f,c){let y=this.bb.__offset(this.bb_pos,26);return y?(c||new l.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}tensorsLength(){let f=this.bb.__offset(this.bb_pos,26);return f?this.bb.__vector_len(this.bb_pos+f):0}graphs(f,c){let y=this.bb.__offset(this.bb_pos,28);return y?(c||new l.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}graphsLength(){let f=this.bb.__offset(this.bb_pos,28);return f?this.bb.__vector_len(this.bb_pos+f):0}static startAttribute(f){f.startObject(13)}static addName(f,c){f.addFieldOffset(0,c,0)}static addDocString(f,c){f.addFieldOffset(1,c,0)}static addType(f,c){f.addFieldInt32(2,c,l.experimental.fbs.AttributeType.UNDEFINED)}static addF(f,c){f.addFieldFloat32(3,c,0)}static addI(f,c){f.addFieldInt64(4,c,f.createLong(0,0))}static addS(f,c){f.addFieldOffset(5,c,0)}static addT(f,c){f.addFieldOffset(6,c,0)}static addG(f,c){f.addFieldOffset(7,c,0)}static addFloats(f,c){f.addFieldOffset(8,c,0)}static createFloatsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addFloat32(c[y]);return f.endVector()}static startFloatsVector(f,c){f.startVector(4,c,4)}static addInts(f,c){f.addFieldOffset(9,c,0)}static createIntsVector(f,c){f.startVector(8,c.length,8);for(let y=c.length-1;y>=0;y--)f.addInt64(c[y]);return f.endVector()}static startIntsVector(f,c){f.startVector(8,c,8)}static addStrings(f,c){f.addFieldOffset(10,c,0)}static createStringsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startStringsVector(f,c){f.startVector(4,c,4)}static addTensors(f,c){f.addFieldOffset(11,c,0)}static createTensorsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startTensorsVector(f,c){f.startVector(4,c,4)}static addGraphs(f,c){f.addFieldOffset(12,c,0)}static createGraphsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startGraphsVector(f,c){f.startVector(4,c,4)}static endAttribute(f){return f.endObject()}static createAttribute(f,c,y,_,b,S,x,w,T,A,E,$,P,I){return v.startAttribute(f),v.addName(f,c),v.addDocString(f,y),v.addType(f,_),v.addF(f,b),v.addI(f,S),v.addS(f,x),v.addT(f,w),v.addG(f,T),v.addFloats(f,A),v.addInts(f,E),v.addStrings(f,$),v.addTensors(f,P),v.addGraphs(f,I),v.endAttribute(f)}}d.Attribute=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsGraph(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsGraph(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}initializers(f,c){let y=this.bb.__offset(this.bb_pos,4);return y?(c||new l.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}initializersLength(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.__vector_len(this.bb_pos+f):0}nodeArgs(f,c){let y=this.bb.__offset(this.bb_pos,6);return y?(c||new l.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}nodeArgsLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}nodes(f,c){let y=this.bb.__offset(this.bb_pos,8);return y?(c||new l.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}nodesLength(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}maxNodeIndex(){let f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readUint32(this.bb_pos+f):0}nodeEdges(f,c){let y=this.bb.__offset(this.bb_pos,12);return y?(c||new l.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}nodeEdgesLength(){let f=this.bb.__offset(this.bb_pos,12);return f?this.bb.__vector_len(this.bb_pos+f):0}inputs(f,c){let y=this.bb.__offset(this.bb_pos,14);return y?this.bb.__string(this.bb.__vector(this.bb_pos+y)+4*f,c):null}inputsLength(){let f=this.bb.__offset(this.bb_pos,14);return f?this.bb.__vector_len(this.bb_pos+f):0}outputs(f,c){let y=this.bb.__offset(this.bb_pos,16);return y?this.bb.__string(this.bb.__vector(this.bb_pos+y)+4*f,c):null}outputsLength(){let f=this.bb.__offset(this.bb_pos,16);return f?this.bb.__vector_len(this.bb_pos+f):0}sparseInitializers(f,c){let y=this.bb.__offset(this.bb_pos,18);return y?(c||new l.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}sparseInitializersLength(){let f=this.bb.__offset(this.bb_pos,18);return f?this.bb.__vector_len(this.bb_pos+f):0}static startGraph(f){f.startObject(8)}static addInitializers(f,c){f.addFieldOffset(0,c,0)}static createInitializersVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startInitializersVector(f,c){f.startVector(4,c,4)}static addNodeArgs(f,c){f.addFieldOffset(1,c,0)}static createNodeArgsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startNodeArgsVector(f,c){f.startVector(4,c,4)}static addNodes(f,c){f.addFieldOffset(2,c,0)}static createNodesVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startNodesVector(f,c){f.startVector(4,c,4)}static addMaxNodeIndex(f,c){f.addFieldInt32(3,c,0)}static addNodeEdges(f,c){f.addFieldOffset(4,c,0)}static createNodeEdgesVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startNodeEdgesVector(f,c){f.startVector(4,c,4)}static addInputs(f,c){f.addFieldOffset(5,c,0)}static createInputsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startInputsVector(f,c){f.startVector(4,c,4)}static addOutputs(f,c){f.addFieldOffset(6,c,0)}static createOutputsVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startOutputsVector(f,c){f.startVector(4,c,4)}static addSparseInitializers(f,c){f.addFieldOffset(7,c,0)}static createSparseInitializersVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startSparseInitializersVector(f,c){f.startVector(4,c,4)}static endGraph(f){return f.endObject()}static createGraph(f,c,y,_,b,S,x,w,T){return v.startGraph(f),v.addInitializers(f,c),v.addNodeArgs(f,y),v.addNodes(f,_),v.addMaxNodeIndex(f,b),v.addNodeEdges(f,S),v.addInputs(f,x),v.addOutputs(f,w),v.addSparseInitializers(f,T),v.endGraph(f)}}d.Graph=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsModel(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsModel(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}irVersion(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}opsetImport(f,c){let y=this.bb.__offset(this.bb_pos,6);return y?(c||new l.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}opsetImportLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}producerName(f){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__string(this.bb_pos+c,f):null}producerVersion(f){let c=this.bb.__offset(this.bb_pos,10);return c?this.bb.__string(this.bb_pos+c,f):null}domain(f){let c=this.bb.__offset(this.bb_pos,12);return c?this.bb.__string(this.bb_pos+c,f):null}modelVersion(){let f=this.bb.__offset(this.bb_pos,14);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}docString(f){let c=this.bb.__offset(this.bb_pos,16);return c?this.bb.__string(this.bb_pos+c,f):null}graph(f){let c=this.bb.__offset(this.bb_pos,18);return c?(f||new l.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}graphDocString(f){let c=this.bb.__offset(this.bb_pos,20);return c?this.bb.__string(this.bb_pos+c,f):null}static startModel(f){f.startObject(9)}static addIrVersion(f,c){f.addFieldInt64(0,c,f.createLong(0,0))}static addOpsetImport(f,c){f.addFieldOffset(1,c,0)}static createOpsetImportVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startOpsetImportVector(f,c){f.startVector(4,c,4)}static addProducerName(f,c){f.addFieldOffset(2,c,0)}static addProducerVersion(f,c){f.addFieldOffset(3,c,0)}static addDomain(f,c){f.addFieldOffset(4,c,0)}static addModelVersion(f,c){f.addFieldInt64(5,c,f.createLong(0,0))}static addDocString(f,c){f.addFieldOffset(6,c,0)}static addGraph(f,c){f.addFieldOffset(7,c,0)}static addGraphDocString(f,c){f.addFieldOffset(8,c,0)}static endModel(f){return f.endObject()}static createModel(f,c,y,_,b,S,x,w,T,A){return v.startModel(f),v.addIrVersion(f,c),v.addOpsetImport(f,y),v.addProducerName(f,_),v.addProducerVersion(f,b),v.addDomain(f,S),v.addModelVersion(f,x),v.addDocString(f,w),v.addGraph(f,T),v.addGraphDocString(f,A),v.endModel(f)}}d.Model=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsKernelCreateInfos(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsKernelCreateInfos(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}nodeIndices(f){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.readUint32(this.bb.__vector(this.bb_pos+c)+4*f):0}nodeIndicesLength(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.__vector_len(this.bb_pos+f):0}nodeIndicesArray(){let f=this.bb.__offset(this.bb_pos,4);return f?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+f),this.bb.__vector_len(this.bb_pos+f)):null}kernelDefHashes(f){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.readUint64(this.bb.__vector(this.bb_pos+c)+8*f):this.bb.createLong(0,0)}kernelDefHashesLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}static startKernelCreateInfos(f){f.startObject(2)}static addNodeIndices(f,c){f.addFieldOffset(0,c,0)}static createNodeIndicesVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addInt32(c[y]);return f.endVector()}static startNodeIndicesVector(f,c){f.startVector(4,c,4)}static addKernelDefHashes(f,c){f.addFieldOffset(1,c,0)}static createKernelDefHashesVector(f,c){f.startVector(8,c.length,8);for(let y=c.length-1;y>=0;y--)f.addInt64(c[y]);return f.endVector()}static startKernelDefHashesVector(f,c){f.startVector(8,c,8)}static endKernelCreateInfos(f){return f.endObject()}static createKernelCreateInfos(f,c,y){return v.startKernelCreateInfos(f),v.addNodeIndices(f,c),v.addKernelDefHashes(f,y),v.endKernelCreateInfos(f)}}d.KernelCreateInfos=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsSubGraphSessionState(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsSubGraphSessionState(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}graphId(f){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,f):null}sessionState(f){let c=this.bb.__offset(this.bb_pos,6);return c?(f||new l.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startSubGraphSessionState(f){f.startObject(2)}static addGraphId(f,c){f.addFieldOffset(0,c,0)}static addSessionState(f,c){f.addFieldOffset(1,c,0)}static endSubGraphSessionState(f){let c=f.endObject();return f.requiredField(c,4),c}static createSubGraphSessionState(f,c,y){return v.startSubGraphSessionState(f),v.addGraphId(f,c),v.addSessionState(f,y),v.endSubGraphSessionState(f)}}d.SubGraphSessionState=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsSessionState(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsSessionState(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}kernels(f){let c=this.bb.__offset(this.bb_pos,4);return c?(f||new l.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}subGraphSessionStates(f,c){let y=this.bb.__offset(this.bb_pos,6);return y?(c||new l.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+y)+4*f),this.bb):null}subGraphSessionStatesLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}static startSessionState(f){f.startObject(2)}static addKernels(f,c){f.addFieldOffset(0,c,0)}static addSubGraphSessionStates(f,c){f.addFieldOffset(1,c,0)}static createSubGraphSessionStatesVector(f,c){f.startVector(4,c.length,4);for(let y=c.length-1;y>=0;y--)f.addOffset(c[y]);return f.endVector()}static startSubGraphSessionStatesVector(f,c){f.startVector(4,c,4)}static endSessionState(f){return f.endObject()}static createSessionState(f,c,y){return v.startSessionState(f),v.addKernels(f,c),v.addSubGraphSessionStates(f,y),v.endSessionState(f)}}d.SessionState=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(l){(function(u){(function(d){class v{constructor(){this.bb=null,this.bb_pos=0}__init(f,c){return this.bb_pos=f,this.bb=c,this}static getRootAsInferenceSession(f,c){return(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsInferenceSession(f,c){return f.setPosition(f.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new v).__init(f.readInt32(f.position())+f.position(),f)}static bufferHasIdentifier(f){return f.__has_identifier("ORTM")}ortVersion(f){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,f):null}model(f){let c=this.bb.__offset(this.bb_pos,6);return c?(f||new l.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}sessionState(f){let c=this.bb.__offset(this.bb_pos,8);return c?(f||new l.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startInferenceSession(f){f.startObject(3)}static addOrtVersion(f,c){f.addFieldOffset(0,c,0)}static addModel(f,c){f.addFieldOffset(1,c,0)}static addSessionState(f,c){f.addFieldOffset(2,c,0)}static endInferenceSession(f){return f.endObject()}static finishInferenceSessionBuffer(f,c){f.finish(c,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(f,c){f.finish(c,"ORTM",!0)}static createInferenceSession(f,c,y,_){return v.startInferenceSession(f),v.addOrtVersion(f,c),v.addModel(f,y),v.addSessionState(f,_),v.endInferenceSession(f)}}d.InferenceSession=v})(u.fbs||(u.fbs={}))})(l.experimental||(l.experimental={}))}(t.onnxruntime||(t.onnxruntime={}))},1723:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnnxjsSessionHandler=void 0;const a=r(8453),o=r(9240);t.OnnxjsSessionHandler=class{constructor(s){this.session=s,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(s,l,u){const d=new Map;for(const f in s)if(Object.hasOwnProperty.call(s,f)){const c=s[f];d.set(f,new o.Tensor(c.dims,c.type,void 0,void 0,c.data))}const v=await this.session.run(d),g={};return v.forEach((f,c)=>{g[c]=new a.Tensor(f.type,f.data,f.dims)}),g}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6027:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;const a=r(7067),o=r(1296),s=r(1975),l=r(6496),u=r(1315),d=r(1745);t.Session=class{constructor(v={}){this._initialized=!1,this.backendHint=v.backendHint,this.profiler=u.Profiler.create(v.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(v,g,f){await this.profiler.event("session","Session.loadModel",async()=>{const c=await(0,s.resolveBackend)(this.backendHint);if(this.sessionHandler=c.createSessionHandler(this.context),this._model=new d.Model,typeof v=="string"){const y=v.endsWith(".ort");if(typeof fetch>"u"){const _=await(0,o.promisify)(a.readFile)(v);this.initialize(_,y)}else{const _=await fetch(v),b=await _.arrayBuffer();this.initialize(new Uint8Array(b),y)}}else if(ArrayBuffer.isView(v))this.initialize(v);else{const y=new Uint8Array(v,g||0,f||v.byteLength);this.initialize(y)}})}initialize(v,g){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const f=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(v,f,g),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new l.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(v){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const g=this.normalizeAndValidateInputs(v),f=await this._executionPlan.execute(this.sessionHandler,g);return this.createOutput(f)})}normalizeAndValidateInputs(v){const g=this._model.graph.getInputNames();if(Array.isArray(v)){if(v.length!==g.length)throw new Error(`incorrect input array length: expected ${g.length} but got ${v.length}`)}else{if(v.size!==g.length)throw new Error(`incorrect input map size: expected ${g.length} but got ${v.size}`);const f=new Array(v.size);let c=0;for(let y=0;y<g.length;++y){const _=v.get(g[y]);if(!_)throw new Error(`missing input tensor for: '${name}'`);f[c++]=_}v=f}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,v,!1);else{const f=this._model.graph.getInputIndices(),c=this._model.graph.getValues(),y=new Array(f.length);for(let _=0;_<f.length;++_){const b=c[f[_]];y[_]=b.type.shape.dims,this.context.graphInputTypes.push(b.type.tensorType),this.context.graphInputDims.push(v[_].dims)}this.validateInputTensorDims(y,v,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,v),v}validateInputTensorTypes(v,g){for(let f=0;f<g.length;f++){const c=v[f],y=g[f].type;if(c!==y)throw new Error(`input tensor[${f}] check failed: expected type '${c}' but got ${y}`)}}validateInputTensorDims(v,g,f){for(let c=0;c<g.length;c++){const y=v[c],_=g[c].dims;if(!this.compareTensorDims(y,_,f))throw new Error(`input tensor[${c}] check failed: expected shape '[${y.join(",")}]' but got [${_.join(",")}]`)}}compareTensorDims(v,g,f){if(v.length!==g.length)return!1;for(let c=0;c<v.length;++c)if(v[c]!==g[c]&&(!f||v[c]!==0))return!1;return!0}createOutput(v){const g=this._model.graph.getOutputNames();if(v.length!==g.length)throw new Error("expected number of outputs do not match number of generated outputs");const f=new Map;for(let c=0;c<g.length;++c)f.set(g[c],v[c]);return f}initializeOps(v){const g=v.getNodes();this._ops=new Array(g.length);for(let f=0;f<g.length;f++)this._ops[f]=this.sessionHandler.resolve(g[f],this._model.opsets,v)}}},9240:function(n,t,r){var a=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;const o=r(3442),s=a(r(3720)),l=r(1446),u=r(1287),d=r(7273);var v=u.onnxruntime.experimental.fbs;class g{get data(){if(this.cache===void 0){const S=this.dataProvider(this.dataId);if(S.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=S}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(S){return this.data[d.ShapeUtil.indicesToOffset(S,this.strides)]}set(S,x){this.data[d.ShapeUtil.indicesToOffset(S,this.strides)]=x}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=d.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(S,x,w,T,A,E=o.Guid.create()){this.dims=S,this.type=x,this.dataProvider=w,this.asyncDataProvider=T,this.cache=A,this.dataId=E,this.size=d.ShapeUtil.validateDimsAndCalcSize(S);const $=this.size,P=w===void 0&&T===void 0&&A===void 0;if(A!==void 0&&A.length!==$)throw new RangeError("Input dims doesn't match data length.");if(x==="string"){if(!(A===void 0||Array.isArray(A)&&A.every(I=>typeof I=="string")))throw new TypeError("cache should be a string array");P&&(this.cache=new Array($))}else{if(A!==void 0){const I=c(x);if(!(A instanceof I))throw new TypeError(`cache should be type ${I.name}`)}if(P){const I=new ArrayBuffer($*function(C){switch(C){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${C}`)}}(x));this.cache=function(C,M){return new(c(M))(C)}(I,x)}}}static fromProto(S){if(!S)throw new Error("cannot construct Value from an empty tensor");const x=d.ProtoUtil.tensorDataTypeFromProto(S.dataType),w=d.ProtoUtil.tensorDimsFromProto(S.dims),T=new g(w,x);if(x==="string")S.stringData.forEach((A,E)=>{T.data[E]=(0,d.decodeUtf8String)(A)});else if(S.rawData&&typeof S.rawData.byteLength=="number"&&S.rawData.byteLength>0){const A=T.data,E=new DataView(S.rawData.buffer,S.rawData.byteOffset,S.rawData.byteLength),$=f(S.dataType),P=S.rawData.byteLength/$;if(S.rawData.byteLength%$!=0)throw new Error("invalid buffer length");if(A.length!==P)throw new Error("buffer length mismatch");for(let I=0;I<P;I++){const C=_(E,S.dataType,I*$);A[I]=C}}else{let A;switch(S.dataType){case l.onnx.TensorProto.DataType.FLOAT:A=S.floatData;break;case l.onnx.TensorProto.DataType.INT32:case l.onnx.TensorProto.DataType.INT16:case l.onnx.TensorProto.DataType.UINT16:case l.onnx.TensorProto.DataType.INT8:case l.onnx.TensorProto.DataType.UINT8:case l.onnx.TensorProto.DataType.BOOL:A=S.int32Data;break;case l.onnx.TensorProto.DataType.INT64:A=S.int64Data;break;case l.onnx.TensorProto.DataType.DOUBLE:A=S.doubleData;break;case l.onnx.TensorProto.DataType.UINT32:case l.onnx.TensorProto.DataType.UINT64:A=S.uint64Data;break;default:throw new Error("unspecific error")}if(A==null)throw new Error("failed to populate data from a tensorproto value");const E=T.data;if(E.length!==A.length)throw new Error("array length mismatch");for(let $=0;$<A.length;$++){const P=A[$];s.default.isLong(P)?E[$]=y(P,S.dataType):E[$]=P}}return T}static fromData(S,x,w){return new g(x,w,void 0,void 0,S)}static fromOrtTensor(S){if(!S)throw new Error("cannot construct Value from an empty tensor");const x=d.ProtoUtil.tensorDimsFromORTFormat(S),w=d.ProtoUtil.tensorDataTypeFromProto(S.dataType()),T=new g(x,w);if(w==="string")for(let A=0;A<S.stringDataLength();A++)T.data[A]=S.stringData(A);else if(S.rawDataArray()&&typeof S.rawDataLength()=="number"&&S.rawDataLength()>0){const A=T.data,E=new DataView(S.rawDataArray().buffer,S.rawDataArray().byteOffset,S.rawDataLength()),$=f(S.dataType()),P=S.rawDataLength()/$;if(S.rawDataLength()%$!=0)throw new Error("invalid buffer length");if(A.length!==P)throw new Error("buffer length mismatch");for(let I=0;I<P;I++){const C=_(E,S.dataType(),I*$);A[I]=C}}return T}}function f(b){switch(b){case l.onnx.TensorProto.DataType.UINT8:case l.onnx.TensorProto.DataType.INT8:case l.onnx.TensorProto.DataType.BOOL:return 1;case l.onnx.TensorProto.DataType.UINT16:case l.onnx.TensorProto.DataType.INT16:return 2;case l.onnx.TensorProto.DataType.FLOAT:case l.onnx.TensorProto.DataType.INT32:case l.onnx.TensorProto.DataType.UINT32:return 4;case l.onnx.TensorProto.DataType.INT64:case l.onnx.TensorProto.DataType.DOUBLE:case l.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${l.onnx.TensorProto.DataType[b]}`)}}function c(b){switch(b){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function y(b,S){if(S===l.onnx.TensorProto.DataType.INT64||S===v.TensorDataType.INT64){if(b.greaterThanOrEqual(2147483648)||b.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(S!==l.onnx.TensorProto.DataType.UINT32&&S!==v.TensorDataType.UINT32&&S!==l.onnx.TensorProto.DataType.UINT64&&S!==v.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${l.onnx.TensorProto.DataType[S]}`);if(b.greaterThanOrEqual(4294967296)||b.lessThan(0))throw new TypeError("uint64 is not supported")}return b.toNumber()}function _(b,S,x){switch(S){case l.onnx.TensorProto.DataType.BOOL:case l.onnx.TensorProto.DataType.UINT8:return b.getUint8(x);case l.onnx.TensorProto.DataType.INT8:return b.getInt8(x);case l.onnx.TensorProto.DataType.UINT16:return b.getUint16(x,!0);case l.onnx.TensorProto.DataType.INT16:return b.getInt16(x,!0);case l.onnx.TensorProto.DataType.FLOAT:return b.getFloat32(x,!0);case l.onnx.TensorProto.DataType.INT32:return b.getInt32(x,!0);case l.onnx.TensorProto.DataType.UINT32:return b.getUint32(x,!0);case l.onnx.TensorProto.DataType.INT64:return y(s.default.fromBits(b.getUint32(x,!0),b.getUint32(x+4,!0),!1),S);case l.onnx.TensorProto.DataType.DOUBLE:return b.getFloat64(x,!0);case l.onnx.TensorProto.DataType.UINT64:return y(s.default.fromBits(b.getUint32(x,!0),b.getUint32(x+4,!0),!0),S);default:throw new Error(`cannot read from DataView for type ${l.onnx.TensorProto.DataType[S]}`)}}t.Tensor=g},7273:function(n,t,r){var a=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeUtf8String=t.MAX_CLIP=t.MIN_CLIP=t.PoolConvUtil=t.ReduceUtil=t.SplitUtil=t.MathUtil=t.ShapeUtil=t.LongUtil=t.ProtoUtil=t.GemmUtil=t.arrayCopyHelper=t.BroadcastUtil=t.MatMulUtil=t.ArrayUtil=t.assert=t.checkInputsShape=void 0;const o=r(5686),s=a(r(3720)),l=r(1446),u=r(9240);t.checkInputsShape=function(S,...x){if(!S||S.length!==x.length)return!1;for(let w=0;w<S.length;w++)if(!S[w].dims||S[w].dims.length!==x[w])return!1;return!0},t.assert=function(S,x){if(!S)throw new Error(typeof x=="string"?x:x())},t.ArrayUtil=class{static arraysEqual(S,x){if(S.length!==x.length)return!1;for(let w=0;w<S.length;w++)if(S[w]!==x[w])return!1;return!0}};class d{static preprocessInputShapes(x,w){return[x.length===1?[1,x[0]]:x,w.length===1?[w[0],1]:w]}static postprocessOutputShape(x,w,T){w===1&&x.splice(x.length-2,1),T===1&&x.pop()}static calcMatMulShape(x,w){return x[1]!==w[0]?void 0:[x[0],w[1]]}}t.MatMulUtil=d;class v{static calcShape(x,w,T=!1){const A=x.length,E=w.length;if(A===0)return w;if(E===0)return x;const $=Math.max(x.length,w.length),P=new Array($);if(T){if(A<2||E<2)return;const I=d.calcMatMulShape([x[A-2],x[A-1]],[w[E-2],w[E-1]]);if(I===void 0)return;[P[$-2],P[$-1]]=I}for(let I=T?3:1;I<=$;I++){const C=A-I<0?1:x[A-I],M=E-I<0?1:w[E-I];if(C!==M&&C>1&&M>1)return;P[$-I]=Math.max(C,M)}return P}static index(x,w){const T=new Array(w.length);return v.fillIndex(x,w,T),T}static fillIndex(x,w,T){const A=x.length-w.length;for(let E=0;E<w.length;E++)T[E]=x[A+E]%w[E]}static calc(x,w,T,A,E){const $=v.calcShape(x.dims,w.dims);if($){if(A&&!c.areEqual($,x.dims))return;const P=c.size($),I=A?x:new u.Tensor($,E||x.type);if($.length===0)I.set([],T(x.get([]),w.get([])));else{const C=new Array($.length),M=new Array(x.dims.length),D=new Array(w.dims.length);let R,N=0,O=0,F=!1,L=!1;x.dims.length===0&&(N=x.get([]),F=!0),w.dims.length===0&&(O=w.get([]),L=!0);for(let B=0;B<P;B++){R=B;for(let V=$.length-1;V>=0;V--)C[V]=R%$[V],R=Math.floor(R/$[V]);F||(v.fillIndex(C,x.dims,M),N=x.get(M)),L||(v.fillIndex(C,w.dims,D),O=w.get(D)),I.set(C,T(N,O))}}return I}}static isValidBroadcast(x,w){const T=x.length,A=w.length;if(T>A)return!1;for(let E=1;E<=T;E++)if(x[T-E]!==1&&x[T-E]!==w[A-E])return!1;return!0}static getBroadcastDims(x,w){const T=x.length,A=[];for(let E=0;E<T;E++){const $=T-1-E,P=x[$]||1;(w[w.length-1-E]||1)>1&&P===1&&A.unshift($)}return A}}t.BroadcastUtil=v,t.arrayCopyHelper=function(S,x,w,T,A){if(T<0||T>=x.length)throw new Error("sourceIndex out of bounds");if(w<0||w>=S.length)throw new Error("targetIndex out of bounds");if(T+A>x.length)throw new Error("source indices to be copied are outside bounds");if(w+A>S.length)throw new Error("target array is too small to hold result");for(let E=0;E<A;E++)S[w+E]=x[T+E]},t.GemmUtil=class{static getShapeOfGemmResult(S,x,w,T,A){if(S.length!==2||w.length!==2)throw new Error("shape need to be of size 2");let E,$,P;x?(E=S[1],$=S[0]):(E=S[0],$=S[1]);let I=-1;if(T?(P=w[0],I=1):(P=w[1],I=0),w[I]!==$)throw new Error("dimension mismatch");if(E<=0||P<=0||$<=0)throw new Error("invalid shape specified");if(A&&!v.isValidBroadcast(A,[E,P]))throw new Error("gemm: invalid bias shape for broadcast");return[E,P,$]}};class g{static tensorDataTypeFromProto(x){switch(x){case l.onnx.TensorProto.DataType.INT8:return"int8";case l.onnx.TensorProto.DataType.UINT8:return"uint8";case l.onnx.TensorProto.DataType.BOOL:return"bool";case l.onnx.TensorProto.DataType.INT16:return"int16";case l.onnx.TensorProto.DataType.UINT16:return"uint16";case l.onnx.TensorProto.DataType.INT32:return"int32";case l.onnx.TensorProto.DataType.UINT32:return"uint32";case l.onnx.TensorProto.DataType.FLOAT:return"float32";case l.onnx.TensorProto.DataType.DOUBLE:return"float64";case l.onnx.TensorProto.DataType.STRING:return"string";case l.onnx.TensorProto.DataType.INT64:return"int32";case l.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${l.onnx.TensorProto.DataType[x]}`)}}static tensorDataTypeStringToEnum(x){switch(x){case"int8":return l.onnx.TensorProto.DataType.INT8;case"uint8":return l.onnx.TensorProto.DataType.UINT8;case"bool":return l.onnx.TensorProto.DataType.BOOL;case"int16":return l.onnx.TensorProto.DataType.INT16;case"uint16":return l.onnx.TensorProto.DataType.UINT16;case"int32":return l.onnx.TensorProto.DataType.INT32;case"uint32":return l.onnx.TensorProto.DataType.UINT32;case"float32":return l.onnx.TensorProto.DataType.FLOAT;case"float64":return l.onnx.TensorProto.DataType.DOUBLE;case"string":return l.onnx.TensorProto.DataType.STRING;case"int64":return l.onnx.TensorProto.DataType.INT64;case"uint64":return l.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${x}`)}}static tensorDimsFromProto(x){return x.map(w=>s.default.isLong(w)?w.toNumber():w)}static tensorValueTypeFromProto(x){return{tensorType:g.tensorDataTypeFromProto(x.elemType),shape:{dims:g.tensorDimsFromProto(x.shape.dim.map(w=>w.dimValue))}}}static tensorDimsFromORTFormat(x){const w=[];for(let T=0;T<x.dimsLength();T++)w.push(f.longToNumber(x.dims(T)));return w}static tensorAttributesFromORTFormat(x){const w=[];for(let T=0;T<x.attributesLength();T++)w.push(x.attributes(T));return w}}t.ProtoUtil=g;class f{static longToNumber(x,w){return s.default.isLong(x)?x.toNumber():x instanceof o.flatbuffers.Long?s.default.fromValue({low:x.low,high:x.high,unsigned:w!=null&&w}).toNumber():x}static isLong(x){return s.default.isLong(x)||x instanceof o.flatbuffers.Long}}t.LongUtil=f;class c{static size(x){return c.getSizeFromDimensionRange(x,0,x.length)}static sizeFromDimension(x,w){if(w<0||w>x.length)throw new Error(`invalid dimension of ${w} for sizeFromDimension as Tensor has ${x.length} dimensions.`);return c.getSizeFromDimensionRange(x,w,x.length)}static sizeToDimension(x,w){if(w<0||w>x.length)throw new Error(`invalid dimension of ${w} for sizeToDimension as Tensor has ${x.length} dimensions.`);return c.getSizeFromDimensionRange(x,0,w)}static getSizeFromDimensionRange(x,w,T){let A=1;for(let E=w;E<T;E++){if(x[E]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");A*=x[E]}return A}static computeStrides(x){const w=x.length;if(w===0)return[];if(w===1)return[1];const T=new Array(w);T[w-1]=1,T[w-2]=x[w-1];for(let A=w-3;A>=0;--A)T[A]=T[A+1]*x[A+1];return T}static transpose(x){return x.slice().reverse()}static indicesToOffset(x,w,T){T===void 0&&(T=x.length);let A=0;for(let E=0;E<T;++E)A+=w[E]*x[E];return A}static offsetToIndices(x,w){const T=w.length;if(T===0)return[];if(T===1)return[x*w[0]];const A=new Array(w.length);for(let E=0;E<A.length-1;++E)A[E]=Math.floor(x/w[E]),x-=A[E]*w[E];return A[A.length-1]=x,A}static normalizeAxis(x,w){if(x<-w&&x>=w)throw new Error("unsupported axis for this operation.");return x<0?x+w:x}static normalizeAxes(x,w){return x.map(T=>this.normalizeAxis(T,w))}static incrementIndex(x,w,T){if(w.length===0||x.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(T===void 0)T=w.length;else if(T<=0||T>w.length)throw new Error("Incorrect axis to increment on");for(let A=T-1;A>=0&&(x[A]++,!(x[A]<w[A]));--A)x[A]=0}static calculateReshapedDims(x,w){if(w.length===0){if(x.length===0||c.size(x)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const T=w.length,A=new Array(T);let E=-1,$=1;for(let I=0;I<T;I++){if(w[I]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(w[I]===-1){if(E!==-1)throw new Error("at most one dimension in shape hints can be -1");E=I}else{if(w[I]===0){if(I>=x.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");A[I]=x[I]}else A[I]=w[I];$*=A[I]}}const P=c.size(x);if(E!==-1){if(P%$!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${x}] Output shape: [${w}]`);A[E]=P/$}else if($!==P)throw new Error("reshapedDims and originalDims don't have matching sizes");return A}static sortBasedOnPerm(x,w){return w?w.map(T=>x[T]):x.slice().reverse()}static padShape(x,w){const T=x.length;return x.map((A,E)=>A+w[E]+w[E+T])}static areEqual(x,w){return x.length===w.length&&x.every((T,A)=>T===w[A])}static validateDimsAndCalcSize(x){if(x.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let w=1;for(const T of x){if(!Number.isInteger(T))throw new TypeError(`Invalid shape: ${T} is not an integer`);if(T<0||T>2147483647)throw new TypeError(`Invalid shape: length ${T} is not allowed`);w*=T}return w}static flattenShape(x,w){w<0&&(w+=x.length);const T=x.reduce((E,$)=>E*$,1),A=x.slice(w).reduce((E,$)=>E*$,1);return[T/A,A]}static squeezeShape(x,w){const T=new Array;w=c.normalizeAxes(w,x.length);for(let A=0;A<x.length;A++){const E=w.indexOf(A)>=0;if(E&&x[A]!==1)throw new Error("squeeze an axis of size different than 1");(w.length===0&&x[A]>1||w.length>0&&!E)&&T.push(x[A])}return T}static unsqueezeShape(x,w){const T=new Array(x.length+w.length);T.fill(0);for(let E=0;E<w.length;E++){const $=c.normalizeAxis(w[E],T.length);if($>=T.length)throw new Error("'axes' has an out of range axis");if(T[$]!==0)throw new Error("'axes' has a duplicate axis");T[$]=1}let A=0;for(let E=0;E<T.length;E++)T[E]===0&&(T[E]=x[A++]);if(A!==x.length)throw new Error("the unsqueezed dimension could not be established");return T}}t.ShapeUtil=c,t.MathUtil=class{static sqr(S,x,w,T,A){if(T<0||T>=x.length)throw new Error("sourceIndex out of bounds");if(w<0||w>=S.length)throw new Error("targetIndex out of bounds");if(T+A>x.length)throw new Error("source indices to be copied are outside bounds");if(w+A>S.length)throw new Error("target array is too small to hold result");for(let E=0;E<A;E++)S[w+E]+=Math.pow(x[T+E],2)}static axpy(S,x,w,T,A,E){if(T<0||T>=x.length)throw new Error("sourceIndex out of bounds");if(w<0||w>=S.length)throw new Error("targetIndex out of bounds");if(T+A>x.length)throw new Error("source indices to be copied are outside bounds");if(w+A>S.length)throw new Error("target array is too small to hold result");for(let $=0;$<A;$++)S[w+$]+=E*x[T+$]}static powx(S,x,w,T,A,E){if(T<0||T>=x.length)throw new Error("sourceIndex out of bounds");if(w<0||w>=S.length)throw new Error("targetIndex out of bounds");if(T+A>x.length)throw new Error("source indices to be copied are outside bounds");if(w+A>S.length)throw new Error("target array is too small to hold result");for(let $=0;$<A;$++)S[w+$]=Math.pow(x[T+$],E)}static mul(S,x,w,T,A){if(T<0||T>=x.length)throw new Error("sourceIndex out of bounds");if(w<0||w>=S.length)throw new Error("targetIndex out of bounds");if(T+A>x.length)throw new Error("source indices to be copied are outside bounds");if(w+A>S.length)throw new Error("target array is too small to hold result");for(let E=0;E<A;E++)S[w+E]=x[T+E]*S[w+E]}};class y{static splitShape(x,w,T,A){if(T.length===0){if(!A)throw new Error("need to know number of outputs when the 'split' attribute is not specified");y.determineSplit(x[w],A,T)}const E=[],$=[0];for(let P=0;P<T.length;++P){P!==0&&$.push($[P-1]+T[P-1]);const I=x.slice();I[w]=T[P],E.push(I)}return[E,$]}static determineSplit(x,w,T){if(x%w!=0)throw new Error("cannot split tensor to equal sized parts");for(let A=0;A<w;++A)T.push(x/w)}}t.SplitUtil=y;class _{static calcReduce(x,w,T,A,E){const $=x.dims.slice(0);w.length===0&&$.forEach((N,O)=>w.push(O));const P=_.calcReduceShape($,w,!0),I=c.size(P),C=new u.Tensor(P,x.type),M=c.computeStrides(P),D=c.computeStrides($),R=new Array($.length);for(let N=0;N<I;N++){const O=c.offsetToIndices(N,M);v.fillIndex(O,$,R),C.set(O,_.calcReduceByAxis(x.numberData,w,$,0,c.indicesToOffset(R,D),A,E))}return T?C:new u.Tensor(_.calcReduceShape($,w,T),C.type,void 0,void 0,C.data,C.dataId)}static calcReduceByAxis(x,w,T,A,E,$,P){let I=0;if(A>=w.length)return $(x[E]);const C=w[A],M=C>=T.length?1:c.size(T.slice(C+1));for(let D=0;D<T[C];D++)I=D===0?_.calcReduceByAxis(x,w,T,A+1,E,$,P):P(I,_.calcReduceByAxis(x,w,T,A+1,E,$,P)),E+=M;return I}static calcReduceShape(x,w,T){const A=x.slice();for(let E=0;E<w.length;E++)A[w[E]]=T?1:0;return A.filter(E=>E!==0)}}t.ReduceUtil=_;class b{static adjustPoolAttributes(x,w,T,A,E,$){if(!x&&T.length!==w.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(x)for(let P=0;P<w.length-2;P++)P>=T.length?T.push(w[P+2]):T[P]=w[P+2];for(let P=0;P<T.length;P++)if(P<A.length){if(A[P]<0)throw new Error("strides should be greater than or equal to 1")}else A.push(1);for(let P=0;P<T.length;P++)if(P<E.length){if(E[P]<0)throw new Error("dilations should be greater than or equal to 1")}else E.push(1);for(let P=0;P<2*T.length;P++)if(P<$.length){if($[P]<0)throw new Error("pad should be greater than or equal to 1")}else $.push(0);for(let P=0;P<T.length;P++){if(T[P]<=0)throw new Error("kernel shapes need to be greater than 0");if($[P]>=T[P]||$[P+T.length]>=T[P])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(x,w,T,A,E,$){if($){if(E.length!==2*(x.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(w.length!==x.length-2)throw new Error("length of strides should be the length of data dimensions");if(A.length!==x.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let P=0;P<x.length-2;P++)b.adjustPadAndReturnShape(x[P+2],w[P],T[P],A[P],E,P,P+x.length-2,$)}}static computePoolOutputShape(x,w,T,A,E,$,P){if(w.length<=0)throw new Error("input shape must be of size greater than 0");const I=[w[0],w[1]];return b.computeShapeHelper(x,w,I,T,A,E,$,P),I}static computeConvOutputShape(x,w,T,A,E,$,P){if(x.length<=0||w.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const I=[x[0],w[0]];return b.computeShapeHelper(!1,x,I,T,A,E,$,P),I}static computeShapeHelper(x,w,T,A,E,$,P,I){if(x)for(let C=0;C<w.length-2;C++)T.push(1);else for(let C=0;C<w.length-2;C++)T.push(b.adjustPadAndReturnShape(w[C+2],A[C],E[C],$[C],P,C,C+w.length-2,I))}static adjustPadAndReturnShape(x,w,T,A,E,$,P,I){const C=T*(A-1)+1;if(!I||I==="NOTSET")return Math.floor((x+E[$]+E[P]-C)/w+1);switch(I){case"VALID":return E[$]=0,E[P]=0,Math.floor((x-C)/w+1);case"SAME_LOWER":case"SAME_UPPER":if(T!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const M=((x+w-1)/w-1)*w+A-x;return E[$]=Math.floor(I==="SAME_LOWER"?(M+1)/2:M/2),E[P]=M-E[$],Math.floor((x+M-A)/w+1)}default:throw new Error("Unsupported AutoPad type")}}}t.PoolConvUtil=b,t.MIN_CLIP=-34028234663852886e22,t.MAX_CLIP=34028234663852886e22,t.decodeUtf8String=function(S){return new TextDecoder().decode(S)}},3838:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebGpuBackend=void 0;const a=r(8453),o=r(4955),s=r(7771),l=r(8510),u=r(8305);t.WebGpuBackend=class{constructor(){this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.pendingDispatchNumber=0,this.profilingEnabled=!1}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let d=this.kernelCustomData.get(this.currentKernelId);return d||(d={},this.kernelCustomData.set(this.currentKernelId,d)),d}async initialize(){if(!navigator.gpu)throw new Error("WebGpuBackend: WebGPU is not available.");const d=await navigator.gpu.requestAdapter();if(!d)throw new Error("WebGpuBackend: Failed to get GPU adapter.");const v={requiredLimits:{maxComputeWorkgroupStorageSize:d.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:d.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:d.limits.maxStorageBufferBindingSize}};d.features.has("timestamp-query-inside-passes")&&a.env.webgpu.profilingMode==="default"&&(this.profilingEnabled=!0,v.requiredFeatures=["timestamp-query-inside-passes"]),this.device=await d.requestDevice(v),this.gpuDataManager=(0,s.createGpuDataManager)(this),this.programManager=new u.ProgramManager(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,this.device.onuncapturederror=g=>{g.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${g.error.message}`)},this.profilingEnabled&&(this.profilingQuerySet=this.device.createQuerySet({type:"timestamp",count:2}))}dispose(){}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){return this.computePassEncoder||(this.computePassEncoder=this.getCommandEncoder().beginComputePass()),this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){this.endComputePass(),this.device.queue.submit([this.getCommandEncoder().finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0}run(d,v,g,f,c){if(v.length!==d.inputTypes.length)throw new Error(`Input size must be equal to ${d.inputTypes.length}.`);const y=[];for(let E=0;E<v.length;++E){const $=this.gpuDataManager.get(v[E].data);if(!$)throw new Error(`no GPU data for input: ${v[E].data}`);y[E]=$}const _=((E,$,P)=>{const I=$.map(D=>`${D.join(",")}`).join("_"),C=P.join("_");let M=E.name;return E.cacheHint&&(M+="["+E.cacheHint+"]"),M+=":"+I+";"+C,M})(d,v.map(E=>E.dims),y.map(E=>E.type));let b=this.programManager.getArtifact(_);const S=b?b.programInfo:typeof d.get=="function"?d.get():d,x=g.length===0?S.outputs.map((E,$)=>$):g;if(x.length!==S.outputs.length)throw new Error(`Output size ${x.length} must be equal to ${S.outputs.length}.`);const w=[],T=[];for(let E=0;E<S.outputs.length;++E){if(!Number.isInteger(x[E])||x[E]<-2||x[E]>=S.outputs.length)throw new Error(`Invalid output index: ${x[E]}`);const $=x[E]===-1,P=x[E]===-2,I=$||P?c(S.outputs[E].dataType,S.outputs[E].dims):f(x[E],S.outputs[E].dataType,S.outputs[E].dims),C=this.gpuDataManager.get(I.data);if(!C)throw new Error(`no GPU data for output: ${I.data}`);if($&&this.temporaryData.push(C),P){let M=this.kernelPersistentData.get(this.currentKernelId);M||(M=[],this.kernelPersistentData.set(this.currentKernelId,M)),M.push(C)}w.push(I),T.push(C)}const A=this.programManager.normalizeDispatchGroupSize(S.dispatchGroup(v));return b||(b=this.programManager.build(S,A),this.programManager.setArtifact(_,b)),(0,o.LOG_DEBUG)("info",()=>`[ProgramManager] run "${S.name}" (key=${_}) with ${A[0]}x${A[1]}x${A[2]}`),this.programManager.run(b,y,T,A),w}upload(d,v){this.gpuDataManager.upload(d,v)}memcpy(d,v){this.gpuDataManager.memcpy(d,v)}async download(d,v){const g=await this.gpuDataManager.download(d);v().set(new Uint8Array(g))}alloc(d){return this.gpuDataManager.create(d).id}free(d){return this.gpuDataManager.release(d)}createKernel(d,v,g){const f=l.WEBGPU_OP_RESOLVE_RULES.get(d);if(!f)throw new Error(`kernel not implemented: ${d}`);this.kernels.set(v,[d,f[0],[f[1],g]])}releaseKernel(d){const v=this.kernelPersistentData.get(d);if(v){for(const g of v)this.gpuDataManager.release(g.id);this.kernelPersistentData.delete(d)}this.kernelCustomData.delete(d),this.kernels.delete(d)}computeKernel(d,v){const g=this.kernels.get(d);if(!g)throw new Error(`kernel not created: ${d}`);const[f,c,y]=g;if(this.currentKernelId!==null)throw new Error(`kernel "${f}" is not allowed to be called recursively`);this.currentKernelId=d,y[0]&&(y[1]=y[0](y[1]),y[0]=void 0),(0,o.LOG_DEBUG)("info",()=>`[WebGPU] Start to run kernel "${f}"...`),this.temporaryData=[];try{return c(v,y[1]),0}catch(_){return(0,o.LOG_DEBUG)("warning",`[WebGPU] Kernel "${f}" failed. Error: ${_}`),1}finally{for(const _ of this.temporaryData)this.gpuDataManager.release(_.id);this.temporaryData=[],this.currentKernelId=null}}}},7675:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const a=r(7917),o=r(3838),s=r(4955),l=r(6952);class u{constructor(g,f,c,y){this.module=g,this.dataType=f,this.data=c,this.dims=y}getFloat32Array(){return new Float32Array(this.module.HEAP8.buffer,this.data,l.ShapeUtil.size(this.dims))}reshape(g){if(l.ShapeUtil.size(g)!==l.ShapeUtil.size(this.dims))throw new Error("Invalid new shape");return new u(this.module,this.dataType,this.data,g)}}class d{get customData(){return this.backend.currentKernelCustomData}constructor(g,f,c){this.module=g,this.backend=f;const y=g.HEAPU32;let _=c>>2;this.opKernelContext=y[_++];const b=y[_++],S=[];for(let x=0;x<b;x++){const w=y[_++],T=y[_++],A=y[_++],E=[];for(let $=0;$<A;$++)E.push(y[_++]);S.push(new u(g,w,T,E))}this.inputs=S}compute(g,f){var c,y,_;const b=(y=(c=f==null?void 0:f.inputs)===null||c===void 0?void 0:c.map(x=>typeof x=="number"?this.inputs[x]:x))!==null&&y!==void 0?y:this.inputs,S=(_=f==null?void 0:f.outputs)!==null&&_!==void 0?_:[];return this.backend.run(g,b,S,(x,w,T)=>new u(this.module,w,this.output(x,T),T),(x,w)=>{const T=(0,a.getTensorElementSize)(x);if(!T)throw new Error(`Unsupported data type: ${x}`);const A=T*l.ShapeUtil.size(w);return new u(this.module,x,this.backend.gpuDataManager.create(A).id,w)})}output(g,f){const c=this.module.stackSave();try{const y=this.module.stackAlloc(4*(1+f.length));let _=y>>2;this.module.HEAPU32[_++]=f.length;for(let b=0;b<f.length;b++)this.module.HEAPU32[_++]=f[b];return this.module._JsepOutput(this.opKernelContext,g,y)}finally{this.module.stackRestore(c)}}}t.init=async v=>{const g=v.jsepInit;if(g&&navigator.gpu){const f=new o.WebGpuBackend;await f.initialize(),g({backend:f},c=>f.alloc(c),c=>f.free(c),(c,y,_,b=!1)=>{if(b)(0,s.LOG_DEBUG)("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${c}, dst=${y}, size=${_}`),f.memcpy(c,y);else{(0,s.LOG_DEBUG)("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${c}, gpuDataId=${y}, size=${_}`);const S=v.HEAPU8.subarray(c,c+_);f.upload(y,S)}},async(c,y,_)=>{(0,s.LOG_DEBUG)("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${c}, dataOffset=${y}, size=${_}`),await f.download(c,()=>v.HEAPU8.subarray(y,y+_))},(c,y,_)=>f.createKernel(c,y,_),c=>f.releaseKernel(c),(c,y)=>{(0,s.LOG_DEBUG)("verbose",()=>`[WebGPU] jsepRun: kernel=${c}, contextDataOffset=${y}`);const _=new d(v,f,y);return f.computeKernel(c,_)})}}},4955:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_DEBUG=t.LOG=void 0;const a=r(8453),o=r(7917),s=["V","I","W","E","F"];t.LOG=(l,u)=>{const d=(0,o.logLevelStringToEnum)(l);var v,g;d>=(0,o.logLevelStringToEnum)(a.env.logLevel)&&(v=d,g=typeof u=="function"?u():u,console.log(`[${s[v]},${new Date().toISOString()}]${g}`))},t.LOG_DEBUG=(...l)=>{a.env.debug&&(0,t.LOG)(...l)}},6952:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_CLIP=t.MIN_CLIP=t.GemmUtil=t.PoolConvUtil=t.ShapeUtil=t.BroadcastUtil=t.MatMulUtil=void 0;class r{static calcMatMulShape(u,d){return u[1]!==d[0]?void 0:[u[0],d[1]]}}t.MatMulUtil=r;class a{static calcShape(u,d,v=!1){const g=u.length,f=d.length;if(g===0)return d;if(f===0)return u;const c=Math.max(u.length,d.length),y=new Array(c);if(v){if(g<2||f<2)return;const _=r.calcMatMulShape([u[g-2],u[g-1]],[d[f-2],d[f-1]]);if(_===void 0)return;[y[c-2],y[c-1]]=_}for(let _=v?3:1;_<=c;_++){const b=g-_<0?1:u[g-_],S=f-_<0?1:d[f-_];if(b!==S&&b>1&&S>1)return;y[c-_]=Math.max(b,S)}return y}static isValidBroadcast(u,d){const v=u.length,g=d.length;if(v>g)return!1;for(let f=1;f<=v;f++)if(u[v-f]!==1&&u[v-f]!==d[g-f])return!1;return!0}}t.BroadcastUtil=a;class o{static size(u){return o.getSizeFromDimensionRange(u,0,u.length)}static sizeFromDimension(u,d){if(d<0||d>u.length)throw new Error(`invalid dimension of ${d} for sizeFromDimension as Tensor has ${u.length} dimensions.`);return o.getSizeFromDimensionRange(u,d,u.length)}static sizeToDimension(u,d){if(d<0||d>u.length)throw new Error(`invalid dimension of ${d} for sizeToDimension as Tensor has ${u.length} dimensions.`);return o.getSizeFromDimensionRange(u,0,d)}static getSizeFromDimensionRange(u,d,v){let g=1;for(let f=d;f<v;f++){if(u[f]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");g*=u[f]}return g}static computeStrides(u){const d=u.length;if(d===0)return[];if(d===1)return[1];const v=new Array(d);v[d-1]=1,v[d-2]=u[d-1];for(let g=d-3;g>=0;--g)v[g]=v[g+1]*u[g+1];return v}static normalizeAxis(u,d){if(u<-d&&u>=d)throw new Error("unsupported axis for this operation.");return u<0?u+d:u}static normalizeAxes(u,d){return u.map(v=>this.normalizeAxis(v,d??u.length))}static sortBasedOnPerm(u,d){return d?d.map(v=>u[v]):u.slice().reverse()}static padShape(u,d){const v=u.length;return u.map((g,f)=>g+d[f]+d[f+v])}static areEqual(u,d){return u.length===d.length&&u.every((v,g)=>v===d[g])}}t.ShapeUtil=o;class s{static adjustPoolAttributes(u,d,v,g,f,c){if(!u&&v.length!==d.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(u)for(let y=0;y<d.length-2;y++)y>=v.length?v.push(d[y+2]):v[y]=d[y+2];for(let y=0;y<v.length;y++)if(y<g.length){if(g[y]<0)throw new Error("strides should be greater than or equal to 1")}else g.push(1);for(let y=0;y<v.length;y++)if(y<f.length){if(f[y]<0)throw new Error("dilations should be greater than or equal to 1")}else f.push(1);for(let y=0;y<2*v.length;y++)if(y<c.length){if(c[y]<0)throw new Error("pad should be greater than or equal to 1")}else c.push(0);for(let y=0;y<v.length;y++){if(v[y]<=0)throw new Error("kernel shapes need to be greater than 0");if(c[y]>=v[y]||c[y+v.length]>=v[y])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(u,d,v,g,f,c,y){if(y){if(f.length!==2*(u.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(d.length!==u.length-2)throw new Error("length of strides should be the length of data dimensions");if(g.length!==u.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let _=0;_<u.length-2;_++)s.adjustPadAndReturnShape(u[_+(c?1:2)],d[_],v[_],g[_],f,_,_+u.length-2,y)}}static computePoolOutputShape(u,d,v,g,f,c,y){if(d.length<=0)throw new Error("input shape must be of size greater than 0");const _=[d[0],d[1]];return s.computeShapeHelper(u,d,_,v,g,f,c,y),_}static computeConvOutputShape(u,d,v,g,f,c,y){if(u.length<=0||d.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const _=[u[0],d[0]];return s.computeShapeHelper(!1,u,_,v,g,f,c,y),_}static computeShapeHelper(u,d,v,g,f,c,y,_){if(u)for(let b=0;b<d.length-2;b++)v.push(1);else for(let b=0;b<d.length-2;b++)v.push(s.adjustPadAndReturnShape(d[b+2],g[b],f[b],c[b],y,b,b+d.length-2,_))}static adjustPadAndReturnShape(u,d,v,g,f,c,y,_){const b=v*(g-1)+1;if(!_||_==="NOTSET")return Math.floor((u+f[c]+f[y]-b)/d+1);switch(_){case"VALID":return f[c]=0,f[y]=0,Math.floor((u-b)/d+1);case"SAME_LOWER":case"SAME_UPPER":if(v!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const S=((u+d-1)/d-1)*d+g-u;return f[c]=Math.floor(_==="SAME_LOWER"?(S+1)/2:S/2),f[y]=S-f[c],Math.floor((u+S-g)/d+1)}default:throw new Error("Unsupported AutoPad type")}}}t.PoolConvUtil=s,t.GemmUtil=class{static getShapeOfGemmResult(l,u,d,v,g){if(l.length!==2||d.length!==2)throw new Error("shape need to be of size 2");let f,c,y;u?(f=l[1],c=l[0]):(f=l[0],c=l[1]);let _=-1;if(v?(y=d[0],_=1):(y=d[1],_=0),d[_]!==c)throw new Error("dimension mismatch");if(f<=0||y<=0||c<=0)throw new Error("invalid shape specified");if(g&&!a.isValidBroadcast(g,[f,y]))throw new Error("gemm: invalid bias shape for broadcast");return[f,y,c]}},t.MIN_CLIP=-34028234663852886e22,t.MAX_CLIP=34028234663852886e22},387:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAttributeWithCacheKey=void 0;class r{constructor(o){Object.assign(this,o)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(o=>`${this[o]}`).join(";")),this._cacheKey}}t.createAttributeWithCacheKey=a=>new r(a)},7771:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createGpuDataManager=void 0;const a=r(4955),o=r(1163),s=d=>16*Math.ceil(d/16);let l=0;class u{constructor(v){this.backend=v,this.storageCache=new Map,this.downloadCache=new Map,this.buffersForUploadingPending=[],this.buffersPending=[]}upload(v,g){const f=g.buffer,c=g.byteOffset,y=g.byteLength,_=s(y),b=this.storageCache.get(v);if(!b)throw new Error("gpu data for uploading does not exist");if(b.originalSize!==y)throw new Error(`inconsistent data size. gpu data size=${b.originalSize}, data size=${y}`);const S=this.backend.device.createBuffer({mappedAtCreation:!0,size:_,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),x=S.getMappedRange();new Uint8Array(x).set(new Uint8Array(f,c,y)),S.unmap();const w=this.backend.getCommandEncoder();this.backend.endComputePass(),w.copyBufferToBuffer(S,0,b.gpuData.buffer,0,_),(0,a.LOG_DEBUG)("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${v})`),this.buffersForUploadingPending.push(S)}memcpy(v,g){const f=this.storageCache.get(v);if(!f)throw new Error("source gpu data for memcpy does not exist");const c=this.storageCache.get(g);if(!c)throw new Error("destination gpu data for memcpy does not exist");if(f.originalSize!==c.originalSize)throw new Error("inconsistent source and destination gpu data size");const y=s(f.originalSize);this.backend.getCommandEncoder().copyBufferToBuffer(f.gpuData.buffer,0,c.gpuData.buffer,0,y)}create(v,g=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){const f=s(v),c=this.backend.device.createBuffer({size:f,usage:g}),y={id:l++,type:o.GpuDataType.default,buffer:c};return this.storageCache.set(y.id,{gpuData:y,originalSize:v}),(0,a.LOG_DEBUG)("verbose",()=>`[WebGPU] GpuDataManager.create(size=${v}) => id=${y.id}`),y}get(v){var g;return(g=this.storageCache.get(v))===null||g===void 0?void 0:g.gpuData}release(v){const g=this.storageCache.get(v);if(!g)throw new Error("releasing data does not exist");return(0,a.LOG_DEBUG)("verbose",()=>`[WebGPU] GpuDataManager.release(id=${v}), gpuDataId=${g.gpuData.id}`),this.storageCache.delete(v),this.buffersPending.push(g.gpuData.buffer),this.downloadCache.get(v)&&this.downloadCache.delete(v),g.originalSize}async download(v){const g=this.downloadCache.get(v);if(g)return g.data;const f=this.storageCache.get(v);if(!f)throw new Error("data does not exist");const c=this.backend.getCommandEncoder();this.backend.endComputePass();const y=this.backend.device.createBuffer({size:f.originalSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});c.copyBufferToBuffer(f.gpuData.buffer,0,y,0,f.originalSize),this.backend.flush();const _=new Promise(b=>{y.mapAsync(GPUMapMode.READ).then(()=>{const S=y.getMappedRange().slice(0);y.destroy(),b(S)})});return this.downloadCache.set(v,{data:_}),_}refreshPendingBuffers(){for(const v of this.buffersForUploadingPending)v.destroy();for(const v of this.buffersPending)v.destroy()}}t.createGpuDataManager=(...d)=>new u(...d)},8510:function(n,t,r){var a=this&&this.__createBinding||(Object.create?function(y,_,b,S){S===void 0&&(S=b);var x=Object.getOwnPropertyDescriptor(_,b);x&&!("get"in x?!_.__esModule:x.writable||x.configurable)||(x={enumerable:!0,get:function(){return _[b]}}),Object.defineProperty(y,S,x)}:function(y,_,b,S){S===void 0&&(S=b),y[S]=_[b]}),o=this&&this.__setModuleDefault||(Object.create?function(y,_){Object.defineProperty(y,"default",{enumerable:!0,value:_})}:function(y,_){y.default=_}),s=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var _={};if(y!=null)for(var b in y)b!=="default"&&Object.prototype.hasOwnProperty.call(y,b)&&a(_,y,b);return o(_,y),_};Object.defineProperty(t,"__esModule",{value:!0}),t.WEBGPU_OP_RESOLVE_RULES=void 0;const l=s(r(504)),u=r(9770),d=r(4271),v=r(1522),g=s(r(5262)),f=r(2625),c=s(r(9302));t.WEBGPU_OP_RESOLVE_RULES=new Map([["Abs",[c.abs]],["Acos",[c.acos]],["Acosh",[c.acosh]],["Add",[l.add]],["Asin",[c.asin]],["Asinh",[c.asinh]],["Atan",[c.atan]],["Atanh",[c.atanh]],["AveragePool",[g.averagePool,g.parseAveragePoolAttributes]],["Ceil",[c.ceil]],["ClipV10",[c.clipV10]],["Clip",[c.clip]],["Conv",[u.conv,u.parseConvAttributes]],["Cos",[c.cos]],["Cosh",[c.cosh]],["Div",[l.div]],["Elu",[c.elu,c.parseAlphaAttributes]],["Erf",[c.erf]],["Exp",[c.exp]],["Floor",[c.floor]],["Gemm",[d.gemm,d.parseGemmAttributes]],["GlobalAveragePool",[g.globalAveragePool,g.parseGlobalAveragePoolAttributes]],["GlobalMaxPool",[g.globalMaxPool,g.parseGlobalMaxPoolAttributes]],["LeakyRelu",[c.leakyRelu,c.parseAlphaAttributes]],["MatMul",[v.matMul]],["MaxPool",[g.maxPool,g.parseMaxPoolAttributes]],["Mul",[l.mul]],["Neg",[c.neg]],["Pow",[l.pow]],["Reciprocal",[c.reciprocal]],["Relu",[c.relu]],["Sigmoid",[c.sigmoid]],["Sin",[c.sin]],["Sinh",[c.sinh]],["Sqrt",[c.sqrt]],["Sub",[l.sub]],["Tan",[c.tan]],["Tanh",[c.tanh]],["ThresholdedRelu",[c.thresholdedRelu,c.parseAlphaAttributes]],["Transpose",[f.transpose,f.parseTransposeAttributes]]])},1427:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.biasActivationSnippet=t.activationFnSnippet=t.typeSnippet=void 0,t.typeSnippet=r=>{switch(r){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error(`${r}-component is not supported.`)}},t.activationFnSnippet=(r,a=!1,o=!1,s=3)=>"",t.biasActivationSnippet=(r,a)=>`
      ${r?"value = value + getBiasByOutputCoords(coords);":""}
      ${a?"value = activation(value, coords);":""}
      `},9456:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createConv2DMatMulProgramInfo=void 0;const a=r(4955),o=r(6952),s=r(1163),l=r(1427),u=r(4085),d=r(158);t.createConv2DMatMulProgramInfo=(v,g,f,c,y,_,b,S,x)=>{const w=f.format==="NHWC",T=w?v[0].dims[3]:v[0].dims[1],A=c[0],E=w?c[2]:c[3],$=w?c[1]:c[2],P=w?c[3]:c[1],I=((T%4==0||T%3==0)&&w||E%4==0&&!w)&&P%4==0,C=w?P:E*$,M=w?E*$:P,D=I?[8,8,1]:[C<=4?4:16,C>4&&M<=4?4:16,1],R=I?[4,4,1]:[C<=4?1:2,C>4&&M<=4?1:2,1],N=[Math.ceil(C/D[0]/R[0]),Math.ceil(M/D[1]/R[1]),Math.ceil(A/D[2]/R[1])];(0,a.LOG_DEBUG)("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${N}`);const O=I?w&&T%4!=0?3:4:R[0],F=D[1]*R[1],L=D[0]*R[0],B=Math.max(D[0]*O,D[1]),V=y%F==0,H=_%L==0,X=b%B==0,U=I?[O,4,4]:[1,1,1],te=[`@group(0) @binding(0) var<storage, read> x: array<${I&&O===4?"vec4<f32>":"f32"}>;`,`@group(0) @binding(1) var<storage, read> w: array<${I?"vec4<f32>":"f32"}>;`];let ee=`
      fn setOutputAtIndex(flatIndex : i32, value : ${I?"vec4<f32>":"f32"}) {
        result[flatIndex] = ${I?"vec4<f32>":"f32"}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${I?"vec4<f32>":"f32"}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${I?"/ 4":""}, value);
      }`;return S&&(te.push(`@group(0) @binding(2) var<storage, read> bias: array<${I?"vec4<f32>":"f32"}>;`),ee+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${I?"vec4<f32>":"f32"} {
          return bias[coords.${w?"w":"y"}${I?"/ 4":""}];
        }`),Object.assign(Object.assign({},g),{outputs:[{dims:c,dataType:v[0].dataType,gpuDataType:s.GpuDataType.default}],dispatchGroup:()=>({x:N[0],y:N[1],z:N[2]}),getShaderSource:()=>`
        ${u.utilFunctions}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${te.join("")}
        @group(0) @binding(${te.length}) var<storage, read_write> result: array<${I?"vec4<f32>":"f32"}>;
        //@group(0) @binding(${te.length+1}) var<uniform> uniforms: Uniforms;

        const xShape : vec4<i32> = vec4<i32>(${v[0].dims.join(",")});
        const wShape : vec4<i32> = vec4<i32>(${v[1].dims.join(",")});
        const outShape : vec4<i32> = vec4<i32>(${c.join(",")});
        const outShapeStrides : vec3<i32> = vec3<i32>(${o.ShapeUtil.computeStrides(c).slice(0,3).join(",")});
        const filterDims : vec2<i32> = vec2<i32>(${f.kernelShape[0]}, ${f.kernelShape[1]});
        const pad : vec2<i32> = vec2<i32>(${f.pads[0]}, ${f.pads[1]});
        const stride : vec2<i32> = vec2<i32>(${f.strides[0]}, ${f.strides[1]});
        const dilation : vec2<i32> = vec2<i32>(${f.dilations[0]}, ${f.dilations[1]});
        const dimAOuter : i32 = ${y};
        const dimBOuter : i32 = ${_};
        const dimInner : i32 = ${b};
        ${ee}
        ${((q,ie,pe,j,Q=!1,J,oe=!1,ne=4,z=4,W=4)=>{const Z=q?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,ae=q?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,se=q?"xShape[1]":"xShape[2]",ce=q?"xShape[2]":"xShape[3]",_e=q?"row":"col",ge=q?"col":"row",me=`
    let inChannels = wShape[2];
    let outWidth = ${q?"outShape[2]":"outShape[3]"};
    let outRow = ${_e} / outWidth;
    let outCol = ${_e} % outWidth;

    let WRow = ${ge} / (filterDims[1] * inChannels);
    let WCol = ${ge} / inChannels % filterDims[1];
    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];
    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];
    let xCh = ${ge} % inChannels;
    var resData = ${(0,l.typeSnippet)(ne)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${se} && xCol >= 0 && xCol < ${ce}) {
      ${Z}
      let xIndex = getIndexFromCoords4D(coord, xShape);
      ${(Ce=>{switch(Ce){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${Ce} is not supported.`)}})(ne)}
    }
    return resData;`,de=q?ie&&j?`
    let col = colIn * ${ne};
    ${me}`:`
    let col = colIn * ${ne};
    if (row < dimAOuter && col < dimInner) {
      ${me}
    }
    return ${(0,l.typeSnippet)(ne)}(0.0);`:j&&pe?`
    let col = colIn * ${ne};
    ${me}`:`
    let col = colIn * ${ne};
    if (row < dimInner && col < dimBOuter) {
      ${me}
    }
    return ${(0,l.typeSnippet)(ne)}(0.0);`,xe=`${(Ce=>{switch(Ce){case 1:return"return w[row * wShape[3] + colIn];";case 4:return"return w[row * wShape[3] / 4 + colIn];";default:throw new Error(`innerElementSize ${Ce} is not supported.`)}})(z)}`,be=(0,l.typeSnippet)(W),Ee=q?(0,l.typeSnippet)(ne):(0,l.typeSnippet)(z),$e=q?(0,l.typeSnippet)(z):(0,l.typeSnippet)(ne);return`
    ${(0,l.activationFnSnippet)(J,oe,W===4,4)}
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${Ee} {
      ${q?de:xe}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${$e} {
      ${q?xe:de}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${be}) {
      let col = colIn * ${W};
      if (row < dimAOuter && col < dimBOuter)
      {
      var value = valueIn;
      let outWidth = ${q?"outShape[2]":"outShape[3]"};
      ${ae}
      ${(0,l.biasActivationSnippet)(Q,J)}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`})(w,V,H,X,S,void 0,!1,U[0],U[1],U[2])}
            ${I?(0,d.makeMatMulPackedVec4Source)(R,D,!w,B):(0,d.makeMatMulPackedSource)(R,D,!w,B,!1,void 0,x)}`})}},4085:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.utilFunctions=void 0,t.utilFunctions=`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    outShapeStrides.x, outShapeStrides.y, outShapeStrides.z, 1));
}
`},158:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeMatMulPackedSource=t.makeMatMulPackedVec4Source=void 0,t.makeMatMulPackedVec4Source=(a,o,s=!1,l=32,u=!1,d=32,v=!1)=>{const g=o[1]*a[1],f=o[0]*a[0],c=s?g:l,y=s?l:g,_=c/o[0],b=l/o[1];if((!s||_!==4||a[1]!==4)&&(s||_!==3&&_!==4)||c%o[0]!=0||l%o[1]!=0||a[0]!==4)throw new Error(`If transposeA ${s} is true, innerElementSize ${_} and workPerThread[1] ${a[1]} must be 4.
      Otherwise, innerElementSize ${_} must be 3 or 4.
  tileAWidth ${c} must be divisible by workgroupSize[0]${o[0]}. tileInner ${l} must be divisible by workgroupSize[1] ${o[1]}. colPerThread ${a[0]} must be 4.`);return`
var<workgroup> mm_Asub : array<array<vec${_}<f32>, ${c/_}>, ${y}>;
var<workgroup> mm_Bsub : array<array<vec4<f32>, ${f/a[0]}>, ${l}>;

const rowPerThread = ${a[1]};
const colPerThread = ${a[0]};
const innerElementSize = ${_};
const tileInner = ${l};

@compute @workgroup_size(${o[0]}, ${o[1]}, ${o[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = ${v?"0":"localRow * rowPerThread"};
  let tileCol = i32(localId.x);

  let globalRow = ${v?"0":"i32(globalId.y) * rowPerThread"};
  let globalCol = i32(globalId.x);
  let batch = ${u?"0":"i32(globalId.z)"};
  let globalRowStart = i32(workgroupId.y) * ${g};

  let numTiles = ${u?`${Math.ceil(d/l)}`:"(dimInner - 1) / tileInner + 1"};
  var kStart = ${u?`i32(globalId.z) * ${d}`:"0"};

  var acc: array<vec4<f32>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${b};
  for (var t = 0; t < numTiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${S=s,S?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol);
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol);
        `}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${b}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol);
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${_===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${((x,w)=>x?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${w===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${w===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${w===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`)(s,_)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`;var S};const r=a=>a?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol);
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol);
            `;t.makeMatMulPackedSource=(a,o,s=!1,l=32,u=!1,d=32,v=!1)=>{const g=a[1]*o[1],f=a[0]*o[0],c=s?g:l,y=s?l:g;if(y%o[1]!=0||c%o[0]!=0||l%o[1]!=0)throw new Error(`tileAHight ${y} must be divisible by workgroupSize[1]${o[1]}, tileAWidth ${c} must be divisible by workgroupSize[0]${o[0]}, tileInner ${l} must be divisible by workgroupSize[1]${o[1]}`);const _=y/o[1],b=c/o[0],S=l/o[1],x=v?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${g};
    let globalColStart = i32(workgroupId.x) * ${f};

    // Loop over shared dimension.
    for (var t = 0; t < numTiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${y}; inputRow = inputRow + ${o[1]}) {
        for (var inputCol = localCol; inputCol < ${c}; inputCol = inputCol + ${o[0]}) {
          ${r(s)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${l}; inputRow = inputRow + ${o[1]}) {
            for (var inputCol = localCol; inputCol < ${f}; inputCol = inputCol + ${o[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol);
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<f32, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${o[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${s?`mm_Asub[k][localRow + innerRow * ${o[1]}];`:`mm_Asub[localRow + innerRow * ${o[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${o[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${o[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${g};

let tileRowA = i32(localId.y) * ${_};
let tileColA = i32(localId.x) * ${b};
let tileRowB = i32(localId.y) * ${S};
// Loop over shared dimension.
for (var t = 0; t < numTiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${b}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${r(s)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${S}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol);
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<f32, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${(w=>w?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];")(s)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<f32, ${c}>, ${y}>;
  var<workgroup> mm_Bsub : array<array<f32, ${f}>, ${l}>;
  const rowPerThread = ${a[1]};
  const colPerThread = ${a[0]};
  const tileInner = ${l};

@compute @workgroup_size(${o[0]}, ${o[1]}, ${o[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${u?"0":"i32(globalId.z)"};
    let numTiles = ${u?`${Math.ceil(d/l)}`:"(dimInner - 1) / tileInner + 1"};
    var kStart = ${u?`i32(globalId.z) * ${d}`:"0"};

    var acc : array<array<f32, colPerThread>, rowPerThread>;

    // Without this initialization strange values show up in acc.
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = 0.0;
      }
    }
    ${x}
  }
`}},504:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.pow=t.mul=t.div=t.add=void 0;const a=r(6952),o=r(1163),s=r(2075),l=(u,d,v,g,f)=>{const c={name:d,inputTypes:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:f};return Object.assign(Object.assign({},c),{get:()=>((y,_,b,S,x,w=_.dataType)=>{var T,A;const E=!a.ShapeUtil.areEqual(_.dims,b.dims);let $=_.dims,P=a.ShapeUtil.size(_.dims),I=!1;if(E){const C=a.BroadcastUtil.calcShape(_.dims,b.dims,!1);if(!C)throw new Error("Can't perform binary op on the given tensors");$=C,P=a.ShapeUtil.size($);let M=1;for(let D=0;D<$.length;D++){const R=(T=_.dims[_.dims.length-D])!==null&&T!==void 0?T:1;if(R!==((A=b.dims[b.dims.length-D])!==null&&A!==void 0?A:1))break;M*=R}M%4==0&&(I=!0)}else I=!0;return Object.assign(Object.assign({},y),{getShaderSource:C=>((M,D,R,N,O,F,L,B,V="f32",H="f32",X="f32")=>{const U=a.ShapeUtil.size(N),te=Math.ceil(U/4);let ee,q;typeof L=="string"?ee=q=(Q,J)=>`${L}((${Q}),(${J}))`:typeof L=="function"?ee=q=L:(ee=L.scalar,q=L.vector);let ie="";const pe=(0,s.createIndicesHelper)("output",N);if(F){const Q=J=>{const oe=a.ShapeUtil.computeStrides(J),ne=[];for(let z=J.length-1;z>=0;z--){const W=N.length===0?"0u":N.length===1?"(*outputIndices)":`(*outputIndices)[${z+N.length-J.length}]`;ne.push(`${oe[z]}u * (${W} % ${J[z]}u)`)}return ne.length>0?ne.join("+"):"0u"};ie=`
  ${pe.o2iImpl}

  fn calcOffsetA(outputIndices: ptr<function, ${pe.iType}>) -> u32 {
    return ${Q(D)};
  }

  fn calcOffsetB(outputIndices: ptr<function, ${pe.iType}>) -> u32 {
    return ${Q(R)};
  }
  `}let j;if(O)j=F?`
      ${pe.indicesVariableDeclaration("outputIndices")}
      ${pe.o2iCall("global_idx * 4u","outputIndices")}
      let offsetA = calcOffsetA(&outputIndices);
      let offsetB = calcOffsetB(&outputIndices);
      outputData[global_idx] = ${q("aData[offsetA / 4u]","bData[offsetB / 4u]")};`:`outputData[global_idx] = ${q("aData[global_idx]","bData[global_idx]")};`;else{if(!F)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");const Q=J=>{const oe=`aData[indexA${J}][componentA${J}]`,ne=`bData[indexB${J}][componentB${J}]`;return`
      ${pe.o2iCall(`global_idx * 4u + ${J}u`,"outputIndices")}
      let offsetA${J} = calcOffsetA(&outputIndices);
      let offsetB${J} = calcOffsetB(&outputIndices);
      let indexA${J} = offsetA${J} / 4u;
      let indexB${J} = offsetB${J} / 4u;
      let componentA${J} = offsetA${J} % 4u;
      let componentB${J} = offsetB${J} % 4u;
      outputData[global_idx][${J}] = ${ee(oe,ne)};`};j=`
      ${pe.indicesVariableDeclaration("outputIndices")}
      ${Q(0)}
      ${Q(1)}
      ${Q(2)}
      ${Q(3)}`}return`
  @group(0) @binding(0) var<storage, read> aData : array<vec4<${V}>>;
  @group(0) @binding(1) var<storage, read> bData : array<vec4<${H}>>;
  @group(0) @binding(2) var<storage, read_write> outputData : array<vec4<${X}>>;

  ${B??""}
  ${ie}

  ${M.mainStart()}
    ${M.guardAgainstOutOfBoundsWorkgroupSizes(te)}
    ${j}
  }`})(C,_.dims,b.dims,$,I,E,S,x),outputs:[{dims:$,dataType:w,gpuDataType:o.GpuDataType.default}],dispatchGroup:()=>({x:Math.ceil(P/64/(I?4:1))})})})(c,u[0],u[1],v,g)})};t.add=u=>{u.compute(l(u.inputs,"Add",(d,v)=>`${d}+${v}`))},t.div=u=>{u.compute(l(u.inputs,"Div",(d,v)=>`${d}/${v}`))},t.mul=u=>{u.compute(l(u.inputs,"Mul",(d,v)=>`${d}*${v}`))},t.pow=u=>{u.compute(l(u.inputs,"Pow",{scalar:(d,v)=>`pow_f32(${d},${v})`,vector:(d,v)=>`pow_vf32(${d},${v})`},`
    fn pow_f32(a : f32, b : f32) -> f32 {
      if (b == 0.0) {
        return 1.0;
      } else if (a < 0.0 && b != floor(b)) {
        return pow(a, b); // NaN
      }
      return select(sign(a), 1.0, round(abs(b) % 2.0) != 1.0) * pow(abs(a), b);
    }
    fn pow_vf32(a : vec4<f32>, b : vec4<f32>) -> vec4<f32> {
      // TODO: implement vectorized pow
      return vec4<f32>(pow_f32(a.x, b.x), pow_f32(a.y, b.y), pow_f32(a.z, b.z), pow_f32(a.w, b.w));
    }
      `))},t.sub=u=>{u.compute(l(u.inputs,"Sub",(d,v)=>`${d}-${v}`))}},2075:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createShaderHelper=t.createIndicesHelper=t.WORKGROUP_SIZE=void 0;const a=r(6952);t.WORKGROUP_SIZE=64,t.createIndicesHelper=(s,l)=>{const u=l.length<2?"u32":`array<u32, ${l.length}>`,d=a.ShapeUtil.computeStrides(l);let v="";for(let c=0;c<l.length-1;c++)v+=`
    let dim${c} = current / ${d[c]}u;
    let rest${c} = current % ${d[c]}u;
    (*indices)[${c}] = dim${c};
    current = rest${c};
    `;v+=`(*indices)[${l.length-1}] = current;`;const g=l.length<2?"":`
  fn ih_o2i_${s}(offset: u32, indices: ptr<function, ${u}>) {
    var current = offset;
    ${v}
  }`,f=[];if(l.length===0)f.push("0u");else if(l.length<2)f.push("(*indices)");else for(let c=l.length-1;c>=0;c--)f.push(`${d[c]}u * ((*indices)[${c}])`);return{o2iImpl:g,o2iCall:(c,y)=>l.length<2?`${y}=${c};`:`ih_o2i_${s}(${c}, &${y});`,i2oImpl:l.length<2?"":`
  fn ih_i2o_${s}(indices: ptr<function, ${u}>) -> u32 {
    return ${f.join("+")};
  }`,i2oExpression:(c,y)=>l.length<2?`(${y?"*":""}${c})`:`ih_i2o_${s}(${y?"":"&"}${c})`,indicesVariableDeclaration:(c,y)=>`var ${c}:${u}${y?`=${u}(${y.join(",")})`:""};`,iType:u}};class o{constructor(l){this.normalizedDispatchGroup=l}guardAgainstOutOfBoundsWorkgroupSizes(l){return`if (global_idx >= ${typeof l=="number"?`${l}u`:l}) { return; }`}mainStart(l=t.WORKGROUP_SIZE){const u=typeof l=="number"?l:l[0],d=typeof l=="number"?1:l[1],v=typeof l=="number"?1:l[2],g=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1;return`@compute @workgroup_size(${u}, ${d}, ${v})
  fn main(${g?"@builtin(global_invocation_id) global_id : vec3<u32>":`@builtin(local_invocation_index) local_index : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>`}) {
    ${g?"let global_idx = global_id.x;":`let global_idx = (workgroup_id.z * ${this.normalizedDispatchGroup[0]*this.normalizedDispatchGroup[1]}u +
          workgroup_id.y * ${this.normalizedDispatchGroup[0]}u + workgroup_id.x) * ${u*d*v}u + local_index;`}
  `}}t.createShaderHelper=s=>new o(s)},9192:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createGroupedConvProgramInfoLoader=void 0;const a=r(6952),o=r(1163),s=r(2075),l=r(9770),u=r(3997);t.createGroupedConvProgramInfoLoader=(d,v,g)=>{const f=(c=d.length>2,y=v.cacheKey,{name:"GroupedConv",inputTypes:c?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:y});var c,y;return Object.assign(Object.assign({},f),{get:()=>((_,b,S,x)=>{const w=_.length>2,T=w?"value += b[output_channel];":"",A=_[0].dims,E=_[1].dims,$=E[0]/S.group,P="f32",{activationFunction:I,applyActivation:C}=(0,u.getActicationSnippet)(S),M=[`@group(0) @binding(0) var<storage, read> x : array<${P}>;`,`@group(0) @binding(1) var<storage, read> w : array<${P}>;`];w&&M.push(`@group(0) @binding(2) var<storage, read> b : array<${P}>;`);const D=S.format==="NHWC",R=(0,l.calculateOutputShape)(A,E,S.dilations,S.pads,S.strides,D),N=a.ShapeUtil.size(R),O=(0,s.createIndicesHelper)("output",R),F=(0,s.createIndicesHelper)("x",A),L=(0,s.createIndicesHelper)("w",E);return Object.assign(Object.assign({},b),{outputs:[{dims:x?x(R):R,dataType:_[0].dataType,gpuDataType:o.GpuDataType.default}],getShaderSource:B=>`
  const strides: vec2<u32> = vec2(${S.strides[0]}u, ${S.strides[1]}u);
  const pads: vec2<u32> = vec2(${S.pads[0]}u, ${S.pads[1]}u);

  ${M.join(`
`)}
  @group(0) @binding(${M.length}) var<storage, read_write> output : array<${P}>;

  ${I}
  ${O.o2iImpl}
  ${F.i2oImpl}
  ${L.i2oImpl}

  ${B.mainStart()}
    ${B.guardAgainstOutOfBoundsWorkgroupSizes(N)}

    ${O.indicesVariableDeclaration("outputIndices")}
    ${O.o2iCall("global_idx","outputIndices")}
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${D?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${D?1:2}], outputIndices[${D?2:3}]) * strides - pads;
    let group_id: u32 = output_channel / ${$}u;

    var value: ${P} = ${P}(0);
    for (var wInChannel: u32 = 0u; wInChannel < ${E[1]}u; wInChannel++) {
      let input_channel = group_id * ${E[1]}u + wInChannel;
      for (var wHeight: u32 = 0u; wHeight < ${E[2]}u; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * ${S.dilations[0]}u;

        if (xHeight < 0u || xHeight >= ${A[D?1:2]}u) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < ${E[3]}u; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * ${S.dilations[1]}u;
          if (xWidth < 0u || xWidth >= ${A[D?2:3]}u) {
            continue;
          }

          ${F.indicesVariableDeclaration("xIndices",D?["batch","xHeight","xWidth","input_channel"]:["batch","input_channel","xHeight","xWidth"])}
          let xVal = x[${F.i2oExpression("xIndices")}];
          ${L.indicesVariableDeclaration("wIndices",["output_channel","wInChannel","wHeight","wWidth"])}
          let wVal = w[${L.i2oExpression("wIndices")}];
          value += xVal*wVal;
        }
      }
    }
    ${T}
    ${C}
    output[global_idx] = value;
  }`,dispatchGroup:()=>({x:Math.ceil(N/64)})})})(d,f,v,g)})}},9770:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.conv=t.parseConvAttributes=t.calculateOutputShape=void 0;const a=r(6952),o=r(387),s=r(9192),l=r(3822),u=r(3997),d=r(2625);t.calculateOutputShape=(f,c,y,_,b,S)=>{const x=f[0],w=f.slice(S?1:2,S?3:4),T=w.length,A=c[0],E=c.slice(2).map((P,I)=>P+(P-1)*(y[I]-1)),$=w.map((P,I)=>P+_[I]+_[I+T]).map((P,I)=>Math.floor((P-E[I]+b[I])/b[I]));return $.splice(0,0,x),$.splice(S?3:1,0,A),$};const v=(0,o.createAttributeWithCacheKey)({perm:[2,3,1,0]}),g=(f,c)=>{const y=f.kernelShape.slice();for(let S=2;S<c[1].dims.length;++S)y[S-2]===0&&(y[S-2]=c[1].dims[S]);const _=f.pads.slice();a.PoolConvUtil.adjustPadsBasedOnAutoPad(c[0].dims,f.strides,f.dilations,y,_,f.format==="NHWC",f.autoPad);const b=Object.assign({},f);return Object.assign(b,{kernelShape:y,pads:_,cacheKey:f.cacheKey}),b};t.parseConvAttributes=f=>{const c=(0,u.parseInternalActivationAttributes)(f),y=f.format,_=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][f.auto_pad],b=f.dilations,S=f.group,x=f.kernel_shape,w=f.pads,T=f.strides,A=f.w_is_const();return(0,o.createAttributeWithCacheKey)(Object.assign({autoPad:_,format:y,dilations:b,group:S,kernelShape:x,pads:w,strides:T,wIsConst:A},c))},t.conv=(f,c)=>{((y,_)=>{if(!y||y.length!==2&&y.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(y[0].dims.length!==4&&y[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(y[0].dims.length!==y[1].dims.length)throw new Error("filter does not have same dimension as input");if(y[0].dims[_.format==="NHWC"?y[0].dims.length-1:1]!==y[1].dims[1]*_.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(y.length===3&&(y[2].dims.length!==1||y[1].dims[0]!==y[2].dims[0]))throw new Error("invalid bias");const b=y[0].dims.length-2;if(_.dilations.length!==b)throw new Error(`dilations should be ${b}D`);if(_.strides.length!==b)throw new Error(`strides should be ${b}D`);if(_.pads.length!==2*b)throw new Error(`pads should be ${2*b}D`);if(_.kernelShape.length!==0&&_.kernelShape.length!==y[1].dims.length-2)throw new Error("invalid kernel shape");if(y[0].dataType!==1||y[1].dataType!==1)throw new Error("Conv input(X,W) should be float tensor");if(y.length===3&&y[2].dataType!==1)throw new Error("Conv input(bias) should be float tensor")})(f.inputs,c),f.inputs[0].dims.length===3?((y,_)=>{const b=_.format==="NHWC",S=[y.inputs[0].reshape(b?[y.inputs[0].dims[0],1,y.inputs[0].dims[1],y.inputs[0].dims[2]]:[y.inputs[0].dims[0],y.inputs[0].dims[1],1,y.inputs[0].dims[2]]),y.inputs[1].reshape([y.inputs[1].dims[0],y.inputs[1].dims[1],1,y.inputs[1].dims[2]])];y.inputs.length===3&&S.push(y.inputs[2]);const x=[0,_.pads[0],0,_.pads[1]],w=[1].concat(_.strides),T=[1].concat(_.dilations),A=[1].concat(_.kernelShape),E=g(Object.assign(Object.assign({},_),{pads:x,strides:w,dilations:T,kernelShape:A}),S);y.compute((0,s.createGroupedConvProgramInfoLoader)(S,E,$=>b?[$[0],$[2],$[3]]:[]))})(f,c):((y,_,b)=>{var S;const x=g(b,_),w=_.length===3,T=b.format==="NHWC",A=_[0].dims[T?1:2],E=_[0].dims[T?2:3],$=_[0].dims[T?3:1],P=_[1].dims[2],I=_[1].dims[3],C=(0,t.calculateOutputShape)(_[0].dims,_[1].dims,b.dilations,x.pads,b.strides,T),M=C[T?1:2],D=C[T?2:3],R=C[T?3:1];if(T&&P===A&&I===E&&b.autoPad==="VALID"||P===1&&I===1&&b.dilations[0]===1&&b.dilations[1]===1&&b.strides[0]===1&&b.strides[1]===1&&(b.autoPad==="SAME_UPPER"||b.autoPad==="SAME_LOWER"||b.autoPad==="VALID")||!T||b.group!==1)return void y.compute((0,s.createGroupedConvProgramInfoLoader)(_,x));const N=T?M*D:R,O=T?R:M*D,F=P*I*$,L=(S=y.customData.wT)!==null&&S!==void 0?S:y.compute(Object.assign(Object.assign({},d.transposeProgramMetadata),{cacheHint:v.cacheKey,get:()=>(0,d.createTransposeProgramInfo)(_[1],v.perm)}),{inputs:[1],outputs:[b.wIsConst?-2:-1]})[0];b.wIsConst&&!y.customData.wT&&(y.customData.wT=L);const B=[_[0],L];w&&(T||_[2].dims.length!==1?B.push(_[2]):B.push(_[2].reshape([_[2].dims[0],1,1]))),y.compute((0,l.createConv2DMatMulProgramInfoLoader)(B,x,C,N,O,F,w,!0),{inputs:B})})(f,f.inputs,c)}},3822:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createConv2DMatMulProgramInfoLoader=void 0;const a=r(1163),o=r(9456);t.createConv2DMatMulProgramInfoLoader=(s,l,u,d,v,g,f,c)=>{const y=((_,b)=>({name:"Conv2DMatMul",inputTypes:_?[a.GpuDataType.default,a.GpuDataType.default,a.GpuDataType.default]:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:b}))(f,l.cacheKey);return Object.assign(Object.assign({},y),{get:()=>(0,o.createConv2DMatMulProgramInfo)(s,y,l,u,d,v,g,f,c)})}},3997:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseInternalActivationAttributes=t.getActicationSnippet=void 0;const a=r(6952);t.getActicationSnippet=o=>{switch(o.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, 0.0);"};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (1.0 / (1.0 + exp(-value)));"};case"Clip":return{activationFunction:`const clip_min_=f32(${o.clipMin});const clip_max_=f32(${o.clipMax});`,applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},t.parseInternalActivationAttributes=o=>{const s=(o==null?void 0:o.activation)||"";if(s==="Clip"){const[l,u]=(o==null?void 0:o.activation_params)||[a.MIN_CLIP,a.MAX_CLIP];return{activation:s,clipMax:u,clipMin:l,activationCacheKey:`${s}:${l},${u}`}}return{activation:s,activationCacheKey:s}}},4271:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseGemmAttributes=t.gemm=void 0;const a=r(6952),o=r(387),s=r(1163);t.gemm=(l,u)=>{(d=>{if(!d)throw new Error("Input is missing");if(d.length<2||d.length>3)throw new Error("Invaid input number.");if(d.length===3&&d[2].dims.length>2)throw new Error("Invalid input shape of C");if(d[0].dataType!==1||d[1].dataType!==1||d.length===3&&d[2].dataType!==1)throw new Error("Invalid input type.");if(d[0].dataType!==d[1].dataType||d.length===3&&d[0].dataType!==d[2].dataType)throw new Error("Input types are mismatched")})(l.inputs),l.compute(((d,v)=>{const g={name:"Gemm",inputTypes:d.length===3?[s.GpuDataType.default,s.GpuDataType.default,s.GpuDataType.default]:[s.GpuDataType.default,s.GpuDataType.default],cacheHint:v.cacheKey};return Object.assign(Object.assign({},g),{get:()=>((f,c,y)=>{const _=c[0].dims.slice(),b=c[1].dims.slice(),[S,x,w]=a.GemmUtil.getShapeOfGemmResult(_,y.transA,b,y.transB,c.length===3?c[2].dims:void 0),T=[S,x];if(!T)throw new Error("Can't use gemm on the given tensors");const A=a.ShapeUtil.size(T);let E="";y.transA&&y.transB?E="value += a[k * M + m] * b[n * K + k];":y.transA&&!y.transB?E="value += a[k * M + m] * b[k * N + n];":!y.transA&&y.transB?E="value += a[m * K + k] * b[n * K + k];":y.transA||y.transB||(E="value += a[m * K + k] * b[k * N + n];");const $="f32",P=y.alpha===1?"":"value *= alpha;",I=c.length===3?`value += beta * c[${((M,D,R)=>{if(R.length===0)return"0u";const N=R.length===1&&M!==1||R.length===2&&R[0]!==M,O=R[R.length-1]!==D;let F="0u";return N||(F+=`+ m * ${R[R.length-1]}u`),O||(F+="+n"),F})(S,x,c[2].dims)}];`:"",C=[`@group(0) @binding(0) var<storage, read> a : array<${$}>;`,`@group(0) @binding(1) var<storage, read> b : array<${$}>;`];return c.length===3&&C.push(`@group(0) @binding(2) var<storage, read> c : array<${$}>;`),Object.assign(Object.assign({},f),{outputs:[{dims:T,dataType:c[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:M=>`
  const M: u32 = ${S}u;
  const N: u32 = ${x}u;
  const K: u32 = ${w}u;
  const alpha = ${$}(${y.alpha});
  const beta = ${$}(${y.beta});

  ${C.join(`
`)}
  @group(0) @binding(${c.length}) var<storage, read_write> output : array<${$}>;

  ${M.mainStart()}
    ${M.guardAgainstOutOfBoundsWorkgroupSizes(A)}

    let m = global_id.x / N;
    let n = global_id.x % N;

    var value = ${$}(0);
    for (var k: u32 = 0u; k<${w}u; k++) {
      ${E}
    }

    ${P}
    ${I}
    output[global_id.x] = value;

  }`,dispatchGroup:()=>({x:Math.ceil(A/64)})})})(g,d,v)})})(l.inputs,u))},t.parseGemmAttributes=l=>(0,o.createAttributeWithCacheKey)(l)},1522:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.matMul=t.createMatmulProgramInfoLoader=void 0;const a=r(6952),o=r(1163),s=r(3997);t.createMatmulProgramInfoLoader=(l,u)=>{const d=(v=l.length>2,g=u.activationCacheKey,{name:"MatMul",inputTypes:v?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:g});var v,g;return Object.assign(Object.assign({},d),{get:()=>((f,c,y)=>{const _=c[0].dims,b=c[1].dims,S=a.BroadcastUtil.calcShape(_,b,!0);if(!S)throw new Error("Can't use matmul on the given tensors");const x=a.ShapeUtil.size(S),w="f32",{activationFunction:T,applyActivation:A}=(0,s.getActicationSnippet)(y),E=S[S.length-2],$=_[_.length-1],P=S[S.length-1];return Object.assign(Object.assign({},f),{outputs:[{dims:S,dataType:c[0].dataType,gpuDataType:o.GpuDataType.default}],getShaderSource:I=>`
  const M: u32 = ${E}u;
  const N: u32 = ${P}u;
  const K: u32 = ${$}u;

  @group(0) @binding(0) var<storage, read> a : array<${w}>;
  @group(0) @binding(1) var<storage, read> b : array<${w}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${w}>;

  ${T}

  ${I.mainStart()}
    ${I.guardAgainstOutOfBoundsWorkgroupSizes(x)}

    let stack = global_idx / (M * N);
    let mn = global_idx % (M * N);
    let n = global_idx % N;
    let m = mn / N;

    let offsetA = stack * (M * K);
    let offsetB = stack * (K * N);

    var value = ${w}(0);
    for (var k: u32 = 0u; k<${$}u; k++) {
      value += a[offsetA + m * K + k] * b[offsetB + k * N + n];
    }
    ${A}
    output[global_idx] = value;
  }`,dispatchGroup:()=>({x:Math.ceil(x/64)})})})(d,l,u)})},t.matMul=l=>{(u=>{if(!u||u.length!==2)throw new Error("MatMul requires 2 inputs.");if(u[0].dims[u[0].dims.length-1]!==u[1].dims[u[1].dims.length-2])throw new Error("shared dimension does not match.");if(u[0].dataType!==1||u[1].dataType!==1)throw new Error("inputs should be float type")})(l.inputs),l.compute((0,t.createMatmulProgramInfoLoader)(l.inputs,{activation:"",activationCacheKey:""}))}},5262:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalMaxPool=t.parseGlobalMaxPoolAttributes=t.parseMaxPoolAttributes=t.maxPool=t.globalAveragePool=t.parseGlobalAveragePoolAttributes=t.averagePool=t.parseAveragePoolAttributes=void 0;const a=r(6952),o=r(387),s=r(1163),l=r(2075),u=_=>{if(!_||_.length!==1)throw new Error("Pool ops requires 1 input.");if(_[0].dims.length!==4)throw new Error("Pool ops supports 2-D inputs only for now.");if(_[0].dataType!==1)throw new Error("Invalid input type.")},d=(_,b,S)=>{const x=b.format==="NHWC",w=x?[_[0].dims[0],_[0].dims[3],_[0].dims[1],_[0].dims[2]]:_[0].dims.slice(),T=Object.hasOwnProperty.call(b,"dilations"),A=b.kernelShape.slice(),E=b.strides.slice(),$=T?b.dilations.slice():[],P=b.pads.slice();a.PoolConvUtil.adjustPoolAttributes(S,w,A,E,$,P);const I=a.PoolConvUtil.computePoolOutputShape(S,w,E,$,A,P,b.autoPad),C=Object.assign({},b);return T?Object.assign(C,{kernelShape:A,strides:E,pads:P,dilations:$,cacheKey:b.cacheKey}):Object.assign(C,{kernelShape:A,strides:E,pads:P,cacheKey:b.cacheKey}),[C,x?[I[0],I[2],I[3],I[1]]:I]},v=(_,b,S,x,w,T,A,E)=>{const $=x.format==="NHWC",P=b.length,I=a.ShapeUtil.size(S),C=(0,l.createIndicesHelper)("output",S),M=(0,l.createIndicesHelper)("x",b);if(x.kernelShape.length<=2){const D=x.kernelShape[x.kernelShape.length-1],R=x.strides[x.strides.length-1],N=x.pads[x.pads.length/2-1],O=P-($?2:1);let F="",L="",B="";if(F=N+x.pads[x.pads.length-1]!==0?`
              for (var i: u32 = 0u; i < ${D}u; i++) {
                xIndices[${O}] = indices[${O}] * ${R} - ${N} + i;
                if (xIndices[${O}] < 0 || xIndices[${O}] >= ${b[O]}) {
                  pad++;
                  continue;
                }
                let x_val = x[${M.i2oExpression("xIndices")}];
                ${w}
              }`:`
              for (var i: u32 = 0u; i < ${D}u; i++) {
                xIndices[${O}] = indices[${O}] * ${R} - ${N} + i;
                let x_val = x[${M.i2oExpression("xIndices")}];
                ${w}
              }`,x.kernelShape.length===2){const V=x.kernelShape[x.kernelShape.length-2],H=x.strides[x.strides.length-2],X=x.pads[x.pads.length/2-2],U=x.pads[x.pads.length-2],te=P-($?3:2),ee=b[te];L=X+U!==0?`
                for (var j: u32 = 0u; j < ${V}u; j++) {
                  xIndices[${te}] = indices[${te}] * ${H} - ${X} + j;
                  if (xIndices[${te}] < 0 || xIndices[${te}] >= ${ee}) {
                    pad+= ${D};
                    continue;
                  }
              `:`
                for (var j: u32 = 0u; j < ${V}u; j++) {
                  xIndices[${te}] = indices[${te}] * ${H} - ${X} + j;
                `,B=`
              }
            `}return`
            @group(0) @binding(0) var<storage, read> x : array<${A}>;
            @group(0) @binding(1) var<storage, read_write> output : array<${A}>;

            ${C.o2iImpl}
            ${M.i2oImpl}

            ${_.mainStart()}
              ${_.guardAgainstOutOfBoundsWorkgroupSizes(I)}

              ${C.indicesVariableDeclaration("indices")}
              ${C.o2iCall("global_idx","indices")}
              ${C.indicesVariableDeclaration("xIndices")}
              ${C.o2iCall("global_idx","xIndices")}

              var value: ${A} = ${A}(${E});
              var pad = 0;
              ${L}
              ${F}
              ${B}
              ${T}

              output[global_idx] = value;
            }`}{if($)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");const D=a.ShapeUtil.size(x.kernelShape),R=a.ShapeUtil.computeStrides(x.kernelShape),N=R.length,O=x.pads.length;let F="";return F=x.pads.reduce((L,B)=>L+B)?`
                if (xIndices[j] >= inputDims[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${M.i2oExpression("xIndices")}];
                ${w}
              }`:`
              }
              let x_val = x[${M.i2oExpression("xIndices")}];
              ${w}
            `,`
            @group(0) @binding(0) var<storage, read> x : array<${A}>;
            @group(0) @binding(1) var<storage, read_write> output : array<${A}>;

            ${C.o2iImpl}
            ${M.i2oImpl}

            const pads = array<u32, ${O}>(${x.pads.map(L=>`${L}u`).join(",")});
            const inputDims = array<u32, ${P}>(${b.map(L=>`${L}u`).join(",")});
            const kernelStrides = array<u32, ${N}>(${R.map(L=>`${L}u`).join(",")});
            const strides = array<u32, ${N}>(${x.strides.map(L=>`${L}u`).join(",")});

            ${_.mainStart()}
              ${_.guardAgainstOutOfBoundsWorkgroupSizes(I)}

              ${C.indicesVariableDeclaration("indices")}
              ${C.o2iCall("global_idx","indices")}
              ${C.indicesVariableDeclaration("xIndices")}
              ${C.o2iCall("global_idx","xIndices")}

              var offsets: array<u32, ${N}>;

              var value = ${A}(${E});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < ${D}u; i++) {
                var offset = i;
                for (var j = 0u; j < ${N-1}u; j++) {
                  offsets[j] = offset / kernelStrides[j];
                  offset -= offsets[j] * kernelStrides[j];
                }
                offsets[${N-1}] = offset;

                isPad = false;
                for (var j = ${P-N}u; j < ${P}u; j++) {
                  xIndices[j] = indices[j] * strides[j - ${P-N}u]
                    + offsets[j - ${P-N}u] - pads[j - 2u];
                  ${F}
              }
              ${T}

              output[global_idx] = value;
            }`}},g=_=>({format:_.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][_.auto_pad],ceilMode:_.ceil_mode,kernelShape:_.kernel_shape,strides:_.strides,pads:_.pads}),f=(_,b,S,x)=>{const[w,T]=d(_,x,S),A=a.ShapeUtil.size(w.kernelShape),E="f32";let $="";return w.countIncludePad?$+=`value /= ${E}(${A});`:$+=`value /= ${E}(${A} - pad);`,Object.assign(Object.assign({},b),{outputs:[{dims:T,dataType:_[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:P=>v(P,_[0].dims,T,w,"value += x_val;",$,E,"0.0"),dispatchGroup:()=>({x:Math.ceil(a.ShapeUtil.size(T)/64)})})};t.parseAveragePoolAttributes=_=>{const b=_.count_include_pad!==0,S=g(_);if(S.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,o.createAttributeWithCacheKey)(Object.assign({countIncludePad:b},S))},t.averagePool=(_,b)=>{u(_.inputs);const S={name:"AveragePool",inputTypes:[s.GpuDataType.default],cacheHint:b.cacheKey};_.compute(Object.assign(Object.assign({},S),{get:()=>f(_.inputs,S,!1,b)}))};const c={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""};t.parseGlobalAveragePoolAttributes=_=>{const b=_.format;return Object.assign(Object.assign({format:b},c),{cacheKey:b})},t.globalAveragePool=(_,b)=>{u(_.inputs);const S={name:"GlobalAveragePool",inputTypes:[s.GpuDataType.default],cacheHint:b.cacheKey};_.compute(Object.assign(Object.assign({},S),{get:()=>f(_.inputs,S,!0,b)}))};const y=(_,b,S,x)=>{const[w,T]=d(_,x,S);return Object.assign(Object.assign({},b),{outputs:[{dims:T,dataType:_[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:A=>v(A,_[0].dims,T,w,`
      value = max(x_val, value);
    `,"","f32","-1e5"),dispatchGroup:()=>({x:Math.ceil(a.ShapeUtil.size(T)/64)})})};t.maxPool=(_,b)=>{u(_.inputs);const S={name:"MaxPool",inputTypes:[s.GpuDataType.default],cacheHint:b.cacheKey};_.compute(Object.assign(Object.assign({},S),{get:()=>y(_.inputs,S,!1,b)}))},t.parseMaxPoolAttributes=_=>{const b=_.storage_order,S=_.dilations,x=g(_);if(b!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(x.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,o.createAttributeWithCacheKey)(Object.assign({storageOrder:b,dilations:S},x))},t.parseGlobalMaxPoolAttributes=_=>{const b=_.format;return Object.assign(Object.assign({format:b},c),{cacheKey:b})},t.globalMaxPool=(_,b)=>{u(_.inputs);const S={name:"GlobalMaxPool",inputTypes:[s.GpuDataType.default],cacheHint:b.cacheKey};_.compute(Object.assign(Object.assign({},S),{get:()=>y(_.inputs,S,!0,b)}))}},2625:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransposeAttributes=t.transpose=t.createTransposeProgramInfo=t.transposeProgramMetadata=void 0;const a=r(6952),o=r(387),s=r(1163),l=r(2075);t.transposeProgramMetadata={name:"Transpose",inputTypes:[s.GpuDataType.default]};const u=(d,v)=>v&&v.length!==d.length?[...d.keys()].reverse():v;t.createTransposeProgramInfo=(d,v)=>{const g=d.dims,f=u(g,v),c=((x,w)=>a.ShapeUtil.sortBasedOnPerm(x,u(x,w)))(g,f),y=g.length,_=a.ShapeUtil.size(c),b=(0,l.createIndicesHelper)("output",c),S=(0,l.createIndicesHelper)("a",g);return Object.assign(Object.assign({},t.transposeProgramMetadata),{outputs:[{dims:c,dataType:d.dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:x=>`
  @group(0) @binding(0) var<storage, read> a : array<f32>;
  @group(0) @binding(1) var<storage, read_write> output : array<f32>;

  ${((w,T)=>{const A=[];A.push(`fn perm(a: ptr<function, array<u32, ${T}>>, i: ptr<function, array<u32, ${T}>>) {`);for(let E=0;E<T;++E)A.push(`	(*a)[${w[E]}]=(*i)[${E}];`);return A.push("	}"),A.join(`
`)})(f,y)}
  ${b.o2iImpl}
  ${S.i2oImpl}

  ${x.mainStart()}
    ${x.guardAgainstOutOfBoundsWorkgroupSizes(_)}

    ${b.indicesVariableDeclaration("indices")}
    ${b.o2iCall("global_idx","indices")}
    ${S.indicesVariableDeclaration("aIndices")}
    perm(&aIndices, &indices);

    output[global_idx] = a[${S.i2oExpression("aIndices")}];
  }`,dispatchGroup:()=>({x:Math.ceil(_/64)})})},t.transpose=(d,v)=>{(g=>{if(!g||g.length!==1)throw new Error("Transpose requires 1 input.");if(g[0].dataType!==1)throw new Error("input should be float tensor")})(d.inputs),d.compute(Object.assign(Object.assign({},t.transposeProgramMetadata),{cacheHint:v.cacheKey,get:()=>(0,t.createTransposeProgramInfo)(d.inputs[0],v.perm)}))},t.parseTransposeAttributes=d=>(0,o.createAttributeWithCacheKey)({perm:d.perm})},9302:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.thresholdedRelu=t.tanh=t.tan=t.sqrt=t.sinh=t.sin=t.sigmoid=t.relu=t.reciprocal=t.neg=t.leakyRelu=t.floor=t.exp=t.erf=t.elu=t.parseAlphaAttributes=t.cosh=t.cos=t.ceil=t.clip=t.clipV10=t.atanh=t.atan=t.asinh=t.asin=t.acosh=t.acos=t.abs=void 0;const a=r(6952),o=r(387),s=r(1163),l=(u,d,v,g,f)=>{const c={name:d,inputTypes:[s.GpuDataType.default],cacheHint:f};return Object.assign(Object.assign({},c),{get:()=>((y,_,b,S)=>Object.assign(Object.assign({},y),{getShaderSource:x=>((w,T,A,E)=>{const $=Math.ceil(T/4);let P="";return P=typeof A=="string"?`${A}(a)`:A("a"),`
  @group(0) @binding(0) var<storage, read> inputData : array<vec4<f32>>;
  @group(0) @binding(1) var<storage, read_write> outputData : array<vec4<f32>>;

  ${E??""}

  ${w.mainStart()}
    ${w.guardAgainstOutOfBoundsWorkgroupSizes($)}

    let a = inputData[global_idx];
    outputData[global_idx] = ${P};
  }`})(x,a.ShapeUtil.size(_.dims),b,S),outputs:[{dims:_.dims,dataType:_.dataType,gpuDataType:s.GpuDataType.default}],dispatchGroup:x=>({x:Math.ceil(a.ShapeUtil.size(x[0].dims)/64/4)})}))(c,u,v,g)})};t.abs=u=>{u.compute(l(u.inputs[0],"Abs","abs"))},t.acos=u=>{u.compute(l(u.inputs[0],"Acos","acos"))},t.acosh=u=>{u.compute(l(u.inputs[0],"Acosh","acosh"))},t.asin=u=>{u.compute(l(u.inputs[0],"Asin","asin"))},t.asinh=u=>{u.compute(l(u.inputs[0],"Asinh","asinh"))},t.atan=u=>{u.compute(l(u.inputs[0],"Atan","atan"))},t.atanh=u=>{u.compute(l(u.inputs[0],"Atanh","atanh"))},t.clipV10=(u,d)=>{u.compute(l(u.inputs[0],"Clip",v=>`clamp(${v}, clip_min_, clip_max_)`,`
    const clip_min_: vec4<f32> = vec4(f32(${d.min}));
    const clip_max_: vec4<f32> = vec4(f32(${d.max}));
`,d.cacheKey),{inputs:[0]})},t.clip=u=>{const d=(v=>{const g=v.length>=2?v[1].getFloat32Array()[0]:a.MIN_CLIP,f=v.length>=3?v[2].getFloat32Array()[0]:a.MAX_CLIP;return(0,o.createAttributeWithCacheKey)({min:g,max:f})})(u.inputs);(0,t.clipV10)(u,d)},t.ceil=u=>{u.compute(l(u.inputs[0],"Ceil","ceil"))},t.cos=u=>{u.compute(l(u.inputs[0],"Cos","cos"))},t.cosh=u=>{u.compute(l(u.inputs[0],"Cosh","cosh"))},t.parseAlphaAttributes=u=>(0,o.createAttributeWithCacheKey)(u),t.elu=(u,d)=>{u.compute(l(u.inputs[0],"Elu",v=>`elu_vf32(${v})`,`
  const elu_alpha_: f32 = f32(${d.alpha});

  fn elu_f32(a: f32) -> f32 {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<f32>) -> vec4<f32> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,d.cacheKey))},t.erf=u=>{u.compute(l(u.inputs[0],"Erf",d=>`erf_vf32(${d})`,`
  const r0: f32 = 0.3275911;
  const r1: f32 = 0.254829592;
  const r2: f32 = -0.284496736;
  const r3: f32 = 1.421413741;
  const r4: f32 = -1.453152027;
  const r5: f32 = 1.061405429;

  fn erf_vf32(v: vec4<f32>) -> vec4<f32> {
    let absv = abs(v);
    let x = 1.0 / (1.0 + r0 * absv);
    return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
  }`))},t.exp=u=>{u.compute(l(u.inputs[0],"Exp","exp"))},t.floor=u=>{u.compute(l(u.inputs[0],"Floor","floor"))},t.leakyRelu=(u,d)=>{u.compute(l(u.inputs[0],"LeakyRelu",v=>`select(leaky_relu_alpha_ * ${v}, ${v}, ${v} >= vec4<f32>(0.0))`,`const leaky_relu_alpha_: f32 = f32(${d.alpha});`,d.cacheKey))},t.neg=u=>{u.compute(l(u.inputs[0],"Neg",d=>`-${d}`))},t.reciprocal=u=>{u.compute(l(u.inputs[0],"Reciprocal",d=>`1.0/${d}`))},t.relu=u=>{u.compute(l(u.inputs[0],"Relu",d=>`select(vec4<f32>(0.0), ${d}, ${d} > vec4<f32>(0.0))`))},t.sigmoid=u=>{u.compute(l(u.inputs[0],"Sigmoid",d=>`(1.0 / (1.0 + exp(-${d})))`))},t.sin=u=>{u.compute(l(u.inputs[0],"Sin","sin"))},t.sinh=u=>{u.compute(l(u.inputs[0],"Sinh","sinh"))},t.sqrt=u=>{u.compute(l(u.inputs[0],"Sqrt","sqrt"))},t.tan=u=>{u.compute(l(u.inputs[0],"Tan","tan"))},t.tanh=u=>{u.compute(l(u.inputs[0],"Tanh","tanh"))},t.thresholdedRelu=(u,d)=>(u.compute(l(u.inputs[0],"ThresholdedRelu",v=>`select(vec4<f32>(0.0), ${v}, ${v} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_: vec4<f32> = vec4<f32>(${d.alpha});`,d.cacheKey)),0)},8305:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramManager=void 0;const a=r(4955),o=r(2075);t.ProgramManager=class{constructor(s){this.backend=s,this.repo=new Map,this.attributesBound=!1}getArtifact(s){return this.repo.get(s)}setArtifact(s,l){this.repo.set(s,l)}run(s,l,u,d){const v=this.backend.device,g=this.backend.getComputePassEncoder();this.backend.profilingEnabled&&g.writeTimestamp(this.backend.profilingQuerySet,0),g.setPipeline(s.computePipeline);const f=[];for(const y of l)f.push({binding:f.length,resource:{buffer:y.buffer}});for(const y of u)f.push({binding:f.length,resource:{buffer:y.buffer}});const c=v.createBindGroup({layout:s.computePipeline.getBindGroupLayout(0),entries:f});if(g.setBindGroup(0,c),g.dispatchWorkgroups(...d),this.backend.pendingDispatchNumber++,this.backend.profilingEnabled){g.writeTimestamp(this.backend.profilingQuerySet,1);const y=this.backend.gpuDataManager.create(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),_=this.backend.gpuDataManager.create(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.backend.endComputePass(),this.backend.getCommandEncoder().resolveQuerySet(this.backend.profilingQuerySet,0,2,y.buffer,0),this.backend.getCommandEncoder().copyBufferToBuffer(y.buffer,0,_.buffer,0,16),this.backend.flush();const b=this.backend.currentKernelId,S=this.backend.kernels.get(b)[0];_.buffer.mapAsync(GPUMapMode.READ).then(()=>{const x=new BigUint64Array(_.buffer.getMappedRange()),w=x[0],T=x[1];_.buffer.unmap(),this.backend.profilingTimeBase===void 0&&(this.backend.profilingTimeBase=w);const A=Number(w-this.backend.profilingTimeBase),E=Number(T-this.backend.profilingTimeBase);if(!Number.isSafeInteger(A)||!Number.isSafeInteger(E))throw new RangeError("incorrect timestamp range");this.backend.gpuDataManager.release(y.id),this.backend.gpuDataManager.release(_.id),console.log(`[profiling] kernel "${b}|${S}" execution time: ${E-A} ns`)})}this.backend.pendingDispatchNumber>=16&&this.backend.flush()}dispose(){}build(s,l){const u=this.backend.device,d=s.getShaderSource((0,o.createShaderHelper)(l)),v=u.createShaderModule({code:d});return(0,a.LOG_DEBUG)("verbose",()=>`[WebGPU] shader code: ${d}`),{programInfo:s,computePipeline:u.createComputePipeline({compute:{module:v,entryPoint:"main"},layout:"auto"})}}normalizeDispatchGroupSize(s){const l=typeof s=="number"?s:s.x,u=typeof s=="number"?1:s.y||1,d=typeof s=="number"?1:s.z||1,v=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(l<=v&&u<=v&&d<=v)return[l,u,d];const g=l*u*d;let f=Math.ceil(Math.sqrt(g));if(f>v){if(f=Math.ceil(Math.cbrt(g)),f>v)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[f,f,f]}return[f,f,1]}}},1163:(n,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GpuDataType=void 0,(r=t.GpuDataType||(t.GpuDataType={}))[r.default=0]="default",r[r.upload=1]="upload",r[r.profile=2]="profile"},3899:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.iterateExtraOptions=void 0,t.iterateExtraOptions=(r,a,o,s)=>{if(typeof r=="object"&&r!==null){if(o.has(r))throw new Error("Circular reference in options");o.add(r)}Object.entries(r).forEach(([l,u])=>{const d=a?a+l:l;if(typeof u=="object")(0,t.iterateExtraOptions)(u,d+".",o,s);else if(typeof u=="string"||typeof u=="number")s(d,u.toString());else{if(typeof u!="boolean")throw new Error("Can't handle extra config type: "+typeof u);s(d,u?"1":"0")}})}},9544:function(n,t,r){var a,o=this&&this.__createBinding||(Object.create?function(D,R,N,O){O===void 0&&(O=N);var F=Object.getOwnPropertyDescriptor(R,N);F&&!("get"in F?!R.__esModule:F.writable||F.configurable)||(F={enumerable:!0,get:function(){return R[N]}}),Object.defineProperty(D,O,F)}:function(D,R,N,O){O===void 0&&(O=N),D[O]=R[N]}),s=this&&this.__setModuleDefault||(Object.create?function(D,R){Object.defineProperty(D,"default",{enumerable:!0,value:R})}:function(D,R){D.default=R}),l=this&&this.__importStar||function(D){if(D&&D.__esModule)return D;var R={};if(D!=null)for(var N in D)N!=="default"&&Object.prototype.hasOwnProperty.call(D,N)&&o(R,D,N);return s(R,D),R};Object.defineProperty(t,"__esModule",{value:!0}),t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initOrt=t.initWasm=void 0;const u=r(8453),d=r(7675),v=l(r(1259)),g=r(263),f=()=>!!u.env.wasm.proxy&&typeof document<"u";let c,y,_,b=!1,S=!1,x=!1;const w=[],T=[],A=[],E=[],$=[],P=[],I=()=>{if(b||!S||x||!c)throw new Error("worker not ready")},C=D=>{switch(D.data.type){case"init-wasm":b=!1,D.data.err?(x=!0,y[1](D.data.err)):(S=!0,y[0]());break;case"init-ort":D.data.err?_[1](D.data.err):_[0]();break;case"create_allocate":D.data.err?w.shift()[1](D.data.err):w.shift()[0](D.data.out);break;case"create_finalize":D.data.err?T.shift()[1](D.data.err):T.shift()[0](D.data.out);break;case"create":D.data.err?A.shift()[1](D.data.err):A.shift()[0](D.data.out);break;case"release":D.data.err?E.shift()[1](D.data.err):E.shift()[0]();break;case"run":D.data.err?$.shift()[1](D.data.err):$.shift()[0](D.data.out);break;case"end-profiling":D.data.err?P.shift()[1](D.data.err):P.shift()[0]()}},M=typeof document<"u"?(a=document==null?void 0:document.currentScript)===null||a===void 0?void 0:a.src:void 0;t.initWasm=async()=>{if(f()){if(S)return;if(b)throw new Error("multiple calls to 'initWasm()' detected.");if(x)throw new Error("previous call to 'initWasm()' failed.");return b=!0,u.env.wasm.wasmPaths===void 0&&M&&M.indexOf("blob:")!==0&&(u.env.wasm.wasmPaths=M.substr(0,+M.lastIndexOf("/")+1)),new Promise((D,R)=>{c==null||c.terminate(),c=r(8050).Z(),c.onmessage=C,y=[D,R];const N={type:"init-wasm",in:u.env.wasm};c.postMessage(N)})}return(0,g.initializeWebAssembly)(u.env.wasm)},t.initOrt=async(D,R)=>{if(f())return I(),new Promise((N,O)=>{_=[N,O];const F={type:"init-ort",in:{numThreads:D,loggingLevel:R}};c.postMessage(F)});v.initOrt(D,R),await(0,d.init)((0,g.getInstance)())},t.createSessionAllocate=async D=>f()?(I(),new Promise((R,N)=>{w.push([R,N]);const O={type:"create_allocate",in:{model:D}};c.postMessage(O,[D.buffer])})):v.createSessionAllocate(D),t.createSessionFinalize=async(D,R)=>f()?(I(),new Promise((N,O)=>{T.push([N,O]);const F={type:"create_finalize",in:{modeldata:D,options:R}};c.postMessage(F)})):v.createSessionFinalize(D,R),t.createSession=async(D,R)=>f()?(I(),new Promise((N,O)=>{A.push([N,O]);const F={type:"create",in:{model:D,options:R}};c.postMessage(F,[D.buffer])})):v.createSession(D,R),t.releaseSession=async D=>{if(f())return I(),new Promise((R,N)=>{E.push([R,N]);const O={type:"release",in:D};c.postMessage(O)});v.releaseSession(D)},t.run=async(D,R,N,O,F)=>f()?(I(),new Promise((L,B)=>{$.push([L,B]);const V={type:"run",in:{sessionId:D,inputIndices:R,inputs:N,outputIndices:O,options:F}};c.postMessage(V,v.extractTransferableBuffers(N))})):v.run(D,R,N,O,F),t.endProfiling=async D=>{if(f())return I(),new Promise((R,N)=>{P.push([R,N]);const O={type:"end-profiling",in:D};c.postMessage(O)});v.endProfiling(D)}},7918:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const a=r(3899),o=r(9444),s=r(263);t.setRunOptions=l=>{const u=(0,s.getInstance)();let d=0;const v=[],g=l||{};try{if((l==null?void 0:l.logSeverityLevel)===void 0)g.logSeverityLevel=2;else if(typeof l.logSeverityLevel!="number"||!Number.isInteger(l.logSeverityLevel)||l.logSeverityLevel<0||l.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${l.logSeverityLevel}`);if((l==null?void 0:l.logVerbosityLevel)===void 0)g.logVerbosityLevel=0;else if(typeof l.logVerbosityLevel!="number"||!Number.isInteger(l.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${l.logVerbosityLevel}`);(l==null?void 0:l.terminate)===void 0&&(g.terminate=!1);let f=0;if((l==null?void 0:l.tag)!==void 0&&(f=(0,o.allocWasmString)(l.tag,v)),d=u._OrtCreateRunOptions(g.logSeverityLevel,g.logVerbosityLevel,!!g.terminate,f),d===0)throw new Error("Can't create run options");return(l==null?void 0:l.extra)!==void 0&&(0,a.iterateExtraOptions)(l.extra,"",new WeakSet,(c,y)=>{const _=(0,o.allocWasmString)(c,v),b=(0,o.allocWasmString)(y,v);if(u._OrtAddRunConfigEntry(d,_,b)!==0)throw new Error(`Can't set a run config entry: ${c} - ${y}`)}),[d,v]}catch(f){throw d!==0&&u._OrtReleaseRunOptions(d),v.forEach(u._free),f}}},6640:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnnxruntimeWebAssemblySessionHandler=void 0;const a=r(2806),o=r(8453),s=r(2850),l=r(9544),u=r(7917);let d;t.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(v){const g=await fetch(v),f=await g.arrayBuffer();return(0,l.createSessionAllocate)(new Uint8Array(f))}async loadModel(v,g){if(d||(await(0,l.initOrt)(o.env.wasm.numThreads,(0,u.logLevelStringToEnum)(o.env.logLevel)),d=!0),typeof v=="string")if(typeof fetch>"u"){const f=await(0,s.promisify)(a.readFile)(v);[this.sessionId,this.inputNames,this.outputNames]=await(0,l.createSession)(f,g)}else{const f=await this.createSessionAllocate(v);[this.sessionId,this.inputNames,this.outputNames]=await(0,l.createSessionFinalize)(f,g)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,l.createSession)(v,g)}async dispose(){return(0,l.releaseSession)(this.sessionId)}async run(v,g,f){const c=[],y=[];Object.entries(v).forEach(x=>{const w=x[0],T=x[1],A=this.inputNames.indexOf(w);if(A===-1)throw new Error(`invalid input '${w}'`);c.push(T),y.push(A)});const _=[];Object.entries(g).forEach(x=>{const w=x[0],T=this.outputNames.indexOf(w);if(T===-1)throw new Error(`invalid output '${w}'`);_.push(T)});const b=await(0,l.run)(this.sessionId,y,c.map(x=>[x.type,x.dims,x.data]),_,f),S={};for(let x=0;x<b.length;x++)S[this.outputNames[_[x]]]=new o.Tensor(b[x][0],b[x][2],b[x][1]);return S}startProfiling(){}endProfiling(){(0,l.endProfiling)(this.sessionId)}}},7622:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const a=r(3899),o=r(9444),s=r(263);t.setSessionOptions=l=>{var u,d,v,g;const f=(0,s.getInstance)();let c=0;const y=[],_=l||{};(b=>{b.extra||(b.extra={}),b.extra.session||(b.extra.session={});const S=b.extra.session;S.use_ort_model_bytes_directly||(S.use_ort_model_bytes_directly="1"),b.executionProviders&&b.executionProviders.some(x=>(typeof x=="string"?x:x.name)==="webgpu")&&(b.enableMemPattern=!1)})(_);try{const b=(E=>{switch(E){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${E}`)}})((u=_.graphOptimizationLevel)!==null&&u!==void 0?u:"all"),S=(E=>{switch(E){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${E}`)}})((d=_.executionMode)!==null&&d!==void 0?d:"sequential"),x=typeof _.logId=="string"?(0,o.allocWasmString)(_.logId,y):0,w=(v=_.logSeverityLevel)!==null&&v!==void 0?v:2;if(!Number.isInteger(w)||w<0||w>4)throw new Error(`log serverity level is not valid: ${w}`);const T=(g=_.logVerbosityLevel)!==null&&g!==void 0?g:0;if(!Number.isInteger(T)||T<0||T>4)throw new Error(`log verbosity level is not valid: ${T}`);const A=typeof _.optimizedModelFilePath=="string"?(0,o.allocWasmString)(_.optimizedModelFilePath,y):0;if(c=f._OrtCreateSessionOptions(b,!!_.enableCpuMemArena,!!_.enableMemPattern,S,!!_.enableProfiling,0,x,w,T,A),c===0)throw new Error("Can't create session options");return _.executionProviders&&((E,$,P)=>{for(const I of $){let C=typeof I=="string"?I:I.name;switch(C){case"xnnpack":C="XNNPACK";break;case"webgpu":C="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${C}`)}const M=(0,o.allocWasmString)(C,P);if((0,s.getInstance)()._OrtAppendExecutionProvider(E,M)!==0)throw new Error(`Can't append execution provider: ${C}`)}})(c,_.executionProviders,y),_.extra!==void 0&&(0,a.iterateExtraOptions)(_.extra,"",new WeakSet,(E,$)=>{const P=(0,o.allocWasmString)(E,y),I=(0,o.allocWasmString)($,y);if(f._OrtAddSessionConfigEntry(c,P,I)!==0)throw new Error(`Can't set a session config entry: ${E} - ${$}`)}),[c,y]}catch(b){throw c!==0&&f._OrtReleaseSessionOptions(c),y.forEach(f._free),b}}},9444:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.allocWasmString=void 0;const a=r(263);t.allocWasmString=(o,s)=>{const l=(0,a.getInstance)(),u=l.lengthBytesUTF8(o)+1,d=l._malloc(u);return l.stringToUTF8(o,d,u),s.push(d),d}},7917:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=r=>{switch(r){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${r}`)}},t.tensorDataTypeEnumToString=r=>{switch(r){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${r}`)}},t.getTensorElementSize=r=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][r],t.tensorTypeToTypedArrayConstructor=r=>{switch(r){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${r}`)}},t.logLevelStringToEnum=r=>{switch(r){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${r}`)}}},1259:(n,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initOrt=void 0;const a=r(7918),o=r(7622),s=r(9444),l=r(7917),u=r(263);t.initOrt=(v,g)=>{const f=(0,u.getInstance)()._OrtInit(v,g);if(f!==0)throw new Error(`Can't initialize onnxruntime. error code = ${f}`)};const d=new Map;t.createSessionAllocate=v=>{const g=(0,u.getInstance)(),f=g._malloc(v.byteLength);return g.HEAPU8.set(v,f),[f,v.byteLength]},t.createSessionFinalize=(v,g)=>{const f=(0,u.getInstance)();let c=0,y=0,_=[];try{if([y,_]=(0,o.setSessionOptions)(g),c=f._OrtCreateSession(v[0],v[1],y),c===0)throw new Error("Can't create a session")}finally{f._free(v[0]),y!==0&&f._OrtReleaseSessionOptions(y),_.forEach(f._free)}const b=f._OrtGetInputCount(c),S=f._OrtGetOutputCount(c),x=[],w=[],T=[],A=[];for(let E=0;E<b;E++){const $=f._OrtGetInputName(c,E);if($===0)throw new Error("Can't get an input name");w.push($),x.push(f.UTF8ToString($))}for(let E=0;E<S;E++){const $=f._OrtGetOutputName(c,E);if($===0)throw new Error("Can't get an output name");A.push($),T.push(f.UTF8ToString($))}return d.set(c,[c,w,A]),[c,x,T]},t.createSession=(v,g)=>{const f=(0,t.createSessionAllocate)(v);return(0,t.createSessionFinalize)(f,g)},t.releaseSession=v=>{const g=(0,u.getInstance)(),f=d.get(v);if(!f)throw new Error("invalid session id");const c=f[0],y=f[1],_=f[2];y.forEach(g._OrtFree),_.forEach(g._OrtFree),g._OrtReleaseSession(c),d.delete(v)},t.run=async(v,g,f,c,y)=>{const _=(0,u.getInstance)(),b=d.get(v);if(!b)throw new Error("invalid session id");const S=b[0],x=b[1],w=b[2],T=g.length,A=c.length;let E=0,$=[];const P=[],I=[];try{[E,$]=(0,a.setRunOptions)(y);for(let O=0;O<T;O++){const F=f[O][0],L=f[O][1],B=f[O][2];let V,H;if(Array.isArray(B)){H=4*B.length,V=_._malloc(H),I.push(V);let te=V/4;for(let ee=0;ee<B.length;ee++){if(typeof B[ee]!="string")throw new TypeError(`tensor data at index ${ee} is not a string`);_.HEAPU32[te++]=(0,s.allocWasmString)(B[ee],I)}}else H=B.byteLength,V=_._malloc(H),I.push(V),_.HEAPU8.set(new Uint8Array(B.buffer,B.byteOffset,H),V);const X=_.stackSave(),U=_.stackAlloc(4*L.length);try{let te=U/4;L.forEach(q=>_.HEAP32[te++]=q);const ee=_._OrtCreateTensor((0,l.tensorDataTypeStringToEnum)(F),V,H,U,L.length);if(ee===0)throw new Error("Can't create a tensor");P.push(ee)}finally{_.stackRestore(X)}}const C=_.stackSave(),M=_.stackAlloc(4*T),D=_.stackAlloc(4*T),R=_.stackAlloc(4*A),N=_.stackAlloc(4*A);try{let O=M/4,F=D/4,L=R/4,B=N/4;for(let U=0;U<T;U++)_.HEAPU32[O++]=P[U],_.HEAPU32[F++]=x[g[U]];for(let U=0;U<A;U++)_.HEAPU32[L++]=0,_.HEAPU32[B++]=w[c[U]];let V=_._OrtRun(S,D,M,T,N,A,R,E);const H=_.jsepRunPromise;H&&H.then!==void 0&&(V=await H);const X=[];if(V===0)for(let U=0;U<A;U++){const te=_.HEAPU32[R/4+U],ee=_.stackSave(),q=_.stackAlloc(16);let ie,pe=0;try{if(V=_._OrtGetTensorData(te,q,q+4,q+8,q+12),V!==0)throw new Error(`Can't access output tensor data. error code = ${V}`);let j=q/4;const Q=_.HEAPU32[j++];pe=_.HEAPU32[j++];const J=_.HEAPU32[j++],oe=_.HEAPU32[j++],ne=[];for(let W=0;W<oe;W++)ne.push(_.HEAPU32[J/4+W]);_._OrtFree(J);const z=ne.length===0?1:ne.reduce((W,Z)=>W*Z);if(ie=(0,l.tensorDataTypeEnumToString)(Q),ie==="string"){const W=[];let Z=pe/4;for(let ae=0;ae<z;ae++){const se=_.HEAPU32[Z++],ce=ae===z-1?void 0:_.HEAPU32[Z]-se;W.push(_.UTF8ToString(se,ce))}X.push([ie,ne,W])}else{const W=new((0,l.tensorTypeToTypedArrayConstructor)(ie))(z);new Uint8Array(W.buffer,W.byteOffset,W.byteLength).set(_.HEAPU8.subarray(pe,pe+W.byteLength)),X.push([ie,ne,W])}}finally{_.stackRestore(ee),ie==="string"&&pe&&_._free(pe),_._OrtReleaseTensor(te)}}if(V===0)return X;throw new Error(`failed to call OrtRun(). error code = ${V}.`)}finally{_.stackRestore(C)}}finally{P.forEach(_._OrtReleaseTensor),I.forEach(_._free),_._OrtReleaseRunOptions(E),$.forEach(_._free)}},t.endProfiling=v=>{const g=(0,u.getInstance)(),f=d.get(v);if(!f)throw new Error("invalid session id");const c=f[0],y=g._OrtEndProfiling(c);if(y===0)throw new Error("Can't get an profile file name");g._OrtFree(y)},t.extractTransferableBuffers=v=>{const g=[];for(const f of v){const c=f[2];!Array.isArray(c)&&c.buffer&&g.push(c.buffer)}return g}},263:function(n,t,r){var a=this&&this.__createBinding||(Object.create?function(y,_,b,S){S===void 0&&(S=b);var x=Object.getOwnPropertyDescriptor(_,b);x&&!("get"in x?!_.__esModule:x.writable||x.configurable)||(x={enumerable:!0,get:function(){return _[b]}}),Object.defineProperty(y,S,x)}:function(y,_,b,S){S===void 0&&(S=b),y[S]=_[b]}),o=this&&this.__setModuleDefault||(Object.create?function(y,_){Object.defineProperty(y,"default",{enumerable:!0,value:_})}:function(y,_){y.default=_}),s=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var _={};if(y!=null)for(var b in y)b!=="default"&&Object.prototype.hasOwnProperty.call(y,b)&&a(_,y,b);return o(_,y),_};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;const l=s(r(6449)),u=r(932),d=r(3474);let v,g=!1,f=!1,c=!1;t.initializeWebAssembly=async y=>{if(g)return Promise.resolve();if(f)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(c)throw new Error("previous call to 'initializeWebAssembly()' failed.");f=!0;const _=y.initTimeout,b=y.numThreads,S=y.simd,x=b>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),w=S&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),T=y.wasmPaths,A=typeof T=="string"?T:void 0,E=((C,M)=>M?C?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":C?"ort-wasm-simd.wasm":"ort-wasm.wasm")(w,x),$=typeof T=="object"?T[E]:void 0;let P=!1;const I=[];if(_>0&&I.push(new Promise(C=>{setTimeout(()=>{P=!0,C()},_)})),I.push(new Promise((C,M)=>{const D=x?d:u,R={locateFile:(N,O)=>x&&N.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([r(4154)],{type:"text/javascript"})):N.endsWith(".wasm")?$||(A??O)+E:O+N};if(x)if(typeof Blob>"u")R.mainScriptUrlOrBlob=l.join("/","ort-wasm-threaded.js");else{const N=`var ortWasmThreaded=(function(){var _scriptDir;return ${D.toString()}})();`;R.mainScriptUrlOrBlob=new Blob([N],{type:"text/javascript"})}D(R).then(N=>{f=!1,g=!0,v=N,C()},N=>{f=!1,c=!0,M(N)})})),await Promise.race(I),P)throw new Error(`WebAssembly backend initializing failed due to timeout: ${_}ms`)},t.getInstance=()=>{if(g&&v)return v;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var y;!g||f||c||(f=!0,(y=v.PThread)===null||y===void 0||y.terminateAllThreads(),v=void 0,f=!1,g=!1,c=!0)}},8050:(n,t,r)=>{r.d(t,{Z:()=>s});var a=r(6614),o=r.n(a);function s(){return o()('/*!\n* ONNX Runtime Web v1.15.1\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var e={899:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateExtraOptions=void 0,t.iterateExtraOptions=(e,n,r,a)=>{if("object"==typeof e&&null!==e){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach((([e,o])=>{const i=n?n+e:e;if("object"==typeof o)(0,t.iterateExtraOptions)(o,i+".",r,a);else if("string"==typeof o||"number"==typeof o)a(i,o.toString());else{if("boolean"!=typeof o)throw new Error("Can\'t handle extra config type: "+typeof o);a(i,o?"1":"0")}}))}},918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const r=n(899),a=n(444),o=n(263);t.setRunOptions=e=>{const t=(0,o.getInstance)();let n=0;const i=[],s=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))s.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))s.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(s.terminate=!1);let o=0;if(void 0!==(null==e?void 0:e.tag)&&(o=(0,a.allocWasmString)(e.tag,i)),n=t._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,o),0===n)throw new Error("Can\'t create run options");return void 0!==(null==e?void 0:e.extra)&&(0,r.iterateExtraOptions)(e.extra,"",new WeakSet,((e,r)=>{const o=(0,a.allocWasmString)(e,i),s=(0,a.allocWasmString)(r,i);if(0!==t._OrtAddRunConfigEntry(n,o,s))throw new Error(`Can\'t set a run config entry: ${e} - ${r}`)})),[n,i]}catch(e){throw 0!==n&&t._OrtReleaseRunOptions(n),i.forEach(t._free),e}}},622:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const r=n(899),a=n(444),o=n(263);t.setSessionOptions=e=>{var t,n,i,s;const u=(0,o.getInstance)();let c=0;const l=[],f=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});const t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((e=>"webgpu"===("string"==typeof e?e:e.name)))&&(e.enableMemPattern=!1)})(f);try{const e=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}})(null!==(t=f.graphOptimizationLevel)&&void 0!==t?t:"all"),p=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}})(null!==(n=f.executionMode)&&void 0!==n?n:"sequential"),d="string"==typeof f.logId?(0,a.allocWasmString)(f.logId,l):0,m=null!==(i=f.logSeverityLevel)&&void 0!==i?i:2;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log serverity level is not valid: ${m}`);const g=null!==(s=f.logVerbosityLevel)&&void 0!==s?s:0;if(!Number.isInteger(g)||g<0||g>4)throw new Error(`log verbosity level is not valid: ${g}`);const h="string"==typeof f.optimizedModelFilePath?(0,a.allocWasmString)(f.optimizedModelFilePath,l):0;if(c=u._OrtCreateSessionOptions(e,!!f.enableCpuMemArena,!!f.enableMemPattern,p,!!f.enableProfiling,0,d,m,g,h),0===c)throw new Error("Can\'t create session options");return f.executionProviders&&((e,t,n)=>{for(const r of t){let t="string"==typeof r?r:r.name;switch(t){case"xnnpack":t="XNNPACK";break;case"webgpu":t="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${t}`)}const i=(0,a.allocWasmString)(t,n);if(0!==(0,o.getInstance)()._OrtAppendExecutionProvider(e,i))throw new Error(`Can\'t append execution provider: ${t}`)}})(c,f.executionProviders,l),void 0!==f.extra&&(0,r.iterateExtraOptions)(f.extra,"",new WeakSet,((e,t)=>{const n=(0,a.allocWasmString)(e,l),r=(0,a.allocWasmString)(t,l);if(0!==u._OrtAddSessionConfigEntry(c,n,r))throw new Error(`Can\'t set a session config entry: ${e} - ${t}`)})),[c,l]}catch(e){throw 0!==c&&u._OrtReleaseSessionOptions(c),l.forEach(u._free),e}}},444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allocWasmString=void 0;const r=n(263);t.allocWasmString=(e,t)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(e)+1,o=n._malloc(a);return n.stringToUTF8(e,o,a),t.push(o),o}},917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},t.tensorDataTypeEnumToString=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},t.getTensorElementSize=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],t.tensorTypeToTypedArrayConstructor=e=>{switch(e){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},t.logLevelStringToEnum=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}}},259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initOrt=void 0;const r=n(918),a=n(622),o=n(444),i=n(917),s=n(263);t.initOrt=(e,t)=>{const n=(0,s.getInstance)()._OrtInit(e,t);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;t.createSessionAllocate=e=>{const t=(0,s.getInstance)(),n=t._malloc(e.byteLength);return t.HEAPU8.set(e,n),[n,e.byteLength]},t.createSessionFinalize=(e,t)=>{const n=(0,s.getInstance)();let r=0,o=0,i=[];try{if([o,i]=(0,a.setSessionOptions)(t),r=n._OrtCreateSession(e[0],e[1],o),0===r)throw new Error("Can\'t create a session")}finally{n._free(e[0]),0!==o&&n._OrtReleaseSessionOptions(o),i.forEach(n._free)}const c=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],d=[],m=[];for(let e=0;e<c;e++){const t=n._OrtGetInputName(r,e);if(0===t)throw new Error("Can\'t get an input name");p.push(t),f.push(n.UTF8ToString(t))}for(let e=0;e<l;e++){const t=n._OrtGetOutputName(r,e);if(0===t)throw new Error("Can\'t get an output name");m.push(t),d.push(n.UTF8ToString(t))}return u.set(r,[r,p,m]),[r,f,d]},t.createSession=(e,n)=>{const r=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(r,n)},t.releaseSession=e=>{const t=(0,s.getInstance)(),n=u.get(e);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],o=n[2];a.forEach(t._OrtFree),o.forEach(t._OrtFree),t._OrtReleaseSession(r),u.delete(e)},t.run=async(e,t,n,a,c)=>{const l=(0,s.getInstance)(),f=u.get(e);if(!f)throw new Error("invalid session id");const p=f[0],d=f[1],m=f[2],g=t.length,h=a.length;let y=0,v=[];const b=[],w=[];try{[y,v]=(0,r.setRunOptions)(c);for(let e=0;e<g;e++){const t=n[e][0],r=n[e][1],a=n[e][2];let s,u;if(Array.isArray(a)){u=4*a.length,s=l._malloc(u),w.push(s);let e=s/4;for(let t=0;t<a.length;t++){if("string"!=typeof a[t])throw new TypeError(`tensor data at index ${t} is not a string`);l.HEAPU32[e++]=(0,o.allocWasmString)(a[t],w)}}else u=a.byteLength,s=l._malloc(u),w.push(s),l.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),s);const c=l.stackSave(),f=l.stackAlloc(4*r.length);try{let e=f/4;r.forEach((t=>l.HEAP32[e++]=t));const n=l._OrtCreateTensor((0,i.tensorDataTypeStringToEnum)(t),s,u,f,r.length);if(0===n)throw new Error("Can\'t create a tensor");b.push(n)}finally{l.stackRestore(c)}}const e=l.stackSave(),s=l.stackAlloc(4*g),u=l.stackAlloc(4*g),f=l.stackAlloc(4*h),_=l.stackAlloc(4*h);try{let e=s/4,n=u/4,r=f/4,o=_/4;for(let r=0;r<g;r++)l.HEAPU32[e++]=b[r],l.HEAPU32[n++]=d[t[r]];for(let e=0;e<h;e++)l.HEAPU32[r++]=0,l.HEAPU32[o++]=m[a[e]];let c=l._OrtRun(p,u,s,g,_,h,f,y);const v=l.jsepRunPromise;v&&void 0!==v.then&&(c=await v);const w=[];if(0===c)for(let e=0;e<h;e++){const t=l.HEAPU32[f/4+e],n=l.stackSave(),r=l.stackAlloc(16);let a,o=0;try{if(c=l._OrtGetTensorData(t,r,r+4,r+8,r+12),0!==c)throw new Error(`Can\'t access output tensor data. error code = ${c}`);let e=r/4;const n=l.HEAPU32[e++];o=l.HEAPU32[e++];const s=l.HEAPU32[e++],u=l.HEAPU32[e++],f=[];for(let e=0;e<u;e++)f.push(l.HEAPU32[s/4+e]);l._OrtFree(s);const p=0===f.length?1:f.reduce(((e,t)=>e*t));if(a=(0,i.tensorDataTypeEnumToString)(n),"string"===a){const e=[];let t=o/4;for(let n=0;n<p;n++){const r=l.HEAPU32[t++],a=n===p-1?void 0:l.HEAPU32[t]-r;e.push(l.UTF8ToString(r,a))}w.push([a,f,e])}else{const e=new((0,i.tensorTypeToTypedArrayConstructor)(a))(p);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(l.HEAPU8.subarray(o,o+e.byteLength)),w.push([a,f,e])}}finally{l.stackRestore(n),"string"===a&&o&&l._free(o),l._OrtReleaseTensor(t)}}if(0===c)return w;throw new Error(`failed to call OrtRun(). error code = ${c}.`)}finally{l.stackRestore(e)}}finally{b.forEach(l._OrtReleaseTensor),w.forEach(l._free),l._OrtReleaseRunOptions(y),v.forEach(l._free)}},t.endProfiling=e=>{const t=(0,s.getInstance)(),n=u.get(e);if(!n)throw new Error("invalid session id");const r=n[0],a=t._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");t._OrtFree(a)},t.extractTransferableBuffers=e=>{const t=[];for(const n of e){const e=n[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},263:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;const i=o(n(449)),s=n(932),u=n(474);let c,l=!1,f=!1,p=!1;t.initializeWebAssembly=async e=>{if(l)return Promise.resolve();if(f)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(p)throw new Error("previous call to \'initializeWebAssembly()\' failed.");f=!0;const t=e.initTimeout,r=e.numThreads,a=e.simd,o=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),d=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),m=e.wasmPaths,g="string"==typeof m?m:void 0,h=((e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm")(d,o),y="object"==typeof m?m[h]:void 0;let v=!1;const b=[];if(t>0&&b.push(new Promise((e=>{setTimeout((()=>{v=!0,e()}),t)}))),b.push(new Promise(((e,t)=>{const r=o?u:s,a={locateFile:(e,t)=>o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):e.endsWith(".wasm")?y||(null!=g?g:t)+h:t+e};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=i.join("/","ort-wasm-threaded.js");else{const e=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"})}r(a).then((t=>{f=!1,l=!0,c=t,e()}),(e=>{f=!1,p=!0,t(e)}))}))),await Promise.race(b),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(l&&c)return c;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!l||f||p||(f=!0,null===(e=c.PThread)||void 0===e||e.terminateAllThreads(),c=void 0,f=!1,l=!1,p=!0)}},474:(e,t,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){function t(){return P.buffer!=D&&G(P.buffer),F}function r(){return P.buffer!=D&&G(P.buffer),U}function a(){return P.buffer!=D&&G(P.buffer),I}function o(){return P.buffer!=D&&G(P.buffer),W}function i(){return P.buffer!=D&&G(P.buffer),j}var s,u,c;e=e||{},s||(s=void 0!==e?e:{}),s.ready=new Promise((function(e,t){u=e,c=t}));var l,f,p,d,m,g,h=Object.assign({},s),y="./this.program",v=(e,t)=>{throw t},b="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=s.ENVIRONMENT_IS_PTHREAD||!1,S="";function T(e){return s.locateFile?s.locateFile(e,S):S+e}if(_){let t;S=w?n(908).dirname(S)+"/":"//",g=()=>{m||(d=n(384),m=n(908))},l=function(e,t){return g(),e=m.normalize(e),d.readFileSync(e,t?void 0:"utf8")},p=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),f=(e,t,n)=>{g(),e=m.normalize(e),d.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&(y=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ie))throw e})),process.on("unhandledRejection",(function(e){throw e})),v=(e,t)=>{if(C)throw process.exitCode=e,t;t instanceof ie||x("exiting due to exception: "+t),process.exit(e)},s.inspect=function(){return"[Emscripten Module object]"};try{t=n(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}n.g.Worker=t.Worker}else(b||w)&&(w?S=self.location.href:"undefined"!=typeof document&&document.currentScript&&(S=document.currentScript.src),_scriptDir&&(S=_scriptDir),S=0!==S.indexOf("blob:")?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},w&&(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var A=console.log.bind(console),E=console.warn.bind(console);_&&(g(),A=e=>d.writeSync(1,e+"\\n"),E=e=>d.writeSync(2,e+"\\n"));var M,R=s.print||A,x=s.printErr||E;Object.assign(s,h),h=null,s.thisProgram&&(y=s.thisProgram),s.quit&&(v=s.quit),s.wasmBinary&&(M=s.wasmBinary);var C=s.noExitRuntime||!0;"object"!=typeof WebAssembly&&ne("no native wasm support detected");var P,k,D,F,U,I,W,j,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function Y(e,t,n){var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&L)return L.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function z(e,t){return(e>>>=0)?Y(r(),e,t):""}function B(e,t,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;t[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++>>>0]=224|i>>12}else{if(n+3>=r)break;t[n++>>>0]=240|i>>18,t[n++>>>0]=128|i>>12&63}t[n++>>>0]=128|i>>6&63}t[n++>>>0]=128|63&i}}return t[n>>>0]=0,n-a}function N(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t}function G(e){D=e,s.HEAP8=F=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=I=new Int32Array(e),s.HEAPU8=U=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=W=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=j=new Float64Array(e)}O&&(D=s.buffer);var q=s.INITIAL_MEMORY||16777216;if(O)P=s.wasmMemory,D=s.buffer;else if(s.wasmMemory)P=s.wasmMemory;else if(!((P=new WebAssembly.Memory({initial:q/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");P&&(D=P.buffer),q=D.byteLength,G(D);var $,V=[],J=[],Q=[];function X(){var e=s.preRun.shift();V.unshift(e)}var K,Z=0,ee=null,te=null;function ne(e){throw O?postMessage({cmd:"onAbort",arg:e}):s.onAbort&&s.onAbort(e),x(e="Aborted("+e+")"),H=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),c(e),e}function re(){return K.startsWith("data:application/octet-stream;base64,")}function ae(){var e=K;try{if(e==K&&M)return new Uint8Array(M);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}K="ort-wasm-threaded.wasm",re()||(K=T(K));var oe={};function ie(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function se(e){(e=fe.La[e])||ne(),fe.Xa(e)}function ue(e){var t=fe.lb();if(!t)return 6;fe.Ra.push(t),fe.La[e.Ka]=t,t.Ka=e.Ka;var n={cmd:"run",start_routine:e.pb,arg:e.ib,pthread_ptr:e.Ka};return t.Qa=()=>{n.time=performance.now(),t.postMessage(n,e.vb)},t.loaded&&(t.Qa(),delete t.Qa),0}function ce(e){if(O)return He(1,1,e);C||(fe.qb(),s.onExit&&s.onExit(e),H=!0),v(e,new ie(e))}function le(e,t){if(!t&&O)throw de(e),"unwind";ce(e)}var fe={Oa:[],Ra:[],$a:[],La:{},Ua:function(){O&&fe.mb()},xb:function(){},mb:function(){fe.receiveObjectTransfer=fe.ob,fe.threadInitTLS=fe.Za,fe.setExitStatus=fe.Ya,C=!1},Ya:function(){},qb:function(){for(var e of Object.values(fe.La))fe.Xa(e);for(e of fe.Oa)e.terminate();fe.Oa=[]},Xa:function(e){var t=e.Ka;delete fe.La[t],fe.Oa.push(e),fe.Ra.splice(fe.Ra.indexOf(e),1),e.Ka=0,ct(t)},ob:function(){},Za:function(){fe.$a.forEach((e=>e()))},nb:function(e,t){e.onmessage=n=>{var r=(n=n.data).cmd;if(e.Ka&&(fe.kb=e.Ka),n.targetThread&&n.targetThread!=rt()){var a=fe.La[n.yb];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?De(n.queue):"spawnThread"===r?ue(n):"cleanupThread"===r?se(n.thread):"killThread"===r?(n=n.thread,r=fe.La[n],delete fe.La[n],r.terminate(),ct(n),fe.Ra.splice(fe.Ra.indexOf(r),1),r.Ka=0):"cancelThread"===r?fe.La[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(e.loaded=!0,t&&t(e),e.Qa&&(e.Qa(),delete e.Qa)):"print"===r?R("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?e.postMessage(n):"onAbort"===r?s.onAbort&&s.onAbort(n.arg):r&&x("worker sent an unknown command "+r);fe.kb=void 0},e.onerror=e=>{throw x("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},_&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("detachedExit",(function(){}))),e.postMessage({cmd:"load",urlOrBlob:s.mainScriptUrlOrBlob||_scriptDir,wasmMemory:P,wasmModule:k})},hb:function(){var e=T("ort-wasm-threaded.worker.js");fe.Oa.push(new Worker(e))},lb:function(){return 0==fe.Oa.length&&(fe.hb(),fe.nb(fe.Oa[0])),fe.Oa.pop()}};function pe(e){for(;0<e.length;)e.shift()(s)}function de(e){if(O)return He(2,0,e);try{le(e)}catch(e){e instanceof ie||"unwind"==e||v(1,e)}}s.PThread=fe,s.establishStackSpace=function(){var e=rt(),t=a()[e+44>>2>>>0];e=a()[e+48>>2>>>0],ft(t,t-e),dt(t)};var me,ge,he=[];function ye(e){this.Pa=e-24,this.gb=function(e){o()[this.Pa+4>>2>>>0]=e},this.cb=function(e){o()[this.Pa+8>>2>>>0]=e},this.eb=function(){a()[this.Pa>>2>>>0]=0},this.bb=function(){t()[this.Pa+12>>0>>>0]=0},this.fb=function(){t()[this.Pa+13>>0>>>0]=0},this.Ua=function(e,t){this.ab(),this.gb(e),this.cb(t),this.eb(),this.bb(),this.fb()},this.ab=function(){o()[this.Pa+16>>2>>>0]=0}}function ve(e,t,n,r){return O?He(3,1,e,t,n,r):be(e,t,n,r)}function be(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?ve(e,t,n,r):(e={pb:n,Ka:e,ib:r,vb:a},O?(e.wb="spawnThread",postMessage(e,a),0):ue(e))}function we(e,t,n){return O?He(4,1,e,t,n):0}function _e(e,t){if(O)return He(5,1,e,t)}function Oe(e,t){if(O)return He(6,1,e,t)}function Se(e,t,n){if(O)return He(7,1,e,t,n)}function Te(e,t,n){return O?He(8,1,e,t,n):0}function Ae(e,t){if(O)return He(9,1,e,t)}function Ee(e,t,n){if(O)return He(10,1,e,t,n)}function Me(e,t,n,r){if(O)return He(11,1,e,t,n,r)}function Re(e,t,n,r){if(O)return He(12,1,e,t,n,r)}function xe(e,t,n,r){if(O)return He(13,1,e,t,n,r)}function Ce(e){if(O)return He(14,1,e)}function Pe(e,t){if(O)return He(15,1,e,t)}function ke(e,t,n){if(O)return He(16,1,e,t,n)}function De(e){Atomics.store(a(),e>>2,1),rt()&&ut(e),Atomics.compareExchange(a(),e>>2,1,0)}function Fe(e){return o()[e>>>2]+4294967296*a()[e+4>>>2]}function Ue(e,t,n,r,a,o){return O?He(17,1,e,t,n,r,a,o):-52}function Ie(e,t,n,r,a,o){if(O)return He(18,1,e,t,n,r,a,o)}function We(e){var n=N(e)+1,r=at(n);return r&&B(e,t(),r,n),r}function je(e,t,n){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}if(O)return He(19,1,e,t,n);var i=(new Date).getFullYear(),s=new Date(i,0,1),u=new Date(i,6,1);i=s.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(i,c);a()[e>>2>>>0]=60*l,a()[t>>2>>>0]=Number(i!=c),e=r(s),t=r(u),e=We(e),t=We(t),c<i?(o()[n>>2>>>0]=e,o()[n+4>>2>>>0]=t):(o()[n>>2>>>0]=t,o()[n+4>>2>>>0]=e)}function He(e,t){var n=arguments.length-2,r=arguments;return function(e){var t=pt();return e=e(),dt(t),e}((()=>{for(var a=mt(8*n),o=a>>3,s=0;s<n;s++){var u=r[2+s];i()[o+s>>>0]=u}return st(e,n,a,t)}))}s.invokeEntryPoint=function(e,t){var n=he[e];n||(e>=he.length&&(he.length=e+1),he[e]=n=$.get(e)),e=n(t),C?fe.Ya(e):lt(e)},s.executeNotifiedProxyingQueue=De,ge=_?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:O?()=>performance.now()-s.__performance_now_clock_drift:()=>performance.now();var Le,Ye=[],ze={};function Be(){if(!Le){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(e in ze)void 0===ze[e]?delete t[e]:t[e]=ze[e];var n=[];for(e in t)n.push(e+"="+t[e]);Le=n}return Le}function Ne(e,n){if(O)return He(20,1,e,n);var r=0;return Be().forEach((function(a,i){var s=n+r;for(i=o()[e+4*i>>2>>>0]=s,s=0;s<a.length;++s)t()[i++>>0>>>0]=a.charCodeAt(s);t()[i>>0>>>0]=0,r+=a.length+1})),0}function Ge(e,t){if(O)return He(21,1,e,t);var n=Be();o()[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),o()[t>>2>>>0]=r,0}function qe(e){return O?He(22,1,e):52}function $e(e,t,n,r){return O?He(23,1,e,t,n,r):52}function Ve(e,t,n,r,a){return O?He(24,1,e,t,n,r,a):70}var Je=[null,[],[]];function Qe(e,t,n,a){if(O)return He(25,1,e,t,n,a);for(var i=0,s=0;s<n;s++){var u=o()[t>>2>>>0],c=o()[t+4>>2>>>0];t+=8;for(var l=0;l<c;l++){var f=r()[u+l>>>0],p=Je[e];0===f||10===f?((1===e?R:x)(Y(p,0)),p.length=0):p.push(f)}i+=c}return o()[a>>2>>>0]=i,0}function Xe(e){return 0==e%4&&(0!=e%100||0==e%400)}var Ke=[31,29,31,30,31,30,31,31,30,31,30,31],Ze=[31,28,31,30,31,30,31,31,30,31,30,31];function et(e,n,r,o){function i(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function s(e,t){return i(e,t,"0")}function u(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function c(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){var t=e.Ma;for(e=new Date(new Date(e.Na+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(Xe(e.getFullYear())?Ke:Ze)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=c(new Date(e.getFullYear(),0,4)),n=c(n),0>=u(t,e)?0>=u(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var f=a()[o+40>>2>>>0];for(var p in o={tb:a()[o>>2>>>0],sb:a()[o+4>>2>>>0],Sa:a()[o+8>>2>>>0],Va:a()[o+12>>2>>>0],Ta:a()[o+16>>2>>>0],Na:a()[o+20>>2>>>0],Ja:a()[o+24>>2>>>0],Ma:a()[o+28>>2>>>0],zb:a()[o+32>>2>>>0],rb:a()[o+36>>2>>>0],ub:f?z(f):""},r=z(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),m="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(e){return d[e.Ja].substring(0,3)},"%A":function(e){return d[e.Ja]},"%b":function(e){return m[e.Ta].substring(0,3)},"%B":function(e){return m[e.Ta]},"%C":function(e){return s((e.Na+1900)/100|0,2)},"%d":function(e){return s(e.Va,2)},"%e":function(e){return i(e.Va,2," ")},"%g":function(e){return l(e).toString().substring(2)},"%G":function(e){return l(e)},"%H":function(e){return s(e.Sa,2)},"%I":function(e){return 0==(e=e.Sa)?e=12:12<e&&(e-=12),s(e,2)},"%j":function(e){for(var t=0,n=0;n<=e.Ta-1;t+=(Xe(e.Na+1900)?Ke:Ze)[n++]);return s(e.Va+t,3)},"%m":function(e){return s(e.Ta+1,2)},"%M":function(e){return s(e.sb,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.Sa&&12>e.Sa?"AM":"PM"},"%S":function(e){return s(e.tb,2)},"%t":function(){return"\\t"},"%u":function(e){return e.Ja||7},"%U":function(e){return s(Math.floor((e.Ma+7-e.Ja)/7),2)},"%V":function(e){var t=Math.floor((e.Ma+7-(e.Ja+6)%7)/7);if(2>=(e.Ja+371-e.Ma-2)%7&&t++,t)53==t&&(4==(n=(e.Ja+371-e.Ma)%7)||3==n&&Xe(e.Na)||(t=1));else{t=52;var n=(e.Ja+7-e.Ma-1)%7;(4==n||5==n&&Xe(e.Na%400-1))&&t++}return s(t,2)},"%w":function(e){return e.Ja},"%W":function(e){return s(Math.floor((e.Ma+7-(e.Ja+6)%7)/7),2)},"%y":function(e){return(e.Na+1900).toString().substring(2)},"%Y":function(e){return e.Na+1900},"%z":function(e){var t=0<=(e=e.rb);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.ub},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](o)));return p=function(e){var t=Array(N(e)+1);return B(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(e,n){t().set(e,n>>>0)}(p,e),p.length-1)}fe.Ua();var tt=[null,ce,de,ve,we,_e,Oe,Se,Te,Ae,Ee,Me,Re,xe,Ce,Pe,ke,Ue,Ie,je,Ne,Ge,qe,$e,Ve,Qe],nt={b:function(e){return at(e+24)+24},c:function(e,t,n){throw new ye(e).Ua(t,n),e},L:function(e){ot(e,!w,1,!b),fe.Za()},l:function(e){O?postMessage({cmd:"cleanupThread",thread:e}):se(e)},D:be,i:we,R:_e,z:Oe,B:Se,T:Te,P:Ae,I:Ee,O:Me,p:Re,A:xe,x:Ce,Q:Pe,y:ke,r:function(){},j:function(){ne("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},s:function(){ne("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},q:function(){return Date.now()},E:function(){return 2097152},V:function(){return!0},F:function(e,t,n,r){if(e==t)setTimeout((()=>De(r)));else if(O)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:r});else{if(!(e=fe.La[e]))return;e.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},K:function(){return-1},W:function(e,t){e=new Date(1e3*Fe(e)),a()[t>>2>>>0]=e.getUTCSeconds(),a()[t+4>>2>>>0]=e.getUTCMinutes(),a()[t+8>>2>>>0]=e.getUTCHours(),a()[t+12>>2>>>0]=e.getUTCDate(),a()[t+16>>2>>>0]=e.getUTCMonth(),a()[t+20>>2>>>0]=e.getUTCFullYear()-1900,a()[t+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[t+28>>2>>>0]=e},X:function(e,t){e=new Date(1e3*Fe(e)),a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),a()[t+20>>2>>>0]=e.getFullYear()-1900,a()[t+24>>2>>>0]=e.getDay();var n=new Date(e.getFullYear(),0,1),r=(e.getTime()-n.getTime())/864e5|0;a()[t+28>>2>>>0]=r,a()[t+36>>2>>>0]=-60*e.getTimezoneOffset(),r=new Date(e.getFullYear(),6,1).getTimezoneOffset(),e=0|(r!=(n=n.getTimezoneOffset())&&e.getTimezoneOffset()==Math.min(n,r)),a()[t+32>>2>>>0]=e},Y:function(e){var t=new Date(a()[e+20>>2>>>0]+1900,a()[e+16>>2>>>0],a()[e+12>>2>>>0],a()[e+8>>2>>>0],a()[e+4>>2>>>0],a()[e>>2>>>0],0),n=a()[e+32>>2>>>0],r=t.getTimezoneOffset(),o=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=o.getTimezoneOffset(),u=Math.min(s,i);return 0>n?a()[e+32>>2>>>0]=Number(i!=s&&u==r):0<n!=(u==r)&&(i=Math.max(s,i),t.setTime(t.getTime()+6e4*((0<n?u:i)-r))),a()[e+24>>2>>>0]=t.getDay(),n=(t.getTime()-o.getTime())/864e5|0,a()[e+28>>2>>>0]=n,a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),t.getTime()/1e3|0},G:Ue,H:Ie,Z:function e(t,n,r){e.jb||(e.jb=!0,je(t,n,r))},d:function(){ne("")},m:function(){if(!_&&!w){var e="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";me||(me={}),me[e]||(me[e]=1,_&&(e="warning: "+e),x(e))}},w:function(){return 4294901760},f:ge,S:function(e,t,n){r().copyWithin(e>>>0,t>>>0,t+n>>>0)},g:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},J:function(e,t,n){Ye.length=t,n>>=3;for(var r=0;r<t;r++)Ye[r]=i()[n+r>>>0];return(0>e?oe[-e-1]:tt[e]).apply(null,Ye)},v:function(e){var t=r().length;if((e>>>=0)<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296);var o=Math;a=Math.max(e,a),o=o.min.call(o,4294901760,a+(65536-a%65536)%65536);e:{try{P.grow(o-D.byteLength+65535>>>16),G(P.buffer);var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},U:function(){throw"unwind"},M:Ne,N:Ge,k:le,h:qe,o:$e,t:Ve,n:Qe,u:function e(r,a){e.Wa||(e.Wa=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(_)try{var t=n(760);return()=>t.randomBytes(1)[0]}catch(e){}return()=>ne("randomDevice")}());for(var o=0;o<a;o++)t()[r+o>>0>>>0]=e.Wa();return 0},a:P||s.wasmMemory,C:et,e:function(e,t,n,r){return et(e,t,n,r)}};!function(){function e(e,t){s.asm=e.exports,fe.$a.push(s.asm.wa),$=s.asm.za,J.unshift(s.asm._),k=t,O||(Z--,s.monitorRunDependencies&&s.monitorRunDependencies(Z),0==Z&&(null!==ee&&(clearInterval(ee),ee=null),te&&(e=te,te=null,e())))}function t(t){e(t.instance,t.module)}function n(e){return function(){if(!M&&(b||w)){if("function"==typeof fetch&&!K.startsWith("file://"))return fetch(K,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+K+"\'";return e.arrayBuffer()})).catch((function(){return ae()}));if(f)return new Promise((function(e,t){f(K,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ae()}))}().then((function(e){return WebAssembly.instantiate(e,r)})).then((function(e){return e})).then(e,(function(e){x("failed to asynchronously prepare wasm: "+e),ne(e)}))}var r={a:nt};if(O||(Z++,s.monitorRunDependencies&&s.monitorRunDependencies(Z)),s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||re()||K.startsWith("file://")||_||"function"!=typeof fetch?n(t):fetch(K,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(t,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),n(t)}))}))).catch(c)}(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm._).apply(null,arguments)},s._OrtInit=function(){return(s._OrtInit=s.asm.$).apply(null,arguments)},s._OrtCreateSessionOptions=function(){return(s._OrtCreateSessionOptions=s.asm.aa).apply(null,arguments)},s._OrtAppendExecutionProvider=function(){return(s._OrtAppendExecutionProvider=s.asm.ba).apply(null,arguments)},s._OrtAddSessionConfigEntry=function(){return(s._OrtAddSessionConfigEntry=s.asm.ca).apply(null,arguments)},s._OrtReleaseSessionOptions=function(){return(s._OrtReleaseSessionOptions=s.asm.da).apply(null,arguments)},s._OrtCreateSession=function(){return(s._OrtCreateSession=s.asm.ea).apply(null,arguments)},s._OrtReleaseSession=function(){return(s._OrtReleaseSession=s.asm.fa).apply(null,arguments)},s._OrtGetInputCount=function(){return(s._OrtGetInputCount=s.asm.ga).apply(null,arguments)},s._OrtGetOutputCount=function(){return(s._OrtGetOutputCount=s.asm.ha).apply(null,arguments)},s._OrtGetInputName=function(){return(s._OrtGetInputName=s.asm.ia).apply(null,arguments)},s._OrtGetOutputName=function(){return(s._OrtGetOutputName=s.asm.ja).apply(null,arguments)},s._OrtFree=function(){return(s._OrtFree=s.asm.ka).apply(null,arguments)},s._OrtCreateTensor=function(){return(s._OrtCreateTensor=s.asm.la).apply(null,arguments)},s._OrtGetTensorData=function(){return(s._OrtGetTensorData=s.asm.ma).apply(null,arguments)},s._OrtReleaseTensor=function(){return(s._OrtReleaseTensor=s.asm.na).apply(null,arguments)},s._OrtCreateRunOptions=function(){return(s._OrtCreateRunOptions=s.asm.oa).apply(null,arguments)},s._OrtAddRunConfigEntry=function(){return(s._OrtAddRunConfigEntry=s.asm.pa).apply(null,arguments)},s._OrtReleaseRunOptions=function(){return(s._OrtReleaseRunOptions=s.asm.qa).apply(null,arguments)},s._OrtRun=function(){return(s._OrtRun=s.asm.ra).apply(null,arguments)},s._OrtEndProfiling=function(){return(s._OrtEndProfiling=s.asm.sa).apply(null,arguments)};var rt=s._pthread_self=function(){return(rt=s._pthread_self=s.asm.ta).apply(null,arguments)},at=s._malloc=function(){return(at=s._malloc=s.asm.ua).apply(null,arguments)};s._free=function(){return(s._free=s.asm.va).apply(null,arguments)},s.__emscripten_tls_init=function(){return(s.__emscripten_tls_init=s.asm.wa).apply(null,arguments)};var ot=s.__emscripten_thread_init=function(){return(ot=s.__emscripten_thread_init=s.asm.xa).apply(null,arguments)};s.__emscripten_thread_crashed=function(){return(s.__emscripten_thread_crashed=s.asm.ya).apply(null,arguments)};var it,st=s._emscripten_run_in_main_runtime_thread_js=function(){return(st=s._emscripten_run_in_main_runtime_thread_js=s.asm.Aa).apply(null,arguments)},ut=s.__emscripten_proxy_execute_task_queue=function(){return(ut=s.__emscripten_proxy_execute_task_queue=s.asm.Ba).apply(null,arguments)},ct=s.__emscripten_thread_free_data=function(){return(ct=s.__emscripten_thread_free_data=s.asm.Ca).apply(null,arguments)},lt=s.__emscripten_thread_exit=function(){return(lt=s.__emscripten_thread_exit=s.asm.Da).apply(null,arguments)},ft=s._emscripten_stack_set_limits=function(){return(ft=s._emscripten_stack_set_limits=s.asm.Ea).apply(null,arguments)},pt=s.stackSave=function(){return(pt=s.stackSave=s.asm.Fa).apply(null,arguments)},dt=s.stackRestore=function(){return(dt=s.stackRestore=s.asm.Ga).apply(null,arguments)},mt=s.stackAlloc=function(){return(mt=s.stackAlloc=s.asm.Ha).apply(null,arguments)};function gt(){function e(){if(!it&&(it=!0,s.calledRun=!0,!H)&&(O||pe(J),u(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),!O)){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;){var e=s.postRun.shift();Q.unshift(e)}pe(Q)}}if(!(0<Z))if(O)u(s),O||pe(J),postMessage({cmd:"loaded"});else{if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)X();pe(V),0<Z||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),e()}),1)):e())}}if(s.___cxa_is_pointer_type=function(){return(s.___cxa_is_pointer_type=s.asm.Ia).apply(null,arguments)},s.UTF8ToString=z,s.stringToUTF8=function(e,t,n){return B(e,r(),t,n)},s.lengthBytesUTF8=N,s.keepRuntimeAlive=function(){return C},s.wasmMemory=P,s.stackSave=pt,s.stackRestore=dt,s.stackAlloc=mt,s.ExitStatus=ie,s.PThread=fe,te=function e(){it||gt(),it||(te=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return gt(),e.ready});e.exports=r},932:(e,t,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,r,a;e=e||{},t||(t=void 0!==e?e:{}),t.ready=new Promise((function(e,t){r=e,a=t}));var o,i,s,u,c,l,f=Object.assign({},t),p="./this.program",d=(e,t)=>{throw t},m="object"==typeof window,g="function"==typeof importScripts,h="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,y="";h?(y=g?n(908).dirname(y)+"/":"//",l=()=>{c||(u=n(384),c=n(908))},o=function(e,t){return l(),e=c.normalize(e),u.readFileSync(e,t?void 0:"utf8")},s=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,t,n)=>{l(),e=c.normalize(e),u.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof $))throw e})),process.on("unhandledRejection",(function(e){throw e})),d=(e,t)=>{if(_)throw process.exitCode=e,t;t instanceof $||w("exiting due to exception: "+t),process.exit(e)},t.inspect=function(){return"[Emscripten Module object]"}):(m||g)&&(g?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),_scriptDir&&(y=_scriptDir),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},g&&(s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,b=t.print||console.log.bind(console),w=t.printErr||console.warn.bind(console);Object.assign(t,f),f=null,t.thisProgram&&(p=t.thisProgram),t.quit&&(d=t.quit),t.wasmBinary&&(v=t.wasmBinary);var _=t.noExitRuntime||!0;"object"!=typeof WebAssembly&&B("no native wasm support detected");var O,S,T,A,E,M,R=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(e,t,n){var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&x)return x.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function P(e,t){return(e>>>=0)?C(A,e,t):""}function k(e,t,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;t[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++>>>0]=224|i>>12}else{if(n+3>=r)break;t[n++>>>0]=240|i>>18,t[n++>>>0]=128|i>>12&63}t[n++>>>0]=128|i>>6&63}t[n++>>>0]=128|63&i}}return t[n>>>0]=0,n-a}function D(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t}function F(){var e=O.buffer;S=e,t.HEAP8=T=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=E=new Int32Array(e),t.HEAPU8=A=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=M=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var U=[],I=[],W=[];function j(){var e=t.preRun.shift();U.unshift(e)}var H,L=0,Y=null,z=null;function B(e){throw t.onAbort&&t.onAbort(e),w(e="Aborted("+e+")"),R=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),a(e),e}function N(){return H.startsWith("data:application/octet-stream;base64,")}if(H="ort-wasm.wasm",!N()){var G=H;H=t.locateFile?t.locateFile(G,y):y+G}function q(){var e=H;try{if(e==H&&v)return new Uint8Array(v);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}}function $(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function V(e){for(;0<e.length;)e.shift()(t)}function J(e){this.sa=e-24,this.Ia=function(e){M[this.sa+4>>2>>>0]=e},this.Ba=function(e){M[this.sa+8>>2>>>0]=e},this.Ga=function(){E[this.sa>>2>>>0]=0},this.Aa=function(){T[this.sa+12>>0>>>0]=0},this.Ha=function(){T[this.sa+13>>0>>>0]=0},this.ya=function(e,t){this.za(),this.Ia(e),this.Ba(t),this.Ga(),this.Aa(),this.Ha()},this.za=function(){M[this.sa+16>>2>>>0]=0}}function Q(e){var t=D(e)+1,n=ie(t);return n&&k(e,T,n,t),n}var X={};function K(){if(!Z){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(e in X)void 0===X[e]?delete t[e]:t[e]=X[e];var n=[];for(e in t)n.push(e+"="+t[e]);Z=n}return Z}var Z,ee=[null,[],[]];function te(e){return 0==e%4&&(0!=e%100||0==e%400)}var ne=[31,29,31,30,31,30,31,31,30,31,30,31],re=[31,28,31,30,31,30,31,31,30,31,30,31];function ae(e,t,n,r){function a(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function o(e,t){return a(e,t,"0")}function i(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.qa;for(e=new Date(new Date(e.ra+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(te(e.getFullYear())?ne:re)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),n=s(n),0>=i(t,e)?0>=i(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var c=E[r+40>>2>>>0];for(var l in r={Ea:E[r>>2>>>0],Da:E[r+4>>2>>>0],ta:E[r+8>>2>>>0],va:E[r+12>>2>>>0],ua:E[r+16>>2>>>0],ra:E[r+20>>2>>>0],la:E[r+24>>2>>>0],qa:E[r+28>>2>>>0],Ja:E[r+32>>2>>>0],Ca:E[r+36>>2>>>0],Fa:c?P(c):""},n=P(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(e){return f[e.la].substring(0,3)},"%A":function(e){return f[e.la]},"%b":function(e){return p[e.ua].substring(0,3)},"%B":function(e){return p[e.ua]},"%C":function(e){return o((e.ra+1900)/100|0,2)},"%d":function(e){return o(e.va,2)},"%e":function(e){return a(e.va,2," ")},"%g":function(e){return u(e).toString().substring(2)},"%G":function(e){return u(e)},"%H":function(e){return o(e.ta,2)},"%I":function(e){return 0==(e=e.ta)?e=12:12<e&&(e-=12),o(e,2)},"%j":function(e){for(var t=0,n=0;n<=e.ua-1;t+=(te(e.ra+1900)?ne:re)[n++]);return o(e.va+t,3)},"%m":function(e){return o(e.ua+1,2)},"%M":function(e){return o(e.Da,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.ta&&12>e.ta?"AM":"PM"},"%S":function(e){return o(e.Ea,2)},"%t":function(){return"\\t"},"%u":function(e){return e.la||7},"%U":function(e){return o(Math.floor((e.qa+7-e.la)/7),2)},"%V":function(e){var t=Math.floor((e.qa+7-(e.la+6)%7)/7);if(2>=(e.la+371-e.qa-2)%7&&t++,t)53==t&&(4==(n=(e.la+371-e.qa)%7)||3==n&&te(e.ra)||(t=1));else{t=52;var n=(e.la+7-e.qa-1)%7;(4==n||5==n&&te(e.ra%400-1))&&t++}return o(t,2)},"%w":function(e){return e.la},"%W":function(e){return o(Math.floor((e.qa+7-(e.la+6)%7)/7),2)},"%y":function(e){return(e.ra+1900).toString().substring(2)},"%Y":function(e){return e.ra+1900},"%z":function(e){var t=0<=(e=e.Ca);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Fa},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),c)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),c[l](r)));return l=function(e){var t=Array(D(e)+1);return k(e,t,0,t.length),t}(n=n.replace(/\\0\\0/g,"%")),l.length>t?0:(T.set(l,e>>>0),l.length-1)}var oe={a:function(e){return ie(e+24)+24},b:function(e,t,n){throw new J(e).ya(t,n),e},g:function(){return 0},I:function(){},w:function(){},y:function(){},K:function(){return 0},G:function(){},C:function(){},F:function(){},k:function(){},x:function(){},u:function(){},H:function(){},v:function(){},n:function(){},p:function(){B("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},o:function(){B("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(){return Date.now()},L:function(){return!0},M:function(e,t){e=new Date(1e3*(M[e>>>2]+4294967296*E[e+4>>>2])),E[t>>2>>>0]=e.getUTCSeconds(),E[t+4>>2>>>0]=e.getUTCMinutes(),E[t+8>>2>>>0]=e.getUTCHours(),E[t+12>>2>>>0]=e.getUTCDate(),E[t+16>>2>>>0]=e.getUTCMonth(),E[t+20>>2>>>0]=e.getUTCFullYear()-1900,E[t+24>>2>>>0]=e.getUTCDay(),E[t+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},N:function(e,t){e=new Date(1e3*(M[e>>>2]+4294967296*E[e+4>>>2])),E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),E[t+20>>2>>>0]=e.getFullYear()-1900,E[t+24>>2>>>0]=e.getDay();var n=new Date(e.getFullYear(),0,1);E[t+28>>2>>>0]=(e.getTime()-n.getTime())/864e5|0,E[t+36>>2>>>0]=-60*e.getTimezoneOffset();var r=new Date(e.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[t+32>>2>>>0]=0|(r!=n&&e.getTimezoneOffset()==Math.min(n,r))},O:function(e){var t=new Date(E[e+20>>2>>>0]+1900,E[e+16>>2>>>0],E[e+12>>2>>>0],E[e+8>>2>>>0],E[e+4>>2>>>0],E[e>>2>>>0],0),n=E[e+32>>2>>>0],r=t.getTimezoneOffset(),a=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=a.getTimezoneOffset(),s=Math.min(i,o);return 0>n?E[e+32>>2>>>0]=Number(o!=i&&s==r):0<n!=(s==r)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<n?s:o)-r))),E[e+24>>2>>>0]=t.getDay(),E[e+28>>2>>>0]=(t.getTime()-a.getTime())/864e5|0,E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),t.getTime()/1e3|0},z:function(){return-52},B:function(){},m:function e(t,n,r){e.xa||(e.xa=!0,function(e,t,n){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var s=i.getTimezoneOffset();E[e>>2>>>0]=60*Math.max(a,s),E[t>>2>>>0]=Number(a!=s),e=r(o),t=r(i),e=Q(e),t=Q(t),s<a?(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t):(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e)}(t,n,r))},d:function(){B("")},t:function(){return 4294901760},h:h?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),J:function(e,t,n){A.copyWithin(e>>>0,t>>>0,t+n>>>0)},f:function(e){var t=A.length;if(4294901760<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var a=Math;r=Math.max(e,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);e:{try{O.grow(a-S.byteLength+65535>>>16),F();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},D:function(e,t){var n=0;return K().forEach((function(r,a){var o=t+n;for(a=M[e+4*a>>2>>>0]=o,o=0;o<r.length;++o)T[a++>>0>>>0]=r.charCodeAt(o);T[a>>0>>>0]=0,n+=r.length+1})),0},E:function(e,t){var n=K();M[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),M[t>>2>>>0]=r,0},r:function(e){_||(t.onExit&&t.onExit(e),R=!0),d(e,new $(e))},e:function(){return 52},j:function(){return 52},q:function(){return 70},i:function(e,t,n,r){for(var a=0,o=0;o<n;o++){var i=M[t>>2>>>0],s=M[t+4>>2>>>0];t+=8;for(var u=0;u<s;u++){var c=A[i+u>>>0],l=ee[e];0===c||10===c?((1===e?b:w)(C(l,0)),l.length=0):l.push(c)}a+=s}return M[r>>2>>>0]=a,0},s:function e(t,r){e.wa||(e.wa=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(h)try{var t=n(760);return()=>t.randomBytes(1)[0]}catch(e){}return()=>B("randomDevice")}());for(var a=0;a<r;a++)T[t+a>>0>>>0]=e.wa();return 0},A:ae,c:function(e,t,n,r){return ae(e,t,n,r)}};!function(){function e(e){t.asm=e.exports,O=t.asm.P,F(),I.unshift(t.asm.Q),L--,t.monitorRunDependencies&&t.monitorRunDependencies(L),0==L&&(null!==Y&&(clearInterval(Y),Y=null),z&&(e=z,z=null,e()))}function n(t){e(t.instance)}function r(e){return function(){if(!v&&(m||g)){if("function"==typeof fetch&&!H.startsWith("file://"))return fetch(H,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+H+"\'";return e.arrayBuffer()})).catch((function(){return q()}));if(i)return new Promise((function(e,t){i(H,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return q()}))}().then((function(e){return WebAssembly.instantiate(e,o)})).then((function(e){return e})).then(e,(function(e){w("failed to asynchronously prepare wasm: "+e),B(e)}))}var o={a:oe};if(L++,t.monitorRunDependencies&&t.monitorRunDependencies(L),t.instantiateWasm)try{return t.instantiateWasm(o,e)}catch(e){return w("Module.instantiateWasm callback failed with error: "+e),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||N()||H.startsWith("file://")||h||"function"!=typeof fetch?r(n):fetch(H,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,o).then(n,(function(e){return w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.Q).apply(null,arguments)},t._OrtInit=function(){return(t._OrtInit=t.asm.R).apply(null,arguments)},t._OrtCreateSessionOptions=function(){return(t._OrtCreateSessionOptions=t.asm.S).apply(null,arguments)},t._OrtAppendExecutionProvider=function(){return(t._OrtAppendExecutionProvider=t.asm.T).apply(null,arguments)},t._OrtAddSessionConfigEntry=function(){return(t._OrtAddSessionConfigEntry=t.asm.U).apply(null,arguments)},t._OrtReleaseSessionOptions=function(){return(t._OrtReleaseSessionOptions=t.asm.V).apply(null,arguments)},t._OrtCreateSession=function(){return(t._OrtCreateSession=t.asm.W).apply(null,arguments)},t._OrtReleaseSession=function(){return(t._OrtReleaseSession=t.asm.X).apply(null,arguments)},t._OrtGetInputCount=function(){return(t._OrtGetInputCount=t.asm.Y).apply(null,arguments)},t._OrtGetOutputCount=function(){return(t._OrtGetOutputCount=t.asm.Z).apply(null,arguments)},t._OrtGetInputName=function(){return(t._OrtGetInputName=t.asm._).apply(null,arguments)},t._OrtGetOutputName=function(){return(t._OrtGetOutputName=t.asm.$).apply(null,arguments)},t._OrtFree=function(){return(t._OrtFree=t.asm.aa).apply(null,arguments)},t._OrtCreateTensor=function(){return(t._OrtCreateTensor=t.asm.ba).apply(null,arguments)},t._OrtGetTensorData=function(){return(t._OrtGetTensorData=t.asm.ca).apply(null,arguments)},t._OrtReleaseTensor=function(){return(t._OrtReleaseTensor=t.asm.da).apply(null,arguments)},t._OrtCreateRunOptions=function(){return(t._OrtCreateRunOptions=t.asm.ea).apply(null,arguments)},t._OrtAddRunConfigEntry=function(){return(t._OrtAddRunConfigEntry=t.asm.fa).apply(null,arguments)},t._OrtReleaseRunOptions=function(){return(t._OrtReleaseRunOptions=t.asm.ga).apply(null,arguments)},t._OrtRun=function(){return(t._OrtRun=t.asm.ha).apply(null,arguments)},t._OrtEndProfiling=function(){return(t._OrtEndProfiling=t.asm.ia).apply(null,arguments)};var ie=t._malloc=function(){return(ie=t._malloc=t.asm.ja).apply(null,arguments)};t._free=function(){return(t._free=t.asm.ka).apply(null,arguments)};var se,ue=t.stackSave=function(){return(ue=t.stackSave=t.asm.ma).apply(null,arguments)},ce=t.stackRestore=function(){return(ce=t.stackRestore=t.asm.na).apply(null,arguments)},le=t.stackAlloc=function(){return(le=t.stackAlloc=t.asm.oa).apply(null,arguments)};function fe(){function e(){if(!se&&(se=!0,t.calledRun=!0,!R)){if(V(I),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();W.unshift(e)}V(W)}}if(!(0<L)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)j();V(U),0<L||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t.___cxa_is_pointer_type=function(){return(t.___cxa_is_pointer_type=t.asm.pa).apply(null,arguments)},t.UTF8ToString=P,t.stringToUTF8=function(e,t,n){return k(e,A,t,n)},t.lengthBytesUTF8=D,t.stackSave=ue,t.stackRestore=ce,t.stackAlloc=le,z=function e(){se||fe(),se||(z=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return fe(),e.ready});e.exports=r},154:e=>{"use strict";e.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},760:()=>{},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";const e=n(259),t=n(263);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,t.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(e=>postMessage({type:"init-wasm",err:e})));break;case"init-ort":try{const{numThreads:t,loggingLevel:r}=n.data.in;(0,e.initOrt)(t,r),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{const{model:t}=n.data.in,r=(0,e.createSessionAllocate)(t);postMessage({type:"create_allocate",out:r})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{const{modeldata:t,options:r}=n.data.in,a=(0,e.createSessionFinalize)(t,r);postMessage({type:"create_finalize",out:a})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{const{model:t,options:r}=n.data.in,a=(0,e.createSession)(t,r);postMessage({type:"create",out:a})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{const t=n.data.in;(0,e.releaseSession)(t),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{const{sessionId:t,inputIndices:r,inputs:a,outputIndices:o,options:i}=n.data.in;(0,e.run)(t,r,a,o,i).then((t=>{postMessage({type:"run",out:t},(0,e.extractTransferableBuffers)(t))}),(e=>{postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{const t=n.data.in;(0,e.endProfiling)(t),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}})()})();\n',"Worker",void 0,void 0)}},6614:n=>{n.exports=function(t,r,a,o){var s=self||window;try{try{var l;try{l=new s.Blob([t])}catch{(l=new(s.BlobBuilder||s.WebKitBlobBuilder||s.MozBlobBuilder||s.MSBlobBuilder)).append(t),l=l.getBlob()}var u=s.URL||s.webkitURL,d=u.createObjectURL(l),v=new s[r](d,a);return u.revokeObjectURL(d),v}catch{return new s[r]("data:application/javascript,".concat(encodeURIComponent(t)),a)}}catch{if(!o)throw Error("Inline worker is not supported");return new s[r](o,a)}}},3474:(n,t,r)=>{var a,o=(a=(a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(s){function l(){return H.buffer!=U&&W(H.buffer),te}function u(){return H.buffer!=U&&W(H.buffer),ee}function d(){return H.buffer!=U&&W(H.buffer),q}function v(){return H.buffer!=U&&W(H.buffer),ie}function g(){return H.buffer!=U&&W(H.buffer),pe}var f,c,y;s=s||{},f||(f=s!==void 0?s:{}),f.ready=new Promise(function(G,Y){c=G,y=Y});var _,b,S,x,w,T,A=Object.assign({},f),E="./this.program",$=(G,Y)=>{throw Y},P=typeof window=="object",I=typeof importScripts=="function",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",M=f.ENVIRONMENT_IS_PTHREAD||!1,D="";function R(G){return f.locateFile?f.locateFile(G,D):D+G}if(C){let G;D=I?r(908).dirname(D)+"/":"//",T=()=>{w||(x=r(1384),w=r(908))},_=function(Y,re){return T(),Y=w.normalize(Y),x.readFileSync(Y,re?void 0:"utf8")},S=Y=>((Y=_(Y,!0)).buffer||(Y=new Uint8Array(Y)),Y),b=(Y,re,ue)=>{T(),Y=w.normalize(Y),x.readFile(Y,function(Se,we){Se?ue(Se):re(we.buffer)})},1<process.argv.length&&(E=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Y){if(!(Y instanceof De))throw Y}),process.on("unhandledRejection",function(Y){throw Y}),$=(Y,re)=>{if(V)throw process.exitCode=Y,re;re instanceof De||B("exiting due to exception: "+re),process.exit(Y)},f.inspect=function(){return"[Emscripten Module object]"};try{G=r(9925)}catch(Y){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Y}r.g.Worker=G.Worker}else(P||I)&&(I?D=self.location.href:typeof document<"u"&&document.currentScript&&(D=document.currentScript.src),a&&(D=a),D=D.indexOf("blob:")!==0?D.substr(0,D.replace(/[?#].*/,"").lastIndexOf("/")+1):"",C||(_=G=>{var Y=new XMLHttpRequest;return Y.open("GET",G,!1),Y.send(null),Y.responseText},I&&(S=G=>{var Y=new XMLHttpRequest;return Y.open("GET",G,!1),Y.responseType="arraybuffer",Y.send(null),new Uint8Array(Y.response)}),b=(G,Y,re)=>{var ue=new XMLHttpRequest;ue.open("GET",G,!0),ue.responseType="arraybuffer",ue.onload=()=>{ue.status==200||ue.status==0&&ue.response?Y(ue.response):re()},ue.onerror=re,ue.send(null)}));C&&typeof performance>"u"&&(r.g.performance=r(6953).performance);var N=console.log.bind(console),O=console.warn.bind(console);C&&(T(),N=G=>x.writeSync(1,G+`
`),O=G=>x.writeSync(2,G+`
`));var F,L=f.print||N,B=f.printErr||O;Object.assign(f,A),A=null,f.thisProgram&&(E=f.thisProgram),f.quit&&($=f.quit),f.wasmBinary&&(F=f.wasmBinary);var V=f.noExitRuntime||!0;typeof WebAssembly!="object"&&be("no native wasm support detected");var H,X,U,te,ee,q,ie,pe,j=!1,Q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function J(G,Y,re){var ue=(Y>>>=0)+re;for(re=Y;G[re]&&!(re>=ue);)++re;if(16<re-Y&&G.buffer&&Q)return Q.decode(G.buffer instanceof SharedArrayBuffer?G.slice(Y,re):G.subarray(Y,re));for(ue="";Y<re;){var Se=G[Y++];if(128&Se){var we=63&G[Y++];if((224&Se)==192)ue+=String.fromCharCode((31&Se)<<6|we);else{var Me=63&G[Y++];65536>(Se=(240&Se)==224?(15&Se)<<12|we<<6|Me:(7&Se)<<18|we<<12|Me<<6|63&G[Y++])?ue+=String.fromCharCode(Se):(Se-=65536,ue+=String.fromCharCode(55296|Se>>10,56320|1023&Se))}}else ue+=String.fromCharCode(Se)}return ue}function oe(G,Y){return(G>>>=0)?J(u(),G,Y):""}function ne(G,Y,re,ue){if(!(0<ue))return 0;var Se=re>>>=0;ue=re+ue-1;for(var we=0;we<G.length;++we){var Me=G.charCodeAt(we);if(55296<=Me&&57343>=Me&&(Me=65536+((1023&Me)<<10)|1023&G.charCodeAt(++we)),127>=Me){if(re>=ue)break;Y[re++>>>0]=Me}else{if(2047>=Me){if(re+1>=ue)break;Y[re++>>>0]=192|Me>>6}else{if(65535>=Me){if(re+2>=ue)break;Y[re++>>>0]=224|Me>>12}else{if(re+3>=ue)break;Y[re++>>>0]=240|Me>>18,Y[re++>>>0]=128|Me>>12&63}Y[re++>>>0]=128|Me>>6&63}Y[re++>>>0]=128|63&Me}}return Y[re>>>0]=0,re-Se}function z(G){for(var Y=0,re=0;re<G.length;++re){var ue=G.charCodeAt(re);127>=ue?Y++:2047>=ue?Y+=2:55296<=ue&&57343>=ue?(Y+=4,++re):Y+=3}return Y}function W(G){U=G,f.HEAP8=te=new Int8Array(G),f.HEAP16=new Int16Array(G),f.HEAP32=q=new Int32Array(G),f.HEAPU8=ee=new Uint8Array(G),f.HEAPU16=new Uint16Array(G),f.HEAPU32=ie=new Uint32Array(G),f.HEAPF32=new Float32Array(G),f.HEAPF64=pe=new Float64Array(G)}M&&(U=f.buffer);var Z=f.INITIAL_MEMORY||16777216;if(M)H=f.wasmMemory,U=f.buffer;else if(f.wasmMemory)H=f.wasmMemory;else if(!((H=new WebAssembly.Memory({initial:Z/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw B("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),C&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");H&&(U=H.buffer),Z=U.byteLength,W(U);var ae,se=[],ce=[],_e=[];function ge(){var G=f.preRun.shift();se.unshift(G)}var me,de=0,xe=null;function be(G){throw M?postMessage({cmd:"onAbort",arg:G}):f.onAbort&&f.onAbort(G),B(G="Aborted("+G+")"),j=!0,G=new WebAssembly.RuntimeError(G+". Build with -sASSERTIONS for more info."),y(G),G}function Ee(){return me.startsWith("data:application/octet-stream;base64,")}function $e(){var G=me;try{if(G==me&&F)return new Uint8Array(F);if(S)return S(G);throw"both async and sync fetching of the wasm failed"}catch(Y){be(Y)}}me="ort-wasm-threaded.wasm",Ee()||(me=R(me));var Ce={};function De(G){this.name="ExitStatus",this.message="Program terminated with exit("+G+")",this.status=G}function Oe(G){(G=Pe.La[G])||be(),Pe.Xa(G)}function Ne(G){var Y=Pe.lb();if(!Y)return 6;Pe.Ra.push(Y),Pe.La[G.Ka]=Y,Y.Ka=G.Ka;var re={cmd:"run",start_routine:G.pb,arg:G.ib,pthread_ptr:G.Ka};return Y.Qa=()=>{re.time=performance.now(),Y.postMessage(re,G.vb)},Y.loaded&&(Y.Qa(),delete Y.Qa),0}function Ge(G){if(M)return ke(1,1,G);V||(Pe.qb(),f.onExit&&f.onExit(G),j=!0),$(G,new De(G))}function qe(G,Y){if(!Y&&M)throw le(G),"unwind";Ge(G)}var Pe={Oa:[],Ra:[],$a:[],La:{},Ua:function(){M&&Pe.mb()},xb:function(){},mb:function(){Pe.receiveObjectTransfer=Pe.ob,Pe.threadInitTLS=Pe.Za,Pe.setExitStatus=Pe.Ya,V=!1},Ya:function(){},qb:function(){for(var G of Object.values(Pe.La))Pe.Xa(G);for(G of Pe.Oa)G.terminate();Pe.Oa=[]},Xa:function(G){var Y=G.Ka;delete Pe.La[Y],Pe.Oa.push(G),Pe.Ra.splice(Pe.Ra.indexOf(G),1),G.Ka=0,ht(Y)},ob:function(){},Za:function(){Pe.$a.forEach(G=>G())},nb:function(G,Y){G.onmessage=re=>{var ue=(re=re.data).cmd;if(G.Ka&&(Pe.kb=G.Ka),re.targetThread&&re.targetThread!=nt()){var Se=Pe.La[re.yb];Se?Se.postMessage(re,re.transferList):B('Internal error! Worker sent a message "'+ue+'" to target pthread '+re.targetThread+", but that thread no longer exists!")}else ue==="processProxyingQueue"?ot(re.queue):ue==="spawnThread"?Ne(re):ue==="cleanupThread"?Oe(re.thread):ue==="killThread"?(re=re.thread,ue=Pe.La[re],delete Pe.La[re],ue.terminate(),ht(re),Pe.Ra.splice(Pe.Ra.indexOf(ue),1),ue.Ka=0):ue==="cancelThread"?Pe.La[re.thread].postMessage({cmd:"cancel"}):ue==="loaded"?(G.loaded=!0,Y&&Y(G),G.Qa&&(G.Qa(),delete G.Qa)):ue==="print"?L("Thread "+re.threadId+": "+re.text):ue==="printErr"?B("Thread "+re.threadId+": "+re.text):ue==="alert"?alert("Thread "+re.threadId+": "+re.text):re.target==="setimmediate"?G.postMessage(re):ue==="onAbort"?f.onAbort&&f.onAbort(re.arg):ue&&B("worker sent an unknown command "+ue);Pe.kb=void 0},G.onerror=re=>{throw B("worker sent an error! "+re.filename+":"+re.lineno+": "+re.message),re},C&&(G.on("message",function(re){G.onmessage({data:re})}),G.on("error",function(re){G.onerror(re)}),G.on("detachedExit",function(){})),G.postMessage({cmd:"load",urlOrBlob:f.mainScriptUrlOrBlob||a,wasmMemory:H,wasmModule:X})},hb:function(){var G=R("ort-wasm-threaded.worker.js");Pe.Oa.push(new Worker(G))},lb:function(){return Pe.Oa.length==0&&(Pe.hb(),Pe.nb(Pe.Oa[0])),Pe.Oa.pop()}};function K(G){for(;0<G.length;)G.shift()(f)}function le(G){if(M)return ke(2,0,G);try{qe(G)}catch(Y){Y instanceof De||Y=="unwind"||$(1,Y)}}f.PThread=Pe,f.establishStackSpace=function(){var G=nt(),Y=d()[G+44>>2>>>0];G=d()[G+48>>2>>>0],kt(Y,Y-G),at(Y)};var ve,ye,Te=[];function Ae(G){this.Pa=G-24,this.gb=function(Y){v()[this.Pa+4>>2>>>0]=Y},this.cb=function(Y){v()[this.Pa+8>>2>>>0]=Y},this.eb=function(){d()[this.Pa>>2>>>0]=0},this.bb=function(){l()[this.Pa+12>>0>>>0]=0},this.fb=function(){l()[this.Pa+13>>0>>>0]=0},this.Ua=function(Y,re){this.ab(),this.gb(Y),this.cb(re),this.eb(),this.bb(),this.fb()},this.ab=function(){v()[this.Pa+16>>2>>>0]=0}}function Ie(G,Y,re,ue){return M?ke(3,1,G,Y,re,ue):ze(G,Y,re,ue)}function ze(G,Y,re,ue){if(typeof SharedArrayBuffer>"u")return B("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Se=[];return M&&Se.length===0?Ie(G,Y,re,ue):(G={pb:re,Ka:G,ib:ue,vb:Se},M?(G.wb="spawnThread",postMessage(G,Se),0):Ne(G))}function We(G,Y,re){return M?ke(4,1,G,Y,re):0}function He(G,Y){if(M)return ke(5,1,G,Y)}function Ve(G,Y){if(M)return ke(6,1,G,Y)}function Ze(G,Y,re){if(M)return ke(7,1,G,Y,re)}function Ke(G,Y,re){return M?ke(8,1,G,Y,re):0}function fe(G,Y){if(M)return ke(9,1,G,Y)}function Re(G,Y,re){if(M)return ke(10,1,G,Y,re)}function Fe(G,Y,re,ue){if(M)return ke(11,1,G,Y,re,ue)}function Xe(G,Y,re,ue){if(M)return ke(12,1,G,Y,re,ue)}function et(G,Y,re,ue){if(M)return ke(13,1,G,Y,re,ue)}function vt(G){if(M)return ke(14,1,G)}function gt(G,Y){if(M)return ke(15,1,G,Y)}function mt(G,Y,re){if(M)return ke(16,1,G,Y,re)}function ot(G){Atomics.store(d(),G>>2,1),nt()&&Lt(G),Atomics.compareExchange(d(),G>>2,1,0)}function yt(G){return v()[G>>>2]+4294967296*d()[G+4>>>2]}function _t(G,Y,re,ue,Se,we){return M?ke(17,1,G,Y,re,ue,Se,we):-52}function bt(G,Y,re,ue,Se,we){if(M)return ke(18,1,G,Y,re,ue,Se,we)}function St(G){var Y=z(G)+1,re=ft(Y);return re&&ne(G,l(),re,Y),re}function xt(G,Y,re){function ue(je){return(je=je.toTimeString().match(/\(([A-Za-z ]+)\)$/))?je[1]:"GMT"}if(M)return ke(19,1,G,Y,re);var Se=new Date().getFullYear(),we=new Date(Se,0,1),Me=new Date(Se,6,1);Se=we.getTimezoneOffset();var Ue=Me.getTimezoneOffset(),Je=Math.max(Se,Ue);d()[G>>2>>>0]=60*Je,d()[Y>>2>>>0]=+(Se!=Ue),G=ue(we),Y=ue(Me),G=St(G),Y=St(Y),Ue<Se?(v()[re>>2>>>0]=G,v()[re+4>>2>>>0]=Y):(v()[re>>2>>>0]=Y,v()[re+4>>2>>>0]=G)}function ke(G,Y){var re=arguments.length-2,ue=arguments;return function(Se){var we=dt();return Se=Se(),at(we),Se}(()=>{for(var Se=pt(8*re),we=Se>>3,Me=0;Me<re;Me++){var Ue=ue[2+Me];g()[we+Me>>>0]=Ue}return Rt(G,re,Se,Y)})}f.invokeEntryPoint=function(G,Y){var re=Te[G];re||(G>=Te.length&&(Te.length=G+1),Te[G]=re=ae.get(G)),G=re(Y),V?Pe.Ya(G):Nt(G)},f.executeNotifiedProxyingQueue=ot,ye=C?()=>{var G=process.hrtime();return 1e3*G[0]+G[1]/1e6}:M?()=>performance.now()-f.__performance_now_clock_drift:()=>performance.now();var st,ut=[],ct={};function wt(){if(!st){var G,Y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E||"./this.program"};for(G in ct)ct[G]===void 0?delete Y[G]:Y[G]=ct[G];var re=[];for(G in Y)re.push(G+"="+Y[G]);st=re}return st}function Tt(G,Y){if(M)return ke(20,1,G,Y);var re=0;return wt().forEach(function(ue,Se){var we=Y+re;for(Se=v()[G+4*Se>>2>>>0]=we,we=0;we<ue.length;++we)l()[Se++>>0>>>0]=ue.charCodeAt(we);l()[Se>>0>>>0]=0,re+=ue.length+1}),0}function At(G,Y){if(M)return ke(21,1,G,Y);var re=wt();v()[G>>2>>>0]=re.length;var ue=0;return re.forEach(function(Se){ue+=Se.length+1}),v()[Y>>2>>>0]=ue,0}function Et(G){return M?ke(22,1,G):52}function $t(G,Y,re,ue){return M?ke(23,1,G,Y,re,ue):52}function Pt(G,Y,re,ue,Se){return M?ke(24,1,G,Y,re,ue,Se):70}var zt=[null,[],[]];function Ct(G,Y,re,ue){if(M)return ke(25,1,G,Y,re,ue);for(var Se=0,we=0;we<re;we++){var Me=v()[Y>>2>>>0],Ue=v()[Y+4>>2>>>0];Y+=8;for(var Je=0;Je<Ue;Je++){var je=u()[Me+Je>>>0],Ye=zt[G];je===0||je===10?((G===1?L:B)(J(Ye,0)),Ye.length=0):Ye.push(je)}Se+=Ue}return v()[ue>>2>>>0]=Se,0}function tt(G){return G%4==0&&(G%100!=0||G%400==0)}var It=[31,29,31,30,31,30,31,31,30,31,30,31],Mt=[31,28,31,30,31,30,31,31,30,31,30,31];function Dt(G,Y,re,ue){function Se(he,Le,Be){for(he=typeof he=="number"?he.toString():he||"";he.length<Le;)he=Be[0]+he;return he}function we(he,Le){return Se(he,Le,"0")}function Me(he,Le){function Be(Gt){return 0>Gt?-1:0<Gt?1:0}var Qe;return(Qe=Be(he.getFullYear()-Le.getFullYear()))===0&&(Qe=Be(he.getMonth()-Le.getMonth()))===0&&(Qe=Be(he.getDate()-Le.getDate())),Qe}function Ue(he){switch(he.getDay()){case 0:return new Date(he.getFullYear()-1,11,29);case 1:return he;case 2:return new Date(he.getFullYear(),0,3);case 3:return new Date(he.getFullYear(),0,2);case 4:return new Date(he.getFullYear(),0,1);case 5:return new Date(he.getFullYear()-1,11,31);case 6:return new Date(he.getFullYear()-1,11,30)}}function Je(he){var Le=he.Ma;for(he=new Date(new Date(he.Na+1900,0,1).getTime());0<Le;){var Be=he.getMonth(),Qe=(tt(he.getFullYear())?It:Mt)[Be];if(!(Le>Qe-he.getDate())){he.setDate(he.getDate()+Le);break}Le-=Qe-he.getDate()+1,he.setDate(1),11>Be?he.setMonth(Be+1):(he.setMonth(0),he.setFullYear(he.getFullYear()+1))}return Be=new Date(he.getFullYear()+1,0,4),Le=Ue(new Date(he.getFullYear(),0,4)),Be=Ue(Be),0>=Me(Le,he)?0>=Me(Be,he)?he.getFullYear()+1:he.getFullYear():he.getFullYear()-1}var je=d()[ue+40>>2>>>0];for(var Ye in ue={tb:d()[ue>>2>>>0],sb:d()[ue+4>>2>>>0],Sa:d()[ue+8>>2>>>0],Va:d()[ue+12>>2>>>0],Ta:d()[ue+16>>2>>>0],Na:d()[ue+20>>2>>>0],Ja:d()[ue+24>>2>>>0],Ma:d()[ue+28>>2>>>0],zb:d()[ue+32>>2>>>0],rb:d()[ue+36>>2>>>0],ub:je?oe(je):""},re=oe(re),je={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})re=re.replace(new RegExp(Ye,"g"),je[Ye]);var Bt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Vt="January February March April May June July August September October November December".split(" ");for(Ye in je={"%a":function(he){return Bt[he.Ja].substring(0,3)},"%A":function(he){return Bt[he.Ja]},"%b":function(he){return Vt[he.Ta].substring(0,3)},"%B":function(he){return Vt[he.Ta]},"%C":function(he){return we((he.Na+1900)/100|0,2)},"%d":function(he){return we(he.Va,2)},"%e":function(he){return Se(he.Va,2," ")},"%g":function(he){return Je(he).toString().substring(2)},"%G":function(he){return Je(he)},"%H":function(he){return we(he.Sa,2)},"%I":function(he){return(he=he.Sa)==0?he=12:12<he&&(he-=12),we(he,2)},"%j":function(he){for(var Le=0,Be=0;Be<=he.Ta-1;Le+=(tt(he.Na+1900)?It:Mt)[Be++]);return we(he.Va+Le,3)},"%m":function(he){return we(he.Ta+1,2)},"%M":function(he){return we(he.sb,2)},"%n":function(){return`
`},"%p":function(he){return 0<=he.Sa&&12>he.Sa?"AM":"PM"},"%S":function(he){return we(he.tb,2)},"%t":function(){return"	"},"%u":function(he){return he.Ja||7},"%U":function(he){return we(Math.floor((he.Ma+7-he.Ja)/7),2)},"%V":function(he){var Le=Math.floor((he.Ma+7-(he.Ja+6)%7)/7);if(2>=(he.Ja+371-he.Ma-2)%7&&Le++,Le)Le==53&&((Be=(he.Ja+371-he.Ma)%7)==4||Be==3&&tt(he.Na)||(Le=1));else{Le=52;var Be=(he.Ja+7-he.Ma-1)%7;(Be==4||Be==5&&tt(he.Na%400-1))&&Le++}return we(Le,2)},"%w":function(he){return he.Ja},"%W":function(he){return we(Math.floor((he.Ma+7-(he.Ja+6)%7)/7),2)},"%y":function(he){return(he.Na+1900).toString().substring(2)},"%Y":function(he){return he.Na+1900},"%z":function(he){var Le=0<=(he=he.rb);return he=Math.abs(he)/60,(Le?"+":"-")+("0000"+(he/60*100+he%60)).slice(-4)},"%Z":function(he){return he.ub},"%%":function(){return"%"}},re=re.replace(/%%/g,"\0\0"),je)re.includes(Ye)&&(re=re.replace(new RegExp(Ye,"g"),je[Ye](ue)));return Ye=function(he){var Le=Array(z(he)+1);return ne(he,Le,0,Le.length),Le}(re=re.replace(/\0\0/g,"%")),Ye.length>Y?0:(function(he,Le){l().set(he,Le>>>0)}(Ye,G),Ye.length-1)}Pe.Ua();var Ht=[null,Ge,le,Ie,We,He,Ve,Ze,Ke,fe,Re,Fe,Xe,et,vt,gt,mt,_t,bt,xt,Tt,At,Et,$t,Pt,Ct],Ut={b:function(G){return ft(G+24)+24},c:function(G,Y,re){throw new Ae(G).Ua(Y,re),G},L:function(G){Ot(G,!I,1,!P),Pe.Za()},l:function(G){M?postMessage({cmd:"cleanupThread",thread:G}):Oe(G)},D:ze,i:We,R:He,z:Ve,B:Ze,T:Ke,P:fe,I:Re,O:Fe,p:Xe,A:et,x:vt,Q:gt,y:mt,r:function(){},j:function(){be("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},s:function(){be("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},q:function(){return Date.now()},E:function(){return 2097152},V:function(){return!0},F:function(G,Y,re,ue){if(G==Y)setTimeout(()=>ot(ue));else if(M)postMessage({targetThread:G,cmd:"processProxyingQueue",queue:ue});else{if(!(G=Pe.La[G]))return;G.postMessage({cmd:"processProxyingQueue",queue:ue})}return 1},K:function(){return-1},W:function(G,Y){G=new Date(1e3*yt(G)),d()[Y>>2>>>0]=G.getUTCSeconds(),d()[Y+4>>2>>>0]=G.getUTCMinutes(),d()[Y+8>>2>>>0]=G.getUTCHours(),d()[Y+12>>2>>>0]=G.getUTCDate(),d()[Y+16>>2>>>0]=G.getUTCMonth(),d()[Y+20>>2>>>0]=G.getUTCFullYear()-1900,d()[Y+24>>2>>>0]=G.getUTCDay(),G=(G.getTime()-Date.UTC(G.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,d()[Y+28>>2>>>0]=G},X:function(G,Y){G=new Date(1e3*yt(G)),d()[Y>>2>>>0]=G.getSeconds(),d()[Y+4>>2>>>0]=G.getMinutes(),d()[Y+8>>2>>>0]=G.getHours(),d()[Y+12>>2>>>0]=G.getDate(),d()[Y+16>>2>>>0]=G.getMonth(),d()[Y+20>>2>>>0]=G.getFullYear()-1900,d()[Y+24>>2>>>0]=G.getDay();var re=new Date(G.getFullYear(),0,1),ue=(G.getTime()-re.getTime())/864e5|0;d()[Y+28>>2>>>0]=ue,d()[Y+36>>2>>>0]=-60*G.getTimezoneOffset(),ue=new Date(G.getFullYear(),6,1).getTimezoneOffset(),G=0|(ue!=(re=re.getTimezoneOffset())&&G.getTimezoneOffset()==Math.min(re,ue)),d()[Y+32>>2>>>0]=G},Y:function(G){var Y=new Date(d()[G+20>>2>>>0]+1900,d()[G+16>>2>>>0],d()[G+12>>2>>>0],d()[G+8>>2>>>0],d()[G+4>>2>>>0],d()[G>>2>>>0],0),re=d()[G+32>>2>>>0],ue=Y.getTimezoneOffset(),Se=new Date(Y.getFullYear(),0,1),we=new Date(Y.getFullYear(),6,1).getTimezoneOffset(),Me=Se.getTimezoneOffset(),Ue=Math.min(Me,we);return 0>re?d()[G+32>>2>>>0]=+(we!=Me&&Ue==ue):0<re!=(Ue==ue)&&(we=Math.max(Me,we),Y.setTime(Y.getTime()+6e4*((0<re?Ue:we)-ue))),d()[G+24>>2>>>0]=Y.getDay(),re=(Y.getTime()-Se.getTime())/864e5|0,d()[G+28>>2>>>0]=re,d()[G>>2>>>0]=Y.getSeconds(),d()[G+4>>2>>>0]=Y.getMinutes(),d()[G+8>>2>>>0]=Y.getHours(),d()[G+12>>2>>>0]=Y.getDate(),d()[G+16>>2>>>0]=Y.getMonth(),Y.getTime()/1e3|0},G:_t,H:bt,Z:function G(Y,re,ue){G.jb||(G.jb=!0,xt(Y,re,ue))},d:function(){be("")},m:function(){if(!C&&!I){var G="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";ve||(ve={}),ve[G]||(ve[G]=1,C&&(G="warning: "+G),B(G))}},w:function(){return 4294901760},f:ye,S:function(G,Y,re){u().copyWithin(G>>>0,Y>>>0,Y+re>>>0)},g:function(){return C?r(3993).cpus().length:navigator.hardwareConcurrency},J:function(G,Y,re){ut.length=Y,re>>=3;for(var ue=0;ue<Y;ue++)ut[ue]=g()[re+ue>>>0];return(0>G?Ce[-G-1]:Ht[G]).apply(null,ut)},v:function(G){var Y=u().length;if((G>>>=0)<=Y||4294901760<G)return!1;for(var re=1;4>=re;re*=2){var ue=Y*(1+.2/re);ue=Math.min(ue,G+100663296);var Se=Math;ue=Math.max(G,ue),Se=Se.min.call(Se,4294901760,ue+(65536-ue%65536)%65536);e:{try{H.grow(Se-U.byteLength+65535>>>16),W(H.buffer);var we=1;break e}catch{}we=void 0}if(we)return!0}return!1},U:function(){throw"unwind"},M:Tt,N:At,k:qe,h:Et,o:$t,t:Pt,n:Ct,u:function G(Y,re){G.Wa||(G.Wa=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Se=new Uint8Array(1);return()=>(crypto.getRandomValues(Se),Se[0])}if(C)try{var we=r(760);return()=>we.randomBytes(1)[0]}catch{}return()=>be("randomDevice")}());for(var ue=0;ue<re;ue++)l()[Y+ue>>0>>>0]=G.Wa();return 0},a:H||f.wasmMemory,C:Dt,e:function(G,Y,re,ue){return Dt(G,Y,re,ue)}};(function(){function G(Se,we){f.asm=Se.exports,Pe.$a.push(f.asm.wa),ae=f.asm.za,ce.unshift(f.asm._),X=we,M||(de--,f.monitorRunDependencies&&f.monitorRunDependencies(de),de==0&&xe&&(Se=xe,xe=null,Se()))}function Y(Se){G(Se.instance,Se.module)}function re(Se){return function(){if(!F&&(P||I)){if(typeof fetch=="function"&&!me.startsWith("file://"))return fetch(me,{credentials:"same-origin"}).then(function(we){if(!we.ok)throw"failed to load wasm binary file at '"+me+"'";return we.arrayBuffer()}).catch(function(){return $e()});if(b)return new Promise(function(we,Me){b(me,function(Ue){we(new Uint8Array(Ue))},Me)})}return Promise.resolve().then(function(){return $e()})}().then(function(we){return WebAssembly.instantiate(we,ue)}).then(function(we){return we}).then(Se,function(we){B("failed to asynchronously prepare wasm: "+we),be(we)})}var ue={a:Ut};if(M||(de++,f.monitorRunDependencies&&f.monitorRunDependencies(de)),f.instantiateWasm)try{return f.instantiateWasm(ue,G)}catch(Se){return B("Module.instantiateWasm callback failed with error: "+Se),!1}(F||typeof WebAssembly.instantiateStreaming!="function"||Ee()||me.startsWith("file://")||C||typeof fetch!="function"?re(Y):fetch(me,{credentials:"same-origin"}).then(function(Se){return WebAssembly.instantiateStreaming(Se,ue).then(Y,function(we){return B("wasm streaming compile failed: "+we),B("falling back to ArrayBuffer instantiation"),re(Y)})})).catch(y)})(),f.___wasm_call_ctors=function(){return(f.___wasm_call_ctors=f.asm._).apply(null,arguments)},f._OrtInit=function(){return(f._OrtInit=f.asm.$).apply(null,arguments)},f._OrtCreateSessionOptions=function(){return(f._OrtCreateSessionOptions=f.asm.aa).apply(null,arguments)},f._OrtAppendExecutionProvider=function(){return(f._OrtAppendExecutionProvider=f.asm.ba).apply(null,arguments)},f._OrtAddSessionConfigEntry=function(){return(f._OrtAddSessionConfigEntry=f.asm.ca).apply(null,arguments)},f._OrtReleaseSessionOptions=function(){return(f._OrtReleaseSessionOptions=f.asm.da).apply(null,arguments)},f._OrtCreateSession=function(){return(f._OrtCreateSession=f.asm.ea).apply(null,arguments)},f._OrtReleaseSession=function(){return(f._OrtReleaseSession=f.asm.fa).apply(null,arguments)},f._OrtGetInputCount=function(){return(f._OrtGetInputCount=f.asm.ga).apply(null,arguments)},f._OrtGetOutputCount=function(){return(f._OrtGetOutputCount=f.asm.ha).apply(null,arguments)},f._OrtGetInputName=function(){return(f._OrtGetInputName=f.asm.ia).apply(null,arguments)},f._OrtGetOutputName=function(){return(f._OrtGetOutputName=f.asm.ja).apply(null,arguments)},f._OrtFree=function(){return(f._OrtFree=f.asm.ka).apply(null,arguments)},f._OrtCreateTensor=function(){return(f._OrtCreateTensor=f.asm.la).apply(null,arguments)},f._OrtGetTensorData=function(){return(f._OrtGetTensorData=f.asm.ma).apply(null,arguments)},f._OrtReleaseTensor=function(){return(f._OrtReleaseTensor=f.asm.na).apply(null,arguments)},f._OrtCreateRunOptions=function(){return(f._OrtCreateRunOptions=f.asm.oa).apply(null,arguments)},f._OrtAddRunConfigEntry=function(){return(f._OrtAddRunConfigEntry=f.asm.pa).apply(null,arguments)},f._OrtReleaseRunOptions=function(){return(f._OrtReleaseRunOptions=f.asm.qa).apply(null,arguments)},f._OrtRun=function(){return(f._OrtRun=f.asm.ra).apply(null,arguments)},f._OrtEndProfiling=function(){return(f._OrtEndProfiling=f.asm.sa).apply(null,arguments)};var nt=f._pthread_self=function(){return(nt=f._pthread_self=f.asm.ta).apply(null,arguments)},ft=f._malloc=function(){return(ft=f._malloc=f.asm.ua).apply(null,arguments)};f._free=function(){return(f._free=f.asm.va).apply(null,arguments)},f.__emscripten_tls_init=function(){return(f.__emscripten_tls_init=f.asm.wa).apply(null,arguments)};var Ot=f.__emscripten_thread_init=function(){return(Ot=f.__emscripten_thread_init=f.asm.xa).apply(null,arguments)};f.__emscripten_thread_crashed=function(){return(f.__emscripten_thread_crashed=f.asm.ya).apply(null,arguments)};var it,Rt=f._emscripten_run_in_main_runtime_thread_js=function(){return(Rt=f._emscripten_run_in_main_runtime_thread_js=f.asm.Aa).apply(null,arguments)},Lt=f.__emscripten_proxy_execute_task_queue=function(){return(Lt=f.__emscripten_proxy_execute_task_queue=f.asm.Ba).apply(null,arguments)},ht=f.__emscripten_thread_free_data=function(){return(ht=f.__emscripten_thread_free_data=f.asm.Ca).apply(null,arguments)},Nt=f.__emscripten_thread_exit=function(){return(Nt=f.__emscripten_thread_exit=f.asm.Da).apply(null,arguments)},kt=f._emscripten_stack_set_limits=function(){return(kt=f._emscripten_stack_set_limits=f.asm.Ea).apply(null,arguments)},dt=f.stackSave=function(){return(dt=f.stackSave=f.asm.Fa).apply(null,arguments)},at=f.stackRestore=function(){return(at=f.stackRestore=f.asm.Ga).apply(null,arguments)},pt=f.stackAlloc=function(){return(pt=f.stackAlloc=f.asm.Ha).apply(null,arguments)};function Ft(){function G(){if(!it&&(it=!0,f.calledRun=!0,!j)&&(M||K(ce),c(f),f.onRuntimeInitialized&&f.onRuntimeInitialized(),!M)){if(f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;){var Y=f.postRun.shift();_e.unshift(Y)}K(_e)}}if(!(0<de))if(M)c(f),M||K(ce),postMessage({cmd:"loaded"});else{if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)ge();K(se),0<de||(f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),G()},1)):G())}}if(f.___cxa_is_pointer_type=function(){return(f.___cxa_is_pointer_type=f.asm.Ia).apply(null,arguments)},f.UTF8ToString=oe,f.stringToUTF8=function(G,Y,re){return ne(G,u(),Y,re)},f.lengthBytesUTF8=z,f.keepRuntimeAlive=function(){return V},f.wasmMemory=H,f.stackSave=dt,f.stackRestore=at,f.stackAlloc=pt,f.ExitStatus=De,f.PThread=Pe,xe=function G(){it||Ft(),it||(xe=G)},f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);0<f.preInit.length;)f.preInit.pop()();return Ft(),s.ready});n.exports=o},932:(n,t,r)=>{var a,o=(a=(a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(s){var l,u,d;s=s||{},l||(l=s!==void 0?s:{}),l.ready=new Promise(function(K,le){u=K,d=le});var v,g,f,c,y,_,b=Object.assign({},l),S="./this.program",x=(K,le)=>{throw le},w=typeof window=="object",T=typeof importScripts=="function",A=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",E="";A?(E=T?r(908).dirname(E)+"/":"//",_=()=>{y||(c=r(1384),y=r(908))},v=function(K,le){return _(),K=y.normalize(K),c.readFileSync(K,le?void 0:"utf8")},f=K=>((K=v(K,!0)).buffer||(K=new Uint8Array(K)),K),g=(K,le,ve)=>{_(),K=y.normalize(K),c.readFile(K,function(ye,Te){ye?ve(ye):le(Te.buffer)})},1<process.argv.length&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(K){if(!(K instanceof Z))throw K}),process.on("unhandledRejection",function(K){throw K}),x=(K,le)=>{if(C)throw process.exitCode=K,le;le instanceof Z||I("exiting due to exception: "+le),process.exit(K)},l.inspect=function(){return"[Emscripten Module object]"}):(w||T)&&(T?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),a&&(E=a),E=E.indexOf("blob:")!==0?E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v=K=>{var le=new XMLHttpRequest;return le.open("GET",K,!1),le.send(null),le.responseText},T&&(f=K=>{var le=new XMLHttpRequest;return le.open("GET",K,!1),le.responseType="arraybuffer",le.send(null),new Uint8Array(le.response)}),g=(K,le,ve)=>{var ye=new XMLHttpRequest;ye.open("GET",K,!0),ye.responseType="arraybuffer",ye.onload=()=>{ye.status==200||ye.status==0&&ye.response?le(ye.response):ve()},ye.onerror=ve,ye.send(null)});var $,P=l.print||console.log.bind(console),I=l.printErr||console.warn.bind(console);Object.assign(l,b),b=null,l.thisProgram&&(S=l.thisProgram),l.quit&&(x=l.quit),l.wasmBinary&&($=l.wasmBinary);var C=l.noExitRuntime||!0;typeof WebAssembly!="object"&&oe("no native wasm support detected");var M,D,R,N,O,F,L=!1,B=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function V(K,le,ve){var ye=(le>>>=0)+ve;for(ve=le;K[ve]&&!(ve>=ye);)++ve;if(16<ve-le&&K.buffer&&B)return B.decode(K.subarray(le,ve));for(ye="";le<ve;){var Te=K[le++];if(128&Te){var Ae=63&K[le++];if((224&Te)==192)ye+=String.fromCharCode((31&Te)<<6|Ae);else{var Ie=63&K[le++];65536>(Te=(240&Te)==224?(15&Te)<<12|Ae<<6|Ie:(7&Te)<<18|Ae<<12|Ie<<6|63&K[le++])?ye+=String.fromCharCode(Te):(Te-=65536,ye+=String.fromCharCode(55296|Te>>10,56320|1023&Te))}}else ye+=String.fromCharCode(Te)}return ye}function H(K,le){return(K>>>=0)?V(N,K,le):""}function X(K,le,ve,ye){if(!(0<ye))return 0;var Te=ve>>>=0;ye=ve+ye-1;for(var Ae=0;Ae<K.length;++Ae){var Ie=K.charCodeAt(Ae);if(55296<=Ie&&57343>=Ie&&(Ie=65536+((1023&Ie)<<10)|1023&K.charCodeAt(++Ae)),127>=Ie){if(ve>=ye)break;le[ve++>>>0]=Ie}else{if(2047>=Ie){if(ve+1>=ye)break;le[ve++>>>0]=192|Ie>>6}else{if(65535>=Ie){if(ve+2>=ye)break;le[ve++>>>0]=224|Ie>>12}else{if(ve+3>=ye)break;le[ve++>>>0]=240|Ie>>18,le[ve++>>>0]=128|Ie>>12&63}le[ve++>>>0]=128|Ie>>6&63}le[ve++>>>0]=128|63&Ie}}return le[ve>>>0]=0,ve-Te}function U(K){for(var le=0,ve=0;ve<K.length;++ve){var ye=K.charCodeAt(ve);127>=ye?le++:2047>=ye?le+=2:55296<=ye&&57343>=ye?(le+=4,++ve):le+=3}return le}function te(){var K=M.buffer;D=K,l.HEAP8=R=new Int8Array(K),l.HEAP16=new Int16Array(K),l.HEAP32=O=new Int32Array(K),l.HEAPU8=N=new Uint8Array(K),l.HEAPU16=new Uint16Array(K),l.HEAPU32=F=new Uint32Array(K),l.HEAPF32=new Float32Array(K),l.HEAPF64=new Float64Array(K)}var ee=[],q=[],ie=[];function pe(){var K=l.preRun.shift();ee.unshift(K)}var j,Q=0,J=null;function oe(K){throw l.onAbort&&l.onAbort(K),I(K="Aborted("+K+")"),L=!0,K=new WebAssembly.RuntimeError(K+". Build with -sASSERTIONS for more info."),d(K),K}function ne(){return j.startsWith("data:application/octet-stream;base64,")}if(j="ort-wasm.wasm",!ne()){var z=j;j=l.locateFile?l.locateFile(z,E):E+z}function W(){var K=j;try{if(K==j&&$)return new Uint8Array($);if(f)return f(K);throw"both async and sync fetching of the wasm failed"}catch(le){oe(le)}}function Z(K){this.name="ExitStatus",this.message="Program terminated with exit("+K+")",this.status=K}function ae(K){for(;0<K.length;)K.shift()(l)}function se(K){this.sa=K-24,this.Ia=function(le){F[this.sa+4>>2>>>0]=le},this.Ba=function(le){F[this.sa+8>>2>>>0]=le},this.Ga=function(){O[this.sa>>2>>>0]=0},this.Aa=function(){R[this.sa+12>>0>>>0]=0},this.Ha=function(){R[this.sa+13>>0>>>0]=0},this.ya=function(le,ve){this.za(),this.Ia(le),this.Ba(ve),this.Ga(),this.Aa(),this.Ha()},this.za=function(){F[this.sa+16>>2>>>0]=0}}function ce(K){var le=U(K)+1,ve=De(le);return ve&&X(K,R,ve,le),ve}var _e={};function ge(){if(!me){var K,le={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"};for(K in _e)_e[K]===void 0?delete le[K]:le[K]=_e[K];var ve=[];for(K in le)ve.push(K+"="+le[K]);me=ve}return me}var me,de=[null,[],[]];function xe(K){return K%4==0&&(K%100!=0||K%400==0)}var be=[31,29,31,30,31,30,31,31,30,31,30,31],Ee=[31,28,31,30,31,30,31,31,30,31,30,31];function $e(K,le,ve,ye){function Te(fe,Re,Fe){for(fe=typeof fe=="number"?fe.toString():fe||"";fe.length<Re;)fe=Fe[0]+fe;return fe}function Ae(fe,Re){return Te(fe,Re,"0")}function Ie(fe,Re){function Fe(et){return 0>et?-1:0<et?1:0}var Xe;return(Xe=Fe(fe.getFullYear()-Re.getFullYear()))===0&&(Xe=Fe(fe.getMonth()-Re.getMonth()))===0&&(Xe=Fe(fe.getDate()-Re.getDate())),Xe}function ze(fe){switch(fe.getDay()){case 0:return new Date(fe.getFullYear()-1,11,29);case 1:return fe;case 2:return new Date(fe.getFullYear(),0,3);case 3:return new Date(fe.getFullYear(),0,2);case 4:return new Date(fe.getFullYear(),0,1);case 5:return new Date(fe.getFullYear()-1,11,31);case 6:return new Date(fe.getFullYear()-1,11,30)}}function We(fe){var Re=fe.qa;for(fe=new Date(new Date(fe.ra+1900,0,1).getTime());0<Re;){var Fe=fe.getMonth(),Xe=(xe(fe.getFullYear())?be:Ee)[Fe];if(!(Re>Xe-fe.getDate())){fe.setDate(fe.getDate()+Re);break}Re-=Xe-fe.getDate()+1,fe.setDate(1),11>Fe?fe.setMonth(Fe+1):(fe.setMonth(0),fe.setFullYear(fe.getFullYear()+1))}return Fe=new Date(fe.getFullYear()+1,0,4),Re=ze(new Date(fe.getFullYear(),0,4)),Fe=ze(Fe),0>=Ie(Re,fe)?0>=Ie(Fe,fe)?fe.getFullYear()+1:fe.getFullYear():fe.getFullYear()-1}var He=O[ye+40>>2>>>0];for(var Ve in ye={Ea:O[ye>>2>>>0],Da:O[ye+4>>2>>>0],ta:O[ye+8>>2>>>0],va:O[ye+12>>2>>>0],ua:O[ye+16>>2>>>0],ra:O[ye+20>>2>>>0],la:O[ye+24>>2>>>0],qa:O[ye+28>>2>>>0],Ja:O[ye+32>>2>>>0],Ca:O[ye+36>>2>>>0],Fa:He?H(He):""},ve=H(ve),He={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})ve=ve.replace(new RegExp(Ve,"g"),He[Ve]);var Ze="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ke="January February March April May June July August September October November December".split(" ");for(Ve in He={"%a":function(fe){return Ze[fe.la].substring(0,3)},"%A":function(fe){return Ze[fe.la]},"%b":function(fe){return Ke[fe.ua].substring(0,3)},"%B":function(fe){return Ke[fe.ua]},"%C":function(fe){return Ae((fe.ra+1900)/100|0,2)},"%d":function(fe){return Ae(fe.va,2)},"%e":function(fe){return Te(fe.va,2," ")},"%g":function(fe){return We(fe).toString().substring(2)},"%G":function(fe){return We(fe)},"%H":function(fe){return Ae(fe.ta,2)},"%I":function(fe){return(fe=fe.ta)==0?fe=12:12<fe&&(fe-=12),Ae(fe,2)},"%j":function(fe){for(var Re=0,Fe=0;Fe<=fe.ua-1;Re+=(xe(fe.ra+1900)?be:Ee)[Fe++]);return Ae(fe.va+Re,3)},"%m":function(fe){return Ae(fe.ua+1,2)},"%M":function(fe){return Ae(fe.Da,2)},"%n":function(){return`
`},"%p":function(fe){return 0<=fe.ta&&12>fe.ta?"AM":"PM"},"%S":function(fe){return Ae(fe.Ea,2)},"%t":function(){return"	"},"%u":function(fe){return fe.la||7},"%U":function(fe){return Ae(Math.floor((fe.qa+7-fe.la)/7),2)},"%V":function(fe){var Re=Math.floor((fe.qa+7-(fe.la+6)%7)/7);if(2>=(fe.la+371-fe.qa-2)%7&&Re++,Re)Re==53&&((Fe=(fe.la+371-fe.qa)%7)==4||Fe==3&&xe(fe.ra)||(Re=1));else{Re=52;var Fe=(fe.la+7-fe.qa-1)%7;(Fe==4||Fe==5&&xe(fe.ra%400-1))&&Re++}return Ae(Re,2)},"%w":function(fe){return fe.la},"%W":function(fe){return Ae(Math.floor((fe.qa+7-(fe.la+6)%7)/7),2)},"%y":function(fe){return(fe.ra+1900).toString().substring(2)},"%Y":function(fe){return fe.ra+1900},"%z":function(fe){var Re=0<=(fe=fe.Ca);return fe=Math.abs(fe)/60,(Re?"+":"-")+("0000"+(fe/60*100+fe%60)).slice(-4)},"%Z":function(fe){return fe.Fa},"%%":function(){return"%"}},ve=ve.replace(/%%/g,"\0\0"),He)ve.includes(Ve)&&(ve=ve.replace(new RegExp(Ve,"g"),He[Ve](ye)));return Ve=function(fe){var Re=Array(U(fe)+1);return X(fe,Re,0,Re.length),Re}(ve=ve.replace(/\0\0/g,"%")),Ve.length>le?0:(R.set(Ve,K>>>0),Ve.length-1)}var Ce={a:function(K){return De(K+24)+24},b:function(K,le,ve){throw new se(K).ya(le,ve),K},g:function(){return 0},I:function(){},w:function(){},y:function(){},K:function(){return 0},G:function(){},C:function(){},F:function(){},k:function(){},x:function(){},u:function(){},H:function(){},v:function(){},n:function(){},p:function(){oe("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},o:function(){oe("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(){return Date.now()},L:function(){return!0},M:function(K,le){K=new Date(1e3*(F[K>>>2]+4294967296*O[K+4>>>2])),O[le>>2>>>0]=K.getUTCSeconds(),O[le+4>>2>>>0]=K.getUTCMinutes(),O[le+8>>2>>>0]=K.getUTCHours(),O[le+12>>2>>>0]=K.getUTCDate(),O[le+16>>2>>>0]=K.getUTCMonth(),O[le+20>>2>>>0]=K.getUTCFullYear()-1900,O[le+24>>2>>>0]=K.getUTCDay(),O[le+28>>2>>>0]=(K.getTime()-Date.UTC(K.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},N:function(K,le){K=new Date(1e3*(F[K>>>2]+4294967296*O[K+4>>>2])),O[le>>2>>>0]=K.getSeconds(),O[le+4>>2>>>0]=K.getMinutes(),O[le+8>>2>>>0]=K.getHours(),O[le+12>>2>>>0]=K.getDate(),O[le+16>>2>>>0]=K.getMonth(),O[le+20>>2>>>0]=K.getFullYear()-1900,O[le+24>>2>>>0]=K.getDay();var ve=new Date(K.getFullYear(),0,1);O[le+28>>2>>>0]=(K.getTime()-ve.getTime())/864e5|0,O[le+36>>2>>>0]=-60*K.getTimezoneOffset();var ye=new Date(K.getFullYear(),6,1).getTimezoneOffset();ve=ve.getTimezoneOffset(),O[le+32>>2>>>0]=0|(ye!=ve&&K.getTimezoneOffset()==Math.min(ve,ye))},O:function(K){var le=new Date(O[K+20>>2>>>0]+1900,O[K+16>>2>>>0],O[K+12>>2>>>0],O[K+8>>2>>>0],O[K+4>>2>>>0],O[K>>2>>>0],0),ve=O[K+32>>2>>>0],ye=le.getTimezoneOffset(),Te=new Date(le.getFullYear(),0,1),Ae=new Date(le.getFullYear(),6,1).getTimezoneOffset(),Ie=Te.getTimezoneOffset(),ze=Math.min(Ie,Ae);return 0>ve?O[K+32>>2>>>0]=+(Ae!=Ie&&ze==ye):0<ve!=(ze==ye)&&(Ae=Math.max(Ie,Ae),le.setTime(le.getTime()+6e4*((0<ve?ze:Ae)-ye))),O[K+24>>2>>>0]=le.getDay(),O[K+28>>2>>>0]=(le.getTime()-Te.getTime())/864e5|0,O[K>>2>>>0]=le.getSeconds(),O[K+4>>2>>>0]=le.getMinutes(),O[K+8>>2>>>0]=le.getHours(),O[K+12>>2>>>0]=le.getDate(),O[K+16>>2>>>0]=le.getMonth(),le.getTime()/1e3|0},z:function(){return-52},B:function(){},m:function K(le,ve,ye){K.xa||(K.xa=!0,function(Te,Ae,Ie){function ze(Ke){return(Ke=Ke.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Ke[1]:"GMT"}var We=new Date().getFullYear(),He=new Date(We,0,1),Ve=new Date(We,6,1);We=He.getTimezoneOffset();var Ze=Ve.getTimezoneOffset();O[Te>>2>>>0]=60*Math.max(We,Ze),O[Ae>>2>>>0]=+(We!=Ze),Te=ze(He),Ae=ze(Ve),Te=ce(Te),Ae=ce(Ae),Ze<We?(F[Ie>>2>>>0]=Te,F[Ie+4>>2>>>0]=Ae):(F[Ie>>2>>>0]=Ae,F[Ie+4>>2>>>0]=Te)}(le,ve,ye))},d:function(){oe("")},t:function(){return 4294901760},h:A?()=>{var K=process.hrtime();return 1e3*K[0]+K[1]/1e6}:()=>performance.now(),J:function(K,le,ve){N.copyWithin(K>>>0,le>>>0,le+ve>>>0)},f:function(K){var le=N.length;if(4294901760<(K>>>=0))return!1;for(var ve=1;4>=ve;ve*=2){var ye=le*(1+.2/ve);ye=Math.min(ye,K+100663296);var Te=Math;ye=Math.max(K,ye),Te=Te.min.call(Te,4294901760,ye+(65536-ye%65536)%65536);e:{try{M.grow(Te-D.byteLength+65535>>>16),te();var Ae=1;break e}catch{}Ae=void 0}if(Ae)return!0}return!1},D:function(K,le){var ve=0;return ge().forEach(function(ye,Te){var Ae=le+ve;for(Te=F[K+4*Te>>2>>>0]=Ae,Ae=0;Ae<ye.length;++Ae)R[Te++>>0>>>0]=ye.charCodeAt(Ae);R[Te>>0>>>0]=0,ve+=ye.length+1}),0},E:function(K,le){var ve=ge();F[K>>2>>>0]=ve.length;var ye=0;return ve.forEach(function(Te){ye+=Te.length+1}),F[le>>2>>>0]=ye,0},r:function(K){C||(l.onExit&&l.onExit(K),L=!0),x(K,new Z(K))},e:function(){return 52},j:function(){return 52},q:function(){return 70},i:function(K,le,ve,ye){for(var Te=0,Ae=0;Ae<ve;Ae++){var Ie=F[le>>2>>>0],ze=F[le+4>>2>>>0];le+=8;for(var We=0;We<ze;We++){var He=N[Ie+We>>>0],Ve=de[K];He===0||He===10?((K===1?P:I)(V(Ve,0)),Ve.length=0):Ve.push(He)}Te+=ze}return F[ye>>2>>>0]=Te,0},s:function K(le,ve){K.wa||(K.wa=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Te=new Uint8Array(1);return()=>(crypto.getRandomValues(Te),Te[0])}if(A)try{var Ae=r(760);return()=>Ae.randomBytes(1)[0]}catch{}return()=>oe("randomDevice")}());for(var ye=0;ye<ve;ye++)R[le+ye>>0>>>0]=K.wa();return 0},A:$e,c:function(K,le,ve,ye){return $e(K,le,ve,ye)}};(function(){function K(Te){l.asm=Te.exports,M=l.asm.P,te(),q.unshift(l.asm.Q),Q--,l.monitorRunDependencies&&l.monitorRunDependencies(Q),Q==0&&J&&(Te=J,J=null,Te())}function le(Te){K(Te.instance)}function ve(Te){return function(){if(!$&&(w||T)){if(typeof fetch=="function"&&!j.startsWith("file://"))return fetch(j,{credentials:"same-origin"}).then(function(Ae){if(!Ae.ok)throw"failed to load wasm binary file at '"+j+"'";return Ae.arrayBuffer()}).catch(function(){return W()});if(g)return new Promise(function(Ae,Ie){g(j,function(ze){Ae(new Uint8Array(ze))},Ie)})}return Promise.resolve().then(function(){return W()})}().then(function(Ae){return WebAssembly.instantiate(Ae,ye)}).then(function(Ae){return Ae}).then(Te,function(Ae){I("failed to asynchronously prepare wasm: "+Ae),oe(Ae)})}var ye={a:Ce};if(Q++,l.monitorRunDependencies&&l.monitorRunDependencies(Q),l.instantiateWasm)try{return l.instantiateWasm(ye,K)}catch(Te){return I("Module.instantiateWasm callback failed with error: "+Te),!1}($||typeof WebAssembly.instantiateStreaming!="function"||ne()||j.startsWith("file://")||A||typeof fetch!="function"?ve(le):fetch(j,{credentials:"same-origin"}).then(function(Te){return WebAssembly.instantiateStreaming(Te,ye).then(le,function(Ae){return I("wasm streaming compile failed: "+Ae),I("falling back to ArrayBuffer instantiation"),ve(le)})})).catch(d)})(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.Q).apply(null,arguments)},l._OrtInit=function(){return(l._OrtInit=l.asm.R).apply(null,arguments)},l._OrtCreateSessionOptions=function(){return(l._OrtCreateSessionOptions=l.asm.S).apply(null,arguments)},l._OrtAppendExecutionProvider=function(){return(l._OrtAppendExecutionProvider=l.asm.T).apply(null,arguments)},l._OrtAddSessionConfigEntry=function(){return(l._OrtAddSessionConfigEntry=l.asm.U).apply(null,arguments)},l._OrtReleaseSessionOptions=function(){return(l._OrtReleaseSessionOptions=l.asm.V).apply(null,arguments)},l._OrtCreateSession=function(){return(l._OrtCreateSession=l.asm.W).apply(null,arguments)},l._OrtReleaseSession=function(){return(l._OrtReleaseSession=l.asm.X).apply(null,arguments)},l._OrtGetInputCount=function(){return(l._OrtGetInputCount=l.asm.Y).apply(null,arguments)},l._OrtGetOutputCount=function(){return(l._OrtGetOutputCount=l.asm.Z).apply(null,arguments)},l._OrtGetInputName=function(){return(l._OrtGetInputName=l.asm._).apply(null,arguments)},l._OrtGetOutputName=function(){return(l._OrtGetOutputName=l.asm.$).apply(null,arguments)},l._OrtFree=function(){return(l._OrtFree=l.asm.aa).apply(null,arguments)},l._OrtCreateTensor=function(){return(l._OrtCreateTensor=l.asm.ba).apply(null,arguments)},l._OrtGetTensorData=function(){return(l._OrtGetTensorData=l.asm.ca).apply(null,arguments)},l._OrtReleaseTensor=function(){return(l._OrtReleaseTensor=l.asm.da).apply(null,arguments)},l._OrtCreateRunOptions=function(){return(l._OrtCreateRunOptions=l.asm.ea).apply(null,arguments)},l._OrtAddRunConfigEntry=function(){return(l._OrtAddRunConfigEntry=l.asm.fa).apply(null,arguments)},l._OrtReleaseRunOptions=function(){return(l._OrtReleaseRunOptions=l.asm.ga).apply(null,arguments)},l._OrtRun=function(){return(l._OrtRun=l.asm.ha).apply(null,arguments)},l._OrtEndProfiling=function(){return(l._OrtEndProfiling=l.asm.ia).apply(null,arguments)};var De=l._malloc=function(){return(De=l._malloc=l.asm.ja).apply(null,arguments)};l._free=function(){return(l._free=l.asm.ka).apply(null,arguments)};var Oe,Ne=l.stackSave=function(){return(Ne=l.stackSave=l.asm.ma).apply(null,arguments)},Ge=l.stackRestore=function(){return(Ge=l.stackRestore=l.asm.na).apply(null,arguments)},qe=l.stackAlloc=function(){return(qe=l.stackAlloc=l.asm.oa).apply(null,arguments)};function Pe(){function K(){if(!Oe&&(Oe=!0,l.calledRun=!0,!L)){if(ae(q),u(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;){var le=l.postRun.shift();ie.unshift(le)}ae(ie)}}if(!(0<Q)){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)pe();ae(ee),0<Q||(l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),K()},1)):K())}}if(l.___cxa_is_pointer_type=function(){return(l.___cxa_is_pointer_type=l.asm.pa).apply(null,arguments)},l.UTF8ToString=H,l.stringToUTF8=function(K,le,ve){return X(K,N,le,ve)},l.lengthBytesUTF8=U,l.stackSave=Ne,l.stackRestore=Ge,l.stackAlloc=qe,J=function K(){Oe||Pe(),Oe||(J=K)},l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);0<l.preInit.length;)l.preInit.pop()();return Pe(),s.ready});n.exports=o},4537:n=>{n.exports=function(t,r){for(var a=new Array(arguments.length-1),o=0,s=2,l=!0;s<arguments.length;)a[o++]=arguments[s++];return new Promise(function(u,d){a[o]=function(v){if(l)if(l=!1,v)d(v);else{for(var g=new Array(arguments.length-1),f=0;f<g.length;)g[f++]=arguments[f];u.apply(null,g)}};try{t.apply(r||null,a)}catch(v){l&&(l=!1,d(v))}})}},7419:(n,t)=>{var r=t;r.length=function(u){var d=u.length;if(!d)return 0;for(var v=0;--d%4>1&&u.charAt(d)==="=";)++v;return Math.ceil(3*u.length)/4-v};for(var a=new Array(64),o=new Array(123),s=0;s<64;)o[a[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(u,d,v){for(var g,f=null,c=[],y=0,_=0;d<v;){var b=u[d++];switch(_){case 0:c[y++]=a[b>>2],g=(3&b)<<4,_=1;break;case 1:c[y++]=a[g|b>>4],g=(15&b)<<2,_=2;break;case 2:c[y++]=a[g|b>>6],c[y++]=a[63&b],_=0}y>8191&&((f||(f=[])).push(String.fromCharCode.apply(String,c)),y=0)}return _&&(c[y++]=a[g],c[y++]=61,_===1&&(c[y++]=61)),f?(y&&f.push(String.fromCharCode.apply(String,c.slice(0,y))),f.join("")):String.fromCharCode.apply(String,c.slice(0,y))};var l="invalid encoding";r.decode=function(u,d,v){for(var g,f=v,c=0,y=0;y<u.length;){var _=u.charCodeAt(y++);if(_===61&&c>1)break;if((_=o[_])===void 0)throw Error(l);switch(c){case 0:g=_,c=1;break;case 1:d[v++]=g<<2|(48&_)>>4,g=_,c=2;break;case 2:d[v++]=(15&g)<<4|(60&_)>>2,g=_,c=3;break;case 3:d[v++]=(3&g)<<6|_,c=0}}if(c===1)throw Error(l);return v-f},r.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}},9211:n=>{function t(){this._listeners={}}n.exports=t,t.prototype.on=function(r,a,o){return(this._listeners[r]||(this._listeners[r]=[])).push({fn:a,ctx:o||this}),this},t.prototype.off=function(r,a){if(r===void 0)this._listeners={};else if(a===void 0)this._listeners[r]=[];else for(var o=this._listeners[r],s=0;s<o.length;)o[s].fn===a?o.splice(s,1):++s;return this},t.prototype.emit=function(r){var a=this._listeners[r];if(a){for(var o=[],s=1;s<arguments.length;)o.push(arguments[s++]);for(s=0;s<a.length;)a[s].fn.apply(a[s++].ctx,o)}return this}},945:n=>{function t(l){return typeof Float32Array<"u"?function(){var u=new Float32Array([-0]),d=new Uint8Array(u.buffer),v=d[3]===128;function g(_,b,S){u[0]=_,b[S]=d[0],b[S+1]=d[1],b[S+2]=d[2],b[S+3]=d[3]}function f(_,b,S){u[0]=_,b[S]=d[3],b[S+1]=d[2],b[S+2]=d[1],b[S+3]=d[0]}function c(_,b){return d[0]=_[b],d[1]=_[b+1],d[2]=_[b+2],d[3]=_[b+3],u[0]}function y(_,b){return d[3]=_[b],d[2]=_[b+1],d[1]=_[b+2],d[0]=_[b+3],u[0]}l.writeFloatLE=v?g:f,l.writeFloatBE=v?f:g,l.readFloatLE=v?c:y,l.readFloatBE=v?y:c}():function(){function u(v,g,f,c){var y=g<0?1:0;if(y&&(g=-g),g===0)v(1/g>0?0:2147483648,f,c);else if(isNaN(g))v(2143289344,f,c);else if(g>34028234663852886e22)v((y<<31|2139095040)>>>0,f,c);else if(g<11754943508222875e-54)v((y<<31|Math.round(g/1401298464324817e-60))>>>0,f,c);else{var _=Math.floor(Math.log(g)/Math.LN2);v((y<<31|_+127<<23|8388607&Math.round(g*Math.pow(2,-_)*8388608))>>>0,f,c)}}function d(v,g,f){var c=v(g,f),y=2*(c>>31)+1,_=c>>>23&255,b=8388607&c;return _===255?b?NaN:y*(1/0):_===0?1401298464324817e-60*y*b:y*Math.pow(2,_-150)*(b+8388608)}l.writeFloatLE=u.bind(null,r),l.writeFloatBE=u.bind(null,a),l.readFloatLE=d.bind(null,o),l.readFloatBE=d.bind(null,s)}(),typeof Float64Array<"u"?function(){var u=new Float64Array([-0]),d=new Uint8Array(u.buffer),v=d[7]===128;function g(_,b,S){u[0]=_,b[S]=d[0],b[S+1]=d[1],b[S+2]=d[2],b[S+3]=d[3],b[S+4]=d[4],b[S+5]=d[5],b[S+6]=d[6],b[S+7]=d[7]}function f(_,b,S){u[0]=_,b[S]=d[7],b[S+1]=d[6],b[S+2]=d[5],b[S+3]=d[4],b[S+4]=d[3],b[S+5]=d[2],b[S+6]=d[1],b[S+7]=d[0]}function c(_,b){return d[0]=_[b],d[1]=_[b+1],d[2]=_[b+2],d[3]=_[b+3],d[4]=_[b+4],d[5]=_[b+5],d[6]=_[b+6],d[7]=_[b+7],u[0]}function y(_,b){return d[7]=_[b],d[6]=_[b+1],d[5]=_[b+2],d[4]=_[b+3],d[3]=_[b+4],d[2]=_[b+5],d[1]=_[b+6],d[0]=_[b+7],u[0]}l.writeDoubleLE=v?g:f,l.writeDoubleBE=v?f:g,l.readDoubleLE=v?c:y,l.readDoubleBE=v?y:c}():function(){function u(v,g,f,c,y,_){var b=c<0?1:0;if(b&&(c=-c),c===0)v(0,y,_+g),v(1/c>0?0:2147483648,y,_+f);else if(isNaN(c))v(0,y,_+g),v(2146959360,y,_+f);else if(c>17976931348623157e292)v(0,y,_+g),v((b<<31|2146435072)>>>0,y,_+f);else{var S;if(c<22250738585072014e-324)v((S=c/5e-324)>>>0,y,_+g),v((b<<31|S/4294967296)>>>0,y,_+f);else{var x=Math.floor(Math.log(c)/Math.LN2);x===1024&&(x=1023),v(4503599627370496*(S=c*Math.pow(2,-x))>>>0,y,_+g),v((b<<31|x+1023<<20|1048576*S&1048575)>>>0,y,_+f)}}}function d(v,g,f,c,y){var _=v(c,y+g),b=v(c,y+f),S=2*(b>>31)+1,x=b>>>20&2047,w=4294967296*(1048575&b)+_;return x===2047?w?NaN:S*(1/0):x===0?5e-324*S*w:S*Math.pow(2,x-1075)*(w+4503599627370496)}l.writeDoubleLE=u.bind(null,r,0,4),l.writeDoubleBE=u.bind(null,a,4,0),l.readDoubleLE=d.bind(null,o,0,4),l.readDoubleBE=d.bind(null,s,4,0)}(),l}function r(l,u,d){u[d]=255&l,u[d+1]=l>>>8&255,u[d+2]=l>>>16&255,u[d+3]=l>>>24}function a(l,u,d){u[d]=l>>>24,u[d+1]=l>>>16&255,u[d+2]=l>>>8&255,u[d+3]=255&l}function o(l,u){return(l[u]|l[u+1]<<8|l[u+2]<<16|l[u+3]<<24)>>>0}function s(l,u){return(l[u]<<24|l[u+1]<<16|l[u+2]<<8|l[u+3])>>>0}n.exports=t(t)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}module.exports=inquire},6662:n=>{n.exports=function(t,r,a){var o=a||8192,s=o>>>1,l=null,u=o;return function(d){if(d<1||d>s)return t(d);u+d>o&&(l=t(o),u=0);var v=r.call(l,u,u+=d);return 7&u&&(u=1+(7|u)),v}}},4997:(n,t)=>{var r=t;r.length=function(a){for(var o=0,s=0,l=0;l<a.length;++l)(s=a.charCodeAt(l))<128?o+=1:s<2048?o+=2:(64512&s)==55296&&(64512&a.charCodeAt(l+1))==56320?(++l,o+=4):o+=3;return o},r.read=function(a,o,s){if(s-o<1)return"";for(var l,u=null,d=[],v=0;o<s;)(l=a[o++])<128?d[v++]=l:l>191&&l<224?d[v++]=(31&l)<<6|63&a[o++]:l>239&&l<365?(l=((7&l)<<18|(63&a[o++])<<12|(63&a[o++])<<6|63&a[o++])-65536,d[v++]=55296+(l>>10),d[v++]=56320+(1023&l)):d[v++]=(15&l)<<12|(63&a[o++])<<6|63&a[o++],v>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,d)),v=0);return u?(v&&u.push(String.fromCharCode.apply(String,d.slice(0,v))),u.join("")):String.fromCharCode.apply(String,d.slice(0,v))},r.write=function(a,o,s){for(var l,u,d=s,v=0;v<a.length;++v)(l=a.charCodeAt(v))<128?o[s++]=l:l<2048?(o[s++]=l>>6|192,o[s++]=63&l|128):(64512&l)==55296&&(64512&(u=a.charCodeAt(v+1)))==56320?(l=65536+((1023&l)<<10)+(1023&u),++v,o[s++]=l>>18|240,o[s++]=l>>12&63|128,o[s++]=l>>6&63|128,o[s++]=63&l|128):(o[s++]=l>>12|224,o[s++]=l>>6&63|128,o[s++]=63&l|128);return s-d}},3442:(n,t)=>{t.__esModule=!0;var r=function(){function a(o){if(!o)throw new TypeError("Invalid argument; `value` has no value.");this.value=a.EMPTY,o&&a.isGuid(o)&&(this.value=o)}return a.isGuid=function(o){var s=o.toString();return o&&(o instanceof a||a.validator.test(s))},a.create=function(){return new a([a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-"))},a.createEmpty=function(){return new a("emptyguid")},a.parse=function(o){return new a(o)},a.raw=function(){return[a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-")},a.gen=function(o){for(var s="",l=0;l<o;l++)s+=(65536*(1+Math.random())|0).toString(16).substring(1);return s},a.prototype.equals=function(o){return a.isGuid(o)&&this.value===o.toString()},a.prototype.isEmpty=function(){return this.value===a.EMPTY},a.prototype.toString=function(){return this.value},a.prototype.toJSON=function(){return{value:this.value}},a.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),a.EMPTY="00000000-0000-0000-0000-000000000000",a}();t.Guid=r},3720:n=>{n.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(C,M,D){this.low=0|C,this.high=0|M,this.unsigned=!!D}function a(C){return(C&&C.__isLong__)===!0}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var o={},s={};function l(C,M){var D,R,N;return M?(N=0<=(C>>>=0)&&C<256)&&(R=s[C])?R:(D=d(C,(0|C)<0?-1:0,!0),N&&(s[C]=D),D):(N=-128<=(C|=0)&&C<128)&&(R=o[C])?R:(D=d(C,C<0?-1:0,!1),N&&(o[C]=D),D)}function u(C,M){if(isNaN(C))return M?x:S;if(M){if(C<0)return x;if(C>=y)return $}else{if(C<=-_)return P;if(C+1>=_)return E}return C<0?u(-C,M).neg():d(C%c|0,C/c|0,M)}function d(C,M,D){return new r(C,M,D)}r.fromInt=l,r.fromNumber=u,r.fromBits=d;var v=Math.pow;function g(C,M,D){if(C.length===0)throw Error("empty string");if(C==="NaN"||C==="Infinity"||C==="+Infinity"||C==="-Infinity")return S;if(typeof M=="number"?(D=M,M=!1):M=!!M,(D=D||10)<2||36<D)throw RangeError("radix");var R;if((R=C.indexOf("-"))>0)throw Error("interior hyphen");if(R===0)return g(C.substring(1),M,D).neg();for(var N=u(v(D,8)),O=S,F=0;F<C.length;F+=8){var L=Math.min(8,C.length-F),B=parseInt(C.substring(F,F+L),D);if(L<8){var V=u(v(D,L));O=O.mul(V).add(u(B))}else O=(O=O.mul(N)).add(u(B))}return O.unsigned=M,O}function f(C,M){return typeof C=="number"?u(C,M):typeof C=="string"?g(C,M):d(C.low,C.high,typeof M=="boolean"?M:C.unsigned)}r.fromString=g,r.fromValue=f;var c=4294967296,y=c*c,_=y/2,b=l(1<<24),S=l(0);r.ZERO=S;var x=l(0,!0);r.UZERO=x;var w=l(1);r.ONE=w;var T=l(1,!0);r.UONE=T;var A=l(-1);r.NEG_ONE=A;var E=d(-1,2147483647,!1);r.MAX_VALUE=E;var $=d(-1,-1,!0);r.MAX_UNSIGNED_VALUE=$;var P=d(0,-2147483648,!1);r.MIN_VALUE=P;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*c+(this.low>>>0):this.high*c+(this.low>>>0)},I.toString=function(C){if((C=C||10)<2||36<C)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(P)){var M=u(C),D=this.div(M),R=D.mul(M).sub(this);return D.toString(C)+R.toInt().toString(C)}return"-"+this.neg().toString(C)}for(var N=u(v(C,6),this.unsigned),O=this,F="";;){var L=O.div(N),B=(O.sub(L.mul(N)).toInt()>>>0).toString(C);if((O=L).isZero())return B+F;for(;B.length<6;)B="0"+B;F=""+B+F}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(P)?64:this.neg().getNumBitsAbs();for(var C=this.high!=0?this.high:this.low,M=31;M>0&&!(C&1<<M);M--);return this.high!=0?M+33:M+1},I.isZero=function(){return this.high===0&&this.low===0},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return(1&this.low)==1},I.isEven=function(){return(1&this.low)==0},I.equals=function(C){return a(C)||(C=f(C)),(this.unsigned===C.unsigned||this.high>>>31!=1||C.high>>>31!=1)&&this.high===C.high&&this.low===C.low},I.eq=I.equals,I.notEquals=function(C){return!this.eq(C)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(C){return this.comp(C)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(C){return this.comp(C)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(C){return this.comp(C)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(C){return this.comp(C)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(C){if(a(C)||(C=f(C)),this.eq(C))return 0;var M=this.isNegative(),D=C.isNegative();return M&&!D?-1:!M&&D?1:this.unsigned?C.high>>>0>this.high>>>0||C.high===this.high&&C.low>>>0>this.low>>>0?-1:1:this.sub(C).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(P)?P:this.not().add(w)},I.neg=I.negate,I.add=function(C){a(C)||(C=f(C));var M=this.high>>>16,D=65535&this.high,R=this.low>>>16,N=65535&this.low,O=C.high>>>16,F=65535&C.high,L=C.low>>>16,B=0,V=0,H=0,X=0;return H+=(X+=N+(65535&C.low))>>>16,V+=(H+=R+L)>>>16,B+=(V+=D+F)>>>16,B+=M+O,d((H&=65535)<<16|(X&=65535),(B&=65535)<<16|(V&=65535),this.unsigned)},I.subtract=function(C){return a(C)||(C=f(C)),this.add(C.neg())},I.sub=I.subtract,I.multiply=function(C){if(this.isZero())return S;if(a(C)||(C=f(C)),t)return d(t.mul(this.low,this.high,C.low,C.high),t.get_high(),this.unsigned);if(C.isZero())return S;if(this.eq(P))return C.isOdd()?P:S;if(C.eq(P))return this.isOdd()?P:S;if(this.isNegative())return C.isNegative()?this.neg().mul(C.neg()):this.neg().mul(C).neg();if(C.isNegative())return this.mul(C.neg()).neg();if(this.lt(b)&&C.lt(b))return u(this.toNumber()*C.toNumber(),this.unsigned);var M=this.high>>>16,D=65535&this.high,R=this.low>>>16,N=65535&this.low,O=C.high>>>16,F=65535&C.high,L=C.low>>>16,B=65535&C.low,V=0,H=0,X=0,U=0;return X+=(U+=N*B)>>>16,H+=(X+=R*B)>>>16,X&=65535,H+=(X+=N*L)>>>16,V+=(H+=D*B)>>>16,H&=65535,V+=(H+=R*L)>>>16,H&=65535,V+=(H+=N*F)>>>16,V+=M*B+D*L+R*F+N*O,d((X&=65535)<<16|(U&=65535),(V&=65535)<<16|(H&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(C){if(a(C)||(C=f(C)),C.isZero())throw Error("division by zero");var M,D,R;if(t)return this.unsigned||this.high!==-2147483648||C.low!==-1||C.high!==-1?d((this.unsigned?t.div_u:t.div_s)(this.low,this.high,C.low,C.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?x:S;if(this.unsigned){if(C.unsigned||(C=C.toUnsigned()),C.gt(this))return x;if(C.gt(this.shru(1)))return T;R=x}else{if(this.eq(P))return C.eq(w)||C.eq(A)?P:C.eq(P)?w:(M=this.shr(1).div(C).shl(1)).eq(S)?C.isNegative()?w:A:(D=this.sub(C.mul(M)),R=M.add(D.div(C)));if(C.eq(P))return this.unsigned?x:S;if(this.isNegative())return C.isNegative()?this.neg().div(C.neg()):this.neg().div(C).neg();if(C.isNegative())return this.div(C.neg()).neg();R=S}for(D=this;D.gte(C);){M=Math.max(1,Math.floor(D.toNumber()/C.toNumber()));for(var N=Math.ceil(Math.log(M)/Math.LN2),O=N<=48?1:v(2,N-48),F=u(M),L=F.mul(C);L.isNegative()||L.gt(D);)L=(F=u(M-=O,this.unsigned)).mul(C);F.isZero()&&(F=w),R=R.add(F),D=D.sub(L)}return R},I.div=I.divide,I.modulo=function(C){return a(C)||(C=f(C)),t?d((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,C.low,C.high),t.get_high(),this.unsigned):this.sub(this.div(C).mul(C))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return d(~this.low,~this.high,this.unsigned)},I.and=function(C){return a(C)||(C=f(C)),d(this.low&C.low,this.high&C.high,this.unsigned)},I.or=function(C){return a(C)||(C=f(C)),d(this.low|C.low,this.high|C.high,this.unsigned)},I.xor=function(C){return a(C)||(C=f(C)),d(this.low^C.low,this.high^C.high,this.unsigned)},I.shiftLeft=function(C){return a(C)&&(C=C.toInt()),(C&=63)==0?this:C<32?d(this.low<<C,this.high<<C|this.low>>>32-C,this.unsigned):d(0,this.low<<C-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(C){return a(C)&&(C=C.toInt()),(C&=63)==0?this:C<32?d(this.low>>>C|this.high<<32-C,this.high>>C,this.unsigned):d(this.high>>C-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(C){if(a(C)&&(C=C.toInt()),(C&=63)==0)return this;var M=this.high;return C<32?d(this.low>>>C|M<<32-C,M>>>C,this.unsigned):d(C===32?M:M>>>C-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?d(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:d(this.low,this.high,!0)},I.toBytes=function(C){return C?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var C=this.high,M=this.low;return[255&M,M>>>8&255,M>>>16&255,M>>>24,255&C,C>>>8&255,C>>>16&255,C>>>24]},I.toBytesBE=function(){var C=this.high,M=this.low;return[C>>>24,C>>>16&255,C>>>8&255,255&C,M>>>24,M>>>16&255,M>>>8&255,255&M]},r.fromBytes=function(C,M,D){return D?r.fromBytesLE(C,M):r.fromBytesBE(C,M)},r.fromBytesLE=function(C,M){return new r(C[0]|C[1]<<8|C[2]<<16|C[3]<<24,C[4]|C[5]<<8|C[6]<<16|C[7]<<24,M)},r.fromBytesBE=function(C,M){return new r(C[4]<<24|C[5]<<16|C[6]<<8|C[7],C[0]<<24|C[1]<<16|C[2]<<8|C[3],M)}},1446:(n,t,r)=>{var a,o,s,l=r(2100),u=l.Reader,d=l.Writer,v=l.util,g=l.roots.default||(l.roots.default={});g.onnx=((s={}).Version=(a={},(o=Object.create(a))[a[0]="_START_VERSION"]=0,o[a[1]="IR_VERSION_2017_10_10"]=1,o[a[2]="IR_VERSION_2017_10_30"]=2,o[a[3]="IR_VERSION_2017_11_3"]=3,o[a[4]="IR_VERSION_2019_1_22"]=4,o[a[5]="IR_VERSION"]=5,o),s.AttributeProto=function(){function f(c){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.name="",f.prototype.refAttrName="",f.prototype.docString="",f.prototype.type=0,f.prototype.f=0,f.prototype.i=v.Long?v.Long.fromBits(0,0,!1):0,f.prototype.s=v.newBuffer([]),f.prototype.t=null,f.prototype.g=null,f.prototype.floats=v.emptyArray,f.prototype.ints=v.emptyArray,f.prototype.strings=v.emptyArray,f.prototype.tensors=v.emptyArray,f.prototype.graphs=v.emptyArray,f.create=function(c){return new f(c)},f.encode=function(c,y){if(y||(y=d.create()),c.name!=null&&c.hasOwnProperty("name")&&y.uint32(10).string(c.name),c.f!=null&&c.hasOwnProperty("f")&&y.uint32(21).float(c.f),c.i!=null&&c.hasOwnProperty("i")&&y.uint32(24).int64(c.i),c.s!=null&&c.hasOwnProperty("s")&&y.uint32(34).bytes(c.s),c.t!=null&&c.hasOwnProperty("t")&&g.onnx.TensorProto.encode(c.t,y.uint32(42).fork()).ldelim(),c.g!=null&&c.hasOwnProperty("g")&&g.onnx.GraphProto.encode(c.g,y.uint32(50).fork()).ldelim(),c.floats!=null&&c.floats.length){y.uint32(58).fork();for(var _=0;_<c.floats.length;++_)y.float(c.floats[_]);y.ldelim()}if(c.ints!=null&&c.ints.length){for(y.uint32(66).fork(),_=0;_<c.ints.length;++_)y.int64(c.ints[_]);y.ldelim()}if(c.strings!=null&&c.strings.length)for(_=0;_<c.strings.length;++_)y.uint32(74).bytes(c.strings[_]);if(c.tensors!=null&&c.tensors.length)for(_=0;_<c.tensors.length;++_)g.onnx.TensorProto.encode(c.tensors[_],y.uint32(82).fork()).ldelim();if(c.graphs!=null&&c.graphs.length)for(_=0;_<c.graphs.length;++_)g.onnx.GraphProto.encode(c.graphs[_],y.uint32(90).fork()).ldelim();return c.docString!=null&&c.hasOwnProperty("docString")&&y.uint32(106).string(c.docString),c.type!=null&&c.hasOwnProperty("type")&&y.uint32(160).int32(c.type),c.refAttrName!=null&&c.hasOwnProperty("refAttrName")&&y.uint32(170).string(c.refAttrName),y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.AttributeProto;c.pos<_;){var S=c.uint32();switch(S>>>3){case 1:b.name=c.string();break;case 21:b.refAttrName=c.string();break;case 13:b.docString=c.string();break;case 20:b.type=c.int32();break;case 2:b.f=c.float();break;case 3:b.i=c.int64();break;case 4:b.s=c.bytes();break;case 5:b.t=g.onnx.TensorProto.decode(c,c.uint32());break;case 6:b.g=g.onnx.GraphProto.decode(c,c.uint32());break;case 7:if(b.floats&&b.floats.length||(b.floats=[]),(7&S)==2)for(var x=c.uint32()+c.pos;c.pos<x;)b.floats.push(c.float());else b.floats.push(c.float());break;case 8:if(b.ints&&b.ints.length||(b.ints=[]),(7&S)==2)for(x=c.uint32()+c.pos;c.pos<x;)b.ints.push(c.int64());else b.ints.push(c.int64());break;case 9:b.strings&&b.strings.length||(b.strings=[]),b.strings.push(c.bytes());break;case 10:b.tensors&&b.tensors.length||(b.tensors=[]),b.tensors.push(g.onnx.TensorProto.decode(c,c.uint32()));break;case 11:b.graphs&&b.graphs.length||(b.graphs=[]),b.graphs.push(g.onnx.GraphProto.decode(c,c.uint32()));break;default:c.skipType(7&S)}}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!v.isString(c.name))return"name: string expected";if(c.refAttrName!=null&&c.hasOwnProperty("refAttrName")&&!v.isString(c.refAttrName))return"refAttrName: string expected";if(c.docString!=null&&c.hasOwnProperty("docString")&&!v.isString(c.docString))return"docString: string expected";if(c.type!=null&&c.hasOwnProperty("type"))switch(c.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(c.f!=null&&c.hasOwnProperty("f")&&typeof c.f!="number")return"f: number expected";if(c.i!=null&&c.hasOwnProperty("i")&&!(v.isInteger(c.i)||c.i&&v.isInteger(c.i.low)&&v.isInteger(c.i.high)))return"i: integer|Long expected";if(c.s!=null&&c.hasOwnProperty("s")&&!(c.s&&typeof c.s.length=="number"||v.isString(c.s)))return"s: buffer expected";if(c.t!=null&&c.hasOwnProperty("t")&&(_=g.onnx.TensorProto.verify(c.t)))return"t."+_;if(c.g!=null&&c.hasOwnProperty("g")&&(_=g.onnx.GraphProto.verify(c.g)))return"g."+_;if(c.floats!=null&&c.hasOwnProperty("floats")){if(!Array.isArray(c.floats))return"floats: array expected";for(var y=0;y<c.floats.length;++y)if(typeof c.floats[y]!="number")return"floats: number[] expected"}if(c.ints!=null&&c.hasOwnProperty("ints")){if(!Array.isArray(c.ints))return"ints: array expected";for(y=0;y<c.ints.length;++y)if(!(v.isInteger(c.ints[y])||c.ints[y]&&v.isInteger(c.ints[y].low)&&v.isInteger(c.ints[y].high)))return"ints: integer|Long[] expected"}if(c.strings!=null&&c.hasOwnProperty("strings")){if(!Array.isArray(c.strings))return"strings: array expected";for(y=0;y<c.strings.length;++y)if(!(c.strings[y]&&typeof c.strings[y].length=="number"||v.isString(c.strings[y])))return"strings: buffer[] expected"}if(c.tensors!=null&&c.hasOwnProperty("tensors")){if(!Array.isArray(c.tensors))return"tensors: array expected";for(y=0;y<c.tensors.length;++y)if(_=g.onnx.TensorProto.verify(c.tensors[y]))return"tensors."+_}if(c.graphs!=null&&c.hasOwnProperty("graphs")){if(!Array.isArray(c.graphs))return"graphs: array expected";for(y=0;y<c.graphs.length;++y){var _;if(_=g.onnx.GraphProto.verify(c.graphs[y]))return"graphs."+_}}return null},f.fromObject=function(c){if(c instanceof g.onnx.AttributeProto)return c;var y=new g.onnx.AttributeProto;switch(c.name!=null&&(y.name=String(c.name)),c.refAttrName!=null&&(y.refAttrName=String(c.refAttrName)),c.docString!=null&&(y.docString=String(c.docString)),c.type){case"UNDEFINED":case 0:y.type=0;break;case"FLOAT":case 1:y.type=1;break;case"INT":case 2:y.type=2;break;case"STRING":case 3:y.type=3;break;case"TENSOR":case 4:y.type=4;break;case"GRAPH":case 5:y.type=5;break;case"FLOATS":case 6:y.type=6;break;case"INTS":case 7:y.type=7;break;case"STRINGS":case 8:y.type=8;break;case"TENSORS":case 9:y.type=9;break;case"GRAPHS":case 10:y.type=10}if(c.f!=null&&(y.f=Number(c.f)),c.i!=null&&(v.Long?(y.i=v.Long.fromValue(c.i)).unsigned=!1:typeof c.i=="string"?y.i=parseInt(c.i,10):typeof c.i=="number"?y.i=c.i:typeof c.i=="object"&&(y.i=new v.LongBits(c.i.low>>>0,c.i.high>>>0).toNumber())),c.s!=null&&(typeof c.s=="string"?v.base64.decode(c.s,y.s=v.newBuffer(v.base64.length(c.s)),0):c.s.length&&(y.s=c.s)),c.t!=null){if(typeof c.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");y.t=g.onnx.TensorProto.fromObject(c.t)}if(c.g!=null){if(typeof c.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");y.g=g.onnx.GraphProto.fromObject(c.g)}if(c.floats){if(!Array.isArray(c.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");y.floats=[];for(var _=0;_<c.floats.length;++_)y.floats[_]=Number(c.floats[_])}if(c.ints){if(!Array.isArray(c.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(y.ints=[],_=0;_<c.ints.length;++_)v.Long?(y.ints[_]=v.Long.fromValue(c.ints[_])).unsigned=!1:typeof c.ints[_]=="string"?y.ints[_]=parseInt(c.ints[_],10):typeof c.ints[_]=="number"?y.ints[_]=c.ints[_]:typeof c.ints[_]=="object"&&(y.ints[_]=new v.LongBits(c.ints[_].low>>>0,c.ints[_].high>>>0).toNumber())}if(c.strings){if(!Array.isArray(c.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(y.strings=[],_=0;_<c.strings.length;++_)typeof c.strings[_]=="string"?v.base64.decode(c.strings[_],y.strings[_]=v.newBuffer(v.base64.length(c.strings[_])),0):c.strings[_].length&&(y.strings[_]=c.strings[_])}if(c.tensors){if(!Array.isArray(c.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(y.tensors=[],_=0;_<c.tensors.length;++_){if(typeof c.tensors[_]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");y.tensors[_]=g.onnx.TensorProto.fromObject(c.tensors[_])}}if(c.graphs){if(!Array.isArray(c.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(y.graphs=[],_=0;_<c.graphs.length;++_){if(typeof c.graphs[_]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");y.graphs[_]=g.onnx.GraphProto.fromObject(c.graphs[_])}}return y},f.toObject=function(c,y){y||(y={});var _={};if((y.arrays||y.defaults)&&(_.floats=[],_.ints=[],_.strings=[],_.tensors=[],_.graphs=[]),y.defaults){if(_.name="",_.f=0,v.Long){var b=new v.Long(0,0,!1);_.i=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else _.i=y.longs===String?"0":0;y.bytes===String?_.s="":(_.s=[],y.bytes!==Array&&(_.s=v.newBuffer(_.s))),_.t=null,_.g=null,_.docString="",_.type=y.enums===String?"UNDEFINED":0,_.refAttrName=""}if(c.name!=null&&c.hasOwnProperty("name")&&(_.name=c.name),c.f!=null&&c.hasOwnProperty("f")&&(_.f=y.json&&!isFinite(c.f)?String(c.f):c.f),c.i!=null&&c.hasOwnProperty("i")&&(typeof c.i=="number"?_.i=y.longs===String?String(c.i):c.i:_.i=y.longs===String?v.Long.prototype.toString.call(c.i):y.longs===Number?new v.LongBits(c.i.low>>>0,c.i.high>>>0).toNumber():c.i),c.s!=null&&c.hasOwnProperty("s")&&(_.s=y.bytes===String?v.base64.encode(c.s,0,c.s.length):y.bytes===Array?Array.prototype.slice.call(c.s):c.s),c.t!=null&&c.hasOwnProperty("t")&&(_.t=g.onnx.TensorProto.toObject(c.t,y)),c.g!=null&&c.hasOwnProperty("g")&&(_.g=g.onnx.GraphProto.toObject(c.g,y)),c.floats&&c.floats.length){_.floats=[];for(var S=0;S<c.floats.length;++S)_.floats[S]=y.json&&!isFinite(c.floats[S])?String(c.floats[S]):c.floats[S]}if(c.ints&&c.ints.length)for(_.ints=[],S=0;S<c.ints.length;++S)typeof c.ints[S]=="number"?_.ints[S]=y.longs===String?String(c.ints[S]):c.ints[S]:_.ints[S]=y.longs===String?v.Long.prototype.toString.call(c.ints[S]):y.longs===Number?new v.LongBits(c.ints[S].low>>>0,c.ints[S].high>>>0).toNumber():c.ints[S];if(c.strings&&c.strings.length)for(_.strings=[],S=0;S<c.strings.length;++S)_.strings[S]=y.bytes===String?v.base64.encode(c.strings[S],0,c.strings[S].length):y.bytes===Array?Array.prototype.slice.call(c.strings[S]):c.strings[S];if(c.tensors&&c.tensors.length)for(_.tensors=[],S=0;S<c.tensors.length;++S)_.tensors[S]=g.onnx.TensorProto.toObject(c.tensors[S],y);if(c.graphs&&c.graphs.length)for(_.graphs=[],S=0;S<c.graphs.length;++S)_.graphs[S]=g.onnx.GraphProto.toObject(c.graphs[S],y);return c.docString!=null&&c.hasOwnProperty("docString")&&(_.docString=c.docString),c.type!=null&&c.hasOwnProperty("type")&&(_.type=y.enums===String?g.onnx.AttributeProto.AttributeType[c.type]:c.type),c.refAttrName!=null&&c.hasOwnProperty("refAttrName")&&(_.refAttrName=c.refAttrName),_},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f.AttributeType=function(){var c={},y=Object.create(c);return y[c[0]="UNDEFINED"]=0,y[c[1]="FLOAT"]=1,y[c[2]="INT"]=2,y[c[3]="STRING"]=3,y[c[4]="TENSOR"]=4,y[c[5]="GRAPH"]=5,y[c[6]="FLOATS"]=6,y[c[7]="INTS"]=7,y[c[8]="STRINGS"]=8,y[c[9]="TENSORS"]=9,y[c[10]="GRAPHS"]=10,y}(),f}(),s.ValueInfoProto=function(){function f(c){if(c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.name="",f.prototype.type=null,f.prototype.docString="",f.create=function(c){return new f(c)},f.encode=function(c,y){return y||(y=d.create()),c.name!=null&&c.hasOwnProperty("name")&&y.uint32(10).string(c.name),c.type!=null&&c.hasOwnProperty("type")&&g.onnx.TypeProto.encode(c.type,y.uint32(18).fork()).ldelim(),c.docString!=null&&c.hasOwnProperty("docString")&&y.uint32(26).string(c.docString),y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.ValueInfoProto;c.pos<_;){var S=c.uint32();switch(S>>>3){case 1:b.name=c.string();break;case 2:b.type=g.onnx.TypeProto.decode(c,c.uint32());break;case 3:b.docString=c.string();break;default:c.skipType(7&S)}}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!v.isString(c.name))return"name: string expected";if(c.type!=null&&c.hasOwnProperty("type")){var y=g.onnx.TypeProto.verify(c.type);if(y)return"type."+y}return c.docString!=null&&c.hasOwnProperty("docString")&&!v.isString(c.docString)?"docString: string expected":null},f.fromObject=function(c){if(c instanceof g.onnx.ValueInfoProto)return c;var y=new g.onnx.ValueInfoProto;if(c.name!=null&&(y.name=String(c.name)),c.type!=null){if(typeof c.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");y.type=g.onnx.TypeProto.fromObject(c.type)}return c.docString!=null&&(y.docString=String(c.docString)),y},f.toObject=function(c,y){y||(y={});var _={};return y.defaults&&(_.name="",_.type=null,_.docString=""),c.name!=null&&c.hasOwnProperty("name")&&(_.name=c.name),c.type!=null&&c.hasOwnProperty("type")&&(_.type=g.onnx.TypeProto.toObject(c.type,y)),c.docString!=null&&c.hasOwnProperty("docString")&&(_.docString=c.docString),_},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f}(),s.NodeProto=function(){function f(c){if(this.input=[],this.output=[],this.attribute=[],c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.input=v.emptyArray,f.prototype.output=v.emptyArray,f.prototype.name="",f.prototype.opType="",f.prototype.domain="",f.prototype.attribute=v.emptyArray,f.prototype.docString="",f.create=function(c){return new f(c)},f.encode=function(c,y){if(y||(y=d.create()),c.input!=null&&c.input.length)for(var _=0;_<c.input.length;++_)y.uint32(10).string(c.input[_]);if(c.output!=null&&c.output.length)for(_=0;_<c.output.length;++_)y.uint32(18).string(c.output[_]);if(c.name!=null&&c.hasOwnProperty("name")&&y.uint32(26).string(c.name),c.opType!=null&&c.hasOwnProperty("opType")&&y.uint32(34).string(c.opType),c.attribute!=null&&c.attribute.length)for(_=0;_<c.attribute.length;++_)g.onnx.AttributeProto.encode(c.attribute[_],y.uint32(42).fork()).ldelim();return c.docString!=null&&c.hasOwnProperty("docString")&&y.uint32(50).string(c.docString),c.domain!=null&&c.hasOwnProperty("domain")&&y.uint32(58).string(c.domain),y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.NodeProto;c.pos<_;){var S=c.uint32();switch(S>>>3){case 1:b.input&&b.input.length||(b.input=[]),b.input.push(c.string());break;case 2:b.output&&b.output.length||(b.output=[]),b.output.push(c.string());break;case 3:b.name=c.string();break;case 4:b.opType=c.string();break;case 7:b.domain=c.string();break;case 5:b.attribute&&b.attribute.length||(b.attribute=[]),b.attribute.push(g.onnx.AttributeProto.decode(c,c.uint32()));break;case 6:b.docString=c.string();break;default:c.skipType(7&S)}}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.input!=null&&c.hasOwnProperty("input")){if(!Array.isArray(c.input))return"input: array expected";for(var y=0;y<c.input.length;++y)if(!v.isString(c.input[y]))return"input: string[] expected"}if(c.output!=null&&c.hasOwnProperty("output")){if(!Array.isArray(c.output))return"output: array expected";for(y=0;y<c.output.length;++y)if(!v.isString(c.output[y]))return"output: string[] expected"}if(c.name!=null&&c.hasOwnProperty("name")&&!v.isString(c.name))return"name: string expected";if(c.opType!=null&&c.hasOwnProperty("opType")&&!v.isString(c.opType))return"opType: string expected";if(c.domain!=null&&c.hasOwnProperty("domain")&&!v.isString(c.domain))return"domain: string expected";if(c.attribute!=null&&c.hasOwnProperty("attribute")){if(!Array.isArray(c.attribute))return"attribute: array expected";for(y=0;y<c.attribute.length;++y){var _=g.onnx.AttributeProto.verify(c.attribute[y]);if(_)return"attribute."+_}}return c.docString!=null&&c.hasOwnProperty("docString")&&!v.isString(c.docString)?"docString: string expected":null},f.fromObject=function(c){if(c instanceof g.onnx.NodeProto)return c;var y=new g.onnx.NodeProto;if(c.input){if(!Array.isArray(c.input))throw TypeError(".onnx.NodeProto.input: array expected");y.input=[];for(var _=0;_<c.input.length;++_)y.input[_]=String(c.input[_])}if(c.output){if(!Array.isArray(c.output))throw TypeError(".onnx.NodeProto.output: array expected");for(y.output=[],_=0;_<c.output.length;++_)y.output[_]=String(c.output[_])}if(c.name!=null&&(y.name=String(c.name)),c.opType!=null&&(y.opType=String(c.opType)),c.domain!=null&&(y.domain=String(c.domain)),c.attribute){if(!Array.isArray(c.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(y.attribute=[],_=0;_<c.attribute.length;++_){if(typeof c.attribute[_]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");y.attribute[_]=g.onnx.AttributeProto.fromObject(c.attribute[_])}}return c.docString!=null&&(y.docString=String(c.docString)),y},f.toObject=function(c,y){y||(y={});var _={};if((y.arrays||y.defaults)&&(_.input=[],_.output=[],_.attribute=[]),y.defaults&&(_.name="",_.opType="",_.docString="",_.domain=""),c.input&&c.input.length){_.input=[];for(var b=0;b<c.input.length;++b)_.input[b]=c.input[b]}if(c.output&&c.output.length)for(_.output=[],b=0;b<c.output.length;++b)_.output[b]=c.output[b];if(c.name!=null&&c.hasOwnProperty("name")&&(_.name=c.name),c.opType!=null&&c.hasOwnProperty("opType")&&(_.opType=c.opType),c.attribute&&c.attribute.length)for(_.attribute=[],b=0;b<c.attribute.length;++b)_.attribute[b]=g.onnx.AttributeProto.toObject(c.attribute[b],y);return c.docString!=null&&c.hasOwnProperty("docString")&&(_.docString=c.docString),c.domain!=null&&c.hasOwnProperty("domain")&&(_.domain=c.domain),_},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f}(),s.ModelProto=function(){function f(c){if(this.opsetImport=[],this.metadataProps=[],c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.irVersion=v.Long?v.Long.fromBits(0,0,!1):0,f.prototype.opsetImport=v.emptyArray,f.prototype.producerName="",f.prototype.producerVersion="",f.prototype.domain="",f.prototype.modelVersion=v.Long?v.Long.fromBits(0,0,!1):0,f.prototype.docString="",f.prototype.graph=null,f.prototype.metadataProps=v.emptyArray,f.create=function(c){return new f(c)},f.encode=function(c,y){if(y||(y=d.create()),c.irVersion!=null&&c.hasOwnProperty("irVersion")&&y.uint32(8).int64(c.irVersion),c.producerName!=null&&c.hasOwnProperty("producerName")&&y.uint32(18).string(c.producerName),c.producerVersion!=null&&c.hasOwnProperty("producerVersion")&&y.uint32(26).string(c.producerVersion),c.domain!=null&&c.hasOwnProperty("domain")&&y.uint32(34).string(c.domain),c.modelVersion!=null&&c.hasOwnProperty("modelVersion")&&y.uint32(40).int64(c.modelVersion),c.docString!=null&&c.hasOwnProperty("docString")&&y.uint32(50).string(c.docString),c.graph!=null&&c.hasOwnProperty("graph")&&g.onnx.GraphProto.encode(c.graph,y.uint32(58).fork()).ldelim(),c.opsetImport!=null&&c.opsetImport.length)for(var _=0;_<c.opsetImport.length;++_)g.onnx.OperatorSetIdProto.encode(c.opsetImport[_],y.uint32(66).fork()).ldelim();if(c.metadataProps!=null&&c.metadataProps.length)for(_=0;_<c.metadataProps.length;++_)g.onnx.StringStringEntryProto.encode(c.metadataProps[_],y.uint32(114).fork()).ldelim();return y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.ModelProto;c.pos<_;){var S=c.uint32();switch(S>>>3){case 1:b.irVersion=c.int64();break;case 8:b.opsetImport&&b.opsetImport.length||(b.opsetImport=[]),b.opsetImport.push(g.onnx.OperatorSetIdProto.decode(c,c.uint32()));break;case 2:b.producerName=c.string();break;case 3:b.producerVersion=c.string();break;case 4:b.domain=c.string();break;case 5:b.modelVersion=c.int64();break;case 6:b.docString=c.string();break;case 7:b.graph=g.onnx.GraphProto.decode(c,c.uint32());break;case 14:b.metadataProps&&b.metadataProps.length||(b.metadataProps=[]),b.metadataProps.push(g.onnx.StringStringEntryProto.decode(c,c.uint32()));break;default:c.skipType(7&S)}}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.irVersion!=null&&c.hasOwnProperty("irVersion")&&!(v.isInteger(c.irVersion)||c.irVersion&&v.isInteger(c.irVersion.low)&&v.isInteger(c.irVersion.high)))return"irVersion: integer|Long expected";if(c.opsetImport!=null&&c.hasOwnProperty("opsetImport")){if(!Array.isArray(c.opsetImport))return"opsetImport: array expected";for(var y=0;y<c.opsetImport.length;++y)if(_=g.onnx.OperatorSetIdProto.verify(c.opsetImport[y]))return"opsetImport."+_}if(c.producerName!=null&&c.hasOwnProperty("producerName")&&!v.isString(c.producerName))return"producerName: string expected";if(c.producerVersion!=null&&c.hasOwnProperty("producerVersion")&&!v.isString(c.producerVersion))return"producerVersion: string expected";if(c.domain!=null&&c.hasOwnProperty("domain")&&!v.isString(c.domain))return"domain: string expected";if(c.modelVersion!=null&&c.hasOwnProperty("modelVersion")&&!(v.isInteger(c.modelVersion)||c.modelVersion&&v.isInteger(c.modelVersion.low)&&v.isInteger(c.modelVersion.high)))return"modelVersion: integer|Long expected";if(c.docString!=null&&c.hasOwnProperty("docString")&&!v.isString(c.docString))return"docString: string expected";if(c.graph!=null&&c.hasOwnProperty("graph")&&(_=g.onnx.GraphProto.verify(c.graph)))return"graph."+_;if(c.metadataProps!=null&&c.hasOwnProperty("metadataProps")){if(!Array.isArray(c.metadataProps))return"metadataProps: array expected";for(y=0;y<c.metadataProps.length;++y){var _;if(_=g.onnx.StringStringEntryProto.verify(c.metadataProps[y]))return"metadataProps."+_}}return null},f.fromObject=function(c){if(c instanceof g.onnx.ModelProto)return c;var y=new g.onnx.ModelProto;if(c.irVersion!=null&&(v.Long?(y.irVersion=v.Long.fromValue(c.irVersion)).unsigned=!1:typeof c.irVersion=="string"?y.irVersion=parseInt(c.irVersion,10):typeof c.irVersion=="number"?y.irVersion=c.irVersion:typeof c.irVersion=="object"&&(y.irVersion=new v.LongBits(c.irVersion.low>>>0,c.irVersion.high>>>0).toNumber())),c.opsetImport){if(!Array.isArray(c.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");y.opsetImport=[];for(var _=0;_<c.opsetImport.length;++_){if(typeof c.opsetImport[_]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");y.opsetImport[_]=g.onnx.OperatorSetIdProto.fromObject(c.opsetImport[_])}}if(c.producerName!=null&&(y.producerName=String(c.producerName)),c.producerVersion!=null&&(y.producerVersion=String(c.producerVersion)),c.domain!=null&&(y.domain=String(c.domain)),c.modelVersion!=null&&(v.Long?(y.modelVersion=v.Long.fromValue(c.modelVersion)).unsigned=!1:typeof c.modelVersion=="string"?y.modelVersion=parseInt(c.modelVersion,10):typeof c.modelVersion=="number"?y.modelVersion=c.modelVersion:typeof c.modelVersion=="object"&&(y.modelVersion=new v.LongBits(c.modelVersion.low>>>0,c.modelVersion.high>>>0).toNumber())),c.docString!=null&&(y.docString=String(c.docString)),c.graph!=null){if(typeof c.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");y.graph=g.onnx.GraphProto.fromObject(c.graph)}if(c.metadataProps){if(!Array.isArray(c.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(y.metadataProps=[],_=0;_<c.metadataProps.length;++_){if(typeof c.metadataProps[_]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");y.metadataProps[_]=g.onnx.StringStringEntryProto.fromObject(c.metadataProps[_])}}return y},f.toObject=function(c,y){y||(y={});var _={};if((y.arrays||y.defaults)&&(_.opsetImport=[],_.metadataProps=[]),y.defaults){if(v.Long){var b=new v.Long(0,0,!1);_.irVersion=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else _.irVersion=y.longs===String?"0":0;_.producerName="",_.producerVersion="",_.domain="",v.Long?(b=new v.Long(0,0,!1),_.modelVersion=y.longs===String?b.toString():y.longs===Number?b.toNumber():b):_.modelVersion=y.longs===String?"0":0,_.docString="",_.graph=null}if(c.irVersion!=null&&c.hasOwnProperty("irVersion")&&(typeof c.irVersion=="number"?_.irVersion=y.longs===String?String(c.irVersion):c.irVersion:_.irVersion=y.longs===String?v.Long.prototype.toString.call(c.irVersion):y.longs===Number?new v.LongBits(c.irVersion.low>>>0,c.irVersion.high>>>0).toNumber():c.irVersion),c.producerName!=null&&c.hasOwnProperty("producerName")&&(_.producerName=c.producerName),c.producerVersion!=null&&c.hasOwnProperty("producerVersion")&&(_.producerVersion=c.producerVersion),c.domain!=null&&c.hasOwnProperty("domain")&&(_.domain=c.domain),c.modelVersion!=null&&c.hasOwnProperty("modelVersion")&&(typeof c.modelVersion=="number"?_.modelVersion=y.longs===String?String(c.modelVersion):c.modelVersion:_.modelVersion=y.longs===String?v.Long.prototype.toString.call(c.modelVersion):y.longs===Number?new v.LongBits(c.modelVersion.low>>>0,c.modelVersion.high>>>0).toNumber():c.modelVersion),c.docString!=null&&c.hasOwnProperty("docString")&&(_.docString=c.docString),c.graph!=null&&c.hasOwnProperty("graph")&&(_.graph=g.onnx.GraphProto.toObject(c.graph,y)),c.opsetImport&&c.opsetImport.length){_.opsetImport=[];for(var S=0;S<c.opsetImport.length;++S)_.opsetImport[S]=g.onnx.OperatorSetIdProto.toObject(c.opsetImport[S],y)}if(c.metadataProps&&c.metadataProps.length)for(_.metadataProps=[],S=0;S<c.metadataProps.length;++S)_.metadataProps[S]=g.onnx.StringStringEntryProto.toObject(c.metadataProps[S],y);return _},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f}(),s.StringStringEntryProto=function(){function f(c){if(c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.key="",f.prototype.value="",f.create=function(c){return new f(c)},f.encode=function(c,y){return y||(y=d.create()),c.key!=null&&c.hasOwnProperty("key")&&y.uint32(10).string(c.key),c.value!=null&&c.hasOwnProperty("value")&&y.uint32(18).string(c.value),y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.StringStringEntryProto;c.pos<_;){var S=c.uint32();switch(S>>>3){case 1:b.key=c.string();break;case 2:b.value=c.string();break;default:c.skipType(7&S)}}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){return typeof c!="object"||c===null?"object expected":c.key!=null&&c.hasOwnProperty("key")&&!v.isString(c.key)?"key: string expected":c.value!=null&&c.hasOwnProperty("value")&&!v.isString(c.value)?"value: string expected":null},f.fromObject=function(c){if(c instanceof g.onnx.StringStringEntryProto)return c;var y=new g.onnx.StringStringEntryProto;return c.key!=null&&(y.key=String(c.key)),c.value!=null&&(y.value=String(c.value)),y},f.toObject=function(c,y){y||(y={});var _={};return y.defaults&&(_.key="",_.value=""),c.key!=null&&c.hasOwnProperty("key")&&(_.key=c.key),c.value!=null&&c.hasOwnProperty("value")&&(_.value=c.value),_},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f}(),s.TensorAnnotation=function(){function f(c){if(this.quantParameterTensorNames=[],c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.tensorName="",f.prototype.quantParameterTensorNames=v.emptyArray,f.create=function(c){return new f(c)},f.encode=function(c,y){if(y||(y=d.create()),c.tensorName!=null&&c.hasOwnProperty("tensorName")&&y.uint32(10).string(c.tensorName),c.quantParameterTensorNames!=null&&c.quantParameterTensorNames.length)for(var _=0;_<c.quantParameterTensorNames.length;++_)g.onnx.StringStringEntryProto.encode(c.quantParameterTensorNames[_],y.uint32(18).fork()).ldelim();return y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.TensorAnnotation;c.pos<_;){var S=c.uint32();switch(S>>>3){case 1:b.tensorName=c.string();break;case 2:b.quantParameterTensorNames&&b.quantParameterTensorNames.length||(b.quantParameterTensorNames=[]),b.quantParameterTensorNames.push(g.onnx.StringStringEntryProto.decode(c,c.uint32()));break;default:c.skipType(7&S)}}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.tensorName!=null&&c.hasOwnProperty("tensorName")&&!v.isString(c.tensorName))return"tensorName: string expected";if(c.quantParameterTensorNames!=null&&c.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(c.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var y=0;y<c.quantParameterTensorNames.length;++y){var _=g.onnx.StringStringEntryProto.verify(c.quantParameterTensorNames[y]);if(_)return"quantParameterTensorNames."+_}}return null},f.fromObject=function(c){if(c instanceof g.onnx.TensorAnnotation)return c;var y=new g.onnx.TensorAnnotation;if(c.tensorName!=null&&(y.tensorName=String(c.tensorName)),c.quantParameterTensorNames){if(!Array.isArray(c.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");y.quantParameterTensorNames=[];for(var _=0;_<c.quantParameterTensorNames.length;++_){if(typeof c.quantParameterTensorNames[_]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");y.quantParameterTensorNames[_]=g.onnx.StringStringEntryProto.fromObject(c.quantParameterTensorNames[_])}}return y},f.toObject=function(c,y){y||(y={});var _={};if((y.arrays||y.defaults)&&(_.quantParameterTensorNames=[]),y.defaults&&(_.tensorName=""),c.tensorName!=null&&c.hasOwnProperty("tensorName")&&(_.tensorName=c.tensorName),c.quantParameterTensorNames&&c.quantParameterTensorNames.length){_.quantParameterTensorNames=[];for(var b=0;b<c.quantParameterTensorNames.length;++b)_.quantParameterTensorNames[b]=g.onnx.StringStringEntryProto.toObject(c.quantParameterTensorNames[b],y)}return _},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f}(),s.GraphProto=function(){function f(c){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.node=v.emptyArray,f.prototype.name="",f.prototype.initializer=v.emptyArray,f.prototype.docString="",f.prototype.input=v.emptyArray,f.prototype.output=v.emptyArray,f.prototype.valueInfo=v.emptyArray,f.prototype.quantizationAnnotation=v.emptyArray,f.create=function(c){return new f(c)},f.encode=function(c,y){if(y||(y=d.create()),c.node!=null&&c.node.length)for(var _=0;_<c.node.length;++_)g.onnx.NodeProto.encode(c.node[_],y.uint32(10).fork()).ldelim();if(c.name!=null&&c.hasOwnProperty("name")&&y.uint32(18).string(c.name),c.initializer!=null&&c.initializer.length)for(_=0;_<c.initializer.length;++_)g.onnx.TensorProto.encode(c.initializer[_],y.uint32(42).fork()).ldelim();if(c.docString!=null&&c.hasOwnProperty("docString")&&y.uint32(82).string(c.docString),c.input!=null&&c.input.length)for(_=0;_<c.input.length;++_)g.onnx.ValueInfoProto.encode(c.input[_],y.uint32(90).fork()).ldelim();if(c.output!=null&&c.output.length)for(_=0;_<c.output.length;++_)g.onnx.ValueInfoProto.encode(c.output[_],y.uint32(98).fork()).ldelim();if(c.valueInfo!=null&&c.valueInfo.length)for(_=0;_<c.valueInfo.length;++_)g.onnx.ValueInfoProto.encode(c.valueInfo[_],y.uint32(106).fork()).ldelim();if(c.quantizationAnnotation!=null&&c.quantizationAnnotation.length)for(_=0;_<c.quantizationAnnotation.length;++_)g.onnx.TensorAnnotation.encode(c.quantizationAnnotation[_],y.uint32(114).fork()).ldelim();return y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.GraphProto;c.pos<_;){var S=c.uint32();switch(S>>>3){case 1:b.node&&b.node.length||(b.node=[]),b.node.push(g.onnx.NodeProto.decode(c,c.uint32()));break;case 2:b.name=c.string();break;case 5:b.initializer&&b.initializer.length||(b.initializer=[]),b.initializer.push(g.onnx.TensorProto.decode(c,c.uint32()));break;case 10:b.docString=c.string();break;case 11:b.input&&b.input.length||(b.input=[]),b.input.push(g.onnx.ValueInfoProto.decode(c,c.uint32()));break;case 12:b.output&&b.output.length||(b.output=[]),b.output.push(g.onnx.ValueInfoProto.decode(c,c.uint32()));break;case 13:b.valueInfo&&b.valueInfo.length||(b.valueInfo=[]),b.valueInfo.push(g.onnx.ValueInfoProto.decode(c,c.uint32()));break;case 14:b.quantizationAnnotation&&b.quantizationAnnotation.length||(b.quantizationAnnotation=[]),b.quantizationAnnotation.push(g.onnx.TensorAnnotation.decode(c,c.uint32()));break;default:c.skipType(7&S)}}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.node!=null&&c.hasOwnProperty("node")){if(!Array.isArray(c.node))return"node: array expected";for(var y=0;y<c.node.length;++y)if(_=g.onnx.NodeProto.verify(c.node[y]))return"node."+_}if(c.name!=null&&c.hasOwnProperty("name")&&!v.isString(c.name))return"name: string expected";if(c.initializer!=null&&c.hasOwnProperty("initializer")){if(!Array.isArray(c.initializer))return"initializer: array expected";for(y=0;y<c.initializer.length;++y)if(_=g.onnx.TensorProto.verify(c.initializer[y]))return"initializer."+_}if(c.docString!=null&&c.hasOwnProperty("docString")&&!v.isString(c.docString))return"docString: string expected";if(c.input!=null&&c.hasOwnProperty("input")){if(!Array.isArray(c.input))return"input: array expected";for(y=0;y<c.input.length;++y)if(_=g.onnx.ValueInfoProto.verify(c.input[y]))return"input."+_}if(c.output!=null&&c.hasOwnProperty("output")){if(!Array.isArray(c.output))return"output: array expected";for(y=0;y<c.output.length;++y)if(_=g.onnx.ValueInfoProto.verify(c.output[y]))return"output."+_}if(c.valueInfo!=null&&c.hasOwnProperty("valueInfo")){if(!Array.isArray(c.valueInfo))return"valueInfo: array expected";for(y=0;y<c.valueInfo.length;++y)if(_=g.onnx.ValueInfoProto.verify(c.valueInfo[y]))return"valueInfo."+_}if(c.quantizationAnnotation!=null&&c.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(c.quantizationAnnotation))return"quantizationAnnotation: array expected";for(y=0;y<c.quantizationAnnotation.length;++y){var _;if(_=g.onnx.TensorAnnotation.verify(c.quantizationAnnotation[y]))return"quantizationAnnotation."+_}}return null},f.fromObject=function(c){if(c instanceof g.onnx.GraphProto)return c;var y=new g.onnx.GraphProto;if(c.node){if(!Array.isArray(c.node))throw TypeError(".onnx.GraphProto.node: array expected");y.node=[];for(var _=0;_<c.node.length;++_){if(typeof c.node[_]!="object")throw TypeError(".onnx.GraphProto.node: object expected");y.node[_]=g.onnx.NodeProto.fromObject(c.node[_])}}if(c.name!=null&&(y.name=String(c.name)),c.initializer){if(!Array.isArray(c.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(y.initializer=[],_=0;_<c.initializer.length;++_){if(typeof c.initializer[_]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");y.initializer[_]=g.onnx.TensorProto.fromObject(c.initializer[_])}}if(c.docString!=null&&(y.docString=String(c.docString)),c.input){if(!Array.isArray(c.input))throw TypeError(".onnx.GraphProto.input: array expected");for(y.input=[],_=0;_<c.input.length;++_){if(typeof c.input[_]!="object")throw TypeError(".onnx.GraphProto.input: object expected");y.input[_]=g.onnx.ValueInfoProto.fromObject(c.input[_])}}if(c.output){if(!Array.isArray(c.output))throw TypeError(".onnx.GraphProto.output: array expected");for(y.output=[],_=0;_<c.output.length;++_){if(typeof c.output[_]!="object")throw TypeError(".onnx.GraphProto.output: object expected");y.output[_]=g.onnx.ValueInfoProto.fromObject(c.output[_])}}if(c.valueInfo){if(!Array.isArray(c.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(y.valueInfo=[],_=0;_<c.valueInfo.length;++_){if(typeof c.valueInfo[_]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");y.valueInfo[_]=g.onnx.ValueInfoProto.fromObject(c.valueInfo[_])}}if(c.quantizationAnnotation){if(!Array.isArray(c.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(y.quantizationAnnotation=[],_=0;_<c.quantizationAnnotation.length;++_){if(typeof c.quantizationAnnotation[_]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");y.quantizationAnnotation[_]=g.onnx.TensorAnnotation.fromObject(c.quantizationAnnotation[_])}}return y},f.toObject=function(c,y){y||(y={});var _={};if((y.arrays||y.defaults)&&(_.node=[],_.initializer=[],_.input=[],_.output=[],_.valueInfo=[],_.quantizationAnnotation=[]),y.defaults&&(_.name="",_.docString=""),c.node&&c.node.length){_.node=[];for(var b=0;b<c.node.length;++b)_.node[b]=g.onnx.NodeProto.toObject(c.node[b],y)}if(c.name!=null&&c.hasOwnProperty("name")&&(_.name=c.name),c.initializer&&c.initializer.length)for(_.initializer=[],b=0;b<c.initializer.length;++b)_.initializer[b]=g.onnx.TensorProto.toObject(c.initializer[b],y);if(c.docString!=null&&c.hasOwnProperty("docString")&&(_.docString=c.docString),c.input&&c.input.length)for(_.input=[],b=0;b<c.input.length;++b)_.input[b]=g.onnx.ValueInfoProto.toObject(c.input[b],y);if(c.output&&c.output.length)for(_.output=[],b=0;b<c.output.length;++b)_.output[b]=g.onnx.ValueInfoProto.toObject(c.output[b],y);if(c.valueInfo&&c.valueInfo.length)for(_.valueInfo=[],b=0;b<c.valueInfo.length;++b)_.valueInfo[b]=g.onnx.ValueInfoProto.toObject(c.valueInfo[b],y);if(c.quantizationAnnotation&&c.quantizationAnnotation.length)for(_.quantizationAnnotation=[],b=0;b<c.quantizationAnnotation.length;++b)_.quantizationAnnotation[b]=g.onnx.TensorAnnotation.toObject(c.quantizationAnnotation[b],y);return _},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f}(),s.TensorProto=function(){function f(c){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.dims=v.emptyArray,f.prototype.dataType=0,f.prototype.segment=null,f.prototype.floatData=v.emptyArray,f.prototype.int32Data=v.emptyArray,f.prototype.stringData=v.emptyArray,f.prototype.int64Data=v.emptyArray,f.prototype.name="",f.prototype.docString="",f.prototype.rawData=v.newBuffer([]),f.prototype.externalData=v.emptyArray,f.prototype.dataLocation=0,f.prototype.doubleData=v.emptyArray,f.prototype.uint64Data=v.emptyArray,f.create=function(c){return new f(c)},f.encode=function(c,y){if(y||(y=d.create()),c.dims!=null&&c.dims.length){y.uint32(10).fork();for(var _=0;_<c.dims.length;++_)y.int64(c.dims[_]);y.ldelim()}if(c.dataType!=null&&c.hasOwnProperty("dataType")&&y.uint32(16).int32(c.dataType),c.segment!=null&&c.hasOwnProperty("segment")&&g.onnx.TensorProto.Segment.encode(c.segment,y.uint32(26).fork()).ldelim(),c.floatData!=null&&c.floatData.length){for(y.uint32(34).fork(),_=0;_<c.floatData.length;++_)y.float(c.floatData[_]);y.ldelim()}if(c.int32Data!=null&&c.int32Data.length){for(y.uint32(42).fork(),_=0;_<c.int32Data.length;++_)y.int32(c.int32Data[_]);y.ldelim()}if(c.stringData!=null&&c.stringData.length)for(_=0;_<c.stringData.length;++_)y.uint32(50).bytes(c.stringData[_]);if(c.int64Data!=null&&c.int64Data.length){for(y.uint32(58).fork(),_=0;_<c.int64Data.length;++_)y.int64(c.int64Data[_]);y.ldelim()}if(c.name!=null&&c.hasOwnProperty("name")&&y.uint32(66).string(c.name),c.rawData!=null&&c.hasOwnProperty("rawData")&&y.uint32(74).bytes(c.rawData),c.doubleData!=null&&c.doubleData.length){for(y.uint32(82).fork(),_=0;_<c.doubleData.length;++_)y.double(c.doubleData[_]);y.ldelim()}if(c.uint64Data!=null&&c.uint64Data.length){for(y.uint32(90).fork(),_=0;_<c.uint64Data.length;++_)y.uint64(c.uint64Data[_]);y.ldelim()}if(c.docString!=null&&c.hasOwnProperty("docString")&&y.uint32(98).string(c.docString),c.externalData!=null&&c.externalData.length)for(_=0;_<c.externalData.length;++_)g.onnx.StringStringEntryProto.encode(c.externalData[_],y.uint32(106).fork()).ldelim();return c.dataLocation!=null&&c.hasOwnProperty("dataLocation")&&y.uint32(112).int32(c.dataLocation),y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.TensorProto;c.pos<_;){var S=c.uint32();switch(S>>>3){case 1:if(b.dims&&b.dims.length||(b.dims=[]),(7&S)==2)for(var x=c.uint32()+c.pos;c.pos<x;)b.dims.push(c.int64());else b.dims.push(c.int64());break;case 2:b.dataType=c.int32();break;case 3:b.segment=g.onnx.TensorProto.Segment.decode(c,c.uint32());break;case 4:if(b.floatData&&b.floatData.length||(b.floatData=[]),(7&S)==2)for(x=c.uint32()+c.pos;c.pos<x;)b.floatData.push(c.float());else b.floatData.push(c.float());break;case 5:if(b.int32Data&&b.int32Data.length||(b.int32Data=[]),(7&S)==2)for(x=c.uint32()+c.pos;c.pos<x;)b.int32Data.push(c.int32());else b.int32Data.push(c.int32());break;case 6:b.stringData&&b.stringData.length||(b.stringData=[]),b.stringData.push(c.bytes());break;case 7:if(b.int64Data&&b.int64Data.length||(b.int64Data=[]),(7&S)==2)for(x=c.uint32()+c.pos;c.pos<x;)b.int64Data.push(c.int64());else b.int64Data.push(c.int64());break;case 8:b.name=c.string();break;case 12:b.docString=c.string();break;case 9:b.rawData=c.bytes();break;case 13:b.externalData&&b.externalData.length||(b.externalData=[]),b.externalData.push(g.onnx.StringStringEntryProto.decode(c,c.uint32()));break;case 14:b.dataLocation=c.int32();break;case 10:if(b.doubleData&&b.doubleData.length||(b.doubleData=[]),(7&S)==2)for(x=c.uint32()+c.pos;c.pos<x;)b.doubleData.push(c.double());else b.doubleData.push(c.double());break;case 11:if(b.uint64Data&&b.uint64Data.length||(b.uint64Data=[]),(7&S)==2)for(x=c.uint32()+c.pos;c.pos<x;)b.uint64Data.push(c.uint64());else b.uint64Data.push(c.uint64());break;default:c.skipType(7&S)}}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.dims!=null&&c.hasOwnProperty("dims")){if(!Array.isArray(c.dims))return"dims: array expected";for(var y=0;y<c.dims.length;++y)if(!(v.isInteger(c.dims[y])||c.dims[y]&&v.isInteger(c.dims[y].low)&&v.isInteger(c.dims[y].high)))return"dims: integer|Long[] expected"}if(c.dataType!=null&&c.hasOwnProperty("dataType")&&!v.isInteger(c.dataType))return"dataType: integer expected";if(c.segment!=null&&c.hasOwnProperty("segment")&&(_=g.onnx.TensorProto.Segment.verify(c.segment)))return"segment."+_;if(c.floatData!=null&&c.hasOwnProperty("floatData")){if(!Array.isArray(c.floatData))return"floatData: array expected";for(y=0;y<c.floatData.length;++y)if(typeof c.floatData[y]!="number")return"floatData: number[] expected"}if(c.int32Data!=null&&c.hasOwnProperty("int32Data")){if(!Array.isArray(c.int32Data))return"int32Data: array expected";for(y=0;y<c.int32Data.length;++y)if(!v.isInteger(c.int32Data[y]))return"int32Data: integer[] expected"}if(c.stringData!=null&&c.hasOwnProperty("stringData")){if(!Array.isArray(c.stringData))return"stringData: array expected";for(y=0;y<c.stringData.length;++y)if(!(c.stringData[y]&&typeof c.stringData[y].length=="number"||v.isString(c.stringData[y])))return"stringData: buffer[] expected"}if(c.int64Data!=null&&c.hasOwnProperty("int64Data")){if(!Array.isArray(c.int64Data))return"int64Data: array expected";for(y=0;y<c.int64Data.length;++y)if(!(v.isInteger(c.int64Data[y])||c.int64Data[y]&&v.isInteger(c.int64Data[y].low)&&v.isInteger(c.int64Data[y].high)))return"int64Data: integer|Long[] expected"}if(c.name!=null&&c.hasOwnProperty("name")&&!v.isString(c.name))return"name: string expected";if(c.docString!=null&&c.hasOwnProperty("docString")&&!v.isString(c.docString))return"docString: string expected";if(c.rawData!=null&&c.hasOwnProperty("rawData")&&!(c.rawData&&typeof c.rawData.length=="number"||v.isString(c.rawData)))return"rawData: buffer expected";if(c.externalData!=null&&c.hasOwnProperty("externalData")){if(!Array.isArray(c.externalData))return"externalData: array expected";for(y=0;y<c.externalData.length;++y){var _;if(_=g.onnx.StringStringEntryProto.verify(c.externalData[y]))return"externalData."+_}}if(c.dataLocation!=null&&c.hasOwnProperty("dataLocation"))switch(c.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(c.doubleData!=null&&c.hasOwnProperty("doubleData")){if(!Array.isArray(c.doubleData))return"doubleData: array expected";for(y=0;y<c.doubleData.length;++y)if(typeof c.doubleData[y]!="number")return"doubleData: number[] expected"}if(c.uint64Data!=null&&c.hasOwnProperty("uint64Data")){if(!Array.isArray(c.uint64Data))return"uint64Data: array expected";for(y=0;y<c.uint64Data.length;++y)if(!(v.isInteger(c.uint64Data[y])||c.uint64Data[y]&&v.isInteger(c.uint64Data[y].low)&&v.isInteger(c.uint64Data[y].high)))return"uint64Data: integer|Long[] expected"}return null},f.fromObject=function(c){if(c instanceof g.onnx.TensorProto)return c;var y=new g.onnx.TensorProto;if(c.dims){if(!Array.isArray(c.dims))throw TypeError(".onnx.TensorProto.dims: array expected");y.dims=[];for(var _=0;_<c.dims.length;++_)v.Long?(y.dims[_]=v.Long.fromValue(c.dims[_])).unsigned=!1:typeof c.dims[_]=="string"?y.dims[_]=parseInt(c.dims[_],10):typeof c.dims[_]=="number"?y.dims[_]=c.dims[_]:typeof c.dims[_]=="object"&&(y.dims[_]=new v.LongBits(c.dims[_].low>>>0,c.dims[_].high>>>0).toNumber())}if(c.dataType!=null&&(y.dataType=0|c.dataType),c.segment!=null){if(typeof c.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");y.segment=g.onnx.TensorProto.Segment.fromObject(c.segment)}if(c.floatData){if(!Array.isArray(c.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(y.floatData=[],_=0;_<c.floatData.length;++_)y.floatData[_]=Number(c.floatData[_])}if(c.int32Data){if(!Array.isArray(c.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(y.int32Data=[],_=0;_<c.int32Data.length;++_)y.int32Data[_]=0|c.int32Data[_]}if(c.stringData){if(!Array.isArray(c.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(y.stringData=[],_=0;_<c.stringData.length;++_)typeof c.stringData[_]=="string"?v.base64.decode(c.stringData[_],y.stringData[_]=v.newBuffer(v.base64.length(c.stringData[_])),0):c.stringData[_].length&&(y.stringData[_]=c.stringData[_])}if(c.int64Data){if(!Array.isArray(c.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(y.int64Data=[],_=0;_<c.int64Data.length;++_)v.Long?(y.int64Data[_]=v.Long.fromValue(c.int64Data[_])).unsigned=!1:typeof c.int64Data[_]=="string"?y.int64Data[_]=parseInt(c.int64Data[_],10):typeof c.int64Data[_]=="number"?y.int64Data[_]=c.int64Data[_]:typeof c.int64Data[_]=="object"&&(y.int64Data[_]=new v.LongBits(c.int64Data[_].low>>>0,c.int64Data[_].high>>>0).toNumber())}if(c.name!=null&&(y.name=String(c.name)),c.docString!=null&&(y.docString=String(c.docString)),c.rawData!=null&&(typeof c.rawData=="string"?v.base64.decode(c.rawData,y.rawData=v.newBuffer(v.base64.length(c.rawData)),0):c.rawData.length&&(y.rawData=c.rawData)),c.externalData){if(!Array.isArray(c.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(y.externalData=[],_=0;_<c.externalData.length;++_){if(typeof c.externalData[_]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");y.externalData[_]=g.onnx.StringStringEntryProto.fromObject(c.externalData[_])}}switch(c.dataLocation){case"DEFAULT":case 0:y.dataLocation=0;break;case"EXTERNAL":case 1:y.dataLocation=1}if(c.doubleData){if(!Array.isArray(c.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(y.doubleData=[],_=0;_<c.doubleData.length;++_)y.doubleData[_]=Number(c.doubleData[_])}if(c.uint64Data){if(!Array.isArray(c.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(y.uint64Data=[],_=0;_<c.uint64Data.length;++_)v.Long?(y.uint64Data[_]=v.Long.fromValue(c.uint64Data[_])).unsigned=!0:typeof c.uint64Data[_]=="string"?y.uint64Data[_]=parseInt(c.uint64Data[_],10):typeof c.uint64Data[_]=="number"?y.uint64Data[_]=c.uint64Data[_]:typeof c.uint64Data[_]=="object"&&(y.uint64Data[_]=new v.LongBits(c.uint64Data[_].low>>>0,c.uint64Data[_].high>>>0).toNumber(!0))}return y},f.toObject=function(c,y){y||(y={});var _={};if((y.arrays||y.defaults)&&(_.dims=[],_.floatData=[],_.int32Data=[],_.stringData=[],_.int64Data=[],_.doubleData=[],_.uint64Data=[],_.externalData=[]),y.defaults&&(_.dataType=0,_.segment=null,_.name="",y.bytes===String?_.rawData="":(_.rawData=[],y.bytes!==Array&&(_.rawData=v.newBuffer(_.rawData))),_.docString="",_.dataLocation=y.enums===String?"DEFAULT":0),c.dims&&c.dims.length){_.dims=[];for(var b=0;b<c.dims.length;++b)typeof c.dims[b]=="number"?_.dims[b]=y.longs===String?String(c.dims[b]):c.dims[b]:_.dims[b]=y.longs===String?v.Long.prototype.toString.call(c.dims[b]):y.longs===Number?new v.LongBits(c.dims[b].low>>>0,c.dims[b].high>>>0).toNumber():c.dims[b]}if(c.dataType!=null&&c.hasOwnProperty("dataType")&&(_.dataType=c.dataType),c.segment!=null&&c.hasOwnProperty("segment")&&(_.segment=g.onnx.TensorProto.Segment.toObject(c.segment,y)),c.floatData&&c.floatData.length)for(_.floatData=[],b=0;b<c.floatData.length;++b)_.floatData[b]=y.json&&!isFinite(c.floatData[b])?String(c.floatData[b]):c.floatData[b];if(c.int32Data&&c.int32Data.length)for(_.int32Data=[],b=0;b<c.int32Data.length;++b)_.int32Data[b]=c.int32Data[b];if(c.stringData&&c.stringData.length)for(_.stringData=[],b=0;b<c.stringData.length;++b)_.stringData[b]=y.bytes===String?v.base64.encode(c.stringData[b],0,c.stringData[b].length):y.bytes===Array?Array.prototype.slice.call(c.stringData[b]):c.stringData[b];if(c.int64Data&&c.int64Data.length)for(_.int64Data=[],b=0;b<c.int64Data.length;++b)typeof c.int64Data[b]=="number"?_.int64Data[b]=y.longs===String?String(c.int64Data[b]):c.int64Data[b]:_.int64Data[b]=y.longs===String?v.Long.prototype.toString.call(c.int64Data[b]):y.longs===Number?new v.LongBits(c.int64Data[b].low>>>0,c.int64Data[b].high>>>0).toNumber():c.int64Data[b];if(c.name!=null&&c.hasOwnProperty("name")&&(_.name=c.name),c.rawData!=null&&c.hasOwnProperty("rawData")&&(_.rawData=y.bytes===String?v.base64.encode(c.rawData,0,c.rawData.length):y.bytes===Array?Array.prototype.slice.call(c.rawData):c.rawData),c.doubleData&&c.doubleData.length)for(_.doubleData=[],b=0;b<c.doubleData.length;++b)_.doubleData[b]=y.json&&!isFinite(c.doubleData[b])?String(c.doubleData[b]):c.doubleData[b];if(c.uint64Data&&c.uint64Data.length)for(_.uint64Data=[],b=0;b<c.uint64Data.length;++b)typeof c.uint64Data[b]=="number"?_.uint64Data[b]=y.longs===String?String(c.uint64Data[b]):c.uint64Data[b]:_.uint64Data[b]=y.longs===String?v.Long.prototype.toString.call(c.uint64Data[b]):y.longs===Number?new v.LongBits(c.uint64Data[b].low>>>0,c.uint64Data[b].high>>>0).toNumber(!0):c.uint64Data[b];if(c.docString!=null&&c.hasOwnProperty("docString")&&(_.docString=c.docString),c.externalData&&c.externalData.length)for(_.externalData=[],b=0;b<c.externalData.length;++b)_.externalData[b]=g.onnx.StringStringEntryProto.toObject(c.externalData[b],y);return c.dataLocation!=null&&c.hasOwnProperty("dataLocation")&&(_.dataLocation=y.enums===String?g.onnx.TensorProto.DataLocation[c.dataLocation]:c.dataLocation),_},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f.DataType=function(){var c={},y=Object.create(c);return y[c[0]="UNDEFINED"]=0,y[c[1]="FLOAT"]=1,y[c[2]="UINT8"]=2,y[c[3]="INT8"]=3,y[c[4]="UINT16"]=4,y[c[5]="INT16"]=5,y[c[6]="INT32"]=6,y[c[7]="INT64"]=7,y[c[8]="STRING"]=8,y[c[9]="BOOL"]=9,y[c[10]="FLOAT16"]=10,y[c[11]="DOUBLE"]=11,y[c[12]="UINT32"]=12,y[c[13]="UINT64"]=13,y[c[14]="COMPLEX64"]=14,y[c[15]="COMPLEX128"]=15,y[c[16]="BFLOAT16"]=16,y}(),f.Segment=function(){function c(y){if(y)for(var _=Object.keys(y),b=0;b<_.length;++b)y[_[b]]!=null&&(this[_[b]]=y[_[b]])}return c.prototype.begin=v.Long?v.Long.fromBits(0,0,!1):0,c.prototype.end=v.Long?v.Long.fromBits(0,0,!1):0,c.create=function(y){return new c(y)},c.encode=function(y,_){return _||(_=d.create()),y.begin!=null&&y.hasOwnProperty("begin")&&_.uint32(8).int64(y.begin),y.end!=null&&y.hasOwnProperty("end")&&_.uint32(16).int64(y.end),_},c.encodeDelimited=function(y,_){return this.encode(y,_).ldelim()},c.decode=function(y,_){y instanceof u||(y=u.create(y));for(var b=_===void 0?y.len:y.pos+_,S=new g.onnx.TensorProto.Segment;y.pos<b;){var x=y.uint32();switch(x>>>3){case 1:S.begin=y.int64();break;case 2:S.end=y.int64();break;default:y.skipType(7&x)}}return S},c.decodeDelimited=function(y){return y instanceof u||(y=new u(y)),this.decode(y,y.uint32())},c.verify=function(y){return typeof y!="object"||y===null?"object expected":y.begin!=null&&y.hasOwnProperty("begin")&&!(v.isInteger(y.begin)||y.begin&&v.isInteger(y.begin.low)&&v.isInteger(y.begin.high))?"begin: integer|Long expected":y.end!=null&&y.hasOwnProperty("end")&&!(v.isInteger(y.end)||y.end&&v.isInteger(y.end.low)&&v.isInteger(y.end.high))?"end: integer|Long expected":null},c.fromObject=function(y){if(y instanceof g.onnx.TensorProto.Segment)return y;var _=new g.onnx.TensorProto.Segment;return y.begin!=null&&(v.Long?(_.begin=v.Long.fromValue(y.begin)).unsigned=!1:typeof y.begin=="string"?_.begin=parseInt(y.begin,10):typeof y.begin=="number"?_.begin=y.begin:typeof y.begin=="object"&&(_.begin=new v.LongBits(y.begin.low>>>0,y.begin.high>>>0).toNumber())),y.end!=null&&(v.Long?(_.end=v.Long.fromValue(y.end)).unsigned=!1:typeof y.end=="string"?_.end=parseInt(y.end,10):typeof y.end=="number"?_.end=y.end:typeof y.end=="object"&&(_.end=new v.LongBits(y.end.low>>>0,y.end.high>>>0).toNumber())),_},c.toObject=function(y,_){_||(_={});var b={};if(_.defaults){if(v.Long){var S=new v.Long(0,0,!1);b.begin=_.longs===String?S.toString():_.longs===Number?S.toNumber():S}else b.begin=_.longs===String?"0":0;v.Long?(S=new v.Long(0,0,!1),b.end=_.longs===String?S.toString():_.longs===Number?S.toNumber():S):b.end=_.longs===String?"0":0}return y.begin!=null&&y.hasOwnProperty("begin")&&(typeof y.begin=="number"?b.begin=_.longs===String?String(y.begin):y.begin:b.begin=_.longs===String?v.Long.prototype.toString.call(y.begin):_.longs===Number?new v.LongBits(y.begin.low>>>0,y.begin.high>>>0).toNumber():y.begin),y.end!=null&&y.hasOwnProperty("end")&&(typeof y.end=="number"?b.end=_.longs===String?String(y.end):y.end:b.end=_.longs===String?v.Long.prototype.toString.call(y.end):_.longs===Number?new v.LongBits(y.end.low>>>0,y.end.high>>>0).toNumber():y.end),b},c.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},c}(),f.DataLocation=function(){var c={},y=Object.create(c);return y[c[0]="DEFAULT"]=0,y[c[1]="EXTERNAL"]=1,y}(),f}(),s.TensorShapeProto=function(){function f(c){if(this.dim=[],c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.dim=v.emptyArray,f.create=function(c){return new f(c)},f.encode=function(c,y){if(y||(y=d.create()),c.dim!=null&&c.dim.length)for(var _=0;_<c.dim.length;++_)g.onnx.TensorShapeProto.Dimension.encode(c.dim[_],y.uint32(10).fork()).ldelim();return y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.TensorShapeProto;c.pos<_;){var S=c.uint32();S>>>3==1?(b.dim&&b.dim.length||(b.dim=[]),b.dim.push(g.onnx.TensorShapeProto.Dimension.decode(c,c.uint32()))):c.skipType(7&S)}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.dim!=null&&c.hasOwnProperty("dim")){if(!Array.isArray(c.dim))return"dim: array expected";for(var y=0;y<c.dim.length;++y){var _=g.onnx.TensorShapeProto.Dimension.verify(c.dim[y]);if(_)return"dim."+_}}return null},f.fromObject=function(c){if(c instanceof g.onnx.TensorShapeProto)return c;var y=new g.onnx.TensorShapeProto;if(c.dim){if(!Array.isArray(c.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");y.dim=[];for(var _=0;_<c.dim.length;++_){if(typeof c.dim[_]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");y.dim[_]=g.onnx.TensorShapeProto.Dimension.fromObject(c.dim[_])}}return y},f.toObject=function(c,y){y||(y={});var _={};if((y.arrays||y.defaults)&&(_.dim=[]),c.dim&&c.dim.length){_.dim=[];for(var b=0;b<c.dim.length;++b)_.dim[b]=g.onnx.TensorShapeProto.Dimension.toObject(c.dim[b],y)}return _},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f.Dimension=function(){function c(_){if(_)for(var b=Object.keys(_),S=0;S<b.length;++S)_[b[S]]!=null&&(this[b[S]]=_[b[S]])}var y;return c.prototype.dimValue=v.Long?v.Long.fromBits(0,0,!1):0,c.prototype.dimParam="",c.prototype.denotation="",Object.defineProperty(c.prototype,"value",{get:v.oneOfGetter(y=["dimValue","dimParam"]),set:v.oneOfSetter(y)}),c.create=function(_){return new c(_)},c.encode=function(_,b){return b||(b=d.create()),_.dimValue!=null&&_.hasOwnProperty("dimValue")&&b.uint32(8).int64(_.dimValue),_.dimParam!=null&&_.hasOwnProperty("dimParam")&&b.uint32(18).string(_.dimParam),_.denotation!=null&&_.hasOwnProperty("denotation")&&b.uint32(26).string(_.denotation),b},c.encodeDelimited=function(_,b){return this.encode(_,b).ldelim()},c.decode=function(_,b){_ instanceof u||(_=u.create(_));for(var S=b===void 0?_.len:_.pos+b,x=new g.onnx.TensorShapeProto.Dimension;_.pos<S;){var w=_.uint32();switch(w>>>3){case 1:x.dimValue=_.int64();break;case 2:x.dimParam=_.string();break;case 3:x.denotation=_.string();break;default:_.skipType(7&w)}}return x},c.decodeDelimited=function(_){return _ instanceof u||(_=new u(_)),this.decode(_,_.uint32())},c.verify=function(_){if(typeof _!="object"||_===null)return"object expected";var b={};if(_.dimValue!=null&&_.hasOwnProperty("dimValue")&&(b.value=1,!(v.isInteger(_.dimValue)||_.dimValue&&v.isInteger(_.dimValue.low)&&v.isInteger(_.dimValue.high))))return"dimValue: integer|Long expected";if(_.dimParam!=null&&_.hasOwnProperty("dimParam")){if(b.value===1)return"value: multiple values";if(b.value=1,!v.isString(_.dimParam))return"dimParam: string expected"}return _.denotation!=null&&_.hasOwnProperty("denotation")&&!v.isString(_.denotation)?"denotation: string expected":null},c.fromObject=function(_){if(_ instanceof g.onnx.TensorShapeProto.Dimension)return _;var b=new g.onnx.TensorShapeProto.Dimension;return _.dimValue!=null&&(v.Long?(b.dimValue=v.Long.fromValue(_.dimValue)).unsigned=!1:typeof _.dimValue=="string"?b.dimValue=parseInt(_.dimValue,10):typeof _.dimValue=="number"?b.dimValue=_.dimValue:typeof _.dimValue=="object"&&(b.dimValue=new v.LongBits(_.dimValue.low>>>0,_.dimValue.high>>>0).toNumber())),_.dimParam!=null&&(b.dimParam=String(_.dimParam)),_.denotation!=null&&(b.denotation=String(_.denotation)),b},c.toObject=function(_,b){b||(b={});var S={};return b.defaults&&(S.denotation=""),_.dimValue!=null&&_.hasOwnProperty("dimValue")&&(typeof _.dimValue=="number"?S.dimValue=b.longs===String?String(_.dimValue):_.dimValue:S.dimValue=b.longs===String?v.Long.prototype.toString.call(_.dimValue):b.longs===Number?new v.LongBits(_.dimValue.low>>>0,_.dimValue.high>>>0).toNumber():_.dimValue,b.oneofs&&(S.value="dimValue")),_.dimParam!=null&&_.hasOwnProperty("dimParam")&&(S.dimParam=_.dimParam,b.oneofs&&(S.value="dimParam")),_.denotation!=null&&_.hasOwnProperty("denotation")&&(S.denotation=_.denotation),S},c.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},c}(),f}(),s.TypeProto=function(){function f(y){if(y)for(var _=Object.keys(y),b=0;b<_.length;++b)y[_[b]]!=null&&(this[_[b]]=y[_[b]])}var c;return f.prototype.tensorType=null,f.prototype.denotation="",Object.defineProperty(f.prototype,"value",{get:v.oneOfGetter(c=["tensorType"]),set:v.oneOfSetter(c)}),f.create=function(y){return new f(y)},f.encode=function(y,_){return _||(_=d.create()),y.tensorType!=null&&y.hasOwnProperty("tensorType")&&g.onnx.TypeProto.Tensor.encode(y.tensorType,_.uint32(10).fork()).ldelim(),y.denotation!=null&&y.hasOwnProperty("denotation")&&_.uint32(50).string(y.denotation),_},f.encodeDelimited=function(y,_){return this.encode(y,_).ldelim()},f.decode=function(y,_){y instanceof u||(y=u.create(y));for(var b=_===void 0?y.len:y.pos+_,S=new g.onnx.TypeProto;y.pos<b;){var x=y.uint32();switch(x>>>3){case 1:S.tensorType=g.onnx.TypeProto.Tensor.decode(y,y.uint32());break;case 6:S.denotation=y.string();break;default:y.skipType(7&x)}}return S},f.decodeDelimited=function(y){return y instanceof u||(y=new u(y)),this.decode(y,y.uint32())},f.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.tensorType!=null&&y.hasOwnProperty("tensorType")){var _=g.onnx.TypeProto.Tensor.verify(y.tensorType);if(_)return"tensorType."+_}return y.denotation!=null&&y.hasOwnProperty("denotation")&&!v.isString(y.denotation)?"denotation: string expected":null},f.fromObject=function(y){if(y instanceof g.onnx.TypeProto)return y;var _=new g.onnx.TypeProto;if(y.tensorType!=null){if(typeof y.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");_.tensorType=g.onnx.TypeProto.Tensor.fromObject(y.tensorType)}return y.denotation!=null&&(_.denotation=String(y.denotation)),_},f.toObject=function(y,_){_||(_={});var b={};return _.defaults&&(b.denotation=""),y.tensorType!=null&&y.hasOwnProperty("tensorType")&&(b.tensorType=g.onnx.TypeProto.Tensor.toObject(y.tensorType,_),_.oneofs&&(b.value="tensorType")),y.denotation!=null&&y.hasOwnProperty("denotation")&&(b.denotation=y.denotation),b},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f.Tensor=function(){function y(_){if(_)for(var b=Object.keys(_),S=0;S<b.length;++S)_[b[S]]!=null&&(this[b[S]]=_[b[S]])}return y.prototype.elemType=0,y.prototype.shape=null,y.create=function(_){return new y(_)},y.encode=function(_,b){return b||(b=d.create()),_.elemType!=null&&_.hasOwnProperty("elemType")&&b.uint32(8).int32(_.elemType),_.shape!=null&&_.hasOwnProperty("shape")&&g.onnx.TensorShapeProto.encode(_.shape,b.uint32(18).fork()).ldelim(),b},y.encodeDelimited=function(_,b){return this.encode(_,b).ldelim()},y.decode=function(_,b){_ instanceof u||(_=u.create(_));for(var S=b===void 0?_.len:_.pos+b,x=new g.onnx.TypeProto.Tensor;_.pos<S;){var w=_.uint32();switch(w>>>3){case 1:x.elemType=_.int32();break;case 2:x.shape=g.onnx.TensorShapeProto.decode(_,_.uint32());break;default:_.skipType(7&w)}}return x},y.decodeDelimited=function(_){return _ instanceof u||(_=new u(_)),this.decode(_,_.uint32())},y.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.elemType!=null&&_.hasOwnProperty("elemType")&&!v.isInteger(_.elemType))return"elemType: integer expected";if(_.shape!=null&&_.hasOwnProperty("shape")){var b=g.onnx.TensorShapeProto.verify(_.shape);if(b)return"shape."+b}return null},y.fromObject=function(_){if(_ instanceof g.onnx.TypeProto.Tensor)return _;var b=new g.onnx.TypeProto.Tensor;if(_.elemType!=null&&(b.elemType=0|_.elemType),_.shape!=null){if(typeof _.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");b.shape=g.onnx.TensorShapeProto.fromObject(_.shape)}return b},y.toObject=function(_,b){b||(b={});var S={};return b.defaults&&(S.elemType=0,S.shape=null),_.elemType!=null&&_.hasOwnProperty("elemType")&&(S.elemType=_.elemType),_.shape!=null&&_.hasOwnProperty("shape")&&(S.shape=g.onnx.TensorShapeProto.toObject(_.shape,b)),S},y.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},y}(),f}(),s.OperatorSetIdProto=function(){function f(c){if(c)for(var y=Object.keys(c),_=0;_<y.length;++_)c[y[_]]!=null&&(this[y[_]]=c[y[_]])}return f.prototype.domain="",f.prototype.version=v.Long?v.Long.fromBits(0,0,!1):0,f.create=function(c){return new f(c)},f.encode=function(c,y){return y||(y=d.create()),c.domain!=null&&c.hasOwnProperty("domain")&&y.uint32(10).string(c.domain),c.version!=null&&c.hasOwnProperty("version")&&y.uint32(16).int64(c.version),y},f.encodeDelimited=function(c,y){return this.encode(c,y).ldelim()},f.decode=function(c,y){c instanceof u||(c=u.create(c));for(var _=y===void 0?c.len:c.pos+y,b=new g.onnx.OperatorSetIdProto;c.pos<_;){var S=c.uint32();switch(S>>>3){case 1:b.domain=c.string();break;case 2:b.version=c.int64();break;default:c.skipType(7&S)}}return b},f.decodeDelimited=function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},f.verify=function(c){return typeof c!="object"||c===null?"object expected":c.domain!=null&&c.hasOwnProperty("domain")&&!v.isString(c.domain)?"domain: string expected":c.version!=null&&c.hasOwnProperty("version")&&!(v.isInteger(c.version)||c.version&&v.isInteger(c.version.low)&&v.isInteger(c.version.high))?"version: integer|Long expected":null},f.fromObject=function(c){if(c instanceof g.onnx.OperatorSetIdProto)return c;var y=new g.onnx.OperatorSetIdProto;return c.domain!=null&&(y.domain=String(c.domain)),c.version!=null&&(v.Long?(y.version=v.Long.fromValue(c.version)).unsigned=!1:typeof c.version=="string"?y.version=parseInt(c.version,10):typeof c.version=="number"?y.version=c.version:typeof c.version=="object"&&(y.version=new v.LongBits(c.version.low>>>0,c.version.high>>>0).toNumber())),y},f.toObject=function(c,y){y||(y={});var _={};if(y.defaults)if(_.domain="",v.Long){var b=new v.Long(0,0,!1);_.version=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else _.version=y.longs===String?"0":0;return c.domain!=null&&c.hasOwnProperty("domain")&&(_.domain=c.domain),c.version!=null&&c.hasOwnProperty("version")&&(typeof c.version=="number"?_.version=y.longs===String?String(c.version):c.version:_.version=y.longs===String?v.Long.prototype.toString.call(c.version):y.longs===Number?new v.LongBits(c.version.low>>>0,c.version.high>>>0).toNumber():c.version),_},f.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},f}(),s),n.exports=g},2100:(n,t,r)=>{n.exports=r(9482)},9482:(n,t,r)=>{var a=t;function o(){a.util._configure(),a.Writer._configure(a.BufferWriter),a.Reader._configure(a.BufferReader)}a.build="minimal",a.Writer=r(1173),a.BufferWriter=r(3155),a.Reader=r(1408),a.BufferReader=r(593),a.util=r(9693),a.rpc=r(5994),a.roots=r(5054),a.configure=o,o()},1408:(n,t,r)=>{n.exports=d;var a,o=r(9693),s=o.LongBits,l=o.utf8;function u(b,S){return RangeError("index out of range: "+b.pos+" + "+(S||1)+" > "+b.len)}function d(b){this.buf=b,this.pos=0,this.len=b.length}var v,g=typeof Uint8Array<"u"?function(b){if(b instanceof Uint8Array||Array.isArray(b))return new d(b);throw Error("illegal buffer")}:function(b){if(Array.isArray(b))return new d(b);throw Error("illegal buffer")},f=function(){return o.Buffer?function(b){return(d.create=function(S){return o.Buffer.isBuffer(S)?new a(S):g(S)})(b)}:g};function c(){var b=new s(0,0),S=0;if(!(this.len-this.pos>4)){for(;S<3;++S){if(this.pos>=this.len)throw u(this);if(b.lo=(b.lo|(127&this.buf[this.pos])<<7*S)>>>0,this.buf[this.pos++]<128)return b}return b.lo=(b.lo|(127&this.buf[this.pos++])<<7*S)>>>0,b}for(;S<4;++S)if(b.lo=(b.lo|(127&this.buf[this.pos])<<7*S)>>>0,this.buf[this.pos++]<128)return b;if(b.lo=(b.lo|(127&this.buf[this.pos])<<28)>>>0,b.hi=(b.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return b;if(S=0,this.len-this.pos>4){for(;S<5;++S)if(b.hi=(b.hi|(127&this.buf[this.pos])<<7*S+3)>>>0,this.buf[this.pos++]<128)return b}else for(;S<5;++S){if(this.pos>=this.len)throw u(this);if(b.hi=(b.hi|(127&this.buf[this.pos])<<7*S+3)>>>0,this.buf[this.pos++]<128)return b}throw Error("invalid varint encoding")}function y(b,S){return(b[S-4]|b[S-3]<<8|b[S-2]<<16|b[S-1]<<24)>>>0}function _(){if(this.pos+8>this.len)throw u(this,8);return new s(y(this.buf,this.pos+=4),y(this.buf,this.pos+=4))}d.create=f(),d.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,d.prototype.uint32=(v=4294967295,function(){if(v=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(v=(v|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(v=(v|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(v=(v|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(v=(v|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return v;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return v}),d.prototype.int32=function(){return 0|this.uint32()},d.prototype.sint32=function(){var b=this.uint32();return b>>>1^-(1&b)|0},d.prototype.bool=function(){return this.uint32()!==0},d.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return y(this.buf,this.pos+=4)},d.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return 0|y(this.buf,this.pos+=4)},d.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var b=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,b},d.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var b=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,b},d.prototype.bytes=function(){var b=this.uint32(),S=this.pos,x=this.pos+b;if(x>this.len)throw u(this,b);return this.pos+=b,Array.isArray(this.buf)?this.buf.slice(S,x):S===x?new this.buf.constructor(0):this._slice.call(this.buf,S,x)},d.prototype.string=function(){var b=this.bytes();return l.read(b,0,b.length)},d.prototype.skip=function(b){if(typeof b=="number"){if(this.pos+b>this.len)throw u(this,b);this.pos+=b}else do if(this.pos>=this.len)throw u(this);while(128&this.buf[this.pos++]);return this},d.prototype.skipType=function(b){switch(b){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(b=7&this.uint32())!=4;)this.skipType(b);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+b+" at offset "+this.pos)}return this},d._configure=function(b){a=b,d.create=f(),a._configure();var S=o.Long?"toLong":"toNumber";o.merge(d.prototype,{int64:function(){return c.call(this)[S](!1)},uint64:function(){return c.call(this)[S](!0)},sint64:function(){return c.call(this).zzDecode()[S](!1)},fixed64:function(){return _.call(this)[S](!0)},sfixed64:function(){return _.call(this)[S](!1)}})}},593:(n,t,r)=>{n.exports=s;var a=r(1408);(s.prototype=Object.create(a.prototype)).constructor=s;var o=r(9693);function s(l){a.call(this,l)}s._configure=function(){o.Buffer&&(s.prototype._slice=o.Buffer.prototype.slice)},s.prototype.string=function(){var l=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+l,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+l,this.len))},s._configure()},5054:n=>{n.exports={}},5994:(n,t,r)=>{t.Service=r(7948)},7948:(n,t,r)=>{n.exports=o;var a=r(9693);function o(s,l,u){if(typeof s!="function")throw TypeError("rpcImpl must be a function");a.EventEmitter.call(this),this.rpcImpl=s,this.requestDelimited=!!l,this.responseDelimited=!!u}(o.prototype=Object.create(a.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function s(l,u,d,v,g){if(!v)throw TypeError("request must be specified");var f=this;if(!g)return a.asPromise(s,f,l,u,d,v);if(f.rpcImpl)try{return f.rpcImpl(l,u[f.requestDelimited?"encodeDelimited":"encode"](v).finish(),function(c,y){if(c)return f.emit("error",c,l),g(c);if(y!==null){if(!(y instanceof d))try{y=d[f.responseDelimited?"decodeDelimited":"decode"](y)}catch(_){return f.emit("error",_,l),g(_)}return f.emit("data",y,l),g(null,y)}f.end(!0)})}catch(c){return f.emit("error",c,l),void setTimeout(function(){g(c)},0)}else setTimeout(function(){g(Error("already ended"))},0)},o.prototype.end=function(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(n,t,r)=>{n.exports=o;var a=r(9693);function o(d,v){this.lo=d>>>0,this.hi=v>>>0}var s=o.zero=new o(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var l=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(d){if(d===0)return s;var v=d<0;v&&(d=-d);var g=d>>>0,f=(d-g)/4294967296>>>0;return v&&(f=~f>>>0,g=~g>>>0,++g>4294967295&&(g=0,++f>4294967295&&(f=0))),new o(g,f)},o.from=function(d){if(typeof d=="number")return o.fromNumber(d);if(a.isString(d)){if(!a.Long)return o.fromNumber(parseInt(d,10));d=a.Long.fromString(d)}return d.low||d.high?new o(d.low>>>0,d.high>>>0):s},o.prototype.toNumber=function(d){if(!d&&this.hi>>>31){var v=1+~this.lo>>>0,g=~this.hi>>>0;return v||(g=g+1>>>0),-(v+4294967296*g)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(d){return a.Long?new a.Long(0|this.lo,0|this.hi,!!d):{low:0|this.lo,high:0|this.hi,unsigned:!!d}};var u=String.prototype.charCodeAt;o.fromHash=function(d){return d===l?s:new o((u.call(d,0)|u.call(d,1)<<8|u.call(d,2)<<16|u.call(d,3)<<24)>>>0,(u.call(d,4)|u.call(d,5)<<8|u.call(d,6)<<16|u.call(d,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var d=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^d)>>>0,this.lo=(this.lo<<1^d)>>>0,this},o.prototype.zzDecode=function(){var d=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^d)>>>0,this.hi=(this.hi>>>1^d)>>>0,this},o.prototype.length=function(){var d=this.lo,v=(this.lo>>>28|this.hi<<4)>>>0,g=this.hi>>>24;return g===0?v===0?d<16384?d<128?1:2:d<2097152?3:4:v<16384?v<128?5:6:v<2097152?7:8:g<128?9:10}},9693:function(n,t,r){var a=t;function o(l,u,d){for(var v=Object.keys(u),g=0;g<v.length;++g)l[v[g]]!==void 0&&d||(l[v[g]]=u[v[g]]);return l}function s(l){function u(d,v){if(!(this instanceof u))return new u(d,v);Object.defineProperty(this,"message",{get:function(){return d}}),Error.captureStackTrace?Error.captureStackTrace(this,u):Object.defineProperty(this,"stack",{value:new Error().stack||""}),v&&o(this,v)}return(u.prototype=Object.create(Error.prototype)).constructor=u,Object.defineProperty(u.prototype,"name",{get:function(){return l}}),u.prototype.toString=function(){return this.name+": "+this.message},u}a.asPromise=r(4537),a.base64=r(7419),a.EventEmitter=r(9211),a.float=r(945),a.inquire=r(7199),a.utf8=r(4997),a.pool=r(6662),a.LongBits=r(1945),a.isNode=!!(r.g!==void 0&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),a.global=a.isNode&&r.g||typeof window<"u"&&window||typeof self<"u"&&self||this,a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isInteger=Number.isInteger||function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},a.isString=function(l){return typeof l=="string"||l instanceof String},a.isObject=function(l){return l&&typeof l=="object"},a.isset=a.isSet=function(l,u){var d=l[u];return!(d==null||!l.hasOwnProperty(u))&&(typeof d!="object"||(Array.isArray(d)?d.length:Object.keys(d).length)>0)},a.Buffer=function(){try{var l=a.inquire("buffer").Buffer;return l.prototype.utf8Write?l:null}catch{return null}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(l){return typeof l=="number"?a.Buffer?a._Buffer_allocUnsafe(l):new a.Array(l):a.Buffer?a._Buffer_from(l):typeof Uint8Array>"u"?l:new Uint8Array(l)},a.Array=typeof Uint8Array<"u"?Uint8Array:Array,a.Long=a.global.dcodeIO&&a.global.dcodeIO.Long||a.global.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(l){return l?a.LongBits.from(l).toHash():a.LongBits.zeroHash},a.longFromHash=function(l,u){var d=a.LongBits.fromHash(l);return a.Long?a.Long.fromBits(d.lo,d.hi,u):d.toNumber(!!u)},a.merge=o,a.lcFirst=function(l){return l.charAt(0).toLowerCase()+l.substring(1)},a.newError=s,a.ProtocolError=s("ProtocolError"),a.oneOfGetter=function(l){for(var u={},d=0;d<l.length;++d)u[l[d]]=1;return function(){for(var v=Object.keys(this),g=v.length-1;g>-1;--g)if(u[v[g]]===1&&this[v[g]]!==void 0&&this[v[g]]!==null)return v[g]}},a.oneOfSetter=function(l){return function(u){for(var d=0;d<l.length;++d)l[d]!==u&&delete this[l[d]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var l=a.Buffer;l?(a._Buffer_from=l.from!==Uint8Array.from&&l.from||function(u,d){return new l(u,d)},a._Buffer_allocUnsafe=l.allocUnsafe||function(u){return new l(u)}):a._Buffer_from=a._Buffer_allocUnsafe=null}},1173:(n,t,r)=>{n.exports=f;var a,o=r(9693),s=o.LongBits,l=o.base64,u=o.utf8;function d(w,T,A){this.fn=w,this.len=T,this.next=void 0,this.val=A}function v(){}function g(w){this.head=w.head,this.tail=w.tail,this.len=w.len,this.next=w.states}function f(){this.len=0,this.head=new d(v,0,0),this.tail=this.head,this.states=null}var c=function(){return o.Buffer?function(){return(f.create=function(){return new a})()}:function(){return new f}};function y(w,T,A){T[A]=255&w}function _(w,T){this.len=w,this.next=void 0,this.val=T}function b(w,T,A){for(;w.hi;)T[A++]=127&w.lo|128,w.lo=(w.lo>>>7|w.hi<<25)>>>0,w.hi>>>=7;for(;w.lo>127;)T[A++]=127&w.lo|128,w.lo=w.lo>>>7;T[A++]=w.lo}function S(w,T,A){T[A]=255&w,T[A+1]=w>>>8&255,T[A+2]=w>>>16&255,T[A+3]=w>>>24}f.create=c(),f.alloc=function(w){return new o.Array(w)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(w,T,A){return this.tail=this.tail.next=new d(w,T,A),this.len+=T,this},_.prototype=Object.create(d.prototype),_.prototype.fn=function(w,T,A){for(;w>127;)T[A++]=127&w|128,w>>>=7;T[A]=w},f.prototype.uint32=function(w){return this.len+=(this.tail=this.tail.next=new _((w>>>=0)<128?1:w<16384?2:w<2097152?3:w<268435456?4:5,w)).len,this},f.prototype.int32=function(w){return w<0?this._push(b,10,s.fromNumber(w)):this.uint32(w)},f.prototype.sint32=function(w){return this.uint32((w<<1^w>>31)>>>0)},f.prototype.uint64=function(w){var T=s.from(w);return this._push(b,T.length(),T)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(w){var T=s.from(w).zzEncode();return this._push(b,T.length(),T)},f.prototype.bool=function(w){return this._push(y,1,w?1:0)},f.prototype.fixed32=function(w){return this._push(S,4,w>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(w){var T=s.from(w);return this._push(S,4,T.lo)._push(S,4,T.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(w){return this._push(o.float.writeFloatLE,4,w)},f.prototype.double=function(w){return this._push(o.float.writeDoubleLE,8,w)};var x=o.Array.prototype.set?function(w,T,A){T.set(w,A)}:function(w,T,A){for(var E=0;E<w.length;++E)T[A+E]=w[E]};f.prototype.bytes=function(w){var T=w.length>>>0;if(!T)return this._push(y,1,0);if(o.isString(w)){var A=f.alloc(T=l.length(w));l.decode(w,A,0),w=A}return this.uint32(T)._push(x,T,w)},f.prototype.string=function(w){var T=u.length(w);return T?this.uint32(T)._push(u.write,T,w):this._push(y,1,0)},f.prototype.fork=function(){return this.states=new g(this),this.head=this.tail=new d(v,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new d(v,0,0),this.len=0),this},f.prototype.ldelim=function(){var w=this.head,T=this.tail,A=this.len;return this.reset().uint32(A),A&&(this.tail.next=w.next,this.tail=T,this.len+=A),this},f.prototype.finish=function(){for(var w=this.head.next,T=this.constructor.alloc(this.len),A=0;w;)w.fn(w.val,T,A),A+=w.len,w=w.next;return T},f._configure=function(w){a=w,f.create=c(),a._configure()}},3155:(n,t,r)=>{n.exports=s;var a=r(1173);(s.prototype=Object.create(a.prototype)).constructor=s;var o=r(9693);function s(){a.call(this)}function l(u,d,v){u.length<40?o.utf8.write(u,d,v):d.utf8Write?d.utf8Write(u,v):d.write(u,v)}s._configure=function(){s.alloc=o._Buffer_allocUnsafe,s.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&o.Buffer.prototype.set.name==="set"?function(u,d,v){d.set(u,v)}:function(u,d,v){if(u.copy)u.copy(d,v,0,u.length);else for(var g=0;g<u.length;)d[v++]=u[g++]}},s.prototype.bytes=function(u){o.isString(u)&&(u=o._Buffer_from(u,"base64"));var d=u.length>>>0;return this.uint32(d),d&&this._push(s.writeBytesBuffer,d,u),this},s.prototype.string=function(u){var d=o.Buffer.byteLength(u);return this.uint32(d),d&&this._push(l,d,u),this},s._configure()},4154:n=>{n.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},7067:()=>{},1296:()=>{},760:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(n,t,r)=>{r.r(t),r.d(t,{flatbuffers:()=>a});var a={};a.Offset,a.Table,a.SIZEOF_SHORT=2,a.SIZEOF_INT=4,a.FILE_IDENTIFIER_LENGTH=4,a.SIZE_PREFIX_LENGTH=4,a.Encoding={UTF8_BYTES:1,UTF16_STRING:2},a.int32=new Int32Array(2),a.float32=new Float32Array(a.int32.buffer),a.float64=new Float64Array(a.int32.buffer),a.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,a.Long=function(o,s){this.low=0|o,this.high=0|s},a.Long.create=function(o,s){return o==0&&s==0?a.Long.ZERO:new a.Long(o,s)},a.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},a.Long.prototype.equals=function(o){return this.low==o.low&&this.high==o.high},a.Long.ZERO=new a.Long(0,0),a.Builder=function(o){if(o)s=o;else var s=1024;this.bb=a.ByteBuffer.allocate(s),this.space=s,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},a.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},a.Builder.prototype.forceDefaults=function(o){this.force_defaults=o},a.Builder.prototype.dataBuffer=function(){return this.bb},a.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},a.Builder.prototype.prep=function(o,s){o>this.minalign&&(this.minalign=o);for(var l=1+~(this.bb.capacity()-this.space+s)&o-1;this.space<l+o+s;){var u=this.bb.capacity();this.bb=a.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-u}this.pad(l)},a.Builder.prototype.pad=function(o){for(var s=0;s<o;s++)this.bb.writeInt8(--this.space,0)},a.Builder.prototype.writeInt8=function(o){this.bb.writeInt8(this.space-=1,o)},a.Builder.prototype.writeInt16=function(o){this.bb.writeInt16(this.space-=2,o)},a.Builder.prototype.writeInt32=function(o){this.bb.writeInt32(this.space-=4,o)},a.Builder.prototype.writeInt64=function(o){this.bb.writeInt64(this.space-=8,o)},a.Builder.prototype.writeFloat32=function(o){this.bb.writeFloat32(this.space-=4,o)},a.Builder.prototype.writeFloat64=function(o){this.bb.writeFloat64(this.space-=8,o)},a.Builder.prototype.addInt8=function(o){this.prep(1,0),this.writeInt8(o)},a.Builder.prototype.addInt16=function(o){this.prep(2,0),this.writeInt16(o)},a.Builder.prototype.addInt32=function(o){this.prep(4,0),this.writeInt32(o)},a.Builder.prototype.addInt64=function(o){this.prep(8,0),this.writeInt64(o)},a.Builder.prototype.addFloat32=function(o){this.prep(4,0),this.writeFloat32(o)},a.Builder.prototype.addFloat64=function(o){this.prep(8,0),this.writeFloat64(o)},a.Builder.prototype.addFieldInt8=function(o,s,l){(this.force_defaults||s!=l)&&(this.addInt8(s),this.slot(o))},a.Builder.prototype.addFieldInt16=function(o,s,l){(this.force_defaults||s!=l)&&(this.addInt16(s),this.slot(o))},a.Builder.prototype.addFieldInt32=function(o,s,l){(this.force_defaults||s!=l)&&(this.addInt32(s),this.slot(o))},a.Builder.prototype.addFieldInt64=function(o,s,l){!this.force_defaults&&s.equals(l)||(this.addInt64(s),this.slot(o))},a.Builder.prototype.addFieldFloat32=function(o,s,l){(this.force_defaults||s!=l)&&(this.addFloat32(s),this.slot(o))},a.Builder.prototype.addFieldFloat64=function(o,s,l){(this.force_defaults||s!=l)&&(this.addFloat64(s),this.slot(o))},a.Builder.prototype.addFieldOffset=function(o,s,l){(this.force_defaults||s!=l)&&(this.addOffset(s),this.slot(o))},a.Builder.prototype.addFieldStruct=function(o,s,l){s!=l&&(this.nested(s),this.slot(o))},a.Builder.prototype.nested=function(o){if(o!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},a.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},a.Builder.prototype.slot=function(o){this.vtable[o]=this.offset()},a.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},a.Builder.growByteBuffer=function(o){var s=o.capacity();if(3221225472&s)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var l=s<<1,u=a.ByteBuffer.allocate(l);return u.setPosition(l-s),u.bytes().set(o.bytes(),l-s),u},a.Builder.prototype.addOffset=function(o){this.prep(a.SIZEOF_INT,0),this.writeInt32(this.offset()-o+a.SIZEOF_INT)},a.Builder.prototype.startObject=function(o){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=o;for(var s=0;s<o;s++)this.vtable[s]=0;this.isNested=!0,this.object_start=this.offset()},a.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var o=this.offset(),s=this.vtable_in_use-1;s>=0&&this.vtable[s]==0;s--);for(var l=s+1;s>=0;s--)this.addInt16(this.vtable[s]!=0?o-this.vtable[s]:0);this.addInt16(o-this.object_start);var u=(l+2)*a.SIZEOF_SHORT;this.addInt16(u);var d=0,v=this.space;e:for(s=0;s<this.vtables.length;s++){var g=this.bb.capacity()-this.vtables[s];if(u==this.bb.readInt16(g)){for(var f=a.SIZEOF_SHORT;f<u;f+=a.SIZEOF_SHORT)if(this.bb.readInt16(v+f)!=this.bb.readInt16(g+f))continue e;d=this.vtables[s];break}}return d?(this.space=this.bb.capacity()-o,this.bb.writeInt32(this.space,d-o)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-o,this.offset()-o)),this.isNested=!1,o},a.Builder.prototype.finish=function(o,s,l){var u=l?a.SIZE_PREFIX_LENGTH:0;if(s){var d=s;if(this.prep(this.minalign,a.SIZEOF_INT+a.FILE_IDENTIFIER_LENGTH+u),d.length!=a.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+a.FILE_IDENTIFIER_LENGTH);for(var v=a.FILE_IDENTIFIER_LENGTH-1;v>=0;v--)this.writeInt8(d.charCodeAt(v))}this.prep(this.minalign,a.SIZEOF_INT+u),this.addOffset(o),u&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},a.Builder.prototype.finishSizePrefixed=function(o,s){this.finish(o,s,!0)},a.Builder.prototype.requiredField=function(o,s){var l=this.bb.capacity()-o,u=l-this.bb.readInt32(l);if(this.bb.readInt16(u+s)==0)throw new Error("FlatBuffers: field "+s+" must be set")},a.Builder.prototype.startVector=function(o,s,l){this.notNested(),this.vector_num_elems=s,this.prep(a.SIZEOF_INT,o*s),this.prep(l,o*s)},a.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},a.Builder.prototype.createString=function(o){if(o instanceof Uint8Array)var s=o;else{s=[];for(var l=0;l<o.length;){var u,d=o.charCodeAt(l++);(u=d<55296||d>=56320?d:(d<<10)+o.charCodeAt(l++)+-56613888)<128?s.push(u):(u<2048?s.push(u>>6&31|192):(u<65536?s.push(u>>12&15|224):s.push(u>>18&7|240,u>>12&63|128),s.push(u>>6&63|128)),s.push(63&u|128))}}this.addInt8(0),this.startVector(1,s.length,1),this.bb.setPosition(this.space-=s.length),l=0;for(var v=this.space,g=this.bb.bytes();l<s.length;l++)g[v++]=s[l];return this.endVector()},a.Builder.prototype.createLong=function(o,s){return a.Long.create(o,s)},a.ByteBuffer=function(o){this.bytes_=o,this.position_=0},a.ByteBuffer.allocate=function(o){return new a.ByteBuffer(new Uint8Array(o))},a.ByteBuffer.prototype.clear=function(){this.position_=0},a.ByteBuffer.prototype.bytes=function(){return this.bytes_},a.ByteBuffer.prototype.position=function(){return this.position_},a.ByteBuffer.prototype.setPosition=function(o){this.position_=o},a.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},a.ByteBuffer.prototype.readInt8=function(o){return this.readUint8(o)<<24>>24},a.ByteBuffer.prototype.readUint8=function(o){return this.bytes_[o]},a.ByteBuffer.prototype.readInt16=function(o){return this.readUint16(o)<<16>>16},a.ByteBuffer.prototype.readUint16=function(o){return this.bytes_[o]|this.bytes_[o+1]<<8},a.ByteBuffer.prototype.readInt32=function(o){return this.bytes_[o]|this.bytes_[o+1]<<8|this.bytes_[o+2]<<16|this.bytes_[o+3]<<24},a.ByteBuffer.prototype.readUint32=function(o){return this.readInt32(o)>>>0},a.ByteBuffer.prototype.readInt64=function(o){return new a.Long(this.readInt32(o),this.readInt32(o+4))},a.ByteBuffer.prototype.readUint64=function(o){return new a.Long(this.readUint32(o),this.readUint32(o+4))},a.ByteBuffer.prototype.readFloat32=function(o){return a.int32[0]=this.readInt32(o),a.float32[0]},a.ByteBuffer.prototype.readFloat64=function(o){return a.int32[a.isLittleEndian?0:1]=this.readInt32(o),a.int32[a.isLittleEndian?1:0]=this.readInt32(o+4),a.float64[0]},a.ByteBuffer.prototype.writeInt8=function(o,s){this.bytes_[o]=s},a.ByteBuffer.prototype.writeUint8=function(o,s){this.bytes_[o]=s},a.ByteBuffer.prototype.writeInt16=function(o,s){this.bytes_[o]=s,this.bytes_[o+1]=s>>8},a.ByteBuffer.prototype.writeUint16=function(o,s){this.bytes_[o]=s,this.bytes_[o+1]=s>>8},a.ByteBuffer.prototype.writeInt32=function(o,s){this.bytes_[o]=s,this.bytes_[o+1]=s>>8,this.bytes_[o+2]=s>>16,this.bytes_[o+3]=s>>24},a.ByteBuffer.prototype.writeUint32=function(o,s){this.bytes_[o]=s,this.bytes_[o+1]=s>>8,this.bytes_[o+2]=s>>16,this.bytes_[o+3]=s>>24},a.ByteBuffer.prototype.writeInt64=function(o,s){this.writeInt32(o,s.low),this.writeInt32(o+4,s.high)},a.ByteBuffer.prototype.writeUint64=function(o,s){this.writeUint32(o,s.low),this.writeUint32(o+4,s.high)},a.ByteBuffer.prototype.writeFloat32=function(o,s){a.float32[0]=s,this.writeInt32(o,a.int32[0])},a.ByteBuffer.prototype.writeFloat64=function(o,s){a.float64[0]=s,this.writeInt32(o,a.int32[a.isLittleEndian?0:1]),this.writeInt32(o+4,a.int32[a.isLittleEndian?1:0])},a.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+a.SIZEOF_INT+a.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var o="",s=0;s<a.FILE_IDENTIFIER_LENGTH;s++)o+=String.fromCharCode(this.readInt8(this.position_+a.SIZEOF_INT+s));return o},a.ByteBuffer.prototype.__offset=function(o,s){var l=o-this.readInt32(o);return s<this.readInt16(l)?this.readInt16(l+s):0},a.ByteBuffer.prototype.__union=function(o,s){return o.bb_pos=s+this.readInt32(s),o.bb=this,o},a.ByteBuffer.prototype.__string=function(o,s){o+=this.readInt32(o);var l=this.readInt32(o),u="",d=0;if(o+=a.SIZEOF_INT,s===a.Encoding.UTF8_BYTES)return this.bytes_.subarray(o,o+l);for(;d<l;){var v,g=this.readUint8(o+d++);if(g<192)v=g;else{var f=this.readUint8(o+d++);if(g<224)v=(31&g)<<6|63&f;else{var c=this.readUint8(o+d++);v=g<240?(15&g)<<12|(63&f)<<6|63&c:(7&g)<<18|(63&f)<<12|(63&c)<<6|63&this.readUint8(o+d++)}}v<65536?u+=String.fromCharCode(v):(v-=65536,u+=String.fromCharCode(55296+(v>>10),56320+(1023&v)))}return u},a.ByteBuffer.prototype.__indirect=function(o){return o+this.readInt32(o)},a.ByteBuffer.prototype.__vector=function(o){return o+this.readInt32(o)+a.SIZEOF_INT},a.ByteBuffer.prototype.__vector_len=function(o){return this.readInt32(o+this.readInt32(o))},a.ByteBuffer.prototype.__has_identifier=function(o){if(o.length!=a.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+a.FILE_IDENTIFIER_LENGTH);for(var s=0;s<a.FILE_IDENTIFIER_LENGTH;s++)if(o.charCodeAt(s)!=this.readInt8(this.position_+a.SIZEOF_INT+s))return!1;return!0},a.ByteBuffer.prototype.createLong=function(o,s){return a.Long.create(o,s)}}},__webpack_module_cache__={};function __webpack_require__(n){var t=__webpack_module_cache__[n];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(n,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),__webpack_require__.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1057);return __webpack_exports__})())})(ort_min);export{pointer as A,watch as B,createCommentVNode as C,pushScopeId as D,popScopeId as E,Fragment as F,init$1 as G,createStaticVNode as H,onUnmounted as I,withDirectives as J,vModelText as K,createTextVNode as L,VditorPreview as V,createRouter as a,createWebHashHistory as b,createBlock as c,createApp as d,useRoute as e,createElementBlock as f,createBaseVNode as g,renderList as h,unref as i,createVNode$1 as j,normalizeClass as k,inject as l,reactive as m,normalizeStyle$1 as n,openBlock as o,provide as p,ref as q,resolveComponent as r,onMounted as s,toDisplayString as t,useRouter as u,feature as v,mercator as w,index$1 as x,select as y,zoom as z};
